   1               		.file	"ServerTDMA.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  12               	sysclk_get_main_hz:
  13               	.LFB67:
  14               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  15               		.loc 1 175 0
  16               		.cfi_startproc
  17 0000 CF93      		push r28
  18               	.LCFI0:
  19               		.cfi_def_cfa_offset 3
  20               		.cfi_offset 28, -2
  21 0002 DF93      		push r29
  22               	.LCFI1:
  23               		.cfi_def_cfa_offset 4
  24               		.cfi_offset 29, -3
  25 0004 CDB7      		in r28,__SP_L__
  26 0006 DEB7      		in r29,__SP_H__
  27               	.LCFI2:
  28               		.cfi_def_cfa_register 28
  29               	/* prologue: function */
  30               	/* frame size = 0 */
  31               	/* stack size = 2 */
  32               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  33               		.loc 1 185 0
  34 0008 80E0      		ldi r24,0
  35 000a 94E2      		ldi r25,lo8(36)
  36 000c A4EF      		ldi r26,lo8(-12)
  37 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  38               		.loc 1 195 0
  39 0010 BC01      		movw r22,r24
  40 0012 CD01      		movw r24,r26
  41               	/* epilogue start */
  42 0014 DF91      		pop r29
  43 0016 CF91      		pop r28
  44 0018 0895      		ret
  45               		.cfi_endproc
  46               	.LFE67:
  49               	sysclk_get_source_clock_hz:
  50               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  51               		.loc 1 206 0
  52               		.cfi_startproc
  53 001a CF93      		push r28
  54               	.LCFI3:
  55               		.cfi_def_cfa_offset 3
  56               		.cfi_offset 28, -2
  57 001c DF93      		push r29
  58               	.LCFI4:
  59               		.cfi_def_cfa_offset 4
  60               		.cfi_offset 29, -3
  61 001e CDB7      		in r28,__SP_L__
  62 0020 DEB7      		in r29,__SP_H__
  63               	.LCFI5:
  64               		.cfi_def_cfa_register 28
  65               	/* prologue: function */
  66               	/* frame size = 0 */
  67               	/* stack size = 2 */
  68               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  69               		.loc 1 213 0
  70 0022 0E94 0000 		call sysclk_get_main_hz
  71 0026 DC01      		movw r26,r24
  72 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  73               		.loc 1 284 0
  74 002a BC01      		movw r22,r24
  75 002c CD01      		movw r24,r26
  76               	/* epilogue start */
  77 002e DF91      		pop r29
  78 0030 CF91      		pop r28
  79 0032 0895      		ret
  80               		.cfi_endproc
  81               	.LFE68:
  83               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  86               	baudctrl_1mhz:
  87 0000 3300      		.word	51
  88 0002 1900      		.word	25
  89 0004 0C00      		.word	12
  90 0006 0600      		.word	6
  91 0008 0300      		.word	3
  92 000a 0200      		.word	2
  93 000c 0100      		.word	1
  94 000e FF00      		.word	255
  95               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
  98               	baudctrl_8mhz:
  99 0000 A001      		.word	416
 100 0002 CF00      		.word	207
 101 0004 6700      		.word	103
 102 0006 3300      		.word	51
 103 0008 1900      		.word	25
 104 000a 0C00      		.word	12
 105 000c 0700      		.word	7
 106 000e 0800      		.word	8
 107               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 110               	baudctrl_16mhz:
 111 0000 4003      		.word	832
 112 0002 A001      		.word	416
 113 0004 CF00      		.word	207
 114 0006 6700      		.word	103
 115 0008 3300      		.word	51
 116 000a 1900      		.word	25
 117 000c 1000      		.word	16
 118 000e 1000      		.word	16
 119               		.text
 121               	usart_double_baud_enable:
 122               	.LFB101:
 123               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 124               		.loc 2 515 0
 125               		.cfi_startproc
 126 0034 CF93      		push r28
 127               	.LCFI6:
 128               		.cfi_def_cfa_offset 3
 129               		.cfi_offset 28, -2
 130 0036 DF93      		push r29
 131               	.LCFI7:
 132               		.cfi_def_cfa_offset 4
 133               		.cfi_offset 29, -3
 134 0038 00D0      		rcall .
 135               	.LCFI8:
 136               		.cfi_def_cfa_offset 6
 137 003a CDB7      		in r28,__SP_L__
 138 003c DEB7      		in r29,__SP_H__
 139               	.LCFI9:
 140               		.cfi_def_cfa_register 28
 141               	/* prologue: function */
 142               	/* frame size = 2 */
 143               	/* stack size = 4 */
 144               	.L__stack_usage = 4
 145 003e 9A83      		std Y+2,r25
 146 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 147               		.loc 2 516 0
 148 0042 8981      		ldd r24,Y+1
 149 0044 9A81      		ldd r25,Y+2
 150 0046 FC01      		movw r30,r24
 151 0048 8081      		ld r24,Z
 152 004a 282F      		mov r18,r24
 153 004c 2260      		ori r18,lo8(2)
 154 004e 8981      		ldd r24,Y+1
 155 0050 9A81      		ldd r25,Y+2
 156 0052 FC01      		movw r30,r24
 157 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 158               		.loc 2 517 0
 159 0056 0000      		nop
 160               	/* epilogue start */
 161 0058 0F90      		pop __tmp_reg__
 162 005a 0F90      		pop __tmp_reg__
 163 005c DF91      		pop r29
 164 005e CF91      		pop r28
 165 0060 0895      		ret
 166               		.cfi_endproc
 167               	.LFE101:
 170               	usart_serial_init:
 171               	.LFB104:
 172               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 173               		.loc 3 77 0
 174               		.cfi_startproc
 175 0062 CF93      		push r28
 176               	.LCFI10:
 177               		.cfi_def_cfa_offset 3
 178               		.cfi_offset 28, -2
 179 0064 DF93      		push r29
 180               	.LCFI11:
 181               		.cfi_def_cfa_offset 4
 182               		.cfi_offset 29, -3
 183 0066 CDB7      		in r28,__SP_L__
 184 0068 DEB7      		in r29,__SP_H__
 185               	.LCFI12:
 186               		.cfi_def_cfa_register 28
 187 006a 2B97      		sbiw r28,11
 188               	.LCFI13:
 189               		.cfi_def_cfa_offset 15
 190 006c 0FB6      		in __tmp_reg__,__SREG__
 191 006e F894      		cli
 192 0070 DEBF      		out __SP_H__,r29
 193 0072 0FBE      		out __SREG__,__tmp_reg__
 194 0074 CDBF      		out __SP_L__,r28
 195               	/* prologue: function */
 196               	/* frame size = 11 */
 197               	/* stack size = 13 */
 198               	.L__stack_usage = 13
 199 0076 9987      		std Y+9,r25
 200 0078 8887      		std Y+8,r24
 201 007a 7B87      		std Y+11,r23
 202 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 203               		.loc 3 80 0
 204 007e 8A85      		ldd r24,Y+10
 205 0080 9B85      		ldd r25,Y+11
 206 0082 FC01      		movw r30,r24
 207 0084 8481      		ldd r24,Z+4
 208 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 209               		.loc 3 81 0
 210 0088 8A85      		ldd r24,Y+10
 211 008a 9B85      		ldd r25,Y+11
 212 008c FC01      		movw r30,r24
 213 008e 8581      		ldd r24,Z+5
 214 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 215               		.loc 3 82 0
 216 0092 8A85      		ldd r24,Y+10
 217 0094 9B85      		ldd r25,Y+11
 218 0096 FC01      		movw r30,r24
 219 0098 8681      		ldd r24,Z+6
 220 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 221               		.loc 3 83 0
 222 009c 8A85      		ldd r24,Y+10
 223 009e 9B85      		ldd r25,Y+11
 224 00a0 FC01      		movw r30,r24
 225 00a2 8081      		ld r24,Z
 226 00a4 9181      		ldd r25,Z+1
 227 00a6 A281      		ldd r26,Z+2
 228 00a8 B381      		ldd r27,Z+3
 229 00aa 8983      		std Y+1,r24
 230 00ac 9A83      		std Y+2,r25
 231 00ae AB83      		std Y+3,r26
 232 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 233               		.loc 3 85 0
 234 00b2 8885      		ldd r24,Y+8
 235 00b4 9985      		ldd r25,Y+9
 236 00b6 9E01      		movw r18,r28
 237 00b8 2F5F      		subi r18,-1
 238 00ba 3F4F      		sbci r19,-1
 239 00bc B901      		movw r22,r18
 240 00be 0E94 0000 		call usart_init_rs232
 241 00c2 8823      		tst r24
 242 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 243               		.loc 3 86 0
 244 00c6 81E0      		ldi r24,lo8(1)
 245 00c8 00C0      		rjmp .L9
 246               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 247               		.loc 3 88 0
 248 00ca 80E0      		ldi r24,0
 249               	.L9:
 250               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 251               		.loc 3 90 0 discriminator 1
 252 00cc 2B96      		adiw r28,11
 253 00ce 0FB6      		in __tmp_reg__,__SREG__
 254 00d0 F894      		cli
 255 00d2 DEBF      		out __SP_H__,r29
 256 00d4 0FBE      		out __SREG__,__tmp_reg__
 257 00d6 CDBF      		out __SP_L__,r28
 258 00d8 DF91      		pop r29
 259 00da CF91      		pop r28
 260 00dc 0895      		ret
 261               		.cfi_endproc
 262               	.LFE104:
 265               	usart_serial_putchar:
 266               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 267               		.loc 3 100 0
 268               		.cfi_startproc
 269 00de CF93      		push r28
 270               	.LCFI14:
 271               		.cfi_def_cfa_offset 3
 272               		.cfi_offset 28, -2
 273 00e0 DF93      		push r29
 274               	.LCFI15:
 275               		.cfi_def_cfa_offset 4
 276               		.cfi_offset 29, -3
 277 00e2 00D0      		rcall .
 278 00e4 1F92      		push __zero_reg__
 279               	.LCFI16:
 280               		.cfi_def_cfa_offset 7
 281 00e6 CDB7      		in r28,__SP_L__
 282 00e8 DEB7      		in r29,__SP_H__
 283               	.LCFI17:
 284               		.cfi_def_cfa_register 28
 285               	/* prologue: function */
 286               	/* frame size = 3 */
 287               	/* stack size = 5 */
 288               	.L__stack_usage = 5
 289 00ea 9A83      		std Y+2,r25
 290 00ec 8983      		std Y+1,r24
 291 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 292               		.loc 3 101 0
 293 00f0 8981      		ldd r24,Y+1
 294 00f2 9A81      		ldd r25,Y+2
 295 00f4 6B81      		ldd r22,Y+3
 296 00f6 0E94 0000 		call usart_putchar
 297               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 298               		.loc 3 102 0
 299 00fa 0F90      		pop __tmp_reg__
 300 00fc 0F90      		pop __tmp_reg__
 301 00fe 0F90      		pop __tmp_reg__
 302 0100 DF91      		pop r29
 303 0102 CF91      		pop r28
 304 0104 0895      		ret
 305               		.cfi_endproc
 306               	.LFE105:
 309               	usart_serial_getchar:
 310               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 311               		.loc 3 111 0
 312               		.cfi_startproc
 313 0106 CF93      		push r28
 314               	.LCFI18:
 315               		.cfi_def_cfa_offset 3
 316               		.cfi_offset 28, -2
 317 0108 DF93      		push r29
 318               	.LCFI19:
 319               		.cfi_def_cfa_offset 4
 320               		.cfi_offset 29, -3
 321 010a 00D0      		rcall .
 322 010c 00D0      		rcall .
 323               	.LCFI20:
 324               		.cfi_def_cfa_offset 8
 325 010e CDB7      		in r28,__SP_L__
 326 0110 DEB7      		in r29,__SP_H__
 327               	.LCFI21:
 328               		.cfi_def_cfa_register 28
 329               	/* prologue: function */
 330               	/* frame size = 4 */
 331               	/* stack size = 6 */
 332               	.L__stack_usage = 6
 333 0112 9A83      		std Y+2,r25
 334 0114 8983      		std Y+1,r24
 335 0116 7C83      		std Y+4,r23
 336 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 337               		.loc 3 112 0
 338 011a 8981      		ldd r24,Y+1
 339 011c 9A81      		ldd r25,Y+2
 340 011e 0E94 0000 		call usart_getchar
 341 0122 282F      		mov r18,r24
 342 0124 8B81      		ldd r24,Y+3
 343 0126 9C81      		ldd r25,Y+4
 344 0128 FC01      		movw r30,r24
 345 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 346               		.loc 3 113 0
 347 012c 0000      		nop
 348               	/* epilogue start */
 349 012e 0F90      		pop __tmp_reg__
 350 0130 0F90      		pop __tmp_reg__
 351 0132 0F90      		pop __tmp_reg__
 352 0134 0F90      		pop __tmp_reg__
 353 0136 DF91      		pop r29
 354 0138 CF91      		pop r28
 355 013a 0895      		ret
 356               		.cfi_endproc
 357               	.LFE106:
 360               	stdio_serial_init:
 361               	.LFB107:
 362               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 363               		.loc 4 90 0
 364               		.cfi_startproc
 365 013c CF93      		push r28
 366               	.LCFI22:
 367               		.cfi_def_cfa_offset 3
 368               		.cfi_offset 28, -2
 369 013e DF93      		push r29
 370               	.LCFI23:
 371               		.cfi_def_cfa_offset 4
 372               		.cfi_offset 29, -3
 373 0140 00D0      		rcall .
 374 0142 00D0      		rcall .
 375               	.LCFI24:
 376               		.cfi_def_cfa_offset 8
 377 0144 CDB7      		in r28,__SP_L__
 378 0146 DEB7      		in r29,__SP_H__
 379               	.LCFI25:
 380               		.cfi_def_cfa_register 28
 381               	/* prologue: function */
 382               	/* frame size = 4 */
 383               	/* stack size = 6 */
 384               	.L__stack_usage = 6
 385 0148 9A83      		std Y+2,r25
 386 014a 8983      		std Y+1,r24
 387 014c 7C83      		std Y+4,r23
 388 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 389               		.loc 4 91 0
 390 0150 8981      		ldd r24,Y+1
 391 0152 9A81      		ldd r25,Y+2
 392 0154 9093 0000 		sts stdio_base+1,r25
 393 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 394               		.loc 4 92 0
 395 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 396 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 397 0160 9093 0000 		sts ptr_put+1,r25
 398 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 399               		.loc 4 93 0
 400 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 401 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 402 016c 9093 0000 		sts ptr_get+1,r25
 403 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 404               		.loc 4 95 0
 405 0174 2B81      		ldd r18,Y+3
 406 0176 3C81      		ldd r19,Y+4
 407 0178 8981      		ldd r24,Y+1
 408 017a 9A81      		ldd r25,Y+2
 409 017c B901      		movw r22,r18
 410 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 411               		.loc 4 107 0
 412 0182 60E0      		ldi r22,lo8(gs(_read))
 413 0184 70E0      		ldi r23,hi8(gs(_read))
 414 0186 80E0      		ldi r24,lo8(gs(_write))
 415 0188 90E0      		ldi r25,hi8(gs(_write))
 416 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 417               		.loc 4 120 0
 418 018e 0000      		nop
 419               	/* epilogue start */
 420 0190 0F90      		pop __tmp_reg__
 421 0192 0F90      		pop __tmp_reg__
 422 0194 0F90      		pop __tmp_reg__
 423 0196 0F90      		pop __tmp_reg__
 424 0198 DF91      		pop r29
 425 019a CF91      		pop r28
 426 019c 0895      		ret
 427               		.cfi_endproc
 428               	.LFE107:
 431               	macsc_enable_manual_bts:
 432               	.LFB121:
 433               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 434               		.loc 5 444 0
 435               		.cfi_startproc
 436 019e CF93      		push r28
 437               	.LCFI26:
 438               		.cfi_def_cfa_offset 3
 439               		.cfi_offset 28, -2
 440 01a0 DF93      		push r29
 441               	.LCFI27:
 442               		.cfi_def_cfa_offset 4
 443               		.cfi_offset 29, -3
 444 01a2 CDB7      		in r28,__SP_L__
 445 01a4 DEB7      		in r29,__SP_H__
 446               	.LCFI28:
 447               		.cfi_def_cfa_register 28
 448               	/* prologue: function */
 449               	/* frame size = 0 */
 450               	/* stack size = 2 */
 451               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 452               		.loc 5 445 0
 453 01a6 8CED      		ldi r24,lo8(-36)
 454 01a8 90E0      		ldi r25,0
 455 01aa 2CED      		ldi r18,lo8(-36)
 456 01ac 30E0      		ldi r19,0
 457 01ae F901      		movw r30,r18
 458 01b0 2081      		ld r18,Z
 459 01b2 2064      		ori r18,lo8(64)
 460 01b4 FC01      		movw r30,r24
 461 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 462               		.loc 5 446 0
 463 01b8 8CED      		ldi r24,lo8(-36)
 464 01ba 90E0      		ldi r25,0
 465 01bc 2CED      		ldi r18,lo8(-36)
 466 01be 30E0      		ldi r19,0
 467 01c0 F901      		movw r30,r18
 468 01c2 2081      		ld r18,Z
 469 01c4 277F      		andi r18,lo8(-9)
 470 01c6 FC01      		movw r30,r24
 471 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 472               		.loc 5 447 0
 473 01ca 0000      		nop
 474               	/* epilogue start */
 475 01cc DF91      		pop r29
 476 01ce CF91      		pop r28
 477 01d0 0895      		ret
 478               		.cfi_endproc
 479               	.LFE121:
 481               		.section	.bss.appState,"aw",@nobits
 484               	appState:
 485 0000 00        		.zero	1
 486               		.section	.bss.tmrBlinkData,"aw",@nobits
 489               	tmrBlinkData:
 490 0000 0000 0000 		.zero	13
 490      0000 0000 
 490      0000 0000 
 490      00
 491               		.section	.bss.msgReq,"aw",@nobits
 494               	msgReq:
 495 0000 0000 0000 		.zero	18
 495      0000 0000 
 495      0000 0000 
 495      0000 0000 
 495      0000 
 496               		.section	.bss.msgFrame,"aw",@nobits
 499               	msgFrame:
 500 0000 0000 0000 		.zero	80
 500      0000 0000 
 500      0000 0000 
 500      0000 0000 
 500      0000 0000 
 501               		.section	.bss.msgReqConnection,"aw",@nobits
 504               	msgReqConnection:
 505 0000 0000 0000 		.zero	18
 505      0000 0000 
 505      0000 0000 
 505      0000 0000 
 505      0000 
 506               		.section	.bss.msgFrameConnection,"aw",@nobits
 509               	msgFrameConnection:
 510 0000 0000 0000 		.zero	80
 510      0000 0000 
 510      0000 0000 
 510      0000 0000 
 510      0000 0000 
 511               		.section	.data.server_turn,"aw",@progbits
 514               	server_turn:
 515 0000 0100      		.word	1
 516               		.section	.bss.statistics_buffer,"aw",@nobits
 519               	statistics_buffer:
 520 0000 0000 0000 		.zero	130
 520      0000 0000 
 520      0000 0000 
 520      0000 0000 
 520      0000 0000 
 521               		.section	.bss.aux_buffer,"aw",@nobits
 524               	aux_buffer:
 525 0000 0000 0000 		.zero	65
 525      0000 0000 
 525      0000 0000 
 525      0000 0000 
 525      0000 0000 
 526               		.text
 528               	tmrBlinkDataHandler:
 529               	.LFB130:
 530               		.file 6 "ServerTDMA.c"
   1:ServerTDMA.c  **** /*
   2:ServerTDMA.c  ****  * ServerTDMA.c
   3:ServerTDMA.c  ****  *
   4:ServerTDMA.c  ****  * Created: 07/09/2014 16:50:52
   5:ServerTDMA.c  ****  *  Author: nando
   6:ServerTDMA.c  ****  */ 
   7:ServerTDMA.c  **** 
   8:ServerTDMA.c  **** #include <stdlib.h>
   9:ServerTDMA.c  **** #include <stdio.h>
  10:ServerTDMA.c  **** #include <string.h>
  11:ServerTDMA.c  **** #include <inttypes.h>
  12:ServerTDMA.c  **** #include "config.h"
  13:ServerTDMA.c  **** #include "sys.h"
  14:ServerTDMA.c  **** #include "phy.h"
  15:ServerTDMA.c  **** #include "sys.h"
  16:ServerTDMA.c  **** #include "nwk.h"
  17:ServerTDMA.c  **** #include "sysclk.h"
  18:ServerTDMA.c  **** #include "sysTimer.h"
  19:ServerTDMA.c  **** #include "sleep_mgr.h"
  20:ServerTDMA.c  **** #include "sleepmgr.h"
  21:ServerTDMA.c  **** #include "led.h"
  22:ServerTDMA.c  **** #include "ioport.h"
  23:ServerTDMA.c  **** #include "conf_sleepmgr.h"
  24:ServerTDMA.c  **** #include "board.h"
  25:ServerTDMA.c  **** #include "Solver.h"
  26:ServerTDMA.c  **** #include "Energy.h"
  27:ServerTDMA.c  **** #include "platform.h"
  28:ServerTDMA.c  **** 
  29:ServerTDMA.c  **** /*
  30:ServerTDMA.c  **** #define		PRIo64			"llo"
  31:ServerTDMA.c  **** #define		PRIoLEAST64		"llo"
  32:ServerTDMA.c  **** #define		PRIoFAST64		"llo"
  33:ServerTDMA.c  **** 
  34:ServerTDMA.c  **** #define		PRIu64			"llu"
  35:ServerTDMA.c  **** #define		PRIuLEAST64		"llu"
  36:ServerTDMA.c  **** #define		PRIuFAST64		"llu"
  37:ServerTDMA.c  **** 
  38:ServerTDMA.c  **** #define		PRIx64			"llx"
  39:ServerTDMA.c  **** #define		PRIxLEAST64		"llx"
  40:ServerTDMA.c  **** #define		PRIxFAST64		"llx"
  41:ServerTDMA.c  **** 
  42:ServerTDMA.c  **** #define		PRIX64			"llX"
  43:ServerTDMA.c  **** #define		PRIXLEAST64		"llX"
  44:ServerTDMA.c  **** #define		PRIXFAST64		"llX"
  45:ServerTDMA.c  **** 
  46:ServerTDMA.c  **** #define		PRIoMAX			"llo"
  47:ServerTDMA.c  **** #define		PRIuMAX			"llu"
  48:ServerTDMA.c  **** #define		PRIxMAX			"llx"
  49:ServerTDMA.c  **** #define		PRIXMAX			"llX"
  50:ServerTDMA.c  **** */
  51:ServerTDMA.c  **** 
  52:ServerTDMA.c  **** #if APP_COORDINATOR
  53:ServerTDMA.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
  54:ServerTDMA.c  **** 		/* Only ARM */
  55:ServerTDMA.c  **** 		#include "stdio_usb.h"
  56:ServerTDMA.c  **** 		#define MASTER_MACSC	0
  57:ServerTDMA.c  **** 	#else
  58:ServerTDMA.c  **** 		/* Only megarf series */
  59:ServerTDMA.c  **** 		#include "conf_sio2host.h"
  60:ServerTDMA.c  **** 		#define MASTER_MACSC	1
  61:ServerTDMA.c  **** 	#endif
  62:ServerTDMA.c  **** #else
  63:ServerTDMA.c  **** 	/* Only megarf series */
  64:ServerTDMA.c  **** 	#define MASTER_MACSC		1
  65:ServerTDMA.c  **** #endif
  66:ServerTDMA.c  **** 
  67:ServerTDMA.c  **** #define HUMAM_READABLE			0
  68:ServerTDMA.c  **** 
  69:ServerTDMA.c  **** #if (MASTER_MACSC == 1)
  70:ServerTDMA.c  **** 	#include "macsc_megarf.h"
  71:ServerTDMA.c  **** #else
  72:ServerTDMA.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  73:ServerTDMA.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  74:ServerTDMA.c  **** #endif
  75:ServerTDMA.c  **** 
  76:ServerTDMA.c  **** static volatile AppState_t		appState					= APP_STATE_INITIAL;
  77:ServerTDMA.c  **** static SYS_Timer_t				tmrBlinkData;				// Feedback
  78:ServerTDMA.c  **** static NWK_DataReq_t			msgReq;
  79:ServerTDMA.c  **** static AppMessageFrame_t		msgFrame;
  80:ServerTDMA.c  **** 
  81:ServerTDMA.c  **** static NWK_DataReq_t			msgReqConnection;
  82:ServerTDMA.c  **** static AppMessageFrame_t		msgFrameConnection;
  83:ServerTDMA.c  **** 
  84:ServerTDMA.c  **** #if (APP_COORDINATOR)
  85:ServerTDMA.c  **** 	static uint16_t				server_turn					= 1;
  86:ServerTDMA.c  **** 	static uint8_t				statistics_buffer[(MSG_SIZE_MAX + 1) * 2];
  87:ServerTDMA.c  **** 	static uint8_t				aux_buffer[(MSG_SIZE_MAX + 1)];
  88:ServerTDMA.c  **** #endif
  89:ServerTDMA.c  **** #if (APP_ENDDEVICE)
  90:ServerTDMA.c  **** 	static bool					connected;
  91:ServerTDMA.c  **** 	static uint8_t				collab_vector[N_COLLAB_VECTOR];
  92:ServerTDMA.c  **** 	static bool					i_am_collab_dev				= false;
  93:ServerTDMA.c  **** 	static uint8_t				i_am_collab_slot			= 0;
  94:ServerTDMA.c  **** 	static uint8_t				i_am_collab_turn			= 0;
  95:ServerTDMA.c  **** 	static NWK_DataReq_t		msgReqCollab;
  96:ServerTDMA.c  **** 	static AppMessageFrame_t	msgFrameCollab;
  97:ServerTDMA.c  **** #endif
  98:ServerTDMA.c  **** 
  99:ServerTDMA.c  **** static void tmrBlinkDataHandler(SYS_Timer_t *timer)
 100:ServerTDMA.c  **** {
 531               		.loc 6 100 0
 532               		.cfi_startproc
 533 01d2 CF93      		push r28
 534               	.LCFI29:
 535               		.cfi_def_cfa_offset 3
 536               		.cfi_offset 28, -2
 537 01d4 DF93      		push r29
 538               	.LCFI30:
 539               		.cfi_def_cfa_offset 4
 540               		.cfi_offset 29, -3
 541 01d6 CDB7      		in r28,__SP_L__
 542 01d8 DEB7      		in r29,__SP_H__
 543               	.LCFI31:
 544               		.cfi_def_cfa_register 28
 545 01da 2B97      		sbiw r28,11
 546               	.LCFI32:
 547               		.cfi_def_cfa_offset 15
 548 01dc 0FB6      		in __tmp_reg__,__SREG__
 549 01de F894      		cli
 550 01e0 DEBF      		out __SP_H__,r29
 551 01e2 0FBE      		out __SREG__,__tmp_reg__
 552 01e4 CDBF      		out __SP_L__,r28
 553               	/* prologue: function */
 554               	/* frame size = 11 */
 555               	/* stack size = 13 */
 556               	.L__stack_usage = 13
 557 01e6 9B87      		std Y+11,r25
 558 01e8 8A87      		std Y+10,r24
 559 01ea 84E2      		ldi r24,lo8(36)
 560 01ec 8983      		std Y+1,r24
 561 01ee 81E0      		ldi r24,lo8(1)
 562 01f0 8A83      		std Y+2,r24
 563 01f2 8981      		ldd r24,Y+1
 564 01f4 8B83      		std Y+3,r24
 565 01f6 8A81      		ldd r24,Y+2
 566 01f8 8C83      		std Y+4,r24
 567               	.LBB72:
 568               	.LBB73:
 569               	.LBB74:
 570               	.LBB75:
 571               		.file 7 "../../../platform/common/services/ioport/mega_rf/ioport.h"
   1:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
   2:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \file
   3:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   4:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief MEGA and MEGA_RF architecture specific IOPORT service implementation
   5:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * header file.
   6:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   7:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * Copyright (c) 2012 - 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   9:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \asf_license_start
  10:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  11:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \page License
  12:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  13:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  16:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  19:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  23:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  26:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  29:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  41:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \asf_license_stop
  42:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  43:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
  44:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifndef IOPORT_MEGA_RF_H
  45:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MEGA_RF_H
  46:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  47:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_CREATE_PIN(port, pin) ((IOPORT_ ## port) * 8 + (pin))
  48:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_BASE_ADDRESS 0x20
  49:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORT_OFFSET  0x03
  50:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  51:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name IOPORT port numbers */
  52:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
  53:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  54:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF || MEGA_UNSPECIFIED || MEGA_XX4 || MEGA_XX4_A
  55:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTA    0 /* not connected to pins for megaRF*/
  56:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  57:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  58:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF || MEGA_UNSPECIFIED || MEGA_XX8 || MEGA_XX8_A || \
  59:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	MEGA_XX4 || MEGA_XX4_A
  60:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTB    1
  61:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTC    2 /* not connected to pins for megaRF*/
  62:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTD    3
  63:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  64:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  65:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF
  66:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTE    4
  67:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTF    5
  68:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTG    6
  69:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  70:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  71:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0
  72:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTH    7
  73:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTI    8
  74:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTJ    9
  75:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTK    10
  76:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTL    11
  77:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  78:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
  79:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  80:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
  81:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \weakgroup ioport_service_group
  82:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \section ioport_modes IOPORT Modes
  83:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  84:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * For details on these please see the megaRF Manual.
  85:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  86:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * @{
  87:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
  88:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  89:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name IOPORT Mode bit definitions */
  90:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
  91:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MODE_PULLDOWN        (0x01) /*!< Pull-down */
  92:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MODE_PULLUP          (0x00) /*!< Pull-up */
  93:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
  94:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  95:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_mode_t;
  96:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_pin_t;
  97:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_port_t;
  98:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_port_mask_t;
  99:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 100:../../../platform/common/services/ioport/mega_rf/ioport.h **** /* I/O Ports */
 101:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef struct PORT_struct {
 102:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t PINCRL;         /* I/O Port PIN DATA READ ONLY */
 103:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t DIR;            /* I/O Port Data Direction Set */
 104:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t PORTDATA;       /* I/O Port DATA register */
 105:../../../platform/common/services/ioport/mega_rf/ioport.h **** } PORT_t;
 106:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 107:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 108:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A pin mask
 109:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 110:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the port pin mask on the part.
 111:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 112:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t pin_mask_t;
 113:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 114:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 115:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A PORT pin
 116:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 117:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the PORT pins on the part.
 118:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 119:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t port_pin_t;
 120:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 121:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 122:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Pin configuration flags
 123:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 124:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This is a bitmask containing configuration flags for the pins that shall be
 125:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * configured.
 126:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 127:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint16_t port_pin_flags_t;
 128:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 129:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 130:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A port id
 131:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 132:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the port id on the part (0 is PORTA).
 133:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 134:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t port_id_t;
 135:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 136:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name Initial Output State Flags */
 137:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 138:../../../platform/common/services/ioport/mega_rf/ioport.h **** /*With Port as input port the initial status is either tri state
 139:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * or pulled high, based on PORTX value, and check the PUD value to make
 140:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * sure pull up resistance is not disabled*/
 141:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
 142:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_INIT_LOW           0 << 1  /*!< Initial Output State Low */
 143:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_INIT_HIGH          1 << 1 /*!< Initial Output State High */
 144:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 145:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
 146:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 147:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name Output and Pull Configuration Flags */
 148:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
 149:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PULL_DOWN          (0 << 2) /*!< Pull-Down (when input) */
 150:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PULL_UP            (1 << 2) /*!< Pull-Up (when input) */
 151:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
 152:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 153:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 154:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the port number from pin nuber
 155:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 156:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 157:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static inline ioport_port_t arch_ioport_pin_to_port_id(
 158:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		uint8_t pin)
 159:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 160:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return pin >> 3;
 161:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 162:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 163:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 164:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the base address of port number
 165:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: port number e.g. IOPORT_PORTB
 166:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 167:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static PORT_t *arch_ioport_port_to_base(uint8_t port)
 168:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return (PORT_t *)((uintptr_t)(IOPORT_BASE_ADDRESS +
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 171:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 172:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 173:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 174:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the base address of port number from defined pin
 175:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 176:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 177:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static PORT_t *arch_ioport_pin_to_base(ioport_pin_t pin)
 178:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 179:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return arch_ioport_port_to_base(pin >> 3);
 180:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 181:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 182:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 183:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the 8-bit pin mask for pin
 184:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 185:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 186:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static ioport_port_mask_t arch_ioport_pin_to_mask
 187:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	(ioport_pin_t pin)
 188:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return 1U << (pin & 0x07);
 190:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 191:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 192:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 193:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Set multiple pin modes in a single GPIO port, such as pull-up,
 194:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * pull-down, etc. configuration.
 195:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 196:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 197:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 198:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode Mode masks to configure for the specified pins (\ref
 199:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ioport_modes)
 200:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 201:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_mode(ioport_port_t port,
 202:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, ioport_mode_t mode)
 203:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 204:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifdef MEGA_RF
 205:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 206:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (mode == IOPORT_MODE_PULLUP) {
 207:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA = mask;
 208:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (mode == IOPORT_MODE_PULLDOWN) {
 209:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA = ~mask;
 210:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 211:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
 212:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 213:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 214:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 215:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Set multiple pin modes in a single GPIO port, such as pull-up,
 216:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * pull-down, etc. configuration.
 217:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 218:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 219:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 220:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode Mode masks to configure for the specified pins (\ref
 221:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ioport_modes)
 222:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 223:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_mode(ioport_pin_t pin,
 224:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_mode_t mode)
 225:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 226:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifdef MEGA_RF
 227:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 228:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	ioport_pin_t mask_pin = arch_ioport_pin_to_mask(pin);
 229:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (mode == IOPORT_MODE_PULLUP) {
 230:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA |=  mask_pin;
 231:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (mode == IOPORT_MODE_PULLDOWN) {
 232:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA &= ~mask_pin;
 233:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 234:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
 235:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 236:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 237:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 238:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set port direction as input or output.
 239:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 240:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 241:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode dir, \refer ioport_direction
 242:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 243:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_dir(ioport_port_t port,
 244:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, enum ioport_direction dir)
 245:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 246:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 247:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 248:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (dir == IOPORT_DIR_OUTPUT) {
 249:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR = mask;
 250:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (dir == IOPORT_DIR_INPUT) {
 251:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR = ~mask;
 252:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 253:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 254:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 255:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 256:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set pin direction as input or output.
 257:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 258:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 259:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode dir, \refer ioport_direction
 260:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 261:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_dir(ioport_pin_t pin,
 262:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		enum ioport_direction dir)
 263:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 264:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 265:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 266:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (dir == IOPORT_DIR_OUTPUT) {
 267:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR |= arch_ioport_pin_to_mask(pin);
 268:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (dir == IOPORT_DIR_INPUT) {
 269:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR &=  ~arch_ioport_pin_to_mask(pin);
 270:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 271:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 272:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 273:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 274:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set pin level to high or low.
 275:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 276:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: level high/low
 277:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 278:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_level(ioport_pin_t pin,
 279:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		bool level)
 280:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base_add = arch_ioport_port_to_base(pin >> 3);
 572               		.loc 7 281 0
 573 01fa 8B81      		ldd r24,Y+3
 574 01fc 8695      		lsr r24
 575 01fe 8695      		lsr r24
 576 0200 8695      		lsr r24
 577 0202 8D83      		std Y+5,r24
 578               	.LBB76:
 579               	.LBB77:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 580               		.loc 7 170 0
 581 0204 8D81      		ldd r24,Y+5
 582 0206 282F      		mov r18,r24
 583 0208 30E0      		ldi r19,0
 584 020a C901      		movw r24,r18
 585 020c 880F      		lsl r24
 586 020e 991F      		rol r25
 587 0210 820F      		add r24,r18
 588 0212 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 589               		.loc 7 169 0
 590 0214 8096      		adiw r24,32
 591               	.LBE77:
 592               	.LBE76:
 593               		.loc 7 281 0
 594 0216 9F83      		std Y+7,r25
 595 0218 8E83      		std Y+6,r24
 282:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (level) {
 596               		.loc 7 283 0
 597 021a 8C81      		ldd r24,Y+4
 598 021c 8823      		tst r24
 599 021e 01F0      		breq .L17
 284:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 			= (base_add->PORTDATA  | arch_ioport_pin_to_mask
 600               		.loc 7 285 0
 601 0220 8E81      		ldd r24,Y+6
 602 0222 9F81      		ldd r25,Y+7
 603 0224 FC01      		movw r30,r24
 604 0226 4281      		ldd r20,Z+2
 605 0228 8B81      		ldd r24,Y+3
 606 022a 8887      		std Y+8,r24
 607               	.LBB78:
 608               	.LBB79:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 609               		.loc 7 189 0
 610 022c 8885      		ldd r24,Y+8
 611 022e 882F      		mov r24,r24
 612 0230 90E0      		ldi r25,0
 613 0232 9C01      		movw r18,r24
 614 0234 2770      		andi r18,7
 615 0236 3327      		clr r19
 616 0238 81E0      		ldi r24,lo8(1)
 617 023a 90E0      		ldi r25,0
 618 023c 00C0      		rjmp 2f
 619               		1:
 620 023e 880F      		lsl r24
 621 0240 991F      		rol r25
 622               		2:
 623 0242 2A95      		dec r18
 624 0244 02F4      		brpl 1b
 625               	.LBE79:
 626               	.LBE78:
 627               		.loc 7 285 0
 628 0246 242F      		mov r18,r20
 629 0248 282B      		or r18,r24
 630 024a 8E81      		ldd r24,Y+6
 631 024c 9F81      		ldd r25,Y+7
 632 024e FC01      		movw r30,r24
 633 0250 2283      		std Z+2,r18
 634               	.LBE75:
 635               	.LBE74:
 636               	.LBE73:
 637               	.LBE72:
 101:ServerTDMA.c  **** #if (LED_COUNT > 0)
 102:ServerTDMA.c  **** 	LED_Off(LED_DATA);
 103:ServerTDMA.c  **** #endif
 104:ServerTDMA.c  **** 
 105:ServerTDMA.c  **** 	(void)timer;
 106:ServerTDMA.c  **** }
 638               		.loc 6 106 0
 639 0252 00C0      		rjmp .L21
 640               	.L17:
 641               	.LBB85:
 642               	.LBB84:
 643               	.LBB83:
 644               	.LBB82:
 286:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 287:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else {
 288:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 			= (base_add->PORTDATA  & (~arch_ioport_pin_to_mask
 645               		.loc 7 289 0
 646 0254 8E81      		ldd r24,Y+6
 647 0256 9F81      		ldd r25,Y+7
 648 0258 FC01      		movw r30,r24
 649 025a 8281      		ldd r24,Z+2
 650 025c 482F      		mov r20,r24
 651 025e 8B81      		ldd r24,Y+3
 652 0260 8987      		std Y+9,r24
 653               	.LBB80:
 654               	.LBB81:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 655               		.loc 7 189 0
 656 0262 8985      		ldd r24,Y+9
 657 0264 882F      		mov r24,r24
 658 0266 90E0      		ldi r25,0
 659 0268 9C01      		movw r18,r24
 660 026a 2770      		andi r18,7
 661 026c 3327      		clr r19
 662 026e 81E0      		ldi r24,lo8(1)
 663 0270 90E0      		ldi r25,0
 664 0272 00C0      		rjmp 2f
 665               		1:
 666 0274 880F      		lsl r24
 667 0276 991F      		rol r25
 668               		2:
 669 0278 2A95      		dec r18
 670 027a 02F4      		brpl 1b
 671               	.LBE81:
 672               	.LBE80:
 673               		.loc 7 289 0
 674 027c 8095      		com r24
 675 027e 8423      		and r24,r20
 676 0280 282F      		mov r18,r24
 677 0282 8E81      		ldd r24,Y+6
 678 0284 9F81      		ldd r25,Y+7
 679 0286 FC01      		movw r30,r24
 680 0288 2283      		std Z+2,r18
 681               	.L21:
 682               	.LBE82:
 683               	.LBE83:
 684               	.LBE84:
 685               	.LBE85:
 686               		.loc 6 106 0
 687 028a 0000      		nop
 688               	/* epilogue start */
 689 028c 2B96      		adiw r28,11
 690 028e 0FB6      		in __tmp_reg__,__SREG__
 691 0290 F894      		cli
 692 0292 DEBF      		out __SP_H__,r29
 693 0294 0FBE      		out __SREG__,__tmp_reg__
 694 0296 CDBF      		out __SP_L__,r28
 695 0298 DF91      		pop r29
 696 029a CF91      		pop r28
 697 029c 0895      		ret
 698               		.cfi_endproc
 699               	.LFE130:
 701               		.section	.rodata
 702               	.LC1:
 703 0000 2530 3258 		.string	"%02X"
 703      00
 704               		.text
 706               	toHexBuffer:
 707               	.LFB131:
 107:ServerTDMA.c  **** #if (APP_COORDINATOR)
 108:ServerTDMA.c  **** static void toHexBuffer(uint8_t* out, uint8_t* in, uint16_t size)
 109:ServerTDMA.c  **** {
 708               		.loc 6 109 0
 709               		.cfi_startproc
 710 029e CF93      		push r28
 711               	.LCFI33:
 712               		.cfi_def_cfa_offset 3
 713               		.cfi_offset 28, -2
 714 02a0 DF93      		push r29
 715               	.LCFI34:
 716               		.cfi_def_cfa_offset 4
 717               		.cfi_offset 29, -3
 718 02a2 CDB7      		in r28,__SP_L__
 719 02a4 DEB7      		in r29,__SP_H__
 720               	.LCFI35:
 721               		.cfi_def_cfa_register 28
 722 02a6 2A97      		sbiw r28,10
 723               	.LCFI36:
 724               		.cfi_def_cfa_offset 14
 725 02a8 0FB6      		in __tmp_reg__,__SREG__
 726 02aa F894      		cli
 727 02ac DEBF      		out __SP_H__,r29
 728 02ae 0FBE      		out __SREG__,__tmp_reg__
 729 02b0 CDBF      		out __SP_L__,r28
 730               	/* prologue: function */
 731               	/* frame size = 10 */
 732               	/* stack size = 12 */
 733               	.L__stack_usage = 12
 734 02b2 9E83      		std Y+6,r25
 735 02b4 8D83      		std Y+5,r24
 736 02b6 7887      		std Y+8,r23
 737 02b8 6F83      		std Y+7,r22
 738 02ba 5A87      		std Y+10,r21
 739 02bc 4987      		std Y+9,r20
 110:ServerTDMA.c  **** 	uint16_t		pos			= 0;
 740               		.loc 6 110 0
 741 02be 1A82      		std Y+2,__zero_reg__
 742 02c0 1982      		std Y+1,__zero_reg__
 743               	.LBB86:
 111:ServerTDMA.c  **** 	for(uint16_t i = 0; i < size; ++i)
 744               		.loc 6 111 0
 745 02c2 1C82      		std Y+4,__zero_reg__
 746 02c4 1B82      		std Y+3,__zero_reg__
 747 02c6 00C0      		rjmp .L23
 748               	.L24:
 112:ServerTDMA.c  **** 	{
 113:ServerTDMA.c  **** 		pos						+= sprintf(out + pos, "%02X", in[i]);
 749               		.loc 6 113 0 discriminator 3
 750 02c8 2F81      		ldd r18,Y+7
 751 02ca 3885      		ldd r19,Y+8
 752 02cc 8B81      		ldd r24,Y+3
 753 02ce 9C81      		ldd r25,Y+4
 754 02d0 820F      		add r24,r18
 755 02d2 931F      		adc r25,r19
 756 02d4 FC01      		movw r30,r24
 757 02d6 8081      		ld r24,Z
 758 02d8 482F      		mov r20,r24
 759 02da 50E0      		ldi r21,0
 760 02dc 2D81      		ldd r18,Y+5
 761 02de 3E81      		ldd r19,Y+6
 762 02e0 8981      		ldd r24,Y+1
 763 02e2 9A81      		ldd r25,Y+2
 764 02e4 820F      		add r24,r18
 765 02e6 931F      		adc r25,r19
 766 02e8 252F      		mov r18,r21
 767 02ea 2F93      		push r18
 768 02ec 242F      		mov r18,r20
 769 02ee 2F93      		push r18
 770 02f0 20E0      		ldi r18,lo8(.LC1)
 771 02f2 30E0      		ldi r19,hi8(.LC1)
 772 02f4 232F      		mov r18,r19
 773 02f6 2F93      		push r18
 774 02f8 20E0      		ldi r18,lo8(.LC1)
 775 02fa 30E0      		ldi r19,hi8(.LC1)
 776 02fc 2F93      		push r18
 777 02fe 292F      		mov r18,r25
 778 0300 2F93      		push r18
 779 0302 8F93      		push r24
 780 0304 0E94 0000 		call sprintf
 781 0308 0F90      		pop __tmp_reg__
 782 030a 0F90      		pop __tmp_reg__
 783 030c 0F90      		pop __tmp_reg__
 784 030e 0F90      		pop __tmp_reg__
 785 0310 0F90      		pop __tmp_reg__
 786 0312 0F90      		pop __tmp_reg__
 787 0314 9C01      		movw r18,r24
 788 0316 8981      		ldd r24,Y+1
 789 0318 9A81      		ldd r25,Y+2
 790 031a 820F      		add r24,r18
 791 031c 931F      		adc r25,r19
 792 031e 9A83      		std Y+2,r25
 793 0320 8983      		std Y+1,r24
 111:ServerTDMA.c  **** 	for(uint16_t i = 0; i < size; ++i)
 794               		.loc 6 111 0 discriminator 3
 795 0322 8B81      		ldd r24,Y+3
 796 0324 9C81      		ldd r25,Y+4
 797 0326 0196      		adiw r24,1
 798 0328 9C83      		std Y+4,r25
 799 032a 8B83      		std Y+3,r24
 800               	.L23:
 111:ServerTDMA.c  **** 	for(uint16_t i = 0; i < size; ++i)
 801               		.loc 6 111 0 is_stmt 0 discriminator 1
 802 032c 2B81      		ldd r18,Y+3
 803 032e 3C81      		ldd r19,Y+4
 804 0330 8985      		ldd r24,Y+9
 805 0332 9A85      		ldd r25,Y+10
 806 0334 2817      		cp r18,r24
 807 0336 3907      		cpc r19,r25
 808 0338 00F0      		brlo .L24
 809               	.LBE86:
 114:ServerTDMA.c  **** 	}
 115:ServerTDMA.c  **** 	out[pos]					= NULL;
 810               		.loc 6 115 0 is_stmt 1
 811 033a 2D81      		ldd r18,Y+5
 812 033c 3E81      		ldd r19,Y+6
 813 033e 8981      		ldd r24,Y+1
 814 0340 9A81      		ldd r25,Y+2
 815 0342 820F      		add r24,r18
 816 0344 931F      		adc r25,r19
 817 0346 FC01      		movw r30,r24
 818 0348 1082      		st Z,__zero_reg__
 116:ServerTDMA.c  **** }
 819               		.loc 6 116 0
 820 034a 0000      		nop
 821               	/* epilogue start */
 822 034c 2A96      		adiw r28,10
 823 034e 0FB6      		in __tmp_reg__,__SREG__
 824 0350 F894      		cli
 825 0352 DEBF      		out __SP_H__,r29
 826 0354 0FBE      		out __SREG__,__tmp_reg__
 827 0356 CDBF      		out __SP_L__,r28
 828 0358 DF91      		pop r29
 829 035a CF91      		pop r28
 830 035c 0895      		ret
 831               		.cfi_endproc
 832               	.LFE131:
 835               	tdma_server_beacon:
 836               	.LFB132:
 117:ServerTDMA.c  **** #if (MASTER_MACSC == 1)
 118:ServerTDMA.c  **** static void tdma_server_beacon(void)
 119:ServerTDMA.c  **** {
 837               		.loc 6 119 0
 838               		.cfi_startproc
 839 035e CF93      		push r28
 840               	.LCFI37:
 841               		.cfi_def_cfa_offset 3
 842               		.cfi_offset 28, -2
 843 0360 DF93      		push r29
 844               	.LCFI38:
 845               		.cfi_def_cfa_offset 4
 846               		.cfi_offset 29, -3
 847 0362 CDB7      		in r28,__SP_L__
 848 0364 DEB7      		in r29,__SP_H__
 849               	.LCFI39:
 850               		.cfi_def_cfa_register 28
 851               	/* prologue: function */
 852               	/* frame size = 0 */
 853               	/* stack size = 2 */
 854               	.L__stack_usage = 2
 120:ServerTDMA.c  **** 	macsc_enable_manual_bts();
 855               		.loc 6 120 0
 856 0366 0E94 0000 		call macsc_enable_manual_bts
 121:ServerTDMA.c  **** 
 122:ServerTDMA.c  **** 	appState					= APP_STATE_SEND;
 857               		.loc 6 122 0
 858 036a 83E0      		ldi r24,lo8(3)
 859 036c 8093 0000 		sts appState,r24
 123:ServerTDMA.c  **** }
 860               		.loc 6 123 0
 861 0370 0000      		nop
 862               	/* epilogue start */
 863 0372 DF91      		pop r29
 864 0374 CF91      		pop r28
 865 0376 0895      		ret
 866               		.cfi_endproc
 867               	.LFE132:
 870               	tdma_server_statistics:
 871               	.LFB133:
 124:ServerTDMA.c  **** static void tdma_server_statistics(void)
 125:ServerTDMA.c  **** {
 872               		.loc 6 125 0
 873               		.cfi_startproc
 874 0378 CF93      		push r28
 875               	.LCFI40:
 876               		.cfi_def_cfa_offset 3
 877               		.cfi_offset 28, -2
 878 037a DF93      		push r29
 879               	.LCFI41:
 880               		.cfi_def_cfa_offset 4
 881               		.cfi_offset 29, -3
 882 037c CDB7      		in r28,__SP_L__
 883 037e DEB7      		in r29,__SP_H__
 884               	.LCFI42:
 885               		.cfi_def_cfa_register 28
 886               	/* prologue: function */
 887               	/* frame size = 0 */
 888               	/* stack size = 2 */
 889               	.L__stack_usage = 2
 126:ServerTDMA.c  **** 	appState					= APP_STATE_SERVER_STATISTICS;
 890               		.loc 6 126 0
 891 0380 8FE0      		ldi r24,lo8(15)
 892 0382 8093 0000 		sts appState,r24
 127:ServerTDMA.c  **** }
 893               		.loc 6 127 0
 894 0386 0000      		nop
 895               	/* epilogue start */
 896 0388 DF91      		pop r29
 897 038a CF91      		pop r28
 898 038c 0895      		ret
 899               		.cfi_endproc
 900               	.LFE133:
 902               		.section	.rodata
 903               	.LC2:
 904 0005 2564 2C20 		.string	"%d, %d, %d"
 904      2564 2C20 
 904      2564 00
 905               	.LC3:
 906 0010 2C20 2564 		.string	", %d, "
 906      2C20 00
 907               	.LC4:
 908 0017 522C 2000 		.string	"R, "
 909               	.LC5:
 910 001b 532C 2000 		.string	"S, "
 911               	.LC6:
 912 001f 4E2C 2000 		.string	"N, "
 913               		.text
 915               	server_statistics:
 916               	.LFB134:
 128:ServerTDMA.c  **** #else
 129:ServerTDMA.c  **** static void tmr_tdma_server_beacon(SYS_Timer_t *timer)
 130:ServerTDMA.c  **** {
 131:ServerTDMA.c  **** 	(void) timer;
 132:ServerTDMA.c  **** 
 133:ServerTDMA.c  **** 	SYS_TimerStart(&tmrComputeData);
 134:ServerTDMA.c  **** 	
 135:ServerTDMA.c  **** 	appState					= APP_STATE_SEND;
 136:ServerTDMA.c  **** }
 137:ServerTDMA.c  **** static void tmr_tdma_server_statistics(SYS_Timer_t *timer)
 138:ServerTDMA.c  **** {
 139:ServerTDMA.c  **** 	(void) timer;
 140:ServerTDMA.c  **** 
 141:ServerTDMA.c  **** 	appState					= APP_STATE_SERVER_STATISTICS;
 142:ServerTDMA.c  **** }
 143:ServerTDMA.c  **** #endif
 144:ServerTDMA.c  **** static void server_statistics(void)
 145:ServerTDMA.c  **** {
 917               		.loc 6 145 0
 918               		.cfi_startproc
 919 038e CF93      		push r28
 920               	.LCFI43:
 921               		.cfi_def_cfa_offset 3
 922               		.cfi_offset 28, -2
 923 0390 DF93      		push r29
 924               	.LCFI44:
 925               		.cfi_def_cfa_offset 4
 926               		.cfi_offset 29, -3
 927 0392 CDB7      		in r28,__SP_L__
 928 0394 DEB7      		in r29,__SP_H__
 929               	.LCFI45:
 930               		.cfi_def_cfa_register 28
 931 0396 2997      		sbiw r28,9
 932               	.LCFI46:
 933               		.cfi_def_cfa_offset 13
 934 0398 0FB6      		in __tmp_reg__,__SREG__
 935 039a F894      		cli
 936 039c DEBF      		out __SP_H__,r29
 937 039e 0FBE      		out __SREG__,__tmp_reg__
 938 03a0 CDBF      		out __SP_L__,r28
 939               	/* prologue: function */
 940               	/* frame size = 9 */
 941               	/* stack size = 11 */
 942               	.L__stack_usage = 11
 146:ServerTDMA.c  **** 	int	n_decoded				= solver_solve_system();
 943               		.loc 6 146 0
 944 03a2 0E94 0000 		call solver_solve_system
 945 03a6 9B83      		std Y+3,r25
 946 03a8 8A83      		std Y+2,r24
 147:ServerTDMA.c  **** 	int n_received				= solver_get_n_received();
 947               		.loc 6 147 0
 948 03aa 0E94 0000 		call solver_get_n_received
 949 03ae 882F      		mov r24,r24
 950 03b0 90E0      		ldi r25,0
 951 03b2 9D83      		std Y+5,r25
 952 03b4 8C83      		std Y+4,r24
 148:ServerTDMA.c  **** 
 149:ServerTDMA.c  **** #if (HUMAM_READABLE == 1)
 150:ServerTDMA.c  **** 	printf("R: %d, C: %d, S: %d\n", n_received, solver_get_n_colaborative(), n_decoded);
 151:ServerTDMA.c  **** 
 152:ServerTDMA.c  **** 	for(uint8_t j = SOLVER_MSG_RECEIVED; j < SOLVER_MSG_MAX; ++j)
 153:ServerTDMA.c  **** 	{
 154:ServerTDMA.c  **** 		for(uint8_t i = 0; i < N_MOTES_COLLAB_MAX; ++i)
 155:ServerTDMA.c  **** 		{
 156:ServerTDMA.c  **** 			uint8_t* buffer			= solver_get_data(i, j);
 157:ServerTDMA.c  **** 			if(buffer)
 158:ServerTDMA.c  **** 			{
 159:ServerTDMA.c  **** 				//toHexBuffer(statistics_buffer, buffer, MSG_SIZE_MAX);
 160:ServerTDMA.c  **** 				//printf("%s: Node[%02d]: %s\n", (j == SOLVER_MSG_RECEIVED ? "R" : "S"), i + 1, statistics_buff
 161:ServerTDMA.c  **** 				printf("%s: Node[%02d]: \n", (j == SOLVER_MSG_RECEIVED ? "R" : "S"), i + 1);
 162:ServerTDMA.c  **** 			}
 163:ServerTDMA.c  **** 		}
 164:ServerTDMA.c  **** 	}
 165:ServerTDMA.c  **** #else
 166:ServerTDMA.c  **** 	printf("%d, %d, %d", n_received, solver_get_n_colaborative(), n_decoded);
 953               		.loc 6 166 0
 954 03b6 0E94 0000 		call solver_get_n_colaborative
 955 03ba 882F      		mov r24,r24
 956 03bc 90E0      		ldi r25,0
 957 03be 2B81      		ldd r18,Y+3
 958 03c0 2F93      		push r18
 959 03c2 2A81      		ldd r18,Y+2
 960 03c4 2F93      		push r18
 961 03c6 292F      		mov r18,r25
 962 03c8 2F93      		push r18
 963 03ca 8F93      		push r24
 964 03cc 8D81      		ldd r24,Y+5
 965 03ce 8F93      		push r24
 966 03d0 8C81      		ldd r24,Y+4
 967 03d2 8F93      		push r24
 968 03d4 80E0      		ldi r24,lo8(.LC2)
 969 03d6 90E0      		ldi r25,hi8(.LC2)
 970 03d8 892F      		mov r24,r25
 971 03da 8F93      		push r24
 972 03dc 80E0      		ldi r24,lo8(.LC2)
 973 03de 90E0      		ldi r25,hi8(.LC2)
 974 03e0 8F93      		push r24
 975 03e2 0E94 0000 		call printf
 976 03e6 8DB7      		in r24,__SP_L__
 977 03e8 9EB7      		in r25,__SP_H__
 978 03ea 0896      		adiw r24,8
 979 03ec 0FB6      		in __tmp_reg__,__SREG__
 980 03ee F894      		cli
 981 03f0 DEBF      		out __SP_H__,r29
 982 03f2 0FBE      		out __SREG__,__tmp_reg__
 983 03f4 CDBF      		out __SP_L__,r28
 984               	.LBB87:
 167:ServerTDMA.c  **** 	
 168:ServerTDMA.c  **** 	for(uint8_t i = 0; i < 10; ++i)
 985               		.loc 6 168 0
 986 03f6 1982      		std Y+1,__zero_reg__
 987 03f8 00C0      		rjmp .L28
 988               	.L32:
 989               	.LBB88:
 169:ServerTDMA.c  **** 	{
 170:ServerTDMA.c  **** 		printf(", %d, ", i + 1);
 990               		.loc 6 170 0
 991 03fa 8981      		ldd r24,Y+1
 992 03fc 882F      		mov r24,r24
 993 03fe 90E0      		ldi r25,0
 994 0400 0196      		adiw r24,1
 995 0402 292F      		mov r18,r25
 996 0404 2F93      		push r18
 997 0406 8F93      		push r24
 998 0408 80E0      		ldi r24,lo8(.LC3)
 999 040a 90E0      		ldi r25,hi8(.LC3)
 1000 040c 892F      		mov r24,r25
 1001 040e 8F93      		push r24
 1002 0410 80E0      		ldi r24,lo8(.LC3)
 1003 0412 90E0      		ldi r25,hi8(.LC3)
 1004 0414 8F93      		push r24
 1005 0416 0E94 0000 		call printf
 1006 041a 0F90      		pop __tmp_reg__
 1007 041c 0F90      		pop __tmp_reg__
 1008 041e 0F90      		pop __tmp_reg__
 1009 0420 0F90      		pop __tmp_reg__
 171:ServerTDMA.c  **** 
 172:ServerTDMA.c  **** 		uint8_t* buffer			= solver_get_data(i, SOLVER_MSG_RECEIVED);
 1010               		.loc 6 172 0
 1011 0422 61E0      		ldi r22,lo8(1)
 1012 0424 8981      		ldd r24,Y+1
 1013 0426 0E94 0000 		call solver_get_data
 1014 042a 9F83      		std Y+7,r25
 1015 042c 8E83      		std Y+6,r24
 173:ServerTDMA.c  **** 		if(buffer)
 1016               		.loc 6 173 0
 1017 042e 8E81      		ldd r24,Y+6
 1018 0430 9F81      		ldd r25,Y+7
 1019 0432 892B      		or r24,r25
 1020 0434 01F0      		breq .L29
 174:ServerTDMA.c  **** 		{
 175:ServerTDMA.c  **** 			printf("R, ");
 1021               		.loc 6 175 0
 1022 0436 80E0      		ldi r24,lo8(.LC4)
 1023 0438 90E0      		ldi r25,hi8(.LC4)
 1024 043a 892F      		mov r24,r25
 1025 043c 8F93      		push r24
 1026 043e 80E0      		ldi r24,lo8(.LC4)
 1027 0440 90E0      		ldi r25,hi8(.LC4)
 1028 0442 8F93      		push r24
 1029 0444 0E94 0000 		call printf
 1030 0448 0F90      		pop __tmp_reg__
 1031 044a 0F90      		pop __tmp_reg__
 1032 044c 00C0      		rjmp .L30
 1033               	.L29:
 176:ServerTDMA.c  **** 		}
 177:ServerTDMA.c  **** 		else
 178:ServerTDMA.c  **** 		{
 179:ServerTDMA.c  **** 			buffer				= solver_get_data(i, SOLVER_MSG_DECODED);
 1034               		.loc 6 179 0
 1035 044e 62E0      		ldi r22,lo8(2)
 1036 0450 8981      		ldd r24,Y+1
 1037 0452 0E94 0000 		call solver_get_data
 1038 0456 9F83      		std Y+7,r25
 1039 0458 8E83      		std Y+6,r24
 180:ServerTDMA.c  **** 			if(buffer)
 1040               		.loc 6 180 0
 1041 045a 8E81      		ldd r24,Y+6
 1042 045c 9F81      		ldd r25,Y+7
 1043 045e 892B      		or r24,r25
 1044 0460 01F0      		breq .L31
 181:ServerTDMA.c  **** 			{
 182:ServerTDMA.c  **** 				printf("S, ");
 1045               		.loc 6 182 0
 1046 0462 80E0      		ldi r24,lo8(.LC5)
 1047 0464 90E0      		ldi r25,hi8(.LC5)
 1048 0466 892F      		mov r24,r25
 1049 0468 8F93      		push r24
 1050 046a 80E0      		ldi r24,lo8(.LC5)
 1051 046c 90E0      		ldi r25,hi8(.LC5)
 1052 046e 8F93      		push r24
 1053 0470 0E94 0000 		call printf
 1054 0474 0F90      		pop __tmp_reg__
 1055 0476 0F90      		pop __tmp_reg__
 1056 0478 00C0      		rjmp .L30
 1057               	.L31:
 183:ServerTDMA.c  **** 			}
 184:ServerTDMA.c  **** 			else
 185:ServerTDMA.c  **** 			{
 186:ServerTDMA.c  **** 				printf("N, ");
 1058               		.loc 6 186 0
 1059 047a 80E0      		ldi r24,lo8(.LC6)
 1060 047c 90E0      		ldi r25,hi8(.LC6)
 1061 047e 892F      		mov r24,r25
 1062 0480 8F93      		push r24
 1063 0482 80E0      		ldi r24,lo8(.LC6)
 1064 0484 90E0      		ldi r25,hi8(.LC6)
 1065 0486 8F93      		push r24
 1066 0488 0E94 0000 		call printf
 1067 048c 0F90      		pop __tmp_reg__
 1068 048e 0F90      		pop __tmp_reg__
 1069               	.L30:
 187:ServerTDMA.c  **** 			}
 188:ServerTDMA.c  **** 		}
 189:ServerTDMA.c  **** 		
 190:ServerTDMA.c  **** 		EnergyStatistics_t*		energy = energy_get_statistics(i);
 1070               		.loc 6 190 0 discriminator 2
 1071 0490 8981      		ldd r24,Y+1
 1072 0492 0E94 0000 		call energy_get_statistics
 1073 0496 9987      		std Y+9,r25
 1074 0498 8887      		std Y+8,r24
 1075               	.LBE88:
 168:ServerTDMA.c  **** 	{
 1076               		.loc 6 168 0 discriminator 2
 1077 049a 8981      		ldd r24,Y+1
 1078 049c 8F5F      		subi r24,lo8(-(1))
 1079 049e 8983      		std Y+1,r24
 1080               	.L28:
 168:ServerTDMA.c  **** 	{
 1081               		.loc 6 168 0 is_stmt 0 discriminator 1
 1082 04a0 8981      		ldd r24,Y+1
 1083 04a2 8A30      		cpi r24,lo8(10)
 1084 04a4 00F4      		brsh .+2
 1085 04a6 00C0      		rjmp .L32
 1086               	.LBE87:
 191:ServerTDMA.c  **** 	//	printf("%d, %" PRIu64 ", %d, %" PRIu64 ", %d, %s ", energy->rssi, energy->n_collab_msg, energy-
 192:ServerTDMA.c  **** 	}
 193:ServerTDMA.c  **** #endif
 194:ServerTDMA.c  **** 	
 195:ServerTDMA.c  **** 	appState					= APP_STATE_IDLE;
 1087               		.loc 6 195 0 is_stmt 1
 1088 04a8 81E0      		ldi r24,lo8(1)
 1089 04aa 8093 0000 		sts appState,r24
 196:ServerTDMA.c  **** }
 1090               		.loc 6 196 0
 1091 04ae 0000      		nop
 1092               	/* epilogue start */
 1093 04b0 2996      		adiw r28,9
 1094 04b2 0FB6      		in __tmp_reg__,__SREG__
 1095 04b4 F894      		cli
 1096 04b6 DEBF      		out __SP_H__,r29
 1097 04b8 0FBE      		out __SREG__,__tmp_reg__
 1098 04ba CDBF      		out __SP_L__,r28
 1099 04bc DF91      		pop r29
 1100 04be CF91      		pop r28
 1101 04c0 0895      		ret
 1102               		.cfi_endproc
 1103               	.LFE134:
 1105               		.section	.rodata
 1106               	.LC7:
 1107 0023 0A25 642C 		.string	"\n%d,"
 1107      00
 1108               	.LC8:
 1109 0028 2564 2C20 		.string	"%d, %s,"
 1109      2573 2C00 
 1110               	.LC9:
 1111 0030 2573 2C00 		.string	"%s,"
 1112               		.text
 1114               	appSendData:
 1115               	.LFB135:
 197:ServerTDMA.c  **** #else
 198:ServerTDMA.c  **** static void tdma_client_turn(void)
 199:ServerTDMA.c  **** {
 200:ServerTDMA.c  **** 	appState					= APP_STATE_WAKEUP_AND_WAIT;
 201:ServerTDMA.c  **** }
 202:ServerTDMA.c  **** static void tdma_collab_job(void)
 203:ServerTDMA.c  **** {
 204:ServerTDMA.c  **** 	appState					= APP_STATE_WAKEUP_AND_SEND_COLLAB;
 205:ServerTDMA.c  **** }
 206:ServerTDMA.c  **** static void tdma_client_job(void)
 207:ServerTDMA.c  **** {
 208:ServerTDMA.c  **** 	appState					= APP_STATE_WAKEUP_AND_SEND;
 209:ServerTDMA.c  **** }
 210:ServerTDMA.c  **** static void tdma_job_conf(NWK_DataReq_t *req)
 211:ServerTDMA.c  **** {
 212:ServerTDMA.c  **** 	(void) req;
 213:ServerTDMA.c  **** 
 214:ServerTDMA.c  **** 	if(appState == APP_STATE_SEND_BUSY_DATA && i_am_collab_dev)
 215:ServerTDMA.c  **** 	{
 216:ServerTDMA.c  **** 		SYS_TimerStart(&tmrBlinkData);
 217:ServerTDMA.c  **** 		appState				= APP_STATE_RECEIVE_COLLAB;
 218:ServerTDMA.c  **** 	}
 219:ServerTDMA.c  **** 	else
 220:ServerTDMA.c  **** 	{
 221:ServerTDMA.c  **** 		appState				= APP_STATE_SLEEP_PREPARE;
 222:ServerTDMA.c  **** 	}
 223:ServerTDMA.c  **** }
 224:ServerTDMA.c  **** static void tdma_collaborate_fase(void)
 225:ServerTDMA.c  **** {
 226:ServerTDMA.c  **** 	macsc_set_cmp2_int_cb(tdma_collab_job);			// Do collab job & Sleep
 227:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC2);
 228:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, (SUPERFRAME_DURATION_SD * 2) + (TDMA_FIRST_SLOT * i_am_collab_sl
 229:ServerTDMA.c  **** 
 230:ServerTDMA.c  **** 	appState					= APP_STATE_DO_COMPRESS;
 231:ServerTDMA.c  **** }
 232:ServerTDMA.c  **** static bool appBeaconInd(NWK_DataInd_t *ind)
 233:ServerTDMA.c  **** {
 234:ServerTDMA.c  **** 	(void) ind;
 235:ServerTDMA.c  **** 
 236:ServerTDMA.c  **** #if (LED_COUNT > 0)
 237:ServerTDMA.c  **** 	//LED_Toggle(LED_BLINK);
 238:ServerTDMA.c  **** 	//LED_Off(LED_DATA);
 239:ServerTDMA.c  **** #endif
 240:ServerTDMA.c  **** 
 241:ServerTDMA.c  **** 	AppMessageFrame_t*	frame_struct= (AppMessageFrame_t*) ind->data;
 242:ServerTDMA.c  **** 
 243:ServerTDMA.c  **** 	if(frame_struct->frameType == MSG_STATE_BEACON)
 244:ServerTDMA.c  **** 	{
 245:ServerTDMA.c  **** 		if(connected)
 246:ServerTDMA.c  **** 		{
 247:ServerTDMA.c  **** 			memcpy(collab_vector, frame_struct->beacon.collab_vector, N_COLLAB_VECTOR);
 248:ServerTDMA.c  **** 
 249:ServerTDMA.c  **** 			appState					= APP_STATE_SEND_PREPARE;
 250:ServerTDMA.c  **** 		}
 251:ServerTDMA.c  **** 		else
 252:ServerTDMA.c  **** 		{
 253:ServerTDMA.c  **** 			appState					= APP_STATE_SLEEP_PREPARE;
 254:ServerTDMA.c  **** 		}
 255:ServerTDMA.c  **** 	}
 256:ServerTDMA.c  **** 
 257:ServerTDMA.c  **** 	return true;
 258:ServerTDMA.c  **** }
 259:ServerTDMA.c  **** static void appCollabPrepare(void)
 260:ServerTDMA.c  **** {
 261:ServerTDMA.c  **** 	solver_encode_messages(&msgFrameCollab);
 262:ServerTDMA.c  **** }
 263:ServerTDMA.c  **** static void appSendPrepare(void)
 264:ServerTDMA.c  **** {
 265:ServerTDMA.c  **** 	macsc_set_cmp2_int_cb(tdma_client_job);			// Do job & Sleep
 266:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC2);
 267:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, TDMA_FIRST_SLOT * APP_ADDR, MACSC_CC2);
 268:ServerTDMA.c  **** 
 269:ServerTDMA.c  **** #if 0
 270:ServerTDMA.c  **** 	#if (APP_ADDR == 1)
 271:ServerTDMA.c  **** 		memcpy(msgFrame.data.data_vector, vector_data1, MSG_SIZE_MAX);
 272:ServerTDMA.c  **** 	#else
 273:ServerTDMA.c  **** 		memcpy(msgFrame.data.data_vector, vector_data2, MSG_SIZE_MAX);
 274:ServerTDMA.c  **** 	#endif
 275:ServerTDMA.c  **** #else
 276:ServerTDMA.c  **** 	for(uint8_t i = 0; i < MSG_SIZE_MAX; ++i)
 277:ServerTDMA.c  **** 	{
 278:ServerTDMA.c  **** 		msgFrame.data.data_vector[i]	= rand();
 279:ServerTDMA.c  **** 	}
 280:ServerTDMA.c  **** #endif
 281:ServerTDMA.c  **** 	
 282:ServerTDMA.c  **** 	// Analyze Beacon Payload to configure collaborative devices
 283:ServerTDMA.c  **** 	uint8_t			n_collab_dev		= collab_vector[0];
 284:ServerTDMA.c  **** 	i_am_collab_turn					= collab_vector[1];
 285:ServerTDMA.c  **** 	i_am_collab_dev						= false;
 286:ServerTDMA.c  **** 	i_am_collab_slot					= 0;
 287:ServerTDMA.c  **** 
 288:ServerTDMA.c  **** 	// Scan to check if THIS device is on collab_vector
 289:ServerTDMA.c  **** 	for(uint8_t i = 0; i < n_collab_dev; ++i)
 290:ServerTDMA.c  **** 	{
 291:ServerTDMA.c  **** 		if(collab_vector[i + 2] == APP_ADDR)
 292:ServerTDMA.c  **** 		{
 293:ServerTDMA.c  **** 			i_am_collab_dev				= true;
 294:ServerTDMA.c  **** 			i_am_collab_slot			= i + 1;
 295:ServerTDMA.c  **** 			break;
 296:ServerTDMA.c  **** 		}
 297:ServerTDMA.c  **** 	}
 298:ServerTDMA.c  **** 
 299:ServerTDMA.c  **** 	if(i_am_collab_dev)
 300:ServerTDMA.c  **** 	{
 301:ServerTDMA.c  **** 		macsc_set_cmp3_int_cb(tdma_collaborate_fase);	// Do Collaborate
 302:ServerTDMA.c  **** 		macsc_enable_cmp_int(MACSC_CC3);
 303:ServerTDMA.c  **** 		macsc_use_cmp(MACSC_RELATIVE_CMP, SUPERFRAME_DURATION_SD, MACSC_CC3);
 304:ServerTDMA.c  **** 
 305:ServerTDMA.c  **** 		solver_set_collab_device(i_am_collab_slot);
 306:ServerTDMA.c  **** 		solver_prepare_next_turn();
 307:ServerTDMA.c  **** 		solver_set_data_frame(APP_ADDR, &msgFrame);
 308:ServerTDMA.c  **** 	}
 309:ServerTDMA.c  **** 	else
 310:ServerTDMA.c  **** 	{
 311:ServerTDMA.c  **** 		solver_set_collab_device(0);
 312:ServerTDMA.c  **** 		macsc_set_cmp3_int_cb(NULL);					// Disable
 313:ServerTDMA.c  **** 	}
 314:ServerTDMA.c  **** }
 315:ServerTDMA.c  **** static void appSendCollab(void)
 316:ServerTDMA.c  **** {
 317:ServerTDMA.c  **** #if (LED_COUNT > 0)
 318:ServerTDMA.c  **** 	LED_On(LED_DATA);
 319:ServerTDMA.c  **** #endif
 320:ServerTDMA.c  **** 
 321:ServerTDMA.c  **** 	NWK_DataReq(&msgReqCollab);
 322:ServerTDMA.c  **** }
 323:ServerTDMA.c  **** #endif
 324:ServerTDMA.c  **** static void appSendData(void)
 325:ServerTDMA.c  **** {
 1116               		.loc 6 325 0
 1117               		.cfi_startproc
 1118 04c2 CF93      		push r28
 1119               	.LCFI47:
 1120               		.cfi_def_cfa_offset 3
 1121               		.cfi_offset 28, -2
 1122 04c4 DF93      		push r29
 1123               	.LCFI48:
 1124               		.cfi_def_cfa_offset 4
 1125               		.cfi_offset 29, -3
 1126 04c6 CDB7      		in r28,__SP_L__
 1127 04c8 DEB7      		in r29,__SP_H__
 1128               	.LCFI49:
 1129               		.cfi_def_cfa_register 28
 1130 04ca 2A97      		sbiw r28,10
 1131               	.LCFI50:
 1132               		.cfi_def_cfa_offset 14
 1133 04cc 0FB6      		in __tmp_reg__,__SREG__
 1134 04ce F894      		cli
 1135 04d0 DEBF      		out __SP_H__,r29
 1136 04d2 0FBE      		out __SREG__,__tmp_reg__
 1137 04d4 CDBF      		out __SP_L__,r28
 1138               	/* prologue: function */
 1139               	/* frame size = 10 */
 1140               	/* stack size = 12 */
 1141               	.L__stack_usage = 12
 1142 04d6 84E2      		ldi r24,lo8(36)
 1143 04d8 8A83      		std Y+2,r24
 1144 04da 1B82      		std Y+3,__zero_reg__
 1145 04dc 8A81      		ldd r24,Y+2
 1146 04de 8C83      		std Y+4,r24
 1147 04e0 8B81      		ldd r24,Y+3
 1148 04e2 8D83      		std Y+5,r24
 1149               	.LBB89:
 1150               	.LBB90:
 1151               	.LBB91:
 1152               	.LBB92:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1153               		.loc 7 281 0
 1154 04e4 8C81      		ldd r24,Y+4
 1155 04e6 8695      		lsr r24
 1156 04e8 8695      		lsr r24
 1157 04ea 8695      		lsr r24
 1158 04ec 8E83      		std Y+6,r24
 1159               	.LBB93:
 1160               	.LBB94:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1161               		.loc 7 170 0
 1162 04ee 8E81      		ldd r24,Y+6
 1163 04f0 282F      		mov r18,r24
 1164 04f2 30E0      		ldi r19,0
 1165 04f4 C901      		movw r24,r18
 1166 04f6 880F      		lsl r24
 1167 04f8 991F      		rol r25
 1168 04fa 820F      		add r24,r18
 1169 04fc 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1170               		.loc 7 169 0
 1171 04fe 8096      		adiw r24,32
 1172               	.LBE94:
 1173               	.LBE93:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1174               		.loc 7 281 0
 1175 0500 9887      		std Y+8,r25
 1176 0502 8F83      		std Y+7,r24
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 1177               		.loc 7 283 0
 1178 0504 8D81      		ldd r24,Y+5
 1179 0506 8823      		tst r24
 1180 0508 01F0      		breq .L35
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1181               		.loc 7 285 0
 1182 050a 8F81      		ldd r24,Y+7
 1183 050c 9885      		ldd r25,Y+8
 1184 050e FC01      		movw r30,r24
 1185 0510 4281      		ldd r20,Z+2
 1186 0512 8C81      		ldd r24,Y+4
 1187 0514 8987      		std Y+9,r24
 1188               	.LBB95:
 1189               	.LBB96:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1190               		.loc 7 189 0
 1191 0516 8985      		ldd r24,Y+9
 1192 0518 882F      		mov r24,r24
 1193 051a 90E0      		ldi r25,0
 1194 051c 9C01      		movw r18,r24
 1195 051e 2770      		andi r18,7
 1196 0520 3327      		clr r19
 1197 0522 81E0      		ldi r24,lo8(1)
 1198 0524 90E0      		ldi r25,0
 1199 0526 00C0      		rjmp 2f
 1200               		1:
 1201 0528 880F      		lsl r24
 1202 052a 991F      		rol r25
 1203               		2:
 1204 052c 2A95      		dec r18
 1205 052e 02F4      		brpl 1b
 1206               	.LBE96:
 1207               	.LBE95:
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1208               		.loc 7 285 0
 1209 0530 242F      		mov r18,r20
 1210 0532 282B      		or r18,r24
 1211 0534 8F81      		ldd r24,Y+7
 1212 0536 9885      		ldd r25,Y+8
 1213 0538 FC01      		movw r30,r24
 1214 053a 2283      		std Z+2,r18
 1215 053c 00C0      		rjmp .L37
 1216               	.L35:
 1217               		.loc 7 289 0
 1218 053e 8F81      		ldd r24,Y+7
 1219 0540 9885      		ldd r25,Y+8
 1220 0542 FC01      		movw r30,r24
 1221 0544 8281      		ldd r24,Z+2
 1222 0546 482F      		mov r20,r24
 1223 0548 8C81      		ldd r24,Y+4
 1224 054a 8A87      		std Y+10,r24
 1225               	.LBB97:
 1226               	.LBB98:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1227               		.loc 7 189 0
 1228 054c 8A85      		ldd r24,Y+10
 1229 054e 882F      		mov r24,r24
 1230 0550 90E0      		ldi r25,0
 1231 0552 9C01      		movw r18,r24
 1232 0554 2770      		andi r18,7
 1233 0556 3327      		clr r19
 1234 0558 81E0      		ldi r24,lo8(1)
 1235 055a 90E0      		ldi r25,0
 1236 055c 00C0      		rjmp 2f
 1237               		1:
 1238 055e 880F      		lsl r24
 1239 0560 991F      		rol r25
 1240               		2:
 1241 0562 2A95      		dec r18
 1242 0564 02F4      		brpl 1b
 1243               	.LBE98:
 1244               	.LBE97:
 1245               		.loc 7 289 0
 1246 0566 8095      		com r24
 1247 0568 8423      		and r24,r20
 1248 056a 282F      		mov r18,r24
 1249 056c 8F81      		ldd r24,Y+7
 1250 056e 9885      		ldd r25,Y+8
 1251 0570 FC01      		movw r30,r24
 1252 0572 2283      		std Z+2,r18
 1253               	.L37:
 1254               	.LBE92:
 1255               	.LBE91:
 1256               	.LBE90:
 1257               	.LBE89:
 326:ServerTDMA.c  **** #if (LED_COUNT > 0)
 327:ServerTDMA.c  **** 	LED_On(LED_DATA);
 328:ServerTDMA.c  **** 	#if (APP_COORDINATOR)
 329:ServerTDMA.c  **** 		SYS_TimerStart(&tmrBlinkData);
 1258               		.loc 6 329 0
 1259 0574 80E0      		ldi r24,lo8(tmrBlinkData)
 1260 0576 90E0      		ldi r25,hi8(tmrBlinkData)
 1261 0578 0E94 0000 		call SYS_TimerStart
 330:ServerTDMA.c  **** 	#endif
 331:ServerTDMA.c  **** #endif
 332:ServerTDMA.c  **** 
 333:ServerTDMA.c  **** #if (APP_COORDINATOR)
 334:ServerTDMA.c  **** #if (HUMAM_READABLE == 1)
 335:ServerTDMA.c  **** 	printf("\n\nTurn: %04d\n", server_turn++);
 336:ServerTDMA.c  **** 	energy_prepare_next_turn();
 337:ServerTDMA.c  **** 	solver_prepare_next_turn();
 338:ServerTDMA.c  **** 	energy_get_collab_vector(msgFrame.beacon.collab_vector);
 339:ServerTDMA.c  **** 	uint8_t aux_connected = energy_get_connected_vector(aux_buffer);
 340:ServerTDMA.c  **** 	toHexBuffer(statistics_buffer, aux_buffer, N_MOTES_COLLAB_MAX);
 341:ServerTDMA.c  **** 	printf("Connected: %02d, %s\n", aux_connected, statistics_buffer);
 342:ServerTDMA.c  **** 
 343:ServerTDMA.c  **** 	toHexBuffer(statistics_buffer, msgFrame.beacon.collab_vector, N_COLLAB_VECTOR);
 344:ServerTDMA.c  **** 	printf("Collab Buffer: %s\n", statistics_buffer);
 345:ServerTDMA.c  **** #else
 346:ServerTDMA.c  **** 	printf("\n%d,", server_turn++);
 1262               		.loc 6 346 0
 1263 057c 8091 0000 		lds r24,server_turn
 1264 0580 9091 0000 		lds r25,server_turn+1
 1265 0584 9C01      		movw r18,r24
 1266 0586 2F5F      		subi r18,-1
 1267 0588 3F4F      		sbci r19,-1
 1268 058a 3093 0000 		sts server_turn+1,r19
 1269 058e 2093 0000 		sts server_turn,r18
 1270 0592 292F      		mov r18,r25
 1271 0594 2F93      		push r18
 1272 0596 8F93      		push r24
 1273 0598 80E0      		ldi r24,lo8(.LC7)
 1274 059a 90E0      		ldi r25,hi8(.LC7)
 1275 059c 892F      		mov r24,r25
 1276 059e 8F93      		push r24
 1277 05a0 80E0      		ldi r24,lo8(.LC7)
 1278 05a2 90E0      		ldi r25,hi8(.LC7)
 1279 05a4 8F93      		push r24
 1280 05a6 0E94 0000 		call printf
 1281 05aa 0F90      		pop __tmp_reg__
 1282 05ac 0F90      		pop __tmp_reg__
 1283 05ae 0F90      		pop __tmp_reg__
 1284 05b0 0F90      		pop __tmp_reg__
 347:ServerTDMA.c  **** 	energy_prepare_next_turn();
 1285               		.loc 6 347 0
 1286 05b2 0E94 0000 		call energy_prepare_next_turn
 348:ServerTDMA.c  **** 	solver_prepare_next_turn();
 1287               		.loc 6 348 0
 1288 05b6 0E94 0000 		call solver_prepare_next_turn
 349:ServerTDMA.c  **** 	energy_get_collab_vector(msgFrame.beacon.collab_vector);
 1289               		.loc 6 349 0
 1290 05ba 80E0      		ldi r24,lo8(msgFrame+1)
 1291 05bc 90E0      		ldi r25,hi8(msgFrame+1)
 1292 05be 0E94 0000 		call energy_get_collab_vector
 350:ServerTDMA.c  **** 	uint8_t aux_connected = energy_get_connected_vector(aux_buffer);
 1293               		.loc 6 350 0
 1294 05c2 80E0      		ldi r24,lo8(aux_buffer)
 1295 05c4 90E0      		ldi r25,hi8(aux_buffer)
 1296 05c6 0E94 0000 		call energy_get_connected_vector
 1297 05ca 8983      		std Y+1,r24
 351:ServerTDMA.c  **** 	toHexBuffer(statistics_buffer, aux_buffer, N_MOTES_COLLAB_MAX);
 1298               		.loc 6 351 0
 1299 05cc 4EE0      		ldi r20,lo8(14)
 1300 05ce 50E0      		ldi r21,0
 1301 05d0 60E0      		ldi r22,lo8(aux_buffer)
 1302 05d2 70E0      		ldi r23,hi8(aux_buffer)
 1303 05d4 80E0      		ldi r24,lo8(statistics_buffer)
 1304 05d6 90E0      		ldi r25,hi8(statistics_buffer)
 1305 05d8 0E94 0000 		call toHexBuffer
 352:ServerTDMA.c  **** 	printf("%d, %s,", aux_connected, statistics_buffer);
 1306               		.loc 6 352 0
 1307 05dc 8981      		ldd r24,Y+1
 1308 05de 882F      		mov r24,r24
 1309 05e0 90E0      		ldi r25,0
 1310 05e2 20E0      		ldi r18,lo8(statistics_buffer)
 1311 05e4 30E0      		ldi r19,hi8(statistics_buffer)
 1312 05e6 232F      		mov r18,r19
 1313 05e8 2F93      		push r18
 1314 05ea 20E0      		ldi r18,lo8(statistics_buffer)
 1315 05ec 30E0      		ldi r19,hi8(statistics_buffer)
 1316 05ee 2F93      		push r18
 1317 05f0 292F      		mov r18,r25
 1318 05f2 2F93      		push r18
 1319 05f4 8F93      		push r24
 1320 05f6 80E0      		ldi r24,lo8(.LC8)
 1321 05f8 90E0      		ldi r25,hi8(.LC8)
 1322 05fa 892F      		mov r24,r25
 1323 05fc 8F93      		push r24
 1324 05fe 80E0      		ldi r24,lo8(.LC8)
 1325 0600 90E0      		ldi r25,hi8(.LC8)
 1326 0602 8F93      		push r24
 1327 0604 0E94 0000 		call printf
 1328 0608 0F90      		pop __tmp_reg__
 1329 060a 0F90      		pop __tmp_reg__
 1330 060c 0F90      		pop __tmp_reg__
 1331 060e 0F90      		pop __tmp_reg__
 1332 0610 0F90      		pop __tmp_reg__
 1333 0612 0F90      		pop __tmp_reg__
 353:ServerTDMA.c  **** 
 354:ServerTDMA.c  **** 	toHexBuffer(statistics_buffer, msgFrame.beacon.collab_vector, N_COLLAB_VECTOR);
 1334               		.loc 6 354 0
 1335 0614 40E2      		ldi r20,lo8(32)
 1336 0616 50E0      		ldi r21,0
 1337 0618 60E0      		ldi r22,lo8(msgFrame+1)
 1338 061a 70E0      		ldi r23,hi8(msgFrame+1)
 1339 061c 80E0      		ldi r24,lo8(statistics_buffer)
 1340 061e 90E0      		ldi r25,hi8(statistics_buffer)
 1341 0620 0E94 0000 		call toHexBuffer
 355:ServerTDMA.c  **** 	printf("%s,", statistics_buffer);
 1342               		.loc 6 355 0
 1343 0624 80E0      		ldi r24,lo8(statistics_buffer)
 1344 0626 90E0      		ldi r25,hi8(statistics_buffer)
 1345 0628 892F      		mov r24,r25
 1346 062a 8F93      		push r24
 1347 062c 80E0      		ldi r24,lo8(statistics_buffer)
 1348 062e 90E0      		ldi r25,hi8(statistics_buffer)
 1349 0630 8F93      		push r24
 1350 0632 80E0      		ldi r24,lo8(.LC9)
 1351 0634 90E0      		ldi r25,hi8(.LC9)
 1352 0636 892F      		mov r24,r25
 1353 0638 8F93      		push r24
 1354 063a 80E0      		ldi r24,lo8(.LC9)
 1355 063c 90E0      		ldi r25,hi8(.LC9)
 1356 063e 8F93      		push r24
 1357 0640 0E94 0000 		call printf
 1358 0644 0F90      		pop __tmp_reg__
 1359 0646 0F90      		pop __tmp_reg__
 1360 0648 0F90      		pop __tmp_reg__
 1361 064a 0F90      		pop __tmp_reg__
 356:ServerTDMA.c  **** #endif
 357:ServerTDMA.c  **** 	
 358:ServerTDMA.c  **** 	NWK_DataReq(&msgReq);
 1362               		.loc 6 358 0
 1363 064c 80E0      		ldi r24,lo8(msgReq)
 1364 064e 90E0      		ldi r25,hi8(msgReq)
 1365 0650 0E94 0000 		call NWK_DataReq
 359:ServerTDMA.c  **** #else
 360:ServerTDMA.c  **** 	if(connected)
 361:ServerTDMA.c  **** 	{
 362:ServerTDMA.c  **** 		// Utiliza o SLOT do TDMA para enviar dados somente apos conectar com o Coordenador
 363:ServerTDMA.c  **** 		NWK_DataReq(&msgReq);
 364:ServerTDMA.c  **** 	}
 365:ServerTDMA.c  **** 	else
 366:ServerTDMA.c  **** 	{
 367:ServerTDMA.c  **** 		NWK_DataReq(&msgReqConnection);
 368:ServerTDMA.c  **** 	}
 369:ServerTDMA.c  **** #endif
 370:ServerTDMA.c  **** }
 1366               		.loc 6 370 0
 1367 0654 0000      		nop
 1368               	/* epilogue start */
 1369 0656 2A96      		adiw r28,10
 1370 0658 0FB6      		in __tmp_reg__,__SREG__
 1371 065a F894      		cli
 1372 065c DEBF      		out __SP_H__,r29
 1373 065e 0FBE      		out __SREG__,__tmp_reg__
 1374 0660 CDBF      		out __SP_L__,r28
 1375 0662 DF91      		pop r29
 1376 0664 CF91      		pop r28
 1377 0666 0895      		ret
 1378               		.cfi_endproc
 1379               	.LFE135:
 1382               	appDataInd:
 1383               	.LFB136:
 371:ServerTDMA.c  **** static bool appDataInd(NWK_DataInd_t *ind)
 372:ServerTDMA.c  **** {
 1384               		.loc 6 372 0
 1385               		.cfi_startproc
 1386 0668 CF93      		push r28
 1387               	.LCFI51:
 1388               		.cfi_def_cfa_offset 3
 1389               		.cfi_offset 28, -2
 1390 066a DF93      		push r29
 1391               	.LCFI52:
 1392               		.cfi_def_cfa_offset 4
 1393               		.cfi_offset 29, -3
 1394 066c CDB7      		in r28,__SP_L__
 1395 066e DEB7      		in r29,__SP_H__
 1396               	.LCFI53:
 1397               		.cfi_def_cfa_register 28
 1398 0670 2B97      		sbiw r28,11
 1399               	.LCFI54:
 1400               		.cfi_def_cfa_offset 15
 1401 0672 0FB6      		in __tmp_reg__,__SREG__
 1402 0674 F894      		cli
 1403 0676 DEBF      		out __SP_H__,r29
 1404 0678 0FBE      		out __SREG__,__tmp_reg__
 1405 067a CDBF      		out __SP_L__,r28
 1406               	/* prologue: function */
 1407               	/* frame size = 11 */
 1408               	/* stack size = 13 */
 1409               	.L__stack_usage = 13
 1410 067c 9B87      		std Y+11,r25
 1411 067e 8A87      		std Y+10,r24
 1412 0680 85E2      		ldi r24,lo8(37)
 1413 0682 8B83      		std Y+3,r24
 1414 0684 8B81      		ldd r24,Y+3
 1415 0686 8C83      		std Y+4,r24
 1416 0688 8C81      		ldd r24,Y+4
 1417 068a 8D83      		std Y+5,r24
 1418               	.LBB99:
 1419               	.LBB100:
 1420               	.LBB101:
 1421               	.LBB102:
 1422               	.LBB103:
 1423               	.LBB104:
 179:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1424               		.loc 7 179 0
 1425 068c 8D81      		ldd r24,Y+5
 1426 068e 8695      		lsr r24
 1427 0690 8695      		lsr r24
 1428 0692 8695      		lsr r24
 1429 0694 8E83      		std Y+6,r24
 1430               	.LBB105:
 1431               	.LBB106:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1432               		.loc 7 170 0
 1433 0696 8E81      		ldd r24,Y+6
 1434 0698 282F      		mov r18,r24
 1435 069a 30E0      		ldi r19,0
 1436 069c C901      		movw r24,r18
 1437 069e 880F      		lsl r24
 1438 06a0 991F      		rol r25
 1439 06a2 820F      		add r24,r18
 1440 06a4 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1441               		.loc 7 169 0
 1442 06a6 8096      		adiw r24,32
 1443               	.LBE106:
 1444               	.LBE105:
 1445               	.LBE104:
 1446               	.LBE103:
 290:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 291:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 292:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 293:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 294:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 295:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set port multiple pins level to high or low.
 296:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 297:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: mask Pin mask of pins to configure.
 298:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: level high/low
 299:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 300:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_level(ioport_port_t port,
 301:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, ioport_port_mask_t level)
 302:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 303:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 304:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 305:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (level) {
 306:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA |= mask;
 307:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else {
 308:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA &= ~mask;
 309:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 310:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 311:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 312:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 313:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Get pin level of pin.
 314:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 315:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \return: level high/low
 316:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 317:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static bool arch_ioport_get_pin_level(ioport_pin_t pin)
 318:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 319:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 320:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return base->PINCRL & arch_ioport_pin_to_mask(pin);
 321:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 322:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 323:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 324:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Get multiple pins level of single port.
 325:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 326:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to read data.
 327:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \return: 8 bit value based on level voltage on pins.
 328:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 329:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static ioport_port_mask_t arch_ioport_get_port_level(
 330:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_t port, ioport_port_mask_t mask)
 331:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 332:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 333:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 334:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return (base->PINCRL & mask);
 335:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 336:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 337:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 338:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : To toggle the pin
 339:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 340:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 341:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_toggle_pin_level(ioport_pin_t pin)
 342:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 343:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 1447               		.loc 7 343 0
 1448 06a8 9887      		std Y+8,r25
 1449 06aa 8F83      		std Y+7,r24
 1450 06ac 8C81      		ldd r24,Y+4
 1451 06ae 8987      		std Y+9,r24
 1452               	.LBB107:
 1453               	.LBB108:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1454               		.loc 7 189 0
 1455 06b0 8985      		ldd r24,Y+9
 1456 06b2 882F      		mov r24,r24
 1457 06b4 90E0      		ldi r25,0
 1458 06b6 9C01      		movw r18,r24
 1459 06b8 2770      		andi r18,7
 1460 06ba 3327      		clr r19
 1461 06bc 81E0      		ldi r24,lo8(1)
 1462 06be 90E0      		ldi r25,0
 1463 06c0 00C0      		rjmp 2f
 1464               		1:
 1465 06c2 880F      		lsl r24
 1466 06c4 991F      		rol r25
 1467               		2:
 1468 06c6 2A95      		dec r18
 1469 06c8 02F4      		brpl 1b
 1470 06ca 282F      		mov r18,r24
 1471               	.LBE108:
 1472               	.LBE107:
 344:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 345:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	base->PINCRL = arch_ioport_pin_to_mask(pin);
 1473               		.loc 7 345 0
 1474 06cc 8F81      		ldd r24,Y+7
 1475 06ce 9885      		ldd r25,Y+8
 1476 06d0 FC01      		movw r30,r24
 1477 06d2 2083      		st Z,r18
 1478               	.LBE102:
 1479               	.LBE101:
 1480               	.LBE100:
 1481               	.LBE99:
 373:ServerTDMA.c  **** #if (LED_COUNT > 0)
 374:ServerTDMA.c  **** 	LED_Toggle(LED_BLINK);
 375:ServerTDMA.c  **** 	//LED_Off(LED_DATA);
 376:ServerTDMA.c  **** #endif
 377:ServerTDMA.c  **** 	energy_receive_statistics(ind);
 1482               		.loc 6 377 0
 1483 06d4 8A85      		ldd r24,Y+10
 1484 06d6 9B85      		ldd r25,Y+11
 1485 06d8 0E94 0000 		call energy_receive_statistics
 378:ServerTDMA.c  **** 	solver_received_data_frame(ind);
 1486               		.loc 6 378 0
 1487 06dc 8A85      		ldd r24,Y+10
 1488 06de 9B85      		ldd r25,Y+11
 1489 06e0 0E94 0000 		call solver_received_data_frame
 379:ServerTDMA.c  **** 
 380:ServerTDMA.c  **** 	AppMessageFrame_t*	frame_struct	= (AppMessageFrame_t*) ind->data;
 1490               		.loc 6 380 0
 1491 06e4 8A85      		ldd r24,Y+10
 1492 06e6 9B85      		ldd r25,Y+11
 1493 06e8 FC01      		movw r30,r24
 1494 06ea 8085      		ldd r24,Z+8
 1495 06ec 9185      		ldd r25,Z+9
 1496 06ee 9A83      		std Y+2,r25
 1497 06f0 8983      		std Y+1,r24
 381:ServerTDMA.c  **** 
 382:ServerTDMA.c  **** 	if(frame_struct->frameType == MSG_STATE_CONNECTION)
 1498               		.loc 6 382 0
 1499 06f2 8981      		ldd r24,Y+1
 1500 06f4 9A81      		ldd r25,Y+2
 1501 06f6 FC01      		movw r30,r24
 1502 06f8 8081      		ld r24,Z
 1503 06fa 8330      		cpi r24,lo8(3)
 1504 06fc 01F4      		brne .L43
 383:ServerTDMA.c  **** 	{
 384:ServerTDMA.c  **** #if (APP_COORDINATOR)
 385:ServerTDMA.c  **** 		// No coordenador, responder ao pedido de conexo.
 386:ServerTDMA.c  **** 		msgReqConnection.dstAddr = ind->srcAddr;
 1505               		.loc 6 386 0
 1506 06fe 8A85      		ldd r24,Y+10
 1507 0700 9B85      		ldd r25,Y+11
 1508 0702 FC01      		movw r30,r24
 1509 0704 8081      		ld r24,Z
 1510 0706 9181      		ldd r25,Z+1
 1511 0708 9093 0000 		sts msgReqConnection+5+1,r25
 1512 070c 8093 0000 		sts msgReqConnection+5,r24
 387:ServerTDMA.c  **** 		NWK_DataReq(&msgReqConnection);
 1513               		.loc 6 387 0
 1514 0710 80E0      		ldi r24,lo8(msgReqConnection)
 1515 0712 90E0      		ldi r25,hi8(msgReqConnection)
 1516 0714 0E94 0000 		call NWK_DataReq
 1517               	.L43:
 388:ServerTDMA.c  **** #else
 389:ServerTDMA.c  **** 		// No cliente, indicao de conexo aceita e que os dados podem ser enviados.
 390:ServerTDMA.c  **** 		connected				= true;
 391:ServerTDMA.c  **** #endif
 392:ServerTDMA.c  **** 	}
 393:ServerTDMA.c  **** 
 394:ServerTDMA.c  **** 	return true;
 1518               		.loc 6 394 0
 1519 0718 81E0      		ldi r24,lo8(1)
 1520               	/* epilogue start */
 395:ServerTDMA.c  **** }
 1521               		.loc 6 395 0
 1522 071a 2B96      		adiw r28,11
 1523 071c 0FB6      		in __tmp_reg__,__SREG__
 1524 071e F894      		cli
 1525 0720 DEBF      		out __SP_H__,r29
 1526 0722 0FBE      		out __SREG__,__tmp_reg__
 1527 0724 CDBF      		out __SP_L__,r28
 1528 0726 DF91      		pop r29
 1529 0728 CF91      		pop r28
 1530 072a 0895      		ret
 1531               		.cfi_endproc
 1532               	.LFE136:
 1535               	appInit:
 1536               	.LFB137:
 396:ServerTDMA.c  **** static void appInit(void)
 397:ServerTDMA.c  **** {
 1537               		.loc 6 397 0
 1538               		.cfi_startproc
 1539 072c CF93      		push r28
 1540               	.LCFI55:
 1541               		.cfi_def_cfa_offset 3
 1542               		.cfi_offset 28, -2
 1543 072e DF93      		push r29
 1544               	.LCFI56:
 1545               		.cfi_def_cfa_offset 4
 1546               		.cfi_offset 29, -3
 1547 0730 CDB7      		in r28,__SP_L__
 1548 0732 DEB7      		in r29,__SP_H__
 1549               	.LCFI57:
 1550               		.cfi_def_cfa_register 28
 1551 0734 2997      		sbiw r28,9
 1552               	.LCFI58:
 1553               		.cfi_def_cfa_offset 13
 1554 0736 0FB6      		in __tmp_reg__,__SREG__
 1555 0738 F894      		cli
 1556 073a DEBF      		out __SP_H__,r29
 1557 073c 0FBE      		out __SREG__,__tmp_reg__
 1558 073e CDBF      		out __SP_L__,r28
 1559               	/* prologue: function */
 1560               	/* frame size = 9 */
 1561               	/* stack size = 11 */
 1562               	.L__stack_usage = 11
 398:ServerTDMA.c  **** 	NWK_SetAddr(APP_ADDR);
 1563               		.loc 6 398 0
 1564 0740 80E0      		ldi r24,0
 1565 0742 90E0      		ldi r25,0
 1566 0744 0E94 0000 		call NWK_SetAddr
 399:ServerTDMA.c  **** 	NWK_SetPanId(APP_PANID);
 1567               		.loc 6 399 0
 1568 0748 8EEF      		ldi r24,lo8(-2)
 1569 074a 9AEC      		ldi r25,lo8(-54)
 1570 074c 0E94 0000 		call NWK_SetPanId
 400:ServerTDMA.c  **** 	PHY_SetChannel(APP_CHANNEL);
 1571               		.loc 6 400 0
 1572 0750 8FE0      		ldi r24,lo8(15)
 1573 0752 0E94 0000 		call PHY_SetChannel
 401:ServerTDMA.c  **** 	PHY_SetRxState(true);
 1574               		.loc 6 401 0
 1575 0756 81E0      		ldi r24,lo8(1)
 1576 0758 0E94 0000 		call PHY_SetRxState
 1577 075c 83E2      		ldi r24,lo8(35)
 1578 075e 8983      		std Y+1,r24
 1579 0760 1A82      		std Y+2,__zero_reg__
 1580 0762 8981      		ldd r24,Y+1
 1581 0764 8B83      		std Y+3,r24
 1582 0766 8A81      		ldd r24,Y+2
 1583 0768 8C83      		std Y+4,r24
 1584               	.LBB109:
 1585               	.LBB110:
 1586               	.LBB111:
 1587               	.LBB112:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1588               		.loc 7 281 0
 1589 076a 8B81      		ldd r24,Y+3
 1590 076c 8695      		lsr r24
 1591 076e 8695      		lsr r24
 1592 0770 8695      		lsr r24
 1593 0772 8D83      		std Y+5,r24
 1594               	.LBB113:
 1595               	.LBB114:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1596               		.loc 7 170 0
 1597 0774 8D81      		ldd r24,Y+5
 1598 0776 282F      		mov r18,r24
 1599 0778 30E0      		ldi r19,0
 1600 077a C901      		movw r24,r18
 1601 077c 880F      		lsl r24
 1602 077e 991F      		rol r25
 1603 0780 820F      		add r24,r18
 1604 0782 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1605               		.loc 7 169 0
 1606 0784 8096      		adiw r24,32
 1607               	.LBE114:
 1608               	.LBE113:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1609               		.loc 7 281 0
 1610 0786 9F83      		std Y+7,r25
 1611 0788 8E83      		std Y+6,r24
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 1612               		.loc 7 283 0
 1613 078a 8C81      		ldd r24,Y+4
 1614 078c 8823      		tst r24
 1615 078e 01F0      		breq .L47
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1616               		.loc 7 285 0
 1617 0790 8E81      		ldd r24,Y+6
 1618 0792 9F81      		ldd r25,Y+7
 1619 0794 FC01      		movw r30,r24
 1620 0796 4281      		ldd r20,Z+2
 1621 0798 8B81      		ldd r24,Y+3
 1622 079a 8887      		std Y+8,r24
 1623               	.LBB115:
 1624               	.LBB116:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1625               		.loc 7 189 0
 1626 079c 8885      		ldd r24,Y+8
 1627 079e 882F      		mov r24,r24
 1628 07a0 90E0      		ldi r25,0
 1629 07a2 9C01      		movw r18,r24
 1630 07a4 2770      		andi r18,7
 1631 07a6 3327      		clr r19
 1632 07a8 81E0      		ldi r24,lo8(1)
 1633 07aa 90E0      		ldi r25,0
 1634 07ac 00C0      		rjmp 2f
 1635               		1:
 1636 07ae 880F      		lsl r24
 1637 07b0 991F      		rol r25
 1638               		2:
 1639 07b2 2A95      		dec r18
 1640 07b4 02F4      		brpl 1b
 1641               	.LBE116:
 1642               	.LBE115:
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1643               		.loc 7 285 0
 1644 07b6 242F      		mov r18,r20
 1645 07b8 282B      		or r18,r24
 1646 07ba 8E81      		ldd r24,Y+6
 1647 07bc 9F81      		ldd r25,Y+7
 1648 07be FC01      		movw r30,r24
 1649 07c0 2283      		std Z+2,r18
 1650 07c2 00C0      		rjmp .L49
 1651               	.L47:
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 1652               		.loc 7 289 0
 1653 07c4 8E81      		ldd r24,Y+6
 1654 07c6 9F81      		ldd r25,Y+7
 1655 07c8 FC01      		movw r30,r24
 1656 07ca 8281      		ldd r24,Z+2
 1657 07cc 482F      		mov r20,r24
 1658 07ce 8B81      		ldd r24,Y+3
 1659 07d0 8987      		std Y+9,r24
 1660               	.LBB117:
 1661               	.LBB118:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1662               		.loc 7 189 0
 1663 07d2 8985      		ldd r24,Y+9
 1664 07d4 882F      		mov r24,r24
 1665 07d6 90E0      		ldi r25,0
 1666 07d8 9C01      		movw r18,r24
 1667 07da 2770      		andi r18,7
 1668 07dc 3327      		clr r19
 1669 07de 81E0      		ldi r24,lo8(1)
 1670 07e0 90E0      		ldi r25,0
 1671 07e2 00C0      		rjmp 2f
 1672               		1:
 1673 07e4 880F      		lsl r24
 1674 07e6 991F      		rol r25
 1675               		2:
 1676 07e8 2A95      		dec r18
 1677 07ea 02F4      		brpl 1b
 1678               	.LBE118:
 1679               	.LBE117:
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 1680               		.loc 7 289 0
 1681 07ec 8095      		com r24
 1682 07ee 8423      		and r24,r20
 1683 07f0 282F      		mov r18,r24
 1684 07f2 8E81      		ldd r24,Y+6
 1685 07f4 9F81      		ldd r25,Y+7
 1686 07f6 FC01      		movw r30,r24
 1687 07f8 2283      		std Z+2,r18
 1688               	.L49:
 1689               	.LBE112:
 1690               	.LBE111:
 1691               	.LBE110:
 1692               	.LBE109:
 402:ServerTDMA.c  **** 
 403:ServerTDMA.c  **** #if (LED_COUNT > 0)
 404:ServerTDMA.c  **** 	LED_On(LED_NETWORK);
 405:ServerTDMA.c  **** #endif
 406:ServerTDMA.c  **** 
 407:ServerTDMA.c  **** #ifdef PHY_ENABLE_RANDOM_NUMBER_GENERATOR
 408:ServerTDMA.c  **** 	srand(PHY_RandomReq());
 1693               		.loc 6 408 0
 1694 07fa 0E94 0000 		call PHY_RandomReq
 1695 07fe 0E94 0000 		call srand
 409:ServerTDMA.c  **** #endif
 410:ServerTDMA.c  **** 
 411:ServerTDMA.c  **** 	tmrBlinkData.interval		= 50;
 1696               		.loc 6 411 0
 1697 0802 82E3      		ldi r24,lo8(50)
 1698 0804 90E0      		ldi r25,0
 1699 0806 A0E0      		ldi r26,0
 1700 0808 B0E0      		ldi r27,0
 1701 080a 8093 0000 		sts tmrBlinkData+6,r24
 1702 080e 9093 0000 		sts tmrBlinkData+6+1,r25
 1703 0812 A093 0000 		sts tmrBlinkData+6+2,r26
 1704 0816 B093 0000 		sts tmrBlinkData+6+3,r27
 412:ServerTDMA.c  **** 	tmrBlinkData.mode			= SYS_TIMER_INTERVAL_MODE;
 1705               		.loc 6 412 0
 1706 081a 1092 0000 		sts tmrBlinkData+10,__zero_reg__
 413:ServerTDMA.c  **** 	tmrBlinkData.handler		= tmrBlinkDataHandler;
 1707               		.loc 6 413 0
 1708 081e 80E0      		ldi r24,lo8(gs(tmrBlinkDataHandler))
 1709 0820 90E0      		ldi r25,hi8(gs(tmrBlinkDataHandler))
 1710 0822 9093 0000 		sts tmrBlinkData+11+1,r25
 1711 0826 8093 0000 		sts tmrBlinkData+11,r24
 414:ServerTDMA.c  **** 
 415:ServerTDMA.c  **** 	msgFrameConnection.frameType = MSG_STATE_CONNECTION;
 1712               		.loc 6 415 0
 1713 082a 83E0      		ldi r24,lo8(3)
 1714 082c 8093 0000 		sts msgFrameConnection,r24
 416:ServerTDMA.c  **** 
 417:ServerTDMA.c  **** 	msgReqConnection.dstAddr	= BROADCAST;
 1715               		.loc 6 417 0
 1716 0830 8FEF      		ldi r24,lo8(-1)
 1717 0832 9FEF      		ldi r25,lo8(-1)
 1718 0834 9093 0000 		sts msgReqConnection+5+1,r25
 1719 0838 8093 0000 		sts msgReqConnection+5,r24
 418:ServerTDMA.c  **** 	msgReqConnection.dstEndpoint = APP_DATA_ENDPOINT;
 1720               		.loc 6 418 0
 1721 083c 81E0      		ldi r24,lo8(1)
 1722 083e 8093 0000 		sts msgReqConnection+7,r24
 419:ServerTDMA.c  **** 	msgReqConnection.srcEndpoint = APP_DATA_ENDPOINT;
 1723               		.loc 6 419 0
 1724 0842 81E0      		ldi r24,lo8(1)
 1725 0844 8093 0000 		sts msgReqConnection+8,r24
 420:ServerTDMA.c  **** 	msgReqConnection.options	= NWK_OPT_LINK_LOCAL;
 1726               		.loc 6 420 0
 1727 0848 88E0      		ldi r24,lo8(8)
 1728 084a 90E0      		ldi r25,0
 1729 084c 9093 0000 		sts msgReqConnection+9+1,r25
 1730 0850 8093 0000 		sts msgReqConnection+9,r24
 421:ServerTDMA.c  **** 	msgReqConnection.data		= (uint8_t *)&msgFrameConnection;
 1731               		.loc 6 421 0
 1732 0854 80E0      		ldi r24,lo8(msgFrameConnection)
 1733 0856 90E0      		ldi r25,hi8(msgFrameConnection)
 1734 0858 9093 0000 		sts msgReqConnection+11+1,r25
 1735 085c 8093 0000 		sts msgReqConnection+11,r24
 422:ServerTDMA.c  **** 	msgReqConnection.size		= sizeof(MsgState_t);
 1736               		.loc 6 422 0
 1737 0860 81E0      		ldi r24,lo8(1)
 1738 0862 8093 0000 		sts msgReqConnection+13,r24
 423:ServerTDMA.c  **** 	msgReqConnection.confirm	= NULL;
 1739               		.loc 6 423 0
 1740 0866 1092 0000 		sts msgReqConnection+14+1,__zero_reg__
 1741 086a 1092 0000 		sts msgReqConnection+14,__zero_reg__
 424:ServerTDMA.c  **** 
 425:ServerTDMA.c  **** #if (APP_COORDINATOR)
 426:ServerTDMA.c  **** 	server_turn					= 1;
 1742               		.loc 6 426 0
 1743 086e 81E0      		ldi r24,lo8(1)
 1744 0870 90E0      		ldi r25,0
 1745 0872 9093 0000 		sts server_turn+1,r25
 1746 0876 8093 0000 		sts server_turn,r24
 427:ServerTDMA.c  **** 
 428:ServerTDMA.c  **** 	NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 1747               		.loc 6 428 0
 1748 087a 60E0      		ldi r22,lo8(gs(appDataInd))
 1749 087c 70E0      		ldi r23,hi8(gs(appDataInd))
 1750 087e 81E0      		ldi r24,lo8(1)
 1751 0880 0E94 0000 		call NWK_OpenEndpoint
 429:ServerTDMA.c  **** 
 430:ServerTDMA.c  **** 	msgFrame.frameType			= MSG_STATE_BEACON;
 1752               		.loc 6 430 0
 1753 0884 1092 0000 		sts msgFrame,__zero_reg__
 431:ServerTDMA.c  **** 
 432:ServerTDMA.c  **** 	msgReq.dstAddr				= BROADCAST;
 1754               		.loc 6 432 0
 1755 0888 8FEF      		ldi r24,lo8(-1)
 1756 088a 9FEF      		ldi r25,lo8(-1)
 1757 088c 9093 0000 		sts msgReq+5+1,r25
 1758 0890 8093 0000 		sts msgReq+5,r24
 433:ServerTDMA.c  **** 	msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1759               		.loc 6 433 0
 1760 0894 1092 0000 		sts msgReq+7,__zero_reg__
 434:ServerTDMA.c  **** 	msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1761               		.loc 6 434 0
 1762 0898 1092 0000 		sts msgReq+8,__zero_reg__
 435:ServerTDMA.c  **** 	msgReq.options				= NWK_OPT_BEACON;
 1763               		.loc 6 435 0
 1764 089c 80E2      		ldi r24,lo8(32)
 1765 089e 90E0      		ldi r25,0
 1766 08a0 9093 0000 		sts msgReq+9+1,r25
 1767 08a4 8093 0000 		sts msgReq+9,r24
 436:ServerTDMA.c  **** 	msgReq.data					= (uint8_t *)&msgFrame;
 1768               		.loc 6 436 0
 1769 08a8 80E0      		ldi r24,lo8(msgFrame)
 1770 08aa 90E0      		ldi r25,hi8(msgFrame)
 1771 08ac 9093 0000 		sts msgReq+11+1,r25
 1772 08b0 8093 0000 		sts msgReq+11,r24
 437:ServerTDMA.c  **** 	msgReq.size					= sizeof(MsgState_t) + sizeof(AppMessageBeacon_t);
 1773               		.loc 6 437 0
 1774 08b4 81E2      		ldi r24,lo8(33)
 1775 08b6 8093 0000 		sts msgReq+13,r24
 438:ServerTDMA.c  **** 	msgReq.confirm				= NULL;
 1776               		.loc 6 438 0
 1777 08ba 1092 0000 		sts msgReq+14+1,__zero_reg__
 1778 08be 1092 0000 		sts msgReq+14,__zero_reg__
 439:ServerTDMA.c  **** 
 440:ServerTDMA.c  **** #if (MASTER_MACSC == 1)
 441:ServerTDMA.c  **** 	/*
 442:ServerTDMA.c  **** 	 * Configure interrupts callback functions
 443:ServerTDMA.c  **** 	 * overflow interrupt, compare 1,2,3 interrupts
 444:ServerTDMA.c  **** 	 */
 445:ServerTDMA.c  **** 	macsc_set_cmp1_int_cb(tdma_server_beacon);
 1779               		.loc 6 445 0
 1780 08c2 80E0      		ldi r24,lo8(gs(tdma_server_beacon))
 1781 08c4 90E0      		ldi r25,hi8(gs(tdma_server_beacon))
 1782 08c6 0E94 0000 		call macsc_set_cmp1_int_cb
 446:ServerTDMA.c  **** 	macsc_set_cmp2_int_cb(tdma_server_statistics);
 1783               		.loc 6 446 0
 1784 08ca 80E0      		ldi r24,lo8(gs(tdma_server_statistics))
 1785 08cc 90E0      		ldi r25,hi8(gs(tdma_server_statistics))
 1786 08ce 0E94 0000 		call macsc_set_cmp2_int_cb
 447:ServerTDMA.c  **** 
 448:ServerTDMA.c  **** 	/*
 449:ServerTDMA.c  **** 	 * Configure MACSC to generate compare interrupts from channels 1,2,3
 450:ServerTDMA.c  **** 	 * Set compare mode to absolute, set compare value.
 451:ServerTDMA.c  **** 	 */
 452:ServerTDMA.c  **** 	macsc_enable_manual_bts();
 1787               		.loc 6 452 0
 1788 08d2 0E94 0000 		call macsc_enable_manual_bts
 453:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC1);
 1789               		.loc 6 453 0
 1790 08d6 81E0      		ldi r24,lo8(1)
 1791 08d8 0E94 0000 		call macsc_enable_cmp_int
 454:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, BEACON_INTERVAL_BI, MACSC_CC1);
 1792               		.loc 6 454 0
 1793 08dc 21E0      		ldi r18,lo8(1)
 1794 08de 40E0      		ldi r20,0
 1795 08e0 50EC      		ldi r21,lo8(-64)
 1796 08e2 63E0      		ldi r22,lo8(3)
 1797 08e4 70E0      		ldi r23,0
 1798 08e6 81E0      		ldi r24,lo8(1)
 1799 08e8 0E94 0000 		call macsc_use_cmp
 455:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC2);
 1800               		.loc 6 455 0
 1801 08ec 82E0      		ldi r24,lo8(2)
 1802 08ee 0E94 0000 		call macsc_enable_cmp_int
 456:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, (SUPERFRAME_DURATION_SD * 3), MACSC_CC2);
 1803               		.loc 6 456 0
 1804 08f2 22E0      		ldi r18,lo8(2)
 1805 08f4 40E8      		ldi r20,lo8(-128)
 1806 08f6 52E3      		ldi r21,lo8(50)
 1807 08f8 62E0      		ldi r22,lo8(2)
 1808 08fa 70E0      		ldi r23,0
 1809 08fc 81E0      		ldi r24,lo8(1)
 1810 08fe 0E94 0000 		call macsc_use_cmp
 457:ServerTDMA.c  **** #else
 458:ServerTDMA.c  **** 	tmrBeaconInterval.interval	= (BEACON_INTERVAL_BI * SYMBOL_TIME) * 1000;
 459:ServerTDMA.c  **** 	tmrBeaconInterval.mode		= SYS_TIMER_PERIODIC_MODE;
 460:ServerTDMA.c  **** 	tmrBeaconInterval.handler	= tmr_tdma_server_beacon;
 461:ServerTDMA.c  **** 
 462:ServerTDMA.c  **** 	tmrComputeData.interval		= ((SUPERFRAME_DURATION_SD * 3) * SYMBOL_TIME) * 1000;
 463:ServerTDMA.c  **** 	tmrComputeData.mode			= SYS_TIMER_INTERVAL_MODE;
 464:ServerTDMA.c  **** 	tmrComputeData.handler		= tmr_tdma_server_statistics;
 465:ServerTDMA.c  **** 	
 466:ServerTDMA.c  **** 	SYS_TimerStart(&tmrBeaconInterval);
 467:ServerTDMA.c  **** #endif
 468:ServerTDMA.c  **** #else
 469:ServerTDMA.c  **** 	connected					= false;
 470:ServerTDMA.c  **** 	i_am_collab_dev				= false;
 471:ServerTDMA.c  **** 	i_am_collab_slot			= 0;
 472:ServerTDMA.c  **** 	i_am_collab_turn			= 0;
 473:ServerTDMA.c  **** 
 474:ServerTDMA.c  **** 	NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 475:ServerTDMA.c  **** 	NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 476:ServerTDMA.c  **** 
 477:ServerTDMA.c  **** 	msgFrame.frameType			= MSG_STATE_DATA;
 478:ServerTDMA.c  **** 
 479:ServerTDMA.c  **** 	msgReq.dstAddr				= BROADCAST;
 480:ServerTDMA.c  **** 	msgReq.dstEndpoint			= APP_DATA_ENDPOINT;
 481:ServerTDMA.c  **** 	msgReq.srcEndpoint			= APP_DATA_ENDPOINT;
 482:ServerTDMA.c  **** 	msgReq.options				= NWK_OPT_LINK_LOCAL;
 483:ServerTDMA.c  **** 	msgReq.data					= (uint8_t *)&msgFrame;
 484:ServerTDMA.c  **** 	msgReq.size					= sizeof(MsgState_t) + sizeof(AppMessageData_t);
 485:ServerTDMA.c  **** 	msgReq.confirm				= tdma_job_conf;
 486:ServerTDMA.c  **** 
 487:ServerTDMA.c  **** 	msgFrameCollab.frameType	= MSG_STATE_ENCODED_DATA;
 488:ServerTDMA.c  **** 	// collab.coefficients must be populated with solver_encode_messages() method before call send Fra
 489:ServerTDMA.c  **** 	// collab.data_vector must be populated with solver_encode_messages() method before call send Fram
 490:ServerTDMA.c  **** 
 491:ServerTDMA.c  **** 	msgReqCollab.dstAddr		= APP_PAN_ADDR;
 492:ServerTDMA.c  **** 	msgReqCollab.dstEndpoint	= APP_DATA_ENDPOINT;
 493:ServerTDMA.c  **** 	msgReqCollab.srcEndpoint	= APP_DATA_ENDPOINT;
 494:ServerTDMA.c  **** 	msgReqCollab.options		= NWK_OPT_LINK_LOCAL;
 495:ServerTDMA.c  **** 	msgReqCollab.data			= (uint8_t *) &msgFrameCollab;
 496:ServerTDMA.c  **** 	msgReqCollab.size			= sizeof(MsgState_t) + sizeof(AppMessageCollab_t);
 497:ServerTDMA.c  **** 	msgReqCollab.confirm		= tdma_job_conf;
 498:ServerTDMA.c  **** 
 499:ServerTDMA.c  **** 	/*
 500:ServerTDMA.c  **** 	 * Configure interrupts callback functions
 501:ServerTDMA.c  **** 	 * overflow interrupt, compare 1,2,3 interrupts
 502:ServerTDMA.c  **** 	 */
 503:ServerTDMA.c  **** 	macsc_set_cmp1_int_cb(tdma_client_turn);		// Wake-up, wait beacon (synchronize)
 504:ServerTDMA.c  **** 	macsc_set_cmp2_int_cb(tdma_client_job);			// Do job & Sleep
 505:ServerTDMA.c  **** 	macsc_set_cmp3_int_cb(tdma_collaborate_fase);	// Do Collaborate
 506:ServerTDMA.c  **** 
 507:ServerTDMA.c  **** 	/*
 508:ServerTDMA.c  **** 	 * Configure MACSC to generate compare interrupts from channels 1,2,3
 509:ServerTDMA.c  **** 	 * Set compare mode to absolute,set compare value.
 510:ServerTDMA.c  **** 	 */
 511:ServerTDMA.c  **** 	macsc_enable_auto_ts();
 512:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC1);
 513:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, BEACON_INTERVAL_BI - TDMA_FIRST_SLOT, MACSC_CC1);
 514:ServerTDMA.c  **** 	
 515:ServerTDMA.c  **** 	macsc_enable_cmp_int(MACSC_CC2);
 516:ServerTDMA.c  **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, TDMA_FIRST_SLOT * APP_ADDR, MACSC_CC2);
 517:ServerTDMA.c  **** #endif
 518:ServerTDMA.c  **** }
 1811               		.loc 6 518 0
 1812 0902 0000      		nop
 1813               	/* epilogue start */
 1814 0904 2996      		adiw r28,9
 1815 0906 0FB6      		in __tmp_reg__,__SREG__
 1816 0908 F894      		cli
 1817 090a DEBF      		out __SP_H__,r29
 1818 090c 0FBE      		out __SREG__,__tmp_reg__
 1819 090e CDBF      		out __SP_L__,r28
 1820 0910 DF91      		pop r29
 1821 0912 CF91      		pop r28
 1822 0914 0895      		ret
 1823               		.cfi_endproc
 1824               	.LFE137:
 1827               	APP_TaskHandler:
 1828               	.LFB138:
 519:ServerTDMA.c  **** /*************************************************************************//**
 520:ServerTDMA.c  **** *****************************************************************************/
 521:ServerTDMA.c  **** static void APP_TaskHandler(void)
 522:ServerTDMA.c  **** {
 1829               		.loc 6 522 0
 1830               		.cfi_startproc
 1831 0916 CF93      		push r28
 1832               	.LCFI59:
 1833               		.cfi_def_cfa_offset 3
 1834               		.cfi_offset 28, -2
 1835 0918 DF93      		push r29
 1836               	.LCFI60:
 1837               		.cfi_def_cfa_offset 4
 1838               		.cfi_offset 29, -3
 1839 091a CDB7      		in r28,__SP_L__
 1840 091c DEB7      		in r29,__SP_H__
 1841               	.LCFI61:
 1842               		.cfi_def_cfa_register 28
 1843               	/* prologue: function */
 1844               	/* frame size = 0 */
 1845               	/* stack size = 2 */
 1846               	.L__stack_usage = 2
 523:ServerTDMA.c  **** 	switch (appState)
 1847               		.loc 6 523 0
 1848 091e 8091 0000 		lds r24,appState
 1849 0922 882F      		mov r24,r24
 1850 0924 90E0      		ldi r25,0
 1851 0926 8330      		cpi r24,3
 1852 0928 9105      		cpc r25,__zero_reg__
 1853 092a 01F0      		breq .L53
 1854 092c 8F30      		cpi r24,15
 1855 092e 9105      		cpc r25,__zero_reg__
 1856 0930 01F0      		breq .L54
 1857 0932 892B      		or r24,r25
 1858 0934 01F0      		breq .L55
 524:ServerTDMA.c  **** 	{
 525:ServerTDMA.c  **** #if (APP_COORDINATOR)
 526:ServerTDMA.c  **** 		case APP_STATE_SERVER_STATISTICS:
 527:ServerTDMA.c  **** 		{
 528:ServerTDMA.c  **** 			server_statistics();
 529:ServerTDMA.c  **** 			break;
 530:ServerTDMA.c  **** 		}
 531:ServerTDMA.c  **** #endif
 532:ServerTDMA.c  **** 		case APP_STATE_SEND:
 533:ServerTDMA.c  **** 		{
 534:ServerTDMA.c  **** 			appSendData();
 535:ServerTDMA.c  **** 			appState			= APP_STATE_SEND_BUSY_DATA;
 536:ServerTDMA.c  **** 			break;
 537:ServerTDMA.c  **** 		}
 538:ServerTDMA.c  **** #if (APP_ENDDEVICE)
 539:ServerTDMA.c  **** 		case APP_STATE_WAKEUP_AND_SEND:
 540:ServerTDMA.c  **** 		{
 541:ServerTDMA.c  **** 			NWK_WakeupReq();
 542:ServerTDMA.c  **** #if (LED_COUNT > 0)
 543:ServerTDMA.c  **** 			LED_On(LED_NETWORK);
 544:ServerTDMA.c  **** #endif
 545:ServerTDMA.c  **** 			appState			= APP_STATE_SEND;
 546:ServerTDMA.c  **** 			break;
 547:ServerTDMA.c  **** 		}
 548:ServerTDMA.c  **** 		case APP_STATE_WAKEUP_AND_COLLAB:
 549:ServerTDMA.c  **** 		{
 550:ServerTDMA.c  **** 			NWK_WakeupReq();
 551:ServerTDMA.c  **** #if (LED_COUNT > 0)
 552:ServerTDMA.c  **** 			LED_On(LED_NETWORK);
 553:ServerTDMA.c  **** #endif
 554:ServerTDMA.c  **** 			appState			= APP_STATE_DO_COMPRESS;
 555:ServerTDMA.c  **** 			break;
 556:ServerTDMA.c  **** 		}
 557:ServerTDMA.c  **** 		case APP_STATE_WAKEUP_AND_SEND_COLLAB:
 558:ServerTDMA.c  **** 		{
 559:ServerTDMA.c  **** 			NWK_WakeupReq();
 560:ServerTDMA.c  **** #if (LED_COUNT > 0)
 561:ServerTDMA.c  **** 			LED_On(LED_NETWORK);
 562:ServerTDMA.c  **** #endif
 563:ServerTDMA.c  **** 			appState			= APP_STATE_SEND_COLLAB;
 564:ServerTDMA.c  **** 			break;
 565:ServerTDMA.c  **** 		}
 566:ServerTDMA.c  **** 		case APP_STATE_WAKEUP_AND_WAIT:
 567:ServerTDMA.c  **** 		{
 568:ServerTDMA.c  **** 			NWK_WakeupReq();
 569:ServerTDMA.c  **** #if (LED_COUNT > 0)
 570:ServerTDMA.c  **** 	LED_On(LED_NETWORK);
 571:ServerTDMA.c  **** #endif
 572:ServerTDMA.c  **** 			appState			= APP_STATE_IDLE;
 573:ServerTDMA.c  **** 			break;
 574:ServerTDMA.c  **** 		}
 575:ServerTDMA.c  **** 		case APP_STATE_SEND_PREPARE:
 576:ServerTDMA.c  **** 		{
 577:ServerTDMA.c  **** 			appSendPrepare();
 578:ServerTDMA.c  **** 			if(i_am_collab_dev)
 579:ServerTDMA.c  **** 			{
 580:ServerTDMA.c  **** 				LED_On(LED_BLINK);
 581:ServerTDMA.c  **** 				appState		= APP_STATE_RECEIVE_COLLAB;
 582:ServerTDMA.c  **** 			}
 583:ServerTDMA.c  **** 			else
 584:ServerTDMA.c  **** 			{
 585:ServerTDMA.c  **** 				appState		= APP_STATE_SLEEP_PREPARE;
 586:ServerTDMA.c  **** 			}
 587:ServerTDMA.c  **** 			break;
 588:ServerTDMA.c  **** 		}
 589:ServerTDMA.c  **** 		case APP_STATE_DO_COMPRESS:
 590:ServerTDMA.c  **** 		{
 591:ServerTDMA.c  **** 			appCollabPrepare();
 592:ServerTDMA.c  **** 			appState			= APP_STATE_SLEEP_PREPARE;
 593:ServerTDMA.c  **** 			break;
 594:ServerTDMA.c  **** 		}
 595:ServerTDMA.c  **** 		case APP_STATE_SEND_COLLAB:
 596:ServerTDMA.c  **** 		{
 597:ServerTDMA.c  **** 			appSendCollab();
 598:ServerTDMA.c  **** 			appState			= APP_STATE_SEND_BUSY_COLLAB;
 599:ServerTDMA.c  **** 			break;
 600:ServerTDMA.c  **** 		}
 601:ServerTDMA.c  **** 		case APP_STATE_SLEEP_PREPARE:
 602:ServerTDMA.c  **** 		{
 603:ServerTDMA.c  **** 			if(!NWK_Busy())
 604:ServerTDMA.c  **** 			{
 605:ServerTDMA.c  **** 				irqflags_t flags = cpu_irq_save();
 606:ServerTDMA.c  **** 				NWK_SleepReq();
 607:ServerTDMA.c  **** 				appState		= APP_STATE_SLEEP;
 608:ServerTDMA.c  **** 				cpu_irq_restore(flags);
 609:ServerTDMA.c  **** 			}
 610:ServerTDMA.c  **** 			break;
 611:ServerTDMA.c  **** 		}
 612:ServerTDMA.c  **** 		case APP_STATE_SLEEP:
 613:ServerTDMA.c  **** 		{
 614:ServerTDMA.c  **** #if (LED_COUNT > 0)
 615:ServerTDMA.c  **** 	LED_Off(LED_NETWORK);
 616:ServerTDMA.c  **** 	LED_Off(LED_DATA);
 617:ServerTDMA.c  **** 	LED_Off(LED_BLINK);
 618:ServerTDMA.c  **** #endif
 619:ServerTDMA.c  **** 			sleep_enable();
 620:ServerTDMA.c  **** 			sleep_enter();
 621:ServerTDMA.c  **** 			sleep_disable();
 622:ServerTDMA.c  **** 			break;
 623:ServerTDMA.c  **** 		}
 624:ServerTDMA.c  **** #endif
 625:ServerTDMA.c  **** 		case APP_STATE_INITIAL:
 626:ServerTDMA.c  **** 		{
 627:ServerTDMA.c  **** 			energy_init();
 628:ServerTDMA.c  **** 			solver_init();
 629:ServerTDMA.c  **** 			appInit();
 630:ServerTDMA.c  **** 			appState			= APP_STATE_IDLE;
 631:ServerTDMA.c  **** 			break;
 632:ServerTDMA.c  **** 		}
 633:ServerTDMA.c  **** 		default:
 634:ServerTDMA.c  **** 		{
 635:ServerTDMA.c  **** 			break;
 1859               		.loc 6 635 0
 1860 0936 00C0      		rjmp .L56
 1861               	.L54:
 528:ServerTDMA.c  **** 			break;
 1862               		.loc 6 528 0
 1863 0938 0E94 0000 		call server_statistics
 529:ServerTDMA.c  **** 		}
 1864               		.loc 6 529 0
 1865 093c 00C0      		rjmp .L56
 1866               	.L53:
 534:ServerTDMA.c  **** 			appState			= APP_STATE_SEND_BUSY_DATA;
 1867               		.loc 6 534 0
 1868 093e 0E94 0000 		call appSendData
 535:ServerTDMA.c  **** 			break;
 1869               		.loc 6 535 0
 1870 0942 85E0      		ldi r24,lo8(5)
 1871 0944 8093 0000 		sts appState,r24
 536:ServerTDMA.c  **** 		}
 1872               		.loc 6 536 0
 1873 0948 00C0      		rjmp .L56
 1874               	.L55:
 627:ServerTDMA.c  **** 			solver_init();
 1875               		.loc 6 627 0
 1876 094a 0E94 0000 		call energy_init
 628:ServerTDMA.c  **** 			appInit();
 1877               		.loc 6 628 0
 1878 094e 0E94 0000 		call solver_init
 629:ServerTDMA.c  **** 			appState			= APP_STATE_IDLE;
 1879               		.loc 6 629 0
 1880 0952 0E94 0000 		call appInit
 630:ServerTDMA.c  **** 			break;
 1881               		.loc 6 630 0
 1882 0956 81E0      		ldi r24,lo8(1)
 1883 0958 8093 0000 		sts appState,r24
 631:ServerTDMA.c  **** 		}
 1884               		.loc 6 631 0
 1885 095c 0000      		nop
 1886               	.L56:
 636:ServerTDMA.c  **** 		}
 637:ServerTDMA.c  **** 	}
 638:ServerTDMA.c  **** }
 1887               		.loc 6 638 0
 1888 095e 0000      		nop
 1889               	/* epilogue start */
 1890 0960 DF91      		pop r29
 1891 0962 CF91      		pop r28
 1892 0964 0895      		ret
 1893               		.cfi_endproc
 1894               	.LFE138:
 1896               		.section	.rodata
 1897               	.LC0:
 1898 0034 00        		.byte	0
 1899 0035 C2        		.byte	-62
 1900 0036 01        		.byte	1
 1901 0037 00        		.byte	0
 1902 0038 03        		.byte	3
 1903 0039 00        		.byte	0
 1904 003a 00        		.byte	0
 1905               		.text
 1906               	.global	main
 1908               	main:
 1909               	.LFB139:
 639:ServerTDMA.c  **** 
 640:ServerTDMA.c  **** /*****************************************************************************
 641:ServerTDMA.c  **** *****************************************************************************/
 642:ServerTDMA.c  **** int main(void)
 643:ServerTDMA.c  **** {
 1910               		.loc 6 643 0
 1911               		.cfi_startproc
 1912 0966 0F93      		push r16
 1913               	.LCFI62:
 1914               		.cfi_def_cfa_offset 3
 1915               		.cfi_offset 16, -2
 1916 0968 1F93      		push r17
 1917               	.LCFI63:
 1918               		.cfi_def_cfa_offset 4
 1919               		.cfi_offset 17, -3
 1920 096a CF93      		push r28
 1921               	.LCFI64:
 1922               		.cfi_def_cfa_offset 5
 1923               		.cfi_offset 28, -4
 1924 096c DF93      		push r29
 1925               	.LCFI65:
 1926               		.cfi_def_cfa_offset 6
 1927               		.cfi_offset 29, -5
 1928 096e CDB7      		in r28,__SP_L__
 1929 0970 DEB7      		in r29,__SP_H__
 1930               	.LCFI66:
 1931               		.cfi_def_cfa_register 28
 1932 0972 2797      		sbiw r28,7
 1933               	.LCFI67:
 1934               		.cfi_def_cfa_offset 13
 1935 0974 0FB6      		in __tmp_reg__,__SREG__
 1936 0976 F894      		cli
 1937 0978 DEBF      		out __SP_H__,r29
 1938 097a 0FBE      		out __SREG__,__tmp_reg__
 1939 097c CDBF      		out __SP_L__,r28
 1940               	/* prologue: function */
 1941               	/* frame size = 7 */
 1942               	/* stack size = 11 */
 1943               	.L__stack_usage = 11
 644:ServerTDMA.c  **** 	sysclk_init();
 1944               		.loc 6 644 0
 1945 097e 0E94 0000 		call sysclk_init
 645:ServerTDMA.c  **** 	board_init();
 1946               		.loc 6 645 0
 1947 0982 0E94 0000 		call board_init
 646:ServerTDMA.c  **** 
 647:ServerTDMA.c  **** 	SYS_Init();
 1948               		.loc 6 647 0
 1949 0986 0E94 0000 		call SYS_Init
 648:ServerTDMA.c  **** 	// Disable CSMA/CA
 649:ServerTDMA.c  **** 	// Disable auto ACK
 650:ServerTDMA.c  **** 	PHY_SetTdmaMode(true);
 1950               		.loc 6 650 0
 1951 098a 81E0      		ldi r24,lo8(1)
 1952 098c 0E94 0000 		call PHY_SetTdmaMode
 651:ServerTDMA.c  **** 	sm_init();
 1953               		.loc 6 651 0
 1954 0990 0E94 0000 		call sm_init
 652:ServerTDMA.c  **** 
 653:ServerTDMA.c  **** 	// Initialize interrupt vector table support.
 654:ServerTDMA.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
 655:ServerTDMA.c  **** 	irq_initialize_vectors();
 656:ServerTDMA.c  **** #endif
 657:ServerTDMA.c  **** 	cpu_irq_enable();
 1955               		.loc 6 657 0
 1956               	/* #APP */
 1957               	 ;  657 "ServerTDMA.c" 1
 1958 0994 7894      		sei
 1959               	 ;  0 "" 2
 658:ServerTDMA.c  **** 
 659:ServerTDMA.c  **** #if APP_COORDINATOR
 660:ServerTDMA.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
 661:ServerTDMA.c  **** 	stdio_usb_init();
 662:ServerTDMA.c  **** #else
 663:ServerTDMA.c  **** 	const usart_serial_options_t usart_serial_options =
 1960               		.loc 6 663 0
 1961               	/* #NOAPP */
 1962 0996 27E0      		ldi r18,lo8(7)
 1963 0998 E0E0      		ldi r30,lo8(.LC0)
 1964 099a F0E0      		ldi r31,hi8(.LC0)
 1965 099c CE01      		movw r24,r28
 1966 099e 0196      		adiw r24,1
 1967 09a0 DC01      		movw r26,r24
 1968               		0:
 1969 09a2 0190      		ld r0,Z+
 1970 09a4 0D92      		st X+,r0
 1971 09a6 2A95      		dec r18
 1972 09a8 01F4      		brne 0b
 664:ServerTDMA.c  **** 	{
 665:ServerTDMA.c  **** 		.baudrate     = USART_HOST_BAUDRATE,
 666:ServerTDMA.c  **** 		.charlength   = USART_HOST_CHAR_LENGTH,
 667:ServerTDMA.c  **** 		.paritytype   = USART_HOST_PARITY,
 668:ServerTDMA.c  **** 		.stopbits     = USART_HOST_STOP_BITS
 669:ServerTDMA.c  **** 	};
 670:ServerTDMA.c  **** 
 671:ServerTDMA.c  **** 	stdio_serial_init(USART_HOST, &usart_serial_options);
 1973               		.loc 6 671 0
 1974 09aa CE01      		movw r24,r28
 1975 09ac 0196      		adiw r24,1
 1976 09ae BC01      		movw r22,r24
 1977 09b0 80EC      		ldi r24,lo8(-64)
 1978 09b2 90E0      		ldi r25,0
 1979 09b4 0E94 0000 		call stdio_serial_init
 672:ServerTDMA.c  **** 	usart_double_baud_enable(USART_HOST);
 1980               		.loc 6 672 0
 1981 09b8 80EC      		ldi r24,lo8(-64)
 1982 09ba 90E0      		ldi r25,0
 1983 09bc 0E94 0000 		call usart_double_baud_enable
 673:ServerTDMA.c  **** 	usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 1984               		.loc 6 673 0
 1985 09c0 0E94 0000 		call sysclk_get_source_clock_hz
 1986 09c4 DC01      		movw r26,r24
 1987 09c6 CB01      		movw r24,r22
 1988 09c8 8C01      		movw r16,r24
 1989 09ca 9D01      		movw r18,r26
 1990 09cc 40E0      		ldi r20,0
 1991 09ce 52EC      		ldi r21,lo8(-62)
 1992 09d0 61E0      		ldi r22,lo8(1)
 1993 09d2 70E0      		ldi r23,0
 1994 09d4 80EC      		ldi r24,lo8(-64)
 1995 09d6 90E0      		ldi r25,0
 1996 09d8 0E94 0000 		call usart_set_baudrate_precalculated
 1997               	.L58:
 674:ServerTDMA.c  **** 
 675:ServerTDMA.c  **** #endif
 676:ServerTDMA.c  **** #endif
 677:ServerTDMA.c  **** 	for(;;)
 678:ServerTDMA.c  **** 	{
 679:ServerTDMA.c  **** 		SYS_TaskHandler();
 1998               		.loc 6 679 0 discriminator 1
 1999 09dc 0E94 0000 		call SYS_TaskHandler
 680:ServerTDMA.c  **** 		APP_TaskHandler();
 2000               		.loc 6 680 0 discriminator 1
 2001 09e0 0E94 0000 		call APP_TaskHandler
 681:ServerTDMA.c  **** 	}
 2002               		.loc 6 681 0 discriminator 1
 2003 09e4 00C0      		rjmp .L58
 2004               		.cfi_endproc
 2005               	.LFE139:
 2007               	.Letext0:
 2008               		.file 8 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 2009               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 2010               		.file 10 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 2011               		.file 11 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 2012               		.file 12 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 2013               		.file 13 "Solver.h"
 2014               		.file 14 "Energy.h"
 2015               		.file 15 "../../../platform/mega_rf/utils/status_codes.h"
 2016               		.file 16 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerTDMA.c
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:2      *ABS*:0000003e __SP_H__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:3      *ABS*:0000003d __SP_L__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:4      *ABS*:0000003f __SREG__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:7      *ABS*:00000001 __zero_reg__
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:12     .text:00000000 sysclk_get_main_hz
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:49     .text:0000001a sysclk_get_source_clock_hz
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:86     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:98     .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:110    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:121    .text:00000034 usart_double_baud_enable
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:170    .text:00000062 usart_serial_init
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:265    .text:000000de usart_serial_putchar
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:309    .text:00000106 usart_serial_getchar
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:360    .text:0000013c stdio_serial_init
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:431    .text:0000019e macsc_enable_manual_bts
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:484    .bss.appState:00000000 appState
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:489    .bss.tmrBlinkData:00000000 tmrBlinkData
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:494    .bss.msgReq:00000000 msgReq
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:499    .bss.msgFrame:00000000 msgFrame
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:504    .bss.msgReqConnection:00000000 msgReqConnection
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:509    .bss.msgFrameConnection:00000000 msgFrameConnection
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:514    .data.server_turn:00000000 server_turn
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:519    .bss.statistics_buffer:00000000 statistics_buffer
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:524    .bss.aux_buffer:00000000 aux_buffer
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:528    .text:000001d2 tmrBlinkDataHandler
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:706    .text:0000029e toHexBuffer
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:835    .text:0000035e tdma_server_beacon
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:870    .text:00000378 tdma_server_statistics
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:915    .text:0000038e server_statistics
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:1114   .text:000004c2 appSendData
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:1382   .text:00000668 appDataInd
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:1535   .text:0000072c appInit
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:1827   .text:00000916 APP_TaskHandler
C:\Users\guilh\AppData\Local\Temp\ccuk4eIU.s:1908   .text:00000966 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
sprintf
solver_solve_system
solver_get_n_received
solver_get_n_colaborative
printf
solver_get_data
energy_get_statistics
SYS_TimerStart
energy_prepare_next_turn
solver_prepare_next_turn
energy_get_collab_vector
energy_get_connected_vector
NWK_DataReq
energy_receive_statistics
solver_received_data_frame
NWK_SetAddr
NWK_SetPanId
PHY_SetChannel
PHY_SetRxState
PHY_RandomReq
srand
NWK_OpenEndpoint
macsc_set_cmp1_int_cb
macsc_set_cmp2_int_cb
macsc_enable_cmp_int
macsc_use_cmp
energy_init
solver_init
sysclk_init
board_init
SYS_Init
PHY_SetTdmaMode
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
