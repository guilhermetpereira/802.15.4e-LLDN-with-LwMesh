   1               		.file	"ServerBASIC.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  14               	baudctrl_1mhz:
  15 0000 3300      		.word	51
  16 0002 1900      		.word	25
  17 0004 0C00      		.word	12
  18 0006 0600      		.word	6
  19 0008 0300      		.word	3
  20 000a 0200      		.word	2
  21 000c 0100      		.word	1
  22 000e FF00      		.word	255
  23               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
  26               	baudctrl_8mhz:
  27 0000 A001      		.word	416
  28 0002 CF00      		.word	207
  29 0004 6700      		.word	103
  30 0006 3300      		.word	51
  31 0008 1900      		.word	25
  32 000a 0C00      		.word	12
  33 000c 0700      		.word	7
  34 000e 0800      		.word	8
  35               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
  38               	baudctrl_16mhz:
  39 0000 4003      		.word	832
  40 0002 A001      		.word	416
  41 0004 CF00      		.word	207
  42 0006 6700      		.word	103
  43 0008 3300      		.word	51
  44 000a 1900      		.word	25
  45 000c 1000      		.word	16
  46 000e 1000      		.word	16
  47               		.text
  49               	usart_serial_init:
  50               	.LFB104:
  51               		.file 1 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
  52               		.loc 1 77 0
  53               		.cfi_startproc
  54 0000 CF93      		push r28
  55               	.LCFI0:
  56               		.cfi_def_cfa_offset 3
  57               		.cfi_offset 28, -2
  58 0002 DF93      		push r29
  59               	.LCFI1:
  60               		.cfi_def_cfa_offset 4
  61               		.cfi_offset 29, -3
  62 0004 CDB7      		in r28,__SP_L__
  63 0006 DEB7      		in r29,__SP_H__
  64               	.LCFI2:
  65               		.cfi_def_cfa_register 28
  66 0008 2B97      		sbiw r28,11
  67               	.LCFI3:
  68               		.cfi_def_cfa_offset 15
  69 000a 0FB6      		in __tmp_reg__,__SREG__
  70 000c F894      		cli
  71 000e DEBF      		out __SP_H__,r29
  72 0010 0FBE      		out __SREG__,__tmp_reg__
  73 0012 CDBF      		out __SP_L__,r28
  74               	/* prologue: function */
  75               	/* frame size = 11 */
  76               	/* stack size = 13 */
  77               	.L__stack_usage = 13
  78 0014 9987      		std Y+9,r25
  79 0016 8887      		std Y+8,r24
  80 0018 7B87      		std Y+11,r23
  81 001a 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
  82               		.loc 1 80 0
  83 001c 8A85      		ldd r24,Y+10
  84 001e 9B85      		ldd r25,Y+11
  85 0020 FC01      		movw r30,r24
  86 0022 8481      		ldd r24,Z+4
  87 0024 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
  88               		.loc 1 81 0
  89 0026 8A85      		ldd r24,Y+10
  90 0028 9B85      		ldd r25,Y+11
  91 002a FC01      		movw r30,r24
  92 002c 8581      		ldd r24,Z+5
  93 002e 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
  94               		.loc 1 82 0
  95 0030 8A85      		ldd r24,Y+10
  96 0032 9B85      		ldd r25,Y+11
  97 0034 FC01      		movw r30,r24
  98 0036 8681      		ldd r24,Z+6
  99 0038 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 100               		.loc 1 83 0
 101 003a 8A85      		ldd r24,Y+10
 102 003c 9B85      		ldd r25,Y+11
 103 003e FC01      		movw r30,r24
 104 0040 8081      		ld r24,Z
 105 0042 9181      		ldd r25,Z+1
 106 0044 A281      		ldd r26,Z+2
 107 0046 B381      		ldd r27,Z+3
 108 0048 8983      		std Y+1,r24
 109 004a 9A83      		std Y+2,r25
 110 004c AB83      		std Y+3,r26
 111 004e BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 112               		.loc 1 85 0
 113 0050 8885      		ldd r24,Y+8
 114 0052 9985      		ldd r25,Y+9
 115 0054 9E01      		movw r18,r28
 116 0056 2F5F      		subi r18,-1
 117 0058 3F4F      		sbci r19,-1
 118 005a B901      		movw r22,r18
 119 005c 0E94 0000 		call usart_init_rs232
 120 0060 8823      		tst r24
 121 0062 01F0      		breq .L2
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 122               		.loc 1 86 0
 123 0064 81E0      		ldi r24,lo8(1)
 124 0066 00C0      		rjmp .L4
 125               	.L2:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 126               		.loc 1 88 0
 127 0068 80E0      		ldi r24,0
 128               	.L4:
 129               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 130               		.loc 1 90 0 discriminator 1
 131 006a 2B96      		adiw r28,11
 132 006c 0FB6      		in __tmp_reg__,__SREG__
 133 006e F894      		cli
 134 0070 DEBF      		out __SP_H__,r29
 135 0072 0FBE      		out __SREG__,__tmp_reg__
 136 0074 CDBF      		out __SP_L__,r28
 137 0076 DF91      		pop r29
 138 0078 CF91      		pop r28
 139 007a 0895      		ret
 140               		.cfi_endproc
 141               	.LFE104:
 144               	usart_serial_putchar:
 145               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 146               		.loc 1 100 0
 147               		.cfi_startproc
 148 007c CF93      		push r28
 149               	.LCFI4:
 150               		.cfi_def_cfa_offset 3
 151               		.cfi_offset 28, -2
 152 007e DF93      		push r29
 153               	.LCFI5:
 154               		.cfi_def_cfa_offset 4
 155               		.cfi_offset 29, -3
 156 0080 00D0      		rcall .
 157 0082 1F92      		push __zero_reg__
 158               	.LCFI6:
 159               		.cfi_def_cfa_offset 7
 160 0084 CDB7      		in r28,__SP_L__
 161 0086 DEB7      		in r29,__SP_H__
 162               	.LCFI7:
 163               		.cfi_def_cfa_register 28
 164               	/* prologue: function */
 165               	/* frame size = 3 */
 166               	/* stack size = 5 */
 167               	.L__stack_usage = 5
 168 0088 9A83      		std Y+2,r25
 169 008a 8983      		std Y+1,r24
 170 008c 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 171               		.loc 1 101 0
 172 008e 8981      		ldd r24,Y+1
 173 0090 9A81      		ldd r25,Y+2
 174 0092 6B81      		ldd r22,Y+3
 175 0094 0E94 0000 		call usart_putchar
 176               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 177               		.loc 1 102 0
 178 0098 0F90      		pop __tmp_reg__
 179 009a 0F90      		pop __tmp_reg__
 180 009c 0F90      		pop __tmp_reg__
 181 009e DF91      		pop r29
 182 00a0 CF91      		pop r28
 183 00a2 0895      		ret
 184               		.cfi_endproc
 185               	.LFE105:
 188               	usart_serial_getchar:
 189               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 190               		.loc 1 111 0
 191               		.cfi_startproc
 192 00a4 CF93      		push r28
 193               	.LCFI8:
 194               		.cfi_def_cfa_offset 3
 195               		.cfi_offset 28, -2
 196 00a6 DF93      		push r29
 197               	.LCFI9:
 198               		.cfi_def_cfa_offset 4
 199               		.cfi_offset 29, -3
 200 00a8 00D0      		rcall .
 201 00aa 00D0      		rcall .
 202               	.LCFI10:
 203               		.cfi_def_cfa_offset 8
 204 00ac CDB7      		in r28,__SP_L__
 205 00ae DEB7      		in r29,__SP_H__
 206               	.LCFI11:
 207               		.cfi_def_cfa_register 28
 208               	/* prologue: function */
 209               	/* frame size = 4 */
 210               	/* stack size = 6 */
 211               	.L__stack_usage = 6
 212 00b0 9A83      		std Y+2,r25
 213 00b2 8983      		std Y+1,r24
 214 00b4 7C83      		std Y+4,r23
 215 00b6 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 216               		.loc 1 112 0
 217 00b8 8981      		ldd r24,Y+1
 218 00ba 9A81      		ldd r25,Y+2
 219 00bc 0E94 0000 		call usart_getchar
 220 00c0 282F      		mov r18,r24
 221 00c2 8B81      		ldd r24,Y+3
 222 00c4 9C81      		ldd r25,Y+4
 223 00c6 FC01      		movw r30,r24
 224 00c8 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 225               		.loc 1 113 0
 226 00ca 0000      		nop
 227               	/* epilogue start */
 228 00cc 0F90      		pop __tmp_reg__
 229 00ce 0F90      		pop __tmp_reg__
 230 00d0 0F90      		pop __tmp_reg__
 231 00d2 0F90      		pop __tmp_reg__
 232 00d4 DF91      		pop r29
 233 00d6 CF91      		pop r28
 234 00d8 0895      		ret
 235               		.cfi_endproc
 236               	.LFE106:
 239               	stdio_serial_init:
 240               	.LFB107:
 241               		.file 2 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 242               		.loc 2 90 0
 243               		.cfi_startproc
 244 00da CF93      		push r28
 245               	.LCFI12:
 246               		.cfi_def_cfa_offset 3
 247               		.cfi_offset 28, -2
 248 00dc DF93      		push r29
 249               	.LCFI13:
 250               		.cfi_def_cfa_offset 4
 251               		.cfi_offset 29, -3
 252 00de 00D0      		rcall .
 253 00e0 00D0      		rcall .
 254               	.LCFI14:
 255               		.cfi_def_cfa_offset 8
 256 00e2 CDB7      		in r28,__SP_L__
 257 00e4 DEB7      		in r29,__SP_H__
 258               	.LCFI15:
 259               		.cfi_def_cfa_register 28
 260               	/* prologue: function */
 261               	/* frame size = 4 */
 262               	/* stack size = 6 */
 263               	.L__stack_usage = 6
 264 00e6 9A83      		std Y+2,r25
 265 00e8 8983      		std Y+1,r24
 266 00ea 7C83      		std Y+4,r23
 267 00ec 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 268               		.loc 2 91 0
 269 00ee 8981      		ldd r24,Y+1
 270 00f0 9A81      		ldd r25,Y+2
 271 00f2 9093 0000 		sts stdio_base+1,r25
 272 00f6 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 273               		.loc 2 92 0
 274 00fa 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 275 00fc 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 276 00fe 9093 0000 		sts ptr_put+1,r25
 277 0102 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 278               		.loc 2 93 0
 279 0106 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 280 0108 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 281 010a 9093 0000 		sts ptr_get+1,r25
 282 010e 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 283               		.loc 2 95 0
 284 0112 2B81      		ldd r18,Y+3
 285 0114 3C81      		ldd r19,Y+4
 286 0116 8981      		ldd r24,Y+1
 287 0118 9A81      		ldd r25,Y+2
 288 011a B901      		movw r22,r18
 289 011c 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 290               		.loc 2 107 0
 291 0120 60E0      		ldi r22,lo8(gs(_read))
 292 0122 70E0      		ldi r23,hi8(gs(_read))
 293 0124 80E0      		ldi r24,lo8(gs(_write))
 294 0126 90E0      		ldi r25,hi8(gs(_write))
 295 0128 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 296               		.loc 2 120 0
 297 012c 0000      		nop
 298               	/* epilogue start */
 299 012e 0F90      		pop __tmp_reg__
 300 0130 0F90      		pop __tmp_reg__
 301 0132 0F90      		pop __tmp_reg__
 302 0134 0F90      		pop __tmp_reg__
 303 0136 DF91      		pop r29
 304 0138 CF91      		pop r28
 305 013a 0895      		ret
 306               		.cfi_endproc
 307               	.LFE107:
 310               	macsc_enable_manual_bts:
 311               	.LFB121:
 312               		.file 3 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 313               		.loc 3 444 0
 314               		.cfi_startproc
 315 013c CF93      		push r28
 316               	.LCFI16:
 317               		.cfi_def_cfa_offset 3
 318               		.cfi_offset 28, -2
 319 013e DF93      		push r29
 320               	.LCFI17:
 321               		.cfi_def_cfa_offset 4
 322               		.cfi_offset 29, -3
 323 0140 CDB7      		in r28,__SP_L__
 324 0142 DEB7      		in r29,__SP_H__
 325               	.LCFI18:
 326               		.cfi_def_cfa_register 28
 327               	/* prologue: function */
 328               	/* frame size = 0 */
 329               	/* stack size = 2 */
 330               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 331               		.loc 3 445 0
 332 0144 8CED      		ldi r24,lo8(-36)
 333 0146 90E0      		ldi r25,0
 334 0148 2CED      		ldi r18,lo8(-36)
 335 014a 30E0      		ldi r19,0
 336 014c F901      		movw r30,r18
 337 014e 2081      		ld r18,Z
 338 0150 2064      		ori r18,lo8(64)
 339 0152 FC01      		movw r30,r24
 340 0154 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 341               		.loc 3 446 0
 342 0156 8CED      		ldi r24,lo8(-36)
 343 0158 90E0      		ldi r25,0
 344 015a 2CED      		ldi r18,lo8(-36)
 345 015c 30E0      		ldi r19,0
 346 015e F901      		movw r30,r18
 347 0160 2081      		ld r18,Z
 348 0162 277F      		andi r18,lo8(-9)
 349 0164 FC01      		movw r30,r24
 350 0166 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 351               		.loc 3 447 0
 352 0168 0000      		nop
 353               	/* epilogue start */
 354 016a DF91      		pop r29
 355 016c CF91      		pop r28
 356 016e 0895      		ret
 357               		.cfi_endproc
 358               	.LFE121:
 360               		.section	.bss.appState,"aw",@nobits
 363               	appState:
 364 0000 00        		.zero	1
 365               		.section	.bss.tmrBlinkData,"aw",@nobits
 368               	tmrBlinkData:
 369 0000 0000 0000 		.zero	13
 369      0000 0000 
 369      0000 0000 
 369      00
 370               		.section	.bss.msgReq,"aw",@nobits
 373               	msgReq:
 374 0000 0000 0000 		.zero	19
 374      0000 0000 
 374      0000 0000 
 374      0000 0000 
 374      0000 00
 375               		.section	.bss.msgFrame,"aw",@nobits
 378               	msgFrame:
 379 0000 0000 0000 		.zero	80
 379      0000 0000 
 379      0000 0000 
 379      0000 0000 
 379      0000 0000 
 380               		.section	.bss.msgReqConnection,"aw",@nobits
 383               	msgReqConnection:
 384 0000 0000 0000 		.zero	19
 384      0000 0000 
 384      0000 0000 
 384      0000 0000 
 384      0000 00
 385               		.section	.bss.msgFrameConnection,"aw",@nobits
 388               	msgFrameConnection:
 389 0000 0000 0000 		.zero	80
 389      0000 0000 
 389      0000 0000 
 389      0000 0000 
 389      0000 0000 
 390               		.section	.data.server_turn,"aw",@progbits
 393               	server_turn:
 394 0000 0100      		.word	1
 395               		.section	.bss.statistics_buffer,"aw",@nobits
 398               	statistics_buffer:
 399 0000 0000 0000 		.zero	130
 399      0000 0000 
 399      0000 0000 
 399      0000 0000 
 399      0000 0000 
 400               		.section	.bss.aux_buffer,"aw",@nobits
 403               	aux_buffer:
 404 0000 0000 0000 		.zero	65
 404      0000 0000 
 404      0000 0000 
 404      0000 0000 
 404      0000 0000 
 405               		.section	.bss.tmrSendData,"aw",@nobits
 408               	tmrSendData:
 409 0000 0000 0000 		.zero	13
 409      0000 0000 
 409      0000 0000 
 409      00
 410               		.section	.rodata
 411               	.LC1:
 412 0000 0A4D 4553 		.string	"\nMESSAGE SENT"
 412      5341 4745 
 412      2053 454E 
 412      5400 
 413               		.text
 415               	tmrSendDataHandler:
 416               	.LFB130:
 417               		.file 4 "ServerBASIC.c"
   1:ServerBASIC.c **** /*
   2:ServerBASIC.c ****  * ServerTDMA.c
   3:ServerBASIC.c ****  *
   4:ServerBASIC.c ****  * Created: 07/09/2014 16:50:52
   5:ServerBASIC.c ****  *  Author: nando
   6:ServerBASIC.c ****  */ 
   7:ServerBASIC.c **** 
   8:ServerBASIC.c **** #include <stdlib.h>
   9:ServerBASIC.c **** #include <stdio.h>
  10:ServerBASIC.c **** #include <string.h>
  11:ServerBASIC.c **** #include "config.h"
  12:ServerBASIC.c **** #include "sys.h"
  13:ServerBASIC.c **** #include "phy.h"
  14:ServerBASIC.c **** #include "sys.h"
  15:ServerBASIC.c **** #include "nwk.h"
  16:ServerBASIC.c **** #include "sysclk.h"
  17:ServerBASIC.c **** #include "sysTimer.h"
  18:ServerBASIC.c **** #include "sleep_mgr.h"
  19:ServerBASIC.c **** #include "sleepmgr.h"
  20:ServerBASIC.c **** #include "led.h"
  21:ServerBASIC.c **** #include "ioport.h"
  22:ServerBASIC.c **** #include "conf_sleepmgr.h"
  23:ServerBASIC.c **** #include "board.h"
  24:ServerBASIC.c **** #include "Solver.h"
  25:ServerBASIC.c **** #include "Energy.h"
  26:ServerBASIC.c **** #include "platform.h"
  27:ServerBASIC.c **** 
  28:ServerBASIC.c **** #if APP_COORDINATOR
  29:ServerBASIC.c **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
  30:ServerBASIC.c **** 		/* Only ARM */
  31:ServerBASIC.c **** 		#include "stdio_usb.h"
  32:ServerBASIC.c **** 		#define MASTER_MACSC	0
  33:ServerBASIC.c **** 	#else
  34:ServerBASIC.c **** 		/* Only megarf series */
  35:ServerBASIC.c **** 		#include "conf_sio2host.h"
  36:ServerBASIC.c **** 		#define MASTER_MACSC	1
  37:ServerBASIC.c **** 	#endif
  38:ServerBASIC.c **** #else
  39:ServerBASIC.c **** 	/* Only megarf series */
  40:ServerBASIC.c **** 	#define MASTER_MACSC		1
  41:ServerBASIC.c **** #endif
  42:ServerBASIC.c **** 
  43:ServerBASIC.c **** #if (MASTER_MACSC == 1)
  44:ServerBASIC.c **** 	#include "macsc_megarf.h"
  45:ServerBASIC.c **** #else
  46:ServerBASIC.c **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  47:ServerBASIC.c **** static SYS_Timer_t				tmrComputeData;				// Compute data
  48:ServerBASIC.c **** #endif
  49:ServerBASIC.c **** 
  50:ServerBASIC.c **** static volatile AppState_t		appState					= APP_STATE_INITIAL;
  51:ServerBASIC.c **** static SYS_Timer_t				tmrBlinkData;				// Feedback
  52:ServerBASIC.c **** static NWK_DataReq_t			msgReq;
  53:ServerBASIC.c **** static AppMessageFrame_t		msgFrame;
  54:ServerBASIC.c **** 
  55:ServerBASIC.c **** static NWK_DataReq_t			msgReqConnection;
  56:ServerBASIC.c **** static AppMessageFrame_t		msgFrameConnection;
  57:ServerBASIC.c **** 
  58:ServerBASIC.c **** #if (APP_COORDINATOR)
  59:ServerBASIC.c **** 	static uint16_t				server_turn					= 1;
  60:ServerBASIC.c **** 	static uint8_t				statistics_buffer[(MSG_SIZE_MAX + 1) * 2];
  61:ServerBASIC.c **** 	static uint8_t				aux_buffer[(MSG_SIZE_MAX + 1)];
  62:ServerBASIC.c **** #endif
  63:ServerBASIC.c **** #if (APP_ENDDEVICE)
  64:ServerBASIC.c **** 	static bool					connected;
  65:ServerBASIC.c **** 	static uint8_t				collab_vector[N_COLLAB_VECTOR];
  66:ServerBASIC.c **** 	static bool					i_am_collab_dev				= false;
  67:ServerBASIC.c **** 	static uint8_t				i_am_collab_slot			= 0;
  68:ServerBASIC.c **** 	static uint8_t				i_am_collab_turn			= 0;
  69:ServerBASIC.c **** 	static NWK_DataReq_t		msgReqCollab;
  70:ServerBASIC.c **** 	static AppMessageFrame_t	msgFrameCollab;
  71:ServerBASIC.c **** #endif
  72:ServerBASIC.c **** 
  73:ServerBASIC.c **** static SYS_Timer_t tmrSendData;
  74:ServerBASIC.c **** 
  75:ServerBASIC.c **** static void tmrSendDataHandler(SYS_Timer_t *timer)
  76:ServerBASIC.c **** {
 418               		.loc 4 76 0
 419               		.cfi_startproc
 420 0170 CF93      		push r28
 421               	.LCFI19:
 422               		.cfi_def_cfa_offset 3
 423               		.cfi_offset 28, -2
 424 0172 DF93      		push r29
 425               	.LCFI20:
 426               		.cfi_def_cfa_offset 4
 427               		.cfi_offset 29, -3
 428 0174 00D0      		rcall .
 429               	.LCFI21:
 430               		.cfi_def_cfa_offset 6
 431 0176 CDB7      		in r28,__SP_L__
 432 0178 DEB7      		in r29,__SP_H__
 433               	.LCFI22:
 434               		.cfi_def_cfa_register 28
 435               	/* prologue: function */
 436               	/* frame size = 2 */
 437               	/* stack size = 4 */
 438               	.L__stack_usage = 4
 439 017a 9A83      		std Y+2,r25
 440 017c 8983      		std Y+1,r24
  77:ServerBASIC.c ****   printf("\nMESSAGE SENT");
 441               		.loc 4 77 0
 442 017e 80E0      		ldi r24,lo8(.LC1)
 443 0180 90E0      		ldi r25,hi8(.LC1)
 444 0182 892F      		mov r24,r25
 445 0184 8F93      		push r24
 446 0186 80E0      		ldi r24,lo8(.LC1)
 447 0188 90E0      		ldi r25,hi8(.LC1)
 448 018a 8F93      		push r24
 449 018c 0E94 0000 		call printf
 450 0190 0F90      		pop __tmp_reg__
 451 0192 0F90      		pop __tmp_reg__
  78:ServerBASIC.c **** }
 452               		.loc 4 78 0
 453 0194 0000      		nop
 454               	/* epilogue start */
 455 0196 0F90      		pop __tmp_reg__
 456 0198 0F90      		pop __tmp_reg__
 457 019a DF91      		pop r29
 458 019c CF91      		pop r28
 459 019e 0895      		ret
 460               		.cfi_endproc
 461               	.LFE130:
 464               	tmrBlinkDataHandler:
 465               	.LFB131:
  79:ServerBASIC.c **** 
  80:ServerBASIC.c **** 
  81:ServerBASIC.c **** static void tmrBlinkDataHandler(SYS_Timer_t *timer)
  82:ServerBASIC.c **** {
 466               		.loc 4 82 0
 467               		.cfi_startproc
 468 01a0 CF93      		push r28
 469               	.LCFI23:
 470               		.cfi_def_cfa_offset 3
 471               		.cfi_offset 28, -2
 472 01a2 DF93      		push r29
 473               	.LCFI24:
 474               		.cfi_def_cfa_offset 4
 475               		.cfi_offset 29, -3
 476 01a4 CDB7      		in r28,__SP_L__
 477 01a6 DEB7      		in r29,__SP_H__
 478               	.LCFI25:
 479               		.cfi_def_cfa_register 28
 480 01a8 2B97      		sbiw r28,11
 481               	.LCFI26:
 482               		.cfi_def_cfa_offset 15
 483 01aa 0FB6      		in __tmp_reg__,__SREG__
 484 01ac F894      		cli
 485 01ae DEBF      		out __SP_H__,r29
 486 01b0 0FBE      		out __SREG__,__tmp_reg__
 487 01b2 CDBF      		out __SP_L__,r28
 488               	/* prologue: function */
 489               	/* frame size = 11 */
 490               	/* stack size = 13 */
 491               	.L__stack_usage = 13
 492 01b4 9B87      		std Y+11,r25
 493 01b6 8A87      		std Y+10,r24
 494 01b8 84E2      		ldi r24,lo8(36)
 495 01ba 8983      		std Y+1,r24
 496 01bc 81E0      		ldi r24,lo8(1)
 497 01be 8A83      		std Y+2,r24
 498 01c0 8981      		ldd r24,Y+1
 499 01c2 8B83      		std Y+3,r24
 500 01c4 8A81      		ldd r24,Y+2
 501 01c6 8C83      		std Y+4,r24
 502               	.LBB72:
 503               	.LBB73:
 504               	.LBB74:
 505               	.LBB75:
 506               		.file 5 "../../../platform/common/services/ioport/mega_rf/ioport.h"
   1:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
   2:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \file
   3:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   4:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief MEGA and MEGA_RF architecture specific IOPORT service implementation
   5:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * header file.
   6:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   7:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * Copyright (c) 2012 - 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
   9:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \asf_license_start
  10:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  11:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \page License
  12:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  13:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  16:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  19:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  23:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  26:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  29:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  41:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \asf_license_stop
  42:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  43:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
  44:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifndef IOPORT_MEGA_RF_H
  45:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MEGA_RF_H
  46:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  47:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_CREATE_PIN(port, pin) ((IOPORT_ ## port) * 8 + (pin))
  48:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_BASE_ADDRESS 0x20
  49:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORT_OFFSET  0x03
  50:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  51:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name IOPORT port numbers */
  52:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
  53:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  54:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF || MEGA_UNSPECIFIED || MEGA_XX4 || MEGA_XX4_A
  55:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTA    0 /* not connected to pins for megaRF*/
  56:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  57:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  58:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF || MEGA_UNSPECIFIED || MEGA_XX8 || MEGA_XX8_A || \
  59:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	MEGA_XX4 || MEGA_XX4_A
  60:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTB    1
  61:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTC    2 /* not connected to pins for megaRF*/
  62:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTD    3
  63:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  64:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  65:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0_1 || MEGA_RF
  66:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTE    4
  67:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTF    5
  68:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTG    6
  69:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  70:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  71:../../../platform/common/services/ioport/mega_rf/ioport.h **** #if MEGA_XX0
  72:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTH    7
  73:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTI    8
  74:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTJ    9
  75:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTK    10
  76:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PORTL    11
  77:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
  78:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
  79:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  80:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
  81:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \weakgroup ioport_service_group
  82:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \section ioport_modes IOPORT Modes
  83:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  84:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * For details on these please see the megaRF Manual.
  85:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
  86:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * @{
  87:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
  88:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  89:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name IOPORT Mode bit definitions */
  90:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
  91:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MODE_PULLDOWN        (0x01) /*!< Pull-down */
  92:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_MODE_PULLUP          (0x00) /*!< Pull-up */
  93:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
  94:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
  95:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_mode_t;
  96:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_pin_t;
  97:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_port_t;
  98:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t ioport_port_mask_t;
  99:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 100:../../../platform/common/services/ioport/mega_rf/ioport.h **** /* I/O Ports */
 101:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef struct PORT_struct {
 102:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t PINCRL;         /* I/O Port PIN DATA READ ONLY */
 103:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t DIR;            /* I/O Port Data Direction Set */
 104:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	volatile uint8_t PORTDATA;       /* I/O Port DATA register */
 105:../../../platform/common/services/ioport/mega_rf/ioport.h **** } PORT_t;
 106:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 107:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 108:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A pin mask
 109:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 110:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the port pin mask on the part.
 111:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 112:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t pin_mask_t;
 113:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 114:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 115:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A PORT pin
 116:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 117:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the PORT pins on the part.
 118:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 119:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t port_pin_t;
 120:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 121:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 122:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Pin configuration flags
 123:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 124:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This is a bitmask containing configuration flags for the pins that shall be
 125:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * configured.
 126:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 127:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint16_t port_pin_flags_t;
 128:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 129:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 130:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief A port id
 131:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 132:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * This type is used to describe the port id on the part (0 is PORTA).
 133:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 134:../../../platform/common/services/ioport/mega_rf/ioport.h **** typedef uint8_t port_id_t;
 135:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 136:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name Initial Output State Flags */
 137:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 138:../../../platform/common/services/ioport/mega_rf/ioport.h **** /*With Port as input port the initial status is either tri state
 139:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * or pulled high, based on PORTX value, and check the PUD value to make
 140:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * sure pull up resistance is not disabled*/
 141:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
 142:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_INIT_LOW           0 << 1  /*!< Initial Output State Low */
 143:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_INIT_HIGH          1 << 1 /*!< Initial Output State High */
 144:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 145:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
 146:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 147:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** \name Output and Pull Configuration Flags */
 148:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @{ */
 149:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PULL_DOWN          (0 << 2) /*!< Pull-Down (when input) */
 150:../../../platform/common/services/ioport/mega_rf/ioport.h **** #define IOPORT_PULL_UP            (1 << 2) /*!< Pull-Up (when input) */
 151:../../../platform/common/services/ioport/mega_rf/ioport.h **** /** @} */
 152:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 153:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 154:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the port number from pin nuber
 155:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 156:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 157:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static inline ioport_port_t arch_ioport_pin_to_port_id(
 158:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		uint8_t pin)
 159:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 160:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return pin >> 3;
 161:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 162:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 163:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 164:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the base address of port number
 165:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: port number e.g. IOPORT_PORTB
 166:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 167:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static PORT_t *arch_ioport_port_to_base(uint8_t port)
 168:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return (PORT_t *)((uintptr_t)(IOPORT_BASE_ADDRESS +
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 171:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 172:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 173:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 174:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the base address of port number from defined pin
 175:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 176:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 177:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static PORT_t *arch_ioport_pin_to_base(ioport_pin_t pin)
 178:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 179:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return arch_ioport_port_to_base(pin >> 3);
 180:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 181:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 182:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 183:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief: To get the 8-bit pin mask for pin
 184:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 185:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 186:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static ioport_port_mask_t arch_ioport_pin_to_mask
 187:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	(ioport_pin_t pin)
 188:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return 1U << (pin & 0x07);
 190:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 191:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 192:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 193:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Set multiple pin modes in a single GPIO port, such as pull-up,
 194:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * pull-down, etc. configuration.
 195:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 196:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 197:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 198:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode Mode masks to configure for the specified pins (\ref
 199:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ioport_modes)
 200:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 201:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_mode(ioport_port_t port,
 202:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, ioport_mode_t mode)
 203:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 204:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifdef MEGA_RF
 205:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 206:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (mode == IOPORT_MODE_PULLUP) {
 207:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA = mask;
 208:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (mode == IOPORT_MODE_PULLDOWN) {
 209:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA = ~mask;
 210:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 211:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
 212:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 213:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 214:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 215:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief Set multiple pin modes in a single GPIO port, such as pull-up,
 216:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * pull-down, etc. configuration.
 217:../../../platform/common/services/ioport/mega_rf/ioport.h ****  *
 218:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 219:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 220:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode Mode masks to configure for the specified pins (\ref
 221:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * ioport_modes)
 222:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 223:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_mode(ioport_pin_t pin,
 224:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_mode_t mode)
 225:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 226:../../../platform/common/services/ioport/mega_rf/ioport.h **** #ifdef MEGA_RF
 227:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 228:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	ioport_pin_t mask_pin = arch_ioport_pin_to_mask(pin);
 229:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (mode == IOPORT_MODE_PULLUP) {
 230:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA |=  mask_pin;
 231:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (mode == IOPORT_MODE_PULLDOWN) {
 232:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA &= ~mask_pin;
 233:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 234:../../../platform/common/services/ioport/mega_rf/ioport.h **** #endif
 235:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 236:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 237:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 238:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set port direction as input or output.
 239:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 240:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 241:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode dir, \refer ioport_direction
 242:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 243:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_dir(ioport_port_t port,
 244:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, enum ioport_direction dir)
 245:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 246:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 247:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 248:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (dir == IOPORT_DIR_OUTPUT) {
 249:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR = mask;
 250:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (dir == IOPORT_DIR_INPUT) {
 251:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR = ~mask;
 252:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 253:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 254:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 255:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 256:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set pin direction as input or output.
 257:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 258:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to configure
 259:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mode dir, \refer ioport_direction
 260:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 261:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_dir(ioport_pin_t pin,
 262:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		enum ioport_direction dir)
 263:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 264:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 265:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 266:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (dir == IOPORT_DIR_OUTPUT) {
 267:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR |= arch_ioport_pin_to_mask(pin);
 268:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else if (dir == IOPORT_DIR_INPUT) {
 269:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->DIR &=  ~arch_ioport_pin_to_mask(pin);
 270:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 271:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 272:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 273:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 274:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set pin level to high or low.
 275:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 276:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: level high/low
 277:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 278:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_pin_level(ioport_pin_t pin,
 279:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		bool level)
 280:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base_add = arch_ioport_port_to_base(pin >> 3);
 507               		.loc 5 281 0
 508 01c8 8B81      		ldd r24,Y+3
 509 01ca 8695      		lsr r24
 510 01cc 8695      		lsr r24
 511 01ce 8695      		lsr r24
 512 01d0 8D83      		std Y+5,r24
 513               	.LBB76:
 514               	.LBB77:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 515               		.loc 5 170 0
 516 01d2 8D81      		ldd r24,Y+5
 517 01d4 282F      		mov r18,r24
 518 01d6 30E0      		ldi r19,0
 519 01d8 C901      		movw r24,r18
 520 01da 880F      		lsl r24
 521 01dc 991F      		rol r25
 522 01de 820F      		add r24,r18
 523 01e0 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 524               		.loc 5 169 0
 525 01e2 8096      		adiw r24,32
 526               	.LBE77:
 527               	.LBE76:
 528               		.loc 5 281 0
 529 01e4 9F83      		std Y+7,r25
 530 01e6 8E83      		std Y+6,r24
 282:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (level) {
 531               		.loc 5 283 0
 532 01e8 8C81      		ldd r24,Y+4
 533 01ea 8823      		tst r24
 534 01ec 01F0      		breq .L13
 284:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 			= (base_add->PORTDATA  | arch_ioport_pin_to_mask
 535               		.loc 5 285 0
 536 01ee 8E81      		ldd r24,Y+6
 537 01f0 9F81      		ldd r25,Y+7
 538 01f2 FC01      		movw r30,r24
 539 01f4 4281      		ldd r20,Z+2
 540 01f6 8B81      		ldd r24,Y+3
 541 01f8 8887      		std Y+8,r24
 542               	.LBB78:
 543               	.LBB79:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 544               		.loc 5 189 0
 545 01fa 8885      		ldd r24,Y+8
 546 01fc 882F      		mov r24,r24
 547 01fe 90E0      		ldi r25,0
 548 0200 9C01      		movw r18,r24
 549 0202 2770      		andi r18,7
 550 0204 3327      		clr r19
 551 0206 81E0      		ldi r24,lo8(1)
 552 0208 90E0      		ldi r25,0
 553 020a 00C0      		rjmp 2f
 554               		1:
 555 020c 880F      		lsl r24
 556 020e 991F      		rol r25
 557               		2:
 558 0210 2A95      		dec r18
 559 0212 02F4      		brpl 1b
 560               	.LBE79:
 561               	.LBE78:
 562               		.loc 5 285 0
 563 0214 242F      		mov r18,r20
 564 0216 282B      		or r18,r24
 565 0218 8E81      		ldd r24,Y+6
 566 021a 9F81      		ldd r25,Y+7
 567 021c FC01      		movw r30,r24
 568 021e 2283      		std Z+2,r18
 569               	.LBE75:
 570               	.LBE74:
 571               	.LBE73:
 572               	.LBE72:
  83:ServerBASIC.c **** #if (LED_COUNT > 0)
  84:ServerBASIC.c **** 	LED_Off(LED_DATA);
  85:ServerBASIC.c **** #endif
  86:ServerBASIC.c **** 
  87:ServerBASIC.c **** 	(void)timer;
  88:ServerBASIC.c **** }
 573               		.loc 4 88 0
 574 0220 00C0      		rjmp .L17
 575               	.L13:
 576               	.LBB85:
 577               	.LBB84:
 578               	.LBB83:
 579               	.LBB82:
 286:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 287:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else {
 288:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 			= (base_add->PORTDATA  & (~arch_ioport_pin_to_mask
 580               		.loc 5 289 0
 581 0222 8E81      		ldd r24,Y+6
 582 0224 9F81      		ldd r25,Y+7
 583 0226 FC01      		movw r30,r24
 584 0228 8281      		ldd r24,Z+2
 585 022a 482F      		mov r20,r24
 586 022c 8B81      		ldd r24,Y+3
 587 022e 8987      		std Y+9,r24
 588               	.LBB80:
 589               	.LBB81:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 590               		.loc 5 189 0
 591 0230 8985      		ldd r24,Y+9
 592 0232 882F      		mov r24,r24
 593 0234 90E0      		ldi r25,0
 594 0236 9C01      		movw r18,r24
 595 0238 2770      		andi r18,7
 596 023a 3327      		clr r19
 597 023c 81E0      		ldi r24,lo8(1)
 598 023e 90E0      		ldi r25,0
 599 0240 00C0      		rjmp 2f
 600               		1:
 601 0242 880F      		lsl r24
 602 0244 991F      		rol r25
 603               		2:
 604 0246 2A95      		dec r18
 605 0248 02F4      		brpl 1b
 606               	.LBE81:
 607               	.LBE80:
 608               		.loc 5 289 0
 609 024a 8095      		com r24
 610 024c 8423      		and r24,r20
 611 024e 282F      		mov r18,r24
 612 0250 8E81      		ldd r24,Y+6
 613 0252 9F81      		ldd r25,Y+7
 614 0254 FC01      		movw r30,r24
 615 0256 2283      		std Z+2,r18
 616               	.L17:
 617               	.LBE82:
 618               	.LBE83:
 619               	.LBE84:
 620               	.LBE85:
 621               		.loc 4 88 0
 622 0258 0000      		nop
 623               	/* epilogue start */
 624 025a 2B96      		adiw r28,11
 625 025c 0FB6      		in __tmp_reg__,__SREG__
 626 025e F894      		cli
 627 0260 DEBF      		out __SP_H__,r29
 628 0262 0FBE      		out __SREG__,__tmp_reg__
 629 0264 CDBF      		out __SP_L__,r28
 630 0266 DF91      		pop r29
 631 0268 CF91      		pop r28
 632 026a 0895      		ret
 633               		.cfi_endproc
 634               	.LFE131:
 636               		.section	.rodata
 637               	.LC2:
 638 000e 2530 3258 		.string	"%02X"
 638      00
 639               		.text
 641               	toHexBuffer:
 642               	.LFB132:
  89:ServerBASIC.c **** #if (APP_COORDINATOR)
  90:ServerBASIC.c **** static void toHexBuffer(uint8_t* out, uint8_t* in, uint16_t size)
  91:ServerBASIC.c **** {
 643               		.loc 4 91 0
 644               		.cfi_startproc
 645 026c CF93      		push r28
 646               	.LCFI27:
 647               		.cfi_def_cfa_offset 3
 648               		.cfi_offset 28, -2
 649 026e DF93      		push r29
 650               	.LCFI28:
 651               		.cfi_def_cfa_offset 4
 652               		.cfi_offset 29, -3
 653 0270 CDB7      		in r28,__SP_L__
 654 0272 DEB7      		in r29,__SP_H__
 655               	.LCFI29:
 656               		.cfi_def_cfa_register 28
 657 0274 2A97      		sbiw r28,10
 658               	.LCFI30:
 659               		.cfi_def_cfa_offset 14
 660 0276 0FB6      		in __tmp_reg__,__SREG__
 661 0278 F894      		cli
 662 027a DEBF      		out __SP_H__,r29
 663 027c 0FBE      		out __SREG__,__tmp_reg__
 664 027e CDBF      		out __SP_L__,r28
 665               	/* prologue: function */
 666               	/* frame size = 10 */
 667               	/* stack size = 12 */
 668               	.L__stack_usage = 12
 669 0280 9E83      		std Y+6,r25
 670 0282 8D83      		std Y+5,r24
 671 0284 7887      		std Y+8,r23
 672 0286 6F83      		std Y+7,r22
 673 0288 5A87      		std Y+10,r21
 674 028a 4987      		std Y+9,r20
  92:ServerBASIC.c **** 	uint16_t		pos			= 0;
 675               		.loc 4 92 0
 676 028c 1A82      		std Y+2,__zero_reg__
 677 028e 1982      		std Y+1,__zero_reg__
 678               	.LBB86:
  93:ServerBASIC.c **** 	for(uint16_t i = 0; i < size; ++i)
 679               		.loc 4 93 0
 680 0290 1C82      		std Y+4,__zero_reg__
 681 0292 1B82      		std Y+3,__zero_reg__
 682 0294 00C0      		rjmp .L19
 683               	.L20:
  94:ServerBASIC.c **** 	{
  95:ServerBASIC.c **** 		pos						+= sprintf(out + pos, "%02X", in[i]);
 684               		.loc 4 95 0 discriminator 3
 685 0296 2F81      		ldd r18,Y+7
 686 0298 3885      		ldd r19,Y+8
 687 029a 8B81      		ldd r24,Y+3
 688 029c 9C81      		ldd r25,Y+4
 689 029e 820F      		add r24,r18
 690 02a0 931F      		adc r25,r19
 691 02a2 FC01      		movw r30,r24
 692 02a4 8081      		ld r24,Z
 693 02a6 482F      		mov r20,r24
 694 02a8 50E0      		ldi r21,0
 695 02aa 2D81      		ldd r18,Y+5
 696 02ac 3E81      		ldd r19,Y+6
 697 02ae 8981      		ldd r24,Y+1
 698 02b0 9A81      		ldd r25,Y+2
 699 02b2 820F      		add r24,r18
 700 02b4 931F      		adc r25,r19
 701 02b6 252F      		mov r18,r21
 702 02b8 2F93      		push r18
 703 02ba 242F      		mov r18,r20
 704 02bc 2F93      		push r18
 705 02be 20E0      		ldi r18,lo8(.LC2)
 706 02c0 30E0      		ldi r19,hi8(.LC2)
 707 02c2 232F      		mov r18,r19
 708 02c4 2F93      		push r18
 709 02c6 20E0      		ldi r18,lo8(.LC2)
 710 02c8 30E0      		ldi r19,hi8(.LC2)
 711 02ca 2F93      		push r18
 712 02cc 292F      		mov r18,r25
 713 02ce 2F93      		push r18
 714 02d0 8F93      		push r24
 715 02d2 0E94 0000 		call sprintf
 716 02d6 0F90      		pop __tmp_reg__
 717 02d8 0F90      		pop __tmp_reg__
 718 02da 0F90      		pop __tmp_reg__
 719 02dc 0F90      		pop __tmp_reg__
 720 02de 0F90      		pop __tmp_reg__
 721 02e0 0F90      		pop __tmp_reg__
 722 02e2 9C01      		movw r18,r24
 723 02e4 8981      		ldd r24,Y+1
 724 02e6 9A81      		ldd r25,Y+2
 725 02e8 820F      		add r24,r18
 726 02ea 931F      		adc r25,r19
 727 02ec 9A83      		std Y+2,r25
 728 02ee 8983      		std Y+1,r24
  93:ServerBASIC.c **** 	for(uint16_t i = 0; i < size; ++i)
 729               		.loc 4 93 0 discriminator 3
 730 02f0 8B81      		ldd r24,Y+3
 731 02f2 9C81      		ldd r25,Y+4
 732 02f4 0196      		adiw r24,1
 733 02f6 9C83      		std Y+4,r25
 734 02f8 8B83      		std Y+3,r24
 735               	.L19:
  93:ServerBASIC.c **** 	for(uint16_t i = 0; i < size; ++i)
 736               		.loc 4 93 0 is_stmt 0 discriminator 1
 737 02fa 2B81      		ldd r18,Y+3
 738 02fc 3C81      		ldd r19,Y+4
 739 02fe 8985      		ldd r24,Y+9
 740 0300 9A85      		ldd r25,Y+10
 741 0302 2817      		cp r18,r24
 742 0304 3907      		cpc r19,r25
 743 0306 00F0      		brlo .L20
 744               	.LBE86:
  96:ServerBASIC.c **** 	}
  97:ServerBASIC.c **** 	out[pos]					= NULL;
 745               		.loc 4 97 0 is_stmt 1
 746 0308 2D81      		ldd r18,Y+5
 747 030a 3E81      		ldd r19,Y+6
 748 030c 8981      		ldd r24,Y+1
 749 030e 9A81      		ldd r25,Y+2
 750 0310 820F      		add r24,r18
 751 0312 931F      		adc r25,r19
 752 0314 FC01      		movw r30,r24
 753 0316 1082      		st Z,__zero_reg__
  98:ServerBASIC.c **** }
 754               		.loc 4 98 0
 755 0318 0000      		nop
 756               	/* epilogue start */
 757 031a 2A96      		adiw r28,10
 758 031c 0FB6      		in __tmp_reg__,__SREG__
 759 031e F894      		cli
 760 0320 DEBF      		out __SP_H__,r29
 761 0322 0FBE      		out __SREG__,__tmp_reg__
 762 0324 CDBF      		out __SP_L__,r28
 763 0326 DF91      		pop r29
 764 0328 CF91      		pop r28
 765 032a 0895      		ret
 766               		.cfi_endproc
 767               	.LFE132:
 770               	tdma_server_beacon:
 771               	.LFB133:
  99:ServerBASIC.c **** #if (MASTER_MACSC == 1)
 100:ServerBASIC.c **** static void tdma_server_beacon(void)
 101:ServerBASIC.c **** {
 772               		.loc 4 101 0
 773               		.cfi_startproc
 774 032c CF93      		push r28
 775               	.LCFI31:
 776               		.cfi_def_cfa_offset 3
 777               		.cfi_offset 28, -2
 778 032e DF93      		push r29
 779               	.LCFI32:
 780               		.cfi_def_cfa_offset 4
 781               		.cfi_offset 29, -3
 782 0330 CDB7      		in r28,__SP_L__
 783 0332 DEB7      		in r29,__SP_H__
 784               	.LCFI33:
 785               		.cfi_def_cfa_register 28
 786               	/* prologue: function */
 787               	/* frame size = 0 */
 788               	/* stack size = 2 */
 789               	.L__stack_usage = 2
 102:ServerBASIC.c **** 	macsc_enable_manual_bts();
 790               		.loc 4 102 0
 791 0334 0E94 0000 		call macsc_enable_manual_bts
 103:ServerBASIC.c **** 
 104:ServerBASIC.c **** 	appState					= APP_STATE_SEND;
 792               		.loc 4 104 0
 793 0338 83E0      		ldi r24,lo8(3)
 794 033a 8093 0000 		sts appState,r24
 105:ServerBASIC.c **** }
 795               		.loc 4 105 0
 796 033e 0000      		nop
 797               	/* epilogue start */
 798 0340 DF91      		pop r29
 799 0342 CF91      		pop r28
 800 0344 0895      		ret
 801               		.cfi_endproc
 802               	.LFE133:
 805               	tdma_server_statistics:
 806               	.LFB134:
 106:ServerBASIC.c **** static void tdma_server_statistics(void)
 107:ServerBASIC.c **** {
 807               		.loc 4 107 0
 808               		.cfi_startproc
 809 0346 CF93      		push r28
 810               	.LCFI34:
 811               		.cfi_def_cfa_offset 3
 812               		.cfi_offset 28, -2
 813 0348 DF93      		push r29
 814               	.LCFI35:
 815               		.cfi_def_cfa_offset 4
 816               		.cfi_offset 29, -3
 817 034a CDB7      		in r28,__SP_L__
 818 034c DEB7      		in r29,__SP_H__
 819               	.LCFI36:
 820               		.cfi_def_cfa_register 28
 821               	/* prologue: function */
 822               	/* frame size = 0 */
 823               	/* stack size = 2 */
 824               	.L__stack_usage = 2
 108:ServerBASIC.c **** 	appState					= APP_STATE_SERVER_STATISTICS;
 825               		.loc 4 108 0
 826 034e 8FE0      		ldi r24,lo8(15)
 827 0350 8093 0000 		sts appState,r24
 109:ServerBASIC.c **** }
 828               		.loc 4 109 0
 829 0354 0000      		nop
 830               	/* epilogue start */
 831 0356 DF91      		pop r29
 832 0358 CF91      		pop r28
 833 035a 0895      		ret
 834               		.cfi_endproc
 835               	.LFE134:
 837               		.section	.rodata
 838               	.LC3:
 839 0013 523A 2025 		.string	"R: %d, C: %d, S: %d\n"
 839      642C 2043 
 839      3A20 2564 
 839      2C20 533A 
 839      2025 640A 
 840               	.LC4:
 841 0028 5200      		.string	"R"
 842               	.LC5:
 843 002a 5300      		.string	"S"
 844               	.LC6:
 845 002c 2573 3A20 		.string	"%s: Node[%02d]: \n"
 845      4E6F 6465 
 845      5B25 3032 
 845      645D 3A20 
 845      0A00 
 846               		.text
 848               	server_statistics:
 849               	.LFB135:
 110:ServerBASIC.c **** #else
 111:ServerBASIC.c **** static void tmr_tdma_server_beacon(SYS_Timer_t *timer)
 112:ServerBASIC.c **** {
 113:ServerBASIC.c **** 	(void) timer;
 114:ServerBASIC.c **** 
 115:ServerBASIC.c **** 	SYS_TimerStart(&tmrComputeData);
 116:ServerBASIC.c **** 	
 117:ServerBASIC.c **** 	appState					= APP_STATE_SEND;
 118:ServerBASIC.c **** }
 119:ServerBASIC.c **** static void tmr_tdma_server_statistics(SYS_Timer_t *timer)
 120:ServerBASIC.c **** {
 121:ServerBASIC.c **** 	(void) timer;
 122:ServerBASIC.c **** 
 123:ServerBASIC.c **** 	appState					= APP_STATE_SERVER_STATISTICS;
 124:ServerBASIC.c **** }
 125:ServerBASIC.c **** #endif
 126:ServerBASIC.c **** static void server_statistics(void)
 127:ServerBASIC.c **** {
 850               		.loc 4 127 0
 851               		.cfi_startproc
 852 035c CF93      		push r28
 853               	.LCFI37:
 854               		.cfi_def_cfa_offset 3
 855               		.cfi_offset 28, -2
 856 035e DF93      		push r29
 857               	.LCFI38:
 858               		.cfi_def_cfa_offset 4
 859               		.cfi_offset 29, -3
 860 0360 CDB7      		in r28,__SP_L__
 861 0362 DEB7      		in r29,__SP_H__
 862               	.LCFI39:
 863               		.cfi_def_cfa_register 28
 864 0364 2897      		sbiw r28,8
 865               	.LCFI40:
 866               		.cfi_def_cfa_offset 12
 867 0366 0FB6      		in __tmp_reg__,__SREG__
 868 0368 F894      		cli
 869 036a DEBF      		out __SP_H__,r29
 870 036c 0FBE      		out __SREG__,__tmp_reg__
 871 036e CDBF      		out __SP_L__,r28
 872               	/* prologue: function */
 873               	/* frame size = 8 */
 874               	/* stack size = 10 */
 875               	.L__stack_usage = 10
 128:ServerBASIC.c **** 	int	n_decoded				= solver_solve_system();
 876               		.loc 4 128 0
 877 0370 0E94 0000 		call solver_solve_system
 878 0374 9A83      		std Y+2,r25
 879 0376 8983      		std Y+1,r24
 129:ServerBASIC.c **** 	int n_received				= solver_get_n_received();
 880               		.loc 4 129 0
 881 0378 0E94 0000 		call solver_get_n_received
 882 037c 882F      		mov r24,r24
 883 037e 90E0      		ldi r25,0
 884 0380 9E83      		std Y+6,r25
 885 0382 8D83      		std Y+5,r24
 130:ServerBASIC.c **** 	printf("R: %d, C: %d, S: %d\n", n_received, solver_get_n_colaborative(), n_decoded);
 886               		.loc 4 130 0
 887 0384 0E94 0000 		call solver_get_n_colaborative
 888 0388 882F      		mov r24,r24
 889 038a 90E0      		ldi r25,0
 890 038c 2A81      		ldd r18,Y+2
 891 038e 2F93      		push r18
 892 0390 2981      		ldd r18,Y+1
 893 0392 2F93      		push r18
 894 0394 292F      		mov r18,r25
 895 0396 2F93      		push r18
 896 0398 8F93      		push r24
 897 039a 8E81      		ldd r24,Y+6
 898 039c 8F93      		push r24
 899 039e 8D81      		ldd r24,Y+5
 900 03a0 8F93      		push r24
 901 03a2 80E0      		ldi r24,lo8(.LC3)
 902 03a4 90E0      		ldi r25,hi8(.LC3)
 903 03a6 892F      		mov r24,r25
 904 03a8 8F93      		push r24
 905 03aa 80E0      		ldi r24,lo8(.LC3)
 906 03ac 90E0      		ldi r25,hi8(.LC3)
 907 03ae 8F93      		push r24
 908 03b0 0E94 0000 		call printf
 909 03b4 8DB7      		in r24,__SP_L__
 910 03b6 9EB7      		in r25,__SP_H__
 911 03b8 0896      		adiw r24,8
 912 03ba 0FB6      		in __tmp_reg__,__SREG__
 913 03bc F894      		cli
 914 03be DEBF      		out __SP_H__,r29
 915 03c0 0FBE      		out __SREG__,__tmp_reg__
 916 03c2 CDBF      		out __SP_L__,r28
 917               	.LBB87:
 131:ServerBASIC.c **** 	
 132:ServerBASIC.c **** 	for(uint8_t j = SOLVER_MSG_RECEIVED; j < SOLVER_MSG_MAX; ++j)
 918               		.loc 4 132 0
 919 03c4 81E0      		ldi r24,lo8(1)
 920 03c6 8B83      		std Y+3,r24
 921 03c8 00C0      		rjmp .L24
 922               	.L30:
 923               	.LBB88:
 133:ServerBASIC.c **** 	{
 134:ServerBASIC.c **** 		for(uint8_t i = 0; i < N_MOTES_COLLAB_MAX; ++i)
 924               		.loc 4 134 0
 925 03ca 1C82      		std Y+4,__zero_reg__
 926 03cc 00C0      		rjmp .L25
 927               	.L29:
 928               	.LBB89:
 135:ServerBASIC.c **** 		{
 136:ServerBASIC.c **** 			uint8_t* buffer				= solver_get_data(i, j);
 929               		.loc 4 136 0
 930 03ce 6B81      		ldd r22,Y+3
 931 03d0 8C81      		ldd r24,Y+4
 932 03d2 0E94 0000 		call solver_get_data
 933 03d6 9887      		std Y+8,r25
 934 03d8 8F83      		std Y+7,r24
 137:ServerBASIC.c **** 			if(buffer)
 935               		.loc 4 137 0
 936 03da 8F81      		ldd r24,Y+7
 937 03dc 9885      		ldd r25,Y+8
 938 03de 892B      		or r24,r25
 939 03e0 01F0      		breq .L26
 138:ServerBASIC.c **** 			{
 139:ServerBASIC.c **** 				--n_decoded;
 940               		.loc 4 139 0
 941 03e2 8981      		ldd r24,Y+1
 942 03e4 9A81      		ldd r25,Y+2
 943 03e6 0197      		sbiw r24,1
 944 03e8 9A83      		std Y+2,r25
 945 03ea 8983      		std Y+1,r24
 140:ServerBASIC.c **** 				//toHexBuffer(statistics_buffer, buffer, MSG_SIZE_MAX);
 141:ServerBASIC.c **** 				//printf("%s: Node[%02d]: %s\n", (j == SOLVER_MSG_RECEIVED ? "R" : "S"), i + 1, statistics_buff
 142:ServerBASIC.c **** 				printf("%s: Node[%02d]: \n", (j == SOLVER_MSG_RECEIVED ? "R" : "S"), i + 1);
 946               		.loc 4 142 0
 947 03ec 8C81      		ldd r24,Y+4
 948 03ee 882F      		mov r24,r24
 949 03f0 90E0      		ldi r25,0
 950 03f2 9C01      		movw r18,r24
 951 03f4 2F5F      		subi r18,-1
 952 03f6 3F4F      		sbci r19,-1
 953 03f8 8B81      		ldd r24,Y+3
 954 03fa 8130      		cpi r24,lo8(1)
 955 03fc 01F4      		brne .L27
 956               		.loc 4 142 0 is_stmt 0 discriminator 1
 957 03fe 80E0      		ldi r24,lo8(.LC4)
 958 0400 90E0      		ldi r25,hi8(.LC4)
 959 0402 00C0      		rjmp .L28
 960               	.L27:
 961               		.loc 4 142 0 discriminator 2
 962 0404 80E0      		ldi r24,lo8(.LC5)
 963 0406 90E0      		ldi r25,hi8(.LC5)
 964               	.L28:
 965               		.loc 4 142 0 discriminator 4
 966 0408 432F      		mov r20,r19
 967 040a 4F93      		push r20
 968 040c 2F93      		push r18
 969 040e 292F      		mov r18,r25
 970 0410 2F93      		push r18
 971 0412 8F93      		push r24
 972 0414 80E0      		ldi r24,lo8(.LC6)
 973 0416 90E0      		ldi r25,hi8(.LC6)
 974 0418 892F      		mov r24,r25
 975 041a 8F93      		push r24
 976 041c 80E0      		ldi r24,lo8(.LC6)
 977 041e 90E0      		ldi r25,hi8(.LC6)
 978 0420 8F93      		push r24
 979 0422 0E94 0000 		call printf
 980 0426 0F90      		pop __tmp_reg__
 981 0428 0F90      		pop __tmp_reg__
 982 042a 0F90      		pop __tmp_reg__
 983 042c 0F90      		pop __tmp_reg__
 984 042e 0F90      		pop __tmp_reg__
 985 0430 0F90      		pop __tmp_reg__
 986               	.L26:
 987               	.LBE89:
 134:ServerBASIC.c **** 		{
 988               		.loc 4 134 0 is_stmt 1 discriminator 2
 989 0432 8C81      		ldd r24,Y+4
 990 0434 8F5F      		subi r24,lo8(-(1))
 991 0436 8C83      		std Y+4,r24
 992               	.L25:
 134:ServerBASIC.c **** 		{
 993               		.loc 4 134 0 is_stmt 0 discriminator 1
 994 0438 8C81      		ldd r24,Y+4
 995 043a 8E30      		cpi r24,lo8(14)
 996 043c 00F0      		brlo .L29
 997               	.LBE88:
 132:ServerBASIC.c **** 	{
 998               		.loc 4 132 0 is_stmt 1 discriminator 2
 999 043e 8B81      		ldd r24,Y+3
 1000 0440 8F5F      		subi r24,lo8(-(1))
 1001 0442 8B83      		std Y+3,r24
 1002               	.L24:
 132:ServerBASIC.c **** 	{
 1003               		.loc 4 132 0 is_stmt 0 discriminator 1
 1004 0444 8B81      		ldd r24,Y+3
 1005 0446 8330      		cpi r24,lo8(3)
 1006 0448 00F4      		brsh .+2
 1007 044a 00C0      		rjmp .L30
 1008               	.LBE87:
 143:ServerBASIC.c **** 			}
 144:ServerBASIC.c **** 		}
 145:ServerBASIC.c **** 	}
 146:ServerBASIC.c **** 	
 147:ServerBASIC.c **** 	appState							= APP_STATE_IDLE;
 1009               		.loc 4 147 0 is_stmt 1
 1010 044c 81E0      		ldi r24,lo8(1)
 1011 044e 8093 0000 		sts appState,r24
 148:ServerBASIC.c **** }
 1012               		.loc 4 148 0
 1013 0452 0000      		nop
 1014               	/* epilogue start */
 1015 0454 2896      		adiw r28,8
 1016 0456 0FB6      		in __tmp_reg__,__SREG__
 1017 0458 F894      		cli
 1018 045a DEBF      		out __SP_H__,r29
 1019 045c 0FBE      		out __SREG__,__tmp_reg__
 1020 045e CDBF      		out __SP_L__,r28
 1021 0460 DF91      		pop r29
 1022 0462 CF91      		pop r28
 1023 0464 0895      		ret
 1024               		.cfi_endproc
 1025               	.LFE135:
 1027               		.section	.rodata
 1028               	.LC7:
 1029 003e 0A0A 5475 		.string	"\n\nTurn: %04d\n"
 1029      726E 3A20 
 1029      2530 3464 
 1029      0A00 
 1030               	.LC8:
 1031 004c 436F 6E6E 		.string	"Connected: %02d, %s\n"
 1031      6563 7465 
 1031      643A 2025 
 1031      3032 642C 
 1031      2025 730A 
 1032               	.LC9:
 1033 0061 436F 6C6C 		.string	"Collab Buffer: %s\n"
 1033      6162 2042 
 1033      7566 6665 
 1033      723A 2025 
 1033      730A 00
 1034               		.text
 1036               	appSendData:
 1037               	.LFB136:
 149:ServerBASIC.c **** #else
 150:ServerBASIC.c **** static void tdma_client_turn(void)
 151:ServerBASIC.c **** {
 152:ServerBASIC.c **** 	appState							= APP_STATE_WAKEUP_AND_WAIT;
 153:ServerBASIC.c **** }
 154:ServerBASIC.c **** static void tdma_job_conf(NWK_DataReq_t *req)
 155:ServerBASIC.c **** {
 156:ServerBASIC.c **** 	(void) req;
 157:ServerBASIC.c **** 
 158:ServerBASIC.c **** 	appState							= APP_STATE_SLEEP_PREPARE;
 159:ServerBASIC.c **** }
 160:ServerBASIC.c **** static bool appBeaconInd(NWK_DataInd_t *ind)
 161:ServerBASIC.c **** {
 162:ServerBASIC.c **** 	(void) ind;
 163:ServerBASIC.c **** 
 164:ServerBASIC.c **** #if (LED_COUNT > 0)
 165:ServerBASIC.c **** 	//LED_Toggle(LED_BLINK);
 166:ServerBASIC.c **** 	//LED_Off(LED_DATA);
 167:ServerBASIC.c **** #endif
 168:ServerBASIC.c **** 
 169:ServerBASIC.c **** 	AppMessageFrame_t*	frame_struct= (AppMessageFrame_t*) ind->data;
 170:ServerBASIC.c **** 
 171:ServerBASIC.c **** 	if(frame_struct->frameType == MSG_STATE_BEACON)
 172:ServerBASIC.c **** 	{
 173:ServerBASIC.c **** 		appState						= APP_STATE_SEND_PREPARE;
 174:ServerBASIC.c **** 	}
 175:ServerBASIC.c **** 
 176:ServerBASIC.c **** 	return true;
 177:ServerBASIC.c **** }
 178:ServerBASIC.c **** 
 179:ServerBASIC.c **** static void appSendPrepare(void)
 180:ServerBASIC.c **** {
 181:ServerBASIC.c **** 	for(uint8_t i = 0; i < MSG_SIZE_MAX; ++i)
 182:ServerBASIC.c **** 	{
 183:ServerBASIC.c **** 		msgFrame.data.data_vector[i]	= rand();
 184:ServerBASIC.c **** 	}
 185:ServerBASIC.c **** }
 186:ServerBASIC.c **** #endif
 187:ServerBASIC.c **** static void appSendData(void)
 188:ServerBASIC.c **** {
 1038               		.loc 4 188 0
 1039               		.cfi_startproc
 1040 0466 CF93      		push r28
 1041               	.LCFI41:
 1042               		.cfi_def_cfa_offset 3
 1043               		.cfi_offset 28, -2
 1044 0468 DF93      		push r29
 1045               	.LCFI42:
 1046               		.cfi_def_cfa_offset 4
 1047               		.cfi_offset 29, -3
 1048 046a CDB7      		in r28,__SP_L__
 1049 046c DEB7      		in r29,__SP_H__
 1050               	.LCFI43:
 1051               		.cfi_def_cfa_register 28
 1052 046e 2A97      		sbiw r28,10
 1053               	.LCFI44:
 1054               		.cfi_def_cfa_offset 14
 1055 0470 0FB6      		in __tmp_reg__,__SREG__
 1056 0472 F894      		cli
 1057 0474 DEBF      		out __SP_H__,r29
 1058 0476 0FBE      		out __SREG__,__tmp_reg__
 1059 0478 CDBF      		out __SP_L__,r28
 1060               	/* prologue: function */
 1061               	/* frame size = 10 */
 1062               	/* stack size = 12 */
 1063               	.L__stack_usage = 12
 1064 047a 84E2      		ldi r24,lo8(36)
 1065 047c 8A83      		std Y+2,r24
 1066 047e 1B82      		std Y+3,__zero_reg__
 1067 0480 8A81      		ldd r24,Y+2
 1068 0482 8C83      		std Y+4,r24
 1069 0484 8B81      		ldd r24,Y+3
 1070 0486 8D83      		std Y+5,r24
 1071               	.LBB90:
 1072               	.LBB91:
 1073               	.LBB92:
 1074               	.LBB93:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1075               		.loc 5 281 0
 1076 0488 8C81      		ldd r24,Y+4
 1077 048a 8695      		lsr r24
 1078 048c 8695      		lsr r24
 1079 048e 8695      		lsr r24
 1080 0490 8E83      		std Y+6,r24
 1081               	.LBB94:
 1082               	.LBB95:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1083               		.loc 5 170 0
 1084 0492 8E81      		ldd r24,Y+6
 1085 0494 282F      		mov r18,r24
 1086 0496 30E0      		ldi r19,0
 1087 0498 C901      		movw r24,r18
 1088 049a 880F      		lsl r24
 1089 049c 991F      		rol r25
 1090 049e 820F      		add r24,r18
 1091 04a0 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1092               		.loc 5 169 0
 1093 04a2 8096      		adiw r24,32
 1094               	.LBE95:
 1095               	.LBE94:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1096               		.loc 5 281 0
 1097 04a4 9887      		std Y+8,r25
 1098 04a6 8F83      		std Y+7,r24
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 1099               		.loc 5 283 0
 1100 04a8 8D81      		ldd r24,Y+5
 1101 04aa 8823      		tst r24
 1102 04ac 01F0      		breq .L33
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1103               		.loc 5 285 0
 1104 04ae 8F81      		ldd r24,Y+7
 1105 04b0 9885      		ldd r25,Y+8
 1106 04b2 FC01      		movw r30,r24
 1107 04b4 4281      		ldd r20,Z+2
 1108 04b6 8C81      		ldd r24,Y+4
 1109 04b8 8987      		std Y+9,r24
 1110               	.LBB96:
 1111               	.LBB97:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1112               		.loc 5 189 0
 1113 04ba 8985      		ldd r24,Y+9
 1114 04bc 882F      		mov r24,r24
 1115 04be 90E0      		ldi r25,0
 1116 04c0 9C01      		movw r18,r24
 1117 04c2 2770      		andi r18,7
 1118 04c4 3327      		clr r19
 1119 04c6 81E0      		ldi r24,lo8(1)
 1120 04c8 90E0      		ldi r25,0
 1121 04ca 00C0      		rjmp 2f
 1122               		1:
 1123 04cc 880F      		lsl r24
 1124 04ce 991F      		rol r25
 1125               		2:
 1126 04d0 2A95      		dec r18
 1127 04d2 02F4      		brpl 1b
 1128               	.LBE97:
 1129               	.LBE96:
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1130               		.loc 5 285 0
 1131 04d4 242F      		mov r18,r20
 1132 04d6 282B      		or r18,r24
 1133 04d8 8F81      		ldd r24,Y+7
 1134 04da 9885      		ldd r25,Y+8
 1135 04dc FC01      		movw r30,r24
 1136 04de 2283      		std Z+2,r18
 1137 04e0 00C0      		rjmp .L35
 1138               	.L33:
 1139               		.loc 5 289 0
 1140 04e2 8F81      		ldd r24,Y+7
 1141 04e4 9885      		ldd r25,Y+8
 1142 04e6 FC01      		movw r30,r24
 1143 04e8 8281      		ldd r24,Z+2
 1144 04ea 482F      		mov r20,r24
 1145 04ec 8C81      		ldd r24,Y+4
 1146 04ee 8A87      		std Y+10,r24
 1147               	.LBB98:
 1148               	.LBB99:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1149               		.loc 5 189 0
 1150 04f0 8A85      		ldd r24,Y+10
 1151 04f2 882F      		mov r24,r24
 1152 04f4 90E0      		ldi r25,0
 1153 04f6 9C01      		movw r18,r24
 1154 04f8 2770      		andi r18,7
 1155 04fa 3327      		clr r19
 1156 04fc 81E0      		ldi r24,lo8(1)
 1157 04fe 90E0      		ldi r25,0
 1158 0500 00C0      		rjmp 2f
 1159               		1:
 1160 0502 880F      		lsl r24
 1161 0504 991F      		rol r25
 1162               		2:
 1163 0506 2A95      		dec r18
 1164 0508 02F4      		brpl 1b
 1165               	.LBE99:
 1166               	.LBE98:
 1167               		.loc 5 289 0
 1168 050a 8095      		com r24
 1169 050c 8423      		and r24,r20
 1170 050e 282F      		mov r18,r24
 1171 0510 8F81      		ldd r24,Y+7
 1172 0512 9885      		ldd r25,Y+8
 1173 0514 FC01      		movw r30,r24
 1174 0516 2283      		std Z+2,r18
 1175               	.L35:
 1176               	.LBE93:
 1177               	.LBE92:
 1178               	.LBE91:
 1179               	.LBE90:
 189:ServerBASIC.c **** #if (LED_COUNT > 0)
 190:ServerBASIC.c **** 	LED_On(LED_DATA);
 191:ServerBASIC.c **** 	#if (APP_COORDINATOR)
 192:ServerBASIC.c **** 		SYS_TimerStart(&tmrBlinkData);
 1180               		.loc 4 192 0
 1181 0518 80E0      		ldi r24,lo8(tmrBlinkData)
 1182 051a 90E0      		ldi r25,hi8(tmrBlinkData)
 1183 051c 0E94 0000 		call SYS_TimerStart
 193:ServerBASIC.c **** 	#endif
 194:ServerBASIC.c **** #endif
 195:ServerBASIC.c **** 
 196:ServerBASIC.c **** #if (APP_COORDINATOR)
 197:ServerBASIC.c **** 	printf("\n\nTurn: %04d\n", server_turn++);
 1184               		.loc 4 197 0
 1185 0520 8091 0000 		lds r24,server_turn
 1186 0524 9091 0000 		lds r25,server_turn+1
 1187 0528 9C01      		movw r18,r24
 1188 052a 2F5F      		subi r18,-1
 1189 052c 3F4F      		sbci r19,-1
 1190 052e 3093 0000 		sts server_turn+1,r19
 1191 0532 2093 0000 		sts server_turn,r18
 1192 0536 292F      		mov r18,r25
 1193 0538 2F93      		push r18
 1194 053a 8F93      		push r24
 1195 053c 80E0      		ldi r24,lo8(.LC7)
 1196 053e 90E0      		ldi r25,hi8(.LC7)
 1197 0540 892F      		mov r24,r25
 1198 0542 8F93      		push r24
 1199 0544 80E0      		ldi r24,lo8(.LC7)
 1200 0546 90E0      		ldi r25,hi8(.LC7)
 1201 0548 8F93      		push r24
 1202 054a 0E94 0000 		call printf
 1203 054e 0F90      		pop __tmp_reg__
 1204 0550 0F90      		pop __tmp_reg__
 1205 0552 0F90      		pop __tmp_reg__
 1206 0554 0F90      		pop __tmp_reg__
 198:ServerBASIC.c **** 	energy_prepare_next_turn();
 1207               		.loc 4 198 0
 1208 0556 0E94 0000 		call energy_prepare_next_turn
 199:ServerBASIC.c **** 	solver_prepare_next_turn();
 1209               		.loc 4 199 0
 1210 055a 0E94 0000 		call solver_prepare_next_turn
 200:ServerBASIC.c **** 	energy_get_collab_vector(msgFrame.beacon.collab_vector);
 1211               		.loc 4 200 0
 1212 055e 80E0      		ldi r24,lo8(msgFrame+1)
 1213 0560 90E0      		ldi r25,hi8(msgFrame+1)
 1214 0562 0E94 0000 		call energy_get_collab_vector
 201:ServerBASIC.c **** 	uint8_t aux_connected = energy_get_connected_vector(aux_buffer);
 1215               		.loc 4 201 0
 1216 0566 80E0      		ldi r24,lo8(aux_buffer)
 1217 0568 90E0      		ldi r25,hi8(aux_buffer)
 1218 056a 0E94 0000 		call energy_get_connected_vector
 1219 056e 8983      		std Y+1,r24
 202:ServerBASIC.c **** 	toHexBuffer(statistics_buffer, aux_buffer, N_MOTES_COLLAB_MAX);
 1220               		.loc 4 202 0
 1221 0570 4EE0      		ldi r20,lo8(14)
 1222 0572 50E0      		ldi r21,0
 1223 0574 60E0      		ldi r22,lo8(aux_buffer)
 1224 0576 70E0      		ldi r23,hi8(aux_buffer)
 1225 0578 80E0      		ldi r24,lo8(statistics_buffer)
 1226 057a 90E0      		ldi r25,hi8(statistics_buffer)
 1227 057c 0E94 0000 		call toHexBuffer
 203:ServerBASIC.c **** 	printf("Connected: %02d, %s\n", aux_connected, statistics_buffer);
 1228               		.loc 4 203 0
 1229 0580 8981      		ldd r24,Y+1
 1230 0582 882F      		mov r24,r24
 1231 0584 90E0      		ldi r25,0
 1232 0586 20E0      		ldi r18,lo8(statistics_buffer)
 1233 0588 30E0      		ldi r19,hi8(statistics_buffer)
 1234 058a 232F      		mov r18,r19
 1235 058c 2F93      		push r18
 1236 058e 20E0      		ldi r18,lo8(statistics_buffer)
 1237 0590 30E0      		ldi r19,hi8(statistics_buffer)
 1238 0592 2F93      		push r18
 1239 0594 292F      		mov r18,r25
 1240 0596 2F93      		push r18
 1241 0598 8F93      		push r24
 1242 059a 80E0      		ldi r24,lo8(.LC8)
 1243 059c 90E0      		ldi r25,hi8(.LC8)
 1244 059e 892F      		mov r24,r25
 1245 05a0 8F93      		push r24
 1246 05a2 80E0      		ldi r24,lo8(.LC8)
 1247 05a4 90E0      		ldi r25,hi8(.LC8)
 1248 05a6 8F93      		push r24
 1249 05a8 0E94 0000 		call printf
 1250 05ac 0F90      		pop __tmp_reg__
 1251 05ae 0F90      		pop __tmp_reg__
 1252 05b0 0F90      		pop __tmp_reg__
 1253 05b2 0F90      		pop __tmp_reg__
 1254 05b4 0F90      		pop __tmp_reg__
 1255 05b6 0F90      		pop __tmp_reg__
 204:ServerBASIC.c **** 
 205:ServerBASIC.c **** 	toHexBuffer(statistics_buffer, msgFrame.beacon.collab_vector, N_COLLAB_VECTOR);
 1256               		.loc 4 205 0
 1257 05b8 40E2      		ldi r20,lo8(32)
 1258 05ba 50E0      		ldi r21,0
 1259 05bc 60E0      		ldi r22,lo8(msgFrame+1)
 1260 05be 70E0      		ldi r23,hi8(msgFrame+1)
 1261 05c0 80E0      		ldi r24,lo8(statistics_buffer)
 1262 05c2 90E0      		ldi r25,hi8(statistics_buffer)
 1263 05c4 0E94 0000 		call toHexBuffer
 206:ServerBASIC.c **** 	printf("Collab Buffer: %s\n", statistics_buffer);
 1264               		.loc 4 206 0
 1265 05c8 80E0      		ldi r24,lo8(statistics_buffer)
 1266 05ca 90E0      		ldi r25,hi8(statistics_buffer)
 1267 05cc 892F      		mov r24,r25
 1268 05ce 8F93      		push r24
 1269 05d0 80E0      		ldi r24,lo8(statistics_buffer)
 1270 05d2 90E0      		ldi r25,hi8(statistics_buffer)
 1271 05d4 8F93      		push r24
 1272 05d6 80E0      		ldi r24,lo8(.LC9)
 1273 05d8 90E0      		ldi r25,hi8(.LC9)
 1274 05da 892F      		mov r24,r25
 1275 05dc 8F93      		push r24
 1276 05de 80E0      		ldi r24,lo8(.LC9)
 1277 05e0 90E0      		ldi r25,hi8(.LC9)
 1278 05e2 8F93      		push r24
 1279 05e4 0E94 0000 		call printf
 1280 05e8 0F90      		pop __tmp_reg__
 1281 05ea 0F90      		pop __tmp_reg__
 1282 05ec 0F90      		pop __tmp_reg__
 1283 05ee 0F90      		pop __tmp_reg__
 207:ServerBASIC.c **** 	
 208:ServerBASIC.c **** 	NWK_DataReq(&msgReq);
 1284               		.loc 4 208 0
 1285 05f0 80E0      		ldi r24,lo8(msgReq)
 1286 05f2 90E0      		ldi r25,hi8(msgReq)
 1287 05f4 0E94 0000 		call NWK_DataReq
 209:ServerBASIC.c **** #else
 210:ServerBASIC.c **** 	if(connected)
 211:ServerBASIC.c **** 	{
 212:ServerBASIC.c **** 		// Utiliza o SLOT do TDMA para enviar dados somente apos conectar com o Coordenador
 213:ServerBASIC.c **** 		NWK_DataReq(&msgReq);
 214:ServerBASIC.c **** 	}
 215:ServerBASIC.c **** 	else
 216:ServerBASIC.c **** 	{
 217:ServerBASIC.c **** 		NWK_DataReq(&msgReqConnection);
 218:ServerBASIC.c **** 	}
 219:ServerBASIC.c **** #endif
 220:ServerBASIC.c **** }
 1288               		.loc 4 220 0
 1289 05f8 0000      		nop
 1290               	/* epilogue start */
 1291 05fa 2A96      		adiw r28,10
 1292 05fc 0FB6      		in __tmp_reg__,__SREG__
 1293 05fe F894      		cli
 1294 0600 DEBF      		out __SP_H__,r29
 1295 0602 0FBE      		out __SREG__,__tmp_reg__
 1296 0604 CDBF      		out __SP_L__,r28
 1297 0606 DF91      		pop r29
 1298 0608 CF91      		pop r28
 1299 060a 0895      		ret
 1300               		.cfi_endproc
 1301               	.LFE136:
 1304               	appDataInd:
 1305               	.LFB137:
 221:ServerBASIC.c **** static bool appDataInd(NWK_DataInd_t *ind)
 222:ServerBASIC.c **** {
 1306               		.loc 4 222 0
 1307               		.cfi_startproc
 1308 060c CF93      		push r28
 1309               	.LCFI45:
 1310               		.cfi_def_cfa_offset 3
 1311               		.cfi_offset 28, -2
 1312 060e DF93      		push r29
 1313               	.LCFI46:
 1314               		.cfi_def_cfa_offset 4
 1315               		.cfi_offset 29, -3
 1316 0610 CDB7      		in r28,__SP_L__
 1317 0612 DEB7      		in r29,__SP_H__
 1318               	.LCFI47:
 1319               		.cfi_def_cfa_register 28
 1320 0614 2B97      		sbiw r28,11
 1321               	.LCFI48:
 1322               		.cfi_def_cfa_offset 15
 1323 0616 0FB6      		in __tmp_reg__,__SREG__
 1324 0618 F894      		cli
 1325 061a DEBF      		out __SP_H__,r29
 1326 061c 0FBE      		out __SREG__,__tmp_reg__
 1327 061e CDBF      		out __SP_L__,r28
 1328               	/* prologue: function */
 1329               	/* frame size = 11 */
 1330               	/* stack size = 13 */
 1331               	.L__stack_usage = 13
 1332 0620 9B87      		std Y+11,r25
 1333 0622 8A87      		std Y+10,r24
 1334 0624 85E2      		ldi r24,lo8(37)
 1335 0626 8B83      		std Y+3,r24
 1336 0628 8B81      		ldd r24,Y+3
 1337 062a 8C83      		std Y+4,r24
 1338 062c 8C81      		ldd r24,Y+4
 1339 062e 8D83      		std Y+5,r24
 1340               	.LBB100:
 1341               	.LBB101:
 1342               	.LBB102:
 1343               	.LBB103:
 1344               	.LBB104:
 1345               	.LBB105:
 179:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1346               		.loc 5 179 0
 1347 0630 8D81      		ldd r24,Y+5
 1348 0632 8695      		lsr r24
 1349 0634 8695      		lsr r24
 1350 0636 8695      		lsr r24
 1351 0638 8E83      		std Y+6,r24
 1352               	.LBB106:
 1353               	.LBB107:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1354               		.loc 5 170 0
 1355 063a 8E81      		ldd r24,Y+6
 1356 063c 282F      		mov r18,r24
 1357 063e 30E0      		ldi r19,0
 1358 0640 C901      		movw r24,r18
 1359 0642 880F      		lsl r24
 1360 0644 991F      		rol r25
 1361 0646 820F      		add r24,r18
 1362 0648 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1363               		.loc 5 169 0
 1364 064a 8096      		adiw r24,32
 1365               	.LBE107:
 1366               	.LBE106:
 1367               	.LBE105:
 1368               	.LBE104:
 290:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 291:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 292:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 293:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 294:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 295:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Set port multiple pins level to high or low.
 296:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 297:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: mask Pin mask of pins to configure.
 298:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: level high/low
 299:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 300:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_set_port_level(ioport_port_t port,
 301:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_mask_t mask, ioport_port_mask_t level)
 302:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 303:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 304:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 305:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	if (level) {
 306:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA |= mask;
 307:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	} else {
 308:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base->PORTDATA &= ~mask;
 309:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	}
 310:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 311:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 312:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 313:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Get pin level of pin.
 314:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 315:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \return: level high/low
 316:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 317:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static bool arch_ioport_get_pin_level(ioport_pin_t pin)
 318:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 319:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 320:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return base->PINCRL & arch_ioport_pin_to_mask(pin);
 321:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 322:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 323:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 324:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : Get multiple pins level of single port.
 325:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param port GPIO port to configure  e.g. IOPORT_PORTB
 326:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param mask Pin mask of pins to read data.
 327:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \return: 8 bit value based on level voltage on pins.
 328:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 329:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static ioport_port_mask_t arch_ioport_get_port_level(
 330:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		ioport_port_t port, ioport_port_mask_t mask)
 331:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 332:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_port_to_base(port);
 333:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 334:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	return (base->PINCRL & mask);
 335:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 336:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 337:../../../platform/common/services/ioport/mega_rf/ioport.h **** /**
 338:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \brief : To toggle the pin
 339:../../../platform/common/services/ioport/mega_rf/ioport.h ****  * \param: pin. the pin number defined by IOPORT_CREATE_PIN
 340:../../../platform/common/services/ioport/mega_rf/ioport.h ****  */
 341:../../../platform/common/services/ioport/mega_rf/ioport.h **** __always_inline static void arch_ioport_toggle_pin_level(ioport_pin_t pin)
 342:../../../platform/common/services/ioport/mega_rf/ioport.h **** {
 343:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	PORT_t *base = arch_ioport_pin_to_base(pin);
 1369               		.loc 5 343 0
 1370 064c 9887      		std Y+8,r25
 1371 064e 8F83      		std Y+7,r24
 1372 0650 8C81      		ldd r24,Y+4
 1373 0652 8987      		std Y+9,r24
 1374               	.LBB108:
 1375               	.LBB109:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1376               		.loc 5 189 0
 1377 0654 8985      		ldd r24,Y+9
 1378 0656 882F      		mov r24,r24
 1379 0658 90E0      		ldi r25,0
 1380 065a 9C01      		movw r18,r24
 1381 065c 2770      		andi r18,7
 1382 065e 3327      		clr r19
 1383 0660 81E0      		ldi r24,lo8(1)
 1384 0662 90E0      		ldi r25,0
 1385 0664 00C0      		rjmp 2f
 1386               		1:
 1387 0666 880F      		lsl r24
 1388 0668 991F      		rol r25
 1389               		2:
 1390 066a 2A95      		dec r18
 1391 066c 02F4      		brpl 1b
 1392 066e 282F      		mov r18,r24
 1393               	.LBE109:
 1394               	.LBE108:
 344:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 345:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	base->PINCRL = arch_ioport_pin_to_mask(pin);
 1395               		.loc 5 345 0
 1396 0670 8F81      		ldd r24,Y+7
 1397 0672 9885      		ldd r25,Y+8
 1398 0674 FC01      		movw r30,r24
 1399 0676 2083      		st Z,r18
 1400               	.LBE103:
 1401               	.LBE102:
 1402               	.LBE101:
 1403               	.LBE100:
 223:ServerBASIC.c **** #if (LED_COUNT > 0)
 224:ServerBASIC.c **** 	LED_Toggle(LED_BLINK);
 225:ServerBASIC.c **** 	//LED_Off(LED_DATA);
 226:ServerBASIC.c **** #endif
 227:ServerBASIC.c **** 	energy_receive_statistics(ind);
 1404               		.loc 4 227 0
 1405 0678 8A85      		ldd r24,Y+10
 1406 067a 9B85      		ldd r25,Y+11
 1407 067c 0E94 0000 		call energy_receive_statistics
 228:ServerBASIC.c **** 	solver_received_data_frame(ind);
 1408               		.loc 4 228 0
 1409 0680 8A85      		ldd r24,Y+10
 1410 0682 9B85      		ldd r25,Y+11
 1411 0684 0E94 0000 		call solver_received_data_frame
 229:ServerBASIC.c **** 
 230:ServerBASIC.c **** 	AppMessageFrame_t*	frame_struct	= (AppMessageFrame_t*) ind->data;
 1412               		.loc 4 230 0
 1413 0688 8A85      		ldd r24,Y+10
 1414 068a 9B85      		ldd r25,Y+11
 1415 068c FC01      		movw r30,r24
 1416 068e 8781      		ldd r24,Z+7
 1417 0690 9085      		ldd r25,Z+8
 1418 0692 9A83      		std Y+2,r25
 1419 0694 8983      		std Y+1,r24
 231:ServerBASIC.c **** 
 232:ServerBASIC.c **** 	if(frame_struct->frameType == MSG_STATE_CONNECTION)
 1420               		.loc 4 232 0
 1421 0696 8981      		ldd r24,Y+1
 1422 0698 9A81      		ldd r25,Y+2
 1423 069a FC01      		movw r30,r24
 1424 069c 8081      		ld r24,Z
 1425 069e 8330      		cpi r24,lo8(3)
 1426 06a0 01F4      		brne .L41
 233:ServerBASIC.c **** 	{
 234:ServerBASIC.c **** #if (APP_COORDINATOR)
 235:ServerBASIC.c **** 		// No coordenador, responder ao pedido de conexo.
 236:ServerBASIC.c **** 		msgReqConnection.dstAddr = ind->srcAddr;
 1427               		.loc 4 236 0
 1428 06a2 8A85      		ldd r24,Y+10
 1429 06a4 9B85      		ldd r25,Y+11
 1430 06a6 FC01      		movw r30,r24
 1431 06a8 8081      		ld r24,Z
 1432 06aa 9181      		ldd r25,Z+1
 1433 06ac 9093 0000 		sts msgReqConnection+5+1,r25
 1434 06b0 8093 0000 		sts msgReqConnection+5,r24
 237:ServerBASIC.c **** 		NWK_DataReq(&msgReqConnection);
 1435               		.loc 4 237 0
 1436 06b4 80E0      		ldi r24,lo8(msgReqConnection)
 1437 06b6 90E0      		ldi r25,hi8(msgReqConnection)
 1438 06b8 0E94 0000 		call NWK_DataReq
 1439               	.L41:
 238:ServerBASIC.c **** #else
 239:ServerBASIC.c **** 		// No cliente, indicao de conexo aceita e que os dados podem ser enviados.
 240:ServerBASIC.c **** 		connected				= true;
 241:ServerBASIC.c **** #endif
 242:ServerBASIC.c **** 	}
 243:ServerBASIC.c **** 
 244:ServerBASIC.c **** 	return true;
 1440               		.loc 4 244 0
 1441 06bc 81E0      		ldi r24,lo8(1)
 1442               	/* epilogue start */
 245:ServerBASIC.c **** }
 1443               		.loc 4 245 0
 1444 06be 2B96      		adiw r28,11
 1445 06c0 0FB6      		in __tmp_reg__,__SREG__
 1446 06c2 F894      		cli
 1447 06c4 DEBF      		out __SP_H__,r29
 1448 06c6 0FBE      		out __SREG__,__tmp_reg__
 1449 06c8 CDBF      		out __SP_L__,r28
 1450 06ca DF91      		pop r29
 1451 06cc CF91      		pop r28
 1452 06ce 0895      		ret
 1453               		.cfi_endproc
 1454               	.LFE137:
 1457               	appInit:
 1458               	.LFB138:
 246:ServerBASIC.c **** static void appInit(void)
 247:ServerBASIC.c **** {
 1459               		.loc 4 247 0
 1460               		.cfi_startproc
 1461 06d0 CF93      		push r28
 1462               	.LCFI49:
 1463               		.cfi_def_cfa_offset 3
 1464               		.cfi_offset 28, -2
 1465 06d2 DF93      		push r29
 1466               	.LCFI50:
 1467               		.cfi_def_cfa_offset 4
 1468               		.cfi_offset 29, -3
 1469 06d4 CDB7      		in r28,__SP_L__
 1470 06d6 DEB7      		in r29,__SP_H__
 1471               	.LCFI51:
 1472               		.cfi_def_cfa_register 28
 1473 06d8 2997      		sbiw r28,9
 1474               	.LCFI52:
 1475               		.cfi_def_cfa_offset 13
 1476 06da 0FB6      		in __tmp_reg__,__SREG__
 1477 06dc F894      		cli
 1478 06de DEBF      		out __SP_H__,r29
 1479 06e0 0FBE      		out __SREG__,__tmp_reg__
 1480 06e2 CDBF      		out __SP_L__,r28
 1481               	/* prologue: function */
 1482               	/* frame size = 9 */
 1483               	/* stack size = 11 */
 1484               	.L__stack_usage = 11
 248:ServerBASIC.c **** 	NWK_SetAddr(APP_ADDR);
 1485               		.loc 4 248 0
 1486 06e4 80E0      		ldi r24,0
 1487 06e6 90E0      		ldi r25,0
 1488 06e8 0E94 0000 		call NWK_SetAddr
 249:ServerBASIC.c **** 	NWK_SetPanId(APP_PANID);
 1489               		.loc 4 249 0
 1490 06ec 8EEF      		ldi r24,lo8(-2)
 1491 06ee 9AEC      		ldi r25,lo8(-54)
 1492 06f0 0E94 0000 		call NWK_SetPanId
 250:ServerBASIC.c **** 	PHY_SetChannel(APP_CHANNEL);
 1493               		.loc 4 250 0
 1494 06f4 8FE0      		ldi r24,lo8(15)
 1495 06f6 0E94 0000 		call PHY_SetChannel
 251:ServerBASIC.c **** 	PHY_SetRxState(true);
 1496               		.loc 4 251 0
 1497 06fa 81E0      		ldi r24,lo8(1)
 1498 06fc 0E94 0000 		call PHY_SetRxState
 1499 0700 83E2      		ldi r24,lo8(35)
 1500 0702 8983      		std Y+1,r24
 1501 0704 1A82      		std Y+2,__zero_reg__
 1502 0706 8981      		ldd r24,Y+1
 1503 0708 8B83      		std Y+3,r24
 1504 070a 8A81      		ldd r24,Y+2
 1505 070c 8C83      		std Y+4,r24
 1506               	.LBB110:
 1507               	.LBB111:
 1508               	.LBB112:
 1509               	.LBB113:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1510               		.loc 5 281 0
 1511 070e 8B81      		ldd r24,Y+3
 1512 0710 8695      		lsr r24
 1513 0712 8695      		lsr r24
 1514 0714 8695      		lsr r24
 1515 0716 8D83      		std Y+5,r24
 1516               	.LBB114:
 1517               	.LBB115:
 170:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1518               		.loc 5 170 0
 1519 0718 8D81      		ldd r24,Y+5
 1520 071a 282F      		mov r18,r24
 1521 071c 30E0      		ldi r19,0
 1522 071e C901      		movw r24,r18
 1523 0720 880F      		lsl r24
 1524 0722 991F      		rol r25
 1525 0724 820F      		add r24,r18
 1526 0726 931F      		adc r25,r19
 169:../../../platform/common/services/ioport/mega_rf/ioport.h **** 	       (port * IOPORT_PORT_OFFSET)));
 1527               		.loc 5 169 0
 1528 0728 8096      		adiw r24,32
 1529               	.LBE115:
 1530               	.LBE114:
 281:../../../platform/common/services/ioport/mega_rf/ioport.h **** 
 1531               		.loc 5 281 0
 1532 072a 9F83      		std Y+7,r25
 1533 072c 8E83      		std Y+6,r24
 283:../../../platform/common/services/ioport/mega_rf/ioport.h **** 		base_add->PORTDATA
 1534               		.loc 5 283 0
 1535 072e 8C81      		ldd r24,Y+4
 1536 0730 8823      		tst r24
 1537 0732 01F0      		breq .L45
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1538               		.loc 5 285 0
 1539 0734 8E81      		ldd r24,Y+6
 1540 0736 9F81      		ldd r25,Y+7
 1541 0738 FC01      		movw r30,r24
 1542 073a 4281      		ldd r20,Z+2
 1543 073c 8B81      		ldd r24,Y+3
 1544 073e 8887      		std Y+8,r24
 1545               	.LBB116:
 1546               	.LBB117:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1547               		.loc 5 189 0
 1548 0740 8885      		ldd r24,Y+8
 1549 0742 882F      		mov r24,r24
 1550 0744 90E0      		ldi r25,0
 1551 0746 9C01      		movw r18,r24
 1552 0748 2770      		andi r18,7
 1553 074a 3327      		clr r19
 1554 074c 81E0      		ldi r24,lo8(1)
 1555 074e 90E0      		ldi r25,0
 1556 0750 00C0      		rjmp 2f
 1557               		1:
 1558 0752 880F      		lsl r24
 1559 0754 991F      		rol r25
 1560               		2:
 1561 0756 2A95      		dec r18
 1562 0758 02F4      		brpl 1b
 1563               	.LBE117:
 1564               	.LBE116:
 285:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin));
 1565               		.loc 5 285 0
 1566 075a 242F      		mov r18,r20
 1567 075c 282B      		or r18,r24
 1568 075e 8E81      		ldd r24,Y+6
 1569 0760 9F81      		ldd r25,Y+7
 1570 0762 FC01      		movw r30,r24
 1571 0764 2283      		std Z+2,r18
 1572 0766 00C0      		rjmp .L47
 1573               	.L45:
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 1574               		.loc 5 289 0
 1575 0768 8E81      		ldd r24,Y+6
 1576 076a 9F81      		ldd r25,Y+7
 1577 076c FC01      		movw r30,r24
 1578 076e 8281      		ldd r24,Z+2
 1579 0770 482F      		mov r20,r24
 1580 0772 8B81      		ldd r24,Y+3
 1581 0774 8987      		std Y+9,r24
 1582               	.LBB118:
 1583               	.LBB119:
 189:../../../platform/common/services/ioport/mega_rf/ioport.h **** }
 1584               		.loc 5 189 0
 1585 0776 8985      		ldd r24,Y+9
 1586 0778 882F      		mov r24,r24
 1587 077a 90E0      		ldi r25,0
 1588 077c 9C01      		movw r18,r24
 1589 077e 2770      		andi r18,7
 1590 0780 3327      		clr r19
 1591 0782 81E0      		ldi r24,lo8(1)
 1592 0784 90E0      		ldi r25,0
 1593 0786 00C0      		rjmp 2f
 1594               		1:
 1595 0788 880F      		lsl r24
 1596 078a 991F      		rol r25
 1597               		2:
 1598 078c 2A95      		dec r18
 1599 078e 02F4      		brpl 1b
 1600               	.LBE119:
 1601               	.LBE118:
 289:../../../platform/common/services/ioport/mega_rf/ioport.h **** 					(pin)));
 1602               		.loc 5 289 0
 1603 0790 8095      		com r24
 1604 0792 8423      		and r24,r20
 1605 0794 282F      		mov r18,r24
 1606 0796 8E81      		ldd r24,Y+6
 1607 0798 9F81      		ldd r25,Y+7
 1608 079a FC01      		movw r30,r24
 1609 079c 2283      		std Z+2,r18
 1610               	.L47:
 1611               	.LBE113:
 1612               	.LBE112:
 1613               	.LBE111:
 1614               	.LBE110:
 252:ServerBASIC.c **** 
 253:ServerBASIC.c **** #if (LED_COUNT > 0)
 254:ServerBASIC.c **** 	LED_On(LED_NETWORK);
 255:ServerBASIC.c **** #endif
 256:ServerBASIC.c **** 
 257:ServerBASIC.c **** #ifdef PHY_ENABLE_RANDOM_NUMBER_GENERATOR
 258:ServerBASIC.c **** 	srand(PHY_RandomReq());
 1615               		.loc 4 258 0
 1616 079e 0E94 0000 		call PHY_RandomReq
 1617 07a2 0E94 0000 		call srand
 259:ServerBASIC.c **** #endif
 260:ServerBASIC.c **** 
 261:ServerBASIC.c **** 	tmrBlinkData.interval		= 50;
 1618               		.loc 4 261 0
 1619 07a6 82E3      		ldi r24,lo8(50)
 1620 07a8 90E0      		ldi r25,0
 1621 07aa A0E0      		ldi r26,0
 1622 07ac B0E0      		ldi r27,0
 1623 07ae 8093 0000 		sts tmrBlinkData+6,r24
 1624 07b2 9093 0000 		sts tmrBlinkData+6+1,r25
 1625 07b6 A093 0000 		sts tmrBlinkData+6+2,r26
 1626 07ba B093 0000 		sts tmrBlinkData+6+3,r27
 262:ServerBASIC.c **** 	tmrBlinkData.mode			= SYS_TIMER_INTERVAL_MODE;
 1627               		.loc 4 262 0
 1628 07be 1092 0000 		sts tmrBlinkData+10,__zero_reg__
 263:ServerBASIC.c **** 	tmrBlinkData.handler		= tmrBlinkDataHandler;
 1629               		.loc 4 263 0
 1630 07c2 80E0      		ldi r24,lo8(gs(tmrBlinkDataHandler))
 1631 07c4 90E0      		ldi r25,hi8(gs(tmrBlinkDataHandler))
 1632 07c6 9093 0000 		sts tmrBlinkData+11+1,r25
 1633 07ca 8093 0000 		sts tmrBlinkData+11,r24
 264:ServerBASIC.c **** 
 265:ServerBASIC.c **** 	msgFrameConnection.frameType = MSG_STATE_CONNECTION;
 1634               		.loc 4 265 0
 1635 07ce 83E0      		ldi r24,lo8(3)
 1636 07d0 8093 0000 		sts msgFrameConnection,r24
 266:ServerBASIC.c **** 
 267:ServerBASIC.c **** 	msgReqConnection.dstAddr	= BROADCAST;
 1637               		.loc 4 267 0
 1638 07d4 8FEF      		ldi r24,lo8(-1)
 1639 07d6 9FEF      		ldi r25,lo8(-1)
 1640 07d8 9093 0000 		sts msgReqConnection+5+1,r25
 1641 07dc 8093 0000 		sts msgReqConnection+5,r24
 268:ServerBASIC.c **** 	msgReqConnection.dstEndpoint = APP_DATA_ENDPOINT;
 1642               		.loc 4 268 0
 1643 07e0 81E0      		ldi r24,lo8(1)
 1644 07e2 8093 0000 		sts msgReqConnection+7,r24
 269:ServerBASIC.c **** 	msgReqConnection.srcEndpoint = APP_DATA_ENDPOINT;
 1645               		.loc 4 269 0
 1646 07e6 81E0      		ldi r24,lo8(1)
 1647 07e8 8093 0000 		sts msgReqConnection+8,r24
 270:ServerBASIC.c **** 	msgReqConnection.options	= NWK_OPT_LINK_LOCAL;
 1648               		.loc 4 270 0
 1649 07ec 88E0      		ldi r24,lo8(8)
 1650 07ee 8093 0000 		sts msgReqConnection+9,r24
 271:ServerBASIC.c **** 	msgReqConnection.data		= (uint8_t *)&msgFrameConnection;
 1651               		.loc 4 271 0
 1652 07f2 80E0      		ldi r24,lo8(msgFrameConnection)
 1653 07f4 90E0      		ldi r25,hi8(msgFrameConnection)
 1654 07f6 9093 0000 		sts msgReqConnection+12+1,r25
 1655 07fa 8093 0000 		sts msgReqConnection+12,r24
 272:ServerBASIC.c **** 	msgReqConnection.size		= sizeof(MsgState_t);
 1656               		.loc 4 272 0
 1657 07fe 81E0      		ldi r24,lo8(1)
 1658 0800 8093 0000 		sts msgReqConnection+14,r24
 273:ServerBASIC.c **** 	msgReqConnection.confirm	= NULL;
 1659               		.loc 4 273 0
 1660 0804 1092 0000 		sts msgReqConnection+15+1,__zero_reg__
 1661 0808 1092 0000 		sts msgReqConnection+15,__zero_reg__
 274:ServerBASIC.c **** 
 275:ServerBASIC.c **** #if (APP_COORDINATOR)
 276:ServerBASIC.c **** 	server_turn					= 1;
 1662               		.loc 4 276 0
 1663 080c 81E0      		ldi r24,lo8(1)
 1664 080e 90E0      		ldi r25,0
 1665 0810 9093 0000 		sts server_turn+1,r25
 1666 0814 8093 0000 		sts server_turn,r24
 277:ServerBASIC.c **** 
 278:ServerBASIC.c **** 	NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 1667               		.loc 4 278 0
 1668 0818 60E0      		ldi r22,lo8(gs(appDataInd))
 1669 081a 70E0      		ldi r23,hi8(gs(appDataInd))
 1670 081c 81E0      		ldi r24,lo8(1)
 1671 081e 0E94 0000 		call NWK_OpenEndpoint
 279:ServerBASIC.c **** 
 280:ServerBASIC.c **** 	msgFrame.frameType			= MSG_STATE_BEACON;
 1672               		.loc 4 280 0
 1673 0822 1092 0000 		sts msgFrame,__zero_reg__
 281:ServerBASIC.c **** 
 282:ServerBASIC.c **** 	msgReq.dstAddr				= BROADCAST;
 1674               		.loc 4 282 0
 1675 0826 8FEF      		ldi r24,lo8(-1)
 1676 0828 9FEF      		ldi r25,lo8(-1)
 1677 082a 9093 0000 		sts msgReq+5+1,r25
 1678 082e 8093 0000 		sts msgReq+5,r24
 283:ServerBASIC.c **** 	msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1679               		.loc 4 283 0
 1680 0832 1092 0000 		sts msgReq+7,__zero_reg__
 284:ServerBASIC.c **** 	msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1681               		.loc 4 284 0
 1682 0836 1092 0000 		sts msgReq+8,__zero_reg__
 285:ServerBASIC.c **** 	msgReq.options				= NWK_OPT_BEACON;
 1683               		.loc 4 285 0
 1684 083a 80E2      		ldi r24,lo8(32)
 1685 083c 8093 0000 		sts msgReq+9,r24
 286:ServerBASIC.c **** 	msgReq.data					= (uint8_t *)&msgFrame;
 1686               		.loc 4 286 0
 1687 0840 80E0      		ldi r24,lo8(msgFrame)
 1688 0842 90E0      		ldi r25,hi8(msgFrame)
 1689 0844 9093 0000 		sts msgReq+12+1,r25
 1690 0848 8093 0000 		sts msgReq+12,r24
 287:ServerBASIC.c **** 	msgReq.size					= sizeof(MsgState_t) + sizeof(AppMessageBeacon_t);
 1691               		.loc 4 287 0
 1692 084c 81E2      		ldi r24,lo8(33)
 1693 084e 8093 0000 		sts msgReq+14,r24
 288:ServerBASIC.c **** 	msgReq.confirm				= NULL;
 1694               		.loc 4 288 0
 1695 0852 1092 0000 		sts msgReq+15+1,__zero_reg__
 1696 0856 1092 0000 		sts msgReq+15,__zero_reg__
 289:ServerBASIC.c **** 
 290:ServerBASIC.c **** #if (MASTER_MACSC == 1)
 291:ServerBASIC.c **** 	/*
 292:ServerBASIC.c **** 	 * Configure interrupts callback functions
 293:ServerBASIC.c **** 	 * overflow interrupt, compare 1,2,3 interrupts
 294:ServerBASIC.c **** 	 */
 295:ServerBASIC.c **** 	macsc_set_cmp1_int_cb(tdma_server_beacon);
 1697               		.loc 4 295 0
 1698 085a 80E0      		ldi r24,lo8(gs(tdma_server_beacon))
 1699 085c 90E0      		ldi r25,hi8(gs(tdma_server_beacon))
 1700 085e 0E94 0000 		call macsc_set_cmp1_int_cb
 296:ServerBASIC.c **** 	macsc_set_cmp2_int_cb(tdma_server_statistics);
 1701               		.loc 4 296 0
 1702 0862 80E0      		ldi r24,lo8(gs(tdma_server_statistics))
 1703 0864 90E0      		ldi r25,hi8(gs(tdma_server_statistics))
 1704 0866 0E94 0000 		call macsc_set_cmp2_int_cb
 297:ServerBASIC.c **** 
 298:ServerBASIC.c **** 	/*
 299:ServerBASIC.c **** 	 * Configure MACSC to generate compare interrupts from channels 1,2,3
 300:ServerBASIC.c **** 	 * Set compare mode to absolute, set compare value.
 301:ServerBASIC.c **** 	 */
 302:ServerBASIC.c **** 	macsc_enable_manual_bts();
 1705               		.loc 4 302 0
 1706 086a 0E94 0000 		call macsc_enable_manual_bts
 303:ServerBASIC.c **** 	macsc_enable_cmp_int(MACSC_CC1);
 1707               		.loc 4 303 0
 1708 086e 81E0      		ldi r24,lo8(1)
 1709 0870 0E94 0000 		call macsc_enable_cmp_int
 304:ServerBASIC.c **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, BEACON_INTERVAL_BI, MACSC_CC1);
 1710               		.loc 4 304 0
 1711 0874 21E0      		ldi r18,lo8(1)
 1712 0876 40E0      		ldi r20,0
 1713 0878 50EC      		ldi r21,lo8(-64)
 1714 087a 63E0      		ldi r22,lo8(3)
 1715 087c 70E0      		ldi r23,0
 1716 087e 81E0      		ldi r24,lo8(1)
 1717 0880 0E94 0000 		call macsc_use_cmp
 305:ServerBASIC.c **** 	macsc_enable_cmp_int(MACSC_CC2);
 1718               		.loc 4 305 0
 1719 0884 82E0      		ldi r24,lo8(2)
 1720 0886 0E94 0000 		call macsc_enable_cmp_int
 306:ServerBASIC.c **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, (SUPERFRAME_DURATION_SD * 3), MACSC_CC2);
 1721               		.loc 4 306 0
 1722 088a 22E0      		ldi r18,lo8(2)
 1723 088c 40E8      		ldi r20,lo8(-128)
 1724 088e 52E3      		ldi r21,lo8(50)
 1725 0890 62E0      		ldi r22,lo8(2)
 1726 0892 70E0      		ldi r23,0
 1727 0894 81E0      		ldi r24,lo8(1)
 1728 0896 0E94 0000 		call macsc_use_cmp
 307:ServerBASIC.c **** #else
 308:ServerBASIC.c **** 	tmrBeaconInterval.interval	= (BEACON_INTERVAL_BI * SYMBOL_TIME) * 1000;
 309:ServerBASIC.c **** 	tmrBeaconInterval.mode		= SYS_TIMER_PERIODIC_MODE;
 310:ServerBASIC.c **** 	tmrBeaconInterval.handler	= tmr_tdma_server_beacon;
 311:ServerBASIC.c **** 
 312:ServerBASIC.c **** 	tmrComputeData.interval		= ((SUPERFRAME_DURATION_SD * 3) * SYMBOL_TIME) * 1000;
 313:ServerBASIC.c **** 	tmrComputeData.mode			= SYS_TIMER_INTERVAL_MODE;
 314:ServerBASIC.c **** 	tmrComputeData.handler		= tmr_tdma_server_statistics;
 315:ServerBASIC.c **** 	
 316:ServerBASIC.c **** 	SYS_TimerStart(&tmrBeaconInterval);
 317:ServerBASIC.c **** #endif
 318:ServerBASIC.c **** #else
 319:ServerBASIC.c **** 	connected					= false;
 320:ServerBASIC.c **** 	i_am_collab_dev				= false;
 321:ServerBASIC.c **** 	i_am_collab_slot			= 0;
 322:ServerBASIC.c **** 	i_am_collab_turn			= 0;
 323:ServerBASIC.c **** 
 324:ServerBASIC.c **** 	NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 325:ServerBASIC.c **** 	NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 326:ServerBASIC.c **** 
 327:ServerBASIC.c **** 	msgFrame.frameType			= MSG_STATE_DATA;
 328:ServerBASIC.c **** 
 329:ServerBASIC.c **** 	msgReq.dstAddr				= BROADCAST;
 330:ServerBASIC.c **** 	msgReq.dstEndpoint			= APP_DATA_ENDPOINT;
 331:ServerBASIC.c **** 	msgReq.srcEndpoint			= APP_DATA_ENDPOINT;
 332:ServerBASIC.c **** 	msgReq.options				= NWK_OPT_LINK_LOCAL;
 333:ServerBASIC.c **** 	msgReq.data					= (uint8_t *)&msgFrame;
 334:ServerBASIC.c **** 	msgReq.size					= sizeof(MsgState_t) + sizeof(AppMessageData_t);
 335:ServerBASIC.c **** 	msgReq.confirm				= tdma_job_conf;
 336:ServerBASIC.c **** 
 337:ServerBASIC.c **** 	/*
 338:ServerBASIC.c **** 	 * Configure interrupts callback functions
 339:ServerBASIC.c **** 	 * overflow interrupt, compare 1,2,3 interrupts
 340:ServerBASIC.c **** 	 */
 341:ServerBASIC.c **** 	macsc_set_cmp1_int_cb(tdma_client_turn);		// Wake-up, wait beacon (synchronize)
 342:ServerBASIC.c **** 
 343:ServerBASIC.c **** 	/*
 344:ServerBASIC.c **** 	 * Configure MACSC to generate compare interrupts from channels 1,2,3
 345:ServerBASIC.c **** 	 * Set compare mode to absolute,set compare value.
 346:ServerBASIC.c **** 	 */
 347:ServerBASIC.c **** 	macsc_enable_auto_ts();
 348:ServerBASIC.c **** 	macsc_enable_cmp_int(MACSC_CC1);
 349:ServerBASIC.c **** 	macsc_use_cmp(MACSC_RELATIVE_CMP, BEACON_INTERVAL_BI - TDMA_FIRST_SLOT, MACSC_CC1);
 350:ServerBASIC.c **** #endif
 351:ServerBASIC.c **** 
 352:ServerBASIC.c **** 	 // Set up Timer
 353:ServerBASIC.c ****   tmrSendData.interval = 2500;
 1729               		.loc 4 353 0
 1730 089a 84EC      		ldi r24,lo8(-60)
 1731 089c 99E0      		ldi r25,lo8(9)
 1732 089e A0E0      		ldi r26,0
 1733 08a0 B0E0      		ldi r27,0
 1734 08a2 8093 0000 		sts tmrSendData+6,r24
 1735 08a6 9093 0000 		sts tmrSendData+6+1,r25
 1736 08aa A093 0000 		sts tmrSendData+6+2,r26
 1737 08ae B093 0000 		sts tmrSendData+6+3,r27
 354:ServerBASIC.c ****   tmrSendData.mode = SYS_TIMER_PERIODIC_MODE;
 1738               		.loc 4 354 0
 1739 08b2 81E0      		ldi r24,lo8(1)
 1740 08b4 8093 0000 		sts tmrSendData+10,r24
 355:ServerBASIC.c ****   tmrSendData.handler = tmrSendDataHandler;
 1741               		.loc 4 355 0
 1742 08b8 80E0      		ldi r24,lo8(gs(tmrSendDataHandler))
 1743 08ba 90E0      		ldi r25,hi8(gs(tmrSendDataHandler))
 1744 08bc 9093 0000 		sts tmrSendData+11+1,r25
 1745 08c0 8093 0000 		sts tmrSendData+11,r24
 356:ServerBASIC.c ****   SYS_TimerStart(&tmrSendData);
 1746               		.loc 4 356 0
 1747 08c4 80E0      		ldi r24,lo8(tmrSendData)
 1748 08c6 90E0      		ldi r25,hi8(tmrSendData)
 1749 08c8 0E94 0000 		call SYS_TimerStart
 357:ServerBASIC.c **** 
 358:ServerBASIC.c **** 
 359:ServerBASIC.c **** }
 1750               		.loc 4 359 0
 1751 08cc 0000      		nop
 1752               	/* epilogue start */
 1753 08ce 2996      		adiw r28,9
 1754 08d0 0FB6      		in __tmp_reg__,__SREG__
 1755 08d2 F894      		cli
 1756 08d4 DEBF      		out __SP_H__,r29
 1757 08d6 0FBE      		out __SREG__,__tmp_reg__
 1758 08d8 CDBF      		out __SP_L__,r28
 1759 08da DF91      		pop r29
 1760 08dc CF91      		pop r28
 1761 08de 0895      		ret
 1762               		.cfi_endproc
 1763               	.LFE138:
 1766               	APP_TaskHandler:
 1767               	.LFB139:
 360:ServerBASIC.c **** /*************************************************************************//**
 361:ServerBASIC.c **** *****************************************************************************/
 362:ServerBASIC.c **** static void APP_TaskHandler(void)
 363:ServerBASIC.c **** {
 1768               		.loc 4 363 0
 1769               		.cfi_startproc
 1770 08e0 CF93      		push r28
 1771               	.LCFI53:
 1772               		.cfi_def_cfa_offset 3
 1773               		.cfi_offset 28, -2
 1774 08e2 DF93      		push r29
 1775               	.LCFI54:
 1776               		.cfi_def_cfa_offset 4
 1777               		.cfi_offset 29, -3
 1778 08e4 CDB7      		in r28,__SP_L__
 1779 08e6 DEB7      		in r29,__SP_H__
 1780               	.LCFI55:
 1781               		.cfi_def_cfa_register 28
 1782               	/* prologue: function */
 1783               	/* frame size = 0 */
 1784               	/* stack size = 2 */
 1785               	.L__stack_usage = 2
 364:ServerBASIC.c **** 	switch (appState)
 1786               		.loc 4 364 0
 1787 08e8 8091 0000 		lds r24,appState
 1788 08ec 882F      		mov r24,r24
 1789 08ee 90E0      		ldi r25,0
 1790 08f0 8330      		cpi r24,3
 1791 08f2 9105      		cpc r25,__zero_reg__
 1792 08f4 01F0      		breq .L51
 1793 08f6 8F30      		cpi r24,15
 1794 08f8 9105      		cpc r25,__zero_reg__
 1795 08fa 01F0      		breq .L52
 1796 08fc 892B      		or r24,r25
 1797 08fe 01F0      		breq .L53
 365:ServerBASIC.c **** 	{
 366:ServerBASIC.c **** #if (APP_COORDINATOR)
 367:ServerBASIC.c **** 		case APP_STATE_SERVER_STATISTICS:
 368:ServerBASIC.c **** 		{
 369:ServerBASIC.c **** 			server_statistics();
 370:ServerBASIC.c **** 			break;
 371:ServerBASIC.c **** 		}
 372:ServerBASIC.c **** #endif
 373:ServerBASIC.c **** 		case APP_STATE_SEND:
 374:ServerBASIC.c **** 		{
 375:ServerBASIC.c **** 			appSendData();
 376:ServerBASIC.c **** 			appState			= APP_STATE_SEND_BUSY_DATA;
 377:ServerBASIC.c **** 			break;
 378:ServerBASIC.c **** 		}
 379:ServerBASIC.c **** #if (APP_ENDDEVICE)
 380:ServerBASIC.c **** 		case APP_STATE_WAKEUP_AND_WAIT:
 381:ServerBASIC.c **** 		{
 382:ServerBASIC.c **** 			NWK_WakeupReq();
 383:ServerBASIC.c **** #if (LED_COUNT > 0)
 384:ServerBASIC.c **** 	LED_On(LED_NETWORK);
 385:ServerBASIC.c **** #endif
 386:ServerBASIC.c **** 			appState			= APP_STATE_IDLE;
 387:ServerBASIC.c **** 			break;
 388:ServerBASIC.c **** 		}
 389:ServerBASIC.c **** 		case APP_STATE_SEND_PREPARE:
 390:ServerBASIC.c **** 		{
 391:ServerBASIC.c **** 			appSendPrepare();
 392:ServerBASIC.c **** 			appState			= APP_STATE_SEND;
 393:ServerBASIC.c **** 			break;
 394:ServerBASIC.c **** 		}
 395:ServerBASIC.c **** 		case APP_STATE_SLEEP_PREPARE:
 396:ServerBASIC.c **** 		{
 397:ServerBASIC.c **** 			if(!NWK_Busy())
 398:ServerBASIC.c **** 			{
 399:ServerBASIC.c **** 				irqflags_t flags = cpu_irq_save();
 400:ServerBASIC.c **** 				NWK_SleepReq();
 401:ServerBASIC.c **** 				appState		= APP_STATE_SLEEP;
 402:ServerBASIC.c **** 				cpu_irq_restore(flags);
 403:ServerBASIC.c **** 			}
 404:ServerBASIC.c **** 			break;
 405:ServerBASIC.c **** 		}
 406:ServerBASIC.c **** 		case APP_STATE_SLEEP:
 407:ServerBASIC.c **** 		{
 408:ServerBASIC.c **** #if (LED_COUNT > 0)
 409:ServerBASIC.c **** 	LED_Off(LED_NETWORK);
 410:ServerBASIC.c **** 	LED_Off(LED_DATA);
 411:ServerBASIC.c **** 	LED_Off(LED_BLINK);
 412:ServerBASIC.c **** #endif
 413:ServerBASIC.c **** 			sleep_enable();
 414:ServerBASIC.c **** 			sleep_enter();
 415:ServerBASIC.c **** 			sleep_disable();
 416:ServerBASIC.c **** 			break;
 417:ServerBASIC.c **** 		}
 418:ServerBASIC.c **** #endif
 419:ServerBASIC.c **** 		case APP_STATE_INITIAL:
 420:ServerBASIC.c **** 		{
 421:ServerBASIC.c **** 			energy_init();
 422:ServerBASIC.c **** 			solver_init();
 423:ServerBASIC.c **** 			appInit();
 424:ServerBASIC.c **** 			appState			= APP_STATE_IDLE;
 425:ServerBASIC.c **** 			break;
 426:ServerBASIC.c **** 		}
 427:ServerBASIC.c **** 		default:
 428:ServerBASIC.c **** 		{
 429:ServerBASIC.c **** 			break;
 1798               		.loc 4 429 0
 1799 0900 00C0      		rjmp .L54
 1800               	.L52:
 369:ServerBASIC.c **** 			break;
 1801               		.loc 4 369 0
 1802 0902 0E94 0000 		call server_statistics
 370:ServerBASIC.c **** 		}
 1803               		.loc 4 370 0
 1804 0906 00C0      		rjmp .L54
 1805               	.L51:
 375:ServerBASIC.c **** 			appState			= APP_STATE_SEND_BUSY_DATA;
 1806               		.loc 4 375 0
 1807 0908 0E94 0000 		call appSendData
 376:ServerBASIC.c **** 			break;
 1808               		.loc 4 376 0
 1809 090c 85E0      		ldi r24,lo8(5)
 1810 090e 8093 0000 		sts appState,r24
 377:ServerBASIC.c **** 		}
 1811               		.loc 4 377 0
 1812 0912 00C0      		rjmp .L54
 1813               	.L53:
 421:ServerBASIC.c **** 			solver_init();
 1814               		.loc 4 421 0
 1815 0914 0E94 0000 		call energy_init
 422:ServerBASIC.c **** 			appInit();
 1816               		.loc 4 422 0
 1817 0918 0E94 0000 		call solver_init
 423:ServerBASIC.c **** 			appState			= APP_STATE_IDLE;
 1818               		.loc 4 423 0
 1819 091c 0E94 0000 		call appInit
 424:ServerBASIC.c **** 			break;
 1820               		.loc 4 424 0
 1821 0920 81E0      		ldi r24,lo8(1)
 1822 0922 8093 0000 		sts appState,r24
 425:ServerBASIC.c **** 		}
 1823               		.loc 4 425 0
 1824 0926 0000      		nop
 1825               	.L54:
 430:ServerBASIC.c **** 		}
 431:ServerBASIC.c **** 	}
 432:ServerBASIC.c **** }
 1826               		.loc 4 432 0
 1827 0928 0000      		nop
 1828               	/* epilogue start */
 1829 092a DF91      		pop r29
 1830 092c CF91      		pop r28
 1831 092e 0895      		ret
 1832               		.cfi_endproc
 1833               	.LFE139:
 1835               		.section	.rodata
 1836               	.LC0:
 1837 0074 00        		.byte	0
 1838 0075 C2        		.byte	-62
 1839 0076 01        		.byte	1
 1840 0077 00        		.byte	0
 1841 0078 03        		.byte	3
 1842 0079 00        		.byte	0
 1843 007a 00        		.byte	0
 1844               		.text
 1845               	.global	main
 1847               	main:
 1848               	.LFB140:
 433:ServerBASIC.c **** 
 434:ServerBASIC.c **** /*****************************************************************************
 435:ServerBASIC.c **** *****************************************************************************/
 436:ServerBASIC.c **** int main(void)
 437:ServerBASIC.c **** {
 1849               		.loc 4 437 0
 1850               		.cfi_startproc
 1851 0930 CF93      		push r28
 1852               	.LCFI56:
 1853               		.cfi_def_cfa_offset 3
 1854               		.cfi_offset 28, -2
 1855 0932 DF93      		push r29
 1856               	.LCFI57:
 1857               		.cfi_def_cfa_offset 4
 1858               		.cfi_offset 29, -3
 1859 0934 CDB7      		in r28,__SP_L__
 1860 0936 DEB7      		in r29,__SP_H__
 1861               	.LCFI58:
 1862               		.cfi_def_cfa_register 28
 1863 0938 2797      		sbiw r28,7
 1864               	.LCFI59:
 1865               		.cfi_def_cfa_offset 11
 1866 093a 0FB6      		in __tmp_reg__,__SREG__
 1867 093c F894      		cli
 1868 093e DEBF      		out __SP_H__,r29
 1869 0940 0FBE      		out __SREG__,__tmp_reg__
 1870 0942 CDBF      		out __SP_L__,r28
 1871               	/* prologue: function */
 1872               	/* frame size = 7 */
 1873               	/* stack size = 9 */
 1874               	.L__stack_usage = 9
 438:ServerBASIC.c **** 	sysclk_init();
 1875               		.loc 4 438 0
 1876 0944 0E94 0000 		call sysclk_init
 439:ServerBASIC.c **** 	board_init();
 1877               		.loc 4 439 0
 1878 0948 0E94 0000 		call board_init
 440:ServerBASIC.c **** 
 441:ServerBASIC.c **** 	SYS_Init();
 1879               		.loc 4 441 0
 1880 094c 0E94 0000 		call SYS_Init
 442:ServerBASIC.c **** 	sm_init();
 1881               		.loc 4 442 0
 1882 0950 0E94 0000 		call sm_init
 443:ServerBASIC.c **** 
 444:ServerBASIC.c **** 	// Initialize interrupt vector table support.
 445:ServerBASIC.c **** #if 0
 446:ServerBASIC.c **** 	irq_initialize_vectors();
 447:ServerBASIC.c **** #endif
 448:ServerBASIC.c **** 	cpu_irq_enable();
 1883               		.loc 4 448 0
 1884               	/* #APP */
 1885               	 ;  448 "ServerBASIC.c" 1
 1886 0954 7894      		sei
 1887               	 ;  0 "" 2
 449:ServerBASIC.c **** 
 450:ServerBASIC.c **** #if APP_COORDINATOR
 451:ServerBASIC.c **** #if 0
 452:ServerBASIC.c **** 	stdio_usb_init();
 453:ServerBASIC.c **** #else
 454:ServerBASIC.c **** 	const usart_serial_options_t usart_serial_options =
 1888               		.loc 4 454 0
 1889               	/* #NOAPP */
 1890 0956 27E0      		ldi r18,lo8(7)
 1891 0958 E0E0      		ldi r30,lo8(.LC0)
 1892 095a F0E0      		ldi r31,hi8(.LC0)
 1893 095c CE01      		movw r24,r28
 1894 095e 0196      		adiw r24,1
 1895 0960 DC01      		movw r26,r24
 1896               		0:
 1897 0962 0190      		ld r0,Z+
 1898 0964 0D92      		st X+,r0
 1899 0966 2A95      		dec r18
 1900 0968 01F4      		brne 0b
 455:ServerBASIC.c **** 	{
 456:ServerBASIC.c **** 		.baudrate     = USART_HOST_BAUDRATE,
 457:ServerBASIC.c **** 		.charlength   = USART_HOST_CHAR_LENGTH,
 458:ServerBASIC.c **** 		.paritytype   = USART_HOST_PARITY,
 459:ServerBASIC.c **** 		.stopbits     = USART_HOST_STOP_BITS
 460:ServerBASIC.c **** 	};
 461:ServerBASIC.c **** 
 462:ServerBASIC.c **** 	stdio_serial_init(USART_HOST, &usart_serial_options);
 1901               		.loc 4 462 0
 1902 096a CE01      		movw r24,r28
 1903 096c 0196      		adiw r24,1
 1904 096e BC01      		movw r22,r24
 1905 0970 80EC      		ldi r24,lo8(-64)
 1906 0972 90E0      		ldi r25,0
 1907 0974 0E94 0000 		call stdio_serial_init
 1908               	.L56:
 463:ServerBASIC.c **** #endif
 464:ServerBASIC.c **** #endif
 465:ServerBASIC.c **** 	for(;;)
 466:ServerBASIC.c **** 	{
 467:ServerBASIC.c **** 		SYS_TaskHandler();
 1909               		.loc 4 467 0 discriminator 1
 1910 0978 0E94 0000 		call SYS_TaskHandler
 468:ServerBASIC.c **** 		APP_TaskHandler();
 1911               		.loc 4 468 0 discriminator 1
 1912 097c 0E94 0000 		call APP_TaskHandler
 469:ServerBASIC.c **** 	}
 1913               		.loc 4 469 0 discriminator 1
 1914 0980 00C0      		rjmp .L56
 1915               		.cfi_endproc
 1916               	.LFE140:
 1918               	.Letext0:
 1919               		.file 6 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 1920               		.file 7 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 1921               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 1922               		.file 9 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 1923               		.file 10 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 1924               		.file 11 "Solver.h"
 1925               		.file 12 "../../../platform/mega_rf/utils/status_codes.h"
 1926               		.file 13 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
 1927               		.file 14 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerBASIC.c
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:2      *ABS*:0000003e __SP_H__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:3      *ABS*:0000003d __SP_L__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:4      *ABS*:0000003f __SREG__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:7      *ABS*:00000001 __zero_reg__
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:14     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:26     .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:38     .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:49     .text:00000000 usart_serial_init
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:144    .text:0000007c usart_serial_putchar
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:188    .text:000000a4 usart_serial_getchar
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:239    .text:000000da stdio_serial_init
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:310    .text:0000013c macsc_enable_manual_bts
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:363    .bss.appState:00000000 appState
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:368    .bss.tmrBlinkData:00000000 tmrBlinkData
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:373    .bss.msgReq:00000000 msgReq
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:378    .bss.msgFrame:00000000 msgFrame
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:383    .bss.msgReqConnection:00000000 msgReqConnection
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:388    .bss.msgFrameConnection:00000000 msgFrameConnection
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:393    .data.server_turn:00000000 server_turn
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:398    .bss.statistics_buffer:00000000 statistics_buffer
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:403    .bss.aux_buffer:00000000 aux_buffer
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:408    .bss.tmrSendData:00000000 tmrSendData
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:415    .text:00000170 tmrSendDataHandler
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:464    .text:000001a0 tmrBlinkDataHandler
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:641    .text:0000026c toHexBuffer
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:770    .text:0000032c tdma_server_beacon
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:805    .text:00000346 tdma_server_statistics
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:848    .text:0000035c server_statistics
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:1036   .text:00000466 appSendData
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:1304   .text:0000060c appDataInd
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:1457   .text:000006d0 appInit
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:1766   .text:000008e0 APP_TaskHandler
C:\Users\guilh\AppData\Local\Temp\ccTzB4Xe.s:1847   .text:00000930 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
sprintf
solver_solve_system
solver_get_n_received
solver_get_n_colaborative
solver_get_data
SYS_TimerStart
energy_prepare_next_turn
solver_prepare_next_turn
energy_get_collab_vector
energy_get_connected_vector
NWK_DataReq
energy_receive_statistics
solver_received_data_frame
NWK_SetAddr
NWK_SetPanId
PHY_SetChannel
PHY_SetRxState
PHY_RandomReq
srand
NWK_OpenEndpoint
macsc_set_cmp1_int_cb
macsc_set_cmp2_int_cb
macsc_enable_cmp_int
macsc_use_cmp
energy_init
solver_init
sysclk_init
board_init
SYS_Init
sm_init
SYS_TaskHandler
__do_copy_data
__do_clear_bss
