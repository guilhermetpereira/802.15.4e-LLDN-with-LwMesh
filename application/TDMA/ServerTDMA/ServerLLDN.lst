   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.section	.bss.tTS,"aw",@nobits
  15               	tTS:
  16 0000 0000 0000 		.zero	4
  17               		.text
  19               	sysclk_get_main_hz:
  20               	.LFB67:
  21               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  22               		.loc 1 175 0
  23               		.cfi_startproc
  24 0000 CF93      		push r28
  25               	.LCFI0:
  26               		.cfi_def_cfa_offset 3
  27               		.cfi_offset 28, -2
  28 0002 DF93      		push r29
  29               	.LCFI1:
  30               		.cfi_def_cfa_offset 4
  31               		.cfi_offset 29, -3
  32 0004 CDB7      		in r28,__SP_L__
  33 0006 DEB7      		in r29,__SP_H__
  34               	.LCFI2:
  35               		.cfi_def_cfa_register 28
  36               	/* prologue: function */
  37               	/* frame size = 0 */
  38               	/* stack size = 2 */
  39               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  40               		.loc 1 185 0
  41 0008 80E0      		ldi r24,0
  42 000a 94E2      		ldi r25,lo8(36)
  43 000c A4EF      		ldi r26,lo8(-12)
  44 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  45               		.loc 1 195 0
  46 0010 BC01      		movw r22,r24
  47 0012 CD01      		movw r24,r26
  48               	/* epilogue start */
  49 0014 DF91      		pop r29
  50 0016 CF91      		pop r28
  51 0018 0895      		ret
  52               		.cfi_endproc
  53               	.LFE67:
  56               	sysclk_get_source_clock_hz:
  57               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  58               		.loc 1 206 0
  59               		.cfi_startproc
  60 001a CF93      		push r28
  61               	.LCFI3:
  62               		.cfi_def_cfa_offset 3
  63               		.cfi_offset 28, -2
  64 001c DF93      		push r29
  65               	.LCFI4:
  66               		.cfi_def_cfa_offset 4
  67               		.cfi_offset 29, -3
  68 001e CDB7      		in r28,__SP_L__
  69 0020 DEB7      		in r29,__SP_H__
  70               	.LCFI5:
  71               		.cfi_def_cfa_register 28
  72               	/* prologue: function */
  73               	/* frame size = 0 */
  74               	/* stack size = 2 */
  75               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  76               		.loc 1 213 0
  77 0022 0E94 0000 		call sysclk_get_main_hz
  78 0026 DC01      		movw r26,r24
  79 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  80               		.loc 1 284 0
  81 002a BC01      		movw r22,r24
  82 002c CD01      		movw r24,r26
  83               	/* epilogue start */
  84 002e DF91      		pop r29
  85 0030 CF91      		pop r28
  86 0032 0895      		ret
  87               		.cfi_endproc
  88               	.LFE68:
  90               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  93               	baudctrl_1mhz:
  94 0000 3300      		.word	51
  95 0002 1900      		.word	25
  96 0004 0C00      		.word	12
  97 0006 0600      		.word	6
  98 0008 0300      		.word	3
  99 000a 0200      		.word	2
 100 000c 0100      		.word	1
 101 000e FF00      		.word	255
 102               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 105               	baudctrl_8mhz:
 106 0000 A001      		.word	416
 107 0002 CF00      		.word	207
 108 0004 6700      		.word	103
 109 0006 3300      		.word	51
 110 0008 1900      		.word	25
 111 000a 0C00      		.word	12
 112 000c 0700      		.word	7
 113 000e 0800      		.word	8
 114               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 117               	baudctrl_16mhz:
 118 0000 4003      		.word	832
 119 0002 A001      		.word	416
 120 0004 CF00      		.word	207
 121 0006 6700      		.word	103
 122 0008 3300      		.word	51
 123 000a 1900      		.word	25
 124 000c 1000      		.word	16
 125 000e 1000      		.word	16
 126               		.text
 128               	usart_double_baud_enable:
 129               	.LFB101:
 130               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 131               		.loc 2 515 0
 132               		.cfi_startproc
 133 0034 CF93      		push r28
 134               	.LCFI6:
 135               		.cfi_def_cfa_offset 3
 136               		.cfi_offset 28, -2
 137 0036 DF93      		push r29
 138               	.LCFI7:
 139               		.cfi_def_cfa_offset 4
 140               		.cfi_offset 29, -3
 141 0038 00D0      		rcall .
 142               	.LCFI8:
 143               		.cfi_def_cfa_offset 6
 144 003a CDB7      		in r28,__SP_L__
 145 003c DEB7      		in r29,__SP_H__
 146               	.LCFI9:
 147               		.cfi_def_cfa_register 28
 148               	/* prologue: function */
 149               	/* frame size = 2 */
 150               	/* stack size = 4 */
 151               	.L__stack_usage = 4
 152 003e 9A83      		std Y+2,r25
 153 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 154               		.loc 2 516 0
 155 0042 8981      		ldd r24,Y+1
 156 0044 9A81      		ldd r25,Y+2
 157 0046 FC01      		movw r30,r24
 158 0048 8081      		ld r24,Z
 159 004a 282F      		mov r18,r24
 160 004c 2260      		ori r18,lo8(2)
 161 004e 8981      		ldd r24,Y+1
 162 0050 9A81      		ldd r25,Y+2
 163 0052 FC01      		movw r30,r24
 164 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 165               		.loc 2 517 0
 166 0056 0000      		nop
 167               	/* epilogue start */
 168 0058 0F90      		pop __tmp_reg__
 169 005a 0F90      		pop __tmp_reg__
 170 005c DF91      		pop r29
 171 005e CF91      		pop r28
 172 0060 0895      		ret
 173               		.cfi_endproc
 174               	.LFE101:
 177               	usart_serial_init:
 178               	.LFB104:
 179               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 180               		.loc 3 77 0
 181               		.cfi_startproc
 182 0062 CF93      		push r28
 183               	.LCFI10:
 184               		.cfi_def_cfa_offset 3
 185               		.cfi_offset 28, -2
 186 0064 DF93      		push r29
 187               	.LCFI11:
 188               		.cfi_def_cfa_offset 4
 189               		.cfi_offset 29, -3
 190 0066 CDB7      		in r28,__SP_L__
 191 0068 DEB7      		in r29,__SP_H__
 192               	.LCFI12:
 193               		.cfi_def_cfa_register 28
 194 006a 2B97      		sbiw r28,11
 195               	.LCFI13:
 196               		.cfi_def_cfa_offset 15
 197 006c 0FB6      		in __tmp_reg__,__SREG__
 198 006e F894      		cli
 199 0070 DEBF      		out __SP_H__,r29
 200 0072 0FBE      		out __SREG__,__tmp_reg__
 201 0074 CDBF      		out __SP_L__,r28
 202               	/* prologue: function */
 203               	/* frame size = 11 */
 204               	/* stack size = 13 */
 205               	.L__stack_usage = 13
 206 0076 9987      		std Y+9,r25
 207 0078 8887      		std Y+8,r24
 208 007a 7B87      		std Y+11,r23
 209 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 210               		.loc 3 80 0
 211 007e 8A85      		ldd r24,Y+10
 212 0080 9B85      		ldd r25,Y+11
 213 0082 FC01      		movw r30,r24
 214 0084 8481      		ldd r24,Z+4
 215 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 216               		.loc 3 81 0
 217 0088 8A85      		ldd r24,Y+10
 218 008a 9B85      		ldd r25,Y+11
 219 008c FC01      		movw r30,r24
 220 008e 8581      		ldd r24,Z+5
 221 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 222               		.loc 3 82 0
 223 0092 8A85      		ldd r24,Y+10
 224 0094 9B85      		ldd r25,Y+11
 225 0096 FC01      		movw r30,r24
 226 0098 8681      		ldd r24,Z+6
 227 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 228               		.loc 3 83 0
 229 009c 8A85      		ldd r24,Y+10
 230 009e 9B85      		ldd r25,Y+11
 231 00a0 FC01      		movw r30,r24
 232 00a2 8081      		ld r24,Z
 233 00a4 9181      		ldd r25,Z+1
 234 00a6 A281      		ldd r26,Z+2
 235 00a8 B381      		ldd r27,Z+3
 236 00aa 8983      		std Y+1,r24
 237 00ac 9A83      		std Y+2,r25
 238 00ae AB83      		std Y+3,r26
 239 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 240               		.loc 3 85 0
 241 00b2 8885      		ldd r24,Y+8
 242 00b4 9985      		ldd r25,Y+9
 243 00b6 9E01      		movw r18,r28
 244 00b8 2F5F      		subi r18,-1
 245 00ba 3F4F      		sbci r19,-1
 246 00bc B901      		movw r22,r18
 247 00be 0E94 0000 		call usart_init_rs232
 248 00c2 8823      		tst r24
 249 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 250               		.loc 3 86 0
 251 00c6 81E0      		ldi r24,lo8(1)
 252 00c8 00C0      		rjmp .L9
 253               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 254               		.loc 3 88 0
 255 00ca 80E0      		ldi r24,0
 256               	.L9:
 257               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 258               		.loc 3 90 0 discriminator 1
 259 00cc 2B96      		adiw r28,11
 260 00ce 0FB6      		in __tmp_reg__,__SREG__
 261 00d0 F894      		cli
 262 00d2 DEBF      		out __SP_H__,r29
 263 00d4 0FBE      		out __SREG__,__tmp_reg__
 264 00d6 CDBF      		out __SP_L__,r28
 265 00d8 DF91      		pop r29
 266 00da CF91      		pop r28
 267 00dc 0895      		ret
 268               		.cfi_endproc
 269               	.LFE104:
 272               	usart_serial_putchar:
 273               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 274               		.loc 3 100 0
 275               		.cfi_startproc
 276 00de CF93      		push r28
 277               	.LCFI14:
 278               		.cfi_def_cfa_offset 3
 279               		.cfi_offset 28, -2
 280 00e0 DF93      		push r29
 281               	.LCFI15:
 282               		.cfi_def_cfa_offset 4
 283               		.cfi_offset 29, -3
 284 00e2 00D0      		rcall .
 285 00e4 1F92      		push __zero_reg__
 286               	.LCFI16:
 287               		.cfi_def_cfa_offset 7
 288 00e6 CDB7      		in r28,__SP_L__
 289 00e8 DEB7      		in r29,__SP_H__
 290               	.LCFI17:
 291               		.cfi_def_cfa_register 28
 292               	/* prologue: function */
 293               	/* frame size = 3 */
 294               	/* stack size = 5 */
 295               	.L__stack_usage = 5
 296 00ea 9A83      		std Y+2,r25
 297 00ec 8983      		std Y+1,r24
 298 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 299               		.loc 3 101 0
 300 00f0 8981      		ldd r24,Y+1
 301 00f2 9A81      		ldd r25,Y+2
 302 00f4 6B81      		ldd r22,Y+3
 303 00f6 0E94 0000 		call usart_putchar
 304               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 305               		.loc 3 102 0
 306 00fa 0F90      		pop __tmp_reg__
 307 00fc 0F90      		pop __tmp_reg__
 308 00fe 0F90      		pop __tmp_reg__
 309 0100 DF91      		pop r29
 310 0102 CF91      		pop r28
 311 0104 0895      		ret
 312               		.cfi_endproc
 313               	.LFE105:
 316               	usart_serial_getchar:
 317               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 318               		.loc 3 111 0
 319               		.cfi_startproc
 320 0106 CF93      		push r28
 321               	.LCFI18:
 322               		.cfi_def_cfa_offset 3
 323               		.cfi_offset 28, -2
 324 0108 DF93      		push r29
 325               	.LCFI19:
 326               		.cfi_def_cfa_offset 4
 327               		.cfi_offset 29, -3
 328 010a 00D0      		rcall .
 329 010c 00D0      		rcall .
 330               	.LCFI20:
 331               		.cfi_def_cfa_offset 8
 332 010e CDB7      		in r28,__SP_L__
 333 0110 DEB7      		in r29,__SP_H__
 334               	.LCFI21:
 335               		.cfi_def_cfa_register 28
 336               	/* prologue: function */
 337               	/* frame size = 4 */
 338               	/* stack size = 6 */
 339               	.L__stack_usage = 6
 340 0112 9A83      		std Y+2,r25
 341 0114 8983      		std Y+1,r24
 342 0116 7C83      		std Y+4,r23
 343 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 344               		.loc 3 112 0
 345 011a 8981      		ldd r24,Y+1
 346 011c 9A81      		ldd r25,Y+2
 347 011e 0E94 0000 		call usart_getchar
 348 0122 282F      		mov r18,r24
 349 0124 8B81      		ldd r24,Y+3
 350 0126 9C81      		ldd r25,Y+4
 351 0128 FC01      		movw r30,r24
 352 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 353               		.loc 3 113 0
 354 012c 0000      		nop
 355               	/* epilogue start */
 356 012e 0F90      		pop __tmp_reg__
 357 0130 0F90      		pop __tmp_reg__
 358 0132 0F90      		pop __tmp_reg__
 359 0134 0F90      		pop __tmp_reg__
 360 0136 DF91      		pop r29
 361 0138 CF91      		pop r28
 362 013a 0895      		ret
 363               		.cfi_endproc
 364               	.LFE106:
 367               	stdio_serial_init:
 368               	.LFB107:
 369               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 370               		.loc 4 90 0
 371               		.cfi_startproc
 372 013c CF93      		push r28
 373               	.LCFI22:
 374               		.cfi_def_cfa_offset 3
 375               		.cfi_offset 28, -2
 376 013e DF93      		push r29
 377               	.LCFI23:
 378               		.cfi_def_cfa_offset 4
 379               		.cfi_offset 29, -3
 380 0140 00D0      		rcall .
 381 0142 00D0      		rcall .
 382               	.LCFI24:
 383               		.cfi_def_cfa_offset 8
 384 0144 CDB7      		in r28,__SP_L__
 385 0146 DEB7      		in r29,__SP_H__
 386               	.LCFI25:
 387               		.cfi_def_cfa_register 28
 388               	/* prologue: function */
 389               	/* frame size = 4 */
 390               	/* stack size = 6 */
 391               	.L__stack_usage = 6
 392 0148 9A83      		std Y+2,r25
 393 014a 8983      		std Y+1,r24
 394 014c 7C83      		std Y+4,r23
 395 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 396               		.loc 4 91 0
 397 0150 8981      		ldd r24,Y+1
 398 0152 9A81      		ldd r25,Y+2
 399 0154 9093 0000 		sts stdio_base+1,r25
 400 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 401               		.loc 4 92 0
 402 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 403 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 404 0160 9093 0000 		sts ptr_put+1,r25
 405 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 406               		.loc 4 93 0
 407 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 408 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 409 016c 9093 0000 		sts ptr_get+1,r25
 410 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 411               		.loc 4 95 0
 412 0174 2B81      		ldd r18,Y+3
 413 0176 3C81      		ldd r19,Y+4
 414 0178 8981      		ldd r24,Y+1
 415 017a 9A81      		ldd r25,Y+2
 416 017c B901      		movw r22,r18
 417 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 418               		.loc 4 107 0
 419 0182 60E0      		ldi r22,lo8(gs(_read))
 420 0184 70E0      		ldi r23,hi8(gs(_read))
 421 0186 80E0      		ldi r24,lo8(gs(_write))
 422 0188 90E0      		ldi r25,hi8(gs(_write))
 423 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 424               		.loc 4 120 0
 425 018e 0000      		nop
 426               	/* epilogue start */
 427 0190 0F90      		pop __tmp_reg__
 428 0192 0F90      		pop __tmp_reg__
 429 0194 0F90      		pop __tmp_reg__
 430 0196 0F90      		pop __tmp_reg__
 431 0198 DF91      		pop r29
 432 019a CF91      		pop r28
 433 019c 0895      		ret
 434               		.cfi_endproc
 435               	.LFE107:
 438               	macsc_enable_manual_bts:
 439               	.LFB121:
 440               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 441               		.loc 5 444 0
 442               		.cfi_startproc
 443 019e CF93      		push r28
 444               	.LCFI26:
 445               		.cfi_def_cfa_offset 3
 446               		.cfi_offset 28, -2
 447 01a0 DF93      		push r29
 448               	.LCFI27:
 449               		.cfi_def_cfa_offset 4
 450               		.cfi_offset 29, -3
 451 01a2 CDB7      		in r28,__SP_L__
 452 01a4 DEB7      		in r29,__SP_H__
 453               	.LCFI28:
 454               		.cfi_def_cfa_register 28
 455               	/* prologue: function */
 456               	/* frame size = 0 */
 457               	/* stack size = 2 */
 458               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 459               		.loc 5 445 0
 460 01a6 8CED      		ldi r24,lo8(-36)
 461 01a8 90E0      		ldi r25,0
 462 01aa 2CED      		ldi r18,lo8(-36)
 463 01ac 30E0      		ldi r19,0
 464 01ae F901      		movw r30,r18
 465 01b0 2081      		ld r18,Z
 466 01b2 2064      		ori r18,lo8(64)
 467 01b4 FC01      		movw r30,r24
 468 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 469               		.loc 5 446 0
 470 01b8 8CED      		ldi r24,lo8(-36)
 471 01ba 90E0      		ldi r25,0
 472 01bc 2CED      		ldi r18,lo8(-36)
 473 01be 30E0      		ldi r19,0
 474 01c0 F901      		movw r30,r18
 475 01c2 2081      		ld r18,Z
 476 01c4 277F      		andi r18,lo8(-9)
 477 01c6 FC01      		movw r30,r24
 478 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 479               		.loc 5 447 0
 480 01ca 0000      		nop
 481               	/* epilogue start */
 482 01cc DF91      		pop r29
 483 01ce CF91      		pop r28
 484 01d0 0895      		ret
 485               		.cfi_endproc
 486               	.LFE121:
 488               	.global	appState
 489               		.section	.bss.appState,"aw",@nobits
 492               	appState:
 493 0000 00        		.zero	1
 494               		.section	.bss.msgReq,"aw",@nobits
 497               	msgReq:
 498 0000 0000 0000 		.zero	20
 498      0000 0000 
 498      0000 0000 
 498      0000 0000 
 498      0000 0000 
 499               		.section	.bss.PanId,"aw",@nobits
 502               	PanId:
 503 0000 00        		.zero	1
 504               		.text
 506               	appSendData:
 507               	.LFB130:
 508               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** #include "lldn.h"
  27:ServerLLDN.c  **** 
  28:ServerLLDN.c  **** #if APP_COORDINATOR
  29:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
  30:ServerLLDN.c  **** 		/* Only ARM */
  31:ServerLLDN.c  **** 		#include "stdio_usb.h"
  32:ServerLLDN.c  **** 		#define MASTER_MACSC	0
  33:ServerLLDN.c  **** 		#define TIMESLOT_TIMER	0
  34:ServerLLDN.c  **** 	#else
  35:ServerLLDN.c  **** 		/* Only megarf series */
  36:ServerLLDN.c  **** 		#include "conf_sio2host.h" // necessary for prints
  37:ServerLLDN.c  **** 		#define MASTER_MACSC	1
  38:ServerLLDN.c  **** 		#define TIMESLOT_TIMER	0
  39:ServerLLDN.c  **** 	#endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** 	/* Only megarf series */
  42:ServerLLDN.c  **** 	#include "conf_sio2host.h" // necessary for prints
  43:ServerLLDN.c  **** 	#define MASTER_MACSC		1
  44:ServerLLDN.c  **** #endif
  45:ServerLLDN.c  **** 
  46:ServerLLDN.c  **** #define PRINT 0
  47:ServerLLDN.c  **** 
  48:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  49:ServerLLDN.c  **** 	#include "macsc_megarf.h"
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** 	// static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** 	// static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 	
  55:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  56:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  57:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  58:ServerLLDN.c  **** static uint8_t PanId;
  59:ServerLLDN.c  **** 
  60:ServerLLDN.c  **** static void appSendData(void)
  61:ServerLLDN.c  **** {
 509               		.loc 6 61 0
 510               		.cfi_startproc
 511 01d2 CF93      		push r28
 512               	.LCFI29:
 513               		.cfi_def_cfa_offset 3
 514               		.cfi_offset 28, -2
 515 01d4 DF93      		push r29
 516               	.LCFI30:
 517               		.cfi_def_cfa_offset 4
 518               		.cfi_offset 29, -3
 519 01d6 CDB7      		in r28,__SP_L__
 520 01d8 DEB7      		in r29,__SP_H__
 521               	.LCFI31:
 522               		.cfi_def_cfa_register 28
 523               	/* prologue: function */
 524               	/* frame size = 0 */
 525               	/* stack size = 2 */
 526               	.L__stack_usage = 2
  62:ServerLLDN.c  **** 	if(msgReq.options != 0)
 527               		.loc 6 62 0
 528 01da 8091 0000 		lds r24,msgReq+9
 529 01de 9091 0000 		lds r25,msgReq+9+1
 530 01e2 892B      		or r24,r25
 531 01e4 01F0      		breq .L17
  63:ServerLLDN.c  **** 	{
  64:ServerLLDN.c  **** 		// printf("\nMSG REQ SENT %d",msgReq.options);
  65:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 532               		.loc 6 65 0
 533 01e6 80E0      		ldi r24,lo8(msgReq)
 534 01e8 90E0      		ldi r25,hi8(msgReq)
 535 01ea 0E94 0000 		call NWK_DataReq
 536               	.L17:
  66:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  67:ServerLLDN.c  **** 	#endif
  68:ServerLLDN.c  **** 	}
  69:ServerLLDN.c  **** }
 537               		.loc 6 69 0
 538 01ee 0000      		nop
 539               	/* epilogue start */
 540 01f0 DF91      		pop r29
 541 01f2 CF91      		pop r28
 542 01f4 0895      		ret
 543               		.cfi_endproc
 544               	.LFE130:
 546               		.comm	beaconInterval,4,1
 547               	.global	appPanState
 548               		.section	.data.appPanState,"aw",@progbits
 551               	appPanState:
 552 0000 01        		.byte	1
 553               		.comm	ACKFrame,33,1
 554               	.global	ACKFrame_size
 555               		.section	.bss.ACKFrame_size,"aw",@nobits
 558               	ACKFrame_size:
 559 0000 0000      		.zero	2
 560               	.global	cycles_counter
 561               		.section	.data.cycles_counter,"aw",@progbits
 564               	cycles_counter:
 565 0000 01        		.byte	1
 566               	.global	counter_associados
 567               		.section	.bss.counter_associados,"aw",@nobits
 570               	counter_associados:
 571 0000 0000      		.zero	2
 572               		.comm	msgsConfRequest,1778,1
 573               		.comm	ConfigRequest,7,1
 574               	.global	macLLDNnumUplinkTS
 575               		.section	.bss.macLLDNnumUplinkTS,"aw",@nobits
 578               	macLLDNnumUplinkTS:
 579 0000 0000      		.zero	2
 580               	.global	biggest_timeslot_duration
 581               		.section	.bss.biggest_timeslot_duration,"aw",@nobits
 584               	biggest_timeslot_duration:
 585 0000 0000      		.zero	2
 586               	.global	index_ConfRequest
 587               		.section	.bss.index_ConfRequest,"aw",@nobits
 590               	index_ConfRequest:
 591 0000 0000      		.zero	2
 592               		.section	.bss.tmrDelay_Discovery,"aw",@nobits
 595               	tmrDelay_Discovery:
 596 0000 0000 0000 		.zero	13
 596      0000 0000 
 596      0000 0000 
 596      00
 597               		.section	.bss.tmrDelay_Configuration,"aw",@nobits
 600               	tmrDelay_Configuration:
 601 0000 0000 0000 		.zero	13
 601      0000 0000 
 601      0000 0000 
 601      00
 602               	.global	count_discovery
 603               		.section	.bss.count_discovery,"aw",@nobits
 606               	count_discovery:
 607 0000 0000      		.zero	2
 608               	.global	count_configuration
 609               		.section	.bss.count_configuration,"aw",@nobits
 612               	count_configuration:
 613 0000 0000      		.zero	2
 614               		.text
 616               	tmrDelayHandler:
 617               	.LFB131:
  70:ServerLLDN.c  **** 
  71:ServerLLDN.c  **** #if APP_COORDINATOR
  72:ServerLLDN.c  **** 
  73:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  74:ServerLLDN.c  **** 
  75:ServerLLDN.c  **** 	float beaconInterval;
  76:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET;		// Initial state of PAN node
  77:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;								// ACK Frame Payload used in Discovery State
  78:ServerLLDN.c  **** 	int ACKFrame_size = 0;									// Bitmap size 
  79:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
  80:ServerLLDN.c  **** 	int counter_associados = 0;								// Associated nodes counter
  81:ServerLLDN.c  **** 	NWK_ConfigRequest_t msgsConfRequest[254];				// Array for Configure Request messages, one position
  82:ServerLLDN.c  **** 	NWK_ConfigRequest_t ConfigRequest;
  83:ServerLLDN.c  **** 	int macLLDNnumUplinkTS = 0;								// Number of uplink timeslots, is also the control of associate
  84:ServerLLDN.c  **** 	int biggest_timeslot_duration  = 0;						
  85:ServerLLDN.c  **** 	int index_ConfRequest = 0;
  86:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay_Discovery;							// Timer for delay between messages
  87:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay_Configuration;						// Timer for delay between messages
  88:ServerLLDN.c  **** 	
  89:ServerLLDN.c  **** 	
  90:ServerLLDN.c  **** 	int count_discovery = 0;
  91:ServerLLDN.c  **** 	int count_configuration = 0;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	
  94:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
  95:ServerLLDN.c  **** 	{
 618               		.loc 6 95 0
 619               		.cfi_startproc
 620 01f6 CF93      		push r28
 621               	.LCFI32:
 622               		.cfi_def_cfa_offset 3
 623               		.cfi_offset 28, -2
 624 01f8 DF93      		push r29
 625               	.LCFI33:
 626               		.cfi_def_cfa_offset 4
 627               		.cfi_offset 29, -3
 628 01fa 00D0      		rcall .
 629               	.LCFI34:
 630               		.cfi_def_cfa_offset 6
 631 01fc CDB7      		in r28,__SP_L__
 632 01fe DEB7      		in r29,__SP_H__
 633               	.LCFI35:
 634               		.cfi_def_cfa_register 28
 635               	/* prologue: function */
 636               	/* frame size = 2 */
 637               	/* stack size = 4 */
 638               	.L__stack_usage = 4
 639 0200 9A83      		std Y+2,r25
 640 0202 8983      		std Y+1,r24
  96:ServerLLDN.c  **** 		// printf("\nTimer_Software");
  97:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 641               		.loc 6 97 0
 642 0204 82E0      		ldi r24,lo8(2)
 643 0206 8093 0000 		sts appState,r24
  98:ServerLLDN.c  **** 	}
 644               		.loc 6 98 0
 645 020a 0000      		nop
 646               	/* epilogue start */
 647 020c 0F90      		pop __tmp_reg__
 648 020e 0F90      		pop __tmp_reg__
 649 0210 DF91      		pop r29
 650 0212 CF91      		pop r28
 651 0214 0895      		ret
 652               		.cfi_endproc
 653               	.LFE131:
 656               	tmrResetHandler:
 657               	.LFB132:
  99:ServerLLDN.c  **** 	
 100:ServerLLDN.c  **** 	
 101:ServerLLDN.c  **** 	static void tmrResetHandler(SYS_Timer_t *timer)
 102:ServerLLDN.c  **** 	{
 658               		.loc 6 102 0
 659               		.cfi_startproc
 660 0216 CF93      		push r28
 661               	.LCFI36:
 662               		.cfi_def_cfa_offset 3
 663               		.cfi_offset 28, -2
 664 0218 DF93      		push r29
 665               	.LCFI37:
 666               		.cfi_def_cfa_offset 4
 667               		.cfi_offset 29, -3
 668 021a 00D0      		rcall .
 669               	.LCFI38:
 670               		.cfi_def_cfa_offset 6
 671 021c CDB7      		in r28,__SP_L__
 672 021e DEB7      		in r29,__SP_H__
 673               	.LCFI39:
 674               		.cfi_def_cfa_register 28
 675               	/* prologue: function */
 676               	/* frame size = 2 */
 677               	/* stack size = 4 */
 678               	.L__stack_usage = 4
 679 0220 9A83      		std Y+2,r25
 680 0222 8983      		std Y+1,r24
 103:ServerLLDN.c  **** 		// printf("\nTimer_Software");
 104:ServerLLDN.c  **** 		appState = APP_STATE_INITIAL;
 681               		.loc 6 104 0
 682 0224 1092 0000 		sts appState,__zero_reg__
 105:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_RESET;
 683               		.loc 6 105 0
 684 0228 81E0      		ldi r24,lo8(1)
 685 022a 8093 0000 		sts appPanState,r24
 106:ServerLLDN.c  **** 	}
 686               		.loc 6 106 0
 687 022e 0000      		nop
 688               	/* epilogue start */
 689 0230 0F90      		pop __tmp_reg__
 690 0232 0F90      		pop __tmp_reg__
 691 0234 DF91      		pop r29
 692 0236 CF91      		pop r28
 693 0238 0895      		ret
 694               		.cfi_endproc
 695               	.LFE132:
 698               	lldn_server_beacon:
 699               	.LFB133:
 107:ServerLLDN.c  **** 	
 108:ServerLLDN.c  **** 	
 109:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 110:ServerLLDN.c  **** 	{
 700               		.loc 6 110 0
 701               		.cfi_startproc
 702 023a CF93      		push r28
 703               	.LCFI40:
 704               		.cfi_def_cfa_offset 3
 705               		.cfi_offset 28, -2
 706 023c DF93      		push r29
 707               	.LCFI41:
 708               		.cfi_def_cfa_offset 4
 709               		.cfi_offset 29, -3
 710 023e CDB7      		in r28,__SP_L__
 711 0240 DEB7      		in r29,__SP_H__
 712               	.LCFI42:
 713               		.cfi_def_cfa_register 28
 714               	/* prologue: function */
 715               	/* frame size = 0 */
 716               	/* stack size = 2 */
 717               	.L__stack_usage = 2
 111:ServerLLDN.c  **** 		// printf("\nBeacon Timer");
 112:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 718               		.loc 6 112 0
 719 0242 0E94 0000 		call macsc_enable_manual_bts
 113:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 720               		.loc 6 113 0
 721 0246 82E0      		ldi r24,lo8(2)
 722 0248 8093 0000 		sts appState,r24
 114:ServerLLDN.c  **** 	}
 723               		.loc 6 114 0
 724 024c 0000      		nop
 725               	/* epilogue start */
 726 024e DF91      		pop r29
 727 0250 CF91      		pop r28
 728 0252 0895      		ret
 729               		.cfi_endproc
 730               	.LFE133:
 733               	downlink_delay_handler:
 734               	.LFB134:
 115:ServerLLDN.c  **** 	
 116:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 117:ServerLLDN.c  **** 	{
 735               		.loc 6 117 0
 736               		.cfi_startproc
 737 0254 CF93      		push r28
 738               	.LCFI43:
 739               		.cfi_def_cfa_offset 3
 740               		.cfi_offset 28, -2
 741 0256 DF93      		push r29
 742               	.LCFI44:
 743               		.cfi_def_cfa_offset 4
 744               		.cfi_offset 29, -3
 745 0258 CDB7      		in r28,__SP_L__
 746 025a DEB7      		in r29,__SP_H__
 747               	.LCFI45:
 748               		.cfi_def_cfa_register 28
 749               	/* prologue: function */
 750               	/* frame size = 0 */
 751               	/* stack size = 2 */
 752               	.L__stack_usage = 2
 118:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_LLDN_ACK)
 753               		.loc 6 118 0
 754 025c 8091 0000 		lds r24,msgReq+9
 755 0260 9091 0000 		lds r25,msgReq+9+1
 756 0264 8115      		cp r24,__zero_reg__
 757 0266 9044      		sbci r25,64
 758 0268 01F4      		brne .L23
 119:ServerLLDN.c  **** 		{
 120:ServerLLDN.c  **** 			//printf("\ndelay timer");
 121:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 759               		.loc 6 121 0
 760 026a 82E0      		ldi r24,lo8(2)
 761 026c 8093 0000 		sts appState,r24
 762               	.L23:
 122:ServerLLDN.c  **** 		}
 123:ServerLLDN.c  **** 	}
 763               		.loc 6 123 0
 764 0270 0000      		nop
 765               	/* epilogue start */
 766 0272 DF91      		pop r29
 767 0274 CF91      		pop r28
 768 0276 0895      		ret
 769               		.cfi_endproc
 770               	.LFE134:
 773               	addToAckArray:
 774               	.LFB135:
 124:ServerLLDN.c  **** 	
 125:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 126:ServerLLDN.c  **** 	static void teste_handler(void)
 127:ServerLLDN.c  **** 	{
 128:ServerLLDN.c  **** 		if(msgReq.options)
 129:ServerLLDN.c  **** 		printf("\n***TIMESLOT****");
 130:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 131:ServerLLDN.c  **** 	}
 132:ServerLLDN.c  **** 	#endif
 133:ServerLLDN.c  **** 	
 134:ServerLLDN.c  **** 	static void addToAckArray(uint16_t addres)
 135:ServerLLDN.c  **** 	{	
 775               		.loc 6 135 0
 776               		.cfi_startproc
 777 0278 CF93      		push r28
 778               	.LCFI46:
 779               		.cfi_def_cfa_offset 3
 780               		.cfi_offset 28, -2
 781 027a DF93      		push r29
 782               	.LCFI47:
 783               		.cfi_def_cfa_offset 4
 784               		.cfi_offset 29, -3
 785 027c 00D0      		rcall .
 786 027e 00D0      		rcall .
 787 0280 00D0      		rcall .
 788               	.LCFI48:
 789               		.cfi_def_cfa_offset 10
 790 0282 CDB7      		in r28,__SP_L__
 791 0284 DEB7      		in r29,__SP_H__
 792               	.LCFI49:
 793               		.cfi_def_cfa_register 28
 794               	/* prologue: function */
 795               	/* frame size = 6 */
 796               	/* stack size = 8 */
 797               	.L__stack_usage = 8
 798 0286 9E83      		std Y+6,r25
 799 0288 8D83      		std Y+5,r24
 136:ServerLLDN.c  **** 		count_discovery++;
 800               		.loc 6 136 0
 801 028a 8091 0000 		lds r24,count_discovery
 802 028e 9091 0000 		lds r25,count_discovery+1
 803 0292 0196      		adiw r24,1
 804 0294 9093 0000 		sts count_discovery+1,r25
 805 0298 8093 0000 		sts count_discovery,r24
 137:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 806               		.loc 6 137 0
 807 029c 8D81      		ldd r24,Y+5
 808 029e 9E81      		ldd r25,Y+6
 809 02a0 9923      		tst r25
 810 02a2 04F4      		brge .L25
 811 02a4 0796      		adiw r24,7
 812               	.L25:
 813 02a6 9595      		asr r25
 814 02a8 8795      		ror r24
 815 02aa 9595      		asr r25
 816 02ac 8795      		ror r24
 817 02ae 9595      		asr r25
 818 02b0 8795      		ror r24
 819 02b2 9A83      		std Y+2,r25
 820 02b4 8983      		std Y+1,r24
 138:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 821               		.loc 6 138 0
 822 02b6 8D81      		ldd r24,Y+5
 823 02b8 9E81      		ldd r25,Y+6
 824 02ba 8770      		andi r24,7
 825 02bc 9927      		clr r25
 826 02be 28E0      		ldi r18,lo8(8)
 827 02c0 30E0      		ldi r19,0
 828 02c2 A901      		movw r20,r18
 829 02c4 481B      		sub r20,r24
 830 02c6 590B      		sbc r21,r25
 831 02c8 CA01      		movw r24,r20
 832 02ca 9C83      		std Y+4,r25
 833 02cc 8B83      		std Y+3,r24
 139:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 834               		.loc 6 139 0
 835 02ce 8981      		ldd r24,Y+1
 836 02d0 9A81      		ldd r25,Y+2
 837 02d2 8050      		subi r24,lo8(-(ACKFrame+1))
 838 02d4 9040      		sbci r25,hi8(-(ACKFrame+1))
 839 02d6 FC01      		movw r30,r24
 840 02d8 8081      		ld r24,Z
 841 02da 282F      		mov r18,r24
 842 02dc 81E0      		ldi r24,lo8(1)
 843 02de 90E0      		ldi r25,0
 844 02e0 0B80      		ldd r0,Y+3
 845 02e2 00C0      		rjmp 2f
 846               		1:
 847 02e4 880F      		lsl r24
 848 02e6 991F      		rol r25
 849               		2:
 850 02e8 0A94      		dec r0
 851 02ea 02F4      		brpl 1b
 852 02ec 822B      		or r24,r18
 853 02ee 282F      		mov r18,r24
 854 02f0 8981      		ldd r24,Y+1
 855 02f2 9A81      		ldd r25,Y+2
 856 02f4 8050      		subi r24,lo8(-(ACKFrame+1))
 857 02f6 9040      		sbci r25,hi8(-(ACKFrame+1))
 858 02f8 FC01      		movw r30,r24
 859 02fa 2083      		st Z,r18
 140:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 860               		.loc 6 140 0
 861 02fc 8981      		ldd r24,Y+1
 862 02fe 9A81      		ldd r25,Y+2
 863 0300 9C01      		movw r18,r24
 864 0302 2F5F      		subi r18,-1
 865 0304 3F4F      		sbci r19,-1
 866 0306 8091 0000 		lds r24,ACKFrame_size
 867 030a 9091 0000 		lds r25,ACKFrame_size+1
 868 030e 8217      		cp r24,r18
 869 0310 9307      		cpc r25,r19
 870 0312 04F4      		brge .L27
 141:ServerLLDN.c  **** 		ACKFrame_size = pos + 1;
 871               		.loc 6 141 0
 872 0314 8981      		ldd r24,Y+1
 873 0316 9A81      		ldd r25,Y+2
 874 0318 0196      		adiw r24,1
 875 031a 9093 0000 		sts ACKFrame_size+1,r25
 876 031e 8093 0000 		sts ACKFrame_size,r24
 877               	.L27:
 142:ServerLLDN.c  **** 	}
 878               		.loc 6 142 0
 879 0322 0000      		nop
 880               	/* epilogue start */
 881 0324 2696      		adiw r28,6
 882 0326 0FB6      		in __tmp_reg__,__SREG__
 883 0328 F894      		cli
 884 032a DEBF      		out __SP_H__,r29
 885 032c 0FBE      		out __SREG__,__tmp_reg__
 886 032e CDBF      		out __SP_L__,r28
 887 0330 DF91      		pop r29
 888 0332 CF91      		pop r28
 889 0334 0895      		ret
 890               		.cfi_endproc
 891               	.LFE135:
 894               	addConfRequestArray:
 895               	.LFB136:
 143:ServerLLDN.c  **** 	
 144:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 145:ServerLLDN.c  **** 	{
 896               		.loc 6 145 0
 897               		.cfi_startproc
 898 0336 CF93      		push r28
 899               	.LCFI50:
 900               		.cfi_def_cfa_offset 3
 901               		.cfi_offset 28, -2
 902 0338 DF93      		push r29
 903               	.LCFI51:
 904               		.cfi_def_cfa_offset 4
 905               		.cfi_offset 29, -3
 906 033a 00D0      		rcall .
 907               	.LCFI52:
 908               		.cfi_def_cfa_offset 6
 909 033c CDB7      		in r28,__SP_L__
 910 033e DEB7      		in r29,__SP_H__
 911               	.LCFI53:
 912               		.cfi_def_cfa_register 28
 913               	/* prologue: function */
 914               	/* frame size = 2 */
 915               	/* stack size = 4 */
 916               	.L__stack_usage = 4
 917 0340 9A83      		std Y+2,r25
 918 0342 8983      		std Y+1,r24
 146:ServerLLDN.c  **** 		count_configuration++;
 919               		.loc 6 146 0
 920 0344 8091 0000 		lds r24,count_configuration
 921 0348 9091 0000 		lds r25,count_configuration+1
 922 034c 0196      		adiw r24,1
 923 034e 9093 0000 		sts count_configuration+1,r25
 924 0352 8093 0000 		sts count_configuration,r24
 147:ServerLLDN.c  **** 		index_ConfRequest++;
 925               		.loc 6 147 0
 926 0356 8091 0000 		lds r24,index_ConfRequest
 927 035a 9091 0000 		lds r25,index_ConfRequest+1
 928 035e 0196      		adiw r24,1
 929 0360 9093 0000 		sts index_ConfRequest+1,r25
 930 0364 8093 0000 		sts index_ConfRequest,r24
 148:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > biggest_timeslot_duration)
 931               		.loc 6 148 0
 932 0368 8981      		ldd r24,Y+1
 933 036a 9A81      		ldd r25,Y+2
 934 036c FC01      		movw r30,r24
 935 036e 8581      		ldd r24,Z+5
 936 0370 8F77      		andi r24,lo8(127)
 937 0372 282F      		mov r18,r24
 938 0374 30E0      		ldi r19,0
 939 0376 8091 0000 		lds r24,biggest_timeslot_duration
 940 037a 9091 0000 		lds r25,biggest_timeslot_duration+1
 941 037e 8217      		cp r24,r18
 942 0380 9307      		cpc r25,r19
 943 0382 04F4      		brge .L29
 149:ServerLLDN.c  **** 			biggest_timeslot_duration = node->ts_dir.tsDuration;
 944               		.loc 6 149 0
 945 0384 8981      		ldd r24,Y+1
 946 0386 9A81      		ldd r25,Y+2
 947 0388 FC01      		movw r30,r24
 948 038a 8581      		ldd r24,Z+5
 949 038c 8F77      		andi r24,lo8(127)
 950 038e 882F      		mov r24,r24
 951 0390 90E0      		ldi r25,0
 952 0392 9093 0000 		sts biggest_timeslot_duration+1,r25
 953 0396 8093 0000 		sts biggest_timeslot_duration,r24
 954               	.L29:
 150:ServerLLDN.c  **** 		// tem que atualizar o tamanho final
 151:ServerLLDN.c  **** 		msgsConfRequest[index_ConfRequest].id = LL_CONFIGURATION_REQUEST;
 955               		.loc 6 151 0
 956 039a 2091 0000 		lds r18,index_ConfRequest
 957 039e 3091 0000 		lds r19,index_ConfRequest+1
 958 03a2 C901      		movw r24,r18
 959 03a4 880F      		lsl r24
 960 03a6 991F      		rol r25
 961 03a8 880F      		lsl r24
 962 03aa 991F      		rol r25
 963 03ac 880F      		lsl r24
 964 03ae 991F      		rol r25
 965 03b0 821B      		sub r24,r18
 966 03b2 930B      		sbc r25,r19
 967 03b4 8050      		subi r24,lo8(-(msgsConfRequest))
 968 03b6 9040      		sbci r25,hi8(-(msgsConfRequest))
 969 03b8 2FE0      		ldi r18,lo8(15)
 970 03ba FC01      		movw r30,r24
 971 03bc 2083      		st Z,r18
 152:ServerLLDN.c  ****  		msgsConfRequest[index_ConfRequest].macAddr = node->macAddr;
 972               		.loc 6 152 0
 973 03be 2091 0000 		lds r18,index_ConfRequest
 974 03c2 3091 0000 		lds r19,index_ConfRequest+1
 975 03c6 8981      		ldd r24,Y+1
 976 03c8 9A81      		ldd r25,Y+2
 977 03ca FC01      		movw r30,r24
 978 03cc 4381      		ldd r20,Z+3
 979 03ce 5481      		ldd r21,Z+4
 980 03d0 C901      		movw r24,r18
 981 03d2 880F      		lsl r24
 982 03d4 991F      		rol r25
 983 03d6 880F      		lsl r24
 984 03d8 991F      		rol r25
 985 03da 880F      		lsl r24
 986 03dc 991F      		rol r25
 987 03de 821B      		sub r24,r18
 988 03e0 930B      		sbc r25,r19
 989 03e2 8050      		subi r24,lo8(-(msgsConfRequest+4))
 990 03e4 9040      		sbci r25,hi8(-(msgsConfRequest+4))
 991 03e6 FC01      		movw r30,r24
 992 03e8 5183      		std Z+1,r21
 993 03ea 4083      		st Z,r20
 153:ServerLLDN.c  ****  		msgsConfRequest[index_ConfRequest].s_macAddr = APP_ADDR;
 994               		.loc 6 153 0
 995 03ec 2091 0000 		lds r18,index_ConfRequest
 996 03f0 3091 0000 		lds r19,index_ConfRequest+1
 997 03f4 C901      		movw r24,r18
 998 03f6 880F      		lsl r24
 999 03f8 991F      		rol r25
 1000 03fa 880F      		lsl r24
 1001 03fc 991F      		rol r25
 1002 03fe 880F      		lsl r24
 1003 0400 991F      		rol r25
 1004 0402 821B      		sub r24,r18
 1005 0404 930B      		sbc r25,r19
 1006 0406 8050      		subi r24,lo8(-(msgsConfRequest+1))
 1007 0408 9040      		sbci r25,hi8(-(msgsConfRequest+1))
 1008 040a FC01      		movw r30,r24
 1009 040c 1082      		st Z,__zero_reg__
 154:ServerLLDN.c  ****  		msgsConfRequest[index_ConfRequest].tx_channel = APP_CHANNEL;
 1010               		.loc 6 154 0
 1011 040e 2091 0000 		lds r18,index_ConfRequest
 1012 0412 3091 0000 		lds r19,index_ConfRequest+1
 1013 0416 C901      		movw r24,r18
 1014 0418 880F      		lsl r24
 1015 041a 991F      		rol r25
 1016 041c 880F      		lsl r24
 1017 041e 991F      		rol r25
 1018 0420 880F      		lsl r24
 1019 0422 991F      		rol r25
 1020 0424 821B      		sub r24,r18
 1021 0426 930B      		sbc r25,r19
 1022 0428 8050      		subi r24,lo8(-(msgsConfRequest+2))
 1023 042a 9040      		sbci r25,hi8(-(msgsConfRequest+2))
 1024 042c 2FE0      		ldi r18,lo8(15)
 1025 042e FC01      		movw r30,r24
 1026 0430 2083      		st Z,r18
 155:ServerLLDN.c  **** 		// PRECISA MUDAR O ASSTIMESLOT, VERIFIACR O NOME APROPRIADO NA NORMA E A IMPLEMENTAO TAMBM EST
 156:ServerLLDN.c  ****  		msgsConfRequest[index_ConfRequest].assTimeSlot = (uint8_t)index_ConfRequest;
 1027               		.loc 6 156 0
 1028 0432 2091 0000 		lds r18,index_ConfRequest
 1029 0436 3091 0000 		lds r19,index_ConfRequest+1
 1030 043a 8091 0000 		lds r24,index_ConfRequest
 1031 043e 9091 0000 		lds r25,index_ConfRequest+1
 1032 0442 482F      		mov r20,r24
 1033 0444 C901      		movw r24,r18
 1034 0446 880F      		lsl r24
 1035 0448 991F      		rol r25
 1036 044a 880F      		lsl r24
 1037 044c 991F      		rol r25
 1038 044e 880F      		lsl r24
 1039 0450 991F      		rol r25
 1040 0452 821B      		sub r24,r18
 1041 0454 930B      		sbc r25,r19
 1042 0456 8050      		subi r24,lo8(-(msgsConfRequest+3))
 1043 0458 9040      		sbci r25,hi8(-(msgsConfRequest+3))
 1044 045a FC01      		movw r30,r24
 1045 045c 4083      		st Z,r20
 157:ServerLLDN.c  ****  		msgsConfRequest[index_ConfRequest].conf.macLLDNmgmtTS = MacLLDNMgmtTS;
 1046               		.loc 6 157 0
 1047 045e 2091 0000 		lds r18,index_ConfRequest
 1048 0462 3091 0000 		lds r19,index_ConfRequest+1
 1049 0466 C901      		movw r24,r18
 1050 0468 880F      		lsl r24
 1051 046a 991F      		rol r25
 1052 046c 880F      		lsl r24
 1053 046e 991F      		rol r25
 1054 0470 880F      		lsl r24
 1055 0472 991F      		rol r25
 1056 0474 821B      		sub r24,r18
 1057 0476 930B      		sbc r25,r19
 1058 0478 8050      		subi r24,lo8(-(msgsConfRequest+6))
 1059 047a 9040      		sbci r25,hi8(-(msgsConfRequest+6))
 1060 047c FC01      		movw r30,r24
 1061 047e 2081      		ld r18,Z
 1062 0480 2068      		ori r18,lo8(-128)
 1063 0482 FC01      		movw r30,r24
 1064 0484 2083      		st Z,r18
 158:ServerLLDN.c  **** 	}
 1065               		.loc 6 158 0
 1066 0486 0000      		nop
 1067               	/* epilogue start */
 1068 0488 0F90      		pop __tmp_reg__
 1069 048a 0F90      		pop __tmp_reg__
 1070 048c DF91      		pop r29
 1071 048e CF91      		pop r28
 1072 0490 0895      		ret
 1073               		.cfi_endproc
 1074               	.LFE136:
 1077               	CopyToConfigRequest:
 1078               	.LFB137:
 159:ServerLLDN.c  **** 		
 160:ServerLLDN.c  **** 	static void CopyToConfigRequest(int i)
 161:ServerLLDN.c  **** 	{
 1079               		.loc 6 161 0
 1080               		.cfi_startproc
 1081 0492 CF93      		push r28
 1082               	.LCFI54:
 1083               		.cfi_def_cfa_offset 3
 1084               		.cfi_offset 28, -2
 1085 0494 DF93      		push r29
 1086               	.LCFI55:
 1087               		.cfi_def_cfa_offset 4
 1088               		.cfi_offset 29, -3
 1089 0496 00D0      		rcall .
 1090               	.LCFI56:
 1091               		.cfi_def_cfa_offset 6
 1092 0498 CDB7      		in r28,__SP_L__
 1093 049a DEB7      		in r29,__SP_H__
 1094               	.LCFI57:
 1095               		.cfi_def_cfa_register 28
 1096               	/* prologue: function */
 1097               	/* frame size = 2 */
 1098               	/* stack size = 4 */
 1099               	.L__stack_usage = 4
 1100 049c 9A83      		std Y+2,r25
 1101 049e 8983      		std Y+1,r24
 162:ServerLLDN.c  **** 		ConfigRequest.id = msgsConfRequest[i].id;
 1102               		.loc 6 162 0
 1103 04a0 2981      		ldd r18,Y+1
 1104 04a2 3A81      		ldd r19,Y+2
 1105 04a4 C901      		movw r24,r18
 1106 04a6 880F      		lsl r24
 1107 04a8 991F      		rol r25
 1108 04aa 880F      		lsl r24
 1109 04ac 991F      		rol r25
 1110 04ae 880F      		lsl r24
 1111 04b0 991F      		rol r25
 1112 04b2 821B      		sub r24,r18
 1113 04b4 930B      		sbc r25,r19
 1114 04b6 8050      		subi r24,lo8(-(msgsConfRequest))
 1115 04b8 9040      		sbci r25,hi8(-(msgsConfRequest))
 1116 04ba FC01      		movw r30,r24
 1117 04bc 8081      		ld r24,Z
 1118 04be 8093 0000 		sts ConfigRequest,r24
 163:ServerLLDN.c  **** 		ConfigRequest.s_macAddr = msgsConfRequest[i].s_macAddr;
 1119               		.loc 6 163 0
 1120 04c2 2981      		ldd r18,Y+1
 1121 04c4 3A81      		ldd r19,Y+2
 1122 04c6 C901      		movw r24,r18
 1123 04c8 880F      		lsl r24
 1124 04ca 991F      		rol r25
 1125 04cc 880F      		lsl r24
 1126 04ce 991F      		rol r25
 1127 04d0 880F      		lsl r24
 1128 04d2 991F      		rol r25
 1129 04d4 821B      		sub r24,r18
 1130 04d6 930B      		sbc r25,r19
 1131 04d8 8050      		subi r24,lo8(-(msgsConfRequest+1))
 1132 04da 9040      		sbci r25,hi8(-(msgsConfRequest+1))
 1133 04dc FC01      		movw r30,r24
 1134 04de 8081      		ld r24,Z
 1135 04e0 8093 0000 		sts ConfigRequest+1,r24
 164:ServerLLDN.c  **** 		ConfigRequest.tx_channel = msgsConfRequest[i].tx_channel;
 1136               		.loc 6 164 0
 1137 04e4 2981      		ldd r18,Y+1
 1138 04e6 3A81      		ldd r19,Y+2
 1139 04e8 C901      		movw r24,r18
 1140 04ea 880F      		lsl r24
 1141 04ec 991F      		rol r25
 1142 04ee 880F      		lsl r24
 1143 04f0 991F      		rol r25
 1144 04f2 880F      		lsl r24
 1145 04f4 991F      		rol r25
 1146 04f6 821B      		sub r24,r18
 1147 04f8 930B      		sbc r25,r19
 1148 04fa 8050      		subi r24,lo8(-(msgsConfRequest+2))
 1149 04fc 9040      		sbci r25,hi8(-(msgsConfRequest+2))
 1150 04fe FC01      		movw r30,r24
 1151 0500 8081      		ld r24,Z
 1152 0502 8093 0000 		sts ConfigRequest+2,r24
 165:ServerLLDN.c  **** 		ConfigRequest.assTimeSlot = msgsConfRequest[i].assTimeSlot;
 1153               		.loc 6 165 0
 1154 0506 2981      		ldd r18,Y+1
 1155 0508 3A81      		ldd r19,Y+2
 1156 050a C901      		movw r24,r18
 1157 050c 880F      		lsl r24
 1158 050e 991F      		rol r25
 1159 0510 880F      		lsl r24
 1160 0512 991F      		rol r25
 1161 0514 880F      		lsl r24
 1162 0516 991F      		rol r25
 1163 0518 821B      		sub r24,r18
 1164 051a 930B      		sbc r25,r19
 1165 051c 8050      		subi r24,lo8(-(msgsConfRequest+3))
 1166 051e 9040      		sbci r25,hi8(-(msgsConfRequest+3))
 1167 0520 FC01      		movw r30,r24
 1168 0522 8081      		ld r24,Z
 1169 0524 8093 0000 		sts ConfigRequest+3,r24
 166:ServerLLDN.c  **** 		ConfigRequest.macAddr = msgsConfRequest[i].macAddr;
 1170               		.loc 6 166 0
 1171 0528 2981      		ldd r18,Y+1
 1172 052a 3A81      		ldd r19,Y+2
 1173 052c C901      		movw r24,r18
 1174 052e 880F      		lsl r24
 1175 0530 991F      		rol r25
 1176 0532 880F      		lsl r24
 1177 0534 991F      		rol r25
 1178 0536 880F      		lsl r24
 1179 0538 991F      		rol r25
 1180 053a 821B      		sub r24,r18
 1181 053c 930B      		sbc r25,r19
 1182 053e 8050      		subi r24,lo8(-(msgsConfRequest+4))
 1183 0540 9040      		sbci r25,hi8(-(msgsConfRequest+4))
 1184 0542 FC01      		movw r30,r24
 1185 0544 8081      		ld r24,Z
 1186 0546 9181      		ldd r25,Z+1
 1187 0548 9093 0000 		sts ConfigRequest+4+1,r25
 1188 054c 8093 0000 		sts ConfigRequest+4,r24
 167:ServerLLDN.c  **** 		ConfigRequest.conf.tsDuration = msgsConfRequest[i].conf.tsDuration;
 1189               		.loc 6 167 0
 1190 0550 2981      		ldd r18,Y+1
 1191 0552 3A81      		ldd r19,Y+2
 1192 0554 C901      		movw r24,r18
 1193 0556 880F      		lsl r24
 1194 0558 991F      		rol r25
 1195 055a 880F      		lsl r24
 1196 055c 991F      		rol r25
 1197 055e 880F      		lsl r24
 1198 0560 991F      		rol r25
 1199 0562 821B      		sub r24,r18
 1200 0564 930B      		sbc r25,r19
 1201 0566 8050      		subi r24,lo8(-(msgsConfRequest+6))
 1202 0568 9040      		sbci r25,hi8(-(msgsConfRequest+6))
 1203 056a FC01      		movw r30,r24
 1204 056c 8081      		ld r24,Z
 1205 056e 8F77      		andi r24,lo8(127)
 1206 0570 8F77      		andi r24,lo8(127)
 1207 0572 9091 0000 		lds r25,ConfigRequest+6
 1208 0576 9078      		andi r25,lo8(-128)
 1209 0578 892B      		or r24,r25
 1210 057a 8093 0000 		sts ConfigRequest+6,r24
 168:ServerLLDN.c  **** 		ConfigRequest.conf.macLLDNmgmtTS = msgsConfRequest[i].conf.macLLDNmgmtTS;
 1211               		.loc 6 168 0
 1212 057e 2981      		ldd r18,Y+1
 1213 0580 3A81      		ldd r19,Y+2
 1214 0582 C901      		movw r24,r18
 1215 0584 880F      		lsl r24
 1216 0586 991F      		rol r25
 1217 0588 880F      		lsl r24
 1218 058a 991F      		rol r25
 1219 058c 880F      		lsl r24
 1220 058e 991F      		rol r25
 1221 0590 821B      		sub r24,r18
 1222 0592 930B      		sbc r25,r19
 1223 0594 8050      		subi r24,lo8(-(msgsConfRequest+6))
 1224 0596 9040      		sbci r25,hi8(-(msgsConfRequest+6))
 1225 0598 FC01      		movw r30,r24
 1226 059a 8081      		ld r24,Z
 1227 059c 87FB      		bst r24,7
 1228 059e 8827      		clr r24
 1229 05a0 80F9      		bld r24,0
 1230 05a2 8795      		ror r24
 1231 05a4 8827      		clr r24
 1232 05a6 8795      		ror r24
 1233 05a8 9091 0000 		lds r25,ConfigRequest+6
 1234 05ac 9F77      		andi r25,lo8(127)
 1235 05ae 892B      		or r24,r25
 1236 05b0 8093 0000 		sts ConfigRequest+6,r24
 169:ServerLLDN.c  **** 	}
 1237               		.loc 6 169 0
 1238 05b4 0000      		nop
 1239               	/* epilogue start */
 1240 05b6 0F90      		pop __tmp_reg__
 1241 05b8 0F90      		pop __tmp_reg__
 1242 05ba DF91      		pop r29
 1243 05bc CF91      		pop r28
 1244 05be 0895      		ret
 1245               		.cfi_endproc
 1246               	.LFE137:
 1249               	appCommandInd:
 1250               	.LFB138:
 170:ServerLLDN.c  **** 	
 171:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 172:ServerLLDN.c  **** 	{
 1251               		.loc 6 172 0
 1252               		.cfi_startproc
 1253 05c0 CF93      		push r28
 1254               	.LCFI58:
 1255               		.cfi_def_cfa_offset 3
 1256               		.cfi_offset 28, -2
 1257 05c2 DF93      		push r29
 1258               	.LCFI59:
 1259               		.cfi_def_cfa_offset 4
 1260               		.cfi_offset 29, -3
 1261 05c4 00D0      		rcall .
 1262 05c6 00D0      		rcall .
 1263 05c8 00D0      		rcall .
 1264               	.LCFI60:
 1265               		.cfi_def_cfa_offset 10
 1266 05ca CDB7      		in r28,__SP_L__
 1267 05cc DEB7      		in r29,__SP_H__
 1268               	.LCFI61:
 1269               		.cfi_def_cfa_register 28
 1270               	/* prologue: function */
 1271               	/* frame size = 6 */
 1272               	/* stack size = 8 */
 1273               	.L__stack_usage = 8
 1274 05ce 9E83      		std Y+6,r25
 1275 05d0 8D83      		std Y+5,r24
 173:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1276               		.loc 6 173 0
 1277 05d2 8D81      		ldd r24,Y+5
 1278 05d4 9E81      		ldd r25,Y+6
 1279 05d6 FC01      		movw r30,r24
 1280 05d8 8085      		ldd r24,Z+8
 1281 05da 9185      		ldd r25,Z+9
 1282 05dc FC01      		movw r30,r24
 1283 05de 8081      		ld r24,Z
 1284 05e0 8D30      		cpi r24,lo8(13)
 1285 05e2 01F4      		brne .L32
 1286               	.LBB2:
 174:ServerLLDN.c  **** 		{
 175:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1287               		.loc 6 175 0
 1288 05e4 8D81      		ldd r24,Y+5
 1289 05e6 9E81      		ldd r25,Y+6
 1290 05e8 FC01      		movw r30,r24
 1291 05ea 8085      		ldd r24,Z+8
 1292 05ec 9185      		ldd r25,Z+9
 1293 05ee 9C83      		std Y+4,r25
 1294 05f0 8B83      		std Y+3,r24
 176:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);
 1295               		.loc 6 176 0
 1296 05f2 8B81      		ldd r24,Y+3
 1297 05f4 9C81      		ldd r25,Y+4
 1298 05f6 FC01      		movw r30,r24
 1299 05f8 8181      		ldd r24,Z+1
 1300 05fa 9281      		ldd r25,Z+2
 1301 05fc 0E94 0000 		call addToAckArray
 1302               	.LBE2:
 1303 0600 00C0      		rjmp .L33
 1304               	.L32:
 177:ServerLLDN.c  **** 			#if PRINT
 178:ServerLLDN.c  **** 			printf("\nDISC %d", msg->macAddr);	
 179:ServerLLDN.c  **** 			#endif
 180:ServerLLDN.c  **** 		}
 181:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1305               		.loc 6 181 0
 1306 0602 8D81      		ldd r24,Y+5
 1307 0604 9E81      		ldd r25,Y+6
 1308 0606 FC01      		movw r30,r24
 1309 0608 8085      		ldd r24,Z+8
 1310 060a 9185      		ldd r25,Z+9
 1311 060c FC01      		movw r30,r24
 1312 060e 8081      		ld r24,Z
 1313 0610 8E30      		cpi r24,lo8(14)
 1314 0612 01F4      		brne .L34
 1315               	.LBB3:
 182:ServerLLDN.c  **** 		{
 183:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1316               		.loc 6 183 0
 1317 0614 8D81      		ldd r24,Y+5
 1318 0616 9E81      		ldd r25,Y+6
 1319 0618 FC01      		movw r30,r24
 1320 061a 8085      		ldd r24,Z+8
 1321 061c 9185      		ldd r25,Z+9
 1322 061e 9A83      		std Y+2,r25
 1323 0620 8983      		std Y+1,r24
 184:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1324               		.loc 6 184 0
 1325 0622 8981      		ldd r24,Y+1
 1326 0624 9A81      		ldd r25,Y+2
 1327 0626 0E94 0000 		call addConfRequestArray
 1328               	.LBE3:
 1329 062a 00C0      		rjmp .L33
 1330               	.L34:
 185:ServerLLDN.c  **** 			#if PRINT
 186:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 187:ServerLLDN.c  **** 			#endif
 188:ServerLLDN.c  **** 		}
 189:ServerLLDN.c  **** 		else return false;			
 1331               		.loc 6 189 0
 1332 062c 80E0      		ldi r24,0
 1333 062e 00C0      		rjmp .L35
 1334               	.L33:
 190:ServerLLDN.c  **** 		return true;
 1335               		.loc 6 190 0
 1336 0630 81E0      		ldi r24,lo8(1)
 1337               	.L35:
 1338               	/* epilogue start */
 191:ServerLLDN.c  **** 	}
 1339               		.loc 6 191 0
 1340 0632 2696      		adiw r28,6
 1341 0634 0FB6      		in __tmp_reg__,__SREG__
 1342 0636 F894      		cli
 1343 0638 DEBF      		out __SP_H__,r29
 1344 063a 0FBE      		out __SREG__,__tmp_reg__
 1345 063c CDBF      		out __SP_L__,r28
 1346 063e DF91      		pop r29
 1347 0640 CF91      		pop r28
 1348 0642 0895      		ret
 1349               		.cfi_endproc
 1350               	.LFE138:
 1353               	appPanPrepareACK:
 1354               	.LFB139:
 192:ServerLLDN.c  **** 	
 193:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 194:ServerLLDN.c  **** 	{
 1355               		.loc 6 194 0
 1356               		.cfi_startproc
 1357 0644 CF93      		push r28
 1358               	.LCFI62:
 1359               		.cfi_def_cfa_offset 3
 1360               		.cfi_offset 28, -2
 1361 0646 DF93      		push r29
 1362               	.LCFI63:
 1363               		.cfi_def_cfa_offset 4
 1364               		.cfi_offset 29, -3
 1365 0648 CDB7      		in r28,__SP_L__
 1366 064a DEB7      		in r29,__SP_H__
 1367               	.LCFI64:
 1368               		.cfi_def_cfa_register 28
 1369               	/* prologue: function */
 1370               	/* frame size = 0 */
 1371               	/* stack size = 2 */
 1372               	.L__stack_usage = 2
 195:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 1373               		.loc 6 195 0
 1374 064c 1092 0000 		sts msgReq+5+1,__zero_reg__
 1375 0650 1092 0000 		sts msgReq+5,__zero_reg__
 196:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1376               		.loc 6 196 0
 1377 0654 1092 0000 		sts msgReq+7,__zero_reg__
 197:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1378               		.loc 6 197 0
 1379 0658 1092 0000 		sts msgReq+8,__zero_reg__
 198:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_ACK;
 1380               		.loc 6 198 0
 1381 065c 80E0      		ldi r24,0
 1382 065e 90E4      		ldi r25,lo8(64)
 1383 0660 9093 0000 		sts msgReq+9+1,r25
 1384 0664 8093 0000 		sts msgReq+9,r24
 199:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&ACKFrame;
 1385               		.loc 6 199 0
 1386 0668 80E0      		ldi r24,lo8(ACKFrame)
 1387 066a 90E0      		ldi r25,hi8(ACKFrame)
 1388 066c 9093 0000 		sts msgReq+13+1,r25
 1389 0670 8093 0000 		sts msgReq+13,r24
 200:ServerLLDN.c  **** 		msgReq.size					= sizeof(uint8_t)*(ACKFrame_size + 1);
 1390               		.loc 6 200 0
 1391 0674 8091 0000 		lds r24,ACKFrame_size
 1392 0678 9091 0000 		lds r25,ACKFrame_size+1
 1393 067c 8F5F      		subi r24,lo8(-(1))
 1394 067e 8093 0000 		sts msgReq+15,r24
 201:ServerLLDN.c  **** 		
 202:ServerLLDN.c  **** 	}
 1395               		.loc 6 202 0
 1396 0682 0000      		nop
 1397               	/* epilogue start */
 1398 0684 DF91      		pop r29
 1399 0686 CF91      		pop r28
 1400 0688 0895      		ret
 1401               		.cfi_endproc
 1402               	.LFE139:
 1405               	appPanReset:
 1406               	.LFB140:
 203:ServerLLDN.c  **** 
 204:ServerLLDN.c  **** 	static void appPanReset(void)
 205:ServerLLDN.c  **** 	{
 1407               		.loc 6 205 0
 1408               		.cfi_startproc
 1409 068a CF93      		push r28
 1410               	.LCFI65:
 1411               		.cfi_def_cfa_offset 3
 1412               		.cfi_offset 28, -2
 1413 068c DF93      		push r29
 1414               	.LCFI66:
 1415               		.cfi_def_cfa_offset 4
 1416               		.cfi_offset 29, -3
 1417 068e 00D0      		rcall .
 1418               	.LCFI67:
 1419               		.cfi_def_cfa_offset 6
 1420 0690 CDB7      		in r28,__SP_L__
 1421 0692 DEB7      		in r29,__SP_H__
 1422               	.LCFI68:
 1423               		.cfi_def_cfa_register 28
 1424               	/* prologue: function */
 1425               	/* frame size = 2 */
 1426               	/* stack size = 4 */
 1427               	.L__stack_usage = 4
 206:ServerLLDN.c  **** 		// prepare beacon reset message
 207:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1428               		.loc 6 207 0
 1429 0694 1092 0000 		sts msgReq+5+1,__zero_reg__
 1430 0698 1092 0000 		sts msgReq+5,__zero_reg__
 208:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1431               		.loc 6 208 0
 1432 069c 1092 0000 		sts msgReq+7,__zero_reg__
 209:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1433               		.loc 6 209 0
 1434 06a0 1092 0000 		sts msgReq+8,__zero_reg__
 210:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 1435               		.loc 6 210 0
 1436 06a4 80E4      		ldi r24,lo8(64)
 1437 06a6 94E0      		ldi r25,lo8(4)
 1438 06a8 9093 0000 		sts msgReq+9+1,r25
 1439 06ac 8093 0000 		sts msgReq+9,r24
 211:ServerLLDN.c  **** 		msgReq.data			= NULL;
 1440               		.loc 6 211 0
 1441 06b0 1092 0000 		sts msgReq+13+1,__zero_reg__
 1442 06b4 1092 0000 		sts msgReq+13,__zero_reg__
 212:ServerLLDN.c  **** 		msgReq.size			= 0;
 1443               		.loc 6 212 0
 1444 06b8 1092 0000 		sts msgReq+15,__zero_reg__
 1445               	.LBB4:
 213:ServerLLDN.c  **** 
 214:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1446               		.loc 6 214 0
 1447 06bc 1A82      		std Y+2,__zero_reg__
 1448 06be 1982      		std Y+1,__zero_reg__
 1449 06c0 00C0      		rjmp .L38
 1450               	.L39:
 215:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1451               		.loc 6 215 0 discriminator 3
 1452 06c2 8981      		ldd r24,Y+1
 1453 06c4 9A81      		ldd r25,Y+2
 1454 06c6 8050      		subi r24,lo8(-(ACKFrame+1))
 1455 06c8 9040      		sbci r25,hi8(-(ACKFrame+1))
 1456 06ca FC01      		movw r30,r24
 1457 06cc 1082      		st Z,__zero_reg__
 214:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1458               		.loc 6 214 0 discriminator 3
 1459 06ce 8981      		ldd r24,Y+1
 1460 06d0 9A81      		ldd r25,Y+2
 1461 06d2 0196      		adiw r24,1
 1462 06d4 9A83      		std Y+2,r25
 1463 06d6 8983      		std Y+1,r24
 1464               	.L38:
 214:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1465               		.loc 6 214 0 is_stmt 0 discriminator 1
 1466 06d8 8981      		ldd r24,Y+1
 1467 06da 9A81      		ldd r25,Y+2
 1468 06dc 8097      		sbiw r24,32
 1469 06de 04F0      		brlt .L39
 1470               	.LBE4:
 216:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1471               		.loc 6 216 0 is_stmt 1
 1472 06e0 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1473 06e4 1092 0000 		sts ACKFrame_size,__zero_reg__
 217:ServerLLDN.c  **** 		index_ConfRequest = 0;
 1474               		.loc 6 217 0
 1475 06e8 1092 0000 		sts index_ConfRequest+1,__zero_reg__
 1476 06ec 1092 0000 		sts index_ConfRequest,__zero_reg__
 218:ServerLLDN.c  **** 		counter_associados = 0;
 1477               		.loc 6 218 0
 1478 06f0 1092 0000 		sts counter_associados+1,__zero_reg__
 1479 06f4 1092 0000 		sts counter_associados,__zero_reg__
 219:ServerLLDN.c  **** 		biggest_timeslot_duration = 0;
 1480               		.loc 6 219 0
 1481 06f8 1092 0000 		sts biggest_timeslot_duration+1,__zero_reg__
 1482 06fc 1092 0000 		sts biggest_timeslot_duration,__zero_reg__
 220:ServerLLDN.c  **** 	}
 1483               		.loc 6 220 0
 1484 0700 0000      		nop
 1485               	/* epilogue start */
 1486 0702 0F90      		pop __tmp_reg__
 1487 0704 0F90      		pop __tmp_reg__
 1488 0706 DF91      		pop r29
 1489 0708 CF91      		pop r28
 1490 070a 0895      		ret
 1491               		.cfi_endproc
 1492               	.LFE140:
 1494               	.global	__floatsisf
 1495               	.global	__addsf3
 1496               	.global	__divsf3
 1497               	.global	__mulsf3
 1498               	.global	__fixunssfsi
 1500               	appPanDiscInit:
 1501               	.LFB141:
 221:ServerLLDN.c  **** 
 222:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 223:ServerLLDN.c  **** 	{	
 1502               		.loc 6 223 0
 1503               		.cfi_startproc
 1504 070c CF93      		push r28
 1505               	.LCFI69:
 1506               		.cfi_def_cfa_offset 3
 1507               		.cfi_offset 28, -2
 1508 070e DF93      		push r29
 1509               	.LCFI70:
 1510               		.cfi_def_cfa_offset 4
 1511               		.cfi_offset 29, -3
 1512 0710 00D0      		rcall .
 1513               	.LCFI71:
 1514               		.cfi_def_cfa_offset 6
 1515 0712 CDB7      		in r28,__SP_L__
 1516 0714 DEB7      		in r29,__SP_H__
 1517               	.LCFI72:
 1518               		.cfi_def_cfa_register 28
 1519               	/* prologue: function */
 1520               	/* frame size = 2 */
 1521               	/* stack size = 4 */
 1522               	.L__stack_usage = 4
 1523               	.LBB5:
 224:ServerLLDN.c  **** 		/* clear Ack array of previous discovery state */
 225:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1524               		.loc 6 225 0
 1525 0716 1A82      		std Y+2,__zero_reg__
 1526 0718 1982      		std Y+1,__zero_reg__
 1527 071a 00C0      		rjmp .L41
 1528               	.L42:
 226:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1529               		.loc 6 226 0 discriminator 3
 1530 071c 8981      		ldd r24,Y+1
 1531 071e 9A81      		ldd r25,Y+2
 1532 0720 8050      		subi r24,lo8(-(ACKFrame+1))
 1533 0722 9040      		sbci r25,hi8(-(ACKFrame+1))
 1534 0724 FC01      		movw r30,r24
 1535 0726 1082      		st Z,__zero_reg__
 225:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1536               		.loc 6 225 0 discriminator 3
 1537 0728 8981      		ldd r24,Y+1
 1538 072a 9A81      		ldd r25,Y+2
 1539 072c 0196      		adiw r24,1
 1540 072e 9A83      		std Y+2,r25
 1541 0730 8983      		std Y+1,r24
 1542               	.L41:
 225:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1543               		.loc 6 225 0 is_stmt 0 discriminator 1
 1544 0732 8981      		ldd r24,Y+1
 1545 0734 9A81      		ldd r25,Y+2
 1546 0736 8097      		sbiw r24,32
 1547 0738 04F0      		brlt .L42
 1548               	.LBE5:
 227:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1549               		.loc 6 227 0 is_stmt 1
 1550 073a 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1551 073e 1092 0000 		sts ACKFrame_size,__zero_reg__
 228:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 229:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 1552               		.loc 6 229 0
 1553 0742 1092 0000 		sts msgReq+5+1,__zero_reg__
 1554 0746 1092 0000 		sts msgReq+5,__zero_reg__
 230:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1555               		.loc 6 230 0
 1556 074a 1092 0000 		sts msgReq+7,__zero_reg__
 231:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1557               		.loc 6 231 0
 1558 074e 1092 0000 		sts msgReq+8,__zero_reg__
 232:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 1559               		.loc 6 232 0
 1560 0752 80E4      		ldi r24,lo8(64)
 1561 0754 91E0      		ldi r25,lo8(1)
 1562 0756 9093 0000 		sts msgReq+9+1,r25
 1563 075a 8093 0000 		sts msgReq+9,r24
 233:ServerLLDN.c  **** 		msgReq.data					= NULL;
 1564               		.loc 6 233 0
 1565 075e 1092 0000 		sts msgReq+13+1,__zero_reg__
 1566 0762 1092 0000 		sts msgReq+13,__zero_reg__
 234:ServerLLDN.c  **** 		msgReq.size					= 0;
 1567               		.loc 6 234 0
 1568 0766 1092 0000 		sts msgReq+15,__zero_reg__
 235:ServerLLDN.c  **** 		
 236:ServerLLDN.c  **** 		
 237:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 238:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 1569               		.loc 6 238 0
 1570 076a 8091 0000 		lds r24,cycles_counter
 1571 076e 8823      		tst r24
 1572 0770 01F0      		breq .+2
 1573 0772 00C0      		rjmp .L44
 239:ServerLLDN.c  **** 		{
 240:ServerLLDN.c  **** 			
 241:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 242:ServerLLDN.c  **** 		n = 127; // 180 -safe octets
 1574               		.loc 6 242 0
 1575 0774 8FE7      		ldi r24,lo8(127)
 1576 0776 8093 0000 		sts n,r24
 243:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 1577               		.loc 6 243 0
 1578 077a 8091 0000 		lds r24,n
 1579 077e 882F      		mov r24,r24
 1580 0780 90E0      		ldi r25,0
 1581 0782 0396      		adiw r24,3
 1582 0784 880F      		lsl r24
 1583 0786 991F      		rol r25
 1584 0788 092E      		mov __tmp_reg__,r25
 1585 078a 000C      		lsl r0
 1586 078c AA0B      		sbc r26,r26
 1587 078e BB0B      		sbc r27,r27
 1588 0790 BC01      		movw r22,r24
 1589 0792 CD01      		movw r24,r26
 1590 0794 0E94 0000 		call __floatsisf
 1591 0798 DC01      		movw r26,r24
 1592 079a CB01      		movw r24,r22
 1593 079c 20E0      		ldi r18,0
 1594 079e 30E0      		ldi r19,0
 1595 07a0 40E4      		ldi r20,lo8(64)
 1596 07a2 51E4      		ldi r21,lo8(65)
 1597 07a4 BC01      		movw r22,r24
 1598 07a6 CD01      		movw r24,r26
 1599 07a8 0E94 0000 		call __addsf3
 1600 07ac DC01      		movw r26,r24
 1601 07ae CB01      		movw r24,r22
 1602 07b0 20E0      		ldi r18,0
 1603 07b2 30E0      		ldi r19,0
 1604 07b4 40E2      		ldi r20,lo8(32)
 1605 07b6 52E4      		ldi r21,lo8(66)
 1606 07b8 BC01      		movw r22,r24
 1607 07ba CD01      		movw r24,r26
 1608 07bc 0E94 0000 		call __addsf3
 1609 07c0 DC01      		movw r26,r24
 1610 07c2 CB01      		movw r24,r22
 1611 07c4 20E0      		ldi r18,0
 1612 07c6 34E2      		ldi r19,lo8(36)
 1613 07c8 44E7      		ldi r20,lo8(116)
 1614 07ca 57E4      		ldi r21,lo8(71)
 1615 07cc BC01      		movw r22,r24
 1616 07ce CD01      		movw r24,r26
 1617 07d0 0E94 0000 		call __divsf3
 1618 07d4 DC01      		movw r26,r24
 1619 07d6 CB01      		movw r24,r22
 1620 07d8 8093 0000 		sts tTS,r24
 1621 07dc 9093 0000 		sts tTS+1,r25
 1622 07e0 A093 0000 		sts tTS+2,r26
 1623 07e4 B093 0000 		sts tTS+3,r27
 244:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 245:ServerLLDN.c  **** 		
 246:ServerLLDN.c  **** 			beaconInterval = 2 * numBaseTimeSlotperMgmt * (tTS) / (SYMBOL_TIME);
 1624               		.loc 6 246 0
 1625 07e8 8091 0000 		lds r24,tTS
 1626 07ec 9091 0000 		lds r25,tTS+1
 1627 07f0 A091 0000 		lds r26,tTS+2
 1628 07f4 B091 0000 		lds r27,tTS+3
 1629 07f8 20E0      		ldi r18,0
 1630 07fa 30E0      		ldi r19,0
 1631 07fc 40E8      		ldi r20,lo8(-128)
 1632 07fe 50E4      		ldi r21,lo8(64)
 1633 0800 BC01      		movw r22,r24
 1634 0802 CD01      		movw r24,r26
 1635 0804 0E94 0000 		call __mulsf3
 1636 0808 DC01      		movw r26,r24
 1637 080a CB01      		movw r24,r22
 1638 080c 2DEB      		ldi r18,lo8(-67)
 1639 080e 37E3      		ldi r19,lo8(55)
 1640 0810 46E8      		ldi r20,lo8(-122)
 1641 0812 57E3      		ldi r21,lo8(55)
 1642 0814 BC01      		movw r22,r24
 1643 0816 CD01      		movw r24,r26
 1644 0818 0E94 0000 		call __divsf3
 1645 081c DC01      		movw r26,r24
 1646 081e CB01      		movw r24,r22
 1647 0820 8093 0000 		sts beaconInterval,r24
 1648 0824 9093 0000 		sts beaconInterval+1,r25
 1649 0828 A093 0000 		sts beaconInterval+2,r26
 1650 082c B093 0000 		sts beaconInterval+3,r27
 247:ServerLLDN.c  **** 			/*
 248:ServerLLDN.c  **** 			* Configure interrupts callback functions
 249:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 250:ServerLLDN.c  **** 			*/
 251:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 1651               		.loc 6 251 0
 1652 0830 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 1653 0832 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 1654 0834 0E94 0000 		call macsc_set_cmp1_int_cb
 252:ServerLLDN.c  **** 			macsc_set_cmp3_int_cb(downlink_delay_handler);
 1655               		.loc 6 252 0
 1656 0838 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 1657 083a 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 1658 083c 0E94 0000 		call macsc_set_cmp3_int_cb
 253:ServerLLDN.c  **** 			/*
 254:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 255:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 256:ServerLLDN.c  **** 			*/
 257:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 1659               		.loc 6 257 0
 1660 0840 0E94 0000 		call macsc_enable_manual_bts
 258:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 1661               		.loc 6 258 0
 1662 0844 81E0      		ldi r24,lo8(1)
 1663 0846 0E94 0000 		call macsc_enable_cmp_int
 259:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC3);
 1664               		.loc 6 259 0
 1665 084a 83E0      		ldi r24,lo8(3)
 1666 084c 0E94 0000 		call macsc_enable_cmp_int
 260:ServerLLDN.c  **** 
 261:ServerLLDN.c  **** 			
 262:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval , MACSC_CC1);
 1667               		.loc 6 262 0
 1668 0850 8091 0000 		lds r24,beaconInterval
 1669 0854 9091 0000 		lds r25,beaconInterval+1
 1670 0858 A091 0000 		lds r26,beaconInterval+2
 1671 085c B091 0000 		lds r27,beaconInterval+3
 1672 0860 BC01      		movw r22,r24
 1673 0862 CD01      		movw r24,r26
 1674 0864 0E94 0000 		call __fixunssfsi
 1675 0868 DC01      		movw r26,r24
 1676 086a CB01      		movw r24,r22
 1677 086c 21E0      		ldi r18,lo8(1)
 1678 086e AC01      		movw r20,r24
 1679 0870 BD01      		movw r22,r26
 1680 0872 81E0      		ldi r24,lo8(1)
 1681 0874 0E94 0000 		call macsc_use_cmp
 263:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, 3 * beaconInterval / 8 , MACSC_CC3);
 1682               		.loc 6 263 0
 1683 0878 8091 0000 		lds r24,beaconInterval
 1684 087c 9091 0000 		lds r25,beaconInterval+1
 1685 0880 A091 0000 		lds r26,beaconInterval+2
 1686 0884 B091 0000 		lds r27,beaconInterval+3
 1687 0888 20E0      		ldi r18,0
 1688 088a 30E0      		ldi r19,0
 1689 088c 40E4      		ldi r20,lo8(64)
 1690 088e 50E4      		ldi r21,lo8(64)
 1691 0890 BC01      		movw r22,r24
 1692 0892 CD01      		movw r24,r26
 1693 0894 0E94 0000 		call __mulsf3
 1694 0898 DC01      		movw r26,r24
 1695 089a CB01      		movw r24,r22
 1696 089c 20E0      		ldi r18,0
 1697 089e 30E0      		ldi r19,0
 1698 08a0 40E0      		ldi r20,0
 1699 08a2 51E4      		ldi r21,lo8(65)
 1700 08a4 BC01      		movw r22,r24
 1701 08a6 CD01      		movw r24,r26
 1702 08a8 0E94 0000 		call __divsf3
 1703 08ac DC01      		movw r26,r24
 1704 08ae CB01      		movw r24,r22
 1705 08b0 BC01      		movw r22,r24
 1706 08b2 CD01      		movw r24,r26
 1707 08b4 0E94 0000 		call __fixunssfsi
 1708 08b8 DC01      		movw r26,r24
 1709 08ba CB01      		movw r24,r22
 1710 08bc 23E0      		ldi r18,lo8(3)
 1711 08be AC01      		movw r20,r24
 1712 08c0 BD01      		movw r22,r26
 1713 08c2 81E0      		ldi r24,lo8(1)
 1714 08c4 0E94 0000 		call macsc_use_cmp
 1715               	.L44:
 264:ServerLLDN.c  **** 			
 265:ServerLLDN.c  **** 			/* Timer used in testing */
 266:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 267:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 268:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 269:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval / 2, MACSC_CC2);
 270:ServerLLDN.c  **** 			#endif
 271:ServerLLDN.c  **** 			
 272:ServerLLDN.c  **** 		#endif
 273:ServerLLDN.c  **** 		}
 274:ServerLLDN.c  **** 	}
 1716               		.loc 6 274 0
 1717 08c8 0000      		nop
 1718               	/* epilogue start */
 1719 08ca 0F90      		pop __tmp_reg__
 1720 08cc 0F90      		pop __tmp_reg__
 1721 08ce DF91      		pop r29
 1722 08d0 CF91      		pop r28
 1723 08d2 0895      		ret
 1724               		.cfi_endproc
 1725               	.LFE141:
 1728               	appInit:
 1729               	.LFB142:
 275:ServerLLDN.c  **** 
 276:ServerLLDN.c  **** #else 
 277:ServerLLDN.c  **** 	static NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 278:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus;
 279:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse;
 280:ServerLLDN.c  **** 
 281:ServerLLDN.c  **** 	static uint8_t payloadSize = 0x01;
 282:ServerLLDN.c  **** 	static uint8_t assTimeSlot = 0xFF;
 283:ServerLLDN.c  **** 	static bool ack_received;
 284:ServerLLDN.c  **** 	bool associated = 0;
 285:ServerLLDN.c  **** 	
 286:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 287:ServerLLDN.c  **** 	{
 288:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 289:ServerLLDN.c  **** 	}
 290:ServerLLDN.c  **** 	
 291:ServerLLDN.c  **** 	static void cancel_frame_transmission(void)
 292:ServerLLDN.c  **** 	{
 293:ServerLLDN.c  **** 		//phyTrxSetState(0x08);
 294:ServerLLDN.c  **** 		PHY_SetRxState(true);
 295:ServerLLDN.c  **** 	}
 296:ServerLLDN.c  **** 	
 297:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 298:ServerLLDN.c  **** 	{
 299:ServerLLDN.c  **** 		macsc_enable_manual_bts();	
 300:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 301:ServerLLDN.c  **** 		PanId = rec_beacon->PanId; // s pode mudar se ele associar
 302:ServerLLDN.c  **** 		
 303:ServerLLDN.c  **** 		if( (rec_beacon->Flags.txState == DISC_MODE && !ack_received) || 
 304:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received))
 305:ServerLLDN.c  **** 		{
 306:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize* 2 - 250; 
 307:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(send_message_timeHandler);
 308:ServerLLDN.c  **** 			// macsc_set_cmp2_int_cb(cancel_frame_transmission);
 309:ServerLLDN.c  **** 			
 310:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 311:ServerLLDN.c  **** 			// macsc_enable_cmp_int(MACSC_CC2);
 312:ServerLLDN.c  **** 				  
 313:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time , MACSC_CC1);
 314:ServerLLDN.c  **** 			// macsc_use_cmp(MACSC_RELATIVE_CMP, 2*msg_wait_time , MACSC_CC2);
 315:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 316:ServerLLDN.c  **** 		}
 317:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 318:ServerLLDN.c  **** 		{
 319:ServerLLDN.c  **** 			
 320:ServerLLDN.c  **** 			ack_received = 0;
 321:ServerLLDN.c  **** 			associated = 0;
 322:ServerLLDN.c  **** 			printf("ack = %d" ,ack_received);
 323:ServerLLDN.c  **** 		}
 324:ServerLLDN.c  **** 
 325:ServerLLDN.c  **** 		return true;
 326:ServerLLDN.c  **** 	}
 327:ServerLLDN.c  **** 	
 328:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 329:ServerLLDN.c  **** 	{
 330:ServerLLDN.c  **** 		NWK_ACKFormat_t *ackframe = (NWK_ACKFormat_t*)ind->data;
 331:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 332:ServerLLDN.c  **** 		{
 333:ServerLLDN.c  **** 			int pos = APP_ADDR / 8;
 334:ServerLLDN.c  **** 			int bit_shift = 8 - APP_ADDR % 8;
 335:ServerLLDN.c  **** 			if( ackframe->ackFlags[pos] & 1 << bit_shift)	
 336:ServerLLDN.c  **** 				{
 337:ServerLLDN.c  **** 				printf("\n ack true");
 338:ServerLLDN.c  **** 				ack_received = true;
 339:ServerLLDN.c  **** 				}
 340:ServerLLDN.c  **** 		}
 341:ServerLLDN.c  **** 		return true;
 342:ServerLLDN.c  **** 	}
 343:ServerLLDN.c  **** 	
 344:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 345:ServerLLDN.c  **** 	{
 346:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 347:ServerLLDN.c  **** 		{
 348:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 349:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 350:ServerLLDN.c  **** 			{
 351:ServerLLDN.c  **** 				associated = 1;
 352:ServerLLDN.c  **** 			}
 353:ServerLLDN.c  **** 		}
 354:ServerLLDN.c  **** 		return true;
 355:ServerLLDN.c  **** 	}
 356:ServerLLDN.c  **** 
 357:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 358:ServerLLDN.c  **** 	{
 359:ServerLLDN.c  **** 		msgDiscResponse.id					= LL_DISCOVER_RESPONSE;
 360:ServerLLDN.c  **** 		msgDiscResponse.macAddr				= APP_ADDR;
 361:ServerLLDN.c  **** 		msgDiscResponse.ts_dir.tsDuration	= payloadSize;
 362:ServerLLDN.c  **** 		msgDiscResponse.ts_dir.dirIndicator = 1;
 363:ServerLLDN.c  **** 		
 364:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 365:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 366:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 367:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 368:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 369:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 370:ServerLLDN.c  **** 	}
 371:ServerLLDN.c  **** 	
 372:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 373:ServerLLDN.c  **** 	{
 374:ServerLLDN.c  **** 		msgConfigStatus.id					  = LL_CONFIGURATION_STATUS;
 375:ServerLLDN.c  **** 		msgConfigStatus.macAddr				  = APP_ADDR;
 376:ServerLLDN.c  **** 		msgConfigStatus.s_macAddr			  = APP_ADDR;
 377:ServerLLDN.c  **** 		msgConfigStatus.ts_dir.tsDuration	  = payloadSize;
 378:ServerLLDN.c  **** 		msgConfigStatus.ts_dir.dirIndicator   = 1;
 379:ServerLLDN.c  **** 		// assTimeSlot precisa ser variado quando for implementar
 380:ServerLLDN.c  **** 		// no caso inicial a rede no est em andamento ainda portanto faz
 381:ServerLLDN.c  **** 		// sentido nenhum nodo ter timeslot assigned
 382:ServerLLDN.c  **** 		msgConfigStatus.assTimeSlot = 0;
 383:ServerLLDN.c  **** 
 384:ServerLLDN.c  **** 		
 385:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 386:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 387:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 388:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 389:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 390:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 391:ServerLLDN.c  **** 	}
 392:ServerLLDN.c  **** 	
 393:ServerLLDN.c  **** #endif // APP_COORDINATOR
 394:ServerLLDN.c  **** 
 395:ServerLLDN.c  **** static void appInit(void)
 396:ServerLLDN.c  **** {
 1730               		.loc 6 396 0
 1731               		.cfi_startproc
 1732 08d4 CF93      		push r28
 1733               	.LCFI73:
 1734               		.cfi_def_cfa_offset 3
 1735               		.cfi_offset 28, -2
 1736 08d6 DF93      		push r29
 1737               	.LCFI74:
 1738               		.cfi_def_cfa_offset 4
 1739               		.cfi_offset 29, -3
 1740 08d8 CDB7      		in r28,__SP_L__
 1741 08da DEB7      		in r29,__SP_H__
 1742               	.LCFI75:
 1743               		.cfi_def_cfa_register 28
 1744               	/* prologue: function */
 1745               	/* frame size = 0 */
 1746               	/* stack size = 2 */
 1747               	.L__stack_usage = 2
 397:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 1748               		.loc 6 397 0
 1749 08dc 80E0      		ldi r24,0
 1750 08de 90E0      		ldi r25,0
 1751 08e0 0E94 0000 		call NWK_SetAddr
 398:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 1752               		.loc 6 398 0
 1753 08e4 8FE0      		ldi r24,lo8(15)
 1754 08e6 0E94 0000 		call PHY_SetChannel
 399:ServerLLDN.c  **** 	PHY_SetRxState(true);
 1755               		.loc 6 399 0
 1756 08ea 81E0      		ldi r24,lo8(1)
 1757 08ec 0E94 0000 		call PHY_SetRxState
 400:ServerLLDN.c  **** 		
 401:ServerLLDN.c  **** 	#if APP_COORDINATOR
 402:ServerLLDN.c  **** 	  /* Timer used for delay between messages */
 403:ServerLLDN.c  **** 	  tmrDelay_Discovery.interval = 2000;
 1758               		.loc 6 403 0
 1759 08f0 80ED      		ldi r24,lo8(-48)
 1760 08f2 97E0      		ldi r25,lo8(7)
 1761 08f4 A0E0      		ldi r26,0
 1762 08f6 B0E0      		ldi r27,0
 1763 08f8 8093 0000 		sts tmrDelay_Discovery+6,r24
 1764 08fc 9093 0000 		sts tmrDelay_Discovery+6+1,r25
 1765 0900 A093 0000 		sts tmrDelay_Discovery+6+2,r26
 1766 0904 B093 0000 		sts tmrDelay_Discovery+6+3,r27
 404:ServerLLDN.c  **** 	  tmrDelay_Discovery.mode = SYS_TIMER_PERIODIC_MODE;
 1767               		.loc 6 404 0
 1768 0908 81E0      		ldi r24,lo8(1)
 1769 090a 8093 0000 		sts tmrDelay_Discovery+10,r24
 405:ServerLLDN.c  **** 	  tmrDelay_Discovery.handler = tmrResetHandler;
 1770               		.loc 6 405 0
 1771 090e 80E0      		ldi r24,lo8(gs(tmrResetHandler))
 1772 0910 90E0      		ldi r25,hi8(gs(tmrResetHandler))
 1773 0912 9093 0000 		sts tmrDelay_Discovery+11+1,r25
 1774 0916 8093 0000 		sts tmrDelay_Discovery+11,r24
 406:ServerLLDN.c  **** 	  // SYS_TimerStart(&tmrDelay_Discovery);
 407:ServerLLDN.c  **** 
 408:ServerLLDN.c  **** 	  
 409:ServerLLDN.c  **** 	  /* Timer used for delay between messages */
 410:ServerLLDN.c  **** 	  tmrDelay_Configuration.interval = 2;
 1775               		.loc 6 410 0
 1776 091a 82E0      		ldi r24,lo8(2)
 1777 091c 90E0      		ldi r25,0
 1778 091e A0E0      		ldi r26,0
 1779 0920 B0E0      		ldi r27,0
 1780 0922 8093 0000 		sts tmrDelay_Configuration+6,r24
 1781 0926 9093 0000 		sts tmrDelay_Configuration+6+1,r25
 1782 092a A093 0000 		sts tmrDelay_Configuration+6+2,r26
 1783 092e B093 0000 		sts tmrDelay_Configuration+6+3,r27
 411:ServerLLDN.c  **** 	  tmrDelay_Configuration.mode = SYS_TIMER_INTERVAL_MODE;
 1784               		.loc 6 411 0
 1785 0932 1092 0000 		sts tmrDelay_Configuration+10,__zero_reg__
 412:ServerLLDN.c  **** 	  tmrDelay_Configuration.handler = tmrDelayHandler;
 1786               		.loc 6 412 0
 1787 0936 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 1788 0938 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 1789 093a 9093 0000 		sts tmrDelay_Configuration+11+1,r25
 1790 093e 8093 0000 		sts tmrDelay_Configuration+11,r24
 413:ServerLLDN.c  **** 	  
 414:ServerLLDN.c  **** 		/* 
 415:ServerLLDN.c  **** 		* Disable CSMA/CA
 416:ServerLLDN.c  **** 		* Disable auto ACK
 417:ServerLLDN.c  **** 		*/
 418:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 1791               		.loc 6 418 0
 1792 0942 8EEF      		ldi r24,lo8(-2)
 1793 0944 9AEC      		ldi r25,lo8(-54)
 1794 0946 0E94 0000 		call NWK_SetPanId
 419:ServerLLDN.c  **** 		PanId = APP_PANID;
 1795               		.loc 6 419 0
 1796 094a 8EEF      		ldi r24,lo8(-2)
 1797 094c 8093 0000 		sts PanId,r24
 420:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 1798               		.loc 6 420 0
 1799 0950 8EEF      		ldi r24,lo8(-2)
 1800 0952 8093 0000 		sts ACKFrame,r24
 421:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 1801               		.loc 6 421 0
 1802 0956 81E0      		ldi r24,lo8(1)
 1803 0958 0E94 0000 		call PHY_SetTdmaMode
 422:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 1804               		.loc 6 422 0
 1805 095c 60E0      		ldi r22,lo8(gs(appCommandInd))
 1806 095e 70E0      		ldi r23,hi8(gs(appCommandInd))
 1807 0960 83E0      		ldi r24,lo8(3)
 1808 0962 0E94 0000 		call NWK_OpenEndpoint
 423:ServerLLDN.c  **** 	#else
 424:ServerLLDN.c  **** 		/*
 425:ServerLLDN.c  **** 		 * Enable CSMA/CA
 426:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 427:ServerLLDN.c  **** 		 */
 428:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 429:ServerLLDN.c  **** 		PHY_SetOptimizedCSMAValues();
 430:ServerLLDN.c  **** 		
 431:ServerLLDN.c  **** 		payloadSize = 0x01;
 432:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 433:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 434:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 435:ServerLLDN.c  **** 		/*
 436:ServerLLDN.c  **** 		* Configure interrupts callback functions
 437:ServerLLDN.c  **** 		*/
 438:ServerLLDN.c  **** 		
 439:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 440:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 1809               		.loc 6 440 0
 1810 0966 81E0      		ldi r24,lo8(1)
 1811 0968 0E94 0000 		call PHY_SetPromiscuousMode
 441:ServerLLDN.c  **** 
 442:ServerLLDN.c  **** }
 1812               		.loc 6 442 0
 1813 096c 0000      		nop
 1814               	/* epilogue start */
 1815 096e DF91      		pop r29
 1816 0970 CF91      		pop r28
 1817 0972 0895      		ret
 1818               		.cfi_endproc
 1819               	.LFE142:
 1821               		.section	.rodata
 1822               	.LC1:
 1823 0000 0A25 642C 		.string	"\n%d, %d"
 1823      2025 6400 
 1824               		.text
 1826               	APP_TaskHandler:
 1827               	.LFB143:
 443:ServerLLDN.c  **** 
 444:ServerLLDN.c  **** static void APP_TaskHandler(void)
 445:ServerLLDN.c  **** {
 1828               		.loc 6 445 0
 1829               		.cfi_startproc
 1830 0974 CF93      		push r28
 1831               	.LCFI76:
 1832               		.cfi_def_cfa_offset 3
 1833               		.cfi_offset 28, -2
 1834 0976 DF93      		push r29
 1835               	.LCFI77:
 1836               		.cfi_def_cfa_offset 4
 1837               		.cfi_offset 29, -3
 1838 0978 CDB7      		in r28,__SP_L__
 1839 097a DEB7      		in r29,__SP_H__
 1840               	.LCFI78:
 1841               		.cfi_def_cfa_register 28
 1842               	/* prologue: function */
 1843               	/* frame size = 0 */
 1844               	/* stack size = 2 */
 1845               	.L__stack_usage = 2
 446:ServerLLDN.c  **** 	switch (appState){
 1846               		.loc 6 446 0
 1847 097c 8091 0000 		lds r24,appState
 1848 0980 882F      		mov r24,r24
 1849 0982 90E0      		ldi r25,0
 1850 0984 8230      		cpi r24,2
 1851 0986 9105      		cpc r25,__zero_reg__
 1852 0988 01F0      		breq .L48
 1853 098a 8330      		cpi r24,3
 1854 098c 9105      		cpc r25,__zero_reg__
 1855 098e 01F0      		breq .L49
 1856 0990 892B      		or r24,r25
 1857 0992 01F0      		breq .L50
 447:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 448:ServerLLDN.c  **** 		{
 449:ServerLLDN.c  **** 			appInit();
 450:ServerLLDN.c  **** 			#if APP_COORDINATOR
 451:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 452:ServerLLDN.c  **** 			#else
 453:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 454:ServerLLDN.c  **** 			#endif
 455:ServerLLDN.c  **** 			break;
 456:ServerLLDN.c  **** 		}
 457:ServerLLDN.c  **** 		case APP_STATE_SEND:
 458:ServerLLDN.c  **** 		{
 459:ServerLLDN.c  **** 			appSendData();
 460:ServerLLDN.c  **** 			#if APP_COORDINATOR
 461:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 462:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 463:ServerLLDN.c  **** 			#else
 464:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 465:ServerLLDN.c  **** 			#endif
 466:ServerLLDN.c  **** 			break;
 467:ServerLLDN.c  **** 		}
 468:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 469:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 470:ServerLLDN.c  **** 		{
 471:ServerLLDN.c  **** 			switch(appPanState)
 472:ServerLLDN.c  **** 			{
 473:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 474:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 475:ServerLLDN.c  **** 				{
 476:ServerLLDN.c  **** 					appPanReset();
 477:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 478:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 479:ServerLLDN.c  **** 					cycles_counter = 0;
 480:ServerLLDN.c  **** 					break;
 481:ServerLLDN.c  **** 				}
 482:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 483:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 484:ServerLLDN.c  **** 				{
 485:ServerLLDN.c  **** 					index_ConfRequest = 0;
 486:ServerLLDN.c  **** 					count_discovery = 0;
 487:ServerLLDN.c  **** 					count_configuration = 0; 
 488:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 489:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 490:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 491:ServerLLDN.c  **** 					 */
 492:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 12)
 493:ServerLLDN.c  **** 					{	
 494:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 495:ServerLLDN.c  **** 						counter_associados = 0;
 496:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 497:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 498:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 499:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC3);
 500:ServerLLDN.c  **** 						msgReq.options = 0;
 501:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 502:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 503:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 504:ServerLLDN.c  **** 						
 505:ServerLLDN.c  **** 					}
 506:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 507:ServerLLDN.c  **** 					else 
 508:ServerLLDN.c  **** 					{
 509:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 510:ServerLLDN.c  **** 						appPanDiscInit();
 511:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 512:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 513:ServerLLDN.c  **** 					}
 514:ServerLLDN.c  **** 					break;
 515:ServerLLDN.c  **** 				}
 516:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 517:ServerLLDN.c  **** 				{
 518:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 519:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 520:ServerLLDN.c  **** 					msgReq.data = NULL;
 521:ServerLLDN.c  **** 					msgReq.size = 0;
 522:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 523:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 524:ServerLLDN.c  **** 					break;
 525:ServerLLDN.c  **** 				}
 526:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 527:ServerLLDN.c  **** 				{
 528:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 529:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 530:ServerLLDN.c  **** 					 */
 531:ServerLLDN.c  **** 					appPanPrepareACK();
 532:ServerLLDN.c  **** 					//SYS_TimerStart(&tmrDelay_Discovery);
 533:ServerLLDN.c  **** 					
 534:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL; 
 535:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 536:ServerLLDN.c  **** 					break;
 537:ServerLLDN.c  **** 				}
 538:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 539:ServerLLDN.c  **** 				{
 540:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 541:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 542:ServerLLDN.c  **** 					msgReq.data = NULL;
 543:ServerLLDN.c  **** 					msgReq.size = 0;
 544:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 545:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 546:ServerLLDN.c  **** 					break;
 547:ServerLLDN.c  **** 
 548:ServerLLDN.c  **** 				}
 549:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 550:ServerLLDN.c  **** 				{
 551:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 552:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 553:ServerLLDN.c  **** 					msgReq.data = NULL;
 554:ServerLLDN.c  **** 					msgReq.size = 0;
 555:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 556:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 557:ServerLLDN.c  **** 					break;
 558:ServerLLDN.c  **** 				}
 559:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 560:ServerLLDN.c  **** 				{
 561:ServerLLDN.c  **** 					/* Send Configuration Requests frames 
 562:ServerLLDN.c  **** 					 * PRECISA SER MUDADO, NA IMPLEMENTAO ATUAL A LOCAO DE SLOTS NO EST CORRETA
 563:ServerLLDN.c  **** 					 */
 564:ServerLLDN.c  **** 					if(index_ConfRequest > 0)
 565:ServerLLDN.c  **** 					{
 566:ServerLLDN.c  **** 						CopyToConfigRequest(index_ConfRequest);
 567:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 568:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&ConfigRequest;
 569:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 570:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 571:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 572:ServerLLDN.c  **** 						index_ConfRequest--;
 573:ServerLLDN.c  **** 						counter_associados++;
 574:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay_Configuration);
 575:ServerLLDN.c  **** 					}
 576:ServerLLDN.c  **** 					else
 577:ServerLLDN.c  **** 					{
 578:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 579:ServerLLDN.c  **** 					}
 580:ServerLLDN.c  **** 					break;
 581:ServerLLDN.c  **** 				}
 582:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 583:ServerLLDN.c  **** 				{
 584:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 585:ServerLLDN.c  **** 					msgReq.data = NULL;
 586:ServerLLDN.c  **** 					msgReq.size = 0;
 587:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 588:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 589:ServerLLDN.c  **** 					cycles_counter++;	
 590:ServerLLDN.c  **** 					
 591:ServerLLDN.c  **** 					break;
 592:ServerLLDN.c  **** 				}
 593:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 594:ServerLLDN.c  **** 				{
 595:ServerLLDN.c  **** 					msgReq.options = 0;
 596:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 597:ServerLLDN.c  **** 					break;
 598:ServerLLDN.c  **** 				}
 599:ServerLLDN.c  **** 			}
 600:ServerLLDN.c  **** 			break;	
 601:ServerLLDN.c  **** 		}
 602:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 603:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 604:ServerLLDN.c  **** 		{
 605:ServerLLDN.c  **** 			// desativar timer espera timeslot
 606:ServerLLDN.c  **** 			if(rec_beacon->confSeqNumber == 0)
 607:ServerLLDN.c  **** 			{
 608:ServerLLDN.c  **** 				appPrepareDiscoverResponse();
 609:ServerLLDN.c  **** 			}
 610:ServerLLDN.c  **** 			else msgReq.options = 0;
 611:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 612:ServerLLDN.c  **** 			break;
 613:ServerLLDN.c  **** 		}
 614:ServerLLDN.c  **** 		
 615:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 616:ServerLLDN.c  **** 		{
 617:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 618:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0) {
 619:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 620:ServerLLDN.c  **** 			}
 621:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 622:ServerLLDN.c  **** 			else {
 623:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 624:ServerLLDN.c  **** 			}
 625:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 626:ServerLLDN.c  **** 			break;
 627:ServerLLDN.c  **** 		}
 628:ServerLLDN.c  **** 		#endif
 629:ServerLLDN.c  **** 		default:
 630:ServerLLDN.c  **** 		{
 631:ServerLLDN.c  **** 			break;
 1858               		.loc 6 631 0
 1859 0994 00C0      		rjmp .L51
 1860               	.L50:
 449:ServerLLDN.c  **** 			#if APP_COORDINATOR
 1861               		.loc 6 449 0
 1862 0996 0E94 0000 		call appInit
 451:ServerLLDN.c  **** 			#else
 1863               		.loc 6 451 0
 1864 099a 83E0      		ldi r24,lo8(3)
 1865 099c 8093 0000 		sts appState,r24
 455:ServerLLDN.c  **** 		}
 1866               		.loc 6 455 0
 1867 09a0 00C0      		rjmp .L51
 1868               	.L48:
 459:ServerLLDN.c  **** 			#if APP_COORDINATOR
 1869               		.loc 6 459 0
 1870 09a2 0E94 0000 		call appSendData
 462:ServerLLDN.c  **** 			#else
 1871               		.loc 6 462 0
 1872 09a6 83E0      		ldi r24,lo8(3)
 1873 09a8 8093 0000 		sts appState,r24
 466:ServerLLDN.c  **** 		}
 1874               		.loc 6 466 0
 1875 09ac 00C0      		rjmp .L51
 1876               	.L49:
 471:ServerLLDN.c  **** 			{
 1877               		.loc 6 471 0
 1878 09ae 8091 0000 		lds r24,appPanState
 1879 09b2 882F      		mov r24,r24
 1880 09b4 90E0      		ldi r25,0
 1881 09b6 092E      		mov __tmp_reg__,r25
 1882 09b8 000C      		lsl r0
 1883 09ba AA0B      		sbc r26,r26
 1884 09bc BB0B      		sbc r27,r27
 1885 09be 40E0      		ldi r20,0
 1886 09c0 50E0      		ldi r21,0
 1887 09c2 28E0      		ldi r18,lo8(8)
 1888 09c4 30E0      		ldi r19,0
 1889 09c6 841B      		sub r24,r20
 1890 09c8 950B      		sbc r25,r21
 1891 09ca 2817      		cp r18,r24
 1892 09cc 3907      		cpc r19,r25
 1893 09ce 00F4      		brsh .+2
 1894 09d0 00C0      		rjmp .L68
 1895 09d2 8050      		subi r24,lo8(-(gs(.L54)))
 1896 09d4 9040      		sbci r25,hi8(-(gs(.L54)))
 1897 09d6 FC01      		movw r30,r24
 1898 09d8 0C94 0000 		jmp __tablejump2__
 1899               		.section	.progmem.gcc_sw_table,"a",@progbits
 1900               		.p2align	1
 1901               	.L54:
 1902 0000 0000      		.word gs(.L53)
 1903 0002 0000      		.word gs(.L55)
 1904 0004 0000      		.word gs(.L56)
 1905 0006 0000      		.word gs(.L57)
 1906 0008 0000      		.word gs(.L58)
 1907 000a 0000      		.word gs(.L59)
 1908 000c 0000      		.word gs(.L60)
 1909 000e 0000      		.word gs(.L61)
 1910 0010 0000      		.word gs(.L62)
 1911               		.text
 1912               	.L55:
 476:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 1913               		.loc 6 476 0
 1914 09dc 0E94 0000 		call appPanReset
 477:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 1915               		.loc 6 477 0
 1916 09e0 82E0      		ldi r24,lo8(2)
 1917 09e2 8093 0000 		sts appPanState,r24
 478:ServerLLDN.c  **** 					cycles_counter = 0;
 1918               		.loc 6 478 0
 1919 09e6 82E0      		ldi r24,lo8(2)
 1920 09e8 8093 0000 		sts appState,r24
 479:ServerLLDN.c  **** 					break;
 1921               		.loc 6 479 0
 1922 09ec 1092 0000 		sts cycles_counter,__zero_reg__
 480:ServerLLDN.c  **** 				}
 1923               		.loc 6 480 0
 1924 09f0 00C0      		rjmp .L52
 1925               	.L56:
 485:ServerLLDN.c  **** 					count_discovery = 0;
 1926               		.loc 6 485 0
 1927 09f2 1092 0000 		sts index_ConfRequest+1,__zero_reg__
 1928 09f6 1092 0000 		sts index_ConfRequest,__zero_reg__
 486:ServerLLDN.c  **** 					count_configuration = 0; 
 1929               		.loc 6 486 0
 1930 09fa 1092 0000 		sts count_discovery+1,__zero_reg__
 1931 09fe 1092 0000 		sts count_discovery,__zero_reg__
 487:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 1932               		.loc 6 487 0
 1933 0a02 1092 0000 		sts count_configuration+1,__zero_reg__
 1934 0a06 1092 0000 		sts count_configuration,__zero_reg__
 492:ServerLLDN.c  **** 					{	
 1935               		.loc 6 492 0
 1936 0a0a 8091 0000 		lds r24,counter_associados
 1937 0a0e 9091 0000 		lds r25,counter_associados+1
 1938 0a12 0C97      		sbiw r24,12
 1939 0a14 01F0      		breq .L63
 492:ServerLLDN.c  **** 					{	
 1940               		.loc 6 492 0 is_stmt 0 discriminator 1
 1941 0a16 8091 0000 		lds r24,cycles_counter
 1942 0a1a 8C30      		cpi r24,lo8(12)
 1943 0a1c 00F0      		brlo .L64
 1944               	.L63:
 494:ServerLLDN.c  **** 						counter_associados = 0;
 1945               		.loc 6 494 0 is_stmt 1
 1946 0a1e 2091 0000 		lds r18,counter_associados
 1947 0a22 3091 0000 		lds r19,counter_associados+1
 1948 0a26 8091 0000 		lds r24,cycles_counter
 1949 0a2a 882F      		mov r24,r24
 1950 0a2c 90E0      		ldi r25,0
 1951 0a2e 432F      		mov r20,r19
 1952 0a30 4F93      		push r20
 1953 0a32 2F93      		push r18
 1954 0a34 292F      		mov r18,r25
 1955 0a36 2F93      		push r18
 1956 0a38 8F93      		push r24
 1957 0a3a 80E0      		ldi r24,lo8(.LC1)
 1958 0a3c 90E0      		ldi r25,hi8(.LC1)
 1959 0a3e 892F      		mov r24,r25
 1960 0a40 8F93      		push r24
 1961 0a42 80E0      		ldi r24,lo8(.LC1)
 1962 0a44 90E0      		ldi r25,hi8(.LC1)
 1963 0a46 8F93      		push r24
 1964 0a48 0E94 0000 		call printf
 1965 0a4c 0F90      		pop __tmp_reg__
 1966 0a4e 0F90      		pop __tmp_reg__
 1967 0a50 0F90      		pop __tmp_reg__
 1968 0a52 0F90      		pop __tmp_reg__
 1969 0a54 0F90      		pop __tmp_reg__
 1970 0a56 0F90      		pop __tmp_reg__
 495:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 1971               		.loc 6 495 0
 1972 0a58 1092 0000 		sts counter_associados+1,__zero_reg__
 1973 0a5c 1092 0000 		sts counter_associados,__zero_reg__
 497:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 1974               		.loc 6 497 0
 1975 0a60 81E0      		ldi r24,lo8(1)
 1976 0a62 0E94 0000 		call macsc_disable_cmp_int
 498:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC3);
 1977               		.loc 6 498 0
 1978 0a66 82E0      		ldi r24,lo8(2)
 1979 0a68 0E94 0000 		call macsc_disable_cmp_int
 499:ServerLLDN.c  **** 						msgReq.options = 0;
 1980               		.loc 6 499 0
 1981 0a6c 83E0      		ldi r24,lo8(3)
 1982 0a6e 0E94 0000 		call macsc_disable_cmp_int
 500:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 1983               		.loc 6 500 0
 1984 0a72 1092 0000 		sts msgReq+9+1,__zero_reg__
 1985 0a76 1092 0000 		sts msgReq+9,__zero_reg__
 502:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 1986               		.loc 6 502 0
 1987 0a7a 81E0      		ldi r24,lo8(1)
 1988 0a7c 8093 0000 		sts appState,r24
 503:ServerLLDN.c  **** 						
 1989               		.loc 6 503 0
 1990 0a80 1092 0000 		sts appPanState,__zero_reg__
 514:ServerLLDN.c  **** 				}
 1991               		.loc 6 514 0
 1992 0a84 00C0      		rjmp .L52
 1993               	.L64:
 510:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 1994               		.loc 6 510 0
 1995 0a86 0E94 0000 		call appPanDiscInit
 511:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 1996               		.loc 6 511 0
 1997 0a8a 81E0      		ldi r24,lo8(1)
 1998 0a8c 8093 0000 		sts appState,r24
 512:ServerLLDN.c  **** 					}
 1999               		.loc 6 512 0
 2000 0a90 83E0      		ldi r24,lo8(3)
 2001 0a92 8093 0000 		sts appPanState,r24
 514:ServerLLDN.c  **** 				}
 2002               		.loc 6 514 0
 2003 0a96 00C0      		rjmp .L52
 2004               	.L57:
 519:ServerLLDN.c  **** 					msgReq.data = NULL;
 2005               		.loc 6 519 0
 2006 0a98 80E4      		ldi r24,lo8(64)
 2007 0a9a 99E0      		ldi r25,lo8(9)
 2008 0a9c 9093 0000 		sts msgReq+9+1,r25
 2009 0aa0 8093 0000 		sts msgReq+9,r24
 520:ServerLLDN.c  **** 					msgReq.size = 0;
 2010               		.loc 6 520 0
 2011 0aa4 1092 0000 		sts msgReq+13+1,__zero_reg__
 2012 0aa8 1092 0000 		sts msgReq+13,__zero_reg__
 521:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 2013               		.loc 6 521 0
 2014 0aac 1092 0000 		sts msgReq+15,__zero_reg__
 522:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 2015               		.loc 6 522 0
 2016 0ab0 81E0      		ldi r24,lo8(1)
 2017 0ab2 8093 0000 		sts appState,r24
 523:ServerLLDN.c  **** 					break;
 2018               		.loc 6 523 0
 2019 0ab6 84E0      		ldi r24,lo8(4)
 2020 0ab8 8093 0000 		sts appPanState,r24
 524:ServerLLDN.c  **** 				}
 2021               		.loc 6 524 0
 2022 0abc 00C0      		rjmp .L52
 2023               	.L58:
 531:ServerLLDN.c  **** 					//SYS_TimerStart(&tmrDelay_Discovery);
 2024               		.loc 6 531 0
 2025 0abe 0E94 0000 		call appPanPrepareACK
 534:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2026               		.loc 6 534 0
 2027 0ac2 85E0      		ldi r24,lo8(5)
 2028 0ac4 8093 0000 		sts appPanState,r24
 535:ServerLLDN.c  **** 					break;
 2029               		.loc 6 535 0
 2030 0ac8 81E0      		ldi r24,lo8(1)
 2031 0aca 8093 0000 		sts appState,r24
 536:ServerLLDN.c  **** 				}
 2032               		.loc 6 536 0
 2033 0ace 00C0      		rjmp .L52
 2034               	.L59:
 541:ServerLLDN.c  **** 					msgReq.data = NULL;
 2035               		.loc 6 541 0
 2036 0ad0 80E4      		ldi r24,lo8(64)
 2037 0ad2 92E0      		ldi r25,lo8(2)
 2038 0ad4 9093 0000 		sts msgReq+9+1,r25
 2039 0ad8 8093 0000 		sts msgReq+9,r24
 542:ServerLLDN.c  **** 					msgReq.size = 0;
 2040               		.loc 6 542 0
 2041 0adc 1092 0000 		sts msgReq+13+1,__zero_reg__
 2042 0ae0 1092 0000 		sts msgReq+13,__zero_reg__
 543:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 2043               		.loc 6 543 0
 2044 0ae4 1092 0000 		sts msgReq+15,__zero_reg__
 544:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 2045               		.loc 6 544 0
 2046 0ae8 81E0      		ldi r24,lo8(1)
 2047 0aea 8093 0000 		sts appState,r24
 545:ServerLLDN.c  **** 					break;
 2048               		.loc 6 545 0
 2049 0aee 87E0      		ldi r24,lo8(7)
 2050 0af0 8093 0000 		sts appPanState,r24
 546:ServerLLDN.c  **** 
 2051               		.loc 6 546 0
 2052 0af4 00C0      		rjmp .L52
 2053               	.L61:
 552:ServerLLDN.c  **** 					msgReq.data = NULL;
 2054               		.loc 6 552 0
 2055 0af6 80E4      		ldi r24,lo8(64)
 2056 0af8 9AE0      		ldi r25,lo8(10)
 2057 0afa 9093 0000 		sts msgReq+9+1,r25
 2058 0afe 8093 0000 		sts msgReq+9,r24
 553:ServerLLDN.c  **** 					msgReq.size = 0;
 2059               		.loc 6 553 0
 2060 0b02 1092 0000 		sts msgReq+13+1,__zero_reg__
 2061 0b06 1092 0000 		sts msgReq+13,__zero_reg__
 554:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 2062               		.loc 6 554 0
 2063 0b0a 1092 0000 		sts msgReq+15,__zero_reg__
 555:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2064               		.loc 6 555 0
 2065 0b0e 81E0      		ldi r24,lo8(1)
 2066 0b10 8093 0000 		sts appState,r24
 556:ServerLLDN.c  **** 					break;
 2067               		.loc 6 556 0
 2068 0b14 86E0      		ldi r24,lo8(6)
 2069 0b16 8093 0000 		sts appPanState,r24
 557:ServerLLDN.c  **** 				}
 2070               		.loc 6 557 0
 2071 0b1a 00C0      		rjmp .L52
 2072               	.L60:
 564:ServerLLDN.c  **** 					{
 2073               		.loc 6 564 0
 2074 0b1c 8091 0000 		lds r24,index_ConfRequest
 2075 0b20 9091 0000 		lds r25,index_ConfRequest+1
 2076 0b24 1816      		cp __zero_reg__,r24
 2077 0b26 1906      		cpc __zero_reg__,r25
 2078 0b28 04F4      		brge .L66
 566:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 2079               		.loc 6 566 0
 2080 0b2a 8091 0000 		lds r24,index_ConfRequest
 2081 0b2e 9091 0000 		lds r25,index_ConfRequest+1
 2082 0b32 0E94 0000 		call CopyToConfigRequest
 567:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&ConfigRequest;
 2083               		.loc 6 567 0
 2084 0b36 80E0      		ldi r24,0
 2085 0b38 90E8      		ldi r25,lo8(-128)
 2086 0b3a 9093 0000 		sts msgReq+9+1,r25
 2087 0b3e 8093 0000 		sts msgReq+9,r24
 568:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 2088               		.loc 6 568 0
 2089 0b42 80E0      		ldi r24,lo8(ConfigRequest)
 2090 0b44 90E0      		ldi r25,hi8(ConfigRequest)
 2091 0b46 9093 0000 		sts msgReq+13+1,r25
 2092 0b4a 8093 0000 		sts msgReq+13,r24
 569:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2093               		.loc 6 569 0
 2094 0b4e 87E0      		ldi r24,lo8(7)
 2095 0b50 8093 0000 		sts msgReq+15,r24
 570:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2096               		.loc 6 570 0
 2097 0b54 81E0      		ldi r24,lo8(1)
 2098 0b56 8093 0000 		sts appState,r24
 571:ServerLLDN.c  **** 						index_ConfRequest--;
 2099               		.loc 6 571 0
 2100 0b5a 86E0      		ldi r24,lo8(6)
 2101 0b5c 8093 0000 		sts appPanState,r24
 572:ServerLLDN.c  **** 						counter_associados++;
 2102               		.loc 6 572 0
 2103 0b60 8091 0000 		lds r24,index_ConfRequest
 2104 0b64 9091 0000 		lds r25,index_ConfRequest+1
 2105 0b68 0197      		sbiw r24,1
 2106 0b6a 9093 0000 		sts index_ConfRequest+1,r25
 2107 0b6e 8093 0000 		sts index_ConfRequest,r24
 573:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay_Configuration);
 2108               		.loc 6 573 0
 2109 0b72 8091 0000 		lds r24,counter_associados
 2110 0b76 9091 0000 		lds r25,counter_associados+1
 2111 0b7a 0196      		adiw r24,1
 2112 0b7c 9093 0000 		sts counter_associados+1,r25
 2113 0b80 8093 0000 		sts counter_associados,r24
 574:ServerLLDN.c  **** 					}
 2114               		.loc 6 574 0
 2115 0b84 80E0      		ldi r24,lo8(tmrDelay_Configuration)
 2116 0b86 90E0      		ldi r25,hi8(tmrDelay_Configuration)
 2117 0b88 0E94 0000 		call SYS_TimerStart
 580:ServerLLDN.c  **** 				}
 2118               		.loc 6 580 0
 2119 0b8c 00C0      		rjmp .L52
 2120               	.L66:
 578:ServerLLDN.c  **** 					}
 2121               		.loc 6 578 0
 2122 0b8e 88E0      		ldi r24,lo8(8)
 2123 0b90 8093 0000 		sts appPanState,r24
 580:ServerLLDN.c  **** 				}
 2124               		.loc 6 580 0
 2125 0b94 00C0      		rjmp .L52
 2126               	.L62:
 584:ServerLLDN.c  **** 					msgReq.data = NULL;
 2127               		.loc 6 584 0
 2128 0b96 80E4      		ldi r24,lo8(64)
 2129 0b98 92E1      		ldi r25,lo8(18)
 2130 0b9a 9093 0000 		sts msgReq+9+1,r25
 2131 0b9e 8093 0000 		sts msgReq+9,r24
 585:ServerLLDN.c  **** 					msgReq.size = 0;
 2132               		.loc 6 585 0
 2133 0ba2 1092 0000 		sts msgReq+13+1,__zero_reg__
 2134 0ba6 1092 0000 		sts msgReq+13,__zero_reg__
 586:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 2135               		.loc 6 586 0
 2136 0baa 1092 0000 		sts msgReq+15,__zero_reg__
 587:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2137               		.loc 6 587 0
 2138 0bae 81E0      		ldi r24,lo8(1)
 2139 0bb0 8093 0000 		sts appState,r24
 588:ServerLLDN.c  **** 					cycles_counter++;	
 2140               		.loc 6 588 0
 2141 0bb4 82E0      		ldi r24,lo8(2)
 2142 0bb6 8093 0000 		sts appPanState,r24
 589:ServerLLDN.c  **** 					
 2143               		.loc 6 589 0
 2144 0bba 8091 0000 		lds r24,cycles_counter
 2145 0bbe 8F5F      		subi r24,lo8(-(1))
 2146 0bc0 8093 0000 		sts cycles_counter,r24
 591:ServerLLDN.c  **** 				}
 2147               		.loc 6 591 0
 2148 0bc4 00C0      		rjmp .L52
 2149               	.L53:
 595:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2150               		.loc 6 595 0
 2151 0bc6 1092 0000 		sts msgReq+9+1,__zero_reg__
 2152 0bca 1092 0000 		sts msgReq+9,__zero_reg__
 596:ServerLLDN.c  **** 					break;
 2153               		.loc 6 596 0
 2154 0bce 81E0      		ldi r24,lo8(1)
 2155 0bd0 8093 0000 		sts appState,r24
 597:ServerLLDN.c  **** 				}
 2156               		.loc 6 597 0
 2157 0bd4 0000      		nop
 2158               	.L52:
 2159               	.L68:
 600:ServerLLDN.c  **** 		}
 2160               		.loc 6 600 0
 2161 0bd6 0000      		nop
 2162               	.L51:
 632:ServerLLDN.c  **** 		}
 633:ServerLLDN.c  **** 	}
 634:ServerLLDN.c  **** }
 2163               		.loc 6 634 0
 2164 0bd8 0000      		nop
 2165               	/* epilogue start */
 2166 0bda DF91      		pop r29
 2167 0bdc CF91      		pop r28
 2168 0bde 0895      		ret
 2169               		.cfi_endproc
 2170               	.LFE143:
 2172               		.section	.rodata
 2173               	.LC0:
 2174 0008 00        		.byte	0
 2175 0009 C2        		.byte	-62
 2176 000a 01        		.byte	1
 2177 000b 00        		.byte	0
 2178 000c 03        		.byte	3
 2179 000d 00        		.byte	0
 2180 000e 00        		.byte	0
 2181               		.text
 2182               	.global	main
 2184               	main:
 2185               	.LFB144:
 635:ServerLLDN.c  **** 
 636:ServerLLDN.c  **** 	/*****************************************************************************
 637:ServerLLDN.c  **** 	*****************************************************************************/
 638:ServerLLDN.c  **** 	int main(void)
 639:ServerLLDN.c  **** 	{
 2186               		.loc 6 639 0
 2187               		.cfi_startproc
 2188 0be0 0F93      		push r16
 2189               	.LCFI79:
 2190               		.cfi_def_cfa_offset 3
 2191               		.cfi_offset 16, -2
 2192 0be2 1F93      		push r17
 2193               	.LCFI80:
 2194               		.cfi_def_cfa_offset 4
 2195               		.cfi_offset 17, -3
 2196 0be4 CF93      		push r28
 2197               	.LCFI81:
 2198               		.cfi_def_cfa_offset 5
 2199               		.cfi_offset 28, -4
 2200 0be6 DF93      		push r29
 2201               	.LCFI82:
 2202               		.cfi_def_cfa_offset 6
 2203               		.cfi_offset 29, -5
 2204 0be8 CDB7      		in r28,__SP_L__
 2205 0bea DEB7      		in r29,__SP_H__
 2206               	.LCFI83:
 2207               		.cfi_def_cfa_register 28
 2208 0bec 2797      		sbiw r28,7
 2209               	.LCFI84:
 2210               		.cfi_def_cfa_offset 13
 2211 0bee 0FB6      		in __tmp_reg__,__SREG__
 2212 0bf0 F894      		cli
 2213 0bf2 DEBF      		out __SP_H__,r29
 2214 0bf4 0FBE      		out __SREG__,__tmp_reg__
 2215 0bf6 CDBF      		out __SP_L__,r28
 2216               	/* prologue: function */
 2217               	/* frame size = 7 */
 2218               	/* stack size = 11 */
 2219               	.L__stack_usage = 11
 640:ServerLLDN.c  **** 		sysclk_init();
 2220               		.loc 6 640 0
 2221 0bf8 0E94 0000 		call sysclk_init
 641:ServerLLDN.c  **** 		board_init();
 2222               		.loc 6 641 0
 2223 0bfc 0E94 0000 		call board_init
 642:ServerLLDN.c  **** 
 643:ServerLLDN.c  **** 		SYS_Init();
 2224               		.loc 6 643 0
 2225 0c00 0E94 0000 		call SYS_Init
 644:ServerLLDN.c  **** 		/* Disable CSMA/CA
 645:ServerLLDN.c  **** 		 * Disable auto ACK
 646:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
 647:ServerLLDN.c  **** 		 */
 648:ServerLLDN.c  **** 
 649:ServerLLDN.c  **** 		sm_init();
 2226               		.loc 6 649 0
 2227 0c04 0E94 0000 		call sm_init
 650:ServerLLDN.c  **** 
 651:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
 652:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 653:ServerLLDN.c  **** 		irq_initialize_vectors();
 654:ServerLLDN.c  **** 	#endif
 655:ServerLLDN.c  **** 		cpu_irq_enable();
 2228               		.loc 6 655 0
 2229               	/* #APP */
 2230               	 ;  655 "ServerLLDN.c" 1
 2231 0c08 7894      		sei
 2232               	 ;  0 "" 2
 656:ServerLLDN.c  **** 
 657:ServerLLDN.c  **** 	#if 1
 658:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 659:ServerLLDN.c  **** 		stdio_usb_init();
 660:ServerLLDN.c  **** 	#else
 661:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 2233               		.loc 6 661 0
 2234               	/* #NOAPP */
 2235 0c0a 27E0      		ldi r18,lo8(7)
 2236 0c0c E0E0      		ldi r30,lo8(.LC0)
 2237 0c0e F0E0      		ldi r31,hi8(.LC0)
 2238 0c10 CE01      		movw r24,r28
 2239 0c12 0196      		adiw r24,1
 2240 0c14 DC01      		movw r26,r24
 2241               		0:
 2242 0c16 0190      		ld r0,Z+
 2243 0c18 0D92      		st X+,r0
 2244 0c1a 2A95      		dec r18
 2245 0c1c 01F4      		brne 0b
 662:ServerLLDN.c  **** 		{
 663:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
 664:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
 665:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
 666:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
 667:ServerLLDN.c  **** 		};
 668:ServerLLDN.c  **** 
 669:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 2246               		.loc 6 669 0
 2247 0c1e CE01      		movw r24,r28
 2248 0c20 0196      		adiw r24,1
 2249 0c22 BC01      		movw r22,r24
 2250 0c24 80EC      		ldi r24,lo8(-64)
 2251 0c26 90E0      		ldi r25,0
 2252 0c28 0E94 0000 		call stdio_serial_init
 670:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 2253               		.loc 6 670 0
 2254 0c2c 80EC      		ldi r24,lo8(-64)
 2255 0c2e 90E0      		ldi r25,0
 2256 0c30 0E94 0000 		call usart_double_baud_enable
 671:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 2257               		.loc 6 671 0
 2258 0c34 0E94 0000 		call sysclk_get_source_clock_hz
 2259 0c38 DC01      		movw r26,r24
 2260 0c3a CB01      		movw r24,r22
 2261 0c3c 8C01      		movw r16,r24
 2262 0c3e 9D01      		movw r18,r26
 2263 0c40 40E0      		ldi r20,0
 2264 0c42 52EC      		ldi r21,lo8(-62)
 2265 0c44 61E0      		ldi r22,lo8(1)
 2266 0c46 70E0      		ldi r23,0
 2267 0c48 80EC      		ldi r24,lo8(-64)
 2268 0c4a 90E0      		ldi r25,0
 2269 0c4c 0E94 0000 		call usart_set_baudrate_precalculated
 2270               	.L70:
 672:ServerLLDN.c  **** 
 673:ServerLLDN.c  **** 	#endif
 674:ServerLLDN.c  **** 	#endif
 675:ServerLLDN.c  **** 		for(;;)
 676:ServerLLDN.c  **** 		{
 677:ServerLLDN.c  **** 			SYS_TaskHandler();
 2271               		.loc 6 677 0 discriminator 1
 2272 0c50 0E94 0000 		call SYS_TaskHandler
 678:ServerLLDN.c  **** 			APP_TaskHandler();
 2273               		.loc 6 678 0 discriminator 1
 2274 0c54 0E94 0000 		call APP_TaskHandler
 679:ServerLLDN.c  **** 		}
 2275               		.loc 6 679 0 discriminator 1
 2276 0c58 00C0      		rjmp .L70
 2277               		.cfi_endproc
 2278               	.LFE144:
 2280               	.Letext0:
 2281               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 2282               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 2283               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 2284               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 2285               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 2286               		.file 12 "lldn.h"
 2287               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 2288               		.file 14 "config/config.h"
 2289               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:2      *ABS*:0000003e __SP_H__
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:3      *ABS*:0000003d __SP_L__
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:4      *ABS*:0000003f __SREG__
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:15     .bss.tTS:00000000 tTS
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:19     .text:00000000 sysclk_get_main_hz
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:56     .text:0000001a sysclk_get_source_clock_hz
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:93     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:105    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:117    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:128    .text:00000034 usart_double_baud_enable
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:177    .text:00000062 usart_serial_init
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:272    .text:000000de usart_serial_putchar
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:316    .text:00000106 usart_serial_getchar
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:367    .text:0000013c stdio_serial_init
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:438    .text:0000019e macsc_enable_manual_bts
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:492    .bss.appState:00000000 appState
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:497    .bss.msgReq:00000000 msgReq
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:502    .bss.PanId:00000000 PanId
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:506    .text:000001d2 appSendData
                            *COM*:00000004 beaconInterval
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:551    .data.appPanState:00000000 appPanState
                            *COM*:00000021 ACKFrame
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:558    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:564    .data.cycles_counter:00000000 cycles_counter
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:570    .bss.counter_associados:00000000 counter_associados
                            *COM*:000006f2 msgsConfRequest
                            *COM*:00000007 ConfigRequest
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:578    .bss.macLLDNnumUplinkTS:00000000 macLLDNnumUplinkTS
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:584    .bss.biggest_timeslot_duration:00000000 biggest_timeslot_duration
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:590    .bss.index_ConfRequest:00000000 index_ConfRequest
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:595    .bss.tmrDelay_Discovery:00000000 tmrDelay_Discovery
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:600    .bss.tmrDelay_Configuration:00000000 tmrDelay_Configuration
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:606    .bss.count_discovery:00000000 count_discovery
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:612    .bss.count_configuration:00000000 count_configuration
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:616    .text:000001f6 tmrDelayHandler
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:656    .text:00000216 tmrResetHandler
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:698    .text:0000023a lldn_server_beacon
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:733    .text:00000254 downlink_delay_handler
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:773    .text:00000278 addToAckArray
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:894    .text:00000336 addConfRequestArray
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1077   .text:00000492 CopyToConfigRequest
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1249   .text:000005c0 appCommandInd
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1353   .text:00000644 appPanPrepareACK
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1405   .text:0000068a appPanReset
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1500   .text:0000070c appPanDiscInit
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1728   .text:000008d4 appInit
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:1826   .text:00000974 APP_TaskHandler
C:\Users\guilh\AppData\Local\Temp\ccfDnPCe.s:2184   .text:00000be0 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
NWK_DataReq
__floatsisf
__addsf3
__divsf3
__mulsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_set_cmp3_int_cb
macsc_enable_cmp_int
macsc_use_cmp
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
NWK_OpenEndpoint
PHY_SetPromiscuousMode
__tablejump2__
printf
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
