   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  91               	baudctrl_1mhz:
  92 0000 3300      		.word	51
  93 0002 1900      		.word	25
  94 0004 0C00      		.word	12
  95 0006 0600      		.word	6
  96 0008 0300      		.word	3
  97 000a 0200      		.word	2
  98 000c 0100      		.word	1
  99 000e FF00      		.word	255
 100               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 103               	baudctrl_8mhz:
 104 0000 A001      		.word	416
 105 0002 CF00      		.word	207
 106 0004 6700      		.word	103
 107 0006 3300      		.word	51
 108 0008 1900      		.word	25
 109 000a 0C00      		.word	12
 110 000c 0700      		.word	7
 111 000e 0800      		.word	8
 112               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 115               	baudctrl_16mhz:
 116 0000 4003      		.word	832
 117 0002 A001      		.word	416
 118 0004 CF00      		.word	207
 119 0006 6700      		.word	103
 120 0008 3300      		.word	51
 121 000a 1900      		.word	25
 122 000c 1000      		.word	16
 123 000e 1000      		.word	16
 124               		.text
 126               	usart_double_baud_enable:
 127               	.LFB101:
 128               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 129               		.loc 2 515 0
 130               		.cfi_startproc
 131 0034 CF93      		push r28
 132               	.LCFI6:
 133               		.cfi_def_cfa_offset 3
 134               		.cfi_offset 28, -2
 135 0036 DF93      		push r29
 136               	.LCFI7:
 137               		.cfi_def_cfa_offset 4
 138               		.cfi_offset 29, -3
 139 0038 00D0      		rcall .
 140               	.LCFI8:
 141               		.cfi_def_cfa_offset 6
 142 003a CDB7      		in r28,__SP_L__
 143 003c DEB7      		in r29,__SP_H__
 144               	.LCFI9:
 145               		.cfi_def_cfa_register 28
 146               	/* prologue: function */
 147               	/* frame size = 2 */
 148               	/* stack size = 4 */
 149               	.L__stack_usage = 4
 150 003e 9A83      		std Y+2,r25
 151 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 152               		.loc 2 516 0
 153 0042 8981      		ldd r24,Y+1
 154 0044 9A81      		ldd r25,Y+2
 155 0046 FC01      		movw r30,r24
 156 0048 8081      		ld r24,Z
 157 004a 282F      		mov r18,r24
 158 004c 2260      		ori r18,lo8(2)
 159 004e 8981      		ldd r24,Y+1
 160 0050 9A81      		ldd r25,Y+2
 161 0052 FC01      		movw r30,r24
 162 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 163               		.loc 2 517 0
 164 0056 0000      		nop
 165               	/* epilogue start */
 166 0058 0F90      		pop __tmp_reg__
 167 005a 0F90      		pop __tmp_reg__
 168 005c DF91      		pop r29
 169 005e CF91      		pop r28
 170 0060 0895      		ret
 171               		.cfi_endproc
 172               	.LFE101:
 175               	usart_serial_init:
 176               	.LFB104:
 177               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 178               		.loc 3 77 0
 179               		.cfi_startproc
 180 0062 CF93      		push r28
 181               	.LCFI10:
 182               		.cfi_def_cfa_offset 3
 183               		.cfi_offset 28, -2
 184 0064 DF93      		push r29
 185               	.LCFI11:
 186               		.cfi_def_cfa_offset 4
 187               		.cfi_offset 29, -3
 188 0066 CDB7      		in r28,__SP_L__
 189 0068 DEB7      		in r29,__SP_H__
 190               	.LCFI12:
 191               		.cfi_def_cfa_register 28
 192 006a 2B97      		sbiw r28,11
 193               	.LCFI13:
 194               		.cfi_def_cfa_offset 15
 195 006c 0FB6      		in __tmp_reg__,__SREG__
 196 006e F894      		cli
 197 0070 DEBF      		out __SP_H__,r29
 198 0072 0FBE      		out __SREG__,__tmp_reg__
 199 0074 CDBF      		out __SP_L__,r28
 200               	/* prologue: function */
 201               	/* frame size = 11 */
 202               	/* stack size = 13 */
 203               	.L__stack_usage = 13
 204 0076 9987      		std Y+9,r25
 205 0078 8887      		std Y+8,r24
 206 007a 7B87      		std Y+11,r23
 207 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 208               		.loc 3 80 0
 209 007e 8A85      		ldd r24,Y+10
 210 0080 9B85      		ldd r25,Y+11
 211 0082 FC01      		movw r30,r24
 212 0084 8481      		ldd r24,Z+4
 213 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 214               		.loc 3 81 0
 215 0088 8A85      		ldd r24,Y+10
 216 008a 9B85      		ldd r25,Y+11
 217 008c FC01      		movw r30,r24
 218 008e 8581      		ldd r24,Z+5
 219 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 220               		.loc 3 82 0
 221 0092 8A85      		ldd r24,Y+10
 222 0094 9B85      		ldd r25,Y+11
 223 0096 FC01      		movw r30,r24
 224 0098 8681      		ldd r24,Z+6
 225 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 226               		.loc 3 83 0
 227 009c 8A85      		ldd r24,Y+10
 228 009e 9B85      		ldd r25,Y+11
 229 00a0 FC01      		movw r30,r24
 230 00a2 8081      		ld r24,Z
 231 00a4 9181      		ldd r25,Z+1
 232 00a6 A281      		ldd r26,Z+2
 233 00a8 B381      		ldd r27,Z+3
 234 00aa 8983      		std Y+1,r24
 235 00ac 9A83      		std Y+2,r25
 236 00ae AB83      		std Y+3,r26
 237 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 238               		.loc 3 85 0
 239 00b2 8885      		ldd r24,Y+8
 240 00b4 9985      		ldd r25,Y+9
 241 00b6 9E01      		movw r18,r28
 242 00b8 2F5F      		subi r18,-1
 243 00ba 3F4F      		sbci r19,-1
 244 00bc B901      		movw r22,r18
 245 00be 0E94 0000 		call usart_init_rs232
 246 00c2 8823      		tst r24
 247 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 248               		.loc 3 86 0
 249 00c6 81E0      		ldi r24,lo8(1)
 250 00c8 00C0      		rjmp .L9
 251               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 252               		.loc 3 88 0
 253 00ca 80E0      		ldi r24,0
 254               	.L9:
 255               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 256               		.loc 3 90 0 discriminator 1
 257 00cc 2B96      		adiw r28,11
 258 00ce 0FB6      		in __tmp_reg__,__SREG__
 259 00d0 F894      		cli
 260 00d2 DEBF      		out __SP_H__,r29
 261 00d4 0FBE      		out __SREG__,__tmp_reg__
 262 00d6 CDBF      		out __SP_L__,r28
 263 00d8 DF91      		pop r29
 264 00da CF91      		pop r28
 265 00dc 0895      		ret
 266               		.cfi_endproc
 267               	.LFE104:
 270               	usart_serial_putchar:
 271               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 272               		.loc 3 100 0
 273               		.cfi_startproc
 274 00de CF93      		push r28
 275               	.LCFI14:
 276               		.cfi_def_cfa_offset 3
 277               		.cfi_offset 28, -2
 278 00e0 DF93      		push r29
 279               	.LCFI15:
 280               		.cfi_def_cfa_offset 4
 281               		.cfi_offset 29, -3
 282 00e2 00D0      		rcall .
 283 00e4 1F92      		push __zero_reg__
 284               	.LCFI16:
 285               		.cfi_def_cfa_offset 7
 286 00e6 CDB7      		in r28,__SP_L__
 287 00e8 DEB7      		in r29,__SP_H__
 288               	.LCFI17:
 289               		.cfi_def_cfa_register 28
 290               	/* prologue: function */
 291               	/* frame size = 3 */
 292               	/* stack size = 5 */
 293               	.L__stack_usage = 5
 294 00ea 9A83      		std Y+2,r25
 295 00ec 8983      		std Y+1,r24
 296 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 297               		.loc 3 101 0
 298 00f0 8981      		ldd r24,Y+1
 299 00f2 9A81      		ldd r25,Y+2
 300 00f4 6B81      		ldd r22,Y+3
 301 00f6 0E94 0000 		call usart_putchar
 302               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 303               		.loc 3 102 0
 304 00fa 0F90      		pop __tmp_reg__
 305 00fc 0F90      		pop __tmp_reg__
 306 00fe 0F90      		pop __tmp_reg__
 307 0100 DF91      		pop r29
 308 0102 CF91      		pop r28
 309 0104 0895      		ret
 310               		.cfi_endproc
 311               	.LFE105:
 314               	usart_serial_getchar:
 315               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 316               		.loc 3 111 0
 317               		.cfi_startproc
 318 0106 CF93      		push r28
 319               	.LCFI18:
 320               		.cfi_def_cfa_offset 3
 321               		.cfi_offset 28, -2
 322 0108 DF93      		push r29
 323               	.LCFI19:
 324               		.cfi_def_cfa_offset 4
 325               		.cfi_offset 29, -3
 326 010a 00D0      		rcall .
 327 010c 00D0      		rcall .
 328               	.LCFI20:
 329               		.cfi_def_cfa_offset 8
 330 010e CDB7      		in r28,__SP_L__
 331 0110 DEB7      		in r29,__SP_H__
 332               	.LCFI21:
 333               		.cfi_def_cfa_register 28
 334               	/* prologue: function */
 335               	/* frame size = 4 */
 336               	/* stack size = 6 */
 337               	.L__stack_usage = 6
 338 0112 9A83      		std Y+2,r25
 339 0114 8983      		std Y+1,r24
 340 0116 7C83      		std Y+4,r23
 341 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 342               		.loc 3 112 0
 343 011a 8981      		ldd r24,Y+1
 344 011c 9A81      		ldd r25,Y+2
 345 011e 0E94 0000 		call usart_getchar
 346 0122 282F      		mov r18,r24
 347 0124 8B81      		ldd r24,Y+3
 348 0126 9C81      		ldd r25,Y+4
 349 0128 FC01      		movw r30,r24
 350 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 351               		.loc 3 113 0
 352 012c 0000      		nop
 353               	/* epilogue start */
 354 012e 0F90      		pop __tmp_reg__
 355 0130 0F90      		pop __tmp_reg__
 356 0132 0F90      		pop __tmp_reg__
 357 0134 0F90      		pop __tmp_reg__
 358 0136 DF91      		pop r29
 359 0138 CF91      		pop r28
 360 013a 0895      		ret
 361               		.cfi_endproc
 362               	.LFE106:
 365               	stdio_serial_init:
 366               	.LFB107:
 367               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 368               		.loc 4 90 0
 369               		.cfi_startproc
 370 013c CF93      		push r28
 371               	.LCFI22:
 372               		.cfi_def_cfa_offset 3
 373               		.cfi_offset 28, -2
 374 013e DF93      		push r29
 375               	.LCFI23:
 376               		.cfi_def_cfa_offset 4
 377               		.cfi_offset 29, -3
 378 0140 00D0      		rcall .
 379 0142 00D0      		rcall .
 380               	.LCFI24:
 381               		.cfi_def_cfa_offset 8
 382 0144 CDB7      		in r28,__SP_L__
 383 0146 DEB7      		in r29,__SP_H__
 384               	.LCFI25:
 385               		.cfi_def_cfa_register 28
 386               	/* prologue: function */
 387               	/* frame size = 4 */
 388               	/* stack size = 6 */
 389               	.L__stack_usage = 6
 390 0148 9A83      		std Y+2,r25
 391 014a 8983      		std Y+1,r24
 392 014c 7C83      		std Y+4,r23
 393 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 394               		.loc 4 91 0
 395 0150 8981      		ldd r24,Y+1
 396 0152 9A81      		ldd r25,Y+2
 397 0154 9093 0000 		sts stdio_base+1,r25
 398 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 399               		.loc 4 92 0
 400 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 401 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 402 0160 9093 0000 		sts ptr_put+1,r25
 403 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 404               		.loc 4 93 0
 405 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 406 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 407 016c 9093 0000 		sts ptr_get+1,r25
 408 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 409               		.loc 4 95 0
 410 0174 2B81      		ldd r18,Y+3
 411 0176 3C81      		ldd r19,Y+4
 412 0178 8981      		ldd r24,Y+1
 413 017a 9A81      		ldd r25,Y+2
 414 017c B901      		movw r22,r18
 415 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 416               		.loc 4 107 0
 417 0182 60E0      		ldi r22,lo8(gs(_read))
 418 0184 70E0      		ldi r23,hi8(gs(_read))
 419 0186 80E0      		ldi r24,lo8(gs(_write))
 420 0188 90E0      		ldi r25,hi8(gs(_write))
 421 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 422               		.loc 4 120 0
 423 018e 0000      		nop
 424               	/* epilogue start */
 425 0190 0F90      		pop __tmp_reg__
 426 0192 0F90      		pop __tmp_reg__
 427 0194 0F90      		pop __tmp_reg__
 428 0196 0F90      		pop __tmp_reg__
 429 0198 DF91      		pop r29
 430 019a CF91      		pop r28
 431 019c 0895      		ret
 432               		.cfi_endproc
 433               	.LFE107:
 436               	macsc_read32:
 437               	.LFB108:
 438               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 439               		.loc 5 120 0
 440               		.cfi_startproc
 441 019e CF93      		push r28
 442               	.LCFI26:
 443               		.cfi_def_cfa_offset 3
 444               		.cfi_offset 28, -2
 445 01a0 DF93      		push r29
 446               	.LCFI27:
 447               		.cfi_def_cfa_offset 4
 448               		.cfi_offset 29, -3
 449 01a2 CDB7      		in r28,__SP_L__
 450 01a4 DEB7      		in r29,__SP_H__
 451               	.LCFI28:
 452               		.cfi_def_cfa_register 28
 453 01a6 2C97      		sbiw r28,12
 454               	.LCFI29:
 455               		.cfi_def_cfa_offset 16
 456 01a8 0FB6      		in __tmp_reg__,__SREG__
 457 01aa F894      		cli
 458 01ac DEBF      		out __SP_H__,r29
 459 01ae 0FBE      		out __SREG__,__tmp_reg__
 460 01b0 CDBF      		out __SP_L__,r28
 461               	/* prologue: function */
 462               	/* frame size = 12 */
 463               	/* stack size = 14 */
 464               	.L__stack_usage = 14
 465 01b2 9E83      		std Y+6,r25
 466 01b4 8D83      		std Y+5,r24
 467 01b6 7887      		std Y+8,r23
 468 01b8 6F83      		std Y+7,r22
 469 01ba 5A87      		std Y+10,r21
 470 01bc 4987      		std Y+9,r20
 471 01be 3C87      		std Y+12,r19
 472 01c0 2B87      		std Y+11,r18
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 473               		.loc 5 127 0
 474 01c2 8B85      		ldd r24,Y+11
 475 01c4 9C85      		ldd r25,Y+12
 476 01c6 FC01      		movw r30,r24
 477 01c8 8081      		ld r24,Z
 478 01ca 8983      		std Y+1,r24
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 479               		.loc 5 128 0
 480 01cc 8985      		ldd r24,Y+9
 481 01ce 9A85      		ldd r25,Y+10
 482 01d0 FC01      		movw r30,r24
 483 01d2 8081      		ld r24,Z
 484 01d4 8A83      		std Y+2,r24
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 485               		.loc 5 129 0
 486 01d6 8F81      		ldd r24,Y+7
 487 01d8 9885      		ldd r25,Y+8
 488 01da FC01      		movw r30,r24
 489 01dc 8081      		ld r24,Z
 490 01de 8B83      		std Y+3,r24
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 491               		.loc 5 130 0
 492 01e0 8D81      		ldd r24,Y+5
 493 01e2 9E81      		ldd r25,Y+6
 494 01e4 FC01      		movw r30,r24
 495 01e6 8081      		ld r24,Z
 496 01e8 8C83      		std Y+4,r24
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 497               		.loc 5 132 0
 498 01ea 8981      		ldd r24,Y+1
 499 01ec 9A81      		ldd r25,Y+2
 500 01ee AB81      		ldd r26,Y+3
 501 01f0 BC81      		ldd r27,Y+4
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 502               		.loc 5 133 0
 503 01f2 BC01      		movw r22,r24
 504 01f4 CD01      		movw r24,r26
 505               	/* epilogue start */
 506 01f6 2C96      		adiw r28,12
 507 01f8 0FB6      		in __tmp_reg__,__SREG__
 508 01fa F894      		cli
 509 01fc DEBF      		out __SP_H__,r29
 510 01fe 0FBE      		out __SREG__,__tmp_reg__
 511 0200 CDBF      		out __SP_L__,r28
 512 0202 DF91      		pop r29
 513 0204 CF91      		pop r28
 514 0206 0895      		ret
 515               		.cfi_endproc
 516               	.LFE108:
 519               	macsc_write_count:
 520               	.LFB113:
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 521               		.loc 5 345 0
 522               		.cfi_startproc
 523 0208 CF93      		push r28
 524               	.LCFI30:
 525               		.cfi_def_cfa_offset 3
 526               		.cfi_offset 28, -2
 527 020a DF93      		push r29
 528               	.LCFI31:
 529               		.cfi_def_cfa_offset 4
 530               		.cfi_offset 29, -3
 531 020c CDB7      		in r28,__SP_L__
 532 020e DEB7      		in r29,__SP_H__
 533               	.LCFI32:
 534               		.cfi_def_cfa_register 28
 535 0210 2897      		sbiw r28,8
 536               	.LCFI33:
 537               		.cfi_def_cfa_offset 12
 538 0212 0FB6      		in __tmp_reg__,__SREG__
 539 0214 F894      		cli
 540 0216 DEBF      		out __SP_H__,r29
 541 0218 0FBE      		out __SREG__,__tmp_reg__
 542 021a CDBF      		out __SP_L__,r28
 543               	/* prologue: function */
 544               	/* frame size = 8 */
 545               	/* stack size = 10 */
 546               	.L__stack_usage = 10
 547 021c 6D83      		std Y+5,r22
 548 021e 7E83      		std Y+6,r23
 549 0220 8F83      		std Y+7,r24
 550 0222 9887      		std Y+8,r25
 551               	.LBB2:
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 552               		.loc 5 346 0
 553 0224 8D81      		ldd r24,Y+5
 554 0226 9E81      		ldd r25,Y+6
 555 0228 AF81      		ldd r26,Y+7
 556 022a B885      		ldd r27,Y+8
 557 022c 8983      		std Y+1,r24
 558 022e 9A83      		std Y+2,r25
 559 0230 AB83      		std Y+3,r26
 560 0232 BC83      		std Y+4,r27
 561 0234 84EE      		ldi r24,lo8(-28)
 562 0236 90E0      		ldi r25,0
 563 0238 2C81      		ldd r18,Y+4
 564 023a FC01      		movw r30,r24
 565 023c 2083      		st Z,r18
 566 023e 83EE      		ldi r24,lo8(-29)
 567 0240 90E0      		ldi r25,0
 568 0242 2B81      		ldd r18,Y+3
 569 0244 FC01      		movw r30,r24
 570 0246 2083      		st Z,r18
 571 0248 82EE      		ldi r24,lo8(-30)
 572 024a 90E0      		ldi r25,0
 573 024c 2A81      		ldd r18,Y+2
 574 024e FC01      		movw r30,r24
 575 0250 2083      		st Z,r18
 576 0252 81EE      		ldi r24,lo8(-31)
 577 0254 90E0      		ldi r25,0
 578 0256 2981      		ldd r18,Y+1
 579 0258 FC01      		movw r30,r24
 580 025a 2083      		st Z,r18
 581               	.LBE2:
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 582               		.loc 5 347 0
 583 025c 0000      		nop
 584               	/* epilogue start */
 585 025e 2896      		adiw r28,8
 586 0260 0FB6      		in __tmp_reg__,__SREG__
 587 0262 F894      		cli
 588 0264 DEBF      		out __SP_H__,r29
 589 0266 0FBE      		out __SREG__,__tmp_reg__
 590 0268 CDBF      		out __SP_L__,r28
 591 026a DF91      		pop r29
 592 026c CF91      		pop r28
 593 026e 0895      		ret
 594               		.cfi_endproc
 595               	.LFE113:
 598               	macsc_read_count:
 599               	.LFB114:
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 600               		.loc 5 355 0
 601               		.cfi_startproc
 602 0270 CF93      		push r28
 603               	.LCFI34:
 604               		.cfi_def_cfa_offset 3
 605               		.cfi_offset 28, -2
 606 0272 DF93      		push r29
 607               	.LCFI35:
 608               		.cfi_def_cfa_offset 4
 609               		.cfi_offset 29, -3
 610 0274 CDB7      		in r28,__SP_L__
 611 0276 DEB7      		in r29,__SP_H__
 612               	.LCFI36:
 613               		.cfi_def_cfa_register 28
 614               	/* prologue: function */
 615               	/* frame size = 0 */
 616               	/* stack size = 2 */
 617               	.L__stack_usage = 2
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 618               		.loc 5 356 0
 619 0278 21EE      		ldi r18,lo8(-31)
 620 027a 30E0      		ldi r19,0
 621 027c 42EE      		ldi r20,lo8(-30)
 622 027e 50E0      		ldi r21,0
 623 0280 63EE      		ldi r22,lo8(-29)
 624 0282 70E0      		ldi r23,0
 625 0284 84EE      		ldi r24,lo8(-28)
 626 0286 90E0      		ldi r25,0
 627 0288 0E94 0000 		call macsc_read32
 628 028c DC01      		movw r26,r24
 629 028e CB01      		movw r24,r22
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 630               		.loc 5 357 0
 631 0290 BC01      		movw r22,r24
 632 0292 CD01      		movw r24,r26
 633               	/* epilogue start */
 634 0294 DF91      		pop r29
 635 0296 CF91      		pop r28
 636 0298 0895      		ret
 637               		.cfi_endproc
 638               	.LFE114:
 641               	macsc_enable_manual_bts:
 642               	.LFB121:
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 643               		.loc 5 444 0
 644               		.cfi_startproc
 645 029a CF93      		push r28
 646               	.LCFI37:
 647               		.cfi_def_cfa_offset 3
 648               		.cfi_offset 28, -2
 649 029c DF93      		push r29
 650               	.LCFI38:
 651               		.cfi_def_cfa_offset 4
 652               		.cfi_offset 29, -3
 653 029e CDB7      		in r28,__SP_L__
 654 02a0 DEB7      		in r29,__SP_H__
 655               	.LCFI39:
 656               		.cfi_def_cfa_register 28
 657               	/* prologue: function */
 658               	/* frame size = 0 */
 659               	/* stack size = 2 */
 660               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 661               		.loc 5 445 0
 662 02a2 8CED      		ldi r24,lo8(-36)
 663 02a4 90E0      		ldi r25,0
 664 02a6 2CED      		ldi r18,lo8(-36)
 665 02a8 30E0      		ldi r19,0
 666 02aa F901      		movw r30,r18
 667 02ac 2081      		ld r18,Z
 668 02ae 2064      		ori r18,lo8(64)
 669 02b0 FC01      		movw r30,r24
 670 02b2 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 671               		.loc 5 446 0
 672 02b4 8CED      		ldi r24,lo8(-36)
 673 02b6 90E0      		ldi r25,0
 674 02b8 2CED      		ldi r18,lo8(-36)
 675 02ba 30E0      		ldi r19,0
 676 02bc F901      		movw r30,r18
 677 02be 2081      		ld r18,Z
 678 02c0 277F      		andi r18,lo8(-9)
 679 02c2 FC01      		movw r30,r24
 680 02c4 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 681               		.loc 5 447 0
 682 02c6 0000      		nop
 683               	/* epilogue start */
 684 02c8 DF91      		pop r29
 685 02ca CF91      		pop r28
 686 02cc 0895      		ret
 687               		.cfi_endproc
 688               	.LFE121:
 690               	.global	appState
 691               		.section	.bss.appState,"aw",@nobits
 694               	appState:
 695 0000 00        		.zero	1
 696               		.section	.bss.msgReq,"aw",@nobits
 699               	msgReq:
 700 0000 0000 0000 		.zero	20
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 701               		.section	.bss.PanId,"aw",@nobits
 704               	PanId:
 705 0000 00        		.zero	1
 706               		.text
 707               	.global	appSendData
 709               	appSendData:
 710               	.LFB130:
 711               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 712               		.loc 6 64 0
 713               		.cfi_startproc
 714 02ce CF93      		push r28
 715               	.LCFI40:
 716               		.cfi_def_cfa_offset 3
 717               		.cfi_offset 28, -2
 718 02d0 DF93      		push r29
 719               	.LCFI41:
 720               		.cfi_def_cfa_offset 4
 721               		.cfi_offset 29, -3
 722 02d2 CDB7      		in r28,__SP_L__
 723 02d4 DEB7      		in r29,__SP_H__
 724               	.LCFI42:
 725               		.cfi_def_cfa_register 28
 726               	/* prologue: function */
 727               	/* frame size = 0 */
 728               	/* stack size = 2 */
 729               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 730               		.loc 6 65 0
 731 02d6 8091 0000 		lds r24,msgReq+9
 732 02da 9091 0000 		lds r25,msgReq+9+1
 733 02de 892B      		or r24,r25
 734 02e0 01F0      		breq .L22
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 735               		.loc 6 67 0
 736 02e2 80E0      		ldi r24,lo8(msgReq)
 737 02e4 90E0      		ldi r25,hi8(msgReq)
 738 02e6 0E94 0000 		call NWK_DataReq
 739               	.L22:
  68:ServerLLDN.c  **** 		#if PRINT
  69:ServerLLDN.c  **** 		//printf("\nREQ %d",msgReq.options);
  70:ServerLLDN.c  **** 		#endif
  71:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  72:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(0);
  73:ServerLLDN.c  **** 	#endif
  74:ServerLLDN.c  **** 	}
  75:ServerLLDN.c  **** }
 740               		.loc 6 75 0
 741 02ea 0000      		nop
 742               	/* epilogue start */
 743 02ec DF91      		pop r29
 744 02ee CF91      		pop r28
 745 02f0 0895      		ret
 746               		.cfi_endproc
 747               	.LFE130:
 749               	.global	accepting_requests
 750               		.section	.data.accepting_requests,"aw",@progbits
 753               	accepting_requests:
 754 0000 0100      		.word	1
 755               	.global	appPanState
 756               		.section	.bss.appPanState,"aw",@nobits
 759               	appPanState:
 760 0000 00        		.zero	1
 761               		.comm	nodes_info_arr,3700,1
 762               	.global	config_request_frame
 763               		.section	.data.config_request_frame,"aw",@progbits
 766               	config_request_frame:
 767 0000 0F        		.byte	15
 768 0001 00        		.byte	0
 769 0002 0F        		.byte	15
 770 0003 0000      		.zero	2
 771 0005 80        		.byte	128
 772               	.global	conf_req_list
 773               		.section	.bss.conf_req_list,"aw",@nobits
 776               	conf_req_list:
 777 0000 0000      		.zero	2
 778               		.comm	stack_conf_req,20,1
 779               		.comm	ACKFrame,33,1
 780               		.comm	ACKFrame_aux,33,1
 781               	.global	ACKFrame_size
 782               		.section	.bss.ACKFrame_size,"aw",@nobits
 785               	ACKFrame_size:
 786 0000 0000      		.zero	2
 787               	.global	beaconInterval
 788               		.section	.bss.beaconInterval,"aw",@nobits
 791               	beaconInterval:
 792 0000 0000 0000 		.zero	4
 793               	.global	beaconInterval_association
 794               		.section	.bss.beaconInterval_association,"aw",@nobits
 797               	beaconInterval_association:
 798 0000 0000 0000 		.zero	4
 799               		.section	.bss.tmrDelay,"aw",@nobits
 802               	tmrDelay:
 803 0000 0000 0000 		.zero	13
 803      0000 0000 
 803      0000 0000 
 803      00
 804               	.global	assTimeSlot
 805               		.section	.bss.assTimeSlot,"aw",@nobits
 808               	assTimeSlot:
 809 0000 0000      		.zero	2
 810               	.global	counter_associados
 811               		.section	.bss.counter_associados,"aw",@nobits
 814               	counter_associados:
 815 0000 0000      		.zero	2
 816               	.global	cycles_counter
 817               		.section	.data.cycles_counter,"aw",@progbits
 820               	cycles_counter:
 821 0000 01        		.byte	1
 822               	.global	association_request
 823               		.section	.bss.association_request,"aw",@nobits
 826               	association_request:
 827 0000 00        		.zero	1
 828               		.comm	msg_info_array,6600,1
 829               	.global	size_msg_info
 830               		.section	.bss.size_msg_info,"aw",@nobits
 833               	size_msg_info:
 834 0000 0000      		.zero	2
 835               	.global	data_received
 836               		.section	.bss.data_received,"aw",@nobits
 839               	data_received:
 840 0000 00        		.zero	1
 841               	.global	PLR
 842               		.section	.bss.PLR,"aw",@nobits
 845               	PLR:
 846 0000 0000 0000 		.zero	4
 847               	.global	PER
 848               		.section	.bss.PER,"aw",@nobits
 851               	PER:
 852 0000 0000 0000 		.zero	4
 853               		.comm	retransmit_ts_array,32,1
 854               	.global	retransmit_ts_array_counter
 855               		.section	.bss.retransmit_ts_array_counter,"aw",@nobits
 858               	retransmit_ts_array_counter:
 859 0000 0000      		.zero	2
 860               	.global	counter_delay_msg
 861               		.section	.bss.counter_delay_msg,"aw",@nobits
 864               	counter_delay_msg:
 865 0000 0000      		.zero	2
 866               	.global	cmp_value_start_superframe
 867               		.section	.bss.cmp_value_start_superframe,"aw",@nobits
 870               	cmp_value_start_superframe:
 871 0000 0000 0000 		.zero	4
 872               		.section	.data.msgReqGACK,"aw",@progbits
 875               	msgReqGACK:
 876 0000 0000 0000 		.zero	5
 876      00
 877 0005 0000      		.word	0
 878 0007 00        		.byte	0
 879 0008 00        		.byte	0
 880 0009 0040      		.word	16384
 881 000b 0000      		.zero	2
 882 000d 0000      		.word	ACKFrame
 883 000f 0000 0000 		.zero	5
 883      00
 884               		.text
 886               	tmrDelayHandler:
 887               	.LFB131:
  76:ServerLLDN.c  **** 
  77:ServerLLDN.c  **** #if APP_COORDINATOR
  78:ServerLLDN.c  **** 
  79:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  80:ServerLLDN.c  **** 	int accepting_requests = 1;
  81:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  82:ServerLLDN.c  **** 	
  83:ServerLLDN.c  **** 	/* Configuration Request Frames */
  84:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  85:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  86:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  87:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  88:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  89:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  90:ServerLLDN.c  **** 
  91:ServerLLDN.c  **** 
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  94:ServerLLDN.c  **** 	uint8_t stack_conf_req[20];
  95:ServerLLDN.c  **** 	
  96:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  97:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	
  98:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame_aux;
  99:ServerLLDN.c  **** 	
 100:ServerLLDN.c  **** 	int ACKFrame_size = 0;
 101:ServerLLDN.c  **** 	
 102:ServerLLDN.c  **** 
 103:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
 104:ServerLLDN.c  **** 	float beaconInterval_association = 0;
 105:ServerLLDN.c  **** 	
 106:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
 107:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
 108:ServerLLDN.c  **** 	 */
 109:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 110:ServerLLDN.c  **** 	
 111:ServerLLDN.c  **** 	/*  Control variables for testing */	
 112:ServerLLDN.c  **** 	int assTimeSlot = 0;
 113:ServerLLDN.c  **** 
 114:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 115:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 116:ServerLLDN.c  **** 
 117:ServerLLDN.c  **** 	bool association_request = false;
 118:ServerLLDN.c  **** 
 119:ServerLLDN.c  **** 	/* data related variables */
 120:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 121:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 122:ServerLLDN.c  **** 	bool data_received = false;	
 123:ServerLLDN.c  **** 	float PLR = 0;
 124:ServerLLDN.c  **** 	float PER = 0;
 125:ServerLLDN.c  **** 	uint8_t retransmit_ts_array[32];
 126:ServerLLDN.c  **** 	int retransmit_ts_array_counter = 0;
 127:ServerLLDN.c  **** 	
 128:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 129:ServerLLDN.c  **** 	uint32_t cmp_value_start_superframe = 0;
 130:ServerLLDN.c  **** 	
 131:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqGACK = { .dstAddr = 0,
 132:ServerLLDN.c  **** 										.dstEndpoint = APP_BEACON_ENDPOINT,
 133:ServerLLDN.c  **** 										.srcEndpoint = APP_BEACON_ENDPOINT,
 134:ServerLLDN.c  **** 										.options = NWK_OPT_LLDN_ACK,
 135:ServerLLDN.c  **** 										.data = (uint8_t*)&ACKFrame};
 136:ServerLLDN.c  **** 
 137:ServerLLDN.c  **** 	
 138:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 139:ServerLLDN.c  **** 	{
 888               		.loc 6 139 0
 889               		.cfi_startproc
 890 02f2 CF93      		push r28
 891               	.LCFI43:
 892               		.cfi_def_cfa_offset 3
 893               		.cfi_offset 28, -2
 894 02f4 DF93      		push r29
 895               	.LCFI44:
 896               		.cfi_def_cfa_offset 4
 897               		.cfi_offset 29, -3
 898 02f6 00D0      		rcall .
 899               	.LCFI45:
 900               		.cfi_def_cfa_offset 6
 901 02f8 CDB7      		in r28,__SP_L__
 902 02fa DEB7      		in r29,__SP_H__
 903               	.LCFI46:
 904               		.cfi_def_cfa_register 28
 905               	/* prologue: function */
 906               	/* frame size = 2 */
 907               	/* stack size = 4 */
 908               	.L__stack_usage = 4
 909 02fc 9A83      		std Y+2,r25
 910 02fe 8983      		std Y+1,r24
 140:ServerLLDN.c  **** 		#if PRINT
 141:ServerLLDN.c  **** 		// printf("\ndelay handler");
 142:ServerLLDN.c  **** 		#endif
 143:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 911               		.loc 6 143 0
 912 0300 82E0      		ldi r24,lo8(2)
 913 0302 8093 0000 		sts appState,r24
 144:ServerLLDN.c  **** 	}
 914               		.loc 6 144 0
 915 0306 0000      		nop
 916               	/* epilogue start */
 917 0308 0F90      		pop __tmp_reg__
 918 030a 0F90      		pop __tmp_reg__
 919 030c DF91      		pop r29
 920 030e CF91      		pop r28
 921 0310 0895      		ret
 922               		.cfi_endproc
 923               	.LFE131:
 926               	lldn_server_beacon:
 927               	.LFB132:
 145:ServerLLDN.c  **** 	
 146:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 147:ServerLLDN.c  **** 	{
 928               		.loc 6 147 0
 929               		.cfi_startproc
 930 0312 CF93      		push r28
 931               	.LCFI47:
 932               		.cfi_def_cfa_offset 3
 933               		.cfi_offset 28, -2
 934 0314 DF93      		push r29
 935               	.LCFI48:
 936               		.cfi_def_cfa_offset 4
 937               		.cfi_offset 29, -3
 938 0316 CDB7      		in r28,__SP_L__
 939 0318 DEB7      		in r29,__SP_H__
 940               	.LCFI49:
 941               		.cfi_def_cfa_register 28
 942               	/* prologue: function */
 943               	/* frame size = 0 */
 944               	/* stack size = 2 */
 945               	.L__stack_usage = 2
 148:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 946               		.loc 6 148 0
 947 031a 0E94 0000 		call macsc_enable_manual_bts
 149:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 948               		.loc 6 149 0
 949 031e 82E0      		ldi r24,lo8(2)
 950 0320 8093 0000 		sts appState,r24
 150:ServerLLDN.c  **** 	}
 951               		.loc 6 150 0
 952 0324 0000      		nop
 953               	/* epilogue start */
 954 0326 DF91      		pop r29
 955 0328 CF91      		pop r28
 956 032a 0895      		ret
 957               		.cfi_endproc
 958               	.LFE132:
 961               	downlink_delay_handler:
 962               	.LFB133:
 151:ServerLLDN.c  **** 	
 152:ServerLLDN.c  **** 
 153:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 154:ServerLLDN.c  **** 	{
 963               		.loc 6 154 0
 964               		.cfi_startproc
 965 032c CF93      		push r28
 966               	.LCFI50:
 967               		.cfi_def_cfa_offset 3
 968               		.cfi_offset 28, -2
 969 032e DF93      		push r29
 970               	.LCFI51:
 971               		.cfi_def_cfa_offset 4
 972               		.cfi_offset 29, -3
 973 0330 CDB7      		in r28,__SP_L__
 974 0332 DEB7      		in r29,__SP_H__
 975               	.LCFI52:
 976               		.cfi_def_cfa_register 28
 977               	/* prologue: function */
 978               	/* frame size = 0 */
 979               	/* stack size = 2 */
 980               	.L__stack_usage = 2
 155:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 981               		.loc 6 155 0
 982 0334 8091 0000 		lds r24,msgReq+9
 983 0338 9091 0000 		lds r25,msgReq+9+1
 984 033c 8115      		cp r24,__zero_reg__
 985 033e 9048      		sbci r25,-128
 986 0340 01F4      		brne .L27
 156:ServerLLDN.c  **** 		{
 157:ServerLLDN.c  **** 			counter_delay_msg++;
 987               		.loc 6 157 0
 988 0342 8091 0000 		lds r24,counter_delay_msg
 989 0346 9091 0000 		lds r25,counter_delay_msg+1
 990 034a 0196      		adiw r24,1
 991 034c 9093 0000 		sts counter_delay_msg+1,r25
 992 0350 8093 0000 		sts counter_delay_msg,r24
 158:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 993               		.loc 6 158 0
 994 0354 82E0      		ldi r24,lo8(2)
 995 0356 8093 0000 		sts appState,r24
 996               	.L27:
 159:ServerLLDN.c  **** 		}
 160:ServerLLDN.c  **** 	}
 997               		.loc 6 160 0
 998 035a 0000      		nop
 999               	/* epilogue start */
 1000 035c DF91      		pop r29
 1001 035e CF91      		pop r28
 1002 0360 0895      		ret
 1003               		.cfi_endproc
 1004               	.LFE133:
 1007               	end_of_association_delay_handler:
 1008               	.LFB134:
 161:ServerLLDN.c  **** 
 162:ServerLLDN.c  **** 	static void end_of_association_delay_handler(void)
 163:ServerLLDN.c  **** 	{
 1009               		.loc 6 163 0
 1010               		.cfi_startproc
 1011 0362 CF93      		push r28
 1012               	.LCFI53:
 1013               		.cfi_def_cfa_offset 3
 1014               		.cfi_offset 28, -2
 1015 0364 DF93      		push r29
 1016               	.LCFI54:
 1017               		.cfi_def_cfa_offset 4
 1018               		.cfi_offset 29, -3
 1019 0366 CDB7      		in r28,__SP_L__
 1020 0368 DEB7      		in r29,__SP_H__
 1021               	.LCFI55:
 1022               		.cfi_def_cfa_register 28
 1023               	/* prologue: function */
 1024               	/* frame size = 0 */
 1025               	/* stack size = 2 */
 1026               	.L__stack_usage = 2
 164:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 1027               		.loc 6 164 0
 1028 036a 83E0      		ldi r24,lo8(3)
 1029 036c 8093 0000 		sts appState,r24
 165:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 1030               		.loc 6 165 0
 1031 0370 88E0      		ldi r24,lo8(8)
 1032 0372 8093 0000 		sts appPanState,r24
 166:ServerLLDN.c  **** 	}
 1033               		.loc 6 166 0
 1034 0376 0000      		nop
 1035               	/* epilogue start */
 1036 0378 DF91      		pop r29
 1037 037a CF91      		pop r28
 1038 037c 0895      		ret
 1039               		.cfi_endproc
 1040               	.LFE134:
 1043               	addToAckArray:
 1044               	.LFB135:
 167:ServerLLDN.c  **** 	
 168:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 169:ServerLLDN.c  **** 	static void teste_handler(void)
 170:ServerLLDN.c  **** 	{
 171:ServerLLDN.c  **** 		if(msgReq.options)
 172:ServerLLDN.c  **** 			// printf("\n***TIMESLOT****");
 173:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 174:ServerLLDN.c  **** 	}
 175:ServerLLDN.c  **** 	#endif
 176:ServerLLDN.c  **** 	
 177:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 178:ServerLLDN.c  **** 	{	
 1045               		.loc 6 178 0
 1046               		.cfi_startproc
 1047 037e CF93      		push r28
 1048               	.LCFI56:
 1049               		.cfi_def_cfa_offset 3
 1050               		.cfi_offset 28, -2
 1051 0380 DF93      		push r29
 1052               	.LCFI57:
 1053               		.cfi_def_cfa_offset 4
 1054               		.cfi_offset 29, -3
 1055 0382 00D0      		rcall .
 1056 0384 00D0      		rcall .
 1057 0386 1F92      		push __zero_reg__
 1058               	.LCFI58:
 1059               		.cfi_def_cfa_offset 9
 1060 0388 CDB7      		in r28,__SP_L__
 1061 038a DEB7      		in r29,__SP_H__
 1062               	.LCFI59:
 1063               		.cfi_def_cfa_register 28
 1064               	/* prologue: function */
 1065               	/* frame size = 5 */
 1066               	/* stack size = 7 */
 1067               	.L__stack_usage = 7
 1068 038c 8D83      		std Y+5,r24
 179:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 1069               		.loc 6 179 0
 1070 038e 8D81      		ldd r24,Y+5
 1071 0390 8695      		lsr r24
 1072 0392 8695      		lsr r24
 1073 0394 8695      		lsr r24
 1074 0396 882F      		mov r24,r24
 1075 0398 90E0      		ldi r25,0
 1076 039a 9A83      		std Y+2,r25
 1077 039c 8983      		std Y+1,r24
 180:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 1078               		.loc 6 180 0
 1079 039e 8D81      		ldd r24,Y+5
 1080 03a0 882F      		mov r24,r24
 1081 03a2 90E0      		ldi r25,0
 1082 03a4 8770      		andi r24,7
 1083 03a6 9927      		clr r25
 1084 03a8 28E0      		ldi r18,lo8(8)
 1085 03aa 30E0      		ldi r19,0
 1086 03ac A901      		movw r20,r18
 1087 03ae 481B      		sub r20,r24
 1088 03b0 590B      		sbc r21,r25
 1089 03b2 CA01      		movw r24,r20
 1090 03b4 9C83      		std Y+4,r25
 1091 03b6 8B83      		std Y+3,r24
 181:ServerLLDN.c  **** 		
 182:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1092               		.loc 6 182 0
 1093 03b8 8981      		ldd r24,Y+1
 1094 03ba 9A81      		ldd r25,Y+2
 1095 03bc 8050      		subi r24,lo8(-(ACKFrame+1))
 1096 03be 9040      		sbci r25,hi8(-(ACKFrame+1))
 1097 03c0 FC01      		movw r30,r24
 1098 03c2 8081      		ld r24,Z
 1099 03c4 882F      		mov r24,r24
 1100 03c6 90E0      		ldi r25,0
 1101 03c8 0B80      		ldd r0,Y+3
 1102 03ca 00C0      		rjmp 2f
 1103               		1:
 1104 03cc 9595      		asr r25
 1105 03ce 8795      		ror r24
 1106               		2:
 1107 03d0 0A94      		dec r0
 1108 03d2 02F4      		brpl 1b
 1109 03d4 8170      		andi r24,1
 1110 03d6 9927      		clr r25
 1111 03d8 892B      		or r24,r25
 1112 03da 01F0      		breq .L30
 183:ServerLLDN.c  **** 		{
 184:ServerLLDN.c  **** 			// printf("\nAddr rep %d", addres);
 185:ServerLLDN.c  **** 			return false;
 1113               		.loc 6 185 0
 1114 03dc 80E0      		ldi r24,0
 1115 03de 00C0      		rjmp .L31
 1116               	.L30:
 186:ServerLLDN.c  **** 		}
 187:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 1117               		.loc 6 187 0
 1118 03e0 8981      		ldd r24,Y+1
 1119 03e2 9A81      		ldd r25,Y+2
 1120 03e4 8050      		subi r24,lo8(-(ACKFrame+1))
 1121 03e6 9040      		sbci r25,hi8(-(ACKFrame+1))
 1122 03e8 FC01      		movw r30,r24
 1123 03ea 8081      		ld r24,Z
 1124 03ec 282F      		mov r18,r24
 1125 03ee 81E0      		ldi r24,lo8(1)
 1126 03f0 90E0      		ldi r25,0
 1127 03f2 0B80      		ldd r0,Y+3
 1128 03f4 00C0      		rjmp 2f
 1129               		1:
 1130 03f6 880F      		lsl r24
 1131 03f8 991F      		rol r25
 1132               		2:
 1133 03fa 0A94      		dec r0
 1134 03fc 02F4      		brpl 1b
 1135 03fe 822B      		or r24,r18
 1136 0400 282F      		mov r18,r24
 1137 0402 8981      		ldd r24,Y+1
 1138 0404 9A81      		ldd r25,Y+2
 1139 0406 8050      		subi r24,lo8(-(ACKFrame+1))
 1140 0408 9040      		sbci r25,hi8(-(ACKFrame+1))
 1141 040a FC01      		movw r30,r24
 1142 040c 2083      		st Z,r18
 188:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 1143               		.loc 6 188 0
 1144 040e 8981      		ldd r24,Y+1
 1145 0410 9A81      		ldd r25,Y+2
 1146 0412 9C01      		movw r18,r24
 1147 0414 2F5F      		subi r18,-1
 1148 0416 3F4F      		sbci r19,-1
 1149 0418 8091 0000 		lds r24,ACKFrame_size
 1150 041c 9091 0000 		lds r25,ACKFrame_size+1
 1151 0420 8217      		cp r24,r18
 1152 0422 9307      		cpc r25,r19
 1153 0424 04F4      		brge .L32
 189:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 1154               		.loc 6 189 0
 1155 0426 8981      		ldd r24,Y+1
 1156 0428 9A81      		ldd r25,Y+2
 1157 042a 0196      		adiw r24,1
 1158 042c 9093 0000 		sts ACKFrame_size+1,r25
 1159 0430 8093 0000 		sts ACKFrame_size,r24
 1160               	.L32:
 190:ServerLLDN.c  **** 		// printf("ACK, %hhx", ACKFrame.ackFlags[pos]);
 191:ServerLLDN.c  **** 		return true;
 1161               		.loc 6 191 0
 1162 0434 81E0      		ldi r24,lo8(1)
 1163               	.L31:
 1164               	/* epilogue start */
 192:ServerLLDN.c  **** 	}
 1165               		.loc 6 192 0
 1166 0436 0F90      		pop __tmp_reg__
 1167 0438 0F90      		pop __tmp_reg__
 1168 043a 0F90      		pop __tmp_reg__
 1169 043c 0F90      		pop __tmp_reg__
 1170 043e 0F90      		pop __tmp_reg__
 1171 0440 DF91      		pop r29
 1172 0442 CF91      		pop r28
 1173 0444 0895      		ret
 1174               		.cfi_endproc
 1175               	.LFE135:
 1178               	addConfRequestArray:
 1179               	.LFB136:
 193:ServerLLDN.c  **** 
 194:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 195:ServerLLDN.c  **** 	{
 1180               		.loc 6 195 0
 1181               		.cfi_startproc
 1182 0446 CF93      		push r28
 1183               	.LCFI60:
 1184               		.cfi_def_cfa_offset 3
 1185               		.cfi_offset 28, -2
 1186 0448 DF93      		push r29
 1187               	.LCFI61:
 1188               		.cfi_def_cfa_offset 4
 1189               		.cfi_offset 29, -3
 1190 044a 00D0      		rcall .
 1191 044c 00D0      		rcall .
 1192 044e 1F92      		push __zero_reg__
 1193               	.LCFI62:
 1194               		.cfi_def_cfa_offset 9
 1195 0450 CDB7      		in r28,__SP_L__
 1196 0452 DEB7      		in r29,__SP_H__
 1197               	.LCFI63:
 1198               		.cfi_def_cfa_register 28
 1199               	/* prologue: function */
 1200               	/* frame size = 5 */
 1201               	/* stack size = 7 */
 1202               	.L__stack_usage = 7
 1203 0454 9D83      		std Y+5,r25
 1204 0456 8C83      		std Y+4,r24
 196:ServerLLDN.c  **** 
 197:ServerLLDN.c  **** 		uint8_t i;
 198:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1205               		.loc 6 198 0
 1206 0458 1982      		std Y+1,__zero_reg__
 1207 045a 00C0      		rjmp .L34
 1208               	.L35:
 1209               		.loc 6 198 0 is_stmt 0 discriminator 3
 1210 045c 8981      		ldd r24,Y+1
 1211 045e 8F5F      		subi r24,lo8(-(1))
 1212 0460 8983      		std Y+1,r24
 1213               	.L34:
 1214               		.loc 6 198 0 discriminator 1
 1215 0462 8981      		ldd r24,Y+1
 1216 0464 282F      		mov r18,r24
 1217 0466 30E0      		ldi r19,0
 1218 0468 4AE4      		ldi r20,lo8(74)
 1219 046a 429F      		mul r20,r18
 1220 046c C001      		movw r24,r0
 1221 046e 439F      		mul r20,r19
 1222 0470 900D      		add r25,r0
 1223 0472 1124      		clr __zero_reg__
 1224 0474 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1225 0476 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1226 0478 FC01      		movw r30,r24
 1227 047a 8081      		ld r24,Z
 1228 047c 9181      		ldd r25,Z+1
 1229 047e 892B      		or r24,r25
 1230 0480 01F4      		brne .L35
 199:ServerLLDN.c  **** 		
 200:ServerLLDN.c  **** 		assTimeSlot++;
 1231               		.loc 6 200 0 is_stmt 1
 1232 0482 8091 0000 		lds r24,assTimeSlot
 1233 0486 9091 0000 		lds r25,assTimeSlot+1
 1234 048a 0196      		adiw r24,1
 1235 048c 9093 0000 		sts assTimeSlot+1,r25
 1236 0490 8093 0000 		sts assTimeSlot,r24
 201:ServerLLDN.c  **** 	
 202:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1237               		.loc 6 202 0
 1238 0494 8C81      		ldd r24,Y+4
 1239 0496 9D81      		ldd r25,Y+5
 1240 0498 FC01      		movw r30,r24
 1241 049a 8481      		ldd r24,Z+4
 1242 049c 8F77      		andi r24,lo8(127)
 1243 049e 282F      		mov r18,r24
 1244 04a0 30E0      		ldi r19,0
 1245 04a2 8091 0000 		lds r24,config_request_frame+5
 1246 04a6 8F77      		andi r24,lo8(127)
 1247 04a8 882F      		mov r24,r24
 1248 04aa 90E0      		ldi r25,0
 1249 04ac 8217      		cp r24,r18
 1250 04ae 9307      		cpc r25,r19
 1251 04b0 04F4      		brge .L36
 203:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1252               		.loc 6 203 0
 1253 04b2 8C81      		ldd r24,Y+4
 1254 04b4 9D81      		ldd r25,Y+5
 1255 04b6 FC01      		movw r30,r24
 1256 04b8 8481      		ldd r24,Z+4
 1257 04ba 8F77      		andi r24,lo8(127)
 1258 04bc 8F77      		andi r24,lo8(127)
 1259 04be 9091 0000 		lds r25,config_request_frame+5
 1260 04c2 9078      		andi r25,lo8(-128)
 1261 04c4 892B      		or r24,r25
 1262 04c6 8093 0000 		sts config_request_frame+5,r24
 1263               	.L36:
 204:ServerLLDN.c  **** 		
 205:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1264               		.loc 6 205 0
 1265 04ca 8981      		ldd r24,Y+1
 1266 04cc 282F      		mov r18,r24
 1267 04ce 30E0      		ldi r19,0
 1268 04d0 8C81      		ldd r24,Y+4
 1269 04d2 9D81      		ldd r25,Y+5
 1270 04d4 FC01      		movw r30,r24
 1271 04d6 8481      		ldd r24,Z+4
 1272 04d8 8F77      		andi r24,lo8(127)
 1273 04da 582F      		mov r21,r24
 1274 04dc 4AE4      		ldi r20,lo8(74)
 1275 04de 429F      		mul r20,r18
 1276 04e0 C001      		movw r24,r0
 1277 04e2 439F      		mul r20,r19
 1278 04e4 900D      		add r25,r0
 1279 04e6 1124      		clr __zero_reg__
 1280 04e8 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1281 04ea 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1282 04ec FC01      		movw r30,r24
 1283 04ee 5083      		st Z,r21
 206:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1284               		.loc 6 206 0
 1285 04f0 8981      		ldd r24,Y+1
 1286 04f2 482F      		mov r20,r24
 1287 04f4 50E0      		ldi r21,0
 1288 04f6 8C81      		ldd r24,Y+4
 1289 04f8 9D81      		ldd r25,Y+5
 1290 04fa FC01      		movw r30,r24
 1291 04fc 8381      		ldd r24,Z+3
 1292 04fe 282F      		mov r18,r24
 1293 0500 30E0      		ldi r19,0
 1294 0502 6AE4      		ldi r22,lo8(74)
 1295 0504 649F      		mul r22,r20
 1296 0506 C001      		movw r24,r0
 1297 0508 659F      		mul r22,r21
 1298 050a 900D      		add r25,r0
 1299 050c 1124      		clr __zero_reg__
 1300 050e 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1301 0510 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1302 0512 FC01      		movw r30,r24
 1303 0514 3183      		std Z+1,r19
 1304 0516 2083      		st Z,r18
 207:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1305               		.loc 6 207 0
 1306 0518 8981      		ldd r24,Y+1
 1307 051a 282F      		mov r18,r24
 1308 051c 30E0      		ldi r19,0
 1309 051e 4AE4      		ldi r20,lo8(74)
 1310 0520 429F      		mul r20,r18
 1311 0522 C001      		movw r24,r0
 1312 0524 439F      		mul r20,r19
 1313 0526 900D      		add r25,r0
 1314 0528 1124      		clr __zero_reg__
 1315 052a 8050      		subi r24,lo8(-(nodes_info_arr))
 1316 052c 9040      		sbci r25,hi8(-(nodes_info_arr))
 1317 052e 2981      		ldd r18,Y+1
 1318 0530 FC01      		movw r30,r24
 1319 0532 2083      		st Z,r18
 208:ServerLLDN.c  **** 		
 209:ServerLLDN.c  **** // 		stack_conf_req
 210:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1320               		.loc 6 210 0
 1321 0534 8091 0000 		lds r24,conf_req_list
 1322 0538 9091 0000 		lds r25,conf_req_list+1
 1323 053c 892B      		or r24,r25
 1324 053e 01F0      		breq .L37
 1325               	.LBB3:
 211:ServerLLDN.c  **** 		{
 212:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1326               		.loc 6 212 0
 1327 0540 84E0      		ldi r24,lo8(4)
 1328 0542 90E0      		ldi r25,0
 1329 0544 0E94 0000 		call malloc
 1330 0548 9B83      		std Y+3,r25
 1331 054a 8A83      		std Y+2,r24
 213:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1332               		.loc 6 213 0
 1333 054c 8981      		ldd r24,Y+1
 1334 054e 282F      		mov r18,r24
 1335 0550 30E0      		ldi r19,0
 1336 0552 4AE4      		ldi r20,lo8(74)
 1337 0554 429F      		mul r20,r18
 1338 0556 C001      		movw r24,r0
 1339 0558 439F      		mul r20,r19
 1340 055a 900D      		add r25,r0
 1341 055c 1124      		clr __zero_reg__
 1342 055e 9C01      		movw r18,r24
 1343 0560 2050      		subi r18,lo8(-(nodes_info_arr))
 1344 0562 3040      		sbci r19,hi8(-(nodes_info_arr))
 1345 0564 8A81      		ldd r24,Y+2
 1346 0566 9B81      		ldd r25,Y+3
 1347 0568 FC01      		movw r30,r24
 1348 056a 3183      		std Z+1,r19
 1349 056c 2083      		st Z,r18
 214:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1350               		.loc 6 214 0
 1351 056e 2091 0000 		lds r18,conf_req_list
 1352 0572 3091 0000 		lds r19,conf_req_list+1
 1353 0576 8A81      		ldd r24,Y+2
 1354 0578 9B81      		ldd r25,Y+3
 1355 057a FC01      		movw r30,r24
 1356 057c 3383      		std Z+3,r19
 1357 057e 2283      		std Z+2,r18
 215:ServerLLDN.c  **** 			conf_req_list = tmp;
 1358               		.loc 6 215 0
 1359 0580 8A81      		ldd r24,Y+2
 1360 0582 9B81      		ldd r25,Y+3
 1361 0584 9093 0000 		sts conf_req_list+1,r25
 1362 0588 8093 0000 		sts conf_req_list,r24
 1363               	.LBE3:
 216:ServerLLDN.c  **** 		}
 217:ServerLLDN.c  **** 		else
 218:ServerLLDN.c  **** 		{
 219:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 220:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 221:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 222:ServerLLDN.c  **** 		}
 223:ServerLLDN.c  **** 	}
 1364               		.loc 6 223 0
 1365 058c 00C0      		rjmp .L39
 1366               	.L37:
 219:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1367               		.loc 6 219 0
 1368 058e 84E0      		ldi r24,lo8(4)
 1369 0590 90E0      		ldi r25,0
 1370 0592 0E94 0000 		call malloc
 1371 0596 9093 0000 		sts conf_req_list+1,r25
 1372 059a 8093 0000 		sts conf_req_list,r24
 220:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1373               		.loc 6 220 0
 1374 059e 8091 0000 		lds r24,conf_req_list
 1375 05a2 9091 0000 		lds r25,conf_req_list+1
 1376 05a6 2981      		ldd r18,Y+1
 1377 05a8 422F      		mov r20,r18
 1378 05aa 50E0      		ldi r21,0
 1379 05ac 6AE4      		ldi r22,lo8(74)
 1380 05ae 649F      		mul r22,r20
 1381 05b0 9001      		movw r18,r0
 1382 05b2 659F      		mul r22,r21
 1383 05b4 300D      		add r19,r0
 1384 05b6 1124      		clr __zero_reg__
 1385 05b8 2050      		subi r18,lo8(-(nodes_info_arr))
 1386 05ba 3040      		sbci r19,hi8(-(nodes_info_arr))
 1387 05bc FC01      		movw r30,r24
 1388 05be 3183      		std Z+1,r19
 1389 05c0 2083      		st Z,r18
 221:ServerLLDN.c  **** 		}
 1390               		.loc 6 221 0
 1391 05c2 8091 0000 		lds r24,conf_req_list
 1392 05c6 9091 0000 		lds r25,conf_req_list+1
 1393 05ca FC01      		movw r30,r24
 1394 05cc 1382      		std Z+3,__zero_reg__
 1395 05ce 1282      		std Z+2,__zero_reg__
 1396               	.L39:
 1397               		.loc 6 223 0
 1398 05d0 0000      		nop
 1399               	/* epilogue start */
 1400 05d2 0F90      		pop __tmp_reg__
 1401 05d4 0F90      		pop __tmp_reg__
 1402 05d6 0F90      		pop __tmp_reg__
 1403 05d8 0F90      		pop __tmp_reg__
 1404 05da 0F90      		pop __tmp_reg__
 1405 05dc DF91      		pop r29
 1406 05de CF91      		pop r28
 1407 05e0 0895      		ret
 1408               		.cfi_endproc
 1409               	.LFE136:
 1412               	CopyToConfigRequest:
 1413               	.LFB137:
 224:ServerLLDN.c  **** 
 225:ServerLLDN.c  **** 	static bool CopyToConfigRequest()
 226:ServerLLDN.c  **** 	{
 1414               		.loc 6 226 0
 1415               		.cfi_startproc
 1416 05e2 CF93      		push r28
 1417               	.LCFI64:
 1418               		.cfi_def_cfa_offset 3
 1419               		.cfi_offset 28, -2
 1420 05e4 DF93      		push r29
 1421               	.LCFI65:
 1422               		.cfi_def_cfa_offset 4
 1423               		.cfi_offset 29, -3
 1424 05e6 00D0      		rcall .
 1425               	.LCFI66:
 1426               		.cfi_def_cfa_offset 6
 1427 05e8 CDB7      		in r28,__SP_L__
 1428 05ea DEB7      		in r29,__SP_H__
 1429               	.LCFI67:
 1430               		.cfi_def_cfa_register 28
 1431               	/* prologue: function */
 1432               	/* frame size = 2 */
 1433               	/* stack size = 4 */
 1434               	.L__stack_usage = 4
 227:ServerLLDN.c  **** 		if(conf_req_list->node == NULL)
 1435               		.loc 6 227 0
 1436 05ec 8091 0000 		lds r24,conf_req_list
 1437 05f0 9091 0000 		lds r25,conf_req_list+1
 1438 05f4 FC01      		movw r30,r24
 1439 05f6 8081      		ld r24,Z
 1440 05f8 9181      		ldd r25,Z+1
 1441 05fa 892B      		or r24,r25
 1442 05fc 01F4      		brne .L41
 228:ServerLLDN.c  **** 			return false;
 1443               		.loc 6 228 0
 1444 05fe 80E0      		ldi r24,0
 1445 0600 00C0      		rjmp .L42
 1446               	.L41:
 229:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1447               		.loc 6 229 0
 1448 0602 8091 0000 		lds r24,conf_req_list
 1449 0606 9091 0000 		lds r25,conf_req_list+1
 1450 060a FC01      		movw r30,r24
 1451 060c 8081      		ld r24,Z
 1452 060e 9181      		ldd r25,Z+1
 1453 0610 FC01      		movw r30,r24
 1454 0612 8081      		ld r24,Z
 1455 0614 8093 0000 		sts config_request_frame+3,r24
 230:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1456               		.loc 6 230 0
 1457 0618 8091 0000 		lds r24,conf_req_list
 1458 061c 9091 0000 		lds r25,conf_req_list+1
 1459 0620 FC01      		movw r30,r24
 1460 0622 8081      		ld r24,Z
 1461 0624 9181      		ldd r25,Z+1
 1462 0626 FC01      		movw r30,r24
 1463 0628 8181      		ldd r24,Z+1
 1464 062a 9281      		ldd r25,Z+2
 1465 062c 8093 0000 		sts config_request_frame+4,r24
 231:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1466               		.loc 6 231 0
 1467 0630 8091 0000 		lds r24,conf_req_list
 1468 0634 9091 0000 		lds r25,conf_req_list+1
 1469 0638 9A83      		std Y+2,r25
 1470 063a 8983      		std Y+1,r24
 232:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1471               		.loc 6 232 0
 1472 063c 8091 0000 		lds r24,conf_req_list
 1473 0640 9091 0000 		lds r25,conf_req_list+1
 1474 0644 FC01      		movw r30,r24
 1475 0646 8281      		ldd r24,Z+2
 1476 0648 9381      		ldd r25,Z+3
 1477 064a 9093 0000 		sts conf_req_list+1,r25
 1478 064e 8093 0000 		sts conf_req_list,r24
 233:ServerLLDN.c  **** 		tmp->node = NULL;
 1479               		.loc 6 233 0
 1480 0652 8981      		ldd r24,Y+1
 1481 0654 9A81      		ldd r25,Y+2
 1482 0656 FC01      		movw r30,r24
 1483 0658 1182      		std Z+1,__zero_reg__
 1484 065a 1082      		st Z,__zero_reg__
 234:ServerLLDN.c  **** 		tmp->next = NULL;
 1485               		.loc 6 234 0
 1486 065c 8981      		ldd r24,Y+1
 1487 065e 9A81      		ldd r25,Y+2
 1488 0660 FC01      		movw r30,r24
 1489 0662 1382      		std Z+3,__zero_reg__
 1490 0664 1282      		std Z+2,__zero_reg__
 235:ServerLLDN.c  **** 		free(tmp);
 1491               		.loc 6 235 0
 1492 0666 8981      		ldd r24,Y+1
 1493 0668 9A81      		ldd r25,Y+2
 1494 066a 0E94 0000 		call free
 236:ServerLLDN.c  **** 		return true;
 1495               		.loc 6 236 0
 1496 066e 81E0      		ldi r24,lo8(1)
 1497               	.L42:
 1498               	/* epilogue start */
 237:ServerLLDN.c  **** 	}
 1499               		.loc 6 237 0
 1500 0670 0F90      		pop __tmp_reg__
 1501 0672 0F90      		pop __tmp_reg__
 1502 0674 DF91      		pop r29
 1503 0676 CF91      		pop r28
 1504 0678 0895      		ret
 1505               		.cfi_endproc
 1506               	.LFE137:
 1509               	appCommandInd:
 1510               	.LFB138:
 238:ServerLLDN.c  **** 
 239:ServerLLDN.c  **** 
 240:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 241:ServerLLDN.c  **** 	{
 1511               		.loc 6 241 0
 1512               		.cfi_startproc
 1513 067a CF93      		push r28
 1514               	.LCFI68:
 1515               		.cfi_def_cfa_offset 3
 1516               		.cfi_offset 28, -2
 1517 067c DF93      		push r29
 1518               	.LCFI69:
 1519               		.cfi_def_cfa_offset 4
 1520               		.cfi_offset 29, -3
 1521 067e CDB7      		in r28,__SP_L__
 1522 0680 DEB7      		in r29,__SP_H__
 1523               	.LCFI70:
 1524               		.cfi_def_cfa_register 28
 1525 0682 2A97      		sbiw r28,10
 1526               	.LCFI71:
 1527               		.cfi_def_cfa_offset 14
 1528 0684 0FB6      		in __tmp_reg__,__SREG__
 1529 0686 F894      		cli
 1530 0688 DEBF      		out __SP_H__,r29
 1531 068a 0FBE      		out __SREG__,__tmp_reg__
 1532 068c CDBF      		out __SP_L__,r28
 1533               	/* prologue: function */
 1534               	/* frame size = 10 */
 1535               	/* stack size = 12 */
 1536               	.L__stack_usage = 12
 1537 068e 9A87      		std Y+10,r25
 1538 0690 8987      		std Y+9,r24
 242:ServerLLDN.c  **** 		if(!accepting_requests) return false;
 1539               		.loc 6 242 0
 1540 0692 8091 0000 		lds r24,accepting_requests
 1541 0696 9091 0000 		lds r25,accepting_requests+1
 1542 069a 892B      		or r24,r25
 1543 069c 01F4      		brne .L44
 1544               		.loc 6 242 0 is_stmt 0 discriminator 1
 1545 069e 80E0      		ldi r24,0
 1546 06a0 00C0      		rjmp .L45
 1547               	.L44:
 243:ServerLLDN.c  **** 		// if(n <127) return false;
 244:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1548               		.loc 6 244 0 is_stmt 1
 1549 06a2 8985      		ldd r24,Y+9
 1550 06a4 9A85      		ldd r25,Y+10
 1551 06a6 FC01      		movw r30,r24
 1552 06a8 8085      		ldd r24,Z+8
 1553 06aa 9185      		ldd r25,Z+9
 1554 06ac FC01      		movw r30,r24
 1555 06ae 8081      		ld r24,Z
 1556 06b0 8D30      		cpi r24,lo8(13)
 1557 06b2 01F4      		brne .L46
 1558               	.LBB4:
 245:ServerLLDN.c  **** 		{
 246:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1559               		.loc 6 246 0
 1560 06b4 8985      		ldd r24,Y+9
 1561 06b6 9A85      		ldd r25,Y+10
 1562 06b8 FC01      		movw r30,r24
 1563 06ba 8085      		ldd r24,Z+8
 1564 06bc 9185      		ldd r25,Z+9
 1565 06be 9C83      		std Y+4,r25
 1566 06c0 8B83      		std Y+3,r24
 247:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1567               		.loc 6 247 0
 1568 06c2 8B81      		ldd r24,Y+3
 1569 06c4 9C81      		ldd r25,Y+4
 1570 06c6 FC01      		movw r30,r24
 1571 06c8 8181      		ldd r24,Z+1
 1572 06ca 0E94 0000 		call addToAckArray
 248:ServerLLDN.c  **** 					
 249:ServerLLDN.c  **** 			#if PRINT
 250:ServerLLDN.c  **** 			uint32_t tmp = macsc_read_count();
 1573               		.loc 6 250 0
 1574 06ce 0E94 0000 		call macsc_read_count
 1575 06d2 DC01      		movw r26,r24
 1576 06d4 CB01      		movw r24,r22
 1577 06d6 8D83      		std Y+5,r24
 1578 06d8 9E83      		std Y+6,r25
 1579 06da AF83      		std Y+7,r26
 1580 06dc B887      		std Y+8,r27
 1581               	.LBE4:
 1582 06de 00C0      		rjmp .L47
 1583               	.L46:
 251:ServerLLDN.c  **** // 			printf("\n%" PRIu32 " ", tmp);			
 252:ServerLLDN.c  ****  			// printf(" DISC %hhx", msg->macAddr);	
 253:ServerLLDN.c  **** 			#endif
 254:ServerLLDN.c  **** 		}
 255:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1584               		.loc 6 255 0
 1585 06e0 8985      		ldd r24,Y+9
 1586 06e2 9A85      		ldd r25,Y+10
 1587 06e4 FC01      		movw r30,r24
 1588 06e6 8085      		ldd r24,Z+8
 1589 06e8 9185      		ldd r25,Z+9
 1590 06ea FC01      		movw r30,r24
 1591 06ec 8081      		ld r24,Z
 1592 06ee 8E30      		cpi r24,lo8(14)
 1593 06f0 01F4      		brne .L48
 1594               	.LBB5:
 256:ServerLLDN.c  **** 		{
 257:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1595               		.loc 6 257 0
 1596 06f2 8985      		ldd r24,Y+9
 1597 06f4 9A85      		ldd r25,Y+10
 1598 06f6 FC01      		movw r30,r24
 1599 06f8 8085      		ldd r24,Z+8
 1600 06fa 9185      		ldd r25,Z+9
 1601 06fc 9A83      		std Y+2,r25
 1602 06fe 8983      		std Y+1,r24
 258:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1603               		.loc 6 258 0
 1604 0700 8981      		ldd r24,Y+1
 1605 0702 9A81      		ldd r25,Y+2
 1606 0704 0E94 0000 		call addConfRequestArray
 1607               	.LBE5:
 1608 0708 00C0      		rjmp .L47
 1609               	.L48:
 259:ServerLLDN.c  **** 			#if PRINT
 260:ServerLLDN.c  **** 			// printf("\nCONF %d", msg->macAddr);	
 261:ServerLLDN.c  **** 			#endif
 262:ServerLLDN.c  **** 		}
 263:ServerLLDN.c  **** 		else return false;			
 1610               		.loc 6 263 0
 1611 070a 80E0      		ldi r24,0
 1612 070c 00C0      		rjmp .L45
 1613               	.L47:
 264:ServerLLDN.c  **** 		return true;
 1614               		.loc 6 264 0
 1615 070e 81E0      		ldi r24,lo8(1)
 1616               	.L45:
 1617               	/* epilogue start */
 265:ServerLLDN.c  **** 	}
 1618               		.loc 6 265 0
 1619 0710 2A96      		adiw r28,10
 1620 0712 0FB6      		in __tmp_reg__,__SREG__
 1621 0714 F894      		cli
 1622 0716 DEBF      		out __SP_H__,r29
 1623 0718 0FBE      		out __SREG__,__tmp_reg__
 1624 071a CDBF      		out __SP_L__,r28
 1625 071c DF91      		pop r29
 1626 071e CF91      		pop r28
 1627 0720 0895      		ret
 1628               		.cfi_endproc
 1629               	.LFE138:
 1631               	.global	check_ack_pan
 1633               	check_ack_pan:
 1634               	.LFB139:
 266:ServerLLDN.c  **** 	
 267:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 268:ServerLLDN.c  **** 	{
 1635               		.loc 6 268 0
 1636               		.cfi_startproc
 1637 0722 CF93      		push r28
 1638               	.LCFI72:
 1639               		.cfi_def_cfa_offset 3
 1640               		.cfi_offset 28, -2
 1641 0724 DF93      		push r29
 1642               	.LCFI73:
 1643               		.cfi_def_cfa_offset 4
 1644               		.cfi_offset 29, -3
 1645 0726 00D0      		rcall .
 1646 0728 00D0      		rcall .
 1647 072a 00D0      		rcall .
 1648               	.LCFI74:
 1649               		.cfi_def_cfa_offset 10
 1650 072c CDB7      		in r28,__SP_L__
 1651 072e DEB7      		in r29,__SP_H__
 1652               	.LCFI75:
 1653               		.cfi_def_cfa_register 28
 1654               	/* prologue: function */
 1655               	/* frame size = 6 */
 1656               	/* stack size = 8 */
 1657               	.L__stack_usage = 8
 1658 0730 9E83      		std Y+6,r25
 1659 0732 8D83      		std Y+5,r24
 269:ServerLLDN.c  **** 		int pos =  addr / 8;
 1660               		.loc 6 269 0
 1661 0734 8D81      		ldd r24,Y+5
 1662 0736 9E81      		ldd r25,Y+6
 1663 0738 9923      		tst r25
 1664 073a 04F4      		brge .L50
 1665 073c 0796      		adiw r24,7
 1666               	.L50:
 1667 073e 9595      		asr r25
 1668 0740 8795      		ror r24
 1669 0742 9595      		asr r25
 1670 0744 8795      		ror r24
 1671 0746 9595      		asr r25
 1672 0748 8795      		ror r24
 1673 074a 9A83      		std Y+2,r25
 1674 074c 8983      		std Y+1,r24
 270:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1675               		.loc 6 270 0
 1676 074e 8D81      		ldd r24,Y+5
 1677 0750 9E81      		ldd r25,Y+6
 1678 0752 8770      		andi r24,7
 1679 0754 9078      		andi r25,128
 1680 0756 9923      		tst r25
 1681 0758 04F4      		brge .L51
 1682 075a 0197      		sbiw r24,1
 1683 075c 886F      		ori r24,248
 1684 075e 9F6F      		ori r25,255
 1685 0760 0196      		adiw r24,1
 1686               	.L51:
 1687 0762 9C01      		movw r18,r24
 1688 0764 88E0      		ldi r24,lo8(8)
 1689 0766 90E0      		ldi r25,0
 1690 0768 821B      		sub r24,r18
 1691 076a 930B      		sbc r25,r19
 1692 076c 9C83      		std Y+4,r25
 1693 076e 8B83      		std Y+3,r24
 271:ServerLLDN.c  **** 		
 272:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1694               		.loc 6 272 0
 1695 0770 8981      		ldd r24,Y+1
 1696 0772 9A81      		ldd r25,Y+2
 1697 0774 8050      		subi r24,lo8(-(ACKFrame+1))
 1698 0776 9040      		sbci r25,hi8(-(ACKFrame+1))
 1699 0778 FC01      		movw r30,r24
 1700 077a 8081      		ld r24,Z
 1701 077c 882F      		mov r24,r24
 1702 077e 90E0      		ldi r25,0
 1703 0780 0B80      		ldd r0,Y+3
 1704 0782 00C0      		rjmp 2f
 1705               		1:
 1706 0784 9595      		asr r25
 1707 0786 8795      		ror r24
 1708               		2:
 1709 0788 0A94      		dec r0
 1710 078a 02F4      		brpl 1b
 1711 078c 8170      		andi r24,1
 1712 078e 9927      		clr r25
 1713 0790 892B      		or r24,r25
 1714 0792 01F0      		breq .L52
 273:ServerLLDN.c  **** 		{
 274:ServerLLDN.c  **** 			return true;
 1715               		.loc 6 274 0
 1716 0794 81E0      		ldi r24,lo8(1)
 1717 0796 00C0      		rjmp .L53
 1718               	.L52:
 275:ServerLLDN.c  **** 		}
 276:ServerLLDN.c  **** 		else
 277:ServerLLDN.c  **** 			return false;
 1719               		.loc 6 277 0
 1720 0798 80E0      		ldi r24,0
 1721               	.L53:
 1722               	/* epilogue start */
 278:ServerLLDN.c  **** 	}
 1723               		.loc 6 278 0
 1724 079a 2696      		adiw r28,6
 1725 079c 0FB6      		in __tmp_reg__,__SREG__
 1726 079e F894      		cli
 1727 07a0 DEBF      		out __SP_H__,r29
 1728 07a2 0FBE      		out __SREG__,__tmp_reg__
 1729 07a4 CDBF      		out __SP_L__,r28
 1730 07a6 DF91      		pop r29
 1731 07a8 CF91      		pop r28
 1732 07aa 0895      		ret
 1733               		.cfi_endproc
 1734               	.LFE139:
 1736               	.global	check_ack_aux
 1738               	check_ack_aux:
 1739               	.LFB140:
 279:ServerLLDN.c  **** 	
 280:ServerLLDN.c  **** 	bool check_ack_aux(int addr)
 281:ServerLLDN.c  **** 	{
 1740               		.loc 6 281 0
 1741               		.cfi_startproc
 1742 07ac CF93      		push r28
 1743               	.LCFI76:
 1744               		.cfi_def_cfa_offset 3
 1745               		.cfi_offset 28, -2
 1746 07ae DF93      		push r29
 1747               	.LCFI77:
 1748               		.cfi_def_cfa_offset 4
 1749               		.cfi_offset 29, -3
 1750 07b0 00D0      		rcall .
 1751 07b2 00D0      		rcall .
 1752 07b4 00D0      		rcall .
 1753               	.LCFI78:
 1754               		.cfi_def_cfa_offset 10
 1755 07b6 CDB7      		in r28,__SP_L__
 1756 07b8 DEB7      		in r29,__SP_H__
 1757               	.LCFI79:
 1758               		.cfi_def_cfa_register 28
 1759               	/* prologue: function */
 1760               	/* frame size = 6 */
 1761               	/* stack size = 8 */
 1762               	.L__stack_usage = 8
 1763 07ba 9E83      		std Y+6,r25
 1764 07bc 8D83      		std Y+5,r24
 282:ServerLLDN.c  **** 		int pos =  addr / 8;
 1765               		.loc 6 282 0
 1766 07be 8D81      		ldd r24,Y+5
 1767 07c0 9E81      		ldd r25,Y+6
 1768 07c2 9923      		tst r25
 1769 07c4 04F4      		brge .L55
 1770 07c6 0796      		adiw r24,7
 1771               	.L55:
 1772 07c8 9595      		asr r25
 1773 07ca 8795      		ror r24
 1774 07cc 9595      		asr r25
 1775 07ce 8795      		ror r24
 1776 07d0 9595      		asr r25
 1777 07d2 8795      		ror r24
 1778 07d4 9A83      		std Y+2,r25
 1779 07d6 8983      		std Y+1,r24
 283:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1780               		.loc 6 283 0
 1781 07d8 8D81      		ldd r24,Y+5
 1782 07da 9E81      		ldd r25,Y+6
 1783 07dc 8770      		andi r24,7
 1784 07de 9078      		andi r25,128
 1785 07e0 9923      		tst r25
 1786 07e2 04F4      		brge .L56
 1787 07e4 0197      		sbiw r24,1
 1788 07e6 886F      		ori r24,248
 1789 07e8 9F6F      		ori r25,255
 1790 07ea 0196      		adiw r24,1
 1791               	.L56:
 1792 07ec 9C01      		movw r18,r24
 1793 07ee 88E0      		ldi r24,lo8(8)
 1794 07f0 90E0      		ldi r25,0
 1795 07f2 821B      		sub r24,r18
 1796 07f4 930B      		sbc r25,r19
 1797 07f6 9C83      		std Y+4,r25
 1798 07f8 8B83      		std Y+3,r24
 284:ServerLLDN.c  **** 		
 285:ServerLLDN.c  **** 		if( ACKFrame_aux.ackFlags[pos] & 1 << bit_shift)
 1799               		.loc 6 285 0
 1800 07fa 8981      		ldd r24,Y+1
 1801 07fc 9A81      		ldd r25,Y+2
 1802 07fe 8050      		subi r24,lo8(-(ACKFrame_aux+1))
 1803 0800 9040      		sbci r25,hi8(-(ACKFrame_aux+1))
 1804 0802 FC01      		movw r30,r24
 1805 0804 8081      		ld r24,Z
 1806 0806 882F      		mov r24,r24
 1807 0808 90E0      		ldi r25,0
 1808 080a 0B80      		ldd r0,Y+3
 1809 080c 00C0      		rjmp 2f
 1810               		1:
 1811 080e 9595      		asr r25
 1812 0810 8795      		ror r24
 1813               		2:
 1814 0812 0A94      		dec r0
 1815 0814 02F4      		brpl 1b
 1816 0816 8170      		andi r24,1
 1817 0818 9927      		clr r25
 1818 081a 892B      		or r24,r25
 1819 081c 01F0      		breq .L57
 286:ServerLLDN.c  **** 		{
 287:ServerLLDN.c  **** 			return true;
 1820               		.loc 6 287 0
 1821 081e 81E0      		ldi r24,lo8(1)
 1822 0820 00C0      		rjmp .L58
 1823               	.L57:
 288:ServerLLDN.c  **** 		}
 289:ServerLLDN.c  **** 		else
 290:ServerLLDN.c  **** 		return false;
 1824               		.loc 6 290 0
 1825 0822 80E0      		ldi r24,0
 1826               	.L58:
 1827               	/* epilogue start */
 291:ServerLLDN.c  **** 	}
 1828               		.loc 6 291 0
 1829 0824 2696      		adiw r28,6
 1830 0826 0FB6      		in __tmp_reg__,__SREG__
 1831 0828 F894      		cli
 1832 082a DEBF      		out __SP_H__,r29
 1833 082c 0FBE      		out __SREG__,__tmp_reg__
 1834 082e CDBF      		out __SP_L__,r28
 1835 0830 DF91      		pop r29
 1836 0832 CF91      		pop r28
 1837 0834 0895      		ret
 1838               		.cfi_endproc
 1839               	.LFE140:
 1841               	.global	__floatsisf
 1842               	.global	__divsf3
 1843               	.global	__subsf3
 1844               	.global	__fixsfsi
 1845               	.global	__floatunsisf
 1846               	.global	__mulsf3
 1847               	.global	__addsf3
 1849               	appDataInd:
 1850               	.LFB141:
 292:ServerLLDN.c  **** 	
 293:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 294:ServerLLDN.c  **** 	{
 1851               		.loc 6 294 0
 1852               		.cfi_startproc
 1853 0836 8F92      		push r8
 1854               	.LCFI80:
 1855               		.cfi_def_cfa_offset 3
 1856               		.cfi_offset 8, -2
 1857 0838 9F92      		push r9
 1858               	.LCFI81:
 1859               		.cfi_def_cfa_offset 4
 1860               		.cfi_offset 9, -3
 1861 083a AF92      		push r10
 1862               	.LCFI82:
 1863               		.cfi_def_cfa_offset 5
 1864               		.cfi_offset 10, -4
 1865 083c BF92      		push r11
 1866               	.LCFI83:
 1867               		.cfi_def_cfa_offset 6
 1868               		.cfi_offset 11, -5
 1869 083e CF92      		push r12
 1870               	.LCFI84:
 1871               		.cfi_def_cfa_offset 7
 1872               		.cfi_offset 12, -6
 1873 0840 DF92      		push r13
 1874               	.LCFI85:
 1875               		.cfi_def_cfa_offset 8
 1876               		.cfi_offset 13, -7
 1877 0842 EF92      		push r14
 1878               	.LCFI86:
 1879               		.cfi_def_cfa_offset 9
 1880               		.cfi_offset 14, -8
 1881 0844 FF92      		push r15
 1882               	.LCFI87:
 1883               		.cfi_def_cfa_offset 10
 1884               		.cfi_offset 15, -9
 1885 0846 CF93      		push r28
 1886               	.LCFI88:
 1887               		.cfi_def_cfa_offset 11
 1888               		.cfi_offset 28, -10
 1889 0848 DF93      		push r29
 1890               	.LCFI89:
 1891               		.cfi_def_cfa_offset 12
 1892               		.cfi_offset 29, -11
 1893 084a CDB7      		in r28,__SP_L__
 1894 084c DEB7      		in r29,__SP_H__
 1895               	.LCFI90:
 1896               		.cfi_def_cfa_register 28
 1897 084e 2E97      		sbiw r28,14
 1898               	.LCFI91:
 1899               		.cfi_def_cfa_offset 26
 1900 0850 0FB6      		in __tmp_reg__,__SREG__
 1901 0852 F894      		cli
 1902 0854 DEBF      		out __SP_H__,r29
 1903 0856 0FBE      		out __SREG__,__tmp_reg__
 1904 0858 CDBF      		out __SP_L__,r28
 1905               	/* prologue: function */
 1906               	/* frame size = 14 */
 1907               	/* stack size = 24 */
 1908               	.L__stack_usage = 24
 1909 085a 9E87      		std Y+14,r25
 1910 085c 8D87      		std Y+13,r24
 295:ServerLLDN.c  **** 		uint32_t cmp_value = macsc_read_count();
 1911               		.loc 6 295 0
 1912 085e 0E94 0000 		call macsc_read_count
 1913 0862 DC01      		movw r26,r24
 1914 0864 CB01      		movw r24,r22
 1915 0866 8F83      		std Y+7,r24
 1916 0868 9887      		std Y+8,r25
 1917 086a A987      		std Y+9,r26
 1918 086c BA87      		std Y+10,r27
 296:ServerLLDN.c  **** 		int relative_cmp =  cmp_value - cmp_value_start_superframe - 40;
 1919               		.loc 6 296 0
 1920 086e 2F81      		ldd r18,Y+7
 1921 0870 3885      		ldd r19,Y+8
 1922 0872 8091 0000 		lds r24,cmp_value_start_superframe
 1923 0876 9091 0000 		lds r25,cmp_value_start_superframe+1
 1924 087a A091 0000 		lds r26,cmp_value_start_superframe+2
 1925 087e B091 0000 		lds r27,cmp_value_start_superframe+3
 1926 0882 A901      		movw r20,r18
 1927 0884 481B      		sub r20,r24
 1928 0886 590B      		sbc r21,r25
 1929 0888 CA01      		movw r24,r20
 1930 088a 8897      		sbiw r24,40
 1931 088c 9C87      		std Y+12,r25
 1932 088e 8B87      		std Y+11,r24
 297:ServerLLDN.c  **** 		
 298:ServerLLDN.c  **** 
 299:ServerLLDN.c  **** 		int curr_up_ts = (relative_cmp)/(tTS / (SYMBOL_TIME)) - 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_on
 1933               		.loc 6 299 0
 1934 0890 8B85      		ldd r24,Y+11
 1935 0892 9C85      		ldd r25,Y+12
 1936 0894 092E      		mov __tmp_reg__,r25
 1937 0896 000C      		lsl r0
 1938 0898 AA0B      		sbc r26,r26
 1939 089a BB0B      		sbc r27,r27
 1940 089c BC01      		movw r22,r24
 1941 089e CD01      		movw r24,r26
 1942 08a0 0E94 0000 		call __floatsisf
 1943 08a4 6B01      		movw r12,r22
 1944 08a6 7C01      		movw r14,r24
 1945 08a8 8091 0000 		lds r24,tTS
 1946 08ac 9091 0000 		lds r25,tTS+1
 1947 08b0 A091 0000 		lds r26,tTS+2
 1948 08b4 B091 0000 		lds r27,tTS+3
 1949 08b8 2DEB      		ldi r18,lo8(-67)
 1950 08ba 37E3      		ldi r19,lo8(55)
 1951 08bc 46E8      		ldi r20,lo8(-122)
 1952 08be 57E3      		ldi r21,lo8(55)
 1953 08c0 BC01      		movw r22,r24
 1954 08c2 CD01      		movw r24,r26
 1955 08c4 0E94 0000 		call __divsf3
 1956 08c8 DC01      		movw r26,r24
 1957 08ca CB01      		movw r24,r22
 1958 08cc 9C01      		movw r18,r24
 1959 08ce AD01      		movw r20,r26
 1960 08d0 C701      		movw r24,r14
 1961 08d2 B601      		movw r22,r12
 1962 08d4 0E94 0000 		call __divsf3
 1963 08d8 DC01      		movw r26,r24
 1964 08da CB01      		movw r24,r22
 1965 08dc 20E0      		ldi r18,0
 1966 08de 30E0      		ldi r19,0
 1967 08e0 40E8      		ldi r20,lo8(-128)
 1968 08e2 50E4      		ldi r21,lo8(64)
 1969 08e4 BC01      		movw r22,r24
 1970 08e6 CD01      		movw r24,r26
 1971 08e8 0E94 0000 		call __subsf3
 1972 08ec DC01      		movw r26,r24
 1973 08ee CB01      		movw r24,r22
 1974 08f0 BC01      		movw r22,r24
 1975 08f2 CD01      		movw r24,r26
 1976 08f4 0E94 0000 		call __fixsfsi
 1977 08f8 DC01      		movw r26,r24
 1978 08fa CB01      		movw r24,r22
 1979 08fc 9A83      		std Y+2,r25
 1980 08fe 8983      		std Y+1,r24
 300:ServerLLDN.c  **** 		if(curr_up_ts > assTimeSlot)
 1981               		.loc 6 300 0
 1982 0900 8091 0000 		lds r24,assTimeSlot
 1983 0904 9091 0000 		lds r25,assTimeSlot+1
 1984 0908 2981      		ldd r18,Y+1
 1985 090a 3A81      		ldd r19,Y+2
 1986 090c 8217      		cp r24,r18
 1987 090e 9307      		cpc r25,r19
 1988 0910 04F0      		brlt .+2
 1989 0912 00C0      		rjmp .L60
 1990               	.LBB6:
 301:ServerLLDN.c  **** 		{
 302:ServerLLDN.c  **** 			
 303:ServerLLDN.c  **** 			int i;
 304:ServerLLDN.c  **** 			curr_up_ts -= assTimeSlot+1;
 1991               		.loc 6 304 0
 1992 0914 8091 0000 		lds r24,assTimeSlot
 1993 0918 9091 0000 		lds r25,assTimeSlot+1
 1994 091c 0196      		adiw r24,1
 1995 091e 2981      		ldd r18,Y+1
 1996 0920 3A81      		ldd r19,Y+2
 1997 0922 F901      		movw r30,r18
 1998 0924 E81B      		sub r30,r24
 1999 0926 F90B      		sbc r31,r25
 2000 0928 CF01      		movw r24,r30
 2001 092a 9A83      		std Y+2,r25
 2002 092c 8983      		std Y+1,r24
 305:ServerLLDN.c  **** 			for (i = 0; i < assTimeSlot && curr_up_ts > 0; ++i)
 2003               		.loc 6 305 0
 2004 092e 1C82      		std Y+4,__zero_reg__
 2005 0930 1B82      		std Y+3,__zero_reg__
 2006 0932 00C0      		rjmp .L61
 2007               	.L64:
 306:ServerLLDN.c  **** 			{
 307:ServerLLDN.c  **** 				if(!check_ack_aux(i+1))
 2008               		.loc 6 307 0
 2009 0934 8B81      		ldd r24,Y+3
 2010 0936 9C81      		ldd r25,Y+4
 2011 0938 0196      		adiw r24,1
 2012 093a 0E94 0000 		call check_ack_aux
 2013 093e 982F      		mov r25,r24
 2014 0940 81E0      		ldi r24,lo8(1)
 2015 0942 8927      		eor r24,r25
 2016 0944 8823      		tst r24
 2017 0946 01F0      		breq .L62
 308:ServerLLDN.c  **** 				{
 309:ServerLLDN.c  **** 					curr_up_ts--;
 2018               		.loc 6 309 0
 2019 0948 8981      		ldd r24,Y+1
 2020 094a 9A81      		ldd r25,Y+2
 2021 094c 0197      		sbiw r24,1
 2022 094e 9A83      		std Y+2,r25
 2023 0950 8983      		std Y+1,r24
 2024               	.L62:
 305:ServerLLDN.c  **** 			{
 2025               		.loc 6 305 0 discriminator 2
 2026 0952 8B81      		ldd r24,Y+3
 2027 0954 9C81      		ldd r25,Y+4
 2028 0956 0196      		adiw r24,1
 2029 0958 9C83      		std Y+4,r25
 2030 095a 8B83      		std Y+3,r24
 2031               	.L61:
 305:ServerLLDN.c  **** 			{
 2032               		.loc 6 305 0 is_stmt 0 discriminator 1
 2033 095c 8091 0000 		lds r24,assTimeSlot
 2034 0960 9091 0000 		lds r25,assTimeSlot+1
 2035 0964 2B81      		ldd r18,Y+3
 2036 0966 3C81      		ldd r19,Y+4
 2037 0968 2817      		cp r18,r24
 2038 096a 3907      		cpc r19,r25
 2039 096c 04F4      		brge .L63
 305:ServerLLDN.c  **** 			{
 2040               		.loc 6 305 0 discriminator 3
 2041 096e 8981      		ldd r24,Y+1
 2042 0970 9A81      		ldd r25,Y+2
 2043 0972 1816      		cp __zero_reg__,r24
 2044 0974 1906      		cpc __zero_reg__,r25
 2045 0976 04F0      		brlt .L64
 2046               	.L63:
 310:ServerLLDN.c  **** 				}
 311:ServerLLDN.c  **** 			}
 312:ServerLLDN.c  **** 			curr_up_ts = i-1*(i!=0);
 2047               		.loc 6 312 0 is_stmt 1
 2048 0978 21E0      		ldi r18,lo8(1)
 2049 097a 8B81      		ldd r24,Y+3
 2050 097c 9C81      		ldd r25,Y+4
 2051 097e 892B      		or r24,r25
 2052 0980 01F4      		brne .L65
 2053 0982 20E0      		ldi r18,0
 2054               	.L65:
 2055 0984 822F      		mov r24,r18
 2056 0986 90E0      		ldi r25,0
 2057 0988 2B81      		ldd r18,Y+3
 2058 098a 3C81      		ldd r19,Y+4
 2059 098c A901      		movw r20,r18
 2060 098e 481B      		sub r20,r24
 2061 0990 590B      		sbc r21,r25
 2062 0992 CA01      		movw r24,r20
 2063 0994 9A83      		std Y+2,r25
 2064 0996 8983      		std Y+1,r24
 2065               	.L60:
 2066               	.LBE6:
 313:ServerLLDN.c  **** 		}
 314:ServerLLDN.c  **** 	
 315:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].rssi = ind->rssi;
 2067               		.loc 6 315 0
 2068 0998 8D85      		ldd r24,Y+13
 2069 099a 9E85      		ldd r25,Y+14
 2070 099c FC01      		movw r30,r24
 2071 099e 8485      		ldd r24,Z+12
 2072 09a0 582F      		mov r21,r24
 2073 09a2 2981      		ldd r18,Y+1
 2074 09a4 3A81      		ldd r19,Y+2
 2075 09a6 4AE4      		ldi r20,lo8(74)
 2076 09a8 429F      		mul r20,r18
 2077 09aa C001      		movw r24,r0
 2078 09ac 439F      		mul r20,r19
 2079 09ae 900D      		add r25,r0
 2080 09b0 1124      		clr __zero_reg__
 2081 09b2 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2082 09b4 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2083 09b6 FC01      		movw r30,r24
 2084 09b8 5083      		st Z,r21
 316:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2085               		.loc 6 316 0
 2086 09ba 2981      		ldd r18,Y+1
 2087 09bc 3A81      		ldd r19,Y+2
 2088 09be 4AE4      		ldi r20,lo8(74)
 2089 09c0 429F      		mul r20,r18
 2090 09c2 C001      		movw r24,r0
 2091 09c4 439F      		mul r20,r19
 2092 09c6 900D      		add r25,r0
 2093 09c8 1124      		clr __zero_reg__
 2094 09ca 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2095 09cc 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2096 09ce FC01      		movw r30,r24
 2097 09d0 8081      		ld r24,Z
 2098 09d2 882F      		mov r24,r24
 2099 09d4 90E0      		ldi r25,0
 2100 09d6 092E      		mov __tmp_reg__,r25
 2101 09d8 000C      		lsl r0
 2102 09da AA0B      		sbc r26,r26
 2103 09dc BB0B      		sbc r27,r27
 2104 09de BC01      		movw r22,r24
 2105 09e0 CD01      		movw r24,r26
 2106 09e2 0E94 0000 		call __floatsisf
 2107 09e6 4B01      		movw r8,r22
 2108 09e8 5C01      		movw r10,r24
 2109 09ea 2981      		ldd r18,Y+1
 2110 09ec 3A81      		ldd r19,Y+2
 2111 09ee 4AE4      		ldi r20,lo8(74)
 2112 09f0 429F      		mul r20,r18
 2113 09f2 C001      		movw r24,r0
 2114 09f4 439F      		mul r20,r19
 2115 09f6 900D      		add r25,r0
 2116 09f8 1124      		clr __zero_reg__
 2117 09fa 8050      		subi r24,lo8(-(nodes_info_arr+5))
 2118 09fc 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 2119 09fe FC01      		movw r30,r24
 2120 0a00 C080      		ld r12,Z
 2121 0a02 D180      		ldd r13,Z+1
 2122 0a04 E280      		ldd r14,Z+2
 2123 0a06 F380      		ldd r15,Z+3
 2124 0a08 2981      		ldd r18,Y+1
 2125 0a0a 3A81      		ldd r19,Y+2
 2126 0a0c 4AE4      		ldi r20,lo8(74)
 2127 0a0e 429F      		mul r20,r18
 2128 0a10 C001      		movw r24,r0
 2129 0a12 439F      		mul r20,r19
 2130 0a14 900D      		add r25,r0
 2131 0a16 1124      		clr __zero_reg__
 2132 0a18 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2133 0a1a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2134 0a1c FC01      		movw r30,r24
 2135 0a1e 8081      		ld r24,Z
 2136 0a20 9181      		ldd r25,Z+1
 2137 0a22 CC01      		movw r24,r24
 2138 0a24 A0E0      		ldi r26,0
 2139 0a26 B0E0      		ldi r27,0
 2140 0a28 BC01      		movw r22,r24
 2141 0a2a CD01      		movw r24,r26
 2142 0a2c 0E94 0000 		call __floatunsisf
 2143 0a30 DC01      		movw r26,r24
 2144 0a32 CB01      		movw r24,r22
 2145 0a34 9C01      		movw r18,r24
 2146 0a36 AD01      		movw r20,r26
 2147 0a38 C701      		movw r24,r14
 2148 0a3a B601      		movw r22,r12
 2149 0a3c 0E94 0000 		call __mulsf3
 2150 0a40 DC01      		movw r26,r24
 2151 0a42 CB01      		movw r24,r22
 2152 0a44 9C01      		movw r18,r24
 2153 0a46 AD01      		movw r20,r26
 2154 0a48 C501      		movw r24,r10
 2155 0a4a B401      		movw r22,r8
 2156 0a4c 0E94 0000 		call __addsf3
 2157 0a50 DC01      		movw r26,r24
 2158 0a52 CB01      		movw r24,r22
 2159 0a54 6C01      		movw r12,r24
 2160 0a56 7D01      		movw r14,r26
 317:ServerLLDN.c  **** 																				/(nodes_info_arr[curr_up_ts].msg_rec + 1);
 2161               		.loc 6 317 0
 2162 0a58 2981      		ldd r18,Y+1
 2163 0a5a 3A81      		ldd r19,Y+2
 2164 0a5c 4AE4      		ldi r20,lo8(74)
 2165 0a5e 429F      		mul r20,r18
 2166 0a60 C001      		movw r24,r0
 2167 0a62 439F      		mul r20,r19
 2168 0a64 900D      		add r25,r0
 2169 0a66 1124      		clr __zero_reg__
 2170 0a68 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2171 0a6a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2172 0a6c FC01      		movw r30,r24
 2173 0a6e 8081      		ld r24,Z
 2174 0a70 9181      		ldd r25,Z+1
 2175 0a72 0196      		adiw r24,1
 2176 0a74 CC01      		movw r24,r24
 2177 0a76 A0E0      		ldi r26,0
 2178 0a78 B0E0      		ldi r27,0
 2179 0a7a BC01      		movw r22,r24
 2180 0a7c CD01      		movw r24,r26
 2181 0a7e 0E94 0000 		call __floatunsisf
 2182 0a82 DC01      		movw r26,r24
 2183 0a84 CB01      		movw r24,r22
 2184 0a86 9C01      		movw r18,r24
 2185 0a88 AD01      		movw r20,r26
 2186 0a8a C701      		movw r24,r14
 2187 0a8c B601      		movw r22,r12
 2188 0a8e 0E94 0000 		call __divsf3
 2189 0a92 DC01      		movw r26,r24
 2190 0a94 CB01      		movw r24,r22
 316:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2191               		.loc 6 316 0
 2192 0a96 4981      		ldd r20,Y+1
 2193 0a98 5A81      		ldd r21,Y+2
 2194 0a9a 6AE4      		ldi r22,lo8(74)
 2195 0a9c 649F      		mul r22,r20
 2196 0a9e 9001      		movw r18,r0
 2197 0aa0 659F      		mul r22,r21
 2198 0aa2 300D      		add r19,r0
 2199 0aa4 1124      		clr __zero_reg__
 2200 0aa6 2050      		subi r18,lo8(-(nodes_info_arr+5))
 2201 0aa8 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 2202 0aaa F901      		movw r30,r18
 2203 0aac 8083      		st Z,r24
 2204 0aae 9183      		std Z+1,r25
 2205 0ab0 A283      		std Z+2,r26
 2206 0ab2 B383      		std Z+3,r27
 318:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].msg_rec++;
 2207               		.loc 6 318 0
 2208 0ab4 2981      		ldd r18,Y+1
 2209 0ab6 3A81      		ldd r19,Y+2
 2210 0ab8 4AE4      		ldi r20,lo8(74)
 2211 0aba 429F      		mul r20,r18
 2212 0abc C001      		movw r24,r0
 2213 0abe 439F      		mul r20,r19
 2214 0ac0 900D      		add r25,r0
 2215 0ac2 1124      		clr __zero_reg__
 2216 0ac4 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2217 0ac6 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2218 0ac8 FC01      		movw r30,r24
 2219 0aca 8081      		ld r24,Z
 2220 0acc 9181      		ldd r25,Z+1
 2221 0ace 9C01      		movw r18,r24
 2222 0ad0 2F5F      		subi r18,-1
 2223 0ad2 3F4F      		sbci r19,-1
 2224 0ad4 4981      		ldd r20,Y+1
 2225 0ad6 5A81      		ldd r21,Y+2
 2226 0ad8 6AE4      		ldi r22,lo8(74)
 2227 0ada 649F      		mul r22,r20
 2228 0adc C001      		movw r24,r0
 2229 0ade 659F      		mul r22,r21
 2230 0ae0 900D      		add r25,r0
 2231 0ae2 1124      		clr __zero_reg__
 2232 0ae4 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2233 0ae6 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2234 0ae8 FC01      		movw r30,r24
 2235 0aea 3183      		std Z+1,r19
 2236 0aec 2083      		st Z,r18
 319:ServerLLDN.c  **** 
 320:ServerLLDN.c  **** 		addToAckArray(curr_up_ts+1);
 2237               		.loc 6 320 0
 2238 0aee 8981      		ldd r24,Y+1
 2239 0af0 8F5F      		subi r24,lo8(-(1))
 2240 0af2 0E94 0000 		call addToAckArray
 2241               	.LBB7:
 321:ServerLLDN.c  **** 		#if PRINT
 322:ServerLLDN.c  ****  		//printf("\n[%d] Data: ", curr_up_ts);
 323:ServerLLDN.c  **** 		#endif
 324:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2242               		.loc 6 324 0
 2243 0af6 1E82      		std Y+6,__zero_reg__
 2244 0af8 1D82      		std Y+5,__zero_reg__
 2245 0afa 00C0      		rjmp .L66
 2246               	.L67:
 325:ServerLLDN.c  **** 		{
 326:ServerLLDN.c  **** 			msg_info_array[curr_up_ts].data_payload[i] = ind->data[i];
 2247               		.loc 6 326 0 discriminator 3
 2248 0afc 8D85      		ldd r24,Y+13
 2249 0afe 9E85      		ldd r25,Y+14
 2250 0b00 FC01      		movw r30,r24
 2251 0b02 2085      		ldd r18,Z+8
 2252 0b04 3185      		ldd r19,Z+9
 2253 0b06 8D81      		ldd r24,Y+5
 2254 0b08 9E81      		ldd r25,Y+6
 2255 0b0a 820F      		add r24,r18
 2256 0b0c 931F      		adc r25,r19
 2257 0b0e FC01      		movw r30,r24
 2258 0b10 4081      		ld r20,Z
 2259 0b12 8981      		ldd r24,Y+1
 2260 0b14 9A81      		ldd r25,Y+2
 2261 0b16 54E8      		ldi r21,lo8(-124)
 2262 0b18 589F      		mul r21,r24
 2263 0b1a 9001      		movw r18,r0
 2264 0b1c 599F      		mul r21,r25
 2265 0b1e 300D      		add r19,r0
 2266 0b20 1124      		clr __zero_reg__
 2267 0b22 8D81      		ldd r24,Y+5
 2268 0b24 9E81      		ldd r25,Y+6
 2269 0b26 820F      		add r24,r18
 2270 0b28 931F      		adc r25,r19
 2271 0b2a 8050      		subi r24,lo8(-(msg_info_array+5))
 2272 0b2c 9040      		sbci r25,hi8(-(msg_info_array+5))
 2273 0b2e FC01      		movw r30,r24
 2274 0b30 4083      		st Z,r20
 324:ServerLLDN.c  **** 		{
 2275               		.loc 6 324 0 discriminator 3
 2276 0b32 8D81      		ldd r24,Y+5
 2277 0b34 9E81      		ldd r25,Y+6
 2278 0b36 0196      		adiw r24,1
 2279 0b38 9E83      		std Y+6,r25
 2280 0b3a 8D83      		std Y+5,r24
 2281               	.L66:
 324:ServerLLDN.c  **** 		{
 2282               		.loc 6 324 0 is_stmt 0 discriminator 1
 2283 0b3c 8D85      		ldd r24,Y+13
 2284 0b3e 9E85      		ldd r25,Y+14
 2285 0b40 FC01      		movw r30,r24
 2286 0b42 8285      		ldd r24,Z+10
 2287 0b44 282F      		mov r18,r24
 2288 0b46 30E0      		ldi r19,0
 2289 0b48 8D81      		ldd r24,Y+5
 2290 0b4a 9E81      		ldd r25,Y+6
 2291 0b4c 8217      		cp r24,r18
 2292 0b4e 9307      		cpc r25,r19
 2293 0b50 04F0      		brlt .L67
 2294               	.LBE7:
 327:ServerLLDN.c  **** 			#if PRINT
 328:ServerLLDN.c  ****  			//printf("%hhx", msg_info_array[curr_up_ts].data_payload[i]);
 329:ServerLLDN.c  **** 			#endif
 330:ServerLLDN.c  **** 		}		
 331:ServerLLDN.c  **** // 		printf(" cmp %d", relative_cmp);
 332:ServerLLDN.c  **** 	}
 2295               		.loc 6 332 0 is_stmt 1
 2296 0b52 0000      		nop
 2297               	/* epilogue start */
 2298 0b54 2E96      		adiw r28,14
 2299 0b56 0FB6      		in __tmp_reg__,__SREG__
 2300 0b58 F894      		cli
 2301 0b5a DEBF      		out __SP_H__,r29
 2302 0b5c 0FBE      		out __SREG__,__tmp_reg__
 2303 0b5e CDBF      		out __SP_L__,r28
 2304 0b60 DF91      		pop r29
 2305 0b62 CF91      		pop r28
 2306 0b64 FF90      		pop r15
 2307 0b66 EF90      		pop r14
 2308 0b68 DF90      		pop r13
 2309 0b6a CF90      		pop r12
 2310 0b6c BF90      		pop r11
 2311 0b6e AF90      		pop r10
 2312 0b70 9F90      		pop r9
 2313 0b72 8F90      		pop r8
 2314 0b74 0895      		ret
 2315               		.cfi_endproc
 2316               	.LFE141:
 2319               	appPanPrepareACK:
 2320               	.LFB142:
 333:ServerLLDN.c  **** 	
 334:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 335:ServerLLDN.c  **** 	{
 2321               		.loc 6 335 0
 2322               		.cfi_startproc
 2323 0b76 CF93      		push r28
 2324               	.LCFI92:
 2325               		.cfi_def_cfa_offset 3
 2326               		.cfi_offset 28, -2
 2327 0b78 DF93      		push r29
 2328               	.LCFI93:
 2329               		.cfi_def_cfa_offset 4
 2330               		.cfi_offset 29, -3
 2331 0b7a CDB7      		in r28,__SP_L__
 2332 0b7c DEB7      		in r29,__SP_H__
 2333               	.LCFI94:
 2334               		.cfi_def_cfa_register 28
 2335               	/* prologue: function */
 2336               	/* frame size = 0 */
 2337               	/* stack size = 2 */
 2338               	.L__stack_usage = 2
 336:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2339               		.loc 6 336 0
 2340 0b7e 1092 0000 		sts msgReq+5+1,__zero_reg__
 2341 0b82 1092 0000 		sts msgReq+5,__zero_reg__
 337:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2342               		.loc 6 337 0
 2343 0b86 1092 0000 		sts msgReq+7,__zero_reg__
 338:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2344               		.loc 6 338 0
 2345 0b8a 1092 0000 		sts msgReq+8,__zero_reg__
 339:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2346               		.loc 6 339 0
 2347 0b8e 80E0      		ldi r24,0
 2348 0b90 90E4      		ldi r25,lo8(64)
 2349 0b92 9093 0000 		sts msgReq+9+1,r25
 2350 0b96 8093 0000 		sts msgReq+9,r24
 340:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2351               		.loc 6 340 0
 2352 0b9a 80E0      		ldi r24,lo8(ACKFrame)
 2353 0b9c 90E0      		ldi r25,hi8(ACKFrame)
 2354 0b9e 9093 0000 		sts msgReq+13+1,r25
 2355 0ba2 8093 0000 		sts msgReq+13,r24
 341:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2356               		.loc 6 341 0
 2357 0ba6 8091 0000 		lds r24,ACKFrame_size
 2358 0baa 9091 0000 		lds r25,ACKFrame_size+1
 2359 0bae 8F5F      		subi r24,lo8(-(1))
 2360 0bb0 8093 0000 		sts msgReq+15,r24
 342:ServerLLDN.c  **** 
 343:ServerLLDN.c  **** 	}
 2361               		.loc 6 343 0
 2362 0bb4 0000      		nop
 2363               	/* epilogue start */
 2364 0bb6 DF91      		pop r29
 2365 0bb8 CF91      		pop r28
 2366 0bba 0895      		ret
 2367               		.cfi_endproc
 2368               	.LFE142:
 2371               	appPanReset:
 2372               	.LFB143:
 344:ServerLLDN.c  **** 
 345:ServerLLDN.c  **** 	static void appPanReset(void)
 346:ServerLLDN.c  **** 	{
 2373               		.loc 6 346 0
 2374               		.cfi_startproc
 2375 0bbc CF93      		push r28
 2376               	.LCFI95:
 2377               		.cfi_def_cfa_offset 3
 2378               		.cfi_offset 28, -2
 2379 0bbe DF93      		push r29
 2380               	.LCFI96:
 2381               		.cfi_def_cfa_offset 4
 2382               		.cfi_offset 29, -3
 2383 0bc0 00D0      		rcall .
 2384 0bc2 00D0      		rcall .
 2385 0bc4 00D0      		rcall .
 2386               	.LCFI97:
 2387               		.cfi_def_cfa_offset 10
 2388 0bc6 CDB7      		in r28,__SP_L__
 2389 0bc8 DEB7      		in r29,__SP_H__
 2390               	.LCFI98:
 2391               		.cfi_def_cfa_register 28
 2392               	/* prologue: function */
 2393               	/* frame size = 6 */
 2394               	/* stack size = 8 */
 2395               	.L__stack_usage = 8
 347:ServerLLDN.c  **** 		// prepare beacon reset message
 348:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2396               		.loc 6 348 0
 2397 0bca 1092 0000 		sts msgReq+5+1,__zero_reg__
 2398 0bce 1092 0000 		sts msgReq+5,__zero_reg__
 349:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2399               		.loc 6 349 0
 2400 0bd2 1092 0000 		sts msgReq+7,__zero_reg__
 350:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2401               		.loc 6 350 0
 2402 0bd6 1092 0000 		sts msgReq+8,__zero_reg__
 351:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2403               		.loc 6 351 0
 2404 0bda 80E4      		ldi r24,lo8(64)
 2405 0bdc 94E0      		ldi r25,lo8(4)
 2406 0bde 9093 0000 		sts msgReq+9+1,r25
 2407 0be2 8093 0000 		sts msgReq+9,r24
 352:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2408               		.loc 6 352 0
 2409 0be6 1092 0000 		sts msgReq+13+1,__zero_reg__
 2410 0bea 1092 0000 		sts msgReq+13,__zero_reg__
 353:ServerLLDN.c  **** 		msgReq.size			= 0;
 2411               		.loc 6 353 0
 2412 0bee 1092 0000 		sts msgReq+15,__zero_reg__
 2413               	.LBB8:
 354:ServerLLDN.c  **** 
 355:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2414               		.loc 6 355 0
 2415 0bf2 1A82      		std Y+2,__zero_reg__
 2416 0bf4 1982      		std Y+1,__zero_reg__
 2417 0bf6 00C0      		rjmp .L70
 2418               	.L71:
 356:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2419               		.loc 6 356 0 discriminator 3
 2420 0bf8 8981      		ldd r24,Y+1
 2421 0bfa 9A81      		ldd r25,Y+2
 2422 0bfc 8050      		subi r24,lo8(-(ACKFrame+1))
 2423 0bfe 9040      		sbci r25,hi8(-(ACKFrame+1))
 2424 0c00 FC01      		movw r30,r24
 2425 0c02 1082      		st Z,__zero_reg__
 355:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2426               		.loc 6 355 0 discriminator 3
 2427 0c04 8981      		ldd r24,Y+1
 2428 0c06 9A81      		ldd r25,Y+2
 2429 0c08 0196      		adiw r24,1
 2430 0c0a 9A83      		std Y+2,r25
 2431 0c0c 8983      		std Y+1,r24
 2432               	.L70:
 355:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2433               		.loc 6 355 0 is_stmt 0 discriminator 1
 2434 0c0e 8981      		ldd r24,Y+1
 2435 0c10 9A81      		ldd r25,Y+2
 2436 0c12 8097      		sbiw r24,32
 2437 0c14 04F0      		brlt .L71
 2438               	.LBE8:
 2439               	.LBB9:
 357:ServerLLDN.c  **** 			
 358:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2440               		.loc 6 358 0 is_stmt 1
 2441 0c16 1C82      		std Y+4,__zero_reg__
 2442 0c18 1B82      		std Y+3,__zero_reg__
 2443 0c1a 00C0      		rjmp .L72
 2444               	.L75:
 359:ServerLLDN.c  **** 		{
 360:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2445               		.loc 6 360 0
 2446 0c1c 2B81      		ldd r18,Y+3
 2447 0c1e 3C81      		ldd r19,Y+4
 2448 0c20 4AE4      		ldi r20,lo8(74)
 2449 0c22 429F      		mul r20,r18
 2450 0c24 C001      		movw r24,r0
 2451 0c26 439F      		mul r20,r19
 2452 0c28 900D      		add r25,r0
 2453 0c2a 1124      		clr __zero_reg__
 2454 0c2c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2455 0c2e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2456 0c30 FC01      		movw r30,r24
 2457 0c32 1182      		std Z+1,__zero_reg__
 2458 0c34 1082      		st Z,__zero_reg__
 361:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2459               		.loc 6 361 0
 2460 0c36 2B81      		ldd r18,Y+3
 2461 0c38 3C81      		ldd r19,Y+4
 2462 0c3a 4AE4      		ldi r20,lo8(74)
 2463 0c3c 429F      		mul r20,r18
 2464 0c3e C001      		movw r24,r0
 2465 0c40 439F      		mul r20,r19
 2466 0c42 900D      		add r25,r0
 2467 0c44 1124      		clr __zero_reg__
 2468 0c46 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2469 0c48 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2470 0c4a FC01      		movw r30,r24
 2471 0c4c 1182      		std Z+1,__zero_reg__
 2472 0c4e 1082      		st Z,__zero_reg__
 362:ServerLLDN.c  **** 
 363:ServerLLDN.c  **** 			
 364:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2473               		.loc 6 364 0
 2474 0c50 2B81      		ldd r18,Y+3
 2475 0c52 3C81      		ldd r19,Y+4
 2476 0c54 44E8      		ldi r20,lo8(-124)
 2477 0c56 429F      		mul r20,r18
 2478 0c58 C001      		movw r24,r0
 2479 0c5a 439F      		mul r20,r19
 2480 0c5c 900D      		add r25,r0
 2481 0c5e 1124      		clr __zero_reg__
 2482 0c60 8050      		subi r24,lo8(-(msg_info_array))
 2483 0c62 9040      		sbci r25,hi8(-(msg_info_array))
 2484 0c64 FC01      		movw r30,r24
 2485 0c66 1182      		std Z+1,__zero_reg__
 2486 0c68 1082      		st Z,__zero_reg__
 365:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2487               		.loc 6 365 0
 2488 0c6a 2B81      		ldd r18,Y+3
 2489 0c6c 3C81      		ldd r19,Y+4
 2490 0c6e 44E8      		ldi r20,lo8(-124)
 2491 0c70 429F      		mul r20,r18
 2492 0c72 C001      		movw r24,r0
 2493 0c74 439F      		mul r20,r19
 2494 0c76 900D      		add r25,r0
 2495 0c78 1124      		clr __zero_reg__
 2496 0c7a 8050      		subi r24,lo8(-(msg_info_array+2))
 2497 0c7c 9040      		sbci r25,hi8(-(msg_info_array+2))
 2498 0c7e FC01      		movw r30,r24
 2499 0c80 1182      		std Z+1,__zero_reg__
 2500 0c82 1082      		st Z,__zero_reg__
 2501               	.LBB10:
 366:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2502               		.loc 6 366 0
 2503 0c84 1E82      		std Y+6,__zero_reg__
 2504 0c86 1D82      		std Y+5,__zero_reg__
 2505 0c88 00C0      		rjmp .L73
 2506               	.L74:
 367:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2507               		.loc 6 367 0 discriminator 3
 2508 0c8a 8B81      		ldd r24,Y+3
 2509 0c8c 9C81      		ldd r25,Y+4
 2510 0c8e 4AE4      		ldi r20,lo8(74)
 2511 0c90 489F      		mul r20,r24
 2512 0c92 9001      		movw r18,r0
 2513 0c94 499F      		mul r20,r25
 2514 0c96 300D      		add r19,r0
 2515 0c98 1124      		clr __zero_reg__
 2516 0c9a 8D81      		ldd r24,Y+5
 2517 0c9c 9E81      		ldd r25,Y+6
 2518 0c9e 820F      		add r24,r18
 2519 0ca0 931F      		adc r25,r19
 2520 0ca2 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2521 0ca4 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2522 0ca6 FC01      		movw r30,r24
 2523 0ca8 1082      		st Z,__zero_reg__
 366:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2524               		.loc 6 366 0 discriminator 3
 2525 0caa 8D81      		ldd r24,Y+5
 2526 0cac 9E81      		ldd r25,Y+6
 2527 0cae 0196      		adiw r24,1
 2528 0cb0 9E83      		std Y+6,r25
 2529 0cb2 8D83      		std Y+5,r24
 2530               	.L73:
 366:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2531               		.loc 6 366 0 is_stmt 0 discriminator 1
 2532 0cb4 8D81      		ldd r24,Y+5
 2533 0cb6 9E81      		ldd r25,Y+6
 2534 0cb8 C297      		sbiw r24,50
 2535 0cba 04F0      		brlt .L74
 2536               	.LBE10:
 358:ServerLLDN.c  **** 		{
 2537               		.loc 6 358 0 is_stmt 1 discriminator 2
 2538 0cbc 8B81      		ldd r24,Y+3
 2539 0cbe 9C81      		ldd r25,Y+4
 2540 0cc0 0196      		adiw r24,1
 2541 0cc2 9C83      		std Y+4,r25
 2542 0cc4 8B83      		std Y+3,r24
 2543               	.L72:
 358:ServerLLDN.c  **** 		{
 2544               		.loc 6 358 0 is_stmt 0 discriminator 1
 2545 0cc6 8B81      		ldd r24,Y+3
 2546 0cc8 9C81      		ldd r25,Y+4
 2547 0cca C297      		sbiw r24,50
 2548 0ccc 04F4      		brge .+2
 2549 0cce 00C0      		rjmp .L75
 2550               	.LBE9:
 368:ServerLLDN.c  **** 		}
 369:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2551               		.loc 6 369 0 is_stmt 1
 2552 0cd0 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2553 0cd4 1092 0000 		sts ACKFrame_size,__zero_reg__
 370:ServerLLDN.c  **** 		counter_associados = 0;
 2554               		.loc 6 370 0
 2555 0cd8 1092 0000 		sts counter_associados+1,__zero_reg__
 2556 0cdc 1092 0000 		sts counter_associados,__zero_reg__
 371:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2557               		.loc 6 371 0
 2558 0ce0 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2559 0ce4 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 372:ServerLLDN.c  **** 		n = 0;
 2560               		.loc 6 372 0
 2561 0ce8 1092 0000 		sts n,__zero_reg__
 373:ServerLLDN.c  **** 	}
 2562               		.loc 6 373 0
 2563 0cec 0000      		nop
 2564               	/* epilogue start */
 2565 0cee 2696      		adiw r28,6
 2566 0cf0 0FB6      		in __tmp_reg__,__SREG__
 2567 0cf2 F894      		cli
 2568 0cf4 DEBF      		out __SP_H__,r29
 2569 0cf6 0FBE      		out __SREG__,__tmp_reg__
 2570 0cf8 CDBF      		out __SP_L__,r28
 2571 0cfa DF91      		pop r29
 2572 0cfc CF91      		pop r28
 2573 0cfe 0895      		ret
 2574               		.cfi_endproc
 2575               	.LFE143:
 2577               	.global	__fixunssfsi
 2579               	appPanDiscInit:
 2580               	.LFB144:
 374:ServerLLDN.c  **** 
 375:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 376:ServerLLDN.c  **** 	{	
 2581               		.loc 6 376 0
 2582               		.cfi_startproc
 2583 0d00 CF93      		push r28
 2584               	.LCFI99:
 2585               		.cfi_def_cfa_offset 3
 2586               		.cfi_offset 28, -2
 2587 0d02 DF93      		push r29
 2588               	.LCFI100:
 2589               		.cfi_def_cfa_offset 4
 2590               		.cfi_offset 29, -3
 2591 0d04 00D0      		rcall .
 2592               	.LCFI101:
 2593               		.cfi_def_cfa_offset 6
 2594 0d06 CDB7      		in r28,__SP_L__
 2595 0d08 DEB7      		in r29,__SP_H__
 2596               	.LCFI102:
 2597               		.cfi_def_cfa_register 28
 2598               	/* prologue: function */
 2599               	/* frame size = 2 */
 2600               	/* stack size = 4 */
 2601               	.L__stack_usage = 4
 2602               	.LBB11:
 377:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 378:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2603               		.loc 6 378 0
 2604 0d0a 1A82      		std Y+2,__zero_reg__
 2605 0d0c 1982      		std Y+1,__zero_reg__
 2606 0d0e 00C0      		rjmp .L77
 2607               	.L78:
 379:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2608               		.loc 6 379 0 discriminator 3
 2609 0d10 8981      		ldd r24,Y+1
 2610 0d12 9A81      		ldd r25,Y+2
 2611 0d14 8050      		subi r24,lo8(-(ACKFrame+1))
 2612 0d16 9040      		sbci r25,hi8(-(ACKFrame+1))
 2613 0d18 FC01      		movw r30,r24
 2614 0d1a 1082      		st Z,__zero_reg__
 378:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2615               		.loc 6 378 0 discriminator 3
 2616 0d1c 8981      		ldd r24,Y+1
 2617 0d1e 9A81      		ldd r25,Y+2
 2618 0d20 0196      		adiw r24,1
 2619 0d22 9A83      		std Y+2,r25
 2620 0d24 8983      		std Y+1,r24
 2621               	.L77:
 378:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2622               		.loc 6 378 0 is_stmt 0 discriminator 1
 2623 0d26 8981      		ldd r24,Y+1
 2624 0d28 9A81      		ldd r25,Y+2
 2625 0d2a 8097      		sbiw r24,32
 2626 0d2c 04F0      		brlt .L78
 2627               	.LBE11:
 380:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2628               		.loc 6 380 0 is_stmt 1
 2629 0d2e 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2630 0d32 1092 0000 		sts ACKFrame_size,__zero_reg__
 381:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 382:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2631               		.loc 6 382 0
 2632 0d36 1092 0000 		sts msgReq+5+1,__zero_reg__
 2633 0d3a 1092 0000 		sts msgReq+5,__zero_reg__
 383:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2634               		.loc 6 383 0
 2635 0d3e 1092 0000 		sts msgReq+7,__zero_reg__
 384:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2636               		.loc 6 384 0
 2637 0d42 1092 0000 		sts msgReq+8,__zero_reg__
 385:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2638               		.loc 6 385 0
 2639 0d46 80E4      		ldi r24,lo8(64)
 2640 0d48 91E0      		ldi r25,lo8(1)
 2641 0d4a 9093 0000 		sts msgReq+9+1,r25
 2642 0d4e 8093 0000 		sts msgReq+9,r24
 386:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2643               		.loc 6 386 0
 2644 0d52 1092 0000 		sts msgReq+13+1,__zero_reg__
 2645 0d56 1092 0000 		sts msgReq+13,__zero_reg__
 387:ServerLLDN.c  **** 		msgReq.size					= 0;
 2646               		.loc 6 387 0
 2647 0d5a 1092 0000 		sts msgReq+15,__zero_reg__
 388:ServerLLDN.c  **** 		
 389:ServerLLDN.c  **** 		macLLDNnumTimeSlots = 2;
 2648               		.loc 6 389 0
 2649 0d5e 82E0      		ldi r24,lo8(2)
 2650 0d60 90E0      		ldi r25,0
 2651 0d62 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 2652 0d66 8093 0000 		sts macLLDNnumTimeSlots,r24
 390:ServerLLDN.c  **** 		accepting_requests = 1;
 2653               		.loc 6 390 0
 2654 0d6a 81E0      		ldi r24,lo8(1)
 2655 0d6c 90E0      		ldi r25,0
 2656 0d6e 9093 0000 		sts accepting_requests+1,r25
 2657 0d72 8093 0000 		sts accepting_requests,r24
 391:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 392:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2658               		.loc 6 392 0
 2659 0d76 8091 0000 		lds r24,cycles_counter
 2660 0d7a 8823      		tst r24
 2661 0d7c 01F0      		breq .+2
 2662 0d7e 00C0      		rjmp .L80
 393:ServerLLDN.c  **** 		{
 394:ServerLLDN.c  **** 			
 395:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 396:ServerLLDN.c  **** 		n = 127; 
 2663               		.loc 6 396 0
 2664 0d80 8FE7      		ldi r24,lo8(127)
 2665 0d82 8093 0000 		sts n,r24
 397:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2666               		.loc 6 397 0
 2667 0d86 8091 0000 		lds r24,n
 2668 0d8a 882F      		mov r24,r24
 2669 0d8c 90E0      		ldi r25,0
 2670 0d8e 0396      		adiw r24,3
 2671 0d90 880F      		lsl r24
 2672 0d92 991F      		rol r25
 2673 0d94 092E      		mov __tmp_reg__,r25
 2674 0d96 000C      		lsl r0
 2675 0d98 AA0B      		sbc r26,r26
 2676 0d9a BB0B      		sbc r27,r27
 2677 0d9c BC01      		movw r22,r24
 2678 0d9e CD01      		movw r24,r26
 2679 0da0 0E94 0000 		call __floatsisf
 2680 0da4 DC01      		movw r26,r24
 2681 0da6 CB01      		movw r24,r22
 2682 0da8 20E0      		ldi r18,0
 2683 0daa 30E0      		ldi r19,0
 2684 0dac 40E4      		ldi r20,lo8(64)
 2685 0dae 51E4      		ldi r21,lo8(65)
 2686 0db0 BC01      		movw r22,r24
 2687 0db2 CD01      		movw r24,r26
 2688 0db4 0E94 0000 		call __addsf3
 2689 0db8 DC01      		movw r26,r24
 2690 0dba CB01      		movw r24,r22
 2691 0dbc 20E0      		ldi r18,0
 2692 0dbe 30E0      		ldi r19,0
 2693 0dc0 40E2      		ldi r20,lo8(32)
 2694 0dc2 52E4      		ldi r21,lo8(66)
 2695 0dc4 BC01      		movw r22,r24
 2696 0dc6 CD01      		movw r24,r26
 2697 0dc8 0E94 0000 		call __addsf3
 2698 0dcc DC01      		movw r26,r24
 2699 0dce CB01      		movw r24,r22
 2700 0dd0 20E0      		ldi r18,0
 2701 0dd2 34E2      		ldi r19,lo8(36)
 2702 0dd4 44E7      		ldi r20,lo8(116)
 2703 0dd6 57E4      		ldi r21,lo8(71)
 2704 0dd8 BC01      		movw r22,r24
 2705 0dda CD01      		movw r24,r26
 2706 0ddc 0E94 0000 		call __divsf3
 2707 0de0 DC01      		movw r26,r24
 2708 0de2 CB01      		movw r24,r22
 2709 0de4 8093 0000 		sts tTS,r24
 2710 0de8 9093 0000 		sts tTS+1,r25
 2711 0dec A093 0000 		sts tTS+2,r26
 2712 0df0 B093 0000 		sts tTS+3,r27
 398:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 399:ServerLLDN.c  **** 		
 400:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2713               		.loc 6 400 0
 2714 0df4 8091 0000 		lds r24,tTS
 2715 0df8 9091 0000 		lds r25,tTS+1
 2716 0dfc A091 0000 		lds r26,tTS+2
 2717 0e00 B091 0000 		lds r27,tTS+3
 2718 0e04 20E0      		ldi r18,0
 2719 0e06 30E0      		ldi r19,0
 2720 0e08 40E8      		ldi r20,lo8(-128)
 2721 0e0a 50E4      		ldi r21,lo8(64)
 2722 0e0c BC01      		movw r22,r24
 2723 0e0e CD01      		movw r24,r26
 2724 0e10 0E94 0000 		call __mulsf3
 2725 0e14 DC01      		movw r26,r24
 2726 0e16 CB01      		movw r24,r22
 2727 0e18 2DEB      		ldi r18,lo8(-67)
 2728 0e1a 37E3      		ldi r19,lo8(55)
 2729 0e1c 46E8      		ldi r20,lo8(-122)
 2730 0e1e 57E3      		ldi r21,lo8(55)
 2731 0e20 BC01      		movw r22,r24
 2732 0e22 CD01      		movw r24,r26
 2733 0e24 0E94 0000 		call __divsf3
 2734 0e28 DC01      		movw r26,r24
 2735 0e2a CB01      		movw r24,r22
 2736 0e2c 8093 0000 		sts beaconInterval_association,r24
 2737 0e30 9093 0000 		sts beaconInterval_association+1,r25
 2738 0e34 A093 0000 		sts beaconInterval_association+2,r26
 2739 0e38 B093 0000 		sts beaconInterval_association+3,r27
 401:ServerLLDN.c  **** 			#if PRINT
 402:ServerLLDN.c  **** // 			printf("\n Beacon interval %f", beaconInterval_association);
 403:ServerLLDN.c  **** 			#endif
 404:ServerLLDN.c  **** 			/*
 405:ServerLLDN.c  **** 			* Configure interrupts callback functions
 406:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 407:ServerLLDN.c  **** 			*/
 408:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2740               		.loc 6 408 0
 2741 0e3c 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2742 0e3e 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2743 0e40 0E94 0000 		call macsc_set_cmp1_int_cb
 409:ServerLLDN.c  **** 			/*
 410:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 411:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 412:ServerLLDN.c  **** 			*/
 413:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2744               		.loc 6 413 0
 2745 0e44 0E94 0000 		call macsc_enable_manual_bts
 414:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2746               		.loc 6 414 0
 2747 0e48 81E0      		ldi r24,lo8(1)
 2748 0e4a 0E94 0000 		call macsc_enable_cmp_int
 415:ServerLLDN.c  **** 
 416:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2749               		.loc 6 416 0
 2750 0e4e 8091 0000 		lds r24,beaconInterval_association
 2751 0e52 9091 0000 		lds r25,beaconInterval_association+1
 2752 0e56 A091 0000 		lds r26,beaconInterval_association+2
 2753 0e5a B091 0000 		lds r27,beaconInterval_association+3
 2754 0e5e BC01      		movw r22,r24
 2755 0e60 CD01      		movw r24,r26
 2756 0e62 0E94 0000 		call __fixunssfsi
 2757 0e66 DC01      		movw r26,r24
 2758 0e68 CB01      		movw r24,r22
 2759 0e6a 21E0      		ldi r18,lo8(1)
 2760 0e6c AC01      		movw r20,r24
 2761 0e6e BD01      		movw r22,r26
 2762 0e70 81E0      		ldi r24,lo8(1)
 2763 0e72 0E94 0000 		call macsc_use_cmp
 2764               	.L80:
 417:ServerLLDN.c  **** 			
 418:ServerLLDN.c  **** 			/* Timer used in testing */
 419:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 420:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 421:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 422:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 423:ServerLLDN.c  **** 			#endif
 424:ServerLLDN.c  **** 			
 425:ServerLLDN.c  **** 		#endif
 426:ServerLLDN.c  **** 		}
 427:ServerLLDN.c  **** 	}
 2765               		.loc 6 427 0
 2766 0e76 0000      		nop
 2767               	/* epilogue start */
 2768 0e78 0F90      		pop __tmp_reg__
 2769 0e7a 0F90      		pop __tmp_reg__
 2770 0e7c DF91      		pop r29
 2771 0e7e CF91      		pop r28
 2772 0e80 0895      		ret
 2773               		.cfi_endproc
 2774               	.LFE144:
 2777               	end_of_superframe_Online:
 2778               	.LFB145:
 428:ServerLLDN.c  **** 	
 429:ServerLLDN.c  **** 	static void end_of_superframe_Online(void)
 430:ServerLLDN.c  **** 	{
 2779               		.loc 6 430 0
 2780               		.cfi_startproc
 2781 0e82 CF93      		push r28
 2782               	.LCFI103:
 2783               		.cfi_def_cfa_offset 3
 2784               		.cfi_offset 28, -2
 2785 0e84 DF93      		push r29
 2786               	.LCFI104:
 2787               		.cfi_def_cfa_offset 4
 2788               		.cfi_offset 29, -3
 2789 0e86 CDB7      		in r28,__SP_L__
 2790 0e88 DEB7      		in r29,__SP_H__
 2791               	.LCFI105:
 2792               		.cfi_def_cfa_register 28
 2793               	/* prologue: function */
 2794               	/* frame size = 0 */
 2795               	/* stack size = 2 */
 2796               	.L__stack_usage = 2
 431:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 2797               		.loc 6 431 0
 2798 0e8a 88E0      		ldi r24,lo8(8)
 2799 0e8c 8093 0000 		sts appPanState,r24
 432:ServerLLDN.c  **** 		if(cycles_counter>0)
 2800               		.loc 6 432 0
 2801 0e90 8091 0000 		lds r24,cycles_counter
 2802 0e94 8823      		tst r24
 2803 0e96 01F0      		breq .L82
 433:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 2804               		.loc 6 433 0
 2805 0e98 82E0      		ldi r24,lo8(2)
 2806 0e9a 8093 0000 		sts appState,r24
 434:ServerLLDN.c  **** 		else
 435:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 436:ServerLLDN.c  **** 
 437:ServerLLDN.c  **** 	}
 2807               		.loc 6 437 0
 2808 0e9e 00C0      		rjmp .L84
 2809               	.L82:
 435:ServerLLDN.c  **** 
 2810               		.loc 6 435 0
 2811 0ea0 83E0      		ldi r24,lo8(3)
 2812 0ea2 8093 0000 		sts appState,r24
 2813               	.L84:
 2814               		.loc 6 437 0
 2815 0ea6 0000      		nop
 2816               	/* epilogue start */
 2817 0ea8 DF91      		pop r29
 2818 0eaa CF91      		pop r28
 2819 0eac 0895      		ret
 2820               		.cfi_endproc
 2821               	.LFE145:
 2824               	send_gack:
 2825               	.LFB146:
 438:ServerLLDN.c  **** 	
 439:ServerLLDN.c  **** 	static void send_gack(void)
 440:ServerLLDN.c  **** 	{
 2826               		.loc 6 440 0
 2827               		.cfi_startproc
 2828 0eae CF93      		push r28
 2829               	.LCFI106:
 2830               		.cfi_def_cfa_offset 3
 2831               		.cfi_offset 28, -2
 2832 0eb0 DF93      		push r29
 2833               	.LCFI107:
 2834               		.cfi_def_cfa_offset 4
 2835               		.cfi_offset 29, -3
 2836 0eb2 00D0      		rcall .
 2837               	.LCFI108:
 2838               		.cfi_def_cfa_offset 6
 2839 0eb4 CDB7      		in r28,__SP_L__
 2840 0eb6 DEB7      		in r29,__SP_H__
 2841               	.LCFI109:
 2842               		.cfi_def_cfa_register 28
 2843               	/* prologue: function */
 2844               	/* frame size = 2 */
 2845               	/* stack size = 4 */
 2846               	.L__stack_usage = 4
 441:ServerLLDN.c  **** 		msgReqGACK.size = sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 2847               		.loc 6 441 0
 2848 0eb8 8091 0000 		lds r24,macLLDNRetransmitTS
 2849 0ebc 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2850 0ec0 8F5F      		subi r24,lo8(-(1))
 2851 0ec2 8093 0000 		sts msgReqGACK+15,r24
 442:ServerLLDN.c  **** 		NWK_DataReq(&msgReqGACK);
 2852               		.loc 6 442 0
 2853 0ec6 80E0      		ldi r24,lo8(msgReqGACK)
 2854 0ec8 90E0      		ldi r25,hi8(msgReqGACK)
 2855 0eca 0E94 0000 		call NWK_DataReq
 443:ServerLLDN.c  **** 		ACKFrame_aux = ACKFrame;
 2856               		.loc 6 443 0
 2857 0ece 81E2      		ldi r24,lo8(33)
 2858 0ed0 E0E0      		ldi r30,lo8(ACKFrame)
 2859 0ed2 F0E0      		ldi r31,hi8(ACKFrame)
 2860 0ed4 A0E0      		ldi r26,lo8(ACKFrame_aux)
 2861 0ed6 B0E0      		ldi r27,hi8(ACKFrame_aux)
 2862               		0:
 2863 0ed8 0190      		ld r0,Z+
 2864 0eda 0D92      		st X+,r0
 2865 0edc 8A95      		dec r24
 2866 0ede 01F4      		brne 0b
 444:ServerLLDN.c  **** 		#if PRINT
 445:ServerLLDN.c  **** // 		printf("\n%hhx ", ACKFrame.ackFlags[0]);
 446:ServerLLDN.c  **** 		#endif
 447:ServerLLDN.c  **** 		if(cycles_counter<NUMERO_CICLOS_ONLINE-1)
 2867               		.loc 6 447 0
 2868 0ee0 8091 0000 		lds r24,cycles_counter
 2869 0ee4 8431      		cpi r24,lo8(20)
 2870 0ee6 00F4      		brsh .L90
 2871               	.LBB12:
 448:ServerLLDN.c  **** 		{
 449:ServerLLDN.c  **** 			for (int i  = 0; i < assTimeSlot;i++)
 2872               		.loc 6 449 0
 2873 0ee8 1A82      		std Y+2,__zero_reg__
 2874 0eea 1982      		std Y+1,__zero_reg__
 2875 0eec 00C0      		rjmp .L87
 2876               	.L89:
 450:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2877               		.loc 6 450 0
 2878 0eee 8981      		ldd r24,Y+1
 2879 0ef0 9A81      		ldd r25,Y+2
 2880 0ef2 0196      		adiw r24,1
 2881 0ef4 0E94 0000 		call check_ack_pan
 2882 0ef8 982F      		mov r25,r24
 2883 0efa 81E0      		ldi r24,lo8(1)
 2884 0efc 8927      		eor r24,r25
 2885 0efe 8823      		tst r24
 2886 0f00 01F0      		breq .L88
 451:ServerLLDN.c  **** 				{
 452:ServerLLDN.c  **** 					nodes_info_arr[i].msg_not_rec++;
 2887               		.loc 6 452 0
 2888 0f02 2981      		ldd r18,Y+1
 2889 0f04 3A81      		ldd r19,Y+2
 2890 0f06 4AE4      		ldi r20,lo8(74)
 2891 0f08 429F      		mul r20,r18
 2892 0f0a C001      		movw r24,r0
 2893 0f0c 439F      		mul r20,r19
 2894 0f0e 900D      		add r25,r0
 2895 0f10 1124      		clr __zero_reg__
 2896 0f12 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2897 0f14 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2898 0f16 FC01      		movw r30,r24
 2899 0f18 8081      		ld r24,Z
 2900 0f1a 9181      		ldd r25,Z+1
 2901 0f1c 9C01      		movw r18,r24
 2902 0f1e 2F5F      		subi r18,-1
 2903 0f20 3F4F      		sbci r19,-1
 2904 0f22 4981      		ldd r20,Y+1
 2905 0f24 5A81      		ldd r21,Y+2
 2906 0f26 6AE4      		ldi r22,lo8(74)
 2907 0f28 649F      		mul r22,r20
 2908 0f2a C001      		movw r24,r0
 2909 0f2c 659F      		mul r22,r21
 2910 0f2e 900D      		add r25,r0
 2911 0f30 1124      		clr __zero_reg__
 2912 0f32 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2913 0f34 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2914 0f36 FC01      		movw r30,r24
 2915 0f38 3183      		std Z+1,r19
 2916 0f3a 2083      		st Z,r18
 2917               	.L88:
 449:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2918               		.loc 6 449 0 discriminator 2
 2919 0f3c 8981      		ldd r24,Y+1
 2920 0f3e 9A81      		ldd r25,Y+2
 2921 0f40 0196      		adiw r24,1
 2922 0f42 9A83      		std Y+2,r25
 2923 0f44 8983      		std Y+1,r24
 2924               	.L87:
 449:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2925               		.loc 6 449 0 is_stmt 0 discriminator 1
 2926 0f46 8091 0000 		lds r24,assTimeSlot
 2927 0f4a 9091 0000 		lds r25,assTimeSlot+1
 2928 0f4e 2981      		ldd r18,Y+1
 2929 0f50 3A81      		ldd r19,Y+2
 2930 0f52 2817      		cp r18,r24
 2931 0f54 3907      		cpc r19,r25
 2932 0f56 04F0      		brlt .L89
 2933               	.L90:
 2934               	.LBE12:
 453:ServerLLDN.c  **** 			}
 454:ServerLLDN.c  **** 		}
 455:ServerLLDN.c  **** 	}
 2935               		.loc 6 455 0 is_stmt 1
 2936 0f58 0000      		nop
 2937               	/* epilogue start */
 2938 0f5a 0F90      		pop __tmp_reg__
 2939 0f5c 0F90      		pop __tmp_reg__
 2940 0f5e DF91      		pop r29
 2941 0f60 CF91      		pop r28
 2942 0f62 0895      		ret
 2943               		.cfi_endproc
 2944               	.LFE146:
 2947               	appPanOnlineInit:
 2948               	.LFB147:
 456:ServerLLDN.c  **** 
 457:ServerLLDN.c  **** 	static void appPanOnlineInit()
 458:ServerLLDN.c  **** 	{
 2949               		.loc 6 458 0
 2950               		.cfi_startproc
 2951 0f64 EF92      		push r14
 2952               	.LCFI110:
 2953               		.cfi_def_cfa_offset 3
 2954               		.cfi_offset 14, -2
 2955 0f66 FF92      		push r15
 2956               	.LCFI111:
 2957               		.cfi_def_cfa_offset 4
 2958               		.cfi_offset 15, -3
 2959 0f68 0F93      		push r16
 2960               	.LCFI112:
 2961               		.cfi_def_cfa_offset 5
 2962               		.cfi_offset 16, -4
 2963 0f6a 1F93      		push r17
 2964               	.LCFI113:
 2965               		.cfi_def_cfa_offset 6
 2966               		.cfi_offset 17, -5
 2967 0f6c CF93      		push r28
 2968               	.LCFI114:
 2969               		.cfi_def_cfa_offset 7
 2970               		.cfi_offset 28, -6
 2971 0f6e DF93      		push r29
 2972               	.LCFI115:
 2973               		.cfi_def_cfa_offset 8
 2974               		.cfi_offset 29, -7
 2975 0f70 00D0      		rcall .
 2976 0f72 00D0      		rcall .
 2977 0f74 00D0      		rcall .
 2978               	.LCFI116:
 2979               		.cfi_def_cfa_offset 14
 2980 0f76 CDB7      		in r28,__SP_L__
 2981 0f78 DEB7      		in r29,__SP_H__
 2982               	.LCFI117:
 2983               		.cfi_def_cfa_register 28
 2984               	/* prologue: function */
 2985               	/* frame size = 6 */
 2986               	/* stack size = 12 */
 2987               	.L__stack_usage = 12
 459:ServerLLDN.c  **** 			
 460:ServerLLDN.c  **** 			macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 2988               		.loc 6 460 0
 2989 0f7a 8091 0000 		lds r24,assTimeSlot
 2990 0f7e 9091 0000 		lds r25,assTimeSlot+1
 2991 0f82 880F      		lsl r24
 2992 0f84 991F      		rol r25
 2993 0f86 0196      		adiw r24,1
 2994 0f88 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 2995 0f8c 8093 0000 		sts macLLDNnumUplinkTS,r24
 461:ServerLLDN.c  **** 			macLLDNRetransmitTS = assTimeSlot;
 2996               		.loc 6 461 0
 2997 0f90 8091 0000 		lds r24,assTimeSlot
 2998 0f94 9091 0000 		lds r25,assTimeSlot+1
 2999 0f98 9093 0000 		sts macLLDNRetransmitTS+1,r25
 3000 0f9c 8093 0000 		sts macLLDNRetransmitTS,r24
 462:ServerLLDN.c  **** 			macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;			
 3001               		.loc 6 462 0
 3002 0fa0 8091 0000 		lds r24,macLLDNnumUplinkTS
 3003 0fa4 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3004 0fa8 0296      		adiw r24,2
 3005 0faa 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 3006 0fae 8093 0000 		sts macLLDNnumTimeSlots,r24
 463:ServerLLDN.c  **** 			
 464:ServerLLDN.c  **** // 			printf("\nmacLLDNnumUplinkTS : %d\nmacLLDNRetransmitTS : %d\nmacLLDNnumTimeSlots : %d",macLLD
 465:ServerLLDN.c  **** 			
 466:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration = 75;
 3007               		.loc 6 466 0
 3008 0fb2 8091 0000 		lds r24,config_request_frame+5
 3009 0fb6 8078      		andi r24,lo8(-128)
 3010 0fb8 8B64      		ori r24,lo8(75)
 3011 0fba 8093 0000 		sts config_request_frame+5,r24
 467:ServerLLDN.c  **** 			
 468:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 3012               		.loc 6 468 0
 3013 0fbe 8091 0000 		lds r24,config_request_frame+5
 3014 0fc2 8F77      		andi r24,lo8(127)
 3015 0fc4 882F      		mov r24,r24
 3016 0fc6 90E0      		ldi r25,0
 3017 0fc8 0396      		adiw r24,3
 3018 0fca 880F      		lsl r24
 3019 0fcc 991F      		rol r25
 3020 0fce 092E      		mov __tmp_reg__,r25
 3021 0fd0 000C      		lsl r0
 3022 0fd2 AA0B      		sbc r26,r26
 3023 0fd4 BB0B      		sbc r27,r27
 3024 0fd6 BC01      		movw r22,r24
 3025 0fd8 CD01      		movw r24,r26
 3026 0fda 0E94 0000 		call __floatsisf
 3027 0fde DC01      		movw r26,r24
 3028 0fe0 CB01      		movw r24,r22
 3029 0fe2 20E0      		ldi r18,0
 3030 0fe4 30E0      		ldi r19,0
 3031 0fe6 40E4      		ldi r20,lo8(64)
 3032 0fe8 51E4      		ldi r21,lo8(65)
 3033 0fea BC01      		movw r22,r24
 3034 0fec CD01      		movw r24,r26
 3035 0fee 0E94 0000 		call __addsf3
 3036 0ff2 DC01      		movw r26,r24
 3037 0ff4 CB01      		movw r24,r22
 3038 0ff6 20E0      		ldi r18,0
 3039 0ff8 30E0      		ldi r19,0
 3040 0ffa 40E2      		ldi r20,lo8(32)
 3041 0ffc 52E4      		ldi r21,lo8(66)
 3042 0ffe BC01      		movw r22,r24
 3043 1000 CD01      		movw r24,r26
 3044 1002 0E94 0000 		call __addsf3
 3045 1006 DC01      		movw r26,r24
 3046 1008 CB01      		movw r24,r22
 3047 100a 20E0      		ldi r18,0
 3048 100c 34E2      		ldi r19,lo8(36)
 3049 100e 44E7      		ldi r20,lo8(116)
 3050 1010 57E4      		ldi r21,lo8(71)
 3051 1012 BC01      		movw r22,r24
 3052 1014 CD01      		movw r24,r26
 3053 1016 0E94 0000 		call __divsf3
 3054 101a DC01      		movw r26,r24
 3055 101c CB01      		movw r24,r22
 3056 101e 8093 0000 		sts tTS,r24
 3057 1022 9093 0000 		sts tTS+1,r25
 3058 1026 A093 0000 		sts tTS+2,r26
 3059 102a B093 0000 		sts tTS+3,r27
 469:ServerLLDN.c  **** 				
 470:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 3060               		.loc 6 470 0
 3061 102e 8091 0000 		lds r24,config_request_frame+5
 3062 1032 8F77      		andi r24,lo8(127)
 3063 1034 8093 0000 		sts n,r24
 471:ServerLLDN.c  **** 			
 472:ServerLLDN.c  **** 
 473:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 3064               		.loc 6 473 0
 3065 1038 1092 0000 		sts msgReq+5+1,__zero_reg__
 3066 103c 1092 0000 		sts msgReq+5,__zero_reg__
 474:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 3067               		.loc 6 474 0
 3068 1040 1092 0000 		sts msgReq+7,__zero_reg__
 475:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 3069               		.loc 6 475 0
 3070 1044 1092 0000 		sts msgReq+8,__zero_reg__
 476:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 3071               		.loc 6 476 0
 3072 1048 80EC      		ldi r24,lo8(-64)
 3073 104a 90E0      		ldi r25,0
 3074 104c 9093 0000 		sts msgReq+9+1,r25
 3075 1050 8093 0000 		sts msgReq+9,r24
 477:ServerLLDN.c  **** 			msgReq.data					= NULL;
 3076               		.loc 6 477 0
 3077 1054 1092 0000 		sts msgReq+13+1,__zero_reg__
 3078 1058 1092 0000 		sts msgReq+13,__zero_reg__
 478:ServerLLDN.c  **** 			msgReq.size					= 0;
 3079               		.loc 6 478 0
 3080 105c 1092 0000 		sts msgReq+15,__zero_reg__
 479:ServerLLDN.c  **** 			
 480:ServerLLDN.c  **** 			beaconInterval= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3081               		.loc 6 480 0
 3082 1060 8091 0000 		lds r24,macLLDNnumUplinkTS
 3083 1064 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3084 1068 0496      		adiw r24,4
 3085 106a 092E      		mov __tmp_reg__,r25
 3086 106c 000C      		lsl r0
 3087 106e AA0B      		sbc r26,r26
 3088 1070 BB0B      		sbc r27,r27
 3089 1072 BC01      		movw r22,r24
 3090 1074 CD01      		movw r24,r26
 3091 1076 0E94 0000 		call __floatsisf
 3092 107a 7B01      		movw r14,r22
 3093 107c 8C01      		movw r16,r24
 3094 107e 8091 0000 		lds r24,tTS
 3095 1082 9091 0000 		lds r25,tTS+1
 3096 1086 A091 0000 		lds r26,tTS+2
 3097 108a B091 0000 		lds r27,tTS+3
 3098 108e 9C01      		movw r18,r24
 3099 1090 AD01      		movw r20,r26
 3100 1092 C801      		movw r24,r16
 3101 1094 B701      		movw r22,r14
 3102 1096 0E94 0000 		call __mulsf3
 3103 109a DC01      		movw r26,r24
 3104 109c CB01      		movw r24,r22
 3105 109e 2DEB      		ldi r18,lo8(-67)
 3106 10a0 37E3      		ldi r19,lo8(55)
 3107 10a2 46E8      		ldi r20,lo8(-122)
 3108 10a4 57E3      		ldi r21,lo8(55)
 3109 10a6 BC01      		movw r22,r24
 3110 10a8 CD01      		movw r24,r26
 3111 10aa 0E94 0000 		call __divsf3
 3112 10ae DC01      		movw r26,r24
 3113 10b0 CB01      		movw r24,r22
 3114 10b2 8093 0000 		sts beaconInterval,r24
 3115 10b6 9093 0000 		sts beaconInterval+1,r25
 3116 10ba A093 0000 		sts beaconInterval+2,r26
 3117 10be B093 0000 		sts beaconInterval+3,r27
 481:ServerLLDN.c  **** 			float GACK_tTS = (assTimeSlot + 0.2 + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3118               		.loc 6 481 0
 3119 10c2 8091 0000 		lds r24,assTimeSlot
 3120 10c6 9091 0000 		lds r25,assTimeSlot+1
 3121 10ca 092E      		mov __tmp_reg__,r25
 3122 10cc 000C      		lsl r0
 3123 10ce AA0B      		sbc r26,r26
 3124 10d0 BB0B      		sbc r27,r27
 3125 10d2 BC01      		movw r22,r24
 3126 10d4 CD01      		movw r24,r26
 3127 10d6 0E94 0000 		call __floatsisf
 3128 10da DC01      		movw r26,r24
 3129 10dc CB01      		movw r24,r22
 3130 10de 2DEC      		ldi r18,lo8(-51)
 3131 10e0 3CEC      		ldi r19,lo8(-52)
 3132 10e2 4CE4      		ldi r20,lo8(76)
 3133 10e4 5EE3      		ldi r21,lo8(62)
 3134 10e6 BC01      		movw r22,r24
 3135 10e8 CD01      		movw r24,r26
 3136 10ea 0E94 0000 		call __addsf3
 3137 10ee DC01      		movw r26,r24
 3138 10f0 CB01      		movw r24,r22
 3139 10f2 20E0      		ldi r18,0
 3140 10f4 30E0      		ldi r19,0
 3141 10f6 40E8      		ldi r20,lo8(-128)
 3142 10f8 50E4      		ldi r21,lo8(64)
 3143 10fa BC01      		movw r22,r24
 3144 10fc CD01      		movw r24,r26
 3145 10fe 0E94 0000 		call __addsf3
 3146 1102 DC01      		movw r26,r24
 3147 1104 CB01      		movw r24,r22
 3148 1106 7C01      		movw r14,r24
 3149 1108 8D01      		movw r16,r26
 3150 110a 8091 0000 		lds r24,tTS
 3151 110e 9091 0000 		lds r25,tTS+1
 3152 1112 A091 0000 		lds r26,tTS+2
 3153 1116 B091 0000 		lds r27,tTS+3
 3154 111a 9C01      		movw r18,r24
 3155 111c AD01      		movw r20,r26
 3156 111e C801      		movw r24,r16
 3157 1120 B701      		movw r22,r14
 3158 1122 0E94 0000 		call __mulsf3
 3159 1126 DC01      		movw r26,r24
 3160 1128 CB01      		movw r24,r22
 3161 112a 2DEB      		ldi r18,lo8(-67)
 3162 112c 37E3      		ldi r19,lo8(55)
 3163 112e 46E8      		ldi r20,lo8(-122)
 3164 1130 57E3      		ldi r21,lo8(55)
 3165 1132 BC01      		movw r22,r24
 3166 1134 CD01      		movw r24,r26
 3167 1136 0E94 0000 		call __divsf3
 3168 113a DC01      		movw r26,r24
 3169 113c CB01      		movw r24,r22
 3170 113e 8B83      		std Y+3,r24
 3171 1140 9C83      		std Y+4,r25
 3172 1142 AD83      		std Y+5,r26
 3173 1144 BE83      		std Y+6,r27
 482:ServerLLDN.c  **** 			macsc_write_count(0);
 3174               		.loc 6 482 0
 3175 1146 60E0      		ldi r22,0
 3176 1148 70E0      		ldi r23,0
 3177 114a CB01      		movw r24,r22
 3178 114c 0E94 0000 		call macsc_write_count
 483:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(end_of_superframe_Online);
 3179               		.loc 6 483 0
 3180 1150 80E0      		ldi r24,lo8(gs(end_of_superframe_Online))
 3181 1152 90E0      		ldi r25,hi8(gs(end_of_superframe_Online))
 3182 1154 0E94 0000 		call macsc_set_cmp1_int_cb
 484:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 3183               		.loc 6 484 0
 3184 1158 81E0      		ldi r24,lo8(1)
 3185 115a 0E94 0000 		call macsc_enable_cmp_int
 485:ServerLLDN.c  **** 
 486:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(send_gack);
 3186               		.loc 6 486 0
 3187 115e 80E0      		ldi r24,lo8(gs(send_gack))
 3188 1160 90E0      		ldi r25,hi8(gs(send_gack))
 3189 1162 0E94 0000 		call macsc_set_cmp2_int_cb
 487:ServerLLDN.c  **** 			if(cycles_counter != NUMERO_CICLOS_ONLINE)
 3190               		.loc 6 487 0
 3191 1166 8091 0000 		lds r24,cycles_counter
 3192 116a 8531      		cpi r24,lo8(21)
 3193 116c 01F0      		breq .L92
 488:ServerLLDN.c  **** 				macsc_enable_cmp_int(MACSC_CC2);
 3194               		.loc 6 488 0
 3195 116e 82E0      		ldi r24,lo8(2)
 3196 1170 0E94 0000 		call macsc_enable_cmp_int
 3197               	.L92:
 489:ServerLLDN.c  **** 
 490:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval, MACSC_CC1);
 3198               		.loc 6 490 0
 3199 1174 8091 0000 		lds r24,beaconInterval
 3200 1178 9091 0000 		lds r25,beaconInterval+1
 3201 117c A091 0000 		lds r26,beaconInterval+2
 3202 1180 B091 0000 		lds r27,beaconInterval+3
 3203 1184 BC01      		movw r22,r24
 3204 1186 CD01      		movw r24,r26
 3205 1188 0E94 0000 		call __fixunssfsi
 3206 118c DC01      		movw r26,r24
 3207 118e CB01      		movw r24,r22
 3208 1190 21E0      		ldi r18,lo8(1)
 3209 1192 AC01      		movw r20,r24
 3210 1194 BD01      		movw r22,r26
 3211 1196 81E0      		ldi r24,lo8(1)
 3212 1198 0E94 0000 		call macsc_use_cmp
 491:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, GACK_tTS, MACSC_CC2);
 3213               		.loc 6 491 0
 3214 119c 6B81      		ldd r22,Y+3
 3215 119e 7C81      		ldd r23,Y+4
 3216 11a0 8D81      		ldd r24,Y+5
 3217 11a2 9E81      		ldd r25,Y+6
 3218 11a4 0E94 0000 		call __fixunssfsi
 3219 11a8 DC01      		movw r26,r24
 3220 11aa CB01      		movw r24,r22
 3221 11ac 22E0      		ldi r18,lo8(2)
 3222 11ae AC01      		movw r20,r24
 3223 11b0 BD01      		movw r22,r26
 3224 11b2 81E0      		ldi r24,lo8(1)
 3225 11b4 0E94 0000 		call macsc_use_cmp
 492:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 3226               		.loc 6 492 0
 3227 11b8 0E94 0000 		call macsc_enable_manual_bts
 493:ServerLLDN.c  **** 			
 494:ServerLLDN.c  **** 			cmp_value_start_superframe = macsc_read_count();
 3228               		.loc 6 494 0
 3229 11bc 0E94 0000 		call macsc_read_count
 3230 11c0 DC01      		movw r26,r24
 3231 11c2 CB01      		movw r24,r22
 3232 11c4 8093 0000 		sts cmp_value_start_superframe,r24
 3233 11c8 9093 0000 		sts cmp_value_start_superframe+1,r25
 3234 11cc A093 0000 		sts cmp_value_start_superframe+2,r26
 3235 11d0 B093 0000 		sts cmp_value_start_superframe+3,r27
 3236               	.LBB13:
 495:ServerLLDN.c  **** 
 496:ServerLLDN.c  **** 
 497:ServerLLDN.c  **** 			for(int i = 0; i < 32; i++)
 3237               		.loc 6 497 0
 3238 11d4 1A82      		std Y+2,__zero_reg__
 3239 11d6 1982      		std Y+1,__zero_reg__
 3240 11d8 00C0      		rjmp .L93
 3241               	.L94:
 498:ServerLLDN.c  **** 			{
 499:ServerLLDN.c  **** 				ACKFrame.ackFlags[i] = 0;
 3242               		.loc 6 499 0 discriminator 3
 3243 11da 8981      		ldd r24,Y+1
 3244 11dc 9A81      		ldd r25,Y+2
 3245 11de 8050      		subi r24,lo8(-(ACKFrame+1))
 3246 11e0 9040      		sbci r25,hi8(-(ACKFrame+1))
 3247 11e2 FC01      		movw r30,r24
 3248 11e4 1082      		st Z,__zero_reg__
 500:ServerLLDN.c  **** 				retransmit_ts_array[i] = 0;
 3249               		.loc 6 500 0 discriminator 3
 3250 11e6 8981      		ldd r24,Y+1
 3251 11e8 9A81      		ldd r25,Y+2
 3252 11ea 8050      		subi r24,lo8(-(retransmit_ts_array))
 3253 11ec 9040      		sbci r25,hi8(-(retransmit_ts_array))
 3254 11ee FC01      		movw r30,r24
 3255 11f0 1082      		st Z,__zero_reg__
 497:ServerLLDN.c  **** 			{
 3256               		.loc 6 497 0 discriminator 3
 3257 11f2 8981      		ldd r24,Y+1
 3258 11f4 9A81      		ldd r25,Y+2
 3259 11f6 0196      		adiw r24,1
 3260 11f8 9A83      		std Y+2,r25
 3261 11fa 8983      		std Y+1,r24
 3262               	.L93:
 497:ServerLLDN.c  **** 			{
 3263               		.loc 6 497 0 is_stmt 0 discriminator 1
 3264 11fc 8981      		ldd r24,Y+1
 3265 11fe 9A81      		ldd r25,Y+2
 3266 1200 8097      		sbiw r24,32
 3267 1202 04F0      		brlt .L94
 3268               	.LBE13:
 501:ServerLLDN.c  **** 			}
 502:ServerLLDN.c  **** 			retransmit_ts_array_counter = 0;
 3269               		.loc 6 502 0 is_stmt 1
 3270 1204 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 3271 1208 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
 503:ServerLLDN.c  **** 			ACKFrame_size = 0;
 3272               		.loc 6 503 0
 3273 120c 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3274 1210 1092 0000 		sts ACKFrame_size,__zero_reg__
 504:ServerLLDN.c  **** 			
 505:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 3275               		.loc 6 505 0
 3276 1214 60E0      		ldi r22,lo8(gs(appDataInd))
 3277 1216 70E0      		ldi r23,hi8(gs(appDataInd))
 3278 1218 81E0      		ldi r24,lo8(1)
 3279 121a 0E94 0000 		call NWK_OpenEndpoint
 506:ServerLLDN.c  **** 	}
 3280               		.loc 6 506 0
 3281 121e 0000      		nop
 3282               	/* epilogue start */
 3283 1220 2696      		adiw r28,6
 3284 1222 0FB6      		in __tmp_reg__,__SREG__
 3285 1224 F894      		cli
 3286 1226 DEBF      		out __SP_H__,r29
 3287 1228 0FBE      		out __SREG__,__tmp_reg__
 3288 122a CDBF      		out __SP_L__,r28
 3289 122c DF91      		pop r29
 3290 122e CF91      		pop r28
 3291 1230 1F91      		pop r17
 3292 1232 0F91      		pop r16
 3293 1234 FF90      		pop r15
 3294 1236 EF90      		pop r14
 3295 1238 0895      		ret
 3296               		.cfi_endproc
 3297               	.LFE147:
 3300               	appInit:
 3301               	.LFB148:
 507:ServerLLDN.c  **** 
 508:ServerLLDN.c  **** #else 
 509:ServerLLDN.c  **** 	uint8_t payloadSize = 50;
 510:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 511:ServerLLDN.c  **** 	uint8_t n = 0;
 512:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 513:ServerLLDN.c  **** 
 514:ServerLLDN.c  **** 
 515:ServerLLDN.c  **** 	
 516:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t rec_beacon;
 517:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 518:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 519:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 520:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 50,
 521:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 522:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 523:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 524:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 525:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 50,
 526:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 527:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 528:ServerLLDN.c  **** 												 
 529:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqDiscResponse = { .dstAddr = 0,
 530:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 531:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 532:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 533:ServerLLDN.c  **** 									.data = (uint8_t*)&msgDiscResponse,
 534:ServerLLDN.c  **** 									.size = sizeof(msgDiscResponse)};
 535:ServerLLDN.c  **** 	
 536:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqConfigStatus = { .dstAddr =0,
 537:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 538:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 539:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 540:ServerLLDN.c  **** 									.data = (uint8_t*)&msgConfigStatus,
 541:ServerLLDN.c  **** 									.size = sizeof(msgConfigStatus)};
 542:ServerLLDN.c  **** 		
 543:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqData = { .dstAddr =0,
 544:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 545:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 546:ServerLLDN.c  **** 									.options = NWK_OPT_LLDN_DATA,
 547:ServerLLDN.c  **** 									.data = (uint8_t*)&data_payload,
 548:ServerLLDN.c  **** 									.size = sizeof(data_payload)};
 549:ServerLLDN.c  **** 
 550:ServerLLDN.c  **** 	static bool ack_received = false;
 551:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 552:ServerLLDN.c  **** 	bool associated = 0;
 553:ServerLLDN.c  **** 	int ts_time;
 554:ServerLLDN.c  **** 	uint8_t STATE = DISC_MODE;
 555:ServerLLDN.c  **** 	int tmr_error = 0;
 556:ServerLLDN.c  **** 	float delta_error = 0;
 557:ServerLLDN.c  **** 	bool beacon_tmr = false;
 558:ServerLLDN.c  **** 	uint32_t be_read = 0;
 559:ServerLLDN.c  **** 	uint32_t tmr_read= 0;
 560:ServerLLDN.c  **** 	int msg_wait_time;
 561:ServerLLDN.c  **** 	int ok_seq = -1;
 562:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 563:ServerLLDN.c  **** 	{
 564:ServerLLDN.c  **** 		appSendData();
 565:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 566:ServerLLDN.c  **** 			timer_stop();
 567:ServerLLDN.c  **** 		#else 
 568:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC1);
 569:ServerLLDN.c  **** 		#endif
 570:ServerLLDN.c  **** 	
 571:ServerLLDN.c  **** 	}
 572:ServerLLDN.c  **** 
 573:ServerLLDN.c  **** 	static void node_time_handler(void)
 574:ServerLLDN.c  **** 	{
 575:ServerLLDN.c  **** 		beacon_tmr = true;
 576:ServerLLDN.c  **** 		tmr_read = macsc_read_count();
 577:ServerLLDN.c  **** 		return;
 578:ServerLLDN.c  **** 	}
 579:ServerLLDN.c  **** 	
 580:ServerLLDN.c  **** 	
 581:ServerLLDN.c  **** 	static void disc_time_hndlr(void)
 582:ServerLLDN.c  **** 	{
 583:ServerLLDN.c  **** 		printf("\nDisc");
 584:ServerLLDN.c  **** 			NWK_DataReq(&msgReqDiscResponse);
 585:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 586:ServerLLDN.c  **** 		
 587:ServerLLDN.c  **** 	}
 588:ServerLLDN.c  **** 	
 589:ServerLLDN.c  **** 	static void config_time_hndlr(void)
 590:ServerLLDN.c  **** 	{
 591:ServerLLDN.c  **** 		if(ack_received)
 592:ServerLLDN.c  **** 		{
 593:ServerLLDN.c  **** 			NWK_DataReq(&msgReqConfigStatus);
 594:ServerLLDN.c  **** 			ack_received = false;
 595:ServerLLDN.c  **** 		}
 596:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 597:ServerLLDN.c  **** 		
 598:ServerLLDN.c  **** 	}
 599:ServerLLDN.c  **** 	
 600:ServerLLDN.c  **** 		
 601:ServerLLDN.c  **** 	static void online_time_hndlr(void)
 602:ServerLLDN.c  **** 	{
 603:ServerLLDN.c  **** 		printf("\ndata_msg");
 604:ServerLLDN.c  **** 		NWK_DataReq(&msgReqData);
 605:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);		
 606:ServerLLDN.c  **** 	}
 607:ServerLLDN.c  **** 	
 608:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 609:ServerLLDN.c  **** 	{
 610:ServerLLDN.c  **** 		NwkFrameBeaconHeaderLLDN_t *tmp_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 611:ServerLLDN.c  **** 		rec_beacon = *tmp_beacon;
 612:ServerLLDN.c  **** 		PanId = tmp_beacon->PanId;
 613:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+ tmp_beacon->TimeSlotSize )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME)
 614:ServerLLDN.c  **** 		printf("\nBE %f", tTS);
 615:ServerLLDN.c  **** 		if(rec_beacon.Flags.txState == STATE && rec_beacon.confSeqNumber == 0)
 616:ServerLLDN.c  **** 		{
 617:ServerLLDN.c  **** 			if(STATE == DISC_MODE) 
 618:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(disc_time_hndlr);
 619:ServerLLDN.c  **** 			else if(STATE == CONFIG_MODE)
 620:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(config_time_hndlr);
 621:ServerLLDN.c  **** 			else if(STATE == ONLINE_MODE)
 622:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(online_time_hndlr);
 623:ServerLLDN.c  **** 					
 624:ServerLLDN.c  **** 			
 625:ServerLLDN.c  **** 			
 626:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 627:ServerLLDN.c  **** 			{
 628:ServerLLDN.c  **** 				msg_wait_time = (2*rec_beacon.Flags.numBaseMgmtTimeslots + assTimeSlot) * tTS /*+ 80 + 45*assTi
 629:ServerLLDN.c  **** 				printf("msg_wait %d", msg_wait_time);
 630:ServerLLDN.c  **** 			}
 631:ServerLLDN.c  **** 			else	
 632:ServerLLDN.c  **** 				msg_wait_time = tTS * rec_beacon.Flags.numBaseMgmtTimeslots; 
 633:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 634:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time - 150, MACSC_CC1);
 635:ServerLLDN.c  ****  			macsc_enable_manual_bts();
 636:ServerLLDN.c  **** 			
 637:ServerLLDN.c  **** 		}
 638:ServerLLDN.c  **** 
 639:ServerLLDN.c  **** 		else if (rec_beacon.Flags.txState == RESET_MODE)
 640:ServerLLDN.c  **** 		{
 641:ServerLLDN.c  **** 			PHY_SetTdmaMode(false);
 642:ServerLLDN.c  **** 			ack_received = 0;
 643:ServerLLDN.c  **** 			STATE = DISC_MODE;
 644:ServerLLDN.c  **** 		}
 645:ServerLLDN.c  **** 		return true;
 646:ServerLLDN.c  **** 	}
 647:ServerLLDN.c  **** 	
 648:ServerLLDN.c  **** 	bool check_ack(int addr)
 649:ServerLLDN.c  **** 	{
 650:ServerLLDN.c  **** 		int pos =  addr / 8;
 651:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 652:ServerLLDN.c  **** 		printf("\n ack rec %hhx ", ackframe->ackFlags[pos]);
 653:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 654:ServerLLDN.c  **** 		{
 655:ServerLLDN.c  **** 			return true;
 656:ServerLLDN.c  **** 		}
 657:ServerLLDN.c  **** 		else
 658:ServerLLDN.c  **** 			return false;
 659:ServerLLDN.c  **** 	}
 660:ServerLLDN.c  **** 	
 661:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 662:ServerLLDN.c  **** 	{
 663:ServerLLDN.c  **** 		#if !MASTER_MACSC
 664:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 665:ServerLLDN.c  **** 		#endif
 666:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 667:ServerLLDN.c  **** 
 668:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 669:ServerLLDN.c  **** 		{
 670:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 671:ServerLLDN.c  **** 			{
 672:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 673:ServerLLDN.c  **** 				if(!ack_received)
 674:ServerLLDN.c  **** 				{
 675:ServerLLDN.c  **** 				
 676:ServerLLDN.c  **** 					int retransmition_slot = 0;
 677:ServerLLDN.c  **** 					
 678:ServerLLDN.c  **** 
 679:ServerLLDN.c  **** 					for(int i = 0; i < assTimeSlot && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 680:ServerLLDN.c  **** 						if( !check_ack(i+1) )
 681:ServerLLDN.c  **** 							retransmition_slot++;
 682:ServerLLDN.c  **** 					
 683:ServerLLDN.c  **** 					
 684:ServerLLDN.c  **** // 					if( retransmition_slot > (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2 - 1)
 685:ServerLLDN.c  **** // 						return false;
 686:ServerLLDN.c  **** 										
 687:ServerLLDN.c  **** 					
 688:ServerLLDN.c  **** 					if(retransmition_slot == 0)
 689:ServerLLDN.c  **** 					{
 690:ServerLLDN.c  **** 						NWK_DataReq(&msgReqData);
 691:ServerLLDN.c  **** 					}
 692:ServerLLDN.c  **** 					else
 693:ServerLLDN.c  **** 					{
 694:ServerLLDN.c  **** 						#if MASTER_MACSC
 695:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 696:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(online_time_hndlr);
 697:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 698:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, tTS * retransmition_slot - 40, MACSC_CC1);
 699:ServerLLDN.c  **** 						#endif
 700:ServerLLDN.c  **** 					}					
 701:ServerLLDN.c  **** 					printf("\nretransmition_slot %d , %f", retransmition_slot, tTS);
 702:ServerLLDN.c  **** 
 703:ServerLLDN.c  **** 				}				
 704:ServerLLDN.c  **** 			}
 705:ServerLLDN.c  **** 			else
 706:ServerLLDN.c  **** 			{
 707:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 708:ServerLLDN.c  **** 				if(STATE == DISC_MODE && ack_received)
 709:ServerLLDN.c  **** 					STATE = CONFIG_MODE;
 710:ServerLLDN.c  **** 			}
 711:ServerLLDN.c  **** 		}
 712:ServerLLDN.c  **** 		return true;
 713:ServerLLDN.c  **** 	}
 714:ServerLLDN.c  **** 	
 715:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 716:ServerLLDN.c  **** 	{
 717:ServerLLDN.c  **** 		#if !MASTER_MACSC
 718:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 719:ServerLLDN.c  **** 		#endif
 720:ServerLLDN.c  **** 		
 721:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 722:ServerLLDN.c  **** 		{
 723:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 724:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 725:ServerLLDN.c  **** 			{
 726:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 727:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 728:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 729:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 730:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 731:ServerLLDN.c  **** 				associated = 1;
 732:ServerLLDN.c  **** 				STATE = ONLINE_MODE;
 733:ServerLLDN.c  **** 				PHY_SetTdmaMode(true);
 734:ServerLLDN.c  **** 				printf("\n asstimeslot %d, tsDuration %hhx", assTimeSlot, n);
 735:ServerLLDN.c  **** 			}
 736:ServerLLDN.c  **** 		}
 737:ServerLLDN.c  **** 		return true;
 738:ServerLLDN.c  **** 	}
 739:ServerLLDN.c  **** 
 740:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 741:ServerLLDN.c  **** 	{
 742:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 743:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 744:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 745:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 746:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 747:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 748:ServerLLDN.c  **** 	}
 749:ServerLLDN.c  **** 	
 750:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 751:ServerLLDN.c  **** 	{		
 752:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 753:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 754:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 755:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 756:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 757:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 758:ServerLLDN.c  **** 	}
 759:ServerLLDN.c  **** 	
 760:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 761:ServerLLDN.c  **** 	{
 762:ServerLLDN.c  **** 		
 763:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 764:ServerLLDN.c  **** 
 765:ServerLLDN.c  **** 	
 766:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 767:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 768:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 769:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 770:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 771:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 772:ServerLLDN.c  **** 	}
 773:ServerLLDN.c  **** 	
 774:ServerLLDN.c  **** 	
 775:ServerLLDN.c  **** #endif // APP_COORDINATOR
 776:ServerLLDN.c  **** 
 777:ServerLLDN.c  **** static void appInit(void)
 778:ServerLLDN.c  **** {
 3302               		.loc 6 778 0
 3303               		.cfi_startproc
 3304 123a CF93      		push r28
 3305               	.LCFI118:
 3306               		.cfi_def_cfa_offset 3
 3307               		.cfi_offset 28, -2
 3308 123c DF93      		push r29
 3309               	.LCFI119:
 3310               		.cfi_def_cfa_offset 4
 3311               		.cfi_offset 29, -3
 3312 123e CDB7      		in r28,__SP_L__
 3313 1240 DEB7      		in r29,__SP_H__
 3314               	.LCFI120:
 3315               		.cfi_def_cfa_register 28
 3316               	/* prologue: function */
 3317               	/* frame size = 0 */
 3318               	/* stack size = 2 */
 3319               	.L__stack_usage = 2
 779:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 3320               		.loc 6 779 0
 3321 1242 80E0      		ldi r24,0
 3322 1244 90E0      		ldi r25,0
 3323 1246 0E94 0000 		call NWK_SetAddr
 780:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 3324               		.loc 6 780 0
 3325 124a 8FE0      		ldi r24,lo8(15)
 3326 124c 0E94 0000 		call PHY_SetChannel
 781:ServerLLDN.c  **** 	PHY_SetRxState(true);
 3327               		.loc 6 781 0
 3328 1250 81E0      		ldi r24,lo8(1)
 3329 1252 0E94 0000 		call PHY_SetRxState
 782:ServerLLDN.c  **** 		
 783:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 784:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 785:ServerLLDN.c  **** 		tmrDelay.interval = 1;
 3330               		.loc 6 785 0
 3331 1256 81E0      		ldi r24,lo8(1)
 3332 1258 90E0      		ldi r25,0
 3333 125a A0E0      		ldi r26,0
 3334 125c B0E0      		ldi r27,0
 3335 125e 8093 0000 		sts tmrDelay+6,r24
 3336 1262 9093 0000 		sts tmrDelay+6+1,r25
 3337 1266 A093 0000 		sts tmrDelay+6+2,r26
 3338 126a B093 0000 		sts tmrDelay+6+3,r27
 786:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 3339               		.loc 6 786 0
 3340 126e 1092 0000 		sts tmrDelay+10,__zero_reg__
 787:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 3341               		.loc 6 787 0
 3342 1272 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 3343 1274 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 3344 1276 9093 0000 		sts tmrDelay+11+1,r25
 3345 127a 8093 0000 		sts tmrDelay+11,r24
 788:ServerLLDN.c  **** 	  
 789:ServerLLDN.c  **** 		/* 
 790:ServerLLDN.c  **** 		* Disable CSMA/CA
 791:ServerLLDN.c  **** 		* Disable auto ACK
 792:ServerLLDN.c  **** 		*/
 793:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 3346               		.loc 6 793 0
 3347 127e 8EEF      		ldi r24,lo8(-2)
 3348 1280 9AEC      		ldi r25,lo8(-54)
 3349 1282 0E94 0000 		call NWK_SetPanId
 794:ServerLLDN.c  **** 		PanId = APP_PANID;
 3350               		.loc 6 794 0
 3351 1286 8EEF      		ldi r24,lo8(-2)
 3352 1288 8093 0000 		sts PanId,r24
 795:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 3353               		.loc 6 795 0
 3354 128c 8EEF      		ldi r24,lo8(-2)
 3355 128e 8093 0000 		sts ACKFrame,r24
 796:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 3356               		.loc 6 796 0
 3357 1292 81E0      		ldi r24,lo8(1)
 3358 1294 0E94 0000 		call PHY_SetTdmaMode
 797:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 3359               		.loc 6 797 0
 3360 1298 60E0      		ldi r22,lo8(gs(appCommandInd))
 3361 129a 70E0      		ldi r23,hi8(gs(appCommandInd))
 3362 129c 83E0      		ldi r24,lo8(3)
 3363 129e 0E94 0000 		call NWK_OpenEndpoint
 798:ServerLLDN.c  **** 	#else
 799:ServerLLDN.c  **** 		appPrepareDiscoverResponse();	
 800:ServerLLDN.c  **** 		/*
 801:ServerLLDN.c  **** 		 * Enable CSMA/CA
 802:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 803:ServerLLDN.c  **** 		 */
 804:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 805:ServerLLDN.c  **** 		PHY_SetOptimizedCSMAValues();
 806:ServerLLDN.c  **** 		
 807:ServerLLDN.c  **** 		
 808:ServerLLDN.c  **** 		
 809:ServerLLDN.c  **** 		payloadSize = 127;
 810:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 811:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 812:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 813:ServerLLDN.c  **** 		/*
 814:ServerLLDN.c  **** 		* Configure interrupts callback functions
 815:ServerLLDN.c  **** 		*/
 816:ServerLLDN.c  **** 		
 817:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 818:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 3364               		.loc 6 818 0
 3365 12a2 81E0      		ldi r24,lo8(1)
 3366 12a4 0E94 0000 		call PHY_SetPromiscuousMode
 819:ServerLLDN.c  **** 
 820:ServerLLDN.c  **** }
 3367               		.loc 6 820 0
 3368 12a8 0000      		nop
 3369               	/* epilogue start */
 3370 12aa DF91      		pop r29
 3371 12ac CF91      		pop r28
 3372 12ae 0895      		ret
 3373               		.cfi_endproc
 3374               	.LFE148:
 3376               		.section	.rodata
 3377               	.LC1:
 3378 0000 0A25 642C 		.string	"\n%d, %d"
 3378      2025 6400 
 3379               	.LC2:
 3380 0008 0A0A 204D 		.string	"\n\n M\351tricas (%d Ciclos):\n"
 3380      E974 7269 
 3380      6361 7320 
 3380      2825 6420 
 3380      4369 636C 
 3381               	.LC3:
 3382 0022 0A41 6464 		.string	"\nAddrs , %hhx"
 3382      7273 202C 
 3382      2025 6868 
 3382      7800 
 3383               	.LC4:
 3384 0030 0A50 4C52 		.string	"\nPLR ,  %.3f"
 3384      202C 2020 
 3384      252E 3366 
 3384      00
 3385               	.LC5:
 3386 003d 0A50 4552 		.string	"\nPER ,  %.3f"
 3386      202C 2020 
 3386      252E 3366 
 3386      00
 3387               	.LC6:
 3388 004a 0A52 7373 		.string	"\nRssi M\351dio , %f\n"
 3388      6920 4DE9 
 3388      6469 6F20 
 3388      2C20 2566 
 3388      0A00 
 3389               	.LC7:
 3390 005c 0A50 4C52 		.string	"\nPLR , %.3f\nPER , %.3f, total_de_mensagens %d"
 3390      202C 2025 
 3390      2E33 660A 
 3390      5045 5220 
 3390      2C20 252E 
 3391               		.text
 3393               	APP_TaskHandler:
 3394               	.LFB149:
 821:ServerLLDN.c  **** 
 822:ServerLLDN.c  **** static void APP_TaskHandler(void)
 823:ServerLLDN.c  **** {
 3395               		.loc 6 823 0
 3396               		.cfi_startproc
 3397 12b0 CF92      		push r12
 3398               	.LCFI121:
 3399               		.cfi_def_cfa_offset 3
 3400               		.cfi_offset 12, -2
 3401 12b2 DF92      		push r13
 3402               	.LCFI122:
 3403               		.cfi_def_cfa_offset 4
 3404               		.cfi_offset 13, -3
 3405 12b4 EF92      		push r14
 3406               	.LCFI123:
 3407               		.cfi_def_cfa_offset 5
 3408               		.cfi_offset 14, -4
 3409 12b6 FF92      		push r15
 3410               	.LCFI124:
 3411               		.cfi_def_cfa_offset 6
 3412               		.cfi_offset 15, -5
 3413 12b8 CF93      		push r28
 3414               	.LCFI125:
 3415               		.cfi_def_cfa_offset 7
 3416               		.cfi_offset 28, -6
 3417 12ba DF93      		push r29
 3418               	.LCFI126:
 3419               		.cfi_def_cfa_offset 8
 3420               		.cfi_offset 29, -7
 3421 12bc CDB7      		in r28,__SP_L__
 3422 12be DEB7      		in r29,__SP_H__
 3423               	.LCFI127:
 3424               		.cfi_def_cfa_register 28
 3425 12c0 6097      		sbiw r28,16
 3426               	.LCFI128:
 3427               		.cfi_def_cfa_offset 24
 3428 12c2 0FB6      		in __tmp_reg__,__SREG__
 3429 12c4 F894      		cli
 3430 12c6 DEBF      		out __SP_H__,r29
 3431 12c8 0FBE      		out __SREG__,__tmp_reg__
 3432 12ca CDBF      		out __SP_L__,r28
 3433               	/* prologue: function */
 3434               	/* frame size = 16 */
 3435               	/* stack size = 22 */
 3436               	.L__stack_usage = 22
 824:ServerLLDN.c  **** 	switch (appState){
 3437               		.loc 6 824 0
 3438 12cc 8091 0000 		lds r24,appState
 3439 12d0 882F      		mov r24,r24
 3440 12d2 90E0      		ldi r25,0
 3441 12d4 8230      		cpi r24,2
 3442 12d6 9105      		cpc r25,__zero_reg__
 3443 12d8 01F0      		breq .L98
 3444 12da 8330      		cpi r24,3
 3445 12dc 9105      		cpc r25,__zero_reg__
 3446 12de 01F0      		breq .L99
 3447 12e0 892B      		or r24,r25
 3448 12e2 01F0      		breq .L100
 825:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 826:ServerLLDN.c  **** 		{
 827:ServerLLDN.c  **** 			appInit();
 828:ServerLLDN.c  **** 			#if APP_COORDINATOR
 829:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 830:ServerLLDN.c  **** 			#else
 831:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 832:ServerLLDN.c  **** 			#endif
 833:ServerLLDN.c  **** 			break;
 834:ServerLLDN.c  **** 		}
 835:ServerLLDN.c  **** 		case APP_STATE_SEND:
 836:ServerLLDN.c  **** 		{
 837:ServerLLDN.c  **** 			appSendData();
 838:ServerLLDN.c  **** 			#if APP_COORDINATOR
 839:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 840:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 841:ServerLLDN.c  **** 			#else
 842:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 843:ServerLLDN.c  **** 			#endif
 844:ServerLLDN.c  **** 			break;
 845:ServerLLDN.c  **** 		}
 846:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 847:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 848:ServerLLDN.c  **** 		{
 849:ServerLLDN.c  **** 			switch(appPanState)
 850:ServerLLDN.c  **** 			{
 851:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 852:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 853:ServerLLDN.c  **** 				{
 854:ServerLLDN.c  **** 					appPanReset();
 855:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 856:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 857:ServerLLDN.c  **** 					cycles_counter = 0;
 858:ServerLLDN.c  **** 					break;
 859:ServerLLDN.c  **** 				}
 860:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 861:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 862:ServerLLDN.c  **** 				{
 863:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 864:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 865:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 866:ServerLLDN.c  **** 					 */
 867:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 12)
 868:ServerLLDN.c  **** 					{	
 869:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 870:ServerLLDN.c  **** 						counter_associados = 0;
 871:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 872:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 873:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 874:ServerLLDN.c  **** 						msgReq.options = 0;
 875:ServerLLDN.c  **** 						
 876:ServerLLDN.c  **** 						/* reseting ack bitmap */
 877:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 878:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 879:ServerLLDN.c  **** 						ACKFrame_size = 0;
 880:ServerLLDN.c  **** 						accepting_requests = 0;
 881:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 882:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 883:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 884:ServerLLDN.c  **** 					}
 885:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 886:ServerLLDN.c  **** 					else 
 887:ServerLLDN.c  **** 					{
 888:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 889:ServerLLDN.c  **** 						appPanDiscInit();
 890:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 891:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 892:ServerLLDN.c  **** 					}
 893:ServerLLDN.c  **** 					break;
 894:ServerLLDN.c  **** 				}
 895:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 896:ServerLLDN.c  **** 				{
 897:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 898:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 899:ServerLLDN.c  **** 					msgReq.data = NULL;
 900:ServerLLDN.c  **** 					msgReq.size = 0;
 901:ServerLLDN.c  **** 					
 902:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 903:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 904:ServerLLDN.c  **** 					break;
 905:ServerLLDN.c  **** 				}
 906:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 907:ServerLLDN.c  **** 				{
 908:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 909:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 910:ServerLLDN.c  **** 					 */
 911:ServerLLDN.c  **** 					appPanPrepareACK();
 912:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 913:ServerLLDN.c  **** 					// SYS_TimerStart(&tmrDelay);
 914:ServerLLDN.c  **** 					
 915:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 916:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 917:ServerLLDN.c  **** 					break;
 918:ServerLLDN.c  **** 				}
 919:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 920:ServerLLDN.c  **** 				{
 921:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 922:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 923:ServerLLDN.c  **** 					msgReq.data = NULL;
 924:ServerLLDN.c  **** 					msgReq.size = 0;
 925:ServerLLDN.c  **** 					
 926:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 927:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 928:ServerLLDN.c  **** 					break;
 929:ServerLLDN.c  **** 
 930:ServerLLDN.c  **** 				}
 931:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 932:ServerLLDN.c  **** 				{
 933:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 934:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 935:ServerLLDN.c  **** 					msgReq.data = NULL;
 936:ServerLLDN.c  **** 					msgReq.size = 0;
 937:ServerLLDN.c  **** 					
 938:ServerLLDN.c  **** 					counter_delay_msg = 0;
 939:ServerLLDN.c  **** 					
 940:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 941:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 942:ServerLLDN.c  **** 					
 943:ServerLLDN.c  **** 					break;
 944:ServerLLDN.c  **** 				}
 945:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 946:ServerLLDN.c  **** 				{
 947:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 948:ServerLLDN.c  **** 					{
 949:ServerLLDN.c  **** 						if(CopyToConfigRequest())
 950:ServerLLDN.c  **** 						{
 951:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 952:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 953:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 954:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 955:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 956:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 957:ServerLLDN.c  **** 						// Delay between messages
 958:ServerLLDN.c  **** 						}
 959:ServerLLDN.c  **** 						else
 960:ServerLLDN.c  **** 						{
 961:ServerLLDN.c  **** 							msgReq.options = 0;
 962:ServerLLDN.c  **** 						}
 963:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
 964:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 965:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 966:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 967:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 968:ServerLLDN.c  **** 						
 969:ServerLLDN.c  **** 						counter_associados++;
 970:ServerLLDN.c  **** 					}
 971:ServerLLDN.c  **** 					else
 972:ServerLLDN.c  **** 					{
 973:ServerLLDN.c  **** 						msgReq.options = 0;
 974:ServerLLDN.c  **** 
 975:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
 976:ServerLLDN.c  **** 						{
 977:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
 978:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 979:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 980:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 981:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 982:ServerLLDN.c  **** 						}
 983:ServerLLDN.c  **** 						
 984:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
 985:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 986:ServerLLDN.c  **** 					}
 987:ServerLLDN.c  **** 					break;
 988:ServerLLDN.c  **** 				}
 989:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 990:ServerLLDN.c  **** 				{
 991:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 992:ServerLLDN.c  **** 					msgReq.data = NULL;
 993:ServerLLDN.c  **** 					msgReq.size = 0;
 994:ServerLLDN.c  **** 					
 995:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 996:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 997:ServerLLDN.c  **** 					cycles_counter++;	
 998:ServerLLDN.c  **** 					
 999:ServerLLDN.c  **** 					break;
1000:ServerLLDN.c  **** 				}
1001:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
1002:ServerLLDN.c  **** 				{
1003:ServerLLDN.c  **** 
1004:ServerLLDN.c  **** 					if(cycles_counter != 0)
1005:ServerLLDN.c  **** 					{
1006:ServerLLDN.c  **** 						appPanOnlineInit();
1007:ServerLLDN.c  **** 						
1008:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1009:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1010:ServerLLDN.c  **** 						
1011:ServerLLDN.c  **** 						cycles_counter--;
1012:ServerLLDN.c  **** 					}
1013:ServerLLDN.c  **** 					else
1014:ServerLLDN.c  **** 					{
1015:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1016:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1017:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
1018:ServerLLDN.c  **** 						
1019:ServerLLDN.c  **** 						printf("\n\n Mtricas (%d Ciclos):\n", NUMERO_CICLOS_ONLINE -1);
1020:ServerLLDN.c  **** 						int total_msg = 0;
1021:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
1022:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
1023:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
1024:ServerLLDN.c  **** 						{
1025:ServerLLDN.c  **** 							printf("\nAddrs , %hhx", nodes_info_arr[i].mac_addr);
1026:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1027:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1028:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
1029:ServerLLDN.c  **** 							
1030:ServerLLDN.c  **** 							total_msg = total_msg + nodes_info_arr[i].msg_rec;
1031:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
1032:ServerLLDN.c  **** 						}
1033:ServerLLDN.c  **** 						if(assTimeSlot > 0 && total_msg > 0)
1034:ServerLLDN.c  **** 						{
1035:ServerLLDN.c  **** 							PLR = 1 - total_msg / expected_messages;
1036:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
1037:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f, total_de_mensagens %d", PLR, PER, total_msg);
1038:ServerLLDN.c  **** 							
1039:ServerLLDN.c  **** 						}
1040:ServerLLDN.c  **** 					}
1041:ServerLLDN.c  **** 					break;
1042:ServerLLDN.c  **** 				}
1043:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
1044:ServerLLDN.c  **** 				{
1045:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
1046:ServerLLDN.c  **** 					{
1047:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
1048:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
1049:ServerLLDN.c  **** 					}
1050:ServerLLDN.c  **** 					retransmit_ts_array_counter = 0;
1051:ServerLLDN.c  **** 					ACKFrame_size = 0;
1052:ServerLLDN.c  **** 					
1053:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
1054:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
1055:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
1056:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
1057:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
1058:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
1059:ServerLLDN.c  **** 
1060:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1061:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
1062:ServerLLDN.c  **** 					break;
1063:ServerLLDN.c  **** 				}				
1064:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
1065:ServerLLDN.c  **** 				{
1066:ServerLLDN.c  **** 
1067:ServerLLDN.c  **** 					msgReq.options = 0;
1068:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1069:ServerLLDN.c  **** 					break;
1070:ServerLLDN.c  **** 				}
1071:ServerLLDN.c  **** 			}
1072:ServerLLDN.c  **** 			break;	
1073:ServerLLDN.c  **** 		}
1074:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
1075:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
1076:ServerLLDN.c  **** 		{
1077:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
1078:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
1079:ServerLLDN.c  **** 			break;
1080:ServerLLDN.c  **** 		}
1081:ServerLLDN.c  **** 		
1082:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
1083:ServerLLDN.c  **** 		{
1084:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
1085:ServerLLDN.c  **** 			if(ack_received && rec_beacon.confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
1086:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
1087:ServerLLDN.c  **** 			}
1088:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
1089:ServerLLDN.c  **** 			else {
1090:ServerLLDN.c  **** 				#if MASTER_MACSC
1091:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
1092:ServerLLDN.c  **** 				#else
1093:ServerLLDN.c  **** 				timer_stop();
1094:ServerLLDN.c  **** 				#endif
1095:ServerLLDN.c  **** 			}
1096:ServerLLDN.c  **** 			ack_received = 0;
1097:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1098:ServerLLDN.c  **** 			break;
1099:ServerLLDN.c  **** 		}
1100:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
1101:ServerLLDN.c  **** 		{
1102:ServerLLDN.c  **** 			appPrepareDataFrame();
1103:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1104:ServerLLDN.c  **** 			break;
1105:ServerLLDN.c  **** 		}
1106:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
1107:ServerLLDN.c  **** 		{
1108:ServerLLDN.c  **** 			if(!ack_received)
1109:ServerLLDN.c  **** 			{
1110:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1111:ServerLLDN.c  **** 				
1112:ServerLLDN.c  **** 				int retransmition_slot = 0;
1113:ServerLLDN.c  **** 				
1114:ServerLLDN.c  **** 				
1115:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot - 1 && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2;
1116:ServerLLDN.c  **** 					if( !check_ack(i) )
1117:ServerLLDN.c  **** 						retransmition_slot++;
1118:ServerLLDN.c  **** 					
1119:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
1120:ServerLLDN.c  **** 				
1121:ServerLLDN.c  **** 				if(retransmition_slot == 0)
1122:ServerLLDN.c  **** 				{
1123:ServerLLDN.c  **** 					appSendData();
1124:ServerLLDN.c  **** 					// appState = APP_STATE_SEND;			
1125:ServerLLDN.c  **** 				}
1126:ServerLLDN.c  **** 				else
1127:ServerLLDN.c  **** 				{
1128:ServerLLDN.c  **** 					#if MASTER_MACSC
1129:ServerLLDN.c  **** 					macsc_enable_manual_bts();
1130:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
1131:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
1132:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
1133:ServerLLDN.c  **** 					#endif
1134:ServerLLDN.c  **** 				}
1135:ServerLLDN.c  **** 				
1136:ServerLLDN.c  **** 			}
1137:ServerLLDN.c  **** 			else
1138:ServerLLDN.c  **** 			{
1139:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1140:ServerLLDN.c  **** 			}
1141:ServerLLDN.c  **** 			
1142:ServerLLDN.c  **** 			break;
1143:ServerLLDN.c  **** 		}
1144:ServerLLDN.c  **** 		#endif
1145:ServerLLDN.c  **** 		default:
1146:ServerLLDN.c  **** 		{
1147:ServerLLDN.c  **** 			break;
 3449               		.loc 6 1147 0
 3450 12e4 00C0      		rjmp .L101
 3451               	.L100:
 827:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3452               		.loc 6 827 0
 3453 12e6 0E94 0000 		call appInit
 829:ServerLLDN.c  **** 			#else
 3454               		.loc 6 829 0
 3455 12ea 83E0      		ldi r24,lo8(3)
 3456 12ec 8093 0000 		sts appState,r24
 833:ServerLLDN.c  **** 		}
 3457               		.loc 6 833 0
 3458 12f0 00C0      		rjmp .L101
 3459               	.L98:
 837:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3460               		.loc 6 837 0
 3461 12f2 0E94 0000 		call appSendData
 840:ServerLLDN.c  **** 			#else
 3462               		.loc 6 840 0
 3463 12f6 83E0      		ldi r24,lo8(3)
 3464 12f8 8093 0000 		sts appState,r24
 844:ServerLLDN.c  **** 		}
 3465               		.loc 6 844 0
 3466 12fc 00C0      		rjmp .L101
 3467               	.L99:
 849:ServerLLDN.c  **** 			{
 3468               		.loc 6 849 0
 3469 12fe 8091 0000 		lds r24,appPanState
 3470 1302 882F      		mov r24,r24
 3471 1304 90E0      		ldi r25,0
 3472 1306 092E      		mov __tmp_reg__,r25
 3473 1308 000C      		lsl r0
 3474 130a AA0B      		sbc r26,r26
 3475 130c BB0B      		sbc r27,r27
 3476 130e 40E0      		ldi r20,0
 3477 1310 50E0      		ldi r21,0
 3478 1312 2DE0      		ldi r18,lo8(13)
 3479 1314 30E0      		ldi r19,0
 3480 1316 841B      		sub r24,r20
 3481 1318 950B      		sbc r25,r21
 3482 131a 2817      		cp r18,r24
 3483 131c 3907      		cpc r19,r25
 3484 131e 00F4      		brsh .+2
 3485 1320 00C0      		rjmp .L132
 3486 1322 8050      		subi r24,lo8(-(gs(.L104)))
 3487 1324 9040      		sbci r25,hi8(-(gs(.L104)))
 3488 1326 FC01      		movw r30,r24
 3489 1328 0C94 0000 		jmp __tablejump2__
 3490               		.section	.progmem.gcc_sw_table,"a",@progbits
 3491               		.p2align	1
 3492               	.L104:
 3493 0000 0000      		.word gs(.L103)
 3494 0002 0000      		.word gs(.L105)
 3495 0004 0000      		.word gs(.L106)
 3496 0006 0000      		.word gs(.L107)
 3497 0008 0000      		.word gs(.L108)
 3498 000a 0000      		.word gs(.L109)
 3499 000c 0000      		.word gs(.L110)
 3500 000e 0000      		.word gs(.L111)
 3501 0010 0000      		.word gs(.L112)
 3502 0012 0000      		.word gs(.L132)
 3503 0014 0000      		.word gs(.L132)
 3504 0016 0000      		.word gs(.L132)
 3505 0018 0000      		.word gs(.L113)
 3506 001a 0000      		.word gs(.L114)
 3507               		.text
 3508               	.L103:
 854:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3509               		.loc 6 854 0
 3510 132c 0E94 0000 		call appPanReset
 855:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 3511               		.loc 6 855 0
 3512 1330 81E0      		ldi r24,lo8(1)
 3513 1332 8093 0000 		sts appPanState,r24
 856:ServerLLDN.c  **** 					cycles_counter = 0;
 3514               		.loc 6 856 0
 3515 1336 82E0      		ldi r24,lo8(2)
 3516 1338 8093 0000 		sts appState,r24
 857:ServerLLDN.c  **** 					break;
 3517               		.loc 6 857 0
 3518 133c 1092 0000 		sts cycles_counter,__zero_reg__
 858:ServerLLDN.c  **** 				}
 3519               		.loc 6 858 0
 3520 1340 00C0      		rjmp .L102
 3521               	.L105:
 867:ServerLLDN.c  **** 					{	
 3522               		.loc 6 867 0
 3523 1342 8091 0000 		lds r24,counter_associados
 3524 1346 9091 0000 		lds r25,counter_associados+1
 3525 134a 0C97      		sbiw r24,12
 3526 134c 01F0      		breq .L115
 867:ServerLLDN.c  **** 					{	
 3527               		.loc 6 867 0 is_stmt 0 discriminator 1
 3528 134e 8091 0000 		lds r24,cycles_counter
 3529 1352 8C30      		cpi r24,lo8(12)
 3530 1354 00F4      		brsh .+2
 3531 1356 00C0      		rjmp .L116
 3532               	.L115:
 869:ServerLLDN.c  **** 						counter_associados = 0;
 3533               		.loc 6 869 0 is_stmt 1
 3534 1358 2091 0000 		lds r18,counter_associados
 3535 135c 3091 0000 		lds r19,counter_associados+1
 3536 1360 8091 0000 		lds r24,cycles_counter
 3537 1364 882F      		mov r24,r24
 3538 1366 90E0      		ldi r25,0
 3539 1368 432F      		mov r20,r19
 3540 136a 4F93      		push r20
 3541 136c 2F93      		push r18
 3542 136e 292F      		mov r18,r25
 3543 1370 2F93      		push r18
 3544 1372 8F93      		push r24
 3545 1374 80E0      		ldi r24,lo8(.LC1)
 3546 1376 90E0      		ldi r25,hi8(.LC1)
 3547 1378 892F      		mov r24,r25
 3548 137a 8F93      		push r24
 3549 137c 80E0      		ldi r24,lo8(.LC1)
 3550 137e 90E0      		ldi r25,hi8(.LC1)
 3551 1380 8F93      		push r24
 3552 1382 0E94 0000 		call printf
 3553 1386 0F90      		pop __tmp_reg__
 3554 1388 0F90      		pop __tmp_reg__
 3555 138a 0F90      		pop __tmp_reg__
 3556 138c 0F90      		pop __tmp_reg__
 3557 138e 0F90      		pop __tmp_reg__
 3558 1390 0F90      		pop __tmp_reg__
 870:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3559               		.loc 6 870 0
 3560 1392 1092 0000 		sts counter_associados+1,__zero_reg__
 3561 1396 1092 0000 		sts counter_associados,__zero_reg__
 872:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 3562               		.loc 6 872 0
 3563 139a 81E0      		ldi r24,lo8(1)
 3564 139c 0E94 0000 		call macsc_disable_cmp_int
 873:ServerLLDN.c  **** 						msgReq.options = 0;
 3565               		.loc 6 873 0
 3566 13a0 82E0      		ldi r24,lo8(2)
 3567 13a2 0E94 0000 		call macsc_disable_cmp_int
 874:ServerLLDN.c  **** 						
 3568               		.loc 6 874 0
 3569 13a6 1092 0000 		sts msgReq+9+1,__zero_reg__
 3570 13aa 1092 0000 		sts msgReq+9,__zero_reg__
 3571               	.LBB14:
 877:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3572               		.loc 6 877 0
 3573 13ae 1A82      		std Y+2,__zero_reg__
 3574 13b0 1982      		std Y+1,__zero_reg__
 3575 13b2 00C0      		rjmp .L117
 3576               	.L118:
 878:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3577               		.loc 6 878 0 discriminator 3
 3578 13b4 8981      		ldd r24,Y+1
 3579 13b6 9A81      		ldd r25,Y+2
 3580 13b8 8050      		subi r24,lo8(-(ACKFrame+1))
 3581 13ba 9040      		sbci r25,hi8(-(ACKFrame+1))
 3582 13bc FC01      		movw r30,r24
 3583 13be 1082      		st Z,__zero_reg__
 877:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3584               		.loc 6 877 0 discriminator 3
 3585 13c0 8981      		ldd r24,Y+1
 3586 13c2 9A81      		ldd r25,Y+2
 3587 13c4 0196      		adiw r24,1
 3588 13c6 9A83      		std Y+2,r25
 3589 13c8 8983      		std Y+1,r24
 3590               	.L117:
 877:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3591               		.loc 6 877 0 is_stmt 0 discriminator 1
 3592 13ca 8981      		ldd r24,Y+1
 3593 13cc 9A81      		ldd r25,Y+2
 3594 13ce 8097      		sbiw r24,32
 3595 13d0 04F0      		brlt .L118
 3596               	.LBE14:
 879:ServerLLDN.c  **** 						accepting_requests = 0;
 3597               		.loc 6 879 0 is_stmt 1
 3598 13d2 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3599 13d6 1092 0000 		sts ACKFrame_size,__zero_reg__
 880:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 3600               		.loc 6 880 0
 3601 13da 1092 0000 		sts accepting_requests+1,__zero_reg__
 3602 13de 1092 0000 		sts accepting_requests,__zero_reg__
 881:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3603               		.loc 6 881 0
 3604 13e2 83E0      		ldi r24,lo8(3)
 3605 13e4 8093 0000 		sts appState,r24
 882:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3606               		.loc 6 882 0
 3607 13e8 88E0      		ldi r24,lo8(8)
 3608 13ea 8093 0000 		sts appPanState,r24
 883:ServerLLDN.c  **** 					}
 3609               		.loc 6 883 0
 3610 13ee 85E1      		ldi r24,lo8(21)
 3611 13f0 8093 0000 		sts cycles_counter,r24
 893:ServerLLDN.c  **** 				}
 3612               		.loc 6 893 0
 3613 13f4 00C0      		rjmp .L102
 3614               	.L116:
 889:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3615               		.loc 6 889 0
 3616 13f6 0E94 0000 		call appPanDiscInit
 890:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3617               		.loc 6 890 0
 3618 13fa 81E0      		ldi r24,lo8(1)
 3619 13fc 8093 0000 		sts appState,r24
 891:ServerLLDN.c  **** 					}
 3620               		.loc 6 891 0
 3621 1400 82E0      		ldi r24,lo8(2)
 3622 1402 8093 0000 		sts appPanState,r24
 893:ServerLLDN.c  **** 				}
 3623               		.loc 6 893 0
 3624 1406 00C0      		rjmp .L102
 3625               	.L106:
 898:ServerLLDN.c  **** 					msgReq.data = NULL;
 3626               		.loc 6 898 0
 3627 1408 80E4      		ldi r24,lo8(64)
 3628 140a 99E0      		ldi r25,lo8(9)
 3629 140c 9093 0000 		sts msgReq+9+1,r25
 3630 1410 8093 0000 		sts msgReq+9,r24
 899:ServerLLDN.c  **** 					msgReq.size = 0;
 3631               		.loc 6 899 0
 3632 1414 1092 0000 		sts msgReq+13+1,__zero_reg__
 3633 1418 1092 0000 		sts msgReq+13,__zero_reg__
 900:ServerLLDN.c  **** 					
 3634               		.loc 6 900 0
 3635 141c 1092 0000 		sts msgReq+15,__zero_reg__
 902:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3636               		.loc 6 902 0
 3637 1420 81E0      		ldi r24,lo8(1)
 3638 1422 8093 0000 		sts appState,r24
 903:ServerLLDN.c  **** 					break;
 3639               		.loc 6 903 0
 3640 1426 83E0      		ldi r24,lo8(3)
 3641 1428 8093 0000 		sts appPanState,r24
 904:ServerLLDN.c  **** 				}
 3642               		.loc 6 904 0
 3643 142c 00C0      		rjmp .L102
 3644               	.L107:
 911:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 3645               		.loc 6 911 0
 3646 142e 0E94 0000 		call appPanPrepareACK
 912:ServerLLDN.c  **** 					// SYS_TimerStart(&tmrDelay);
 3647               		.loc 6 912 0
 3648 1432 82E0      		ldi r24,lo8(2)
 3649 1434 8093 0000 		sts appState,r24
 915:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3650               		.loc 6 915 0
 3651 1438 84E0      		ldi r24,lo8(4)
 3652 143a 8093 0000 		sts appPanState,r24
 916:ServerLLDN.c  **** 					break;
 3653               		.loc 6 916 0
 3654 143e 81E0      		ldi r24,lo8(1)
 3655 1440 8093 0000 		sts appState,r24
 917:ServerLLDN.c  **** 				}
 3656               		.loc 6 917 0
 3657 1444 00C0      		rjmp .L102
 3658               	.L108:
 922:ServerLLDN.c  **** 					msgReq.data = NULL;
 3659               		.loc 6 922 0
 3660 1446 80E4      		ldi r24,lo8(64)
 3661 1448 92E0      		ldi r25,lo8(2)
 3662 144a 9093 0000 		sts msgReq+9+1,r25
 3663 144e 8093 0000 		sts msgReq+9,r24
 923:ServerLLDN.c  **** 					msgReq.size = 0;
 3664               		.loc 6 923 0
 3665 1452 1092 0000 		sts msgReq+13+1,__zero_reg__
 3666 1456 1092 0000 		sts msgReq+13,__zero_reg__
 924:ServerLLDN.c  **** 					
 3667               		.loc 6 924 0
 3668 145a 1092 0000 		sts msgReq+15,__zero_reg__
 926:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3669               		.loc 6 926 0
 3670 145e 81E0      		ldi r24,lo8(1)
 3671 1460 8093 0000 		sts appState,r24
 927:ServerLLDN.c  **** 					break;
 3672               		.loc 6 927 0
 3673 1464 86E0      		ldi r24,lo8(6)
 3674 1466 8093 0000 		sts appPanState,r24
 928:ServerLLDN.c  **** 
 3675               		.loc 6 928 0
 3676 146a 00C0      		rjmp .L102
 3677               	.L110:
 934:ServerLLDN.c  **** 					msgReq.data = NULL;
 3678               		.loc 6 934 0
 3679 146c 80E4      		ldi r24,lo8(64)
 3680 146e 9AE0      		ldi r25,lo8(10)
 3681 1470 9093 0000 		sts msgReq+9+1,r25
 3682 1474 8093 0000 		sts msgReq+9,r24
 935:ServerLLDN.c  **** 					msgReq.size = 0;
 3683               		.loc 6 935 0
 3684 1478 1092 0000 		sts msgReq+13+1,__zero_reg__
 3685 147c 1092 0000 		sts msgReq+13,__zero_reg__
 936:ServerLLDN.c  **** 					
 3686               		.loc 6 936 0
 3687 1480 1092 0000 		sts msgReq+15,__zero_reg__
 938:ServerLLDN.c  **** 					
 3688               		.loc 6 938 0
 3689 1484 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3690 1488 1092 0000 		sts counter_delay_msg,__zero_reg__
 940:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3691               		.loc 6 940 0
 3692 148c 81E0      		ldi r24,lo8(1)
 3693 148e 8093 0000 		sts appState,r24
 941:ServerLLDN.c  **** 					
 3694               		.loc 6 941 0
 3695 1492 85E0      		ldi r24,lo8(5)
 3696 1494 8093 0000 		sts appPanState,r24
 943:ServerLLDN.c  **** 				}
 3697               		.loc 6 943 0
 3698 1498 00C0      		rjmp .L102
 3699               	.L109:
 947:ServerLLDN.c  **** 					{
 3700               		.loc 6 947 0
 3701 149a 8091 0000 		lds r24,conf_req_list
 3702 149e 9091 0000 		lds r25,conf_req_list+1
 3703 14a2 892B      		or r24,r25
 3704 14a4 01F0      		breq .L120
 949:ServerLLDN.c  **** 						{
 3705               		.loc 6 949 0
 3706 14a6 0E94 0000 		call CopyToConfigRequest
 3707 14aa 8823      		tst r24
 3708 14ac 01F0      		breq .L121
 951:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3709               		.loc 6 951 0
 3710 14ae 80E0      		ldi r24,0
 3711 14b0 90E8      		ldi r25,lo8(-128)
 3712 14b2 9093 0000 		sts msgReq+9+1,r25
 3713 14b6 8093 0000 		sts msgReq+9,r24
 952:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3714               		.loc 6 952 0
 3715 14ba 80E0      		ldi r24,lo8(config_request_frame)
 3716 14bc 90E0      		ldi r25,hi8(config_request_frame)
 3717 14be 9093 0000 		sts msgReq+13+1,r25
 3718 14c2 8093 0000 		sts msgReq+13,r24
 953:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3719               		.loc 6 953 0
 3720 14c6 86E0      		ldi r24,lo8(6)
 3721 14c8 8093 0000 		sts msgReq+15,r24
 954:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3722               		.loc 6 954 0
 3723 14cc 81E0      		ldi r24,lo8(1)
 3724 14ce 8093 0000 		sts appState,r24
 955:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 3725               		.loc 6 955 0
 3726 14d2 85E0      		ldi r24,lo8(5)
 3727 14d4 8093 0000 		sts appPanState,r24
 3728 14d8 00C0      		rjmp .L122
 3729               	.L121:
 961:ServerLLDN.c  **** 						}
 3730               		.loc 6 961 0
 3731 14da 1092 0000 		sts msgReq+9+1,__zero_reg__
 3732 14de 1092 0000 		sts msgReq+9,__zero_reg__
 3733               	.L122:
 963:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3734               		.loc 6 963 0
 3735 14e2 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3736 14e4 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3737 14e6 0E94 0000 		call macsc_set_cmp1_int_cb
 964:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3738               		.loc 6 964 0
 3739 14ea 81E0      		ldi r24,lo8(1)
 3740 14ec 0E94 0000 		call macsc_disable_cmp_int
 965:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3741               		.loc 6 965 0
 3742 14f0 0E94 0000 		call macsc_enable_manual_bts
 966:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3743               		.loc 6 966 0
 3744 14f4 81E0      		ldi r24,lo8(1)
 3745 14f6 0E94 0000 		call macsc_enable_cmp_int
 967:ServerLLDN.c  **** 						
 3746               		.loc 6 967 0
 3747 14fa 21E0      		ldi r18,lo8(1)
 3748 14fc 4BE4      		ldi r20,lo8(75)
 3749 14fe 50E0      		ldi r21,0
 3750 1500 60E0      		ldi r22,0
 3751 1502 70E0      		ldi r23,0
 3752 1504 81E0      		ldi r24,lo8(1)
 3753 1506 0E94 0000 		call macsc_use_cmp
 969:ServerLLDN.c  **** 					}
 3754               		.loc 6 969 0
 3755 150a 8091 0000 		lds r24,counter_associados
 3756 150e 9091 0000 		lds r25,counter_associados+1
 3757 1512 0196      		adiw r24,1
 3758 1514 9093 0000 		sts counter_associados+1,r25
 3759 1518 8093 0000 		sts counter_associados,r24
 987:ServerLLDN.c  **** 				}
 3760               		.loc 6 987 0
 3761 151c 00C0      		rjmp .L102
 3762               	.L120:
 973:ServerLLDN.c  **** 
 3763               		.loc 6 973 0
 3764 151e 1092 0000 		sts msgReq+9+1,__zero_reg__
 3765 1522 1092 0000 		sts msgReq+9,__zero_reg__
 975:ServerLLDN.c  **** 						{
 3766               		.loc 6 975 0
 3767 1526 8091 0000 		lds r24,counter_delay_msg
 3768 152a 9091 0000 		lds r25,counter_delay_msg+1
 3769 152e 1816      		cp __zero_reg__,r24
 3770 1530 1906      		cpc __zero_reg__,r25
 3771 1532 04F4      		brge .L124
 977:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3772               		.loc 6 977 0
 3773 1534 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 3774 1536 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 3775 1538 0E94 0000 		call macsc_set_cmp1_int_cb
 978:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3776               		.loc 6 978 0
 3777 153c 81E0      		ldi r24,lo8(1)
 3778 153e 0E94 0000 		call macsc_disable_cmp_int
 979:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3779               		.loc 6 979 0
 3780 1542 0E94 0000 		call macsc_enable_manual_bts
 980:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 3781               		.loc 6 980 0
 3782 1546 81E0      		ldi r24,lo8(1)
 3783 1548 0E94 0000 		call macsc_enable_cmp_int
 981:ServerLLDN.c  **** 						}
 3784               		.loc 6 981 0
 3785 154c C090 0000 		lds r12,beaconInterval_association
 3786 1550 D090 0000 		lds r13,beaconInterval_association+1
 3787 1554 E090 0000 		lds r14,beaconInterval_association+2
 3788 1558 F090 0000 		lds r15,beaconInterval_association+3
 3789 155c 2091 0000 		lds r18,counter_delay_msg
 3790 1560 3091 0000 		lds r19,counter_delay_msg+1
 3791 1564 4BE4      		ldi r20,lo8(75)
 3792 1566 429F      		mul r20,r18
 3793 1568 C001      		movw r24,r0
 3794 156a 439F      		mul r20,r19
 3795 156c 900D      		add r25,r0
 3796 156e 1124      		clr __zero_reg__
 3797 1570 092E      		mov __tmp_reg__,r25
 3798 1572 000C      		lsl r0
 3799 1574 AA0B      		sbc r26,r26
 3800 1576 BB0B      		sbc r27,r27
 3801 1578 BC01      		movw r22,r24
 3802 157a CD01      		movw r24,r26
 3803 157c 0E94 0000 		call __floatsisf
 3804 1580 DC01      		movw r26,r24
 3805 1582 CB01      		movw r24,r22
 3806 1584 9C01      		movw r18,r24
 3807 1586 AD01      		movw r20,r26
 3808 1588 C701      		movw r24,r14
 3809 158a B601      		movw r22,r12
 3810 158c 0E94 0000 		call __subsf3
 3811 1590 DC01      		movw r26,r24
 3812 1592 CB01      		movw r24,r22
 3813 1594 BC01      		movw r22,r24
 3814 1596 CD01      		movw r24,r26
 3815 1598 0E94 0000 		call __fixunssfsi
 3816 159c DC01      		movw r26,r24
 3817 159e CB01      		movw r24,r22
 3818 15a0 21E0      		ldi r18,lo8(1)
 3819 15a2 AC01      		movw r20,r24
 3820 15a4 BD01      		movw r22,r26
 3821 15a6 81E0      		ldi r24,lo8(1)
 3822 15a8 0E94 0000 		call macsc_use_cmp
 3823               	.L124:
 984:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 3824               		.loc 6 984 0
 3825 15ac 83E0      		ldi r24,lo8(3)
 3826 15ae 8093 0000 		sts appState,r24
 985:ServerLLDN.c  **** 					}
 3827               		.loc 6 985 0
 3828 15b2 87E0      		ldi r24,lo8(7)
 3829 15b4 8093 0000 		sts appPanState,r24
 987:ServerLLDN.c  **** 				}
 3830               		.loc 6 987 0
 3831 15b8 00C0      		rjmp .L102
 3832               	.L111:
 991:ServerLLDN.c  **** 					msgReq.data = NULL;
 3833               		.loc 6 991 0
 3834 15ba 80E4      		ldi r24,lo8(64)
 3835 15bc 92E1      		ldi r25,lo8(18)
 3836 15be 9093 0000 		sts msgReq+9+1,r25
 3837 15c2 8093 0000 		sts msgReq+9,r24
 992:ServerLLDN.c  **** 					msgReq.size = 0;
 3838               		.loc 6 992 0
 3839 15c6 1092 0000 		sts msgReq+13+1,__zero_reg__
 3840 15ca 1092 0000 		sts msgReq+13,__zero_reg__
 993:ServerLLDN.c  **** 					
 3841               		.loc 6 993 0
 3842 15ce 1092 0000 		sts msgReq+15,__zero_reg__
 995:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3843               		.loc 6 995 0
 3844 15d2 81E0      		ldi r24,lo8(1)
 3845 15d4 8093 0000 		sts appState,r24
 996:ServerLLDN.c  **** 					cycles_counter++;	
 3846               		.loc 6 996 0
 3847 15d8 81E0      		ldi r24,lo8(1)
 3848 15da 8093 0000 		sts appPanState,r24
 997:ServerLLDN.c  **** 					
 3849               		.loc 6 997 0
 3850 15de 8091 0000 		lds r24,cycles_counter
 3851 15e2 8F5F      		subi r24,lo8(-(1))
 3852 15e4 8093 0000 		sts cycles_counter,r24
 999:ServerLLDN.c  **** 				}
 3853               		.loc 6 999 0
 3854 15e8 00C0      		rjmp .L102
 3855               	.L112:
1004:ServerLLDN.c  **** 					{
 3856               		.loc 6 1004 0
 3857 15ea 8091 0000 		lds r24,cycles_counter
 3858 15ee 8823      		tst r24
 3859 15f0 01F0      		breq .L125
1006:ServerLLDN.c  **** 						
 3860               		.loc 6 1006 0
 3861 15f2 0E94 0000 		call appPanOnlineInit
1008:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3862               		.loc 6 1008 0
 3863 15f6 81E0      		ldi r24,lo8(1)
 3864 15f8 8093 0000 		sts appState,r24
1009:ServerLLDN.c  **** 						
 3865               		.loc 6 1009 0
 3866 15fc 8DE0      		ldi r24,lo8(13)
 3867 15fe 8093 0000 		sts appPanState,r24
1011:ServerLLDN.c  **** 					}
 3868               		.loc 6 1011 0
 3869 1602 8091 0000 		lds r24,cycles_counter
 3870 1606 8150      		subi r24,lo8(-(-1))
 3871 1608 8093 0000 		sts cycles_counter,r24
1041:ServerLLDN.c  **** 				}
 3872               		.loc 6 1041 0
 3873 160c 00C0      		rjmp .L133
 3874               	.L125:
 3875               	.LBB15:
1015:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3876               		.loc 6 1015 0
 3877 160e 81E0      		ldi r24,lo8(1)
 3878 1610 8093 0000 		sts appState,r24
1016:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3879               		.loc 6 1016 0
 3880 1614 8DE0      		ldi r24,lo8(13)
 3881 1616 8093 0000 		sts appPanState,r24
1017:ServerLLDN.c  **** 						
 3882               		.loc 6 1017 0
 3883 161a 81E0      		ldi r24,lo8(1)
 3884 161c 0E94 0000 		call macsc_disable_cmp_int
1019:ServerLLDN.c  **** 						int total_msg = 0;
 3885               		.loc 6 1019 0
 3886 1620 1F92      		push __zero_reg__
 3887 1622 84E1      		ldi r24,lo8(20)
 3888 1624 8F93      		push r24
 3889 1626 80E0      		ldi r24,lo8(.LC2)
 3890 1628 90E0      		ldi r25,hi8(.LC2)
 3891 162a 892F      		mov r24,r25
 3892 162c 8F93      		push r24
 3893 162e 80E0      		ldi r24,lo8(.LC2)
 3894 1630 90E0      		ldi r25,hi8(.LC2)
 3895 1632 8F93      		push r24
 3896 1634 0E94 0000 		call printf
 3897 1638 0F90      		pop __tmp_reg__
 3898 163a 0F90      		pop __tmp_reg__
 3899 163c 0F90      		pop __tmp_reg__
 3900 163e 0F90      		pop __tmp_reg__
1020:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
 3901               		.loc 6 1020 0
 3902 1640 1C82      		std Y+4,__zero_reg__
 3903 1642 1B82      		std Y+3,__zero_reg__
1021:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
 3904               		.loc 6 1021 0
 3905 1644 1D82      		std Y+5,__zero_reg__
 3906 1646 1E82      		std Y+6,__zero_reg__
 3907 1648 1F82      		std Y+7,__zero_reg__
 3908 164a 1886      		std Y+8,__zero_reg__
1022:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 3909               		.loc 6 1022 0
 3910 164c 8091 0000 		lds r24,assTimeSlot
 3911 1650 9091 0000 		lds r25,assTimeSlot+1
 3912 1654 092E      		mov __tmp_reg__,r25
 3913 1656 000C      		lsl r0
 3914 1658 AA0B      		sbc r26,r26
 3915 165a BB0B      		sbc r27,r27
 3916 165c BC01      		movw r22,r24
 3917 165e CD01      		movw r24,r26
 3918 1660 0E94 0000 		call __floatsisf
 3919 1664 DC01      		movw r26,r24
 3920 1666 CB01      		movw r24,r22
 3921 1668 20E0      		ldi r18,0
 3922 166a 30E0      		ldi r19,0
 3923 166c 40EA      		ldi r20,lo8(-96)
 3924 166e 51E4      		ldi r21,lo8(65)
 3925 1670 BC01      		movw r22,r24
 3926 1672 CD01      		movw r24,r26
 3927 1674 0E94 0000 		call __mulsf3
 3928 1678 DC01      		movw r26,r24
 3929 167a CB01      		movw r24,r22
 3930 167c 8D87      		std Y+13,r24
 3931 167e 9E87      		std Y+14,r25
 3932 1680 AF87      		std Y+15,r26
 3933 1682 B88B      		std Y+16,r27
 3934               	.LBB16:
1023:ServerLLDN.c  **** 						{
 3935               		.loc 6 1023 0
 3936 1684 1A86      		std Y+10,__zero_reg__
 3937 1686 1986      		std Y+9,__zero_reg__
 3938 1688 00C0      		rjmp .L127
 3939               	.L129:
1025:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3940               		.loc 6 1025 0 discriminator 4
 3941 168a 2985      		ldd r18,Y+9
 3942 168c 3A85      		ldd r19,Y+10
 3943 168e 4AE4      		ldi r20,lo8(74)
 3944 1690 429F      		mul r20,r18
 3945 1692 C001      		movw r24,r0
 3946 1694 439F      		mul r20,r19
 3947 1696 900D      		add r25,r0
 3948 1698 1124      		clr __zero_reg__
 3949 169a 8050      		subi r24,lo8(-(nodes_info_arr+1))
 3950 169c 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 3951 169e FC01      		movw r30,r24
 3952 16a0 8081      		ld r24,Z
 3953 16a2 9181      		ldd r25,Z+1
 3954 16a4 292F      		mov r18,r25
 3955 16a6 2F93      		push r18
 3956 16a8 8F93      		push r24
 3957 16aa 80E0      		ldi r24,lo8(.LC3)
 3958 16ac 90E0      		ldi r25,hi8(.LC3)
 3959 16ae 892F      		mov r24,r25
 3960 16b0 8F93      		push r24
 3961 16b2 80E0      		ldi r24,lo8(.LC3)
 3962 16b4 90E0      		ldi r25,hi8(.LC3)
 3963 16b6 8F93      		push r24
 3964 16b8 0E94 0000 		call printf
 3965 16bc 0F90      		pop __tmp_reg__
 3966 16be 0F90      		pop __tmp_reg__
 3967 16c0 0F90      		pop __tmp_reg__
 3968 16c2 0F90      		pop __tmp_reg__
1026:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3969               		.loc 6 1026 0 discriminator 4
 3970 16c4 2985      		ldd r18,Y+9
 3971 16c6 3A85      		ldd r19,Y+10
 3972 16c8 4AE4      		ldi r20,lo8(74)
 3973 16ca 429F      		mul r20,r18
 3974 16cc C001      		movw r24,r0
 3975 16ce 439F      		mul r20,r19
 3976 16d0 900D      		add r25,r0
 3977 16d2 1124      		clr __zero_reg__
 3978 16d4 8050      		subi r24,lo8(-(nodes_info_arr+69))
 3979 16d6 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 3980 16d8 FC01      		movw r30,r24
 3981 16da 8081      		ld r24,Z
 3982 16dc 9181      		ldd r25,Z+1
 3983 16de CC01      		movw r24,r24
 3984 16e0 A0E0      		ldi r26,0
 3985 16e2 B0E0      		ldi r27,0
 3986 16e4 BC01      		movw r22,r24
 3987 16e6 CD01      		movw r24,r26
 3988 16e8 0E94 0000 		call __floatunsisf
 3989 16ec DC01      		movw r26,r24
 3990 16ee CB01      		movw r24,r22
 3991 16f0 20E0      		ldi r18,0
 3992 16f2 30E0      		ldi r19,0
 3993 16f4 40EA      		ldi r20,lo8(-96)
 3994 16f6 51E4      		ldi r21,lo8(65)
 3995 16f8 BC01      		movw r22,r24
 3996 16fa CD01      		movw r24,r26
 3997 16fc 0E94 0000 		call __divsf3
 3998 1700 DC01      		movw r26,r24
 3999 1702 CB01      		movw r24,r22
 4000 1704 9C01      		movw r18,r24
 4001 1706 AD01      		movw r20,r26
 4002 1708 60E0      		ldi r22,0
 4003 170a 70E0      		ldi r23,0
 4004 170c 80E8      		ldi r24,lo8(-128)
 4005 170e 9FE3      		ldi r25,lo8(63)
 4006 1710 0E94 0000 		call __subsf3
 4007 1714 DC01      		movw r26,r24
 4008 1716 CB01      		movw r24,r22
 4009 1718 2B2F      		mov r18,r27
 4010 171a 2F93      		push r18
 4011 171c 2A2F      		mov r18,r26
 4012 171e 2F93      		push r18
 4013 1720 292F      		mov r18,r25
 4014 1722 2F93      		push r18
 4015 1724 8F93      		push r24
 4016 1726 80E0      		ldi r24,lo8(.LC4)
 4017 1728 90E0      		ldi r25,hi8(.LC4)
 4018 172a 892F      		mov r24,r25
 4019 172c 8F93      		push r24
 4020 172e 80E0      		ldi r24,lo8(.LC4)
 4021 1730 90E0      		ldi r25,hi8(.LC4)
 4022 1732 8F93      		push r24
 4023 1734 0E94 0000 		call printf
 4024 1738 0F90      		pop __tmp_reg__
 4025 173a 0F90      		pop __tmp_reg__
 4026 173c 0F90      		pop __tmp_reg__
 4027 173e 0F90      		pop __tmp_reg__
 4028 1740 0F90      		pop __tmp_reg__
 4029 1742 0F90      		pop __tmp_reg__
1027:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
 4030               		.loc 6 1027 0 discriminator 4
 4031 1744 2985      		ldd r18,Y+9
 4032 1746 3A85      		ldd r19,Y+10
 4033 1748 4AE4      		ldi r20,lo8(74)
 4034 174a 429F      		mul r20,r18
 4035 174c C001      		movw r24,r0
 4036 174e 439F      		mul r20,r19
 4037 1750 900D      		add r25,r0
 4038 1752 1124      		clr __zero_reg__
 4039 1754 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4040 1756 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4041 1758 FC01      		movw r30,r24
 4042 175a 8081      		ld r24,Z
 4043 175c 9181      		ldd r25,Z+1
 4044 175e CC01      		movw r24,r24
 4045 1760 A0E0      		ldi r26,0
 4046 1762 B0E0      		ldi r27,0
 4047 1764 BC01      		movw r22,r24
 4048 1766 CD01      		movw r24,r26
 4049 1768 0E94 0000 		call __floatunsisf
 4050 176c DC01      		movw r26,r24
 4051 176e CB01      		movw r24,r22
 4052 1770 20E0      		ldi r18,0
 4053 1772 30E0      		ldi r19,0
 4054 1774 40EA      		ldi r20,lo8(-96)
 4055 1776 51E4      		ldi r21,lo8(65)
 4056 1778 BC01      		movw r22,r24
 4057 177a CD01      		movw r24,r26
 4058 177c 0E94 0000 		call __divsf3
 4059 1780 DC01      		movw r26,r24
 4060 1782 CB01      		movw r24,r22
 4061 1784 2B2F      		mov r18,r27
 4062 1786 2F93      		push r18
 4063 1788 2A2F      		mov r18,r26
 4064 178a 2F93      		push r18
 4065 178c 292F      		mov r18,r25
 4066 178e 2F93      		push r18
 4067 1790 8F93      		push r24
 4068 1792 80E0      		ldi r24,lo8(.LC5)
 4069 1794 90E0      		ldi r25,hi8(.LC5)
 4070 1796 892F      		mov r24,r25
 4071 1798 8F93      		push r24
 4072 179a 80E0      		ldi r24,lo8(.LC5)
 4073 179c 90E0      		ldi r25,hi8(.LC5)
 4074 179e 8F93      		push r24
 4075 17a0 0E94 0000 		call printf
 4076 17a4 0F90      		pop __tmp_reg__
 4077 17a6 0F90      		pop __tmp_reg__
 4078 17a8 0F90      		pop __tmp_reg__
 4079 17aa 0F90      		pop __tmp_reg__
 4080 17ac 0F90      		pop __tmp_reg__
 4081 17ae 0F90      		pop __tmp_reg__
1028:ServerLLDN.c  **** 							
 4082               		.loc 6 1028 0 discriminator 4
 4083 17b0 2985      		ldd r18,Y+9
 4084 17b2 3A85      		ldd r19,Y+10
 4085 17b4 4AE4      		ldi r20,lo8(74)
 4086 17b6 429F      		mul r20,r18
 4087 17b8 C001      		movw r24,r0
 4088 17ba 439F      		mul r20,r19
 4089 17bc 900D      		add r25,r0
 4090 17be 1124      		clr __zero_reg__
 4091 17c0 8050      		subi r24,lo8(-(nodes_info_arr+5))
 4092 17c2 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 4093 17c4 FC01      		movw r30,r24
 4094 17c6 8081      		ld r24,Z
 4095 17c8 9181      		ldd r25,Z+1
 4096 17ca A281      		ldd r26,Z+2
 4097 17cc B381      		ldd r27,Z+3
 4098 17ce 2B2F      		mov r18,r27
 4099 17d0 2F93      		push r18
 4100 17d2 2A2F      		mov r18,r26
 4101 17d4 2F93      		push r18
 4102 17d6 292F      		mov r18,r25
 4103 17d8 2F93      		push r18
 4104 17da 8F93      		push r24
 4105 17dc 80E0      		ldi r24,lo8(.LC6)
 4106 17de 90E0      		ldi r25,hi8(.LC6)
 4107 17e0 892F      		mov r24,r25
 4108 17e2 8F93      		push r24
 4109 17e4 80E0      		ldi r24,lo8(.LC6)
 4110 17e6 90E0      		ldi r25,hi8(.LC6)
 4111 17e8 8F93      		push r24
 4112 17ea 0E94 0000 		call printf
 4113 17ee 0F90      		pop __tmp_reg__
 4114 17f0 0F90      		pop __tmp_reg__
 4115 17f2 0F90      		pop __tmp_reg__
 4116 17f4 0F90      		pop __tmp_reg__
 4117 17f6 0F90      		pop __tmp_reg__
 4118 17f8 0F90      		pop __tmp_reg__
1030:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
 4119               		.loc 6 1030 0 discriminator 4
 4120 17fa 2985      		ldd r18,Y+9
 4121 17fc 3A85      		ldd r19,Y+10
 4122 17fe 4AE4      		ldi r20,lo8(74)
 4123 1800 429F      		mul r20,r18
 4124 1802 C001      		movw r24,r0
 4125 1804 439F      		mul r20,r19
 4126 1806 900D      		add r25,r0
 4127 1808 1124      		clr __zero_reg__
 4128 180a 8050      		subi r24,lo8(-(nodes_info_arr+69))
 4129 180c 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 4130 180e FC01      		movw r30,r24
 4131 1810 2081      		ld r18,Z
 4132 1812 3181      		ldd r19,Z+1
 4133 1814 8B81      		ldd r24,Y+3
 4134 1816 9C81      		ldd r25,Y+4
 4135 1818 820F      		add r24,r18
 4136 181a 931F      		adc r25,r19
 4137 181c 9C83      		std Y+4,r25
 4138 181e 8B83      		std Y+3,r24
1031:ServerLLDN.c  **** 						}
 4139               		.loc 6 1031 0 discriminator 4
 4140 1820 2985      		ldd r18,Y+9
 4141 1822 3A85      		ldd r19,Y+10
 4142 1824 4AE4      		ldi r20,lo8(74)
 4143 1826 429F      		mul r20,r18
 4144 1828 C001      		movw r24,r0
 4145 182a 439F      		mul r20,r19
 4146 182c 900D      		add r25,r0
 4147 182e 1124      		clr __zero_reg__
 4148 1830 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4149 1832 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4150 1834 FC01      		movw r30,r24
 4151 1836 8081      		ld r24,Z
 4152 1838 9181      		ldd r25,Z+1
 4153 183a CC01      		movw r24,r24
 4154 183c A0E0      		ldi r26,0
 4155 183e B0E0      		ldi r27,0
 4156 1840 BC01      		movw r22,r24
 4157 1842 CD01      		movw r24,r26
 4158 1844 0E94 0000 		call __floatunsisf
 4159 1848 DC01      		movw r26,r24
 4160 184a CB01      		movw r24,r22
 4161 184c 9C01      		movw r18,r24
 4162 184e AD01      		movw r20,r26
 4163 1850 6D81      		ldd r22,Y+5
 4164 1852 7E81      		ldd r23,Y+6
 4165 1854 8F81      		ldd r24,Y+7
 4166 1856 9885      		ldd r25,Y+8
 4167 1858 0E94 0000 		call __addsf3
 4168 185c DC01      		movw r26,r24
 4169 185e CB01      		movw r24,r22
 4170 1860 8D83      		std Y+5,r24
 4171 1862 9E83      		std Y+6,r25
 4172 1864 AF83      		std Y+7,r26
 4173 1866 B887      		std Y+8,r27
1023:ServerLLDN.c  **** 						{
 4174               		.loc 6 1023 0 discriminator 4
 4175 1868 8985      		ldd r24,Y+9
 4176 186a 9A85      		ldd r25,Y+10
 4177 186c 0196      		adiw r24,1
 4178 186e 9A87      		std Y+10,r25
 4179 1870 8987      		std Y+9,r24
 4180               	.L127:
1023:ServerLLDN.c  **** 						{
 4181               		.loc 6 1023 0 is_stmt 0 discriminator 1
 4182 1872 2985      		ldd r18,Y+9
 4183 1874 3A85      		ldd r19,Y+10
 4184 1876 4AE4      		ldi r20,lo8(74)
 4185 1878 429F      		mul r20,r18
 4186 187a C001      		movw r24,r0
 4187 187c 439F      		mul r20,r19
 4188 187e 900D      		add r25,r0
 4189 1880 1124      		clr __zero_reg__
 4190 1882 8050      		subi r24,lo8(-(nodes_info_arr+1))
 4191 1884 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 4192 1886 FC01      		movw r30,r24
 4193 1888 8081      		ld r24,Z
 4194 188a 9181      		ldd r25,Z+1
 4195 188c 892B      		or r24,r25
 4196 188e 01F0      		breq .L128
1023:ServerLLDN.c  **** 						{
 4197               		.loc 6 1023 0 discriminator 3
 4198 1890 2091 0000 		lds r18,assTimeSlot
 4199 1894 3091 0000 		lds r19,assTimeSlot+1
 4200 1898 8985      		ldd r24,Y+9
 4201 189a 9A85      		ldd r25,Y+10
 4202 189c 8217      		cp r24,r18
 4203 189e 9307      		cpc r25,r19
 4204 18a0 04F4      		brge .+2
 4205 18a2 00C0      		rjmp .L129
 4206               	.L128:
 4207               	.LBE16:
1033:ServerLLDN.c  **** 						{
 4208               		.loc 6 1033 0 is_stmt 1
 4209 18a4 8091 0000 		lds r24,assTimeSlot
 4210 18a8 9091 0000 		lds r25,assTimeSlot+1
 4211 18ac 1816      		cp __zero_reg__,r24
 4212 18ae 1906      		cpc __zero_reg__,r25
 4213 18b0 04F0      		brlt .+2
 4214 18b2 00C0      		rjmp .L133
1033:ServerLLDN.c  **** 						{
 4215               		.loc 6 1033 0 is_stmt 0 discriminator 1
 4216 18b4 8B81      		ldd r24,Y+3
 4217 18b6 9C81      		ldd r25,Y+4
 4218 18b8 1816      		cp __zero_reg__,r24
 4219 18ba 1906      		cpc __zero_reg__,r25
 4220 18bc 04F0      		brlt .+2
 4221 18be 00C0      		rjmp .L133
1035:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
 4222               		.loc 6 1035 0 is_stmt 1
 4223 18c0 8B81      		ldd r24,Y+3
 4224 18c2 9C81      		ldd r25,Y+4
 4225 18c4 092E      		mov __tmp_reg__,r25
 4226 18c6 000C      		lsl r0
 4227 18c8 AA0B      		sbc r26,r26
 4228 18ca BB0B      		sbc r27,r27
 4229 18cc BC01      		movw r22,r24
 4230 18ce CD01      		movw r24,r26
 4231 18d0 0E94 0000 		call __floatsisf
 4232 18d4 DC01      		movw r26,r24
 4233 18d6 CB01      		movw r24,r22
 4234 18d8 2D85      		ldd r18,Y+13
 4235 18da 3E85      		ldd r19,Y+14
 4236 18dc 4F85      		ldd r20,Y+15
 4237 18de 5889      		ldd r21,Y+16
 4238 18e0 BC01      		movw r22,r24
 4239 18e2 CD01      		movw r24,r26
 4240 18e4 0E94 0000 		call __divsf3
 4241 18e8 DC01      		movw r26,r24
 4242 18ea CB01      		movw r24,r22
 4243 18ec 9C01      		movw r18,r24
 4244 18ee AD01      		movw r20,r26
 4245 18f0 60E0      		ldi r22,0
 4246 18f2 70E0      		ldi r23,0
 4247 18f4 80E8      		ldi r24,lo8(-128)
 4248 18f6 9FE3      		ldi r25,lo8(63)
 4249 18f8 0E94 0000 		call __subsf3
 4250 18fc DC01      		movw r26,r24
 4251 18fe CB01      		movw r24,r22
 4252 1900 8093 0000 		sts PLR,r24
 4253 1904 9093 0000 		sts PLR+1,r25
 4254 1908 A093 0000 		sts PLR+2,r26
 4255 190c B093 0000 		sts PLR+3,r27
1036:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f, total_de_mensagens %d", PLR, PER, total_msg);
 4256               		.loc 6 1036 0
 4257 1910 2D85      		ldd r18,Y+13
 4258 1912 3E85      		ldd r19,Y+14
 4259 1914 4F85      		ldd r20,Y+15
 4260 1916 5889      		ldd r21,Y+16
 4261 1918 6D81      		ldd r22,Y+5
 4262 191a 7E81      		ldd r23,Y+6
 4263 191c 8F81      		ldd r24,Y+7
 4264 191e 9885      		ldd r25,Y+8
 4265 1920 0E94 0000 		call __divsf3
 4266 1924 DC01      		movw r26,r24
 4267 1926 CB01      		movw r24,r22
 4268 1928 8093 0000 		sts PER,r24
 4269 192c 9093 0000 		sts PER+1,r25
 4270 1930 A093 0000 		sts PER+2,r26
 4271 1934 B093 0000 		sts PER+3,r27
1037:ServerLLDN.c  **** 							
 4272               		.loc 6 1037 0
 4273 1938 2091 0000 		lds r18,PER
 4274 193c 3091 0000 		lds r19,PER+1
 4275 1940 4091 0000 		lds r20,PER+2
 4276 1944 5091 0000 		lds r21,PER+3
 4277 1948 8091 0000 		lds r24,PLR
 4278 194c 9091 0000 		lds r25,PLR+1
 4279 1950 A091 0000 		lds r26,PLR+2
 4280 1954 B091 0000 		lds r27,PLR+3
 4281 1958 6C81      		ldd r22,Y+4
 4282 195a 6F93      		push r22
 4283 195c 6B81      		ldd r22,Y+3
 4284 195e 6F93      		push r22
 4285 1960 652F      		mov r22,r21
 4286 1962 6F93      		push r22
 4287 1964 642F      		mov r22,r20
 4288 1966 6F93      		push r22
 4289 1968 632F      		mov r22,r19
 4290 196a 6F93      		push r22
 4291 196c 2F93      		push r18
 4292 196e 2B2F      		mov r18,r27
 4293 1970 2F93      		push r18
 4294 1972 2A2F      		mov r18,r26
 4295 1974 2F93      		push r18
 4296 1976 292F      		mov r18,r25
 4297 1978 2F93      		push r18
 4298 197a 8F93      		push r24
 4299 197c 80E0      		ldi r24,lo8(.LC7)
 4300 197e 90E0      		ldi r25,hi8(.LC7)
 4301 1980 892F      		mov r24,r25
 4302 1982 8F93      		push r24
 4303 1984 80E0      		ldi r24,lo8(.LC7)
 4304 1986 90E0      		ldi r25,hi8(.LC7)
 4305 1988 8F93      		push r24
 4306 198a 0E94 0000 		call printf
 4307 198e 8DB7      		in r24,__SP_L__
 4308 1990 9EB7      		in r25,__SP_H__
 4309 1992 0C96      		adiw r24,12
 4310 1994 0FB6      		in __tmp_reg__,__SREG__
 4311 1996 F894      		cli
 4312 1998 DEBF      		out __SP_H__,r29
 4313 199a 0FBE      		out __SREG__,__tmp_reg__
 4314 199c CDBF      		out __SP_L__,r28
 4315               	.LBE15:
1041:ServerLLDN.c  **** 				}
 4316               		.loc 6 1041 0
 4317 199e 00C0      		rjmp .L133
 4318               	.L113:
 4319               	.LBB17:
1045:ServerLLDN.c  **** 					{
 4320               		.loc 6 1045 0
 4321 19a0 1C86      		std Y+12,__zero_reg__
 4322 19a2 1B86      		std Y+11,__zero_reg__
 4323 19a4 00C0      		rjmp .L130
 4324               	.L131:
1047:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
 4325               		.loc 6 1047 0 discriminator 3
 4326 19a6 8B85      		ldd r24,Y+11
 4327 19a8 9C85      		ldd r25,Y+12
 4328 19aa 8050      		subi r24,lo8(-(ACKFrame+1))
 4329 19ac 9040      		sbci r25,hi8(-(ACKFrame+1))
 4330 19ae FC01      		movw r30,r24
 4331 19b0 1082      		st Z,__zero_reg__
1048:ServerLLDN.c  **** 					}
 4332               		.loc 6 1048 0 discriminator 3
 4333 19b2 8B85      		ldd r24,Y+11
 4334 19b4 9C85      		ldd r25,Y+12
 4335 19b6 8050      		subi r24,lo8(-(retransmit_ts_array))
 4336 19b8 9040      		sbci r25,hi8(-(retransmit_ts_array))
 4337 19ba FC01      		movw r30,r24
 4338 19bc 1082      		st Z,__zero_reg__
1045:ServerLLDN.c  **** 					{
 4339               		.loc 6 1045 0 discriminator 3
 4340 19be 8B85      		ldd r24,Y+11
 4341 19c0 9C85      		ldd r25,Y+12
 4342 19c2 0196      		adiw r24,1
 4343 19c4 9C87      		std Y+12,r25
 4344 19c6 8B87      		std Y+11,r24
 4345               	.L130:
1045:ServerLLDN.c  **** 					{
 4346               		.loc 6 1045 0 is_stmt 0 discriminator 1
 4347 19c8 8B85      		ldd r24,Y+11
 4348 19ca 9C85      		ldd r25,Y+12
 4349 19cc 8097      		sbiw r24,32
 4350 19ce 04F0      		brlt .L131
 4351               	.LBE17:
1050:ServerLLDN.c  **** 					ACKFrame_size = 0;
 4352               		.loc 6 1050 0 is_stmt 1
 4353 19d0 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 4354 19d4 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
1051:ServerLLDN.c  **** 					
 4355               		.loc 6 1051 0
 4356 19d8 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 4357 19dc 1092 0000 		sts ACKFrame_size,__zero_reg__
1053:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 4358               		.loc 6 1053 0
 4359 19e0 1092 0000 		sts msgReq+5+1,__zero_reg__
 4360 19e4 1092 0000 		sts msgReq+5,__zero_reg__
1054:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 4361               		.loc 6 1054 0
 4362 19e8 1092 0000 		sts msgReq+7,__zero_reg__
1055:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 4363               		.loc 6 1055 0
 4364 19ec 1092 0000 		sts msgReq+8,__zero_reg__
1056:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 4365               		.loc 6 1056 0
 4366 19f0 80E0      		ldi r24,0
 4367 19f2 90E4      		ldi r25,lo8(64)
 4368 19f4 9093 0000 		sts msgReq+9+1,r25
 4369 19f8 8093 0000 		sts msgReq+9,r24
1057:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 4370               		.loc 6 1057 0
 4371 19fc 80E0      		ldi r24,lo8(ACKFrame)
 4372 19fe 90E0      		ldi r25,hi8(ACKFrame)
 4373 1a00 9093 0000 		sts msgReq+13+1,r25
 4374 1a04 8093 0000 		sts msgReq+13,r24
1058:ServerLLDN.c  **** 
 4375               		.loc 6 1058 0
 4376 1a08 8091 0000 		lds r24,macLLDNRetransmitTS
 4377 1a0c 9091 0000 		lds r25,macLLDNRetransmitTS+1
 4378 1a10 8F5F      		subi r24,lo8(-(1))
 4379 1a12 8093 0000 		sts msgReq+15,r24
1060:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
 4380               		.loc 6 1060 0
 4381 1a16 81E0      		ldi r24,lo8(1)
 4382 1a18 8093 0000 		sts appState,r24
1061:ServerLLDN.c  **** 					break;
 4383               		.loc 6 1061 0
 4384 1a1c 8DE0      		ldi r24,lo8(13)
 4385 1a1e 8093 0000 		sts appPanState,r24
1062:ServerLLDN.c  **** 				}				
 4386               		.loc 6 1062 0
 4387 1a22 00C0      		rjmp .L102
 4388               	.L114:
1067:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 4389               		.loc 6 1067 0
 4390 1a24 1092 0000 		sts msgReq+9+1,__zero_reg__
 4391 1a28 1092 0000 		sts msgReq+9,__zero_reg__
1068:ServerLLDN.c  **** 					break;
 4392               		.loc 6 1068 0
 4393 1a2c 81E0      		ldi r24,lo8(1)
 4394 1a2e 8093 0000 		sts appState,r24
1069:ServerLLDN.c  **** 				}
 4395               		.loc 6 1069 0
 4396 1a32 00C0      		rjmp .L102
 4397               	.L133:
1041:ServerLLDN.c  **** 				}
 4398               		.loc 6 1041 0
 4399 1a34 0000      		nop
 4400               	.L102:
 4401               	.L132:
1072:ServerLLDN.c  **** 		}
 4402               		.loc 6 1072 0
 4403 1a36 0000      		nop
 4404               	.L101:
1148:ServerLLDN.c  **** 		}
1149:ServerLLDN.c  **** 	}
1150:ServerLLDN.c  **** }
 4405               		.loc 6 1150 0
 4406 1a38 0000      		nop
 4407               	/* epilogue start */
 4408 1a3a 6096      		adiw r28,16
 4409 1a3c 0FB6      		in __tmp_reg__,__SREG__
 4410 1a3e F894      		cli
 4411 1a40 DEBF      		out __SP_H__,r29
 4412 1a42 0FBE      		out __SREG__,__tmp_reg__
 4413 1a44 CDBF      		out __SP_L__,r28
 4414 1a46 DF91      		pop r29
 4415 1a48 CF91      		pop r28
 4416 1a4a FF90      		pop r15
 4417 1a4c EF90      		pop r14
 4418 1a4e DF90      		pop r13
 4419 1a50 CF90      		pop r12
 4420 1a52 0895      		ret
 4421               		.cfi_endproc
 4422               	.LFE149:
 4424               		.section	.rodata
 4425               	.LC0:
 4426 008a 00        		.byte	0
 4427 008b C2        		.byte	-62
 4428 008c 01        		.byte	1
 4429 008d 00        		.byte	0
 4430 008e 03        		.byte	3
 4431 008f 00        		.byte	0
 4432 0090 00        		.byte	0
 4433               		.text
 4434               	.global	main
 4436               	main:
 4437               	.LFB150:
1151:ServerLLDN.c  **** 
1152:ServerLLDN.c  **** 	/*****************************************************************************
1153:ServerLLDN.c  **** 	*****************************************************************************/
1154:ServerLLDN.c  **** 	int main(void)
1155:ServerLLDN.c  **** 	{
 4438               		.loc 6 1155 0
 4439               		.cfi_startproc
 4440 1a54 0F93      		push r16
 4441               	.LCFI129:
 4442               		.cfi_def_cfa_offset 3
 4443               		.cfi_offset 16, -2
 4444 1a56 1F93      		push r17
 4445               	.LCFI130:
 4446               		.cfi_def_cfa_offset 4
 4447               		.cfi_offset 17, -3
 4448 1a58 CF93      		push r28
 4449               	.LCFI131:
 4450               		.cfi_def_cfa_offset 5
 4451               		.cfi_offset 28, -4
 4452 1a5a DF93      		push r29
 4453               	.LCFI132:
 4454               		.cfi_def_cfa_offset 6
 4455               		.cfi_offset 29, -5
 4456 1a5c CDB7      		in r28,__SP_L__
 4457 1a5e DEB7      		in r29,__SP_H__
 4458               	.LCFI133:
 4459               		.cfi_def_cfa_register 28
 4460 1a60 2797      		sbiw r28,7
 4461               	.LCFI134:
 4462               		.cfi_def_cfa_offset 13
 4463 1a62 0FB6      		in __tmp_reg__,__SREG__
 4464 1a64 F894      		cli
 4465 1a66 DEBF      		out __SP_H__,r29
 4466 1a68 0FBE      		out __SREG__,__tmp_reg__
 4467 1a6a CDBF      		out __SP_L__,r28
 4468               	/* prologue: function */
 4469               	/* frame size = 7 */
 4470               	/* stack size = 11 */
 4471               	.L__stack_usage = 11
1156:ServerLLDN.c  **** 		sysclk_init();
 4472               		.loc 6 1156 0
 4473 1a6c 0E94 0000 		call sysclk_init
1157:ServerLLDN.c  **** 		board_init();
 4474               		.loc 6 1157 0
 4475 1a70 0E94 0000 		call board_init
1158:ServerLLDN.c  **** 
1159:ServerLLDN.c  **** 		SYS_Init();
 4476               		.loc 6 1159 0
 4477 1a74 0E94 0000 		call SYS_Init
1160:ServerLLDN.c  **** 		/* Disable CSMA/CA
1161:ServerLLDN.c  **** 		 * Disable auto ACK
1162:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
1163:ServerLLDN.c  **** 		 */
1164:ServerLLDN.c  **** 
1165:ServerLLDN.c  **** 		sm_init();
 4478               		.loc 6 1165 0
 4479 1a78 0E94 0000 		call sm_init
1166:ServerLLDN.c  **** 
1167:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
1168:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1169:ServerLLDN.c  **** 		irq_initialize_vectors();
1170:ServerLLDN.c  **** 	#endif
1171:ServerLLDN.c  **** 		cpu_irq_enable();
 4480               		.loc 6 1171 0
 4481               	/* #APP */
 4482               	 ;  1171 "ServerLLDN.c" 1
 4483 1a7c 7894      		sei
 4484               	 ;  0 "" 2
1172:ServerLLDN.c  **** 
1173:ServerLLDN.c  **** 	#if 1
1174:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1175:ServerLLDN.c  **** 		stdio_usb_init();
1176:ServerLLDN.c  **** 	#else
1177:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 4485               		.loc 6 1177 0
 4486               	/* #NOAPP */
 4487 1a7e 27E0      		ldi r18,lo8(7)
 4488 1a80 E0E0      		ldi r30,lo8(.LC0)
 4489 1a82 F0E0      		ldi r31,hi8(.LC0)
 4490 1a84 CE01      		movw r24,r28
 4491 1a86 0196      		adiw r24,1
 4492 1a88 DC01      		movw r26,r24
 4493               		0:
 4494 1a8a 0190      		ld r0,Z+
 4495 1a8c 0D92      		st X+,r0
 4496 1a8e 2A95      		dec r18
 4497 1a90 01F4      		brne 0b
1178:ServerLLDN.c  **** 		{
1179:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1180:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1181:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1182:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1183:ServerLLDN.c  **** 		};
1184:ServerLLDN.c  **** 
1185:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 4498               		.loc 6 1185 0
 4499 1a92 CE01      		movw r24,r28
 4500 1a94 0196      		adiw r24,1
 4501 1a96 BC01      		movw r22,r24
 4502 1a98 80EC      		ldi r24,lo8(-64)
 4503 1a9a 90E0      		ldi r25,0
 4504 1a9c 0E94 0000 		call stdio_serial_init
1186:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 4505               		.loc 6 1186 0
 4506 1aa0 80EC      		ldi r24,lo8(-64)
 4507 1aa2 90E0      		ldi r25,0
 4508 1aa4 0E94 0000 		call usart_double_baud_enable
1187:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 4509               		.loc 6 1187 0
 4510 1aa8 0E94 0000 		call sysclk_get_source_clock_hz
 4511 1aac DC01      		movw r26,r24
 4512 1aae CB01      		movw r24,r22
 4513 1ab0 8C01      		movw r16,r24
 4514 1ab2 9D01      		movw r18,r26
 4515 1ab4 40E0      		ldi r20,0
 4516 1ab6 52EC      		ldi r21,lo8(-62)
 4517 1ab8 61E0      		ldi r22,lo8(1)
 4518 1aba 70E0      		ldi r23,0
 4519 1abc 80EC      		ldi r24,lo8(-64)
 4520 1abe 90E0      		ldi r25,0
 4521 1ac0 0E94 0000 		call usart_set_baudrate_precalculated
 4522               	.L135:
1188:ServerLLDN.c  **** 
1189:ServerLLDN.c  **** 	#endif
1190:ServerLLDN.c  **** 	#endif
1191:ServerLLDN.c  **** 		for(;;)
1192:ServerLLDN.c  **** 		{
1193:ServerLLDN.c  **** 			SYS_TaskHandler();
 4523               		.loc 6 1193 0 discriminator 1
 4524 1ac4 0E94 0000 		call SYS_TaskHandler
1194:ServerLLDN.c  **** 			APP_TaskHandler();
 4525               		.loc 6 1194 0 discriminator 1
 4526 1ac8 0E94 0000 		call APP_TaskHandler
1195:ServerLLDN.c  **** 		}
 4527               		.loc 6 1195 0 discriminator 1
 4528 1acc 00C0      		rjmp .L135
 4529               		.cfi_endproc
 4530               	.LFE150:
 4532               	.Letext0:
 4533               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 4534               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 4535               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 4536               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 4537               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 4538               		.file 12 "lldn.h"
 4539               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 4540               		.file 14 "config/config.h"
 4541               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:91     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:103    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:115    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:126    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:175    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:270    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:314    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:365    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:436    .text:0000019e macsc_read32
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:519    .text:00000208 macsc_write_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:598    .text:00000270 macsc_read_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:641    .text:0000029a macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:694    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:699    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:704    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:709    .text:000002ce appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:753    .data.accepting_requests:00000000 accepting_requests
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:759    .bss.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:766    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:776    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000014 stack_conf_req
                            *COM*:00000021 ACKFrame
                            *COM*:00000021 ACKFrame_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:785    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:791    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:797    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:802    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:808    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:814    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:820    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:826    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:833    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:839    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:845    .bss.PLR:00000000 PLR
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:851    .bss.PER:00000000 PER
                            *COM*:00000020 retransmit_ts_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:858    .bss.retransmit_ts_array_counter:00000000 retransmit_ts_array_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:864    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:870    .bss.cmp_value_start_superframe:00000000 cmp_value_start_superframe
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:875    .data.msgReqGACK:00000000 msgReqGACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:886    .text:000002f2 tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:926    .text:00000312 lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:961    .text:0000032c downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1007   .text:00000362 end_of_association_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1043   .text:0000037e addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1178   .text:00000446 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1412   .text:000005e2 CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1509   .text:0000067a appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1633   .text:00000722 check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1738   .text:000007ac check_ack_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:1849   .text:00000836 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2319   .text:00000b76 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2371   .text:00000bbc appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2579   .text:00000d00 appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2777   .text:00000e82 end_of_superframe_Online
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2824   .text:00000eae send_gack
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:2947   .text:00000f64 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:3300   .text:0000123a appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:3393   .text:000012b0 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccFmfD8v.s:4436   .text:00001a54 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
NWK_DataReq
malloc
free
__floatsisf
__divsf3
__subsf3
__fixsfsi
__floatunsisf
__mulsf3
__addsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
macsc_set_cmp2_int_cb
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
printf
macsc_disable_cmp_int
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
