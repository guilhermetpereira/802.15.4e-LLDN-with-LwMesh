   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  14               	sysclk_get_main_hz:
  15               	.LFB67:
  16               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  17               		.loc 1 175 0
  18               		.cfi_startproc
  19 0000 CF93      		push r28
  20               	.LCFI0:
  21               		.cfi_def_cfa_offset 3
  22               		.cfi_offset 28, -2
  23 0002 DF93      		push r29
  24               	.LCFI1:
  25               		.cfi_def_cfa_offset 4
  26               		.cfi_offset 29, -3
  27 0004 CDB7      		in r28,__SP_L__
  28 0006 DEB7      		in r29,__SP_H__
  29               	.LCFI2:
  30               		.cfi_def_cfa_register 28
  31               	/* prologue: function */
  32               	/* frame size = 0 */
  33               	/* stack size = 2 */
  34               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  35               		.loc 1 185 0
  36 0008 80E0      		ldi r24,0
  37 000a 94E2      		ldi r25,lo8(36)
  38 000c A4EF      		ldi r26,lo8(-12)
  39 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  40               		.loc 1 195 0
  41 0010 BC01      		movw r22,r24
  42 0012 CD01      		movw r24,r26
  43               	/* epilogue start */
  44 0014 DF91      		pop r29
  45 0016 CF91      		pop r28
  46 0018 0895      		ret
  47               		.cfi_endproc
  48               	.LFE67:
  51               	sysclk_get_source_clock_hz:
  52               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  53               		.loc 1 206 0
  54               		.cfi_startproc
  55 001a CF93      		push r28
  56               	.LCFI3:
  57               		.cfi_def_cfa_offset 3
  58               		.cfi_offset 28, -2
  59 001c DF93      		push r29
  60               	.LCFI4:
  61               		.cfi_def_cfa_offset 4
  62               		.cfi_offset 29, -3
  63 001e CDB7      		in r28,__SP_L__
  64 0020 DEB7      		in r29,__SP_H__
  65               	.LCFI5:
  66               		.cfi_def_cfa_register 28
  67               	/* prologue: function */
  68               	/* frame size = 0 */
  69               	/* stack size = 2 */
  70               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  71               		.loc 1 213 0
  72 0022 0E94 0000 		call sysclk_get_main_hz
  73 0026 DC01      		movw r26,r24
  74 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  75               		.loc 1 284 0
  76 002a BC01      		movw r22,r24
  77 002c CD01      		movw r24,r26
  78               	/* epilogue start */
  79 002e DF91      		pop r29
  80 0030 CF91      		pop r28
  81 0032 0895      		ret
  82               		.cfi_endproc
  83               	.LFE68:
  85               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  88               	baudctrl_1mhz:
  89 0000 3300      		.word	51
  90 0002 1900      		.word	25
  91 0004 0C00      		.word	12
  92 0006 0600      		.word	6
  93 0008 0300      		.word	3
  94 000a 0200      		.word	2
  95 000c 0100      		.word	1
  96 000e FF00      		.word	255
  97               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 100               	baudctrl_8mhz:
 101 0000 A001      		.word	416
 102 0002 CF00      		.word	207
 103 0004 6700      		.word	103
 104 0006 3300      		.word	51
 105 0008 1900      		.word	25
 106 000a 0C00      		.word	12
 107 000c 0700      		.word	7
 108 000e 0800      		.word	8
 109               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 112               	baudctrl_16mhz:
 113 0000 4003      		.word	832
 114 0002 A001      		.word	416
 115 0004 CF00      		.word	207
 116 0006 6700      		.word	103
 117 0008 3300      		.word	51
 118 000a 1900      		.word	25
 119 000c 1000      		.word	16
 120 000e 1000      		.word	16
 121               		.text
 123               	usart_double_baud_enable:
 124               	.LFB101:
 125               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 126               		.loc 2 515 0
 127               		.cfi_startproc
 128 0034 CF93      		push r28
 129               	.LCFI6:
 130               		.cfi_def_cfa_offset 3
 131               		.cfi_offset 28, -2
 132 0036 DF93      		push r29
 133               	.LCFI7:
 134               		.cfi_def_cfa_offset 4
 135               		.cfi_offset 29, -3
 136 0038 00D0      		rcall .
 137               	.LCFI8:
 138               		.cfi_def_cfa_offset 6
 139 003a CDB7      		in r28,__SP_L__
 140 003c DEB7      		in r29,__SP_H__
 141               	.LCFI9:
 142               		.cfi_def_cfa_register 28
 143               	/* prologue: function */
 144               	/* frame size = 2 */
 145               	/* stack size = 4 */
 146               	.L__stack_usage = 4
 147 003e 9A83      		std Y+2,r25
 148 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 149               		.loc 2 516 0
 150 0042 8981      		ldd r24,Y+1
 151 0044 9A81      		ldd r25,Y+2
 152 0046 FC01      		movw r30,r24
 153 0048 8081      		ld r24,Z
 154 004a 282F      		mov r18,r24
 155 004c 2260      		ori r18,lo8(2)
 156 004e 8981      		ldd r24,Y+1
 157 0050 9A81      		ldd r25,Y+2
 158 0052 FC01      		movw r30,r24
 159 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 160               		.loc 2 517 0
 161 0056 0000      		nop
 162               	/* epilogue start */
 163 0058 0F90      		pop __tmp_reg__
 164 005a 0F90      		pop __tmp_reg__
 165 005c DF91      		pop r29
 166 005e CF91      		pop r28
 167 0060 0895      		ret
 168               		.cfi_endproc
 169               	.LFE101:
 172               	usart_serial_init:
 173               	.LFB104:
 174               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 175               		.loc 3 77 0
 176               		.cfi_startproc
 177 0062 CF93      		push r28
 178               	.LCFI10:
 179               		.cfi_def_cfa_offset 3
 180               		.cfi_offset 28, -2
 181 0064 DF93      		push r29
 182               	.LCFI11:
 183               		.cfi_def_cfa_offset 4
 184               		.cfi_offset 29, -3
 185 0066 CDB7      		in r28,__SP_L__
 186 0068 DEB7      		in r29,__SP_H__
 187               	.LCFI12:
 188               		.cfi_def_cfa_register 28
 189 006a 2B97      		sbiw r28,11
 190               	.LCFI13:
 191               		.cfi_def_cfa_offset 15
 192 006c 0FB6      		in __tmp_reg__,__SREG__
 193 006e F894      		cli
 194 0070 DEBF      		out __SP_H__,r29
 195 0072 0FBE      		out __SREG__,__tmp_reg__
 196 0074 CDBF      		out __SP_L__,r28
 197               	/* prologue: function */
 198               	/* frame size = 11 */
 199               	/* stack size = 13 */
 200               	.L__stack_usage = 13
 201 0076 9987      		std Y+9,r25
 202 0078 8887      		std Y+8,r24
 203 007a 7B87      		std Y+11,r23
 204 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 205               		.loc 3 80 0
 206 007e 8A85      		ldd r24,Y+10
 207 0080 9B85      		ldd r25,Y+11
 208 0082 FC01      		movw r30,r24
 209 0084 8481      		ldd r24,Z+4
 210 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 211               		.loc 3 81 0
 212 0088 8A85      		ldd r24,Y+10
 213 008a 9B85      		ldd r25,Y+11
 214 008c FC01      		movw r30,r24
 215 008e 8581      		ldd r24,Z+5
 216 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 217               		.loc 3 82 0
 218 0092 8A85      		ldd r24,Y+10
 219 0094 9B85      		ldd r25,Y+11
 220 0096 FC01      		movw r30,r24
 221 0098 8681      		ldd r24,Z+6
 222 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 223               		.loc 3 83 0
 224 009c 8A85      		ldd r24,Y+10
 225 009e 9B85      		ldd r25,Y+11
 226 00a0 FC01      		movw r30,r24
 227 00a2 8081      		ld r24,Z
 228 00a4 9181      		ldd r25,Z+1
 229 00a6 A281      		ldd r26,Z+2
 230 00a8 B381      		ldd r27,Z+3
 231 00aa 8983      		std Y+1,r24
 232 00ac 9A83      		std Y+2,r25
 233 00ae AB83      		std Y+3,r26
 234 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 235               		.loc 3 85 0
 236 00b2 8885      		ldd r24,Y+8
 237 00b4 9985      		ldd r25,Y+9
 238 00b6 9E01      		movw r18,r28
 239 00b8 2F5F      		subi r18,-1
 240 00ba 3F4F      		sbci r19,-1
 241 00bc B901      		movw r22,r18
 242 00be 0E94 0000 		call usart_init_rs232
 243 00c2 8823      		tst r24
 244 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 245               		.loc 3 86 0
 246 00c6 81E0      		ldi r24,lo8(1)
 247 00c8 00C0      		rjmp .L9
 248               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 249               		.loc 3 88 0
 250 00ca 80E0      		ldi r24,0
 251               	.L9:
 252               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 253               		.loc 3 90 0 discriminator 1
 254 00cc 2B96      		adiw r28,11
 255 00ce 0FB6      		in __tmp_reg__,__SREG__
 256 00d0 F894      		cli
 257 00d2 DEBF      		out __SP_H__,r29
 258 00d4 0FBE      		out __SREG__,__tmp_reg__
 259 00d6 CDBF      		out __SP_L__,r28
 260 00d8 DF91      		pop r29
 261 00da CF91      		pop r28
 262 00dc 0895      		ret
 263               		.cfi_endproc
 264               	.LFE104:
 267               	usart_serial_putchar:
 268               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 269               		.loc 3 100 0
 270               		.cfi_startproc
 271 00de CF93      		push r28
 272               	.LCFI14:
 273               		.cfi_def_cfa_offset 3
 274               		.cfi_offset 28, -2
 275 00e0 DF93      		push r29
 276               	.LCFI15:
 277               		.cfi_def_cfa_offset 4
 278               		.cfi_offset 29, -3
 279 00e2 00D0      		rcall .
 280 00e4 1F92      		push __zero_reg__
 281               	.LCFI16:
 282               		.cfi_def_cfa_offset 7
 283 00e6 CDB7      		in r28,__SP_L__
 284 00e8 DEB7      		in r29,__SP_H__
 285               	.LCFI17:
 286               		.cfi_def_cfa_register 28
 287               	/* prologue: function */
 288               	/* frame size = 3 */
 289               	/* stack size = 5 */
 290               	.L__stack_usage = 5
 291 00ea 9A83      		std Y+2,r25
 292 00ec 8983      		std Y+1,r24
 293 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 294               		.loc 3 101 0
 295 00f0 8981      		ldd r24,Y+1
 296 00f2 9A81      		ldd r25,Y+2
 297 00f4 6B81      		ldd r22,Y+3
 298 00f6 0E94 0000 		call usart_putchar
 299               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 300               		.loc 3 102 0
 301 00fa 0F90      		pop __tmp_reg__
 302 00fc 0F90      		pop __tmp_reg__
 303 00fe 0F90      		pop __tmp_reg__
 304 0100 DF91      		pop r29
 305 0102 CF91      		pop r28
 306 0104 0895      		ret
 307               		.cfi_endproc
 308               	.LFE105:
 311               	usart_serial_getchar:
 312               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 313               		.loc 3 111 0
 314               		.cfi_startproc
 315 0106 CF93      		push r28
 316               	.LCFI18:
 317               		.cfi_def_cfa_offset 3
 318               		.cfi_offset 28, -2
 319 0108 DF93      		push r29
 320               	.LCFI19:
 321               		.cfi_def_cfa_offset 4
 322               		.cfi_offset 29, -3
 323 010a 00D0      		rcall .
 324 010c 00D0      		rcall .
 325               	.LCFI20:
 326               		.cfi_def_cfa_offset 8
 327 010e CDB7      		in r28,__SP_L__
 328 0110 DEB7      		in r29,__SP_H__
 329               	.LCFI21:
 330               		.cfi_def_cfa_register 28
 331               	/* prologue: function */
 332               	/* frame size = 4 */
 333               	/* stack size = 6 */
 334               	.L__stack_usage = 6
 335 0112 9A83      		std Y+2,r25
 336 0114 8983      		std Y+1,r24
 337 0116 7C83      		std Y+4,r23
 338 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 339               		.loc 3 112 0
 340 011a 8981      		ldd r24,Y+1
 341 011c 9A81      		ldd r25,Y+2
 342 011e 0E94 0000 		call usart_getchar
 343 0122 282F      		mov r18,r24
 344 0124 8B81      		ldd r24,Y+3
 345 0126 9C81      		ldd r25,Y+4
 346 0128 FC01      		movw r30,r24
 347 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 348               		.loc 3 113 0
 349 012c 0000      		nop
 350               	/* epilogue start */
 351 012e 0F90      		pop __tmp_reg__
 352 0130 0F90      		pop __tmp_reg__
 353 0132 0F90      		pop __tmp_reg__
 354 0134 0F90      		pop __tmp_reg__
 355 0136 DF91      		pop r29
 356 0138 CF91      		pop r28
 357 013a 0895      		ret
 358               		.cfi_endproc
 359               	.LFE106:
 362               	stdio_serial_init:
 363               	.LFB107:
 364               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 365               		.loc 4 90 0
 366               		.cfi_startproc
 367 013c CF93      		push r28
 368               	.LCFI22:
 369               		.cfi_def_cfa_offset 3
 370               		.cfi_offset 28, -2
 371 013e DF93      		push r29
 372               	.LCFI23:
 373               		.cfi_def_cfa_offset 4
 374               		.cfi_offset 29, -3
 375 0140 00D0      		rcall .
 376 0142 00D0      		rcall .
 377               	.LCFI24:
 378               		.cfi_def_cfa_offset 8
 379 0144 CDB7      		in r28,__SP_L__
 380 0146 DEB7      		in r29,__SP_H__
 381               	.LCFI25:
 382               		.cfi_def_cfa_register 28
 383               	/* prologue: function */
 384               	/* frame size = 4 */
 385               	/* stack size = 6 */
 386               	.L__stack_usage = 6
 387 0148 9A83      		std Y+2,r25
 388 014a 8983      		std Y+1,r24
 389 014c 7C83      		std Y+4,r23
 390 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 391               		.loc 4 91 0
 392 0150 8981      		ldd r24,Y+1
 393 0152 9A81      		ldd r25,Y+2
 394 0154 9093 0000 		sts stdio_base+1,r25
 395 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 396               		.loc 4 92 0
 397 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 398 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 399 0160 9093 0000 		sts ptr_put+1,r25
 400 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 401               		.loc 4 93 0
 402 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 403 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 404 016c 9093 0000 		sts ptr_get+1,r25
 405 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 406               		.loc 4 95 0
 407 0174 2B81      		ldd r18,Y+3
 408 0176 3C81      		ldd r19,Y+4
 409 0178 8981      		ldd r24,Y+1
 410 017a 9A81      		ldd r25,Y+2
 411 017c B901      		movw r22,r18
 412 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 413               		.loc 4 107 0
 414 0182 60E0      		ldi r22,lo8(gs(_read))
 415 0184 70E0      		ldi r23,hi8(gs(_read))
 416 0186 80E0      		ldi r24,lo8(gs(_write))
 417 0188 90E0      		ldi r25,hi8(gs(_write))
 418 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 419               		.loc 4 120 0
 420 018e 0000      		nop
 421               	/* epilogue start */
 422 0190 0F90      		pop __tmp_reg__
 423 0192 0F90      		pop __tmp_reg__
 424 0194 0F90      		pop __tmp_reg__
 425 0196 0F90      		pop __tmp_reg__
 426 0198 DF91      		pop r29
 427 019a CF91      		pop r28
 428 019c 0895      		ret
 429               		.cfi_endproc
 430               	.LFE107:
 433               	macsc_enable_manual_bts:
 434               	.LFB121:
 435               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 436               		.loc 5 444 0
 437               		.cfi_startproc
 438 019e CF93      		push r28
 439               	.LCFI26:
 440               		.cfi_def_cfa_offset 3
 441               		.cfi_offset 28, -2
 442 01a0 DF93      		push r29
 443               	.LCFI27:
 444               		.cfi_def_cfa_offset 4
 445               		.cfi_offset 29, -3
 446 01a2 CDB7      		in r28,__SP_L__
 447 01a4 DEB7      		in r29,__SP_H__
 448               	.LCFI28:
 449               		.cfi_def_cfa_register 28
 450               	/* prologue: function */
 451               	/* frame size = 0 */
 452               	/* stack size = 2 */
 453               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 454               		.loc 5 445 0
 455 01a6 8CED      		ldi r24,lo8(-36)
 456 01a8 90E0      		ldi r25,0
 457 01aa 2CED      		ldi r18,lo8(-36)
 458 01ac 30E0      		ldi r19,0
 459 01ae F901      		movw r30,r18
 460 01b0 2081      		ld r18,Z
 461 01b2 2064      		ori r18,lo8(64)
 462 01b4 FC01      		movw r30,r24
 463 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 464               		.loc 5 446 0
 465 01b8 8CED      		ldi r24,lo8(-36)
 466 01ba 90E0      		ldi r25,0
 467 01bc 2CED      		ldi r18,lo8(-36)
 468 01be 30E0      		ldi r19,0
 469 01c0 F901      		movw r30,r18
 470 01c2 2081      		ld r18,Z
 471 01c4 277F      		andi r18,lo8(-9)
 472 01c6 FC01      		movw r30,r24
 473 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 474               		.loc 5 447 0
 475 01ca 0000      		nop
 476               	/* epilogue start */
 477 01cc DF91      		pop r29
 478 01ce CF91      		pop r28
 479 01d0 0895      		ret
 480               		.cfi_endproc
 481               	.LFE121:
 483               	.global	appState
 484               		.section	.bss.appState,"aw",@nobits
 487               	appState:
 488 0000 00        		.zero	1
 489               		.section	.bss.msgReq,"aw",@nobits
 492               	msgReq:
 493 0000 0000 0000 		.zero	20
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 494               		.section	.bss.PanId,"aw",@nobits
 497               	PanId:
 498 0000 00        		.zero	1
 499               		.section	.rodata
 500               	.LC1:
 501 0000 0A4D 5347 		.string	"\nMSG REQ SENT %d"
 501      2052 4551 
 501      2053 454E 
 501      5420 2564 
 501      00
 502               		.text
 503               	.global	appSendData
 505               	appSendData:
 506               	.LFB130:
 507               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 1
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 508               		.loc 6 64 0
 509               		.cfi_startproc
 510 01d2 CF93      		push r28
 511               	.LCFI29:
 512               		.cfi_def_cfa_offset 3
 513               		.cfi_offset 28, -2
 514 01d4 DF93      		push r29
 515               	.LCFI30:
 516               		.cfi_def_cfa_offset 4
 517               		.cfi_offset 29, -3
 518 01d6 CDB7      		in r28,__SP_L__
 519 01d8 DEB7      		in r29,__SP_H__
 520               	.LCFI31:
 521               		.cfi_def_cfa_register 28
 522               	/* prologue: function */
 523               	/* frame size = 0 */
 524               	/* stack size = 2 */
 525               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 526               		.loc 6 65 0
 527 01da 8091 0000 		lds r24,msgReq+9
 528 01de 9091 0000 		lds r25,msgReq+9+1
 529 01e2 892B      		or r24,r25
 530 01e4 01F0      		breq .L17
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		printf("\nMSG REQ SENT %d",msgReq.options);
 531               		.loc 6 67 0
 532 01e6 8091 0000 		lds r24,msgReq+9
 533 01ea 9091 0000 		lds r25,msgReq+9+1
 534 01ee 292F      		mov r18,r25
 535 01f0 2F93      		push r18
 536 01f2 8F93      		push r24
 537 01f4 80E0      		ldi r24,lo8(.LC1)
 538 01f6 90E0      		ldi r25,hi8(.LC1)
 539 01f8 892F      		mov r24,r25
 540 01fa 8F93      		push r24
 541 01fc 80E0      		ldi r24,lo8(.LC1)
 542 01fe 90E0      		ldi r25,hi8(.LC1)
 543 0200 8F93      		push r24
 544 0202 0E94 0000 		call printf
 545 0206 0F90      		pop __tmp_reg__
 546 0208 0F90      		pop __tmp_reg__
 547 020a 0F90      		pop __tmp_reg__
 548 020c 0F90      		pop __tmp_reg__
  68:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 549               		.loc 6 68 0
 550 020e 80E0      		ldi r24,lo8(msgReq)
 551 0210 90E0      		ldi r25,hi8(msgReq)
 552 0212 0E94 0000 		call NWK_DataReq
 553               	.L17:
  69:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  70:ServerLLDN.c  **** 	#endif
  71:ServerLLDN.c  **** 	}
  72:ServerLLDN.c  **** }
 554               		.loc 6 72 0
 555 0216 0000      		nop
 556               	/* epilogue start */
 557 0218 DF91      		pop r29
 558 021a CF91      		pop r28
 559 021c 0895      		ret
 560               		.cfi_endproc
 561               	.LFE130:
 563               	.global	appPanState
 564               		.section	.data.appPanState,"aw",@progbits
 567               	appPanState:
 568 0000 01        		.byte	1
 569               		.comm	nodes_info_arr,1016,1
 570               		.comm	arr_slots,256,1
 571               	.global	config_request_frame
 572               		.section	.data.config_request_frame,"aw",@progbits
 575               	config_request_frame:
 576 0000 0F        		.byte	15
 577 0001 00        		.byte	0
 578 0002 0F        		.byte	15
 579 0003 0000      		.zero	2
 580 0005 80        		.byte	128
 581               	.global	conf_req_list
 582               		.section	.bss.conf_req_list,"aw",@nobits
 585               	conf_req_list:
 586 0000 0000      		.zero	2
 587               		.comm	conf_req_arr,508,1
 588               	.global	conf_req_index
 589               		.section	.bss.conf_req_index,"aw",@nobits
 592               	conf_req_index:
 593 0000 0000      		.zero	2
 594               	.global	counter_online
 595               		.section	.data.counter_online,"aw",@progbits
 598               	counter_online:
 599 0000 6400      		.word	100
 600               		.comm	ACKFrame,33,1
 601               	.global	ACKFrame_size
 602               		.section	.bss.ACKFrame_size,"aw",@nobits
 605               	ACKFrame_size:
 606 0000 0000      		.zero	2
 607               	.global	beaconInterval
 608               		.section	.bss.beaconInterval,"aw",@nobits
 611               	beaconInterval:
 612 0000 0000 0000 		.zero	4
 613               	.global	macLLDNnumUplinkTS
 614               		.section	.bss.macLLDNnumUplinkTS,"aw",@nobits
 617               	macLLDNnumUplinkTS:
 618 0000 0000      		.zero	2
 619               		.section	.bss.tmrDelay,"aw",@nobits
 622               	tmrDelay:
 623 0000 0000 0000 		.zero	13
 623      0000 0000 
 623      0000 0000 
 623      00
 624               	.global	assTimeSlot
 625               		.section	.bss.assTimeSlot,"aw",@nobits
 628               	assTimeSlot:
 629 0000 0000      		.zero	2
 630               	.global	timeslot_counter
 631               		.section	.bss.timeslot_counter,"aw",@nobits
 634               	timeslot_counter:
 635 0000 00        		.zero	1
 636               	.global	counter_associados
 637               		.section	.bss.counter_associados,"aw",@nobits
 640               	counter_associados:
 641 0000 0000      		.zero	2
 642               	.global	cycles_counter
 643               		.section	.data.cycles_counter,"aw",@progbits
 646               	cycles_counter:
 647 0000 01        		.byte	1
 648               		.text
 650               	tmrDelayHandler:
 651               	.LFB131:
  73:ServerLLDN.c  **** 
  74:ServerLLDN.c  **** #if APP_COORDINATOR
  75:ServerLLDN.c  **** 
  76:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  77:ServerLLDN.c  **** 	
  78:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  79:ServerLLDN.c  **** 	
  80:ServerLLDN.c  **** 	/* Configuration Request Frames */
  81:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  82:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[254]; // Array for Configure Request messages, one position per node, 
  83:ServerLLDN.c  **** 	uint8_t arr_slots[256];
  84:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  85:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  86:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  87:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  88:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  89:ServerLLDN.c  **** 	int conf_req_arr[254];
  90:ServerLLDN.c  **** 	int conf_req_index = 0;
  91:ServerLLDN.c  **** 	int counter_online = 100;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  94:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	// ACK Frame Payload used in Discovery State
  95:ServerLLDN.c  **** 	int ACKFrame_size = 0;
  96:ServerLLDN.c  **** 
  97:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
  98:ServerLLDN.c  **** 	
  99:ServerLLDN.c  **** 	int macLLDNnumUplinkTS = 0;		// Number of uplink timeslots, is also the control of associated node
 100:ServerLLDN.c  **** 	
 101:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
 102:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
 103:ServerLLDN.c  **** 	 */
 104:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 105:ServerLLDN.c  **** 	
 106:ServerLLDN.c  **** 	/*  Control variables for testing */	
 107:ServerLLDN.c  **** 	int assTimeSlot = 0;
 108:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 109:ServerLLDN.c  **** 
 110:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 111:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 112:ServerLLDN.c  **** 
 113:ServerLLDN.c  **** 	
 114:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 115:ServerLLDN.c  **** 	{
 652               		.loc 6 115 0
 653               		.cfi_startproc
 654 021e CF93      		push r28
 655               	.LCFI32:
 656               		.cfi_def_cfa_offset 3
 657               		.cfi_offset 28, -2
 658 0220 DF93      		push r29
 659               	.LCFI33:
 660               		.cfi_def_cfa_offset 4
 661               		.cfi_offset 29, -3
 662 0222 00D0      		rcall .
 663               	.LCFI34:
 664               		.cfi_def_cfa_offset 6
 665 0224 CDB7      		in r28,__SP_L__
 666 0226 DEB7      		in r29,__SP_H__
 667               	.LCFI35:
 668               		.cfi_def_cfa_register 28
 669               	/* prologue: function */
 670               	/* frame size = 2 */
 671               	/* stack size = 4 */
 672               	.L__stack_usage = 4
 673 0228 9A83      		std Y+2,r25
 674 022a 8983      		std Y+1,r24
 116:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 675               		.loc 6 116 0
 676 022c 82E0      		ldi r24,lo8(2)
 677 022e 8093 0000 		sts appState,r24
 117:ServerLLDN.c  **** 	}
 678               		.loc 6 117 0
 679 0232 0000      		nop
 680               	/* epilogue start */
 681 0234 0F90      		pop __tmp_reg__
 682 0236 0F90      		pop __tmp_reg__
 683 0238 DF91      		pop r29
 684 023a CF91      		pop r28
 685 023c 0895      		ret
 686               		.cfi_endproc
 687               	.LFE131:
 690               	lldn_server_beacon:
 691               	.LFB132:
 118:ServerLLDN.c  **** 	
 119:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 120:ServerLLDN.c  **** 	{
 692               		.loc 6 120 0
 693               		.cfi_startproc
 694 023e CF93      		push r28
 695               	.LCFI36:
 696               		.cfi_def_cfa_offset 3
 697               		.cfi_offset 28, -2
 698 0240 DF93      		push r29
 699               	.LCFI37:
 700               		.cfi_def_cfa_offset 4
 701               		.cfi_offset 29, -3
 702 0242 CDB7      		in r28,__SP_L__
 703 0244 DEB7      		in r29,__SP_H__
 704               	.LCFI38:
 705               		.cfi_def_cfa_register 28
 706               	/* prologue: function */
 707               	/* frame size = 0 */
 708               	/* stack size = 2 */
 709               	.L__stack_usage = 2
 121:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 710               		.loc 6 121 0
 711 0246 0E94 0000 		call macsc_enable_manual_bts
 122:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 712               		.loc 6 122 0
 713 024a 82E0      		ldi r24,lo8(2)
 714 024c 8093 0000 		sts appState,r24
 123:ServerLLDN.c  **** 	}
 715               		.loc 6 123 0
 716 0250 0000      		nop
 717               	/* epilogue start */
 718 0252 DF91      		pop r29
 719 0254 CF91      		pop r28
 720 0256 0895      		ret
 721               		.cfi_endproc
 722               	.LFE132:
 725               	time_slot_handler:
 726               	.LFB133:
 124:ServerLLDN.c  **** 	
 125:ServerLLDN.c  **** 	static void time_slot_handler(void)
 126:ServerLLDN.c  **** 	{
 727               		.loc 6 126 0
 728               		.cfi_startproc
 729 0258 CF93      		push r28
 730               	.LCFI39:
 731               		.cfi_def_cfa_offset 3
 732               		.cfi_offset 28, -2
 733 025a DF93      		push r29
 734               	.LCFI40:
 735               		.cfi_def_cfa_offset 4
 736               		.cfi_offset 29, -3
 737 025c CDB7      		in r28,__SP_L__
 738 025e DEB7      		in r29,__SP_H__
 739               	.LCFI41:
 740               		.cfi_def_cfa_register 28
 741               	/* prologue: function */
 742               	/* frame size = 0 */
 743               	/* stack size = 2 */
 744               	.L__stack_usage = 2
 127:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 745               		.loc 6 127 0
 746 0260 0E94 0000 		call macsc_enable_manual_bts
 128:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 747               		.loc 6 128 0
 748 0264 83E0      		ldi r24,lo8(3)
 749 0266 8093 0000 		sts appState,r24
 129:ServerLLDN.c  **** 	}
 750               		.loc 6 129 0
 751 026a 0000      		nop
 752               	/* epilogue start */
 753 026c DF91      		pop r29
 754 026e CF91      		pop r28
 755 0270 0895      		ret
 756               		.cfi_endproc
 757               	.LFE133:
 760               	downlink_delay_handler:
 761               	.LFB134:
 130:ServerLLDN.c  **** 	
 131:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 132:ServerLLDN.c  **** 	{
 762               		.loc 6 132 0
 763               		.cfi_startproc
 764 0272 CF93      		push r28
 765               	.LCFI42:
 766               		.cfi_def_cfa_offset 3
 767               		.cfi_offset 28, -2
 768 0274 DF93      		push r29
 769               	.LCFI43:
 770               		.cfi_def_cfa_offset 4
 771               		.cfi_offset 29, -3
 772 0276 CDB7      		in r28,__SP_L__
 773 0278 DEB7      		in r29,__SP_H__
 774               	.LCFI44:
 775               		.cfi_def_cfa_register 28
 776               	/* prologue: function */
 777               	/* frame size = 0 */
 778               	/* stack size = 2 */
 779               	.L__stack_usage = 2
 133:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_LLDN_ACK)
 780               		.loc 6 133 0
 781 027a 8091 0000 		lds r24,msgReq+9
 782 027e 9091 0000 		lds r25,msgReq+9+1
 783 0282 8115      		cp r24,__zero_reg__
 784 0284 9044      		sbci r25,64
 785 0286 01F4      		brne .L23
 134:ServerLLDN.c  **** 		{
 135:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 786               		.loc 6 135 0
 787 0288 82E0      		ldi r24,lo8(2)
 788 028a 8093 0000 		sts appState,r24
 789               	.L23:
 136:ServerLLDN.c  **** 		}
 137:ServerLLDN.c  **** 	}
 790               		.loc 6 137 0
 791 028e 0000      		nop
 792               	/* epilogue start */
 793 0290 DF91      		pop r29
 794 0292 CF91      		pop r28
 795 0294 0895      		ret
 796               		.cfi_endproc
 797               	.LFE134:
 800               	end_of_online_handler:
 801               	.LFB135:
 138:ServerLLDN.c  **** 
 139:ServerLLDN.c  **** 	static void end_of_online_handler(void)
 140:ServerLLDN.c  **** 	{
 802               		.loc 6 140 0
 803               		.cfi_startproc
 804 0296 CF93      		push r28
 805               	.LCFI45:
 806               		.cfi_def_cfa_offset 3
 807               		.cfi_offset 28, -2
 808 0298 DF93      		push r29
 809               	.LCFI46:
 810               		.cfi_def_cfa_offset 4
 811               		.cfi_offset 29, -3
 812 029a CDB7      		in r28,__SP_L__
 813 029c DEB7      		in r29,__SP_H__
 814               	.LCFI47:
 815               		.cfi_def_cfa_register 28
 816               	/* prologue: function */
 817               	/* frame size = 0 */
 818               	/* stack size = 2 */
 819               	.L__stack_usage = 2
 141:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 820               		.loc 6 141 0
 821 029e 83E0      		ldi r24,lo8(3)
 822 02a0 8093 0000 		sts appState,r24
 142:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_END_BE;
 823               		.loc 6 142 0
 824 02a4 8AE0      		ldi r24,lo8(10)
 825 02a6 8093 0000 		sts appPanState,r24
 143:ServerLLDN.c  **** 	}
 826               		.loc 6 143 0
 827 02aa 0000      		nop
 828               	/* epilogue start */
 829 02ac DF91      		pop r29
 830 02ae CF91      		pop r28
 831 02b0 0895      		ret
 832               		.cfi_endproc
 833               	.LFE135:
 835               		.section	.rodata
 836               	.LC2:
 837 0011 0A2A 2A2A 		.string	"\n***TIMESLOT****"
 837      5449 4D45 
 837      534C 4F54 
 837      2A2A 2A2A 
 837      00
 838               		.text
 840               	teste_handler:
 841               	.LFB136:
 144:ServerLLDN.c  **** 	
 145:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 146:ServerLLDN.c  **** 	static void teste_handler(void)
 147:ServerLLDN.c  **** 	{
 842               		.loc 6 147 0
 843               		.cfi_startproc
 844 02b2 CF93      		push r28
 845               	.LCFI48:
 846               		.cfi_def_cfa_offset 3
 847               		.cfi_offset 28, -2
 848 02b4 DF93      		push r29
 849               	.LCFI49:
 850               		.cfi_def_cfa_offset 4
 851               		.cfi_offset 29, -3
 852 02b6 CDB7      		in r28,__SP_L__
 853 02b8 DEB7      		in r29,__SP_H__
 854               	.LCFI50:
 855               		.cfi_def_cfa_register 28
 856               	/* prologue: function */
 857               	/* frame size = 0 */
 858               	/* stack size = 2 */
 859               	.L__stack_usage = 2
 148:ServerLLDN.c  **** 		if(msgReq.options)
 860               		.loc 6 148 0
 861 02ba 8091 0000 		lds r24,msgReq+9
 862 02be 9091 0000 		lds r25,msgReq+9+1
 863 02c2 892B      		or r24,r25
 864 02c4 01F0      		breq .L26
 149:ServerLLDN.c  **** 			printf("\n***TIMESLOT****");
 865               		.loc 6 149 0
 866 02c6 80E0      		ldi r24,lo8(.LC2)
 867 02c8 90E0      		ldi r25,hi8(.LC2)
 868 02ca 892F      		mov r24,r25
 869 02cc 8F93      		push r24
 870 02ce 80E0      		ldi r24,lo8(.LC2)
 871 02d0 90E0      		ldi r25,hi8(.LC2)
 872 02d2 8F93      		push r24
 873 02d4 0E94 0000 		call printf
 874 02d8 0F90      		pop __tmp_reg__
 875 02da 0F90      		pop __tmp_reg__
 876               	.L26:
 150:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 877               		.loc 6 150 0
 878 02dc 83E0      		ldi r24,lo8(3)
 879 02de 0E94 0000 		call macsc_disable_cmp_int
 151:ServerLLDN.c  **** 	}
 880               		.loc 6 151 0
 881 02e2 0000      		nop
 882               	/* epilogue start */
 883 02e4 DF91      		pop r29
 884 02e6 CF91      		pop r28
 885 02e8 0895      		ret
 886               		.cfi_endproc
 887               	.LFE136:
 889               		.section	.rodata
 890               	.LC3:
 891 0022 0A41 6464 		.string	"\nAddr rep %d"
 891      7220 7265 
 891      7020 2564 
 891      00
 892               		.text
 894               	addToAckArray:
 895               	.LFB137:
 152:ServerLLDN.c  **** 	#endif
 153:ServerLLDN.c  **** 	
 154:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 155:ServerLLDN.c  **** 	{	
 896               		.loc 6 155 0
 897               		.cfi_startproc
 898 02ea CF93      		push r28
 899               	.LCFI51:
 900               		.cfi_def_cfa_offset 3
 901               		.cfi_offset 28, -2
 902 02ec DF93      		push r29
 903               	.LCFI52:
 904               		.cfi_def_cfa_offset 4
 905               		.cfi_offset 29, -3
 906 02ee 00D0      		rcall .
 907 02f0 00D0      		rcall .
 908 02f2 1F92      		push __zero_reg__
 909               	.LCFI53:
 910               		.cfi_def_cfa_offset 9
 911 02f4 CDB7      		in r28,__SP_L__
 912 02f6 DEB7      		in r29,__SP_H__
 913               	.LCFI54:
 914               		.cfi_def_cfa_register 28
 915               	/* prologue: function */
 916               	/* frame size = 5 */
 917               	/* stack size = 7 */
 918               	.L__stack_usage = 7
 919 02f8 8D83      		std Y+5,r24
 156:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 920               		.loc 6 156 0
 921 02fa 8D81      		ldd r24,Y+5
 922 02fc 8695      		lsr r24
 923 02fe 8695      		lsr r24
 924 0300 8695      		lsr r24
 925 0302 882F      		mov r24,r24
 926 0304 90E0      		ldi r25,0
 927 0306 9A83      		std Y+2,r25
 928 0308 8983      		std Y+1,r24
 157:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 929               		.loc 6 157 0
 930 030a 8D81      		ldd r24,Y+5
 931 030c 882F      		mov r24,r24
 932 030e 90E0      		ldi r25,0
 933 0310 8770      		andi r24,7
 934 0312 9927      		clr r25
 935 0314 28E0      		ldi r18,lo8(8)
 936 0316 30E0      		ldi r19,0
 937 0318 A901      		movw r20,r18
 938 031a 481B      		sub r20,r24
 939 031c 590B      		sbc r21,r25
 940 031e CA01      		movw r24,r20
 941 0320 9C83      		std Y+4,r25
 942 0322 8B83      		std Y+3,r24
 158:ServerLLDN.c  **** 		
 159:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 943               		.loc 6 159 0
 944 0324 8981      		ldd r24,Y+1
 945 0326 9A81      		ldd r25,Y+2
 946 0328 8050      		subi r24,lo8(-(ACKFrame+1))
 947 032a 9040      		sbci r25,hi8(-(ACKFrame+1))
 948 032c FC01      		movw r30,r24
 949 032e 8081      		ld r24,Z
 950 0330 882F      		mov r24,r24
 951 0332 90E0      		ldi r25,0
 952 0334 0B80      		ldd r0,Y+3
 953 0336 00C0      		rjmp 2f
 954               		1:
 955 0338 9595      		asr r25
 956 033a 8795      		ror r24
 957               		2:
 958 033c 0A94      		dec r0
 959 033e 02F4      		brpl 1b
 960 0340 8170      		andi r24,1
 961 0342 9927      		clr r25
 962 0344 892B      		or r24,r25
 963 0346 01F0      		breq .L28
 160:ServerLLDN.c  **** 		{
 161:ServerLLDN.c  **** 			printf("\nAddr rep %d", addres);
 964               		.loc 6 161 0
 965 0348 8D81      		ldd r24,Y+5
 966 034a 882F      		mov r24,r24
 967 034c 90E0      		ldi r25,0
 968 034e 292F      		mov r18,r25
 969 0350 2F93      		push r18
 970 0352 8F93      		push r24
 971 0354 80E0      		ldi r24,lo8(.LC3)
 972 0356 90E0      		ldi r25,hi8(.LC3)
 973 0358 892F      		mov r24,r25
 974 035a 8F93      		push r24
 975 035c 80E0      		ldi r24,lo8(.LC3)
 976 035e 90E0      		ldi r25,hi8(.LC3)
 977 0360 8F93      		push r24
 978 0362 0E94 0000 		call printf
 979 0366 0F90      		pop __tmp_reg__
 980 0368 0F90      		pop __tmp_reg__
 981 036a 0F90      		pop __tmp_reg__
 982 036c 0F90      		pop __tmp_reg__
 162:ServerLLDN.c  **** 			return false;
 983               		.loc 6 162 0
 984 036e 80E0      		ldi r24,0
 985 0370 00C0      		rjmp .L29
 986               	.L28:
 163:ServerLLDN.c  **** 		}
 164:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] = 1 << bit_shift;
 987               		.loc 6 164 0
 988 0372 81E0      		ldi r24,lo8(1)
 989 0374 90E0      		ldi r25,0
 990 0376 0B80      		ldd r0,Y+3
 991 0378 00C0      		rjmp 2f
 992               		1:
 993 037a 880F      		lsl r24
 994 037c 991F      		rol r25
 995               		2:
 996 037e 0A94      		dec r0
 997 0380 02F4      		brpl 1b
 998 0382 282F      		mov r18,r24
 999 0384 8981      		ldd r24,Y+1
 1000 0386 9A81      		ldd r25,Y+2
 1001 0388 8050      		subi r24,lo8(-(ACKFrame+1))
 1002 038a 9040      		sbci r25,hi8(-(ACKFrame+1))
 1003 038c FC01      		movw r30,r24
 1004 038e 2083      		st Z,r18
 165:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 1005               		.loc 6 165 0
 1006 0390 8981      		ldd r24,Y+1
 1007 0392 9A81      		ldd r25,Y+2
 1008 0394 9C01      		movw r18,r24
 1009 0396 2F5F      		subi r18,-1
 1010 0398 3F4F      		sbci r19,-1
 1011 039a 8091 0000 		lds r24,ACKFrame_size
 1012 039e 9091 0000 		lds r25,ACKFrame_size+1
 1013 03a2 8217      		cp r24,r18
 1014 03a4 9307      		cpc r25,r19
 1015 03a6 04F4      		brge .L30
 166:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 1016               		.loc 6 166 0
 1017 03a8 8981      		ldd r24,Y+1
 1018 03aa 9A81      		ldd r25,Y+2
 1019 03ac 0196      		adiw r24,1
 1020 03ae 9093 0000 		sts ACKFrame_size+1,r25
 1021 03b2 8093 0000 		sts ACKFrame_size,r24
 1022               	.L30:
 167:ServerLLDN.c  **** 		
 168:ServerLLDN.c  **** 		return true;
 1023               		.loc 6 168 0
 1024 03b6 81E0      		ldi r24,lo8(1)
 1025               	.L29:
 1026               	/* epilogue start */
 169:ServerLLDN.c  **** 	}
 1027               		.loc 6 169 0
 1028 03b8 0F90      		pop __tmp_reg__
 1029 03ba 0F90      		pop __tmp_reg__
 1030 03bc 0F90      		pop __tmp_reg__
 1031 03be 0F90      		pop __tmp_reg__
 1032 03c0 0F90      		pop __tmp_reg__
 1033 03c2 DF91      		pop r29
 1034 03c4 CF91      		pop r28
 1035 03c6 0895      		ret
 1036               		.cfi_endproc
 1037               	.LFE137:
 1040               	addConfRequestArray:
 1041               	.LFB138:
 170:ServerLLDN.c  **** 
 171:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 172:ServerLLDN.c  **** 	{
 1042               		.loc 6 172 0
 1043               		.cfi_startproc
 1044 03c8 CF93      		push r28
 1045               	.LCFI55:
 1046               		.cfi_def_cfa_offset 3
 1047               		.cfi_offset 28, -2
 1048 03ca DF93      		push r29
 1049               	.LCFI56:
 1050               		.cfi_def_cfa_offset 4
 1051               		.cfi_offset 29, -3
 1052 03cc 00D0      		rcall .
 1053 03ce 1F92      		push __zero_reg__
 1054               	.LCFI57:
 1055               		.cfi_def_cfa_offset 7
 1056 03d0 CDB7      		in r28,__SP_L__
 1057 03d2 DEB7      		in r29,__SP_H__
 1058               	.LCFI58:
 1059               		.cfi_def_cfa_register 28
 1060               	/* prologue: function */
 1061               	/* frame size = 3 */
 1062               	/* stack size = 5 */
 1063               	.L__stack_usage = 5
 1064 03d4 9B83      		std Y+3,r25
 1065 03d6 8A83      		std Y+2,r24
 173:ServerLLDN.c  **** 		//printf("conf_req_index : %d", conf_req_index);
 174:ServerLLDN.c  **** 		conf_req_index++;
 1066               		.loc 6 174 0
 1067 03d8 8091 0000 		lds r24,conf_req_index
 1068 03dc 9091 0000 		lds r25,conf_req_index+1
 1069 03e0 0196      		adiw r24,1
 1070 03e2 9093 0000 		sts conf_req_index+1,r25
 1071 03e6 8093 0000 		sts conf_req_index,r24
 175:ServerLLDN.c  **** 		
 176:ServerLLDN.c  **** 		uint8_t i;
 177:ServerLLDN.c  **** 		for (i= 0;i < 256 && arr_slots[i] == 1; i++);
 1072               		.loc 6 177 0
 1073 03ea 1982      		std Y+1,__zero_reg__
 1074 03ec 00C0      		rjmp .L32
 1075               	.L33:
 1076               		.loc 6 177 0 is_stmt 0 discriminator 3
 1077 03ee 8981      		ldd r24,Y+1
 1078 03f0 8F5F      		subi r24,lo8(-(1))
 1079 03f2 8983      		std Y+1,r24
 1080               	.L32:
 1081               		.loc 6 177 0 discriminator 1
 1082 03f4 8981      		ldd r24,Y+1
 1083 03f6 882F      		mov r24,r24
 1084 03f8 90E0      		ldi r25,0
 1085 03fa 8050      		subi r24,lo8(-(arr_slots))
 1086 03fc 9040      		sbci r25,hi8(-(arr_slots))
 1087 03fe FC01      		movw r30,r24
 1088 0400 8081      		ld r24,Z
 1089 0402 8130      		cpi r24,lo8(1)
 1090 0404 01F0      		breq .L33
 178:ServerLLDN.c  **** 		arr_slots[i] = 1;
 1091               		.loc 6 178 0 is_stmt 1
 1092 0406 8981      		ldd r24,Y+1
 1093 0408 882F      		mov r24,r24
 1094 040a 90E0      		ldi r25,0
 1095 040c 8050      		subi r24,lo8(-(arr_slots))
 1096 040e 9040      		sbci r25,hi8(-(arr_slots))
 1097 0410 21E0      		ldi r18,lo8(1)
 1098 0412 FC01      		movw r30,r24
 1099 0414 2083      		st Z,r18
 179:ServerLLDN.c  **** 		assTimeSlot++;
 1100               		.loc 6 179 0
 1101 0416 8091 0000 		lds r24,assTimeSlot
 1102 041a 9091 0000 		lds r25,assTimeSlot+1
 1103 041e 0196      		adiw r24,1
 1104 0420 9093 0000 		sts assTimeSlot+1,r25
 1105 0424 8093 0000 		sts assTimeSlot,r24
 180:ServerLLDN.c  **** 	
 181:ServerLLDN.c  **** 	
 182:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1106               		.loc 6 182 0
 1107 0428 8A81      		ldd r24,Y+2
 1108 042a 9B81      		ldd r25,Y+3
 1109 042c FC01      		movw r30,r24
 1110 042e 8481      		ldd r24,Z+4
 1111 0430 8F77      		andi r24,lo8(127)
 1112 0432 282F      		mov r18,r24
 1113 0434 30E0      		ldi r19,0
 1114 0436 8091 0000 		lds r24,config_request_frame+5
 1115 043a 8F77      		andi r24,lo8(127)
 1116 043c 882F      		mov r24,r24
 1117 043e 90E0      		ldi r25,0
 1118 0440 8217      		cp r24,r18
 1119 0442 9307      		cpc r25,r19
 1120 0444 04F4      		brge .L34
 183:ServerLLDN.c  **** 		config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1121               		.loc 6 183 0
 1122 0446 8A81      		ldd r24,Y+2
 1123 0448 9B81      		ldd r25,Y+3
 1124 044a FC01      		movw r30,r24
 1125 044c 8481      		ldd r24,Z+4
 1126 044e 8F77      		andi r24,lo8(127)
 1127 0450 8F77      		andi r24,lo8(127)
 1128 0452 9091 0000 		lds r25,config_request_frame+5
 1129 0456 9078      		andi r25,lo8(-128)
 1130 0458 892B      		or r24,r25
 1131 045a 8093 0000 		sts config_request_frame+5,r24
 1132               	.L34:
 184:ServerLLDN.c  **** 		
 185:ServerLLDN.c  **** 		// tem que atualizar o tamanho final
 186:ServerLLDN.c  **** 		nodes_info_arr[conf_req_index].req_timeslot_duration = node->ts_dir.tsDuration;
 1133               		.loc 6 186 0
 1134 045e 8091 0000 		lds r24,conf_req_index
 1135 0462 9091 0000 		lds r25,conf_req_index+1
 1136 0466 2A81      		ldd r18,Y+2
 1137 0468 3B81      		ldd r19,Y+3
 1138 046a F901      		movw r30,r18
 1139 046c 2481      		ldd r18,Z+4
 1140 046e 2F77      		andi r18,lo8(127)
 1141 0470 880F      		lsl r24
 1142 0472 991F      		rol r25
 1143 0474 880F      		lsl r24
 1144 0476 991F      		rol r25
 1145 0478 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1146 047a 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1147 047c FC01      		movw r30,r24
 1148 047e 2083      		st Z,r18
 187:ServerLLDN.c  **** 		nodes_info_arr[conf_req_index].mac_addr = node->macAddr;
 1149               		.loc 6 187 0
 1150 0480 8091 0000 		lds r24,conf_req_index
 1151 0484 9091 0000 		lds r25,conf_req_index+1
 1152 0488 2A81      		ldd r18,Y+2
 1153 048a 3B81      		ldd r19,Y+3
 1154 048c F901      		movw r30,r18
 1155 048e 2381      		ldd r18,Z+3
 1156 0490 222F      		mov r18,r18
 1157 0492 30E0      		ldi r19,0
 1158 0494 880F      		lsl r24
 1159 0496 991F      		rol r25
 1160 0498 880F      		lsl r24
 1161 049a 991F      		rol r25
 1162 049c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1163 049e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1164 04a0 FC01      		movw r30,r24
 1165 04a2 3183      		std Z+1,r19
 1166 04a4 2083      		st Z,r18
 188:ServerLLDN.c  **** 		nodes_info_arr[conf_req_index].assigned_time_slot = (uint8_t)i;
 1167               		.loc 6 188 0
 1168 04a6 8091 0000 		lds r24,conf_req_index
 1169 04aa 9091 0000 		lds r25,conf_req_index+1
 1170 04ae 880F      		lsl r24
 1171 04b0 991F      		rol r25
 1172 04b2 880F      		lsl r24
 1173 04b4 991F      		rol r25
 1174 04b6 8050      		subi r24,lo8(-(nodes_info_arr))
 1175 04b8 9040      		sbci r25,hi8(-(nodes_info_arr))
 1176 04ba 2981      		ldd r18,Y+1
 1177 04bc FC01      		movw r30,r24
 1178 04be 2083      		st Z,r18
 189:ServerLLDN.c  **** 		
 190:ServerLLDN.c  **** 
 191:ServerLLDN.c  **** 	}
 1179               		.loc 6 191 0
 1180 04c0 0000      		nop
 1181               	/* epilogue start */
 1182 04c2 0F90      		pop __tmp_reg__
 1183 04c4 0F90      		pop __tmp_reg__
 1184 04c6 0F90      		pop __tmp_reg__
 1185 04c8 DF91      		pop r29
 1186 04ca CF91      		pop r28
 1187 04cc 0895      		ret
 1188               		.cfi_endproc
 1189               	.LFE138:
 1192               	CopyToConfigRequest:
 1193               	.LFB139:
 192:ServerLLDN.c  **** 
 193:ServerLLDN.c  **** 	static void CopyToConfigRequest(int i)
 194:ServerLLDN.c  **** 	{
 1194               		.loc 6 194 0
 1195               		.cfi_startproc
 1196 04ce CF93      		push r28
 1197               	.LCFI59:
 1198               		.cfi_def_cfa_offset 3
 1199               		.cfi_offset 28, -2
 1200 04d0 DF93      		push r29
 1201               	.LCFI60:
 1202               		.cfi_def_cfa_offset 4
 1203               		.cfi_offset 29, -3
 1204 04d2 00D0      		rcall .
 1205               	.LCFI61:
 1206               		.cfi_def_cfa_offset 6
 1207 04d4 CDB7      		in r28,__SP_L__
 1208 04d6 DEB7      		in r29,__SP_H__
 1209               	.LCFI62:
 1210               		.cfi_def_cfa_register 28
 1211               	/* prologue: function */
 1212               	/* frame size = 2 */
 1213               	/* stack size = 4 */
 1214               	.L__stack_usage = 4
 1215 04d8 9A83      		std Y+2,r25
 1216 04da 8983      		std Y+1,r24
 195:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = nodes_info_arr[i].assigned_time_slot;
 1217               		.loc 6 195 0
 1218 04dc 8981      		ldd r24,Y+1
 1219 04de 9A81      		ldd r25,Y+2
 1220 04e0 880F      		lsl r24
 1221 04e2 991F      		rol r25
 1222 04e4 880F      		lsl r24
 1223 04e6 991F      		rol r25
 1224 04e8 8050      		subi r24,lo8(-(nodes_info_arr))
 1225 04ea 9040      		sbci r25,hi8(-(nodes_info_arr))
 1226 04ec FC01      		movw r30,r24
 1227 04ee 8081      		ld r24,Z
 1228 04f0 8093 0000 		sts config_request_frame+3,r24
 196:ServerLLDN.c  **** 		config_request_frame.macAddr = nodes_info_arr[i].mac_addr;
 1229               		.loc 6 196 0
 1230 04f4 8981      		ldd r24,Y+1
 1231 04f6 9A81      		ldd r25,Y+2
 1232 04f8 880F      		lsl r24
 1233 04fa 991F      		rol r25
 1234 04fc 880F      		lsl r24
 1235 04fe 991F      		rol r25
 1236 0500 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1237 0502 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1238 0504 FC01      		movw r30,r24
 1239 0506 8081      		ld r24,Z
 1240 0508 9181      		ldd r25,Z+1
 1241 050a 8093 0000 		sts config_request_frame+4,r24
 197:ServerLLDN.c  **** 	}
 1242               		.loc 6 197 0
 1243 050e 0000      		nop
 1244               	/* epilogue start */
 1245 0510 0F90      		pop __tmp_reg__
 1246 0512 0F90      		pop __tmp_reg__
 1247 0514 DF91      		pop r29
 1248 0516 CF91      		pop r28
 1249 0518 0895      		ret
 1250               		.cfi_endproc
 1251               	.LFE139:
 1253               		.section	.rodata
 1254               	.LC4:
 1255 002f 0A44 4953 		.string	"\nDISC %hhx"
 1255      4320 2568 
 1255      6878 00
 1256               	.LC5:
 1257 003a 0A43 4F4E 		.string	"\nCONF %d"
 1257      4620 2564 
 1257      00
 1258               		.text
 1260               	appCommandInd:
 1261               	.LFB140:
 198:ServerLLDN.c  **** 
 199:ServerLLDN.c  **** 
 200:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 201:ServerLLDN.c  **** 	{
 1262               		.loc 6 201 0
 1263               		.cfi_startproc
 1264 051a CF93      		push r28
 1265               	.LCFI63:
 1266               		.cfi_def_cfa_offset 3
 1267               		.cfi_offset 28, -2
 1268 051c DF93      		push r29
 1269               	.LCFI64:
 1270               		.cfi_def_cfa_offset 4
 1271               		.cfi_offset 29, -3
 1272 051e 00D0      		rcall .
 1273 0520 00D0      		rcall .
 1274 0522 00D0      		rcall .
 1275               	.LCFI65:
 1276               		.cfi_def_cfa_offset 10
 1277 0524 CDB7      		in r28,__SP_L__
 1278 0526 DEB7      		in r29,__SP_H__
 1279               	.LCFI66:
 1280               		.cfi_def_cfa_register 28
 1281               	/* prologue: function */
 1282               	/* frame size = 6 */
 1283               	/* stack size = 8 */
 1284               	.L__stack_usage = 8
 1285 0528 9E83      		std Y+6,r25
 1286 052a 8D83      		std Y+5,r24
 202:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1287               		.loc 6 202 0
 1288 052c 8D81      		ldd r24,Y+5
 1289 052e 9E81      		ldd r25,Y+6
 1290 0530 FC01      		movw r30,r24
 1291 0532 8085      		ldd r24,Z+8
 1292 0534 9185      		ldd r25,Z+9
 1293 0536 FC01      		movw r30,r24
 1294 0538 8081      		ld r24,Z
 1295 053a 8D30      		cpi r24,lo8(13)
 1296 053c 01F4      		brne .L37
 1297               	.LBB2:
 203:ServerLLDN.c  **** 		{
 204:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1298               		.loc 6 204 0
 1299 053e 8D81      		ldd r24,Y+5
 1300 0540 9E81      		ldd r25,Y+6
 1301 0542 FC01      		movw r30,r24
 1302 0544 8085      		ldd r24,Z+8
 1303 0546 9185      		ldd r25,Z+9
 1304 0548 9C83      		std Y+4,r25
 1305 054a 8B83      		std Y+3,r24
 205:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1306               		.loc 6 205 0
 1307 054c 8B81      		ldd r24,Y+3
 1308 054e 9C81      		ldd r25,Y+4
 1309 0550 FC01      		movw r30,r24
 1310 0552 8181      		ldd r24,Z+1
 1311 0554 0E94 0000 		call addToAckArray
 206:ServerLLDN.c  **** 					
 207:ServerLLDN.c  **** 			#if PRINT
 208:ServerLLDN.c  **** 			printf("\nDISC %hhx", msg->macAddr);	
 1312               		.loc 6 208 0
 1313 0558 8B81      		ldd r24,Y+3
 1314 055a 9C81      		ldd r25,Y+4
 1315 055c FC01      		movw r30,r24
 1316 055e 8181      		ldd r24,Z+1
 1317 0560 882F      		mov r24,r24
 1318 0562 90E0      		ldi r25,0
 1319 0564 292F      		mov r18,r25
 1320 0566 2F93      		push r18
 1321 0568 8F93      		push r24
 1322 056a 80E0      		ldi r24,lo8(.LC4)
 1323 056c 90E0      		ldi r25,hi8(.LC4)
 1324 056e 892F      		mov r24,r25
 1325 0570 8F93      		push r24
 1326 0572 80E0      		ldi r24,lo8(.LC4)
 1327 0574 90E0      		ldi r25,hi8(.LC4)
 1328 0576 8F93      		push r24
 1329 0578 0E94 0000 		call printf
 1330 057c 0F90      		pop __tmp_reg__
 1331 057e 0F90      		pop __tmp_reg__
 1332 0580 0F90      		pop __tmp_reg__
 1333 0582 0F90      		pop __tmp_reg__
 1334               	.LBE2:
 1335 0584 00C0      		rjmp .L38
 1336               	.L37:
 209:ServerLLDN.c  **** 			#endif
 210:ServerLLDN.c  **** 		}
 211:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1337               		.loc 6 211 0
 1338 0586 8D81      		ldd r24,Y+5
 1339 0588 9E81      		ldd r25,Y+6
 1340 058a FC01      		movw r30,r24
 1341 058c 8085      		ldd r24,Z+8
 1342 058e 9185      		ldd r25,Z+9
 1343 0590 FC01      		movw r30,r24
 1344 0592 8081      		ld r24,Z
 1345 0594 8E30      		cpi r24,lo8(14)
 1346 0596 01F4      		brne .L39
 1347               	.LBB3:
 212:ServerLLDN.c  **** 		{
 213:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1348               		.loc 6 213 0
 1349 0598 8D81      		ldd r24,Y+5
 1350 059a 9E81      		ldd r25,Y+6
 1351 059c FC01      		movw r30,r24
 1352 059e 8085      		ldd r24,Z+8
 1353 05a0 9185      		ldd r25,Z+9
 1354 05a2 9A83      		std Y+2,r25
 1355 05a4 8983      		std Y+1,r24
 214:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1356               		.loc 6 214 0
 1357 05a6 8981      		ldd r24,Y+1
 1358 05a8 9A81      		ldd r25,Y+2
 1359 05aa 0E94 0000 		call addConfRequestArray
 215:ServerLLDN.c  **** 			#if PRINT
 216:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 1360               		.loc 6 216 0
 1361 05ae 8981      		ldd r24,Y+1
 1362 05b0 9A81      		ldd r25,Y+2
 1363 05b2 FC01      		movw r30,r24
 1364 05b4 8381      		ldd r24,Z+3
 1365 05b6 882F      		mov r24,r24
 1366 05b8 90E0      		ldi r25,0
 1367 05ba 292F      		mov r18,r25
 1368 05bc 2F93      		push r18
 1369 05be 8F93      		push r24
 1370 05c0 80E0      		ldi r24,lo8(.LC5)
 1371 05c2 90E0      		ldi r25,hi8(.LC5)
 1372 05c4 892F      		mov r24,r25
 1373 05c6 8F93      		push r24
 1374 05c8 80E0      		ldi r24,lo8(.LC5)
 1375 05ca 90E0      		ldi r25,hi8(.LC5)
 1376 05cc 8F93      		push r24
 1377 05ce 0E94 0000 		call printf
 1378 05d2 0F90      		pop __tmp_reg__
 1379 05d4 0F90      		pop __tmp_reg__
 1380 05d6 0F90      		pop __tmp_reg__
 1381 05d8 0F90      		pop __tmp_reg__
 1382               	.LBE3:
 1383 05da 00C0      		rjmp .L38
 1384               	.L39:
 217:ServerLLDN.c  **** 			#endif
 218:ServerLLDN.c  **** 		}
 219:ServerLLDN.c  **** 		else return false;			
 1385               		.loc 6 219 0
 1386 05dc 80E0      		ldi r24,0
 1387 05de 00C0      		rjmp .L40
 1388               	.L38:
 220:ServerLLDN.c  **** 		return true;
 1389               		.loc 6 220 0
 1390 05e0 81E0      		ldi r24,lo8(1)
 1391               	.L40:
 1392               	/* epilogue start */
 221:ServerLLDN.c  **** 	}
 1393               		.loc 6 221 0
 1394 05e2 2696      		adiw r28,6
 1395 05e4 0FB6      		in __tmp_reg__,__SREG__
 1396 05e6 F894      		cli
 1397 05e8 DEBF      		out __SP_H__,r29
 1398 05ea 0FBE      		out __SREG__,__tmp_reg__
 1399 05ec CDBF      		out __SP_L__,r28
 1400 05ee DF91      		pop r29
 1401 05f0 CF91      		pop r28
 1402 05f2 0895      		ret
 1403               		.cfi_endproc
 1404               	.LFE140:
 1407               	appPanPrepareACK:
 1408               	.LFB141:
 222:ServerLLDN.c  **** 	
 223:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 224:ServerLLDN.c  **** 	{
 1409               		.loc 6 224 0
 1410               		.cfi_startproc
 1411 05f4 CF93      		push r28
 1412               	.LCFI67:
 1413               		.cfi_def_cfa_offset 3
 1414               		.cfi_offset 28, -2
 1415 05f6 DF93      		push r29
 1416               	.LCFI68:
 1417               		.cfi_def_cfa_offset 4
 1418               		.cfi_offset 29, -3
 1419 05f8 CDB7      		in r28,__SP_L__
 1420 05fa DEB7      		in r29,__SP_H__
 1421               	.LCFI69:
 1422               		.cfi_def_cfa_register 28
 1423               	/* prologue: function */
 1424               	/* frame size = 0 */
 1425               	/* stack size = 2 */
 1426               	.L__stack_usage = 2
 225:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1427               		.loc 6 225 0
 1428 05fc 1092 0000 		sts msgReq+5+1,__zero_reg__
 1429 0600 1092 0000 		sts msgReq+5,__zero_reg__
 226:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1430               		.loc 6 226 0
 1431 0604 1092 0000 		sts msgReq+7,__zero_reg__
 227:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1432               		.loc 6 227 0
 1433 0608 1092 0000 		sts msgReq+8,__zero_reg__
 228:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 1434               		.loc 6 228 0
 1435 060c 80E0      		ldi r24,0
 1436 060e 90E4      		ldi r25,lo8(64)
 1437 0610 9093 0000 		sts msgReq+9+1,r25
 1438 0614 8093 0000 		sts msgReq+9,r24
 229:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 1439               		.loc 6 229 0
 1440 0618 80E0      		ldi r24,lo8(ACKFrame)
 1441 061a 90E0      		ldi r25,hi8(ACKFrame)
 1442 061c 9093 0000 		sts msgReq+13+1,r25
 1443 0620 8093 0000 		sts msgReq+13,r24
 230:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 1444               		.loc 6 230 0
 1445 0624 8091 0000 		lds r24,ACKFrame_size
 1446 0628 9091 0000 		lds r25,ACKFrame_size+1
 1447 062c 8F5F      		subi r24,lo8(-(1))
 1448 062e 8093 0000 		sts msgReq+15,r24
 231:ServerLLDN.c  **** 
 232:ServerLLDN.c  **** 	}
 1449               		.loc 6 232 0
 1450 0632 0000      		nop
 1451               	/* epilogue start */
 1452 0634 DF91      		pop r29
 1453 0636 CF91      		pop r28
 1454 0638 0895      		ret
 1455               		.cfi_endproc
 1456               	.LFE141:
 1459               	appPanReset:
 1460               	.LFB142:
 233:ServerLLDN.c  **** 
 234:ServerLLDN.c  **** 	static void appPanReset(void)
 235:ServerLLDN.c  **** 	{
 1461               		.loc 6 235 0
 1462               		.cfi_startproc
 1463 063a CF93      		push r28
 1464               	.LCFI70:
 1465               		.cfi_def_cfa_offset 3
 1466               		.cfi_offset 28, -2
 1467 063c DF93      		push r29
 1468               	.LCFI71:
 1469               		.cfi_def_cfa_offset 4
 1470               		.cfi_offset 29, -3
 1471 063e 00D0      		rcall .
 1472 0640 00D0      		rcall .
 1473               	.LCFI72:
 1474               		.cfi_def_cfa_offset 8
 1475 0642 CDB7      		in r28,__SP_L__
 1476 0644 DEB7      		in r29,__SP_H__
 1477               	.LCFI73:
 1478               		.cfi_def_cfa_register 28
 1479               	/* prologue: function */
 1480               	/* frame size = 4 */
 1481               	/* stack size = 6 */
 1482               	.L__stack_usage = 6
 236:ServerLLDN.c  **** 		// prepare beacon reset message
 237:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1483               		.loc 6 237 0
 1484 0646 1092 0000 		sts msgReq+5+1,__zero_reg__
 1485 064a 1092 0000 		sts msgReq+5,__zero_reg__
 238:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1486               		.loc 6 238 0
 1487 064e 1092 0000 		sts msgReq+7,__zero_reg__
 239:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1488               		.loc 6 239 0
 1489 0652 1092 0000 		sts msgReq+8,__zero_reg__
 240:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 1490               		.loc 6 240 0
 1491 0656 80E4      		ldi r24,lo8(64)
 1492 0658 94E0      		ldi r25,lo8(4)
 1493 065a 9093 0000 		sts msgReq+9+1,r25
 1494 065e 8093 0000 		sts msgReq+9,r24
 241:ServerLLDN.c  **** 		msgReq.data			= NULL;
 1495               		.loc 6 241 0
 1496 0662 1092 0000 		sts msgReq+13+1,__zero_reg__
 1497 0666 1092 0000 		sts msgReq+13,__zero_reg__
 242:ServerLLDN.c  **** 		msgReq.size			= 0;
 1498               		.loc 6 242 0
 1499 066a 1092 0000 		sts msgReq+15,__zero_reg__
 1500               	.LBB4:
 243:ServerLLDN.c  **** 
 244:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1501               		.loc 6 244 0
 1502 066e 1A82      		std Y+2,__zero_reg__
 1503 0670 1982      		std Y+1,__zero_reg__
 1504 0672 00C0      		rjmp .L43
 1505               	.L44:
 245:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1506               		.loc 6 245 0 discriminator 3
 1507 0674 8981      		ldd r24,Y+1
 1508 0676 9A81      		ldd r25,Y+2
 1509 0678 8050      		subi r24,lo8(-(ACKFrame+1))
 1510 067a 9040      		sbci r25,hi8(-(ACKFrame+1))
 1511 067c FC01      		movw r30,r24
 1512 067e 1082      		st Z,__zero_reg__
 244:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1513               		.loc 6 244 0 discriminator 3
 1514 0680 8981      		ldd r24,Y+1
 1515 0682 9A81      		ldd r25,Y+2
 1516 0684 0196      		adiw r24,1
 1517 0686 9A83      		std Y+2,r25
 1518 0688 8983      		std Y+1,r24
 1519               	.L43:
 244:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1520               		.loc 6 244 0 is_stmt 0 discriminator 1
 1521 068a 8981      		ldd r24,Y+1
 1522 068c 9A81      		ldd r25,Y+2
 1523 068e 8097      		sbiw r24,32
 1524 0690 04F0      		brlt .L44
 1525               	.LBE4:
 1526               	.LBB5:
 246:ServerLLDN.c  **** 		for (int i = 0; i < 255; i++)
 1527               		.loc 6 246 0 is_stmt 1
 1528 0692 1C82      		std Y+4,__zero_reg__
 1529 0694 1B82      		std Y+3,__zero_reg__
 1530 0696 00C0      		rjmp .L45
 1531               	.L46:
 247:ServerLLDN.c  **** 		{
 248:ServerLLDN.c  **** 			arr_slots[i] = 0;
 1532               		.loc 6 248 0 discriminator 3
 1533 0698 8B81      		ldd r24,Y+3
 1534 069a 9C81      		ldd r25,Y+4
 1535 069c 8050      		subi r24,lo8(-(arr_slots))
 1536 069e 9040      		sbci r25,hi8(-(arr_slots))
 1537 06a0 FC01      		movw r30,r24
 1538 06a2 1082      		st Z,__zero_reg__
 249:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 1539               		.loc 6 249 0 discriminator 3
 1540 06a4 8B81      		ldd r24,Y+3
 1541 06a6 9C81      		ldd r25,Y+4
 1542 06a8 880F      		lsl r24
 1543 06aa 991F      		rol r25
 1544 06ac 880F      		lsl r24
 1545 06ae 991F      		rol r25
 1546 06b0 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1547 06b2 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1548 06b4 FC01      		movw r30,r24
 1549 06b6 1182      		std Z+1,__zero_reg__
 1550 06b8 1082      		st Z,__zero_reg__
 246:ServerLLDN.c  **** 		for (int i = 0; i < 255; i++)
 1551               		.loc 6 246 0 discriminator 3
 1552 06ba 8B81      		ldd r24,Y+3
 1553 06bc 9C81      		ldd r25,Y+4
 1554 06be 0196      		adiw r24,1
 1555 06c0 9C83      		std Y+4,r25
 1556 06c2 8B83      		std Y+3,r24
 1557               	.L45:
 246:ServerLLDN.c  **** 		for (int i = 0; i < 255; i++)
 1558               		.loc 6 246 0 is_stmt 0 discriminator 1
 1559 06c4 8B81      		ldd r24,Y+3
 1560 06c6 9C81      		ldd r25,Y+4
 1561 06c8 8F3F      		cpi r24,-1
 1562 06ca 9105      		cpc r25,__zero_reg__
 1563 06cc 04F0      		brlt .L46
 1564               	.LBE5:
 250:ServerLLDN.c  **** 		}
 251:ServerLLDN.c  **** 		assTimeSlot = MacLLDNMgmtTS * 2;	
 1565               		.loc 6 251 0 is_stmt 1
 1566 06ce 82E0      		ldi r24,lo8(2)
 1567 06d0 90E0      		ldi r25,0
 1568 06d2 9093 0000 		sts assTimeSlot+1,r25
 1569 06d6 8093 0000 		sts assTimeSlot,r24
 252:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1570               		.loc 6 252 0
 1571 06da 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1572 06de 1092 0000 		sts ACKFrame_size,__zero_reg__
 253:ServerLLDN.c  **** 		conf_req_index = 0;
 1573               		.loc 6 253 0
 1574 06e2 1092 0000 		sts conf_req_index+1,__zero_reg__
 1575 06e6 1092 0000 		sts conf_req_index,__zero_reg__
 254:ServerLLDN.c  **** 		counter_associados = 0;
 1576               		.loc 6 254 0
 1577 06ea 1092 0000 		sts counter_associados+1,__zero_reg__
 1578 06ee 1092 0000 		sts counter_associados,__zero_reg__
 255:ServerLLDN.c  **** 		n = 0;
 1579               		.loc 6 255 0
 1580 06f2 1092 0000 		sts n,__zero_reg__
 256:ServerLLDN.c  **** 	}
 1581               		.loc 6 256 0
 1582 06f6 0000      		nop
 1583               	/* epilogue start */
 1584 06f8 0F90      		pop __tmp_reg__
 1585 06fa 0F90      		pop __tmp_reg__
 1586 06fc 0F90      		pop __tmp_reg__
 1587 06fe 0F90      		pop __tmp_reg__
 1588 0700 DF91      		pop r29
 1589 0702 CF91      		pop r28
 1590 0704 0895      		ret
 1591               		.cfi_endproc
 1592               	.LFE142:
 1594               	.global	__floatsisf
 1595               	.global	__addsf3
 1596               	.global	__divsf3
 1597               	.global	__mulsf3
 1598               	.global	__fixunssfsi
 1600               	appPanDiscInit:
 1601               	.LFB143:
 257:ServerLLDN.c  **** 
 258:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 259:ServerLLDN.c  **** 	{	
 1602               		.loc 6 259 0
 1603               		.cfi_startproc
 1604 0706 CF93      		push r28
 1605               	.LCFI74:
 1606               		.cfi_def_cfa_offset 3
 1607               		.cfi_offset 28, -2
 1608 0708 DF93      		push r29
 1609               	.LCFI75:
 1610               		.cfi_def_cfa_offset 4
 1611               		.cfi_offset 29, -3
 1612 070a 00D0      		rcall .
 1613               	.LCFI76:
 1614               		.cfi_def_cfa_offset 6
 1615 070c CDB7      		in r28,__SP_L__
 1616 070e DEB7      		in r29,__SP_H__
 1617               	.LCFI77:
 1618               		.cfi_def_cfa_register 28
 1619               	/* prologue: function */
 1620               	/* frame size = 2 */
 1621               	/* stack size = 4 */
 1622               	.L__stack_usage = 4
 1623               	.LBB6:
 260:ServerLLDN.c  **** 		/* clear Ack array of previous discovery state */
 261:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1624               		.loc 6 261 0
 1625 0710 1A82      		std Y+2,__zero_reg__
 1626 0712 1982      		std Y+1,__zero_reg__
 1627 0714 00C0      		rjmp .L48
 1628               	.L49:
 262:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1629               		.loc 6 262 0 discriminator 3
 1630 0716 8981      		ldd r24,Y+1
 1631 0718 9A81      		ldd r25,Y+2
 1632 071a 8050      		subi r24,lo8(-(ACKFrame+1))
 1633 071c 9040      		sbci r25,hi8(-(ACKFrame+1))
 1634 071e FC01      		movw r30,r24
 1635 0720 1082      		st Z,__zero_reg__
 261:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1636               		.loc 6 261 0 discriminator 3
 1637 0722 8981      		ldd r24,Y+1
 1638 0724 9A81      		ldd r25,Y+2
 1639 0726 0196      		adiw r24,1
 1640 0728 9A83      		std Y+2,r25
 1641 072a 8983      		std Y+1,r24
 1642               	.L48:
 261:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1643               		.loc 6 261 0 is_stmt 0 discriminator 1
 1644 072c 8981      		ldd r24,Y+1
 1645 072e 9A81      		ldd r25,Y+2
 1646 0730 8097      		sbiw r24,32
 1647 0732 04F0      		brlt .L49
 1648               	.LBE6:
 263:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1649               		.loc 6 263 0 is_stmt 1
 1650 0734 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1651 0738 1092 0000 		sts ACKFrame_size,__zero_reg__
 264:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 265:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 1652               		.loc 6 265 0
 1653 073c 1092 0000 		sts msgReq+5+1,__zero_reg__
 1654 0740 1092 0000 		sts msgReq+5,__zero_reg__
 266:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1655               		.loc 6 266 0
 1656 0744 1092 0000 		sts msgReq+7,__zero_reg__
 267:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1657               		.loc 6 267 0
 1658 0748 1092 0000 		sts msgReq+8,__zero_reg__
 268:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 1659               		.loc 6 268 0
 1660 074c 80E4      		ldi r24,lo8(64)
 1661 074e 91E0      		ldi r25,lo8(1)
 1662 0750 9093 0000 		sts msgReq+9+1,r25
 1663 0754 8093 0000 		sts msgReq+9,r24
 269:ServerLLDN.c  **** 		msgReq.data					= NULL;
 1664               		.loc 6 269 0
 1665 0758 1092 0000 		sts msgReq+13+1,__zero_reg__
 1666 075c 1092 0000 		sts msgReq+13,__zero_reg__
 270:ServerLLDN.c  **** 		msgReq.size					= 0;
 1667               		.loc 6 270 0
 1668 0760 1092 0000 		sts msgReq+15,__zero_reg__
 271:ServerLLDN.c  **** 		
 272:ServerLLDN.c  **** 		
 273:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 274:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 1669               		.loc 6 274 0
 1670 0764 8091 0000 		lds r24,cycles_counter
 1671 0768 8823      		tst r24
 1672 076a 01F0      		breq .+2
 1673 076c 00C0      		rjmp .L51
 275:ServerLLDN.c  **** 		{
 276:ServerLLDN.c  **** 			
 277:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 278:ServerLLDN.c  **** 		n = 127; 
 1674               		.loc 6 278 0
 1675 076e 8FE7      		ldi r24,lo8(127)
 1676 0770 8093 0000 		sts n,r24
 279:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 1677               		.loc 6 279 0
 1678 0774 8091 0000 		lds r24,n
 1679 0778 882F      		mov r24,r24
 1680 077a 90E0      		ldi r25,0
 1681 077c 0396      		adiw r24,3
 1682 077e 880F      		lsl r24
 1683 0780 991F      		rol r25
 1684 0782 092E      		mov __tmp_reg__,r25
 1685 0784 000C      		lsl r0
 1686 0786 AA0B      		sbc r26,r26
 1687 0788 BB0B      		sbc r27,r27
 1688 078a BC01      		movw r22,r24
 1689 078c CD01      		movw r24,r26
 1690 078e 0E94 0000 		call __floatsisf
 1691 0792 DC01      		movw r26,r24
 1692 0794 CB01      		movw r24,r22
 1693 0796 20E0      		ldi r18,0
 1694 0798 30E0      		ldi r19,0
 1695 079a 40E4      		ldi r20,lo8(64)
 1696 079c 51E4      		ldi r21,lo8(65)
 1697 079e BC01      		movw r22,r24
 1698 07a0 CD01      		movw r24,r26
 1699 07a2 0E94 0000 		call __addsf3
 1700 07a6 DC01      		movw r26,r24
 1701 07a8 CB01      		movw r24,r22
 1702 07aa 20E0      		ldi r18,0
 1703 07ac 30E0      		ldi r19,0
 1704 07ae 40E2      		ldi r20,lo8(32)
 1705 07b0 52E4      		ldi r21,lo8(66)
 1706 07b2 BC01      		movw r22,r24
 1707 07b4 CD01      		movw r24,r26
 1708 07b6 0E94 0000 		call __addsf3
 1709 07ba DC01      		movw r26,r24
 1710 07bc CB01      		movw r24,r22
 1711 07be 20E0      		ldi r18,0
 1712 07c0 34E2      		ldi r19,lo8(36)
 1713 07c2 44E7      		ldi r20,lo8(116)
 1714 07c4 57E4      		ldi r21,lo8(71)
 1715 07c6 BC01      		movw r22,r24
 1716 07c8 CD01      		movw r24,r26
 1717 07ca 0E94 0000 		call __divsf3
 1718 07ce DC01      		movw r26,r24
 1719 07d0 CB01      		movw r24,r22
 1720 07d2 8093 0000 		sts tTS,r24
 1721 07d6 9093 0000 		sts tTS+1,r25
 1722 07da A093 0000 		sts tTS+2,r26
 1723 07de B093 0000 		sts tTS+3,r27
 280:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 281:ServerLLDN.c  **** 		
 282:ServerLLDN.c  **** 			beaconInterval = 2 * numBaseTimeSlotperMgmt * (tTS) / (SYMBOL_TIME);
 1724               		.loc 6 282 0
 1725 07e2 8091 0000 		lds r24,tTS
 1726 07e6 9091 0000 		lds r25,tTS+1
 1727 07ea A091 0000 		lds r26,tTS+2
 1728 07ee B091 0000 		lds r27,tTS+3
 1729 07f2 20E0      		ldi r18,0
 1730 07f4 30E0      		ldi r19,0
 1731 07f6 40E8      		ldi r20,lo8(-128)
 1732 07f8 50E4      		ldi r21,lo8(64)
 1733 07fa BC01      		movw r22,r24
 1734 07fc CD01      		movw r24,r26
 1735 07fe 0E94 0000 		call __mulsf3
 1736 0802 DC01      		movw r26,r24
 1737 0804 CB01      		movw r24,r22
 1738 0806 2DEB      		ldi r18,lo8(-67)
 1739 0808 37E3      		ldi r19,lo8(55)
 1740 080a 46E8      		ldi r20,lo8(-122)
 1741 080c 57E3      		ldi r21,lo8(55)
 1742 080e BC01      		movw r22,r24
 1743 0810 CD01      		movw r24,r26
 1744 0812 0E94 0000 		call __divsf3
 1745 0816 DC01      		movw r26,r24
 1746 0818 CB01      		movw r24,r22
 1747 081a 8093 0000 		sts beaconInterval,r24
 1748 081e 9093 0000 		sts beaconInterval+1,r25
 1749 0822 A093 0000 		sts beaconInterval+2,r26
 1750 0826 B093 0000 		sts beaconInterval+3,r27
 283:ServerLLDN.c  **** 			/*
 284:ServerLLDN.c  **** 			* Configure interrupts callback functions
 285:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 286:ServerLLDN.c  **** 			*/
 287:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 1751               		.loc 6 287 0
 1752 082a 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 1753 082c 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 1754 082e 0E94 0000 		call macsc_set_cmp1_int_cb
 288:ServerLLDN.c  **** 			/*
 289:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 290:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 291:ServerLLDN.c  **** 			*/
 292:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 1755               		.loc 6 292 0
 1756 0832 0E94 0000 		call macsc_enable_manual_bts
 293:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 1757               		.loc 6 293 0
 1758 0836 81E0      		ldi r24,lo8(1)
 1759 0838 0E94 0000 		call macsc_enable_cmp_int
 294:ServerLLDN.c  **** 
 295:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval , MACSC_CC1);
 1760               		.loc 6 295 0
 1761 083c 8091 0000 		lds r24,beaconInterval
 1762 0840 9091 0000 		lds r25,beaconInterval+1
 1763 0844 A091 0000 		lds r26,beaconInterval+2
 1764 0848 B091 0000 		lds r27,beaconInterval+3
 1765 084c BC01      		movw r22,r24
 1766 084e CD01      		movw r24,r26
 1767 0850 0E94 0000 		call __fixunssfsi
 1768 0854 DC01      		movw r26,r24
 1769 0856 CB01      		movw r24,r22
 1770 0858 21E0      		ldi r18,lo8(1)
 1771 085a AC01      		movw r20,r24
 1772 085c BD01      		movw r22,r26
 1773 085e 81E0      		ldi r24,lo8(1)
 1774 0860 0E94 0000 		call macsc_use_cmp
 296:ServerLLDN.c  **** 			
 297:ServerLLDN.c  **** 			/* Timer used in testing */
 298:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 299:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 1775               		.loc 6 299 0
 1776 0864 80E0      		ldi r24,lo8(gs(teste_handler))
 1777 0866 90E0      		ldi r25,hi8(gs(teste_handler))
 1778 0868 0E94 0000 		call macsc_set_cmp2_int_cb
 300:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 1779               		.loc 6 300 0
 1780 086c 82E0      		ldi r24,lo8(2)
 1781 086e 0E94 0000 		call macsc_enable_cmp_int
 301:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval / 2, MACSC_CC2);
 1782               		.loc 6 301 0
 1783 0872 8091 0000 		lds r24,beaconInterval
 1784 0876 9091 0000 		lds r25,beaconInterval+1
 1785 087a A091 0000 		lds r26,beaconInterval+2
 1786 087e B091 0000 		lds r27,beaconInterval+3
 1787 0882 20E0      		ldi r18,0
 1788 0884 30E0      		ldi r19,0
 1789 0886 40E0      		ldi r20,0
 1790 0888 50E4      		ldi r21,lo8(64)
 1791 088a BC01      		movw r22,r24
 1792 088c CD01      		movw r24,r26
 1793 088e 0E94 0000 		call __divsf3
 1794 0892 DC01      		movw r26,r24
 1795 0894 CB01      		movw r24,r22
 1796 0896 BC01      		movw r22,r24
 1797 0898 CD01      		movw r24,r26
 1798 089a 0E94 0000 		call __fixunssfsi
 1799 089e DC01      		movw r26,r24
 1800 08a0 CB01      		movw r24,r22
 1801 08a2 22E0      		ldi r18,lo8(2)
 1802 08a4 AC01      		movw r20,r24
 1803 08a6 BD01      		movw r22,r26
 1804 08a8 81E0      		ldi r24,lo8(1)
 1805 08aa 0E94 0000 		call macsc_use_cmp
 1806               	.L51:
 302:ServerLLDN.c  **** 			#endif
 303:ServerLLDN.c  **** 			
 304:ServerLLDN.c  **** 		#endif
 305:ServerLLDN.c  **** 		}
 306:ServerLLDN.c  **** 	}
 1807               		.loc 6 306 0
 1808 08ae 0000      		nop
 1809               	/* epilogue start */
 1810 08b0 0F90      		pop __tmp_reg__
 1811 08b2 0F90      		pop __tmp_reg__
 1812 08b4 DF91      		pop r29
 1813 08b6 CF91      		pop r28
 1814 08b8 0895      		ret
 1815               		.cfi_endproc
 1816               	.LFE143:
 1819               	appPanOnlineInit:
 1820               	.LFB144:
 307:ServerLLDN.c  **** 
 308:ServerLLDN.c  **** 	static void appPanOnlineInit()
 309:ServerLLDN.c  **** 	{
 1821               		.loc 6 309 0
 1822               		.cfi_startproc
 1823 08ba EF92      		push r14
 1824               	.LCFI78:
 1825               		.cfi_def_cfa_offset 3
 1826               		.cfi_offset 14, -2
 1827 08bc FF92      		push r15
 1828               	.LCFI79:
 1829               		.cfi_def_cfa_offset 4
 1830               		.cfi_offset 15, -3
 1831 08be 0F93      		push r16
 1832               	.LCFI80:
 1833               		.cfi_def_cfa_offset 5
 1834               		.cfi_offset 16, -4
 1835 08c0 1F93      		push r17
 1836               	.LCFI81:
 1837               		.cfi_def_cfa_offset 6
 1838               		.cfi_offset 17, -5
 1839 08c2 CF93      		push r28
 1840               	.LCFI82:
 1841               		.cfi_def_cfa_offset 7
 1842               		.cfi_offset 28, -6
 1843 08c4 DF93      		push r29
 1844               	.LCFI83:
 1845               		.cfi_def_cfa_offset 8
 1846               		.cfi_offset 29, -7
 1847 08c6 CDB7      		in r28,__SP_L__
 1848 08c8 DEB7      		in r29,__SP_H__
 1849               	.LCFI84:
 1850               		.cfi_def_cfa_register 28
 1851               	/* prologue: function */
 1852               	/* frame size = 0 */
 1853               	/* stack size = 6 */
 1854               	.L__stack_usage = 6
 310:ServerLLDN.c  **** 			timeslot_counter = 0;
 1855               		.loc 6 310 0
 1856 08ca 1092 0000 		sts timeslot_counter,__zero_reg__
 311:ServerLLDN.c  **** 			
 312:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ /*config_request_frame.conf.tsDuration */ 127.0 )*sm + macMinLIFSPeriod)
 1857               		.loc 6 312 0
 1858 08ce 8EEE      		ldi r24,lo8(-18)
 1859 08d0 93E9      		ldi r25,lo8(-109)
 1860 08d2 A3EA      		ldi r26,lo8(-93)
 1861 08d4 BBE3      		ldi r27,lo8(59)
 1862 08d6 8093 0000 		sts tTS,r24
 1863 08da 9093 0000 		sts tTS+1,r25
 1864 08de A093 0000 		sts tTS+2,r26
 1865 08e2 B093 0000 		sts tTS+3,r27
 313:ServerLLDN.c  **** 			
 314:ServerLLDN.c  **** 			// (number of time slots x mgmt time solts) x base timelosts
 315:ServerLLDN.c  **** 			beaconInterval = (assTimeSlot + MacLLDNMgmtTS*numBaseTimeSlotperMgmt) * tTS / (SYMBOL_TIME);
 1866               		.loc 6 315 0
 1867 08e6 8091 0000 		lds r24,assTimeSlot
 1868 08ea 9091 0000 		lds r25,assTimeSlot+1
 1869 08ee 0296      		adiw r24,2
 1870 08f0 092E      		mov __tmp_reg__,r25
 1871 08f2 000C      		lsl r0
 1872 08f4 AA0B      		sbc r26,r26
 1873 08f6 BB0B      		sbc r27,r27
 1874 08f8 BC01      		movw r22,r24
 1875 08fa CD01      		movw r24,r26
 1876 08fc 0E94 0000 		call __floatsisf
 1877 0900 7B01      		movw r14,r22
 1878 0902 8C01      		movw r16,r24
 1879 0904 8091 0000 		lds r24,tTS
 1880 0908 9091 0000 		lds r25,tTS+1
 1881 090c A091 0000 		lds r26,tTS+2
 1882 0910 B091 0000 		lds r27,tTS+3
 1883 0914 9C01      		movw r18,r24
 1884 0916 AD01      		movw r20,r26
 1885 0918 C801      		movw r24,r16
 1886 091a B701      		movw r22,r14
 1887 091c 0E94 0000 		call __mulsf3
 1888 0920 DC01      		movw r26,r24
 1889 0922 CB01      		movw r24,r22
 1890 0924 2DEB      		ldi r18,lo8(-67)
 1891 0926 37E3      		ldi r19,lo8(55)
 1892 0928 46E8      		ldi r20,lo8(-122)
 1893 092a 57E3      		ldi r21,lo8(55)
 1894 092c BC01      		movw r22,r24
 1895 092e CD01      		movw r24,r26
 1896 0930 0E94 0000 		call __divsf3
 1897 0934 DC01      		movw r26,r24
 1898 0936 CB01      		movw r24,r22
 1899 0938 8093 0000 		sts beaconInterval,r24
 1900 093c 9093 0000 		sts beaconInterval+1,r25
 1901 0940 A093 0000 		sts beaconInterval+2,r26
 1902 0944 B093 0000 		sts beaconInterval+3,r27
 316:ServerLLDN.c  **** 			
 317:ServerLLDN.c  **** 			// Configure Timers
 318:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(time_slot_handler);
 1903               		.loc 6 318 0
 1904 0948 80E0      		ldi r24,lo8(gs(time_slot_handler))
 1905 094a 90E0      		ldi r25,hi8(gs(time_slot_handler))
 1906 094c 0E94 0000 		call macsc_set_cmp1_int_cb
 319:ServerLLDN.c  **** 			
 320:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 1907               		.loc 6 320 0
 1908 0950 0E94 0000 		call macsc_enable_manual_bts
 321:ServerLLDN.c  **** 			
 322:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 1909               		.loc 6 322 0
 1910 0954 81E0      		ldi r24,lo8(1)
 1911 0956 0E94 0000 		call macsc_enable_cmp_int
 323:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 1912               		.loc 6 323 0
 1913 095a 8091 0000 		lds r24,tTS
 1914 095e 9091 0000 		lds r25,tTS+1
 1915 0962 A091 0000 		lds r26,tTS+2
 1916 0966 B091 0000 		lds r27,tTS+3
 1917 096a 2DEB      		ldi r18,lo8(-67)
 1918 096c 37E3      		ldi r19,lo8(55)
 1919 096e 46E8      		ldi r20,lo8(-122)
 1920 0970 57E3      		ldi r21,lo8(55)
 1921 0972 BC01      		movw r22,r24
 1922 0974 CD01      		movw r24,r26
 1923 0976 0E94 0000 		call __divsf3
 1924 097a DC01      		movw r26,r24
 1925 097c CB01      		movw r24,r22
 1926 097e BC01      		movw r22,r24
 1927 0980 CD01      		movw r24,r26
 1928 0982 0E94 0000 		call __fixunssfsi
 1929 0986 DC01      		movw r26,r24
 1930 0988 CB01      		movw r24,r22
 1931 098a 21E0      		ldi r18,lo8(1)
 1932 098c AC01      		movw r20,r24
 1933 098e BD01      		movw r22,r26
 1934 0990 81E0      		ldi r24,lo8(1)
 1935 0992 0E94 0000 		call macsc_use_cmp
 324:ServerLLDN.c  **** 			
 325:ServerLLDN.c  **** 			appPanState = APP_PAN_STATE_CHECK_TS;	
 1936               		.loc 6 325 0
 1937 0996 8BE0      		ldi r24,lo8(11)
 1938 0998 8093 0000 		sts appPanState,r24
 326:ServerLLDN.c  **** 	}
 1939               		.loc 6 326 0
 1940 099c 0000      		nop
 1941               	/* epilogue start */
 1942 099e DF91      		pop r29
 1943 09a0 CF91      		pop r28
 1944 09a2 1F91      		pop r17
 1945 09a4 0F91      		pop r16
 1946 09a6 FF90      		pop r15
 1947 09a8 EF90      		pop r14
 1948 09aa 0895      		ret
 1949               		.cfi_endproc
 1950               	.LFE144:
 1953               	appInit:
 1954               	.LFB145:
 327:ServerLLDN.c  **** 
 328:ServerLLDN.c  **** 
 329:ServerLLDN.c  **** #else 
 330:ServerLLDN.c  **** 	uint8_t payloadSize = 127;
 331:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 332:ServerLLDN.c  **** 	uint8_t n = 0;
 333:ServerLLDN.c  **** 	
 334:ServerLLDN.c  **** 	static NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 335:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 336:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 337:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 127,
 338:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 339:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 340:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 341:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 342:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 127,
 343:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 344:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 345:ServerLLDN.c  **** 	static bool ack_received;
 346:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 347:ServerLLDN.c  **** 	bool associated = 0;
 348:ServerLLDN.c  **** 	
 349:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 350:ServerLLDN.c  **** 	{
 351:ServerLLDN.c  **** 		printf("\nTIMER");
 352:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 353:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 354:ServerLLDN.c  **** 			timer_stop();
 355:ServerLLDN.c  **** 		#endif
 356:ServerLLDN.c  **** 	}
 357:ServerLLDN.c  **** 
 358:ServerLLDN.c  **** 	
 359:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 360:ServerLLDN.c  **** 	{
 361:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 362:ServerLLDN.c  **** 		//  bom implementar rotinas pra se o nodo estiver associado a um coordeandor e se no estiver
 363:ServerLLDN.c  **** 		PanId = rec_beacon->PanId; // s pode mudar se ele associar
 364:ServerLLDN.c  **** 		if( ((rec_beacon->Flags.txState == DISC_MODE && !ack_received && rec_beacon->confSeqNumber == 0x0
 365:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received)) && associated == 0)
 366:ServerLLDN.c  **** 		{
 367:ServerLLDN.c  **** 	
 368:ServerLLDN.c  **** 			int ts_time =  ((p_var*sp + (m+ rec_beacon->TimeSlotSize  )*sm + macMinLIFSPeriod)/v_var)  / (SY
 369:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize * 2; // sy
 370:ServerLLDN.c  **** 			printf("\n TimeSlotSize %d", rec_beacon->TimeSlotSize);
 371:ServerLLDN.c  **** 			#if MASTER_MACSC
 372:ServerLLDN.c  **** 				macsc_enable_manual_bts();
 373:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(send_message_timeHandler);
 374:ServerLLDN.c  **** 				macsc_enable_cmp_int(MACSC_CC1); 
 375:ServerLLDN.c  **** 				macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time - 250, MACSC_CC1);
 376:ServerLLDN.c  **** 			#else
 377:ServerLLDN.c  **** 				timer_init();
 378:ServerLLDN.c  **** 				timer_delay(msg_wait_time/2);
 379:ServerLLDN.c  **** 				hw_timer_setup_handler(send_message_timeHandler);
 380:ServerLLDN.c  **** 				timer_start();
 381:ServerLLDN.c  **** 			#endif
 382:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 383:ServerLLDN.c  **** 		}
 384:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 385:ServerLLDN.c  **** 		{
 386:ServerLLDN.c  **** 			ack_received = 0;
 387:ServerLLDN.c  **** 			associated = 0;
 388:ServerLLDN.c  **** 		}
 389:ServerLLDN.c  **** 
 390:ServerLLDN.c  **** 		return true;
 391:ServerLLDN.c  **** 	}
 392:ServerLLDN.c  **** 	
 393:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 394:ServerLLDN.c  **** 	{
 395:ServerLLDN.c  **** 		#if !MASTER_MACSC
 396:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 397:ServerLLDN.c  **** 		#endif
 398:ServerLLDN.c  **** 		NWK_ACKFormat_t *ackframe = (NWK_ACKFormat_t*)ind->data;
 399:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 400:ServerLLDN.c  **** 		{
 401:ServerLLDN.c  **** 			int pos = (int) APP_ADDR / 8;
 402:ServerLLDN.c  **** 			int bit_shift = 8 - APP_ADDR % 8;
 403:ServerLLDN.c  **** 			if( ackframe->ackFlags[pos] & 1 << bit_shift)	
 404:ServerLLDN.c  **** 			{
 405:ServerLLDN.c  **** 				printf("\n ack true");
 406:ServerLLDN.c  **** 				ack_received = true;
 407:ServerLLDN.c  **** 			}
 408:ServerLLDN.c  **** 		}
 409:ServerLLDN.c  **** 		return true;
 410:ServerLLDN.c  **** 	}
 411:ServerLLDN.c  **** 	
 412:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 413:ServerLLDN.c  **** 	{
 414:ServerLLDN.c  **** 		#if !MASTER_MACSC
 415:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 416:ServerLLDN.c  **** 		#endif
 417:ServerLLDN.c  **** 		
 418:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 419:ServerLLDN.c  **** 		{
 420:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 421:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 422:ServerLLDN.c  **** 			{
 423:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 424:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 425:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 426:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 427:ServerLLDN.c  **** 				associated = 1;
 428:ServerLLDN.c  **** 				printf("\nRecebeu conf request");
 429:ServerLLDN.c  **** 			}
 430:ServerLLDN.c  **** 		}
 431:ServerLLDN.c  **** 		return true;
 432:ServerLLDN.c  **** 	}
 433:ServerLLDN.c  **** 
 434:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 435:ServerLLDN.c  **** 	{
 436:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 437:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 438:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 439:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 440:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 441:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 442:ServerLLDN.c  **** 	}
 443:ServerLLDN.c  **** 	
 444:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 445:ServerLLDN.c  **** 	{		
 446:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 447:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 448:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 449:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 450:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 451:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 452:ServerLLDN.c  **** 	}
 453:ServerLLDN.c  **** 	
 454:ServerLLDN.c  **** #endif // APP_COORDINATOR
 455:ServerLLDN.c  **** 
 456:ServerLLDN.c  **** static void appInit(void)
 457:ServerLLDN.c  **** {
 1955               		.loc 6 457 0
 1956               		.cfi_startproc
 1957 09ac CF93      		push r28
 1958               	.LCFI85:
 1959               		.cfi_def_cfa_offset 3
 1960               		.cfi_offset 28, -2
 1961 09ae DF93      		push r29
 1962               	.LCFI86:
 1963               		.cfi_def_cfa_offset 4
 1964               		.cfi_offset 29, -3
 1965 09b0 CDB7      		in r28,__SP_L__
 1966 09b2 DEB7      		in r29,__SP_H__
 1967               	.LCFI87:
 1968               		.cfi_def_cfa_register 28
 1969               	/* prologue: function */
 1970               	/* frame size = 0 */
 1971               	/* stack size = 2 */
 1972               	.L__stack_usage = 2
 458:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 1973               		.loc 6 458 0
 1974 09b4 80E0      		ldi r24,0
 1975 09b6 90E0      		ldi r25,0
 1976 09b8 0E94 0000 		call NWK_SetAddr
 459:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 1977               		.loc 6 459 0
 1978 09bc 8FE0      		ldi r24,lo8(15)
 1979 09be 0E94 0000 		call PHY_SetChannel
 460:ServerLLDN.c  **** 	PHY_SetRxState(true);
 1980               		.loc 6 460 0
 1981 09c2 81E0      		ldi r24,lo8(1)
 1982 09c4 0E94 0000 		call PHY_SetRxState
 461:ServerLLDN.c  **** 		
 462:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 463:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 464:ServerLLDN.c  **** 		tmrDelay.interval = 2;
 1983               		.loc 6 464 0
 1984 09c8 82E0      		ldi r24,lo8(2)
 1985 09ca 90E0      		ldi r25,0
 1986 09cc A0E0      		ldi r26,0
 1987 09ce B0E0      		ldi r27,0
 1988 09d0 8093 0000 		sts tmrDelay+6,r24
 1989 09d4 9093 0000 		sts tmrDelay+6+1,r25
 1990 09d8 A093 0000 		sts tmrDelay+6+2,r26
 1991 09dc B093 0000 		sts tmrDelay+6+3,r27
 465:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 1992               		.loc 6 465 0
 1993 09e0 1092 0000 		sts tmrDelay+10,__zero_reg__
 466:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 1994               		.loc 6 466 0
 1995 09e4 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 1996 09e6 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 1997 09e8 9093 0000 		sts tmrDelay+11+1,r25
 1998 09ec 8093 0000 		sts tmrDelay+11,r24
 467:ServerLLDN.c  **** 	  
 468:ServerLLDN.c  **** 		/* 
 469:ServerLLDN.c  **** 		* Disable CSMA/CA
 470:ServerLLDN.c  **** 		* Disable auto ACK
 471:ServerLLDN.c  **** 		*/
 472:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 1999               		.loc 6 472 0
 2000 09f0 8EEF      		ldi r24,lo8(-2)
 2001 09f2 9AEC      		ldi r25,lo8(-54)
 2002 09f4 0E94 0000 		call NWK_SetPanId
 473:ServerLLDN.c  **** 		PanId = APP_PANID;
 2003               		.loc 6 473 0
 2004 09f8 8EEF      		ldi r24,lo8(-2)
 2005 09fa 8093 0000 		sts PanId,r24
 474:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 2006               		.loc 6 474 0
 2007 09fe 8EEF      		ldi r24,lo8(-2)
 2008 0a00 8093 0000 		sts ACKFrame,r24
 475:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 2009               		.loc 6 475 0
 2010 0a04 81E0      		ldi r24,lo8(1)
 2011 0a06 0E94 0000 		call PHY_SetTdmaMode
 476:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 2012               		.loc 6 476 0
 2013 0a0a 60E0      		ldi r22,lo8(gs(appCommandInd))
 2014 0a0c 70E0      		ldi r23,hi8(gs(appCommandInd))
 2015 0a0e 83E0      		ldi r24,lo8(3)
 2016 0a10 0E94 0000 		call NWK_OpenEndpoint
 477:ServerLLDN.c  **** 	#else
 478:ServerLLDN.c  **** 		/*
 479:ServerLLDN.c  **** 		 * Enable CSMA/CA
 480:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 481:ServerLLDN.c  **** 		 */
 482:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 483:ServerLLDN.c  **** 		// PHY_SetOptimizedCSMAValues();
 484:ServerLLDN.c  **** 		
 485:ServerLLDN.c  **** 		payloadSize = 127;
 486:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 487:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 488:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 489:ServerLLDN.c  **** 		/*
 490:ServerLLDN.c  **** 		* Configure interrupts callback functions
 491:ServerLLDN.c  **** 		*/
 492:ServerLLDN.c  **** 		
 493:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 494:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 2017               		.loc 6 494 0
 2018 0a14 81E0      		ldi r24,lo8(1)
 2019 0a16 0E94 0000 		call PHY_SetPromiscuousMode
 495:ServerLLDN.c  **** 
 496:ServerLLDN.c  **** }
 2020               		.loc 6 496 0
 2021 0a1a 0000      		nop
 2022               	/* epilogue start */
 2023 0a1c DF91      		pop r29
 2024 0a1e CF91      		pop r28
 2025 0a20 0895      		ret
 2026               		.cfi_endproc
 2027               	.LFE145:
 2029               		.section	.rodata
 2030               	.LC6:
 2031 0043 0A25 642C 		.string	"\n%d, %d"
 2031      2025 6400 
 2032               	.LC7:
 2033 004b 0A46 696D 		.string	"\nFim de um Per\355odo"
 2033      2064 6520 
 2033      756D 2050 
 2033      6572 ED6F 
 2033      646F 00
 2034               	.LC8:
 2035 005e 0A2D 2D2D 		.string	"\n------- slot %d --------"
 2035      2D2D 2D2D 
 2035      2073 6C6F 
 2035      7420 2564 
 2035      202D 2D2D 
 2036               		.text
 2038               	APP_TaskHandler:
 2039               	.LFB146:
 497:ServerLLDN.c  **** 
 498:ServerLLDN.c  **** static void APP_TaskHandler(void)
 499:ServerLLDN.c  **** {
 2040               		.loc 6 499 0
 2041               		.cfi_startproc
 2042 0a22 CF93      		push r28
 2043               	.LCFI88:
 2044               		.cfi_def_cfa_offset 3
 2045               		.cfi_offset 28, -2
 2046 0a24 DF93      		push r29
 2047               	.LCFI89:
 2048               		.cfi_def_cfa_offset 4
 2049               		.cfi_offset 29, -3
 2050 0a26 CDB7      		in r28,__SP_L__
 2051 0a28 DEB7      		in r29,__SP_H__
 2052               	.LCFI90:
 2053               		.cfi_def_cfa_register 28
 2054               	/* prologue: function */
 2055               	/* frame size = 0 */
 2056               	/* stack size = 2 */
 2057               	.L__stack_usage = 2
 500:ServerLLDN.c  **** 	switch (appState){
 2058               		.loc 6 500 0
 2059 0a2a 8091 0000 		lds r24,appState
 2060 0a2e 882F      		mov r24,r24
 2061 0a30 90E0      		ldi r25,0
 2062 0a32 8230      		cpi r24,2
 2063 0a34 9105      		cpc r25,__zero_reg__
 2064 0a36 01F0      		breq .L56
 2065 0a38 8330      		cpi r24,3
 2066 0a3a 9105      		cpc r25,__zero_reg__
 2067 0a3c 01F0      		breq .L57
 2068 0a3e 892B      		or r24,r25
 2069 0a40 01F0      		breq .L58
 501:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 502:ServerLLDN.c  **** 		{
 503:ServerLLDN.c  **** 			appInit();
 504:ServerLLDN.c  **** 			#if APP_COORDINATOR
 505:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 506:ServerLLDN.c  **** 			#else
 507:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 508:ServerLLDN.c  **** 			#endif
 509:ServerLLDN.c  **** 			break;
 510:ServerLLDN.c  **** 		}
 511:ServerLLDN.c  **** 		case APP_STATE_SEND:
 512:ServerLLDN.c  **** 		{
 513:ServerLLDN.c  **** 			appSendData();
 514:ServerLLDN.c  **** 			#if APP_COORDINATOR
 515:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 516:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 517:ServerLLDN.c  **** 			#else
 518:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 519:ServerLLDN.c  **** 			#endif
 520:ServerLLDN.c  **** 			break;
 521:ServerLLDN.c  **** 		}
 522:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 523:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 524:ServerLLDN.c  **** 		{
 525:ServerLLDN.c  **** 			switch(appPanState)
 526:ServerLLDN.c  **** 			{
 527:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 528:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 529:ServerLLDN.c  **** 				{
 530:ServerLLDN.c  **** 					appPanReset();
 531:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 532:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 533:ServerLLDN.c  **** 					cycles_counter = 0;
 534:ServerLLDN.c  **** 					break;
 535:ServerLLDN.c  **** 				}
 536:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 537:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 538:ServerLLDN.c  **** 				{
 539:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 540:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 541:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 542:ServerLLDN.c  **** 					 */
 543:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 2)
 544:ServerLLDN.c  **** 					{	
 545:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 546:ServerLLDN.c  **** 						counter_associados = 0;
 547:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 548:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 549:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 550:ServerLLDN.c  **** 						msgReq.options = 0;
 551:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 552:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 553:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE; // APP_PAN_STATE_ONLINE_INIT
 554:ServerLLDN.c  **** 						
 555:ServerLLDN.c  **** 					}
 556:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 557:ServerLLDN.c  **** 					else 
 558:ServerLLDN.c  **** 					{
 559:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 560:ServerLLDN.c  **** 						appPanDiscInit();
 561:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 562:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 563:ServerLLDN.c  **** 					}
 564:ServerLLDN.c  **** 					break;
 565:ServerLLDN.c  **** 				}
 566:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 567:ServerLLDN.c  **** 				{
 568:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 569:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 570:ServerLLDN.c  **** 					msgReq.data = NULL;
 571:ServerLLDN.c  **** 					msgReq.size = 0;
 572:ServerLLDN.c  **** 					
 573:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 574:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 575:ServerLLDN.c  **** 					break;
 576:ServerLLDN.c  **** 				}
 577:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 578:ServerLLDN.c  **** 				{
 579:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 580:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 581:ServerLLDN.c  **** 					 */
 582:ServerLLDN.c  **** 					appPanPrepareACK();
 583:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 584:ServerLLDN.c  **** 					
 585:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL; 
 586:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 587:ServerLLDN.c  **** 					break;
 588:ServerLLDN.c  **** 				}
 589:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 590:ServerLLDN.c  **** 				{
 591:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 592:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 593:ServerLLDN.c  **** 					msgReq.data = NULL;
 594:ServerLLDN.c  **** 					msgReq.size = 0;
 595:ServerLLDN.c  **** 					
 596:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 597:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 598:ServerLLDN.c  **** 					break;
 599:ServerLLDN.c  **** 
 600:ServerLLDN.c  **** 				}
 601:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 602:ServerLLDN.c  **** 				{
 603:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 604:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 605:ServerLLDN.c  **** 					msgReq.data = NULL;
 606:ServerLLDN.c  **** 					msgReq.size = 0;
 607:ServerLLDN.c  **** 					
 608:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 609:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 610:ServerLLDN.c  **** 					break;
 611:ServerLLDN.c  **** 				}
 612:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 613:ServerLLDN.c  **** 				{
 614:ServerLLDN.c  **** 
 615:ServerLLDN.c  **** 					if(conf_req_index > 0)
 616:ServerLLDN.c  **** 					{
 617:ServerLLDN.c  **** 						CopyToConfigRequest(conf_req_index);
 618:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 619:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 620:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 621:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 622:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 623:ServerLLDN.c  **** 						conf_req_index--;
 624:ServerLLDN.c  **** 						counter_associados++;
 625:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 626:ServerLLDN.c  **** 					}
 627:ServerLLDN.c  **** 					else
 628:ServerLLDN.c  **** 					{
 629:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 630:ServerLLDN.c  **** 					}
 631:ServerLLDN.c  **** 					break;
 632:ServerLLDN.c  **** 				}
 633:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 634:ServerLLDN.c  **** 				{
 635:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 636:ServerLLDN.c  **** 					msgReq.data = NULL;
 637:ServerLLDN.c  **** 					msgReq.size = 0;
 638:ServerLLDN.c  **** 					
 639:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 640:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 641:ServerLLDN.c  **** 					cycles_counter++;	
 642:ServerLLDN.c  **** 					
 643:ServerLLDN.c  **** 					break;
 644:ServerLLDN.c  **** 				}
 645:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 646:ServerLLDN.c  **** 				{
 647:ServerLLDN.c  **** 					appPanOnlineInit();
 648:ServerLLDN.c  **** 					break;
 649:ServerLLDN.c  **** 				}
 650:ServerLLDN.c  **** 				case APP_PAN_STATE_CHECK_TS:
 651:ServerLLDN.c  **** 				{
 652:ServerLLDN.c  **** 					if(timeslot_counter >= assTimeSlot)
 653:ServerLLDN.c  **** 					{
 654:ServerLLDN.c  **** 						printf("\nFim de um Perodo");
 655:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 656:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 657:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 658:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 659:ServerLLDN.c  **** 					}
 660:ServerLLDN.c  **** 					else
 661:ServerLLDN.c  **** 					{
 662:ServerLLDN.c  **** 						printf("\n------- slot %d --------", timeslot_counter);
 663:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 664:ServerLLDN.c  **** 						timeslot_counter++;
 665:ServerLLDN.c  **** 					}
 666:ServerLLDN.c  **** 					break;
 667:ServerLLDN.c  **** 				}
 668:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_END_BE:
 669:ServerLLDN.c  **** 				{
 670:ServerLLDN.c  **** 					if(0)
 671:ServerLLDN.c  **** 					{
 672:ServerLLDN.c  **** 						// implementar as condies para entrar no processo de associao
 673:ServerLLDN.c  **** 					}
 674:ServerLLDN.c  **** 					else
 675:ServerLLDN.c  **** 					{
 676:ServerLLDN.c  **** 						// posso calcular esse valor no onlineinit, o tTS precisa ser recalculado, o seu valor muda n
 677:ServerLLDN.c  **** 						// pode voltar pro state_online_initial porque precisa reconfigurar os timers
 678:ServerLLDN.c  **** 						// precisa revisar o macsc_enable_manual_bts()
 679:ServerLLDN.c  **** 						/*
 680:ServerLLDN.c  **** 						int idle_time =  2 * numBaseTimeSlotperMgmt * (tTS) * 5 / (SYMBOL_TIME); // 5 is the total of
 681:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(lldn_server_beacon); // esta funo pode s mandar o beacon do online, 
 682:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 683:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 684:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, idle_time, MACSC_CC1);
 685:ServerLLDN.c  **** 						*/
 686:ServerLLDN.c  **** 					}
 687:ServerLLDN.c  **** 					break;
 688:ServerLLDN.c  **** 				}
 689:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 690:ServerLLDN.c  **** 				{
 691:ServerLLDN.c  **** 					msgReq.options = 0;
 692:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 693:ServerLLDN.c  **** 					break;
 694:ServerLLDN.c  **** 				}
 695:ServerLLDN.c  **** 			}
 696:ServerLLDN.c  **** 			break;	
 697:ServerLLDN.c  **** 		}
 698:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 699:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 700:ServerLLDN.c  **** 		{
 701:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
 702:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 703:ServerLLDN.c  **** 			break;
 704:ServerLLDN.c  **** 		}
 705:ServerLLDN.c  **** 		
 706:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 707:ServerLLDN.c  **** 		{
 708:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 709:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0) {
 710:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 711:ServerLLDN.c  **** 			}
 712:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 713:ServerLLDN.c  **** 			else {
 714:ServerLLDN.c  **** 				#if MASTER_MACSC
 715:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 716:ServerLLDN.c  **** 				#else
 717:ServerLLDN.c  **** 				timer_stop();
 718:ServerLLDN.c  **** 				#endif
 719:ServerLLDN.c  **** 			}
 720:ServerLLDN.c  **** 			ack_received = 0;
 721:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 722:ServerLLDN.c  **** 			break;
 723:ServerLLDN.c  **** 		}
 724:ServerLLDN.c  **** 		#endif
 725:ServerLLDN.c  **** 		default:
 726:ServerLLDN.c  **** 		{
 727:ServerLLDN.c  **** 			break;
 2070               		.loc 6 727 0
 2071 0a42 00C0      		rjmp .L59
 2072               	.L58:
 503:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2073               		.loc 6 503 0
 2074 0a44 0E94 0000 		call appInit
 505:ServerLLDN.c  **** 			#else
 2075               		.loc 6 505 0
 2076 0a48 83E0      		ldi r24,lo8(3)
 2077 0a4a 8093 0000 		sts appState,r24
 509:ServerLLDN.c  **** 		}
 2078               		.loc 6 509 0
 2079 0a4e 00C0      		rjmp .L59
 2080               	.L56:
 513:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2081               		.loc 6 513 0
 2082 0a50 0E94 0000 		call appSendData
 516:ServerLLDN.c  **** 			#else
 2083               		.loc 6 516 0
 2084 0a54 83E0      		ldi r24,lo8(3)
 2085 0a56 8093 0000 		sts appState,r24
 520:ServerLLDN.c  **** 		}
 2086               		.loc 6 520 0
 2087 0a5a 00C0      		rjmp .L59
 2088               	.L57:
 525:ServerLLDN.c  **** 			{
 2089               		.loc 6 525 0
 2090 0a5c 8091 0000 		lds r24,appPanState
 2091 0a60 882F      		mov r24,r24
 2092 0a62 90E0      		ldi r25,0
 2093 0a64 092E      		mov __tmp_reg__,r25
 2094 0a66 000C      		lsl r0
 2095 0a68 AA0B      		sbc r26,r26
 2096 0a6a BB0B      		sbc r27,r27
 2097 0a6c 40E0      		ldi r20,0
 2098 0a6e 50E0      		ldi r21,0
 2099 0a70 2BE0      		ldi r18,lo8(11)
 2100 0a72 30E0      		ldi r19,0
 2101 0a74 841B      		sub r24,r20
 2102 0a76 950B      		sbc r25,r21
 2103 0a78 2817      		cp r18,r24
 2104 0a7a 3907      		cpc r19,r25
 2105 0a7c 00F4      		brsh .+2
 2106 0a7e 00C0      		rjmp .L81
 2107 0a80 8050      		subi r24,lo8(-(gs(.L62)))
 2108 0a82 9040      		sbci r25,hi8(-(gs(.L62)))
 2109 0a84 FC01      		movw r30,r24
 2110 0a86 0C94 0000 		jmp __tablejump2__
 2111               		.section	.progmem.gcc_sw_table,"a",@progbits
 2112               		.p2align	1
 2113               	.L62:
 2114 0000 0000      		.word gs(.L61)
 2115 0002 0000      		.word gs(.L63)
 2116 0004 0000      		.word gs(.L64)
 2117 0006 0000      		.word gs(.L65)
 2118 0008 0000      		.word gs(.L66)
 2119 000a 0000      		.word gs(.L67)
 2120 000c 0000      		.word gs(.L68)
 2121 000e 0000      		.word gs(.L69)
 2122 0010 0000      		.word gs(.L70)
 2123 0012 0000      		.word gs(.L71)
 2124 0014 0000      		.word gs(.L82)
 2125 0016 0000      		.word gs(.L73)
 2126               		.text
 2127               	.L63:
 530:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2128               		.loc 6 530 0
 2129 0a8a 0E94 0000 		call appPanReset
 531:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 2130               		.loc 6 531 0
 2131 0a8e 82E0      		ldi r24,lo8(2)
 2132 0a90 8093 0000 		sts appPanState,r24
 532:ServerLLDN.c  **** 					cycles_counter = 0;
 2133               		.loc 6 532 0
 2134 0a94 82E0      		ldi r24,lo8(2)
 2135 0a96 8093 0000 		sts appState,r24
 533:ServerLLDN.c  **** 					break;
 2136               		.loc 6 533 0
 2137 0a9a 1092 0000 		sts cycles_counter,__zero_reg__
 534:ServerLLDN.c  **** 				}
 2138               		.loc 6 534 0
 2139 0a9e 00C0      		rjmp .L60
 2140               	.L64:
 543:ServerLLDN.c  **** 					{	
 2141               		.loc 6 543 0
 2142 0aa0 8091 0000 		lds r24,counter_associados
 2143 0aa4 9091 0000 		lds r25,counter_associados+1
 2144 0aa8 0C97      		sbiw r24,12
 2145 0aaa 01F0      		breq .L74
 543:ServerLLDN.c  **** 					{	
 2146               		.loc 6 543 0 is_stmt 0 discriminator 1
 2147 0aac 8091 0000 		lds r24,cycles_counter
 2148 0ab0 8230      		cpi r24,lo8(2)
 2149 0ab2 00F0      		brlo .L75
 2150               	.L74:
 545:ServerLLDN.c  **** 						counter_associados = 0;
 2151               		.loc 6 545 0 is_stmt 1
 2152 0ab4 2091 0000 		lds r18,counter_associados
 2153 0ab8 3091 0000 		lds r19,counter_associados+1
 2154 0abc 8091 0000 		lds r24,cycles_counter
 2155 0ac0 882F      		mov r24,r24
 2156 0ac2 90E0      		ldi r25,0
 2157 0ac4 432F      		mov r20,r19
 2158 0ac6 4F93      		push r20
 2159 0ac8 2F93      		push r18
 2160 0aca 292F      		mov r18,r25
 2161 0acc 2F93      		push r18
 2162 0ace 8F93      		push r24
 2163 0ad0 80E0      		ldi r24,lo8(.LC6)
 2164 0ad2 90E0      		ldi r25,hi8(.LC6)
 2165 0ad4 892F      		mov r24,r25
 2166 0ad6 8F93      		push r24
 2167 0ad8 80E0      		ldi r24,lo8(.LC6)
 2168 0ada 90E0      		ldi r25,hi8(.LC6)
 2169 0adc 8F93      		push r24
 2170 0ade 0E94 0000 		call printf
 2171 0ae2 0F90      		pop __tmp_reg__
 2172 0ae4 0F90      		pop __tmp_reg__
 2173 0ae6 0F90      		pop __tmp_reg__
 2174 0ae8 0F90      		pop __tmp_reg__
 2175 0aea 0F90      		pop __tmp_reg__
 2176 0aec 0F90      		pop __tmp_reg__
 546:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 2177               		.loc 6 546 0
 2178 0aee 1092 0000 		sts counter_associados+1,__zero_reg__
 2179 0af2 1092 0000 		sts counter_associados,__zero_reg__
 548:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 2180               		.loc 6 548 0
 2181 0af6 81E0      		ldi r24,lo8(1)
 2182 0af8 0E94 0000 		call macsc_disable_cmp_int
 549:ServerLLDN.c  **** 						msgReq.options = 0;
 2183               		.loc 6 549 0
 2184 0afc 82E0      		ldi r24,lo8(2)
 2185 0afe 0E94 0000 		call macsc_disable_cmp_int
 550:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 2186               		.loc 6 550 0
 2187 0b02 1092 0000 		sts msgReq+9+1,__zero_reg__
 2188 0b06 1092 0000 		sts msgReq+9,__zero_reg__
 552:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE; // APP_PAN_STATE_ONLINE_INIT
 2189               		.loc 6 552 0
 2190 0b0a 81E0      		ldi r24,lo8(1)
 2191 0b0c 8093 0000 		sts appState,r24
 553:ServerLLDN.c  **** 						
 2192               		.loc 6 553 0
 2193 0b10 1092 0000 		sts appPanState,__zero_reg__
 564:ServerLLDN.c  **** 				}
 2194               		.loc 6 564 0
 2195 0b14 00C0      		rjmp .L60
 2196               	.L75:
 560:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2197               		.loc 6 560 0
 2198 0b16 0E94 0000 		call appPanDiscInit
 561:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 2199               		.loc 6 561 0
 2200 0b1a 81E0      		ldi r24,lo8(1)
 2201 0b1c 8093 0000 		sts appState,r24
 562:ServerLLDN.c  **** 					}
 2202               		.loc 6 562 0
 2203 0b20 83E0      		ldi r24,lo8(3)
 2204 0b22 8093 0000 		sts appPanState,r24
 564:ServerLLDN.c  **** 				}
 2205               		.loc 6 564 0
 2206 0b26 00C0      		rjmp .L60
 2207               	.L65:
 569:ServerLLDN.c  **** 					msgReq.data = NULL;
 2208               		.loc 6 569 0
 2209 0b28 80E4      		ldi r24,lo8(64)
 2210 0b2a 99E0      		ldi r25,lo8(9)
 2211 0b2c 9093 0000 		sts msgReq+9+1,r25
 2212 0b30 8093 0000 		sts msgReq+9,r24
 570:ServerLLDN.c  **** 					msgReq.size = 0;
 2213               		.loc 6 570 0
 2214 0b34 1092 0000 		sts msgReq+13+1,__zero_reg__
 2215 0b38 1092 0000 		sts msgReq+13,__zero_reg__
 571:ServerLLDN.c  **** 					
 2216               		.loc 6 571 0
 2217 0b3c 1092 0000 		sts msgReq+15,__zero_reg__
 573:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 2218               		.loc 6 573 0
 2219 0b40 84E0      		ldi r24,lo8(4)
 2220 0b42 8093 0000 		sts appState,r24
 574:ServerLLDN.c  **** 					break;
 2221               		.loc 6 574 0
 2222 0b46 84E0      		ldi r24,lo8(4)
 2223 0b48 8093 0000 		sts appPanState,r24
 575:ServerLLDN.c  **** 				}
 2224               		.loc 6 575 0
 2225 0b4c 00C0      		rjmp .L60
 2226               	.L66:
 582:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 2227               		.loc 6 582 0
 2228 0b4e 0E94 0000 		call appPanPrepareACK
 583:ServerLLDN.c  **** 					
 2229               		.loc 6 583 0
 2230 0b52 80E0      		ldi r24,lo8(tmrDelay)
 2231 0b54 90E0      		ldi r25,hi8(tmrDelay)
 2232 0b56 0E94 0000 		call SYS_TimerStart
 585:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2233               		.loc 6 585 0
 2234 0b5a 85E0      		ldi r24,lo8(5)
 2235 0b5c 8093 0000 		sts appPanState,r24
 586:ServerLLDN.c  **** 					break;
 2236               		.loc 6 586 0
 2237 0b60 81E0      		ldi r24,lo8(1)
 2238 0b62 8093 0000 		sts appState,r24
 587:ServerLLDN.c  **** 				}
 2239               		.loc 6 587 0
 2240 0b66 00C0      		rjmp .L60
 2241               	.L67:
 592:ServerLLDN.c  **** 					msgReq.data = NULL;
 2242               		.loc 6 592 0
 2243 0b68 80E4      		ldi r24,lo8(64)
 2244 0b6a 92E0      		ldi r25,lo8(2)
 2245 0b6c 9093 0000 		sts msgReq+9+1,r25
 2246 0b70 8093 0000 		sts msgReq+9,r24
 593:ServerLLDN.c  **** 					msgReq.size = 0;
 2247               		.loc 6 593 0
 2248 0b74 1092 0000 		sts msgReq+13+1,__zero_reg__
 2249 0b78 1092 0000 		sts msgReq+13,__zero_reg__
 594:ServerLLDN.c  **** 					
 2250               		.loc 6 594 0
 2251 0b7c 1092 0000 		sts msgReq+15,__zero_reg__
 596:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 2252               		.loc 6 596 0
 2253 0b80 81E0      		ldi r24,lo8(1)
 2254 0b82 8093 0000 		sts appState,r24
 597:ServerLLDN.c  **** 					break;
 2255               		.loc 6 597 0
 2256 0b86 87E0      		ldi r24,lo8(7)
 2257 0b88 8093 0000 		sts appPanState,r24
 598:ServerLLDN.c  **** 
 2258               		.loc 6 598 0
 2259 0b8c 00C0      		rjmp .L60
 2260               	.L69:
 604:ServerLLDN.c  **** 					msgReq.data = NULL;
 2261               		.loc 6 604 0
 2262 0b8e 80E4      		ldi r24,lo8(64)
 2263 0b90 9AE0      		ldi r25,lo8(10)
 2264 0b92 9093 0000 		sts msgReq+9+1,r25
 2265 0b96 8093 0000 		sts msgReq+9,r24
 605:ServerLLDN.c  **** 					msgReq.size = 0;
 2266               		.loc 6 605 0
 2267 0b9a 1092 0000 		sts msgReq+13+1,__zero_reg__
 2268 0b9e 1092 0000 		sts msgReq+13,__zero_reg__
 606:ServerLLDN.c  **** 					
 2269               		.loc 6 606 0
 2270 0ba2 1092 0000 		sts msgReq+15,__zero_reg__
 608:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2271               		.loc 6 608 0
 2272 0ba6 81E0      		ldi r24,lo8(1)
 2273 0ba8 8093 0000 		sts appState,r24
 609:ServerLLDN.c  **** 					break;
 2274               		.loc 6 609 0
 2275 0bac 86E0      		ldi r24,lo8(6)
 2276 0bae 8093 0000 		sts appPanState,r24
 610:ServerLLDN.c  **** 				}
 2277               		.loc 6 610 0
 2278 0bb2 00C0      		rjmp .L60
 2279               	.L68:
 615:ServerLLDN.c  **** 					{
 2280               		.loc 6 615 0
 2281 0bb4 8091 0000 		lds r24,conf_req_index
 2282 0bb8 9091 0000 		lds r25,conf_req_index+1
 2283 0bbc 1816      		cp __zero_reg__,r24
 2284 0bbe 1906      		cpc __zero_reg__,r25
 2285 0bc0 04F4      		brge .L77
 617:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 2286               		.loc 6 617 0
 2287 0bc2 8091 0000 		lds r24,conf_req_index
 2288 0bc6 9091 0000 		lds r25,conf_req_index+1
 2289 0bca 0E94 0000 		call CopyToConfigRequest
 618:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 2290               		.loc 6 618 0
 2291 0bce 80E0      		ldi r24,0
 2292 0bd0 90E8      		ldi r25,lo8(-128)
 2293 0bd2 9093 0000 		sts msgReq+9+1,r25
 2294 0bd6 8093 0000 		sts msgReq+9,r24
 619:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 2295               		.loc 6 619 0
 2296 0bda 80E0      		ldi r24,lo8(config_request_frame)
 2297 0bdc 90E0      		ldi r25,hi8(config_request_frame)
 2298 0bde 9093 0000 		sts msgReq+13+1,r25
 2299 0be2 8093 0000 		sts msgReq+13,r24
 620:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2300               		.loc 6 620 0
 2301 0be6 86E0      		ldi r24,lo8(6)
 2302 0be8 8093 0000 		sts msgReq+15,r24
 621:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2303               		.loc 6 621 0
 2304 0bec 81E0      		ldi r24,lo8(1)
 2305 0bee 8093 0000 		sts appState,r24
 622:ServerLLDN.c  **** 						conf_req_index--;
 2306               		.loc 6 622 0
 2307 0bf2 86E0      		ldi r24,lo8(6)
 2308 0bf4 8093 0000 		sts appPanState,r24
 623:ServerLLDN.c  **** 						counter_associados++;
 2309               		.loc 6 623 0
 2310 0bf8 8091 0000 		lds r24,conf_req_index
 2311 0bfc 9091 0000 		lds r25,conf_req_index+1
 2312 0c00 0197      		sbiw r24,1
 2313 0c02 9093 0000 		sts conf_req_index+1,r25
 2314 0c06 8093 0000 		sts conf_req_index,r24
 624:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 2315               		.loc 6 624 0
 2316 0c0a 8091 0000 		lds r24,counter_associados
 2317 0c0e 9091 0000 		lds r25,counter_associados+1
 2318 0c12 0196      		adiw r24,1
 2319 0c14 9093 0000 		sts counter_associados+1,r25
 2320 0c18 8093 0000 		sts counter_associados,r24
 625:ServerLLDN.c  **** 					}
 2321               		.loc 6 625 0
 2322 0c1c 80E0      		ldi r24,lo8(tmrDelay)
 2323 0c1e 90E0      		ldi r25,hi8(tmrDelay)
 2324 0c20 0E94 0000 		call SYS_TimerStart
 631:ServerLLDN.c  **** 				}
 2325               		.loc 6 631 0
 2326 0c24 00C0      		rjmp .L60
 2327               	.L77:
 629:ServerLLDN.c  **** 					}
 2328               		.loc 6 629 0
 2329 0c26 88E0      		ldi r24,lo8(8)
 2330 0c28 8093 0000 		sts appPanState,r24
 631:ServerLLDN.c  **** 				}
 2331               		.loc 6 631 0
 2332 0c2c 00C0      		rjmp .L60
 2333               	.L70:
 635:ServerLLDN.c  **** 					msgReq.data = NULL;
 2334               		.loc 6 635 0
 2335 0c2e 80E4      		ldi r24,lo8(64)
 2336 0c30 92E1      		ldi r25,lo8(18)
 2337 0c32 9093 0000 		sts msgReq+9+1,r25
 2338 0c36 8093 0000 		sts msgReq+9,r24
 636:ServerLLDN.c  **** 					msgReq.size = 0;
 2339               		.loc 6 636 0
 2340 0c3a 1092 0000 		sts msgReq+13+1,__zero_reg__
 2341 0c3e 1092 0000 		sts msgReq+13,__zero_reg__
 637:ServerLLDN.c  **** 					
 2342               		.loc 6 637 0
 2343 0c42 1092 0000 		sts msgReq+15,__zero_reg__
 639:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2344               		.loc 6 639 0
 2345 0c46 81E0      		ldi r24,lo8(1)
 2346 0c48 8093 0000 		sts appState,r24
 640:ServerLLDN.c  **** 					cycles_counter++;	
 2347               		.loc 6 640 0
 2348 0c4c 82E0      		ldi r24,lo8(2)
 2349 0c4e 8093 0000 		sts appPanState,r24
 641:ServerLLDN.c  **** 					
 2350               		.loc 6 641 0
 2351 0c52 8091 0000 		lds r24,cycles_counter
 2352 0c56 8F5F      		subi r24,lo8(-(1))
 2353 0c58 8093 0000 		sts cycles_counter,r24
 643:ServerLLDN.c  **** 				}
 2354               		.loc 6 643 0
 2355 0c5c 00C0      		rjmp .L60
 2356               	.L71:
 647:ServerLLDN.c  **** 					break;
 2357               		.loc 6 647 0
 2358 0c5e 0E94 0000 		call appPanOnlineInit
 648:ServerLLDN.c  **** 				}
 2359               		.loc 6 648 0
 2360 0c62 00C0      		rjmp .L60
 2361               	.L73:
 652:ServerLLDN.c  **** 					{
 2362               		.loc 6 652 0
 2363 0c64 8091 0000 		lds r24,timeslot_counter
 2364 0c68 282F      		mov r18,r24
 2365 0c6a 30E0      		ldi r19,0
 2366 0c6c 8091 0000 		lds r24,assTimeSlot
 2367 0c70 9091 0000 		lds r25,assTimeSlot+1
 2368 0c74 2817      		cp r18,r24
 2369 0c76 3907      		cpc r19,r25
 2370 0c78 04F0      		brlt .L79
 654:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 2371               		.loc 6 654 0
 2372 0c7a 80E0      		ldi r24,lo8(.LC7)
 2373 0c7c 90E0      		ldi r25,hi8(.LC7)
 2374 0c7e 892F      		mov r24,r25
 2375 0c80 8F93      		push r24
 2376 0c82 80E0      		ldi r24,lo8(.LC7)
 2377 0c84 90E0      		ldi r25,hi8(.LC7)
 2378 0c86 8F93      		push r24
 2379 0c88 0E94 0000 		call printf
 2380 0c8c 0F90      		pop __tmp_reg__
 2381 0c8e 0F90      		pop __tmp_reg__
 655:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 2382               		.loc 6 655 0
 2383 0c90 81E0      		ldi r24,lo8(1)
 2384 0c92 0E94 0000 		call macsc_disable_cmp_int
 656:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2385               		.loc 6 656 0
 2386 0c96 82E0      		ldi r24,lo8(2)
 2387 0c98 0E94 0000 		call macsc_disable_cmp_int
 657:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 2388               		.loc 6 657 0
 2389 0c9c 81E0      		ldi r24,lo8(1)
 2390 0c9e 8093 0000 		sts appState,r24
 658:ServerLLDN.c  **** 					}
 2391               		.loc 6 658 0
 2392 0ca2 1092 0000 		sts appPanState,__zero_reg__
 666:ServerLLDN.c  **** 				}
 2393               		.loc 6 666 0
 2394 0ca6 00C0      		rjmp .L60
 2395               	.L79:
 662:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2396               		.loc 6 662 0
 2397 0ca8 8091 0000 		lds r24,timeslot_counter
 2398 0cac 882F      		mov r24,r24
 2399 0cae 90E0      		ldi r25,0
 2400 0cb0 292F      		mov r18,r25
 2401 0cb2 2F93      		push r18
 2402 0cb4 8F93      		push r24
 2403 0cb6 80E0      		ldi r24,lo8(.LC8)
 2404 0cb8 90E0      		ldi r25,hi8(.LC8)
 2405 0cba 892F      		mov r24,r25
 2406 0cbc 8F93      		push r24
 2407 0cbe 80E0      		ldi r24,lo8(.LC8)
 2408 0cc0 90E0      		ldi r25,hi8(.LC8)
 2409 0cc2 8F93      		push r24
 2410 0cc4 0E94 0000 		call printf
 2411 0cc8 0F90      		pop __tmp_reg__
 2412 0cca 0F90      		pop __tmp_reg__
 2413 0ccc 0F90      		pop __tmp_reg__
 2414 0cce 0F90      		pop __tmp_reg__
 663:ServerLLDN.c  **** 						timeslot_counter++;
 2415               		.loc 6 663 0
 2416 0cd0 81E0      		ldi r24,lo8(1)
 2417 0cd2 8093 0000 		sts appState,r24
 664:ServerLLDN.c  **** 					}
 2418               		.loc 6 664 0
 2419 0cd6 8091 0000 		lds r24,timeslot_counter
 2420 0cda 8F5F      		subi r24,lo8(-(1))
 2421 0cdc 8093 0000 		sts timeslot_counter,r24
 666:ServerLLDN.c  **** 				}
 2422               		.loc 6 666 0
 2423 0ce0 00C0      		rjmp .L60
 2424               	.L61:
 691:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2425               		.loc 6 691 0
 2426 0ce2 1092 0000 		sts msgReq+9+1,__zero_reg__
 2427 0ce6 1092 0000 		sts msgReq+9,__zero_reg__
 692:ServerLLDN.c  **** 					break;
 2428               		.loc 6 692 0
 2429 0cea 81E0      		ldi r24,lo8(1)
 2430 0cec 8093 0000 		sts appState,r24
 693:ServerLLDN.c  **** 				}
 2431               		.loc 6 693 0
 2432 0cf0 00C0      		rjmp .L60
 2433               	.L82:
 687:ServerLLDN.c  **** 				}
 2434               		.loc 6 687 0
 2435 0cf2 0000      		nop
 2436               	.L60:
 2437               	.L81:
 696:ServerLLDN.c  **** 		}
 2438               		.loc 6 696 0
 2439 0cf4 0000      		nop
 2440               	.L59:
 728:ServerLLDN.c  **** 		}
 729:ServerLLDN.c  **** 	}
 730:ServerLLDN.c  **** }
 2441               		.loc 6 730 0
 2442 0cf6 0000      		nop
 2443               	/* epilogue start */
 2444 0cf8 DF91      		pop r29
 2445 0cfa CF91      		pop r28
 2446 0cfc 0895      		ret
 2447               		.cfi_endproc
 2448               	.LFE146:
 2450               		.section	.rodata
 2451               	.LC0:
 2452 0078 00        		.byte	0
 2453 0079 C2        		.byte	-62
 2454 007a 01        		.byte	1
 2455 007b 00        		.byte	0
 2456 007c 03        		.byte	3
 2457 007d 00        		.byte	0
 2458 007e 00        		.byte	0
 2459               		.text
 2460               	.global	main
 2462               	main:
 2463               	.LFB147:
 731:ServerLLDN.c  **** 
 732:ServerLLDN.c  **** 	/*****************************************************************************
 733:ServerLLDN.c  **** 	*****************************************************************************/
 734:ServerLLDN.c  **** 	int main(void)
 735:ServerLLDN.c  **** 	{
 2464               		.loc 6 735 0
 2465               		.cfi_startproc
 2466 0cfe 0F93      		push r16
 2467               	.LCFI91:
 2468               		.cfi_def_cfa_offset 3
 2469               		.cfi_offset 16, -2
 2470 0d00 1F93      		push r17
 2471               	.LCFI92:
 2472               		.cfi_def_cfa_offset 4
 2473               		.cfi_offset 17, -3
 2474 0d02 CF93      		push r28
 2475               	.LCFI93:
 2476               		.cfi_def_cfa_offset 5
 2477               		.cfi_offset 28, -4
 2478 0d04 DF93      		push r29
 2479               	.LCFI94:
 2480               		.cfi_def_cfa_offset 6
 2481               		.cfi_offset 29, -5
 2482 0d06 CDB7      		in r28,__SP_L__
 2483 0d08 DEB7      		in r29,__SP_H__
 2484               	.LCFI95:
 2485               		.cfi_def_cfa_register 28
 2486 0d0a 2797      		sbiw r28,7
 2487               	.LCFI96:
 2488               		.cfi_def_cfa_offset 13
 2489 0d0c 0FB6      		in __tmp_reg__,__SREG__
 2490 0d0e F894      		cli
 2491 0d10 DEBF      		out __SP_H__,r29
 2492 0d12 0FBE      		out __SREG__,__tmp_reg__
 2493 0d14 CDBF      		out __SP_L__,r28
 2494               	/* prologue: function */
 2495               	/* frame size = 7 */
 2496               	/* stack size = 11 */
 2497               	.L__stack_usage = 11
 736:ServerLLDN.c  **** 		sysclk_init();
 2498               		.loc 6 736 0
 2499 0d16 0E94 0000 		call sysclk_init
 737:ServerLLDN.c  **** 		board_init();
 2500               		.loc 6 737 0
 2501 0d1a 0E94 0000 		call board_init
 738:ServerLLDN.c  **** 
 739:ServerLLDN.c  **** 		SYS_Init();
 2502               		.loc 6 739 0
 2503 0d1e 0E94 0000 		call SYS_Init
 740:ServerLLDN.c  **** 		/* Disable CSMA/CA
 741:ServerLLDN.c  **** 		 * Disable auto ACK
 742:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
 743:ServerLLDN.c  **** 		 */
 744:ServerLLDN.c  **** 
 745:ServerLLDN.c  **** 		sm_init();
 2504               		.loc 6 745 0
 2505 0d22 0E94 0000 		call sm_init
 746:ServerLLDN.c  **** 
 747:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
 748:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 749:ServerLLDN.c  **** 		irq_initialize_vectors();
 750:ServerLLDN.c  **** 	#endif
 751:ServerLLDN.c  **** 		cpu_irq_enable();
 2506               		.loc 6 751 0
 2507               	/* #APP */
 2508               	 ;  751 "ServerLLDN.c" 1
 2509 0d26 7894      		sei
 2510               	 ;  0 "" 2
 752:ServerLLDN.c  **** 
 753:ServerLLDN.c  **** 	#if 1
 754:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 755:ServerLLDN.c  **** 		stdio_usb_init();
 756:ServerLLDN.c  **** 	#else
 757:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 2511               		.loc 6 757 0
 2512               	/* #NOAPP */
 2513 0d28 27E0      		ldi r18,lo8(7)
 2514 0d2a E0E0      		ldi r30,lo8(.LC0)
 2515 0d2c F0E0      		ldi r31,hi8(.LC0)
 2516 0d2e CE01      		movw r24,r28
 2517 0d30 0196      		adiw r24,1
 2518 0d32 DC01      		movw r26,r24
 2519               		0:
 2520 0d34 0190      		ld r0,Z+
 2521 0d36 0D92      		st X+,r0
 2522 0d38 2A95      		dec r18
 2523 0d3a 01F4      		brne 0b
 758:ServerLLDN.c  **** 		{
 759:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
 760:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
 761:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
 762:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
 763:ServerLLDN.c  **** 		};
 764:ServerLLDN.c  **** 
 765:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 2524               		.loc 6 765 0
 2525 0d3c CE01      		movw r24,r28
 2526 0d3e 0196      		adiw r24,1
 2527 0d40 BC01      		movw r22,r24
 2528 0d42 80EC      		ldi r24,lo8(-64)
 2529 0d44 90E0      		ldi r25,0
 2530 0d46 0E94 0000 		call stdio_serial_init
 766:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 2531               		.loc 6 766 0
 2532 0d4a 80EC      		ldi r24,lo8(-64)
 2533 0d4c 90E0      		ldi r25,0
 2534 0d4e 0E94 0000 		call usart_double_baud_enable
 767:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 2535               		.loc 6 767 0
 2536 0d52 0E94 0000 		call sysclk_get_source_clock_hz
 2537 0d56 DC01      		movw r26,r24
 2538 0d58 CB01      		movw r24,r22
 2539 0d5a 8C01      		movw r16,r24
 2540 0d5c 9D01      		movw r18,r26
 2541 0d5e 40E0      		ldi r20,0
 2542 0d60 52EC      		ldi r21,lo8(-62)
 2543 0d62 61E0      		ldi r22,lo8(1)
 2544 0d64 70E0      		ldi r23,0
 2545 0d66 80EC      		ldi r24,lo8(-64)
 2546 0d68 90E0      		ldi r25,0
 2547 0d6a 0E94 0000 		call usart_set_baudrate_precalculated
 2548               	.L84:
 768:ServerLLDN.c  **** 
 769:ServerLLDN.c  **** 	#endif
 770:ServerLLDN.c  **** 	#endif
 771:ServerLLDN.c  **** 		for(;;)
 772:ServerLLDN.c  **** 		{
 773:ServerLLDN.c  **** 			SYS_TaskHandler();
 2549               		.loc 6 773 0 discriminator 1
 2550 0d6e 0E94 0000 		call SYS_TaskHandler
 774:ServerLLDN.c  **** 			APP_TaskHandler();
 2551               		.loc 6 774 0 discriminator 1
 2552 0d72 0E94 0000 		call APP_TaskHandler
 775:ServerLLDN.c  **** 		}
 2553               		.loc 6 775 0 discriminator 1
 2554 0d76 00C0      		rjmp .L84
 2555               		.cfi_endproc
 2556               	.LFE147:
 2558               	.Letext0:
 2559               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 2560               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 2561               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 2562               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 2563               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 2564               		.file 12 "lldn.h"
 2565               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 2566               		.file 14 "config/config.h"
 2567               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:14     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:51     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:88     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:100    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:112    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:123    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:172    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:267    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:311    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:362    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:433    .text:0000019e macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:487    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:492    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:497    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:505    .text:000001d2 appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:567    .data.appPanState:00000000 appPanState
                            *COM*:000003f8 nodes_info_arr
                            *COM*:00000100 arr_slots
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:575    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:585    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:000001fc conf_req_arr
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:592    .bss.conf_req_index:00000000 conf_req_index
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:598    .data.counter_online:00000000 counter_online
                            *COM*:00000021 ACKFrame
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:605    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:611    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:617    .bss.macLLDNnumUplinkTS:00000000 macLLDNnumUplinkTS
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:622    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:628    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:634    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:640    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:646    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:650    .text:0000021e tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:690    .text:0000023e lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:725    .text:00000258 time_slot_handler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:760    .text:00000272 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:800    .text:00000296 end_of_online_handler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:840    .text:000002b2 teste_handler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:894    .text:000002ea addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1040   .text:000003c8 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1192   .text:000004ce CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1260   .text:0000051a appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1407   .text:000005f4 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1459   .text:0000063a appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1600   .text:00000706 appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1819   .text:000008ba appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:1953   .text:000009ac appInit
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:2038   .text:00000a22 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\cc97BxHg.s:2462   .text:00000cfe main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
NWK_DataReq
macsc_disable_cmp_int
__floatsisf
__addsf3
__divsf3
__mulsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
macsc_set_cmp2_int_cb
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
NWK_OpenEndpoint
PHY_SetPromiscuousMode
__tablejump2__
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
