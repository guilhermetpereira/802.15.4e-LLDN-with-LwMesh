   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  91               	baudctrl_1mhz:
  92 0000 3300      		.word	51
  93 0002 1900      		.word	25
  94 0004 0C00      		.word	12
  95 0006 0600      		.word	6
  96 0008 0300      		.word	3
  97 000a 0200      		.word	2
  98 000c 0100      		.word	1
  99 000e FF00      		.word	255
 100               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 103               	baudctrl_8mhz:
 104 0000 A001      		.word	416
 105 0002 CF00      		.word	207
 106 0004 6700      		.word	103
 107 0006 3300      		.word	51
 108 0008 1900      		.word	25
 109 000a 0C00      		.word	12
 110 000c 0700      		.word	7
 111 000e 0800      		.word	8
 112               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 115               	baudctrl_16mhz:
 116 0000 4003      		.word	832
 117 0002 A001      		.word	416
 118 0004 CF00      		.word	207
 119 0006 6700      		.word	103
 120 0008 3300      		.word	51
 121 000a 1900      		.word	25
 122 000c 1000      		.word	16
 123 000e 1000      		.word	16
 124               		.text
 126               	usart_double_baud_enable:
 127               	.LFB101:
 128               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 129               		.loc 2 515 0
 130               		.cfi_startproc
 131 0034 CF93      		push r28
 132               	.LCFI6:
 133               		.cfi_def_cfa_offset 3
 134               		.cfi_offset 28, -2
 135 0036 DF93      		push r29
 136               	.LCFI7:
 137               		.cfi_def_cfa_offset 4
 138               		.cfi_offset 29, -3
 139 0038 00D0      		rcall .
 140               	.LCFI8:
 141               		.cfi_def_cfa_offset 6
 142 003a CDB7      		in r28,__SP_L__
 143 003c DEB7      		in r29,__SP_H__
 144               	.LCFI9:
 145               		.cfi_def_cfa_register 28
 146               	/* prologue: function */
 147               	/* frame size = 2 */
 148               	/* stack size = 4 */
 149               	.L__stack_usage = 4
 150 003e 9A83      		std Y+2,r25
 151 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 152               		.loc 2 516 0
 153 0042 8981      		ldd r24,Y+1
 154 0044 9A81      		ldd r25,Y+2
 155 0046 FC01      		movw r30,r24
 156 0048 8081      		ld r24,Z
 157 004a 282F      		mov r18,r24
 158 004c 2260      		ori r18,lo8(2)
 159 004e 8981      		ldd r24,Y+1
 160 0050 9A81      		ldd r25,Y+2
 161 0052 FC01      		movw r30,r24
 162 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 163               		.loc 2 517 0
 164 0056 0000      		nop
 165               	/* epilogue start */
 166 0058 0F90      		pop __tmp_reg__
 167 005a 0F90      		pop __tmp_reg__
 168 005c DF91      		pop r29
 169 005e CF91      		pop r28
 170 0060 0895      		ret
 171               		.cfi_endproc
 172               	.LFE101:
 175               	usart_serial_init:
 176               	.LFB104:
 177               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 178               		.loc 3 77 0
 179               		.cfi_startproc
 180 0062 CF93      		push r28
 181               	.LCFI10:
 182               		.cfi_def_cfa_offset 3
 183               		.cfi_offset 28, -2
 184 0064 DF93      		push r29
 185               	.LCFI11:
 186               		.cfi_def_cfa_offset 4
 187               		.cfi_offset 29, -3
 188 0066 CDB7      		in r28,__SP_L__
 189 0068 DEB7      		in r29,__SP_H__
 190               	.LCFI12:
 191               		.cfi_def_cfa_register 28
 192 006a 2B97      		sbiw r28,11
 193               	.LCFI13:
 194               		.cfi_def_cfa_offset 15
 195 006c 0FB6      		in __tmp_reg__,__SREG__
 196 006e F894      		cli
 197 0070 DEBF      		out __SP_H__,r29
 198 0072 0FBE      		out __SREG__,__tmp_reg__
 199 0074 CDBF      		out __SP_L__,r28
 200               	/* prologue: function */
 201               	/* frame size = 11 */
 202               	/* stack size = 13 */
 203               	.L__stack_usage = 13
 204 0076 9987      		std Y+9,r25
 205 0078 8887      		std Y+8,r24
 206 007a 7B87      		std Y+11,r23
 207 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 208               		.loc 3 80 0
 209 007e 8A85      		ldd r24,Y+10
 210 0080 9B85      		ldd r25,Y+11
 211 0082 FC01      		movw r30,r24
 212 0084 8481      		ldd r24,Z+4
 213 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 214               		.loc 3 81 0
 215 0088 8A85      		ldd r24,Y+10
 216 008a 9B85      		ldd r25,Y+11
 217 008c FC01      		movw r30,r24
 218 008e 8581      		ldd r24,Z+5
 219 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 220               		.loc 3 82 0
 221 0092 8A85      		ldd r24,Y+10
 222 0094 9B85      		ldd r25,Y+11
 223 0096 FC01      		movw r30,r24
 224 0098 8681      		ldd r24,Z+6
 225 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 226               		.loc 3 83 0
 227 009c 8A85      		ldd r24,Y+10
 228 009e 9B85      		ldd r25,Y+11
 229 00a0 FC01      		movw r30,r24
 230 00a2 8081      		ld r24,Z
 231 00a4 9181      		ldd r25,Z+1
 232 00a6 A281      		ldd r26,Z+2
 233 00a8 B381      		ldd r27,Z+3
 234 00aa 8983      		std Y+1,r24
 235 00ac 9A83      		std Y+2,r25
 236 00ae AB83      		std Y+3,r26
 237 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 238               		.loc 3 85 0
 239 00b2 8885      		ldd r24,Y+8
 240 00b4 9985      		ldd r25,Y+9
 241 00b6 9E01      		movw r18,r28
 242 00b8 2F5F      		subi r18,-1
 243 00ba 3F4F      		sbci r19,-1
 244 00bc B901      		movw r22,r18
 245 00be 0E94 0000 		call usart_init_rs232
 246 00c2 8823      		tst r24
 247 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 248               		.loc 3 86 0
 249 00c6 81E0      		ldi r24,lo8(1)
 250 00c8 00C0      		rjmp .L9
 251               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 252               		.loc 3 88 0
 253 00ca 80E0      		ldi r24,0
 254               	.L9:
 255               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 256               		.loc 3 90 0 discriminator 1
 257 00cc 2B96      		adiw r28,11
 258 00ce 0FB6      		in __tmp_reg__,__SREG__
 259 00d0 F894      		cli
 260 00d2 DEBF      		out __SP_H__,r29
 261 00d4 0FBE      		out __SREG__,__tmp_reg__
 262 00d6 CDBF      		out __SP_L__,r28
 263 00d8 DF91      		pop r29
 264 00da CF91      		pop r28
 265 00dc 0895      		ret
 266               		.cfi_endproc
 267               	.LFE104:
 270               	usart_serial_putchar:
 271               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 272               		.loc 3 100 0
 273               		.cfi_startproc
 274 00de CF93      		push r28
 275               	.LCFI14:
 276               		.cfi_def_cfa_offset 3
 277               		.cfi_offset 28, -2
 278 00e0 DF93      		push r29
 279               	.LCFI15:
 280               		.cfi_def_cfa_offset 4
 281               		.cfi_offset 29, -3
 282 00e2 00D0      		rcall .
 283 00e4 1F92      		push __zero_reg__
 284               	.LCFI16:
 285               		.cfi_def_cfa_offset 7
 286 00e6 CDB7      		in r28,__SP_L__
 287 00e8 DEB7      		in r29,__SP_H__
 288               	.LCFI17:
 289               		.cfi_def_cfa_register 28
 290               	/* prologue: function */
 291               	/* frame size = 3 */
 292               	/* stack size = 5 */
 293               	.L__stack_usage = 5
 294 00ea 9A83      		std Y+2,r25
 295 00ec 8983      		std Y+1,r24
 296 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 297               		.loc 3 101 0
 298 00f0 8981      		ldd r24,Y+1
 299 00f2 9A81      		ldd r25,Y+2
 300 00f4 6B81      		ldd r22,Y+3
 301 00f6 0E94 0000 		call usart_putchar
 302               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 303               		.loc 3 102 0
 304 00fa 0F90      		pop __tmp_reg__
 305 00fc 0F90      		pop __tmp_reg__
 306 00fe 0F90      		pop __tmp_reg__
 307 0100 DF91      		pop r29
 308 0102 CF91      		pop r28
 309 0104 0895      		ret
 310               		.cfi_endproc
 311               	.LFE105:
 314               	usart_serial_getchar:
 315               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 316               		.loc 3 111 0
 317               		.cfi_startproc
 318 0106 CF93      		push r28
 319               	.LCFI18:
 320               		.cfi_def_cfa_offset 3
 321               		.cfi_offset 28, -2
 322 0108 DF93      		push r29
 323               	.LCFI19:
 324               		.cfi_def_cfa_offset 4
 325               		.cfi_offset 29, -3
 326 010a 00D0      		rcall .
 327 010c 00D0      		rcall .
 328               	.LCFI20:
 329               		.cfi_def_cfa_offset 8
 330 010e CDB7      		in r28,__SP_L__
 331 0110 DEB7      		in r29,__SP_H__
 332               	.LCFI21:
 333               		.cfi_def_cfa_register 28
 334               	/* prologue: function */
 335               	/* frame size = 4 */
 336               	/* stack size = 6 */
 337               	.L__stack_usage = 6
 338 0112 9A83      		std Y+2,r25
 339 0114 8983      		std Y+1,r24
 340 0116 7C83      		std Y+4,r23
 341 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 342               		.loc 3 112 0
 343 011a 8981      		ldd r24,Y+1
 344 011c 9A81      		ldd r25,Y+2
 345 011e 0E94 0000 		call usart_getchar
 346 0122 282F      		mov r18,r24
 347 0124 8B81      		ldd r24,Y+3
 348 0126 9C81      		ldd r25,Y+4
 349 0128 FC01      		movw r30,r24
 350 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 351               		.loc 3 113 0
 352 012c 0000      		nop
 353               	/* epilogue start */
 354 012e 0F90      		pop __tmp_reg__
 355 0130 0F90      		pop __tmp_reg__
 356 0132 0F90      		pop __tmp_reg__
 357 0134 0F90      		pop __tmp_reg__
 358 0136 DF91      		pop r29
 359 0138 CF91      		pop r28
 360 013a 0895      		ret
 361               		.cfi_endproc
 362               	.LFE106:
 365               	stdio_serial_init:
 366               	.LFB107:
 367               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 368               		.loc 4 90 0
 369               		.cfi_startproc
 370 013c CF93      		push r28
 371               	.LCFI22:
 372               		.cfi_def_cfa_offset 3
 373               		.cfi_offset 28, -2
 374 013e DF93      		push r29
 375               	.LCFI23:
 376               		.cfi_def_cfa_offset 4
 377               		.cfi_offset 29, -3
 378 0140 00D0      		rcall .
 379 0142 00D0      		rcall .
 380               	.LCFI24:
 381               		.cfi_def_cfa_offset 8
 382 0144 CDB7      		in r28,__SP_L__
 383 0146 DEB7      		in r29,__SP_H__
 384               	.LCFI25:
 385               		.cfi_def_cfa_register 28
 386               	/* prologue: function */
 387               	/* frame size = 4 */
 388               	/* stack size = 6 */
 389               	.L__stack_usage = 6
 390 0148 9A83      		std Y+2,r25
 391 014a 8983      		std Y+1,r24
 392 014c 7C83      		std Y+4,r23
 393 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 394               		.loc 4 91 0
 395 0150 8981      		ldd r24,Y+1
 396 0152 9A81      		ldd r25,Y+2
 397 0154 9093 0000 		sts stdio_base+1,r25
 398 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 399               		.loc 4 92 0
 400 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 401 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 402 0160 9093 0000 		sts ptr_put+1,r25
 403 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 404               		.loc 4 93 0
 405 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 406 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 407 016c 9093 0000 		sts ptr_get+1,r25
 408 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 409               		.loc 4 95 0
 410 0174 2B81      		ldd r18,Y+3
 411 0176 3C81      		ldd r19,Y+4
 412 0178 8981      		ldd r24,Y+1
 413 017a 9A81      		ldd r25,Y+2
 414 017c B901      		movw r22,r18
 415 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 416               		.loc 4 107 0
 417 0182 60E0      		ldi r22,lo8(gs(_read))
 418 0184 70E0      		ldi r23,hi8(gs(_read))
 419 0186 80E0      		ldi r24,lo8(gs(_write))
 420 0188 90E0      		ldi r25,hi8(gs(_write))
 421 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 422               		.loc 4 120 0
 423 018e 0000      		nop
 424               	/* epilogue start */
 425 0190 0F90      		pop __tmp_reg__
 426 0192 0F90      		pop __tmp_reg__
 427 0194 0F90      		pop __tmp_reg__
 428 0196 0F90      		pop __tmp_reg__
 429 0198 DF91      		pop r29
 430 019a CF91      		pop r28
 431 019c 0895      		ret
 432               		.cfi_endproc
 433               	.LFE107:
 436               	macsc_read32:
 437               	.LFB108:
 438               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 439               		.loc 5 120 0
 440               		.cfi_startproc
 441 019e CF93      		push r28
 442               	.LCFI26:
 443               		.cfi_def_cfa_offset 3
 444               		.cfi_offset 28, -2
 445 01a0 DF93      		push r29
 446               	.LCFI27:
 447               		.cfi_def_cfa_offset 4
 448               		.cfi_offset 29, -3
 449 01a2 CDB7      		in r28,__SP_L__
 450 01a4 DEB7      		in r29,__SP_H__
 451               	.LCFI28:
 452               		.cfi_def_cfa_register 28
 453 01a6 2C97      		sbiw r28,12
 454               	.LCFI29:
 455               		.cfi_def_cfa_offset 16
 456 01a8 0FB6      		in __tmp_reg__,__SREG__
 457 01aa F894      		cli
 458 01ac DEBF      		out __SP_H__,r29
 459 01ae 0FBE      		out __SREG__,__tmp_reg__
 460 01b0 CDBF      		out __SP_L__,r28
 461               	/* prologue: function */
 462               	/* frame size = 12 */
 463               	/* stack size = 14 */
 464               	.L__stack_usage = 14
 465 01b2 9E83      		std Y+6,r25
 466 01b4 8D83      		std Y+5,r24
 467 01b6 7887      		std Y+8,r23
 468 01b8 6F83      		std Y+7,r22
 469 01ba 5A87      		std Y+10,r21
 470 01bc 4987      		std Y+9,r20
 471 01be 3C87      		std Y+12,r19
 472 01c0 2B87      		std Y+11,r18
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 473               		.loc 5 127 0
 474 01c2 8B85      		ldd r24,Y+11
 475 01c4 9C85      		ldd r25,Y+12
 476 01c6 FC01      		movw r30,r24
 477 01c8 8081      		ld r24,Z
 478 01ca 8983      		std Y+1,r24
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 479               		.loc 5 128 0
 480 01cc 8985      		ldd r24,Y+9
 481 01ce 9A85      		ldd r25,Y+10
 482 01d0 FC01      		movw r30,r24
 483 01d2 8081      		ld r24,Z
 484 01d4 8A83      		std Y+2,r24
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 485               		.loc 5 129 0
 486 01d6 8F81      		ldd r24,Y+7
 487 01d8 9885      		ldd r25,Y+8
 488 01da FC01      		movw r30,r24
 489 01dc 8081      		ld r24,Z
 490 01de 8B83      		std Y+3,r24
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 491               		.loc 5 130 0
 492 01e0 8D81      		ldd r24,Y+5
 493 01e2 9E81      		ldd r25,Y+6
 494 01e4 FC01      		movw r30,r24
 495 01e6 8081      		ld r24,Z
 496 01e8 8C83      		std Y+4,r24
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 497               		.loc 5 132 0
 498 01ea 8981      		ldd r24,Y+1
 499 01ec 9A81      		ldd r25,Y+2
 500 01ee AB81      		ldd r26,Y+3
 501 01f0 BC81      		ldd r27,Y+4
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 502               		.loc 5 133 0
 503 01f2 BC01      		movw r22,r24
 504 01f4 CD01      		movw r24,r26
 505               	/* epilogue start */
 506 01f6 2C96      		adiw r28,12
 507 01f8 0FB6      		in __tmp_reg__,__SREG__
 508 01fa F894      		cli
 509 01fc DEBF      		out __SP_H__,r29
 510 01fe 0FBE      		out __SREG__,__tmp_reg__
 511 0200 CDBF      		out __SP_L__,r28
 512 0202 DF91      		pop r29
 513 0204 CF91      		pop r28
 514 0206 0895      		ret
 515               		.cfi_endproc
 516               	.LFE108:
 519               	macsc_write_count:
 520               	.LFB113:
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 521               		.loc 5 345 0
 522               		.cfi_startproc
 523 0208 CF93      		push r28
 524               	.LCFI30:
 525               		.cfi_def_cfa_offset 3
 526               		.cfi_offset 28, -2
 527 020a DF93      		push r29
 528               	.LCFI31:
 529               		.cfi_def_cfa_offset 4
 530               		.cfi_offset 29, -3
 531 020c CDB7      		in r28,__SP_L__
 532 020e DEB7      		in r29,__SP_H__
 533               	.LCFI32:
 534               		.cfi_def_cfa_register 28
 535 0210 2897      		sbiw r28,8
 536               	.LCFI33:
 537               		.cfi_def_cfa_offset 12
 538 0212 0FB6      		in __tmp_reg__,__SREG__
 539 0214 F894      		cli
 540 0216 DEBF      		out __SP_H__,r29
 541 0218 0FBE      		out __SREG__,__tmp_reg__
 542 021a CDBF      		out __SP_L__,r28
 543               	/* prologue: function */
 544               	/* frame size = 8 */
 545               	/* stack size = 10 */
 546               	.L__stack_usage = 10
 547 021c 6D83      		std Y+5,r22
 548 021e 7E83      		std Y+6,r23
 549 0220 8F83      		std Y+7,r24
 550 0222 9887      		std Y+8,r25
 551               	.LBB2:
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 552               		.loc 5 346 0
 553 0224 8D81      		ldd r24,Y+5
 554 0226 9E81      		ldd r25,Y+6
 555 0228 AF81      		ldd r26,Y+7
 556 022a B885      		ldd r27,Y+8
 557 022c 8983      		std Y+1,r24
 558 022e 9A83      		std Y+2,r25
 559 0230 AB83      		std Y+3,r26
 560 0232 BC83      		std Y+4,r27
 561 0234 84EE      		ldi r24,lo8(-28)
 562 0236 90E0      		ldi r25,0
 563 0238 2C81      		ldd r18,Y+4
 564 023a FC01      		movw r30,r24
 565 023c 2083      		st Z,r18
 566 023e 83EE      		ldi r24,lo8(-29)
 567 0240 90E0      		ldi r25,0
 568 0242 2B81      		ldd r18,Y+3
 569 0244 FC01      		movw r30,r24
 570 0246 2083      		st Z,r18
 571 0248 82EE      		ldi r24,lo8(-30)
 572 024a 90E0      		ldi r25,0
 573 024c 2A81      		ldd r18,Y+2
 574 024e FC01      		movw r30,r24
 575 0250 2083      		st Z,r18
 576 0252 81EE      		ldi r24,lo8(-31)
 577 0254 90E0      		ldi r25,0
 578 0256 2981      		ldd r18,Y+1
 579 0258 FC01      		movw r30,r24
 580 025a 2083      		st Z,r18
 581               	.LBE2:
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 582               		.loc 5 347 0
 583 025c 0000      		nop
 584               	/* epilogue start */
 585 025e 2896      		adiw r28,8
 586 0260 0FB6      		in __tmp_reg__,__SREG__
 587 0262 F894      		cli
 588 0264 DEBF      		out __SP_H__,r29
 589 0266 0FBE      		out __SREG__,__tmp_reg__
 590 0268 CDBF      		out __SP_L__,r28
 591 026a DF91      		pop r29
 592 026c CF91      		pop r28
 593 026e 0895      		ret
 594               		.cfi_endproc
 595               	.LFE113:
 598               	macsc_read_count:
 599               	.LFB114:
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 600               		.loc 5 355 0
 601               		.cfi_startproc
 602 0270 CF93      		push r28
 603               	.LCFI34:
 604               		.cfi_def_cfa_offset 3
 605               		.cfi_offset 28, -2
 606 0272 DF93      		push r29
 607               	.LCFI35:
 608               		.cfi_def_cfa_offset 4
 609               		.cfi_offset 29, -3
 610 0274 CDB7      		in r28,__SP_L__
 611 0276 DEB7      		in r29,__SP_H__
 612               	.LCFI36:
 613               		.cfi_def_cfa_register 28
 614               	/* prologue: function */
 615               	/* frame size = 0 */
 616               	/* stack size = 2 */
 617               	.L__stack_usage = 2
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 618               		.loc 5 356 0
 619 0278 21EE      		ldi r18,lo8(-31)
 620 027a 30E0      		ldi r19,0
 621 027c 42EE      		ldi r20,lo8(-30)
 622 027e 50E0      		ldi r21,0
 623 0280 63EE      		ldi r22,lo8(-29)
 624 0282 70E0      		ldi r23,0
 625 0284 84EE      		ldi r24,lo8(-28)
 626 0286 90E0      		ldi r25,0
 627 0288 0E94 0000 		call macsc_read32
 628 028c DC01      		movw r26,r24
 629 028e CB01      		movw r24,r22
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 630               		.loc 5 357 0
 631 0290 BC01      		movw r22,r24
 632 0292 CD01      		movw r24,r26
 633               	/* epilogue start */
 634 0294 DF91      		pop r29
 635 0296 CF91      		pop r28
 636 0298 0895      		ret
 637               		.cfi_endproc
 638               	.LFE114:
 641               	macsc_enable_manual_bts:
 642               	.LFB121:
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 643               		.loc 5 444 0
 644               		.cfi_startproc
 645 029a CF93      		push r28
 646               	.LCFI37:
 647               		.cfi_def_cfa_offset 3
 648               		.cfi_offset 28, -2
 649 029c DF93      		push r29
 650               	.LCFI38:
 651               		.cfi_def_cfa_offset 4
 652               		.cfi_offset 29, -3
 653 029e CDB7      		in r28,__SP_L__
 654 02a0 DEB7      		in r29,__SP_H__
 655               	.LCFI39:
 656               		.cfi_def_cfa_register 28
 657               	/* prologue: function */
 658               	/* frame size = 0 */
 659               	/* stack size = 2 */
 660               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 661               		.loc 5 445 0
 662 02a2 8CED      		ldi r24,lo8(-36)
 663 02a4 90E0      		ldi r25,0
 664 02a6 2CED      		ldi r18,lo8(-36)
 665 02a8 30E0      		ldi r19,0
 666 02aa F901      		movw r30,r18
 667 02ac 2081      		ld r18,Z
 668 02ae 2064      		ori r18,lo8(64)
 669 02b0 FC01      		movw r30,r24
 670 02b2 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 671               		.loc 5 446 0
 672 02b4 8CED      		ldi r24,lo8(-36)
 673 02b6 90E0      		ldi r25,0
 674 02b8 2CED      		ldi r18,lo8(-36)
 675 02ba 30E0      		ldi r19,0
 676 02bc F901      		movw r30,r18
 677 02be 2081      		ld r18,Z
 678 02c0 277F      		andi r18,lo8(-9)
 679 02c2 FC01      		movw r30,r24
 680 02c4 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 681               		.loc 5 447 0
 682 02c6 0000      		nop
 683               	/* epilogue start */
 684 02c8 DF91      		pop r29
 685 02ca CF91      		pop r28
 686 02cc 0895      		ret
 687               		.cfi_endproc
 688               	.LFE121:
 690               	.global	appState
 691               		.section	.bss.appState,"aw",@nobits
 694               	appState:
 695 0000 00        		.zero	1
 696               		.section	.bss.msgReq,"aw",@nobits
 699               	msgReq:
 700 0000 0000 0000 		.zero	20
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 701               		.section	.bss.PanId,"aw",@nobits
 704               	PanId:
 705 0000 00        		.zero	1
 706               		.section	.rodata
 707               	.LC1:
 708 0000 0A52 4551 		.string	"\nREQ %d"
 708      2025 6400 
 709               		.text
 710               	.global	appSendData
 712               	appSendData:
 713               	.LFB130:
 714               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 715               		.loc 6 64 0
 716               		.cfi_startproc
 717 02ce CF93      		push r28
 718               	.LCFI40:
 719               		.cfi_def_cfa_offset 3
 720               		.cfi_offset 28, -2
 721 02d0 DF93      		push r29
 722               	.LCFI41:
 723               		.cfi_def_cfa_offset 4
 724               		.cfi_offset 29, -3
 725 02d2 CDB7      		in r28,__SP_L__
 726 02d4 DEB7      		in r29,__SP_H__
 727               	.LCFI42:
 728               		.cfi_def_cfa_register 28
 729               	/* prologue: function */
 730               	/* frame size = 0 */
 731               	/* stack size = 2 */
 732               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 733               		.loc 6 65 0
 734 02d6 8091 0000 		lds r24,msgReq+9
 735 02da 9091 0000 		lds r25,msgReq+9+1
 736 02de 892B      		or r24,r25
 737 02e0 01F0      		breq .L22
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 738               		.loc 6 67 0
 739 02e2 80E0      		ldi r24,lo8(msgReq)
 740 02e4 90E0      		ldi r25,hi8(msgReq)
 741 02e6 0E94 0000 		call NWK_DataReq
  68:ServerLLDN.c  **** 		#if PRINT
  69:ServerLLDN.c  **** 		printf("\nREQ %d",msgReq.options);
 742               		.loc 6 69 0
 743 02ea 8091 0000 		lds r24,msgReq+9
 744 02ee 9091 0000 		lds r25,msgReq+9+1
 745 02f2 292F      		mov r18,r25
 746 02f4 2F93      		push r18
 747 02f6 8F93      		push r24
 748 02f8 80E0      		ldi r24,lo8(.LC1)
 749 02fa 90E0      		ldi r25,hi8(.LC1)
 750 02fc 892F      		mov r24,r25
 751 02fe 8F93      		push r24
 752 0300 80E0      		ldi r24,lo8(.LC1)
 753 0302 90E0      		ldi r25,hi8(.LC1)
 754 0304 8F93      		push r24
 755 0306 0E94 0000 		call printf
 756 030a 0F90      		pop __tmp_reg__
 757 030c 0F90      		pop __tmp_reg__
 758 030e 0F90      		pop __tmp_reg__
 759 0310 0F90      		pop __tmp_reg__
 760               	.L22:
  70:ServerLLDN.c  **** 		#endif
  71:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  72:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(0);
  73:ServerLLDN.c  **** 	#endif
  74:ServerLLDN.c  **** 	}
  75:ServerLLDN.c  **** }
 761               		.loc 6 75 0
 762 0312 0000      		nop
 763               	/* epilogue start */
 764 0314 DF91      		pop r29
 765 0316 CF91      		pop r28
 766 0318 0895      		ret
 767               		.cfi_endproc
 768               	.LFE130:
 770               	.global	appPanState
 771               		.section	.bss.appPanState,"aw",@nobits
 774               	appPanState:
 775 0000 00        		.zero	1
 776               		.comm	nodes_info_arr,3700,1
 777               	.global	config_request_frame
 778               		.section	.data.config_request_frame,"aw",@progbits
 781               	config_request_frame:
 782 0000 0F        		.byte	15
 783 0001 00        		.byte	0
 784 0002 0F        		.byte	15
 785 0003 0000      		.zero	2
 786 0005 80        		.byte	128
 787               	.global	conf_req_list
 788               		.section	.bss.conf_req_list,"aw",@nobits
 791               	conf_req_list:
 792 0000 0000      		.zero	2
 793               		.comm	stack_conf_req,20,1
 794               		.comm	ACKFrame,33,1
 795               		.comm	ACKFrame_aux,33,1
 796               	.global	ACKFrame_size
 797               		.section	.bss.ACKFrame_size,"aw",@nobits
 800               	ACKFrame_size:
 801 0000 0000      		.zero	2
 802               	.global	beaconInterval
 803               		.section	.bss.beaconInterval,"aw",@nobits
 806               	beaconInterval:
 807 0000 0000 0000 		.zero	4
 808               	.global	beaconInterval_association
 809               		.section	.bss.beaconInterval_association,"aw",@nobits
 812               	beaconInterval_association:
 813 0000 0000 0000 		.zero	4
 814               		.section	.bss.tmrDelay,"aw",@nobits
 817               	tmrDelay:
 818 0000 0000 0000 		.zero	13
 818      0000 0000 
 818      0000 0000 
 818      00
 819               	.global	assTimeSlot
 820               		.section	.bss.assTimeSlot,"aw",@nobits
 823               	assTimeSlot:
 824 0000 0000      		.zero	2
 825               	.global	counter_associados
 826               		.section	.bss.counter_associados,"aw",@nobits
 829               	counter_associados:
 830 0000 0000      		.zero	2
 831               	.global	cycles_counter
 832               		.section	.data.cycles_counter,"aw",@progbits
 835               	cycles_counter:
 836 0000 01        		.byte	1
 837               	.global	association_request
 838               		.section	.bss.association_request,"aw",@nobits
 841               	association_request:
 842 0000 00        		.zero	1
 843               		.comm	msg_info_array,6600,1
 844               	.global	size_msg_info
 845               		.section	.bss.size_msg_info,"aw",@nobits
 848               	size_msg_info:
 849 0000 0000      		.zero	2
 850               	.global	data_received
 851               		.section	.bss.data_received,"aw",@nobits
 854               	data_received:
 855 0000 00        		.zero	1
 856               	.global	PLR
 857               		.section	.bss.PLR,"aw",@nobits
 860               	PLR:
 861 0000 0000 0000 		.zero	4
 862               	.global	PER
 863               		.section	.bss.PER,"aw",@nobits
 866               	PER:
 867 0000 0000 0000 		.zero	4
 868               		.comm	retransmit_ts_array,32,1
 869               	.global	retransmit_ts_array_counter
 870               		.section	.bss.retransmit_ts_array_counter,"aw",@nobits
 873               	retransmit_ts_array_counter:
 874 0000 0000      		.zero	2
 875               	.global	counter_delay_msg
 876               		.section	.bss.counter_delay_msg,"aw",@nobits
 879               	counter_delay_msg:
 880 0000 0000      		.zero	2
 881               	.global	cmp_value_start_superframe
 882               		.section	.bss.cmp_value_start_superframe,"aw",@nobits
 885               	cmp_value_start_superframe:
 886 0000 0000 0000 		.zero	4
 887               		.section	.data.msgReqGACK,"aw",@progbits
 890               	msgReqGACK:
 891 0000 0000 0000 		.zero	5
 891      00
 892 0005 0000      		.word	0
 893 0007 00        		.byte	0
 894 0008 00        		.byte	0
 895 0009 0040      		.word	16384
 896 000b 0000      		.zero	2
 897 000d 0000      		.word	ACKFrame
 898 000f 0000 0000 		.zero	5
 898      00
 899               		.text
 901               	tmrDelayHandler:
 902               	.LFB131:
  76:ServerLLDN.c  **** 
  77:ServerLLDN.c  **** #if APP_COORDINATOR
  78:ServerLLDN.c  **** 
  79:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  80:ServerLLDN.c  **** 	
  81:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  82:ServerLLDN.c  **** 	
  83:ServerLLDN.c  **** 	/* Configuration Request Frames */
  84:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  85:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  86:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  87:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  88:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  89:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  90:ServerLLDN.c  **** 
  91:ServerLLDN.c  **** 
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  94:ServerLLDN.c  **** 	uint8_t stack_conf_req[20];
  95:ServerLLDN.c  **** 	
  96:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  97:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	
  98:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame_aux;
  99:ServerLLDN.c  **** 	
 100:ServerLLDN.c  **** 	int ACKFrame_size = 0;
 101:ServerLLDN.c  **** 	
 102:ServerLLDN.c  **** 
 103:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
 104:ServerLLDN.c  **** 	float beaconInterval_association = 0;
 105:ServerLLDN.c  **** 	
 106:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
 107:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
 108:ServerLLDN.c  **** 	 */
 109:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 110:ServerLLDN.c  **** 	
 111:ServerLLDN.c  **** 	/*  Control variables for testing */	
 112:ServerLLDN.c  **** 	int assTimeSlot = 0;
 113:ServerLLDN.c  **** 
 114:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 115:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 116:ServerLLDN.c  **** 
 117:ServerLLDN.c  **** 	bool association_request = false;
 118:ServerLLDN.c  **** 
 119:ServerLLDN.c  **** 	/* data related variables */
 120:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 121:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 122:ServerLLDN.c  **** 	bool data_received = false;	
 123:ServerLLDN.c  **** 	float PLR = 0;
 124:ServerLLDN.c  **** 	float PER = 0;
 125:ServerLLDN.c  **** 	uint8_t retransmit_ts_array[32];
 126:ServerLLDN.c  **** 	int retransmit_ts_array_counter = 0;
 127:ServerLLDN.c  **** 	
 128:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 129:ServerLLDN.c  **** 	uint32_t cmp_value_start_superframe = 0;
 130:ServerLLDN.c  **** 	
 131:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqGACK = { .dstAddr = 0,
 132:ServerLLDN.c  **** 										.dstEndpoint = APP_BEACON_ENDPOINT,
 133:ServerLLDN.c  **** 										.srcEndpoint = APP_BEACON_ENDPOINT,
 134:ServerLLDN.c  **** 										.options = NWK_OPT_LLDN_ACK,
 135:ServerLLDN.c  **** 										.data = (uint8_t*)&ACKFrame};
 136:ServerLLDN.c  **** 
 137:ServerLLDN.c  **** 	
 138:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 139:ServerLLDN.c  **** 	{
 903               		.loc 6 139 0
 904               		.cfi_startproc
 905 031a CF93      		push r28
 906               	.LCFI43:
 907               		.cfi_def_cfa_offset 3
 908               		.cfi_offset 28, -2
 909 031c DF93      		push r29
 910               	.LCFI44:
 911               		.cfi_def_cfa_offset 4
 912               		.cfi_offset 29, -3
 913 031e 00D0      		rcall .
 914               	.LCFI45:
 915               		.cfi_def_cfa_offset 6
 916 0320 CDB7      		in r28,__SP_L__
 917 0322 DEB7      		in r29,__SP_H__
 918               	.LCFI46:
 919               		.cfi_def_cfa_register 28
 920               	/* prologue: function */
 921               	/* frame size = 2 */
 922               	/* stack size = 4 */
 923               	.L__stack_usage = 4
 924 0324 9A83      		std Y+2,r25
 925 0326 8983      		std Y+1,r24
 140:ServerLLDN.c  **** 		#if PRINT
 141:ServerLLDN.c  **** 		// printf("\ndelay handler");
 142:ServerLLDN.c  **** 		#endif
 143:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 926               		.loc 6 143 0
 927 0328 82E0      		ldi r24,lo8(2)
 928 032a 8093 0000 		sts appState,r24
 144:ServerLLDN.c  **** 	}
 929               		.loc 6 144 0
 930 032e 0000      		nop
 931               	/* epilogue start */
 932 0330 0F90      		pop __tmp_reg__
 933 0332 0F90      		pop __tmp_reg__
 934 0334 DF91      		pop r29
 935 0336 CF91      		pop r28
 936 0338 0895      		ret
 937               		.cfi_endproc
 938               	.LFE131:
 941               	lldn_server_beacon:
 942               	.LFB132:
 145:ServerLLDN.c  **** 	
 146:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 147:ServerLLDN.c  **** 	{
 943               		.loc 6 147 0
 944               		.cfi_startproc
 945 033a CF93      		push r28
 946               	.LCFI47:
 947               		.cfi_def_cfa_offset 3
 948               		.cfi_offset 28, -2
 949 033c DF93      		push r29
 950               	.LCFI48:
 951               		.cfi_def_cfa_offset 4
 952               		.cfi_offset 29, -3
 953 033e CDB7      		in r28,__SP_L__
 954 0340 DEB7      		in r29,__SP_H__
 955               	.LCFI49:
 956               		.cfi_def_cfa_register 28
 957               	/* prologue: function */
 958               	/* frame size = 0 */
 959               	/* stack size = 2 */
 960               	.L__stack_usage = 2
 148:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 961               		.loc 6 148 0
 962 0342 0E94 0000 		call macsc_enable_manual_bts
 149:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 963               		.loc 6 149 0
 964 0346 82E0      		ldi r24,lo8(2)
 965 0348 8093 0000 		sts appState,r24
 150:ServerLLDN.c  **** 	}
 966               		.loc 6 150 0
 967 034c 0000      		nop
 968               	/* epilogue start */
 969 034e DF91      		pop r29
 970 0350 CF91      		pop r28
 971 0352 0895      		ret
 972               		.cfi_endproc
 973               	.LFE132:
 976               	downlink_delay_handler:
 977               	.LFB133:
 151:ServerLLDN.c  **** 	
 152:ServerLLDN.c  **** 
 153:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 154:ServerLLDN.c  **** 	{
 978               		.loc 6 154 0
 979               		.cfi_startproc
 980 0354 CF93      		push r28
 981               	.LCFI50:
 982               		.cfi_def_cfa_offset 3
 983               		.cfi_offset 28, -2
 984 0356 DF93      		push r29
 985               	.LCFI51:
 986               		.cfi_def_cfa_offset 4
 987               		.cfi_offset 29, -3
 988 0358 CDB7      		in r28,__SP_L__
 989 035a DEB7      		in r29,__SP_H__
 990               	.LCFI52:
 991               		.cfi_def_cfa_register 28
 992               	/* prologue: function */
 993               	/* frame size = 0 */
 994               	/* stack size = 2 */
 995               	.L__stack_usage = 2
 155:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 996               		.loc 6 155 0
 997 035c 8091 0000 		lds r24,msgReq+9
 998 0360 9091 0000 		lds r25,msgReq+9+1
 999 0364 8115      		cp r24,__zero_reg__
 1000 0366 9048      		sbci r25,-128
 1001 0368 01F4      		brne .L27
 156:ServerLLDN.c  **** 		{
 157:ServerLLDN.c  **** 			counter_delay_msg++;
 1002               		.loc 6 157 0
 1003 036a 8091 0000 		lds r24,counter_delay_msg
 1004 036e 9091 0000 		lds r25,counter_delay_msg+1
 1005 0372 0196      		adiw r24,1
 1006 0374 9093 0000 		sts counter_delay_msg+1,r25
 1007 0378 8093 0000 		sts counter_delay_msg,r24
 158:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 1008               		.loc 6 158 0
 1009 037c 82E0      		ldi r24,lo8(2)
 1010 037e 8093 0000 		sts appState,r24
 1011               	.L27:
 159:ServerLLDN.c  **** 		}
 160:ServerLLDN.c  **** 	}
 1012               		.loc 6 160 0
 1013 0382 0000      		nop
 1014               	/* epilogue start */
 1015 0384 DF91      		pop r29
 1016 0386 CF91      		pop r28
 1017 0388 0895      		ret
 1018               		.cfi_endproc
 1019               	.LFE133:
 1022               	end_of_association_delay_handler:
 1023               	.LFB134:
 161:ServerLLDN.c  **** 
 162:ServerLLDN.c  **** 	static void end_of_association_delay_handler(void)
 163:ServerLLDN.c  **** 	{
 1024               		.loc 6 163 0
 1025               		.cfi_startproc
 1026 038a CF93      		push r28
 1027               	.LCFI53:
 1028               		.cfi_def_cfa_offset 3
 1029               		.cfi_offset 28, -2
 1030 038c DF93      		push r29
 1031               	.LCFI54:
 1032               		.cfi_def_cfa_offset 4
 1033               		.cfi_offset 29, -3
 1034 038e CDB7      		in r28,__SP_L__
 1035 0390 DEB7      		in r29,__SP_H__
 1036               	.LCFI55:
 1037               		.cfi_def_cfa_register 28
 1038               	/* prologue: function */
 1039               	/* frame size = 0 */
 1040               	/* stack size = 2 */
 1041               	.L__stack_usage = 2
 164:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 1042               		.loc 6 164 0
 1043 0392 83E0      		ldi r24,lo8(3)
 1044 0394 8093 0000 		sts appState,r24
 165:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 1045               		.loc 6 165 0
 1046 0398 88E0      		ldi r24,lo8(8)
 1047 039a 8093 0000 		sts appPanState,r24
 166:ServerLLDN.c  **** 	}
 1048               		.loc 6 166 0
 1049 039e 0000      		nop
 1050               	/* epilogue start */
 1051 03a0 DF91      		pop r29
 1052 03a2 CF91      		pop r28
 1053 03a4 0895      		ret
 1054               		.cfi_endproc
 1055               	.LFE134:
 1058               	addToAckArray:
 1059               	.LFB135:
 167:ServerLLDN.c  **** 	
 168:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 169:ServerLLDN.c  **** 	static void teste_handler(void)
 170:ServerLLDN.c  **** 	{
 171:ServerLLDN.c  **** 		if(msgReq.options)
 172:ServerLLDN.c  **** 			// printf("\n***TIMESLOT****");
 173:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 174:ServerLLDN.c  **** 	}
 175:ServerLLDN.c  **** 	#endif
 176:ServerLLDN.c  **** 	
 177:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 178:ServerLLDN.c  **** 	{	
 1060               		.loc 6 178 0
 1061               		.cfi_startproc
 1062 03a6 CF93      		push r28
 1063               	.LCFI56:
 1064               		.cfi_def_cfa_offset 3
 1065               		.cfi_offset 28, -2
 1066 03a8 DF93      		push r29
 1067               	.LCFI57:
 1068               		.cfi_def_cfa_offset 4
 1069               		.cfi_offset 29, -3
 1070 03aa 00D0      		rcall .
 1071 03ac 00D0      		rcall .
 1072 03ae 1F92      		push __zero_reg__
 1073               	.LCFI58:
 1074               		.cfi_def_cfa_offset 9
 1075 03b0 CDB7      		in r28,__SP_L__
 1076 03b2 DEB7      		in r29,__SP_H__
 1077               	.LCFI59:
 1078               		.cfi_def_cfa_register 28
 1079               	/* prologue: function */
 1080               	/* frame size = 5 */
 1081               	/* stack size = 7 */
 1082               	.L__stack_usage = 7
 1083 03b4 8D83      		std Y+5,r24
 179:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 1084               		.loc 6 179 0
 1085 03b6 8D81      		ldd r24,Y+5
 1086 03b8 8695      		lsr r24
 1087 03ba 8695      		lsr r24
 1088 03bc 8695      		lsr r24
 1089 03be 882F      		mov r24,r24
 1090 03c0 90E0      		ldi r25,0
 1091 03c2 9A83      		std Y+2,r25
 1092 03c4 8983      		std Y+1,r24
 180:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 1093               		.loc 6 180 0
 1094 03c6 8D81      		ldd r24,Y+5
 1095 03c8 882F      		mov r24,r24
 1096 03ca 90E0      		ldi r25,0
 1097 03cc 8770      		andi r24,7
 1098 03ce 9927      		clr r25
 1099 03d0 28E0      		ldi r18,lo8(8)
 1100 03d2 30E0      		ldi r19,0
 1101 03d4 A901      		movw r20,r18
 1102 03d6 481B      		sub r20,r24
 1103 03d8 590B      		sbc r21,r25
 1104 03da CA01      		movw r24,r20
 1105 03dc 9C83      		std Y+4,r25
 1106 03de 8B83      		std Y+3,r24
 181:ServerLLDN.c  **** 		
 182:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1107               		.loc 6 182 0
 1108 03e0 8981      		ldd r24,Y+1
 1109 03e2 9A81      		ldd r25,Y+2
 1110 03e4 8050      		subi r24,lo8(-(ACKFrame+1))
 1111 03e6 9040      		sbci r25,hi8(-(ACKFrame+1))
 1112 03e8 FC01      		movw r30,r24
 1113 03ea 8081      		ld r24,Z
 1114 03ec 882F      		mov r24,r24
 1115 03ee 90E0      		ldi r25,0
 1116 03f0 0B80      		ldd r0,Y+3
 1117 03f2 00C0      		rjmp 2f
 1118               		1:
 1119 03f4 9595      		asr r25
 1120 03f6 8795      		ror r24
 1121               		2:
 1122 03f8 0A94      		dec r0
 1123 03fa 02F4      		brpl 1b
 1124 03fc 8170      		andi r24,1
 1125 03fe 9927      		clr r25
 1126 0400 892B      		or r24,r25
 1127 0402 01F0      		breq .L30
 183:ServerLLDN.c  **** 		{
 184:ServerLLDN.c  **** 			// printf("\nAddr rep %d", addres);
 185:ServerLLDN.c  **** 			return false;
 1128               		.loc 6 185 0
 1129 0404 80E0      		ldi r24,0
 1130 0406 00C0      		rjmp .L31
 1131               	.L30:
 186:ServerLLDN.c  **** 		}
 187:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 1132               		.loc 6 187 0
 1133 0408 8981      		ldd r24,Y+1
 1134 040a 9A81      		ldd r25,Y+2
 1135 040c 8050      		subi r24,lo8(-(ACKFrame+1))
 1136 040e 9040      		sbci r25,hi8(-(ACKFrame+1))
 1137 0410 FC01      		movw r30,r24
 1138 0412 8081      		ld r24,Z
 1139 0414 282F      		mov r18,r24
 1140 0416 81E0      		ldi r24,lo8(1)
 1141 0418 90E0      		ldi r25,0
 1142 041a 0B80      		ldd r0,Y+3
 1143 041c 00C0      		rjmp 2f
 1144               		1:
 1145 041e 880F      		lsl r24
 1146 0420 991F      		rol r25
 1147               		2:
 1148 0422 0A94      		dec r0
 1149 0424 02F4      		brpl 1b
 1150 0426 822B      		or r24,r18
 1151 0428 282F      		mov r18,r24
 1152 042a 8981      		ldd r24,Y+1
 1153 042c 9A81      		ldd r25,Y+2
 1154 042e 8050      		subi r24,lo8(-(ACKFrame+1))
 1155 0430 9040      		sbci r25,hi8(-(ACKFrame+1))
 1156 0432 FC01      		movw r30,r24
 1157 0434 2083      		st Z,r18
 188:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 1158               		.loc 6 188 0
 1159 0436 8981      		ldd r24,Y+1
 1160 0438 9A81      		ldd r25,Y+2
 1161 043a 9C01      		movw r18,r24
 1162 043c 2F5F      		subi r18,-1
 1163 043e 3F4F      		sbci r19,-1
 1164 0440 8091 0000 		lds r24,ACKFrame_size
 1165 0444 9091 0000 		lds r25,ACKFrame_size+1
 1166 0448 8217      		cp r24,r18
 1167 044a 9307      		cpc r25,r19
 1168 044c 04F4      		brge .L32
 189:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 1169               		.loc 6 189 0
 1170 044e 8981      		ldd r24,Y+1
 1171 0450 9A81      		ldd r25,Y+2
 1172 0452 0196      		adiw r24,1
 1173 0454 9093 0000 		sts ACKFrame_size+1,r25
 1174 0458 8093 0000 		sts ACKFrame_size,r24
 1175               	.L32:
 190:ServerLLDN.c  **** 		
 191:ServerLLDN.c  **** 		return true;
 1176               		.loc 6 191 0
 1177 045c 81E0      		ldi r24,lo8(1)
 1178               	.L31:
 1179               	/* epilogue start */
 192:ServerLLDN.c  **** 	}
 1180               		.loc 6 192 0
 1181 045e 0F90      		pop __tmp_reg__
 1182 0460 0F90      		pop __tmp_reg__
 1183 0462 0F90      		pop __tmp_reg__
 1184 0464 0F90      		pop __tmp_reg__
 1185 0466 0F90      		pop __tmp_reg__
 1186 0468 DF91      		pop r29
 1187 046a CF91      		pop r28
 1188 046c 0895      		ret
 1189               		.cfi_endproc
 1190               	.LFE135:
 1193               	addConfRequestArray:
 1194               	.LFB136:
 193:ServerLLDN.c  **** 
 194:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 195:ServerLLDN.c  **** 	{
 1195               		.loc 6 195 0
 1196               		.cfi_startproc
 1197 046e CF93      		push r28
 1198               	.LCFI60:
 1199               		.cfi_def_cfa_offset 3
 1200               		.cfi_offset 28, -2
 1201 0470 DF93      		push r29
 1202               	.LCFI61:
 1203               		.cfi_def_cfa_offset 4
 1204               		.cfi_offset 29, -3
 1205 0472 00D0      		rcall .
 1206 0474 00D0      		rcall .
 1207 0476 1F92      		push __zero_reg__
 1208               	.LCFI62:
 1209               		.cfi_def_cfa_offset 9
 1210 0478 CDB7      		in r28,__SP_L__
 1211 047a DEB7      		in r29,__SP_H__
 1212               	.LCFI63:
 1213               		.cfi_def_cfa_register 28
 1214               	/* prologue: function */
 1215               	/* frame size = 5 */
 1216               	/* stack size = 7 */
 1217               	.L__stack_usage = 7
 1218 047c 9D83      		std Y+5,r25
 1219 047e 8C83      		std Y+4,r24
 196:ServerLLDN.c  **** 
 197:ServerLLDN.c  **** 		uint8_t i;
 198:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1220               		.loc 6 198 0
 1221 0480 1982      		std Y+1,__zero_reg__
 1222 0482 00C0      		rjmp .L34
 1223               	.L35:
 1224               		.loc 6 198 0 is_stmt 0 discriminator 3
 1225 0484 8981      		ldd r24,Y+1
 1226 0486 8F5F      		subi r24,lo8(-(1))
 1227 0488 8983      		std Y+1,r24
 1228               	.L34:
 1229               		.loc 6 198 0 discriminator 1
 1230 048a 8981      		ldd r24,Y+1
 1231 048c 282F      		mov r18,r24
 1232 048e 30E0      		ldi r19,0
 1233 0490 4AE4      		ldi r20,lo8(74)
 1234 0492 429F      		mul r20,r18
 1235 0494 C001      		movw r24,r0
 1236 0496 439F      		mul r20,r19
 1237 0498 900D      		add r25,r0
 1238 049a 1124      		clr __zero_reg__
 1239 049c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1240 049e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1241 04a0 FC01      		movw r30,r24
 1242 04a2 8081      		ld r24,Z
 1243 04a4 9181      		ldd r25,Z+1
 1244 04a6 892B      		or r24,r25
 1245 04a8 01F4      		brne .L35
 199:ServerLLDN.c  **** 		
 200:ServerLLDN.c  **** 		assTimeSlot++;
 1246               		.loc 6 200 0 is_stmt 1
 1247 04aa 8091 0000 		lds r24,assTimeSlot
 1248 04ae 9091 0000 		lds r25,assTimeSlot+1
 1249 04b2 0196      		adiw r24,1
 1250 04b4 9093 0000 		sts assTimeSlot+1,r25
 1251 04b8 8093 0000 		sts assTimeSlot,r24
 201:ServerLLDN.c  **** 	
 202:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1252               		.loc 6 202 0
 1253 04bc 8C81      		ldd r24,Y+4
 1254 04be 9D81      		ldd r25,Y+5
 1255 04c0 FC01      		movw r30,r24
 1256 04c2 8481      		ldd r24,Z+4
 1257 04c4 8F77      		andi r24,lo8(127)
 1258 04c6 282F      		mov r18,r24
 1259 04c8 30E0      		ldi r19,0
 1260 04ca 8091 0000 		lds r24,config_request_frame+5
 1261 04ce 8F77      		andi r24,lo8(127)
 1262 04d0 882F      		mov r24,r24
 1263 04d2 90E0      		ldi r25,0
 1264 04d4 8217      		cp r24,r18
 1265 04d6 9307      		cpc r25,r19
 1266 04d8 04F4      		brge .L36
 203:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1267               		.loc 6 203 0
 1268 04da 8C81      		ldd r24,Y+4
 1269 04dc 9D81      		ldd r25,Y+5
 1270 04de FC01      		movw r30,r24
 1271 04e0 8481      		ldd r24,Z+4
 1272 04e2 8F77      		andi r24,lo8(127)
 1273 04e4 8F77      		andi r24,lo8(127)
 1274 04e6 9091 0000 		lds r25,config_request_frame+5
 1275 04ea 9078      		andi r25,lo8(-128)
 1276 04ec 892B      		or r24,r25
 1277 04ee 8093 0000 		sts config_request_frame+5,r24
 1278               	.L36:
 204:ServerLLDN.c  **** 		
 205:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1279               		.loc 6 205 0
 1280 04f2 8981      		ldd r24,Y+1
 1281 04f4 282F      		mov r18,r24
 1282 04f6 30E0      		ldi r19,0
 1283 04f8 8C81      		ldd r24,Y+4
 1284 04fa 9D81      		ldd r25,Y+5
 1285 04fc FC01      		movw r30,r24
 1286 04fe 8481      		ldd r24,Z+4
 1287 0500 8F77      		andi r24,lo8(127)
 1288 0502 582F      		mov r21,r24
 1289 0504 4AE4      		ldi r20,lo8(74)
 1290 0506 429F      		mul r20,r18
 1291 0508 C001      		movw r24,r0
 1292 050a 439F      		mul r20,r19
 1293 050c 900D      		add r25,r0
 1294 050e 1124      		clr __zero_reg__
 1295 0510 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1296 0512 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1297 0514 FC01      		movw r30,r24
 1298 0516 5083      		st Z,r21
 206:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1299               		.loc 6 206 0
 1300 0518 8981      		ldd r24,Y+1
 1301 051a 482F      		mov r20,r24
 1302 051c 50E0      		ldi r21,0
 1303 051e 8C81      		ldd r24,Y+4
 1304 0520 9D81      		ldd r25,Y+5
 1305 0522 FC01      		movw r30,r24
 1306 0524 8381      		ldd r24,Z+3
 1307 0526 282F      		mov r18,r24
 1308 0528 30E0      		ldi r19,0
 1309 052a 6AE4      		ldi r22,lo8(74)
 1310 052c 649F      		mul r22,r20
 1311 052e C001      		movw r24,r0
 1312 0530 659F      		mul r22,r21
 1313 0532 900D      		add r25,r0
 1314 0534 1124      		clr __zero_reg__
 1315 0536 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1316 0538 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1317 053a FC01      		movw r30,r24
 1318 053c 3183      		std Z+1,r19
 1319 053e 2083      		st Z,r18
 207:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1320               		.loc 6 207 0
 1321 0540 8981      		ldd r24,Y+1
 1322 0542 282F      		mov r18,r24
 1323 0544 30E0      		ldi r19,0
 1324 0546 4AE4      		ldi r20,lo8(74)
 1325 0548 429F      		mul r20,r18
 1326 054a C001      		movw r24,r0
 1327 054c 439F      		mul r20,r19
 1328 054e 900D      		add r25,r0
 1329 0550 1124      		clr __zero_reg__
 1330 0552 8050      		subi r24,lo8(-(nodes_info_arr))
 1331 0554 9040      		sbci r25,hi8(-(nodes_info_arr))
 1332 0556 2981      		ldd r18,Y+1
 1333 0558 FC01      		movw r30,r24
 1334 055a 2083      		st Z,r18
 208:ServerLLDN.c  **** 		
 209:ServerLLDN.c  **** // 		stack_conf_req
 210:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1335               		.loc 6 210 0
 1336 055c 8091 0000 		lds r24,conf_req_list
 1337 0560 9091 0000 		lds r25,conf_req_list+1
 1338 0564 892B      		or r24,r25
 1339 0566 01F0      		breq .L37
 1340               	.LBB3:
 211:ServerLLDN.c  **** 		{
 212:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1341               		.loc 6 212 0
 1342 0568 84E0      		ldi r24,lo8(4)
 1343 056a 90E0      		ldi r25,0
 1344 056c 0E94 0000 		call malloc
 1345 0570 9B83      		std Y+3,r25
 1346 0572 8A83      		std Y+2,r24
 213:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1347               		.loc 6 213 0
 1348 0574 8981      		ldd r24,Y+1
 1349 0576 282F      		mov r18,r24
 1350 0578 30E0      		ldi r19,0
 1351 057a 4AE4      		ldi r20,lo8(74)
 1352 057c 429F      		mul r20,r18
 1353 057e C001      		movw r24,r0
 1354 0580 439F      		mul r20,r19
 1355 0582 900D      		add r25,r0
 1356 0584 1124      		clr __zero_reg__
 1357 0586 9C01      		movw r18,r24
 1358 0588 2050      		subi r18,lo8(-(nodes_info_arr))
 1359 058a 3040      		sbci r19,hi8(-(nodes_info_arr))
 1360 058c 8A81      		ldd r24,Y+2
 1361 058e 9B81      		ldd r25,Y+3
 1362 0590 FC01      		movw r30,r24
 1363 0592 3183      		std Z+1,r19
 1364 0594 2083      		st Z,r18
 214:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1365               		.loc 6 214 0
 1366 0596 2091 0000 		lds r18,conf_req_list
 1367 059a 3091 0000 		lds r19,conf_req_list+1
 1368 059e 8A81      		ldd r24,Y+2
 1369 05a0 9B81      		ldd r25,Y+3
 1370 05a2 FC01      		movw r30,r24
 1371 05a4 3383      		std Z+3,r19
 1372 05a6 2283      		std Z+2,r18
 215:ServerLLDN.c  **** 			conf_req_list = tmp;
 1373               		.loc 6 215 0
 1374 05a8 8A81      		ldd r24,Y+2
 1375 05aa 9B81      		ldd r25,Y+3
 1376 05ac 9093 0000 		sts conf_req_list+1,r25
 1377 05b0 8093 0000 		sts conf_req_list,r24
 1378               	.LBE3:
 216:ServerLLDN.c  **** 		}
 217:ServerLLDN.c  **** 		else
 218:ServerLLDN.c  **** 		{
 219:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 220:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 221:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 222:ServerLLDN.c  **** 		}
 223:ServerLLDN.c  **** 	}
 1379               		.loc 6 223 0
 1380 05b4 00C0      		rjmp .L39
 1381               	.L37:
 219:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1382               		.loc 6 219 0
 1383 05b6 84E0      		ldi r24,lo8(4)
 1384 05b8 90E0      		ldi r25,0
 1385 05ba 0E94 0000 		call malloc
 1386 05be 9093 0000 		sts conf_req_list+1,r25
 1387 05c2 8093 0000 		sts conf_req_list,r24
 220:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1388               		.loc 6 220 0
 1389 05c6 8091 0000 		lds r24,conf_req_list
 1390 05ca 9091 0000 		lds r25,conf_req_list+1
 1391 05ce 2981      		ldd r18,Y+1
 1392 05d0 422F      		mov r20,r18
 1393 05d2 50E0      		ldi r21,0
 1394 05d4 6AE4      		ldi r22,lo8(74)
 1395 05d6 649F      		mul r22,r20
 1396 05d8 9001      		movw r18,r0
 1397 05da 659F      		mul r22,r21
 1398 05dc 300D      		add r19,r0
 1399 05de 1124      		clr __zero_reg__
 1400 05e0 2050      		subi r18,lo8(-(nodes_info_arr))
 1401 05e2 3040      		sbci r19,hi8(-(nodes_info_arr))
 1402 05e4 FC01      		movw r30,r24
 1403 05e6 3183      		std Z+1,r19
 1404 05e8 2083      		st Z,r18
 221:ServerLLDN.c  **** 		}
 1405               		.loc 6 221 0
 1406 05ea 8091 0000 		lds r24,conf_req_list
 1407 05ee 9091 0000 		lds r25,conf_req_list+1
 1408 05f2 FC01      		movw r30,r24
 1409 05f4 1382      		std Z+3,__zero_reg__
 1410 05f6 1282      		std Z+2,__zero_reg__
 1411               	.L39:
 1412               		.loc 6 223 0
 1413 05f8 0000      		nop
 1414               	/* epilogue start */
 1415 05fa 0F90      		pop __tmp_reg__
 1416 05fc 0F90      		pop __tmp_reg__
 1417 05fe 0F90      		pop __tmp_reg__
 1418 0600 0F90      		pop __tmp_reg__
 1419 0602 0F90      		pop __tmp_reg__
 1420 0604 DF91      		pop r29
 1421 0606 CF91      		pop r28
 1422 0608 0895      		ret
 1423               		.cfi_endproc
 1424               	.LFE136:
 1427               	CopyToConfigRequest:
 1428               	.LFB137:
 224:ServerLLDN.c  **** 
 225:ServerLLDN.c  **** 	static bool CopyToConfigRequest()
 226:ServerLLDN.c  **** 	{
 1429               		.loc 6 226 0
 1430               		.cfi_startproc
 1431 060a CF93      		push r28
 1432               	.LCFI64:
 1433               		.cfi_def_cfa_offset 3
 1434               		.cfi_offset 28, -2
 1435 060c DF93      		push r29
 1436               	.LCFI65:
 1437               		.cfi_def_cfa_offset 4
 1438               		.cfi_offset 29, -3
 1439 060e 00D0      		rcall .
 1440               	.LCFI66:
 1441               		.cfi_def_cfa_offset 6
 1442 0610 CDB7      		in r28,__SP_L__
 1443 0612 DEB7      		in r29,__SP_H__
 1444               	.LCFI67:
 1445               		.cfi_def_cfa_register 28
 1446               	/* prologue: function */
 1447               	/* frame size = 2 */
 1448               	/* stack size = 4 */
 1449               	.L__stack_usage = 4
 227:ServerLLDN.c  **** 		if(conf_req_list->node == NULL)
 1450               		.loc 6 227 0
 1451 0614 8091 0000 		lds r24,conf_req_list
 1452 0618 9091 0000 		lds r25,conf_req_list+1
 1453 061c FC01      		movw r30,r24
 1454 061e 8081      		ld r24,Z
 1455 0620 9181      		ldd r25,Z+1
 1456 0622 892B      		or r24,r25
 1457 0624 01F4      		brne .L41
 228:ServerLLDN.c  **** 			return false;
 1458               		.loc 6 228 0
 1459 0626 80E0      		ldi r24,0
 1460 0628 00C0      		rjmp .L42
 1461               	.L41:
 229:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1462               		.loc 6 229 0
 1463 062a 8091 0000 		lds r24,conf_req_list
 1464 062e 9091 0000 		lds r25,conf_req_list+1
 1465 0632 FC01      		movw r30,r24
 1466 0634 8081      		ld r24,Z
 1467 0636 9181      		ldd r25,Z+1
 1468 0638 FC01      		movw r30,r24
 1469 063a 8081      		ld r24,Z
 1470 063c 8093 0000 		sts config_request_frame+3,r24
 230:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1471               		.loc 6 230 0
 1472 0640 8091 0000 		lds r24,conf_req_list
 1473 0644 9091 0000 		lds r25,conf_req_list+1
 1474 0648 FC01      		movw r30,r24
 1475 064a 8081      		ld r24,Z
 1476 064c 9181      		ldd r25,Z+1
 1477 064e FC01      		movw r30,r24
 1478 0650 8181      		ldd r24,Z+1
 1479 0652 9281      		ldd r25,Z+2
 1480 0654 8093 0000 		sts config_request_frame+4,r24
 231:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1481               		.loc 6 231 0
 1482 0658 8091 0000 		lds r24,conf_req_list
 1483 065c 9091 0000 		lds r25,conf_req_list+1
 1484 0660 9A83      		std Y+2,r25
 1485 0662 8983      		std Y+1,r24
 232:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1486               		.loc 6 232 0
 1487 0664 8091 0000 		lds r24,conf_req_list
 1488 0668 9091 0000 		lds r25,conf_req_list+1
 1489 066c FC01      		movw r30,r24
 1490 066e 8281      		ldd r24,Z+2
 1491 0670 9381      		ldd r25,Z+3
 1492 0672 9093 0000 		sts conf_req_list+1,r25
 1493 0676 8093 0000 		sts conf_req_list,r24
 233:ServerLLDN.c  **** 		tmp->node = NULL;
 1494               		.loc 6 233 0
 1495 067a 8981      		ldd r24,Y+1
 1496 067c 9A81      		ldd r25,Y+2
 1497 067e FC01      		movw r30,r24
 1498 0680 1182      		std Z+1,__zero_reg__
 1499 0682 1082      		st Z,__zero_reg__
 234:ServerLLDN.c  **** 		tmp->next = NULL;
 1500               		.loc 6 234 0
 1501 0684 8981      		ldd r24,Y+1
 1502 0686 9A81      		ldd r25,Y+2
 1503 0688 FC01      		movw r30,r24
 1504 068a 1382      		std Z+3,__zero_reg__
 1505 068c 1282      		std Z+2,__zero_reg__
 235:ServerLLDN.c  **** 		free(tmp);
 1506               		.loc 6 235 0
 1507 068e 8981      		ldd r24,Y+1
 1508 0690 9A81      		ldd r25,Y+2
 1509 0692 0E94 0000 		call free
 236:ServerLLDN.c  **** 		return true;
 1510               		.loc 6 236 0
 1511 0696 81E0      		ldi r24,lo8(1)
 1512               	.L42:
 1513               	/* epilogue start */
 237:ServerLLDN.c  **** 	}
 1514               		.loc 6 237 0
 1515 0698 0F90      		pop __tmp_reg__
 1516 069a 0F90      		pop __tmp_reg__
 1517 069c DF91      		pop r29
 1518 069e CF91      		pop r28
 1519 06a0 0895      		ret
 1520               		.cfi_endproc
 1521               	.LFE137:
 1524               	appCommandInd:
 1525               	.LFB138:
 238:ServerLLDN.c  **** 
 239:ServerLLDN.c  **** 
 240:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 241:ServerLLDN.c  **** 	{
 1526               		.loc 6 241 0
 1527               		.cfi_startproc
 1528 06a2 CF93      		push r28
 1529               	.LCFI68:
 1530               		.cfi_def_cfa_offset 3
 1531               		.cfi_offset 28, -2
 1532 06a4 DF93      		push r29
 1533               	.LCFI69:
 1534               		.cfi_def_cfa_offset 4
 1535               		.cfi_offset 29, -3
 1536 06a6 CDB7      		in r28,__SP_L__
 1537 06a8 DEB7      		in r29,__SP_H__
 1538               	.LCFI70:
 1539               		.cfi_def_cfa_register 28
 1540 06aa 2A97      		sbiw r28,10
 1541               	.LCFI71:
 1542               		.cfi_def_cfa_offset 14
 1543 06ac 0FB6      		in __tmp_reg__,__SREG__
 1544 06ae F894      		cli
 1545 06b0 DEBF      		out __SP_H__,r29
 1546 06b2 0FBE      		out __SREG__,__tmp_reg__
 1547 06b4 CDBF      		out __SP_L__,r28
 1548               	/* prologue: function */
 1549               	/* frame size = 10 */
 1550               	/* stack size = 12 */
 1551               	.L__stack_usage = 12
 1552 06b6 9A87      		std Y+10,r25
 1553 06b8 8987      		std Y+9,r24
 242:ServerLLDN.c  **** 		if(n <127) return false;
 1554               		.loc 6 242 0
 1555 06ba 8091 0000 		lds r24,n
 1556 06be 8F37      		cpi r24,lo8(127)
 1557 06c0 00F4      		brsh .L44
 1558               		.loc 6 242 0 is_stmt 0 discriminator 1
 1559 06c2 80E0      		ldi r24,0
 1560 06c4 00C0      		rjmp .L45
 1561               	.L44:
 243:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1562               		.loc 6 243 0 is_stmt 1
 1563 06c6 8985      		ldd r24,Y+9
 1564 06c8 9A85      		ldd r25,Y+10
 1565 06ca FC01      		movw r30,r24
 1566 06cc 8085      		ldd r24,Z+8
 1567 06ce 9185      		ldd r25,Z+9
 1568 06d0 FC01      		movw r30,r24
 1569 06d2 8081      		ld r24,Z
 1570 06d4 8D30      		cpi r24,lo8(13)
 1571 06d6 01F4      		brne .L46
 1572               	.LBB4:
 244:ServerLLDN.c  **** 		{
 245:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1573               		.loc 6 245 0
 1574 06d8 8985      		ldd r24,Y+9
 1575 06da 9A85      		ldd r25,Y+10
 1576 06dc FC01      		movw r30,r24
 1577 06de 8085      		ldd r24,Z+8
 1578 06e0 9185      		ldd r25,Z+9
 1579 06e2 9C83      		std Y+4,r25
 1580 06e4 8B83      		std Y+3,r24
 246:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1581               		.loc 6 246 0
 1582 06e6 8B81      		ldd r24,Y+3
 1583 06e8 9C81      		ldd r25,Y+4
 1584 06ea FC01      		movw r30,r24
 1585 06ec 8181      		ldd r24,Z+1
 1586 06ee 0E94 0000 		call addToAckArray
 247:ServerLLDN.c  **** 					
 248:ServerLLDN.c  **** 			#if PRINT
 249:ServerLLDN.c  **** 			uint32_t tmp = macsc_read_count();
 1587               		.loc 6 249 0
 1588 06f2 0E94 0000 		call macsc_read_count
 1589 06f6 DC01      		movw r26,r24
 1590 06f8 CB01      		movw r24,r22
 1591 06fa 8D83      		std Y+5,r24
 1592 06fc 9E83      		std Y+6,r25
 1593 06fe AF83      		std Y+7,r26
 1594 0700 B887      		std Y+8,r27
 1595               	.LBE4:
 1596 0702 00C0      		rjmp .L47
 1597               	.L46:
 250:ServerLLDN.c  **** // 			printf("\n%" PRIu32 " ", tmp);			
 251:ServerLLDN.c  **** // 			printf(" DISC %hhx", msg->macAddr);	
 252:ServerLLDN.c  **** 			#endif
 253:ServerLLDN.c  **** 		}
 254:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1598               		.loc 6 254 0
 1599 0704 8985      		ldd r24,Y+9
 1600 0706 9A85      		ldd r25,Y+10
 1601 0708 FC01      		movw r30,r24
 1602 070a 8085      		ldd r24,Z+8
 1603 070c 9185      		ldd r25,Z+9
 1604 070e FC01      		movw r30,r24
 1605 0710 8081      		ld r24,Z
 1606 0712 8E30      		cpi r24,lo8(14)
 1607 0714 01F4      		brne .L48
 1608               	.LBB5:
 255:ServerLLDN.c  **** 		{
 256:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1609               		.loc 6 256 0
 1610 0716 8985      		ldd r24,Y+9
 1611 0718 9A85      		ldd r25,Y+10
 1612 071a FC01      		movw r30,r24
 1613 071c 8085      		ldd r24,Z+8
 1614 071e 9185      		ldd r25,Z+9
 1615 0720 9A83      		std Y+2,r25
 1616 0722 8983      		std Y+1,r24
 257:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1617               		.loc 6 257 0
 1618 0724 8981      		ldd r24,Y+1
 1619 0726 9A81      		ldd r25,Y+2
 1620 0728 0E94 0000 		call addConfRequestArray
 1621               	.LBE5:
 1622 072c 00C0      		rjmp .L47
 1623               	.L48:
 258:ServerLLDN.c  **** 			#if PRINT
 259:ServerLLDN.c  **** // 			printf("\nCONF %d", msg->macAddr);	
 260:ServerLLDN.c  **** 			#endif
 261:ServerLLDN.c  **** 		}
 262:ServerLLDN.c  **** 		else return false;			
 1624               		.loc 6 262 0
 1625 072e 80E0      		ldi r24,0
 1626 0730 00C0      		rjmp .L45
 1627               	.L47:
 263:ServerLLDN.c  **** 		return true;
 1628               		.loc 6 263 0
 1629 0732 81E0      		ldi r24,lo8(1)
 1630               	.L45:
 1631               	/* epilogue start */
 264:ServerLLDN.c  **** 	}
 1632               		.loc 6 264 0
 1633 0734 2A96      		adiw r28,10
 1634 0736 0FB6      		in __tmp_reg__,__SREG__
 1635 0738 F894      		cli
 1636 073a DEBF      		out __SP_H__,r29
 1637 073c 0FBE      		out __SREG__,__tmp_reg__
 1638 073e CDBF      		out __SP_L__,r28
 1639 0740 DF91      		pop r29
 1640 0742 CF91      		pop r28
 1641 0744 0895      		ret
 1642               		.cfi_endproc
 1643               	.LFE138:
 1645               	.global	check_ack_pan
 1647               	check_ack_pan:
 1648               	.LFB139:
 265:ServerLLDN.c  **** 	
 266:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 267:ServerLLDN.c  **** 	{
 1649               		.loc 6 267 0
 1650               		.cfi_startproc
 1651 0746 CF93      		push r28
 1652               	.LCFI72:
 1653               		.cfi_def_cfa_offset 3
 1654               		.cfi_offset 28, -2
 1655 0748 DF93      		push r29
 1656               	.LCFI73:
 1657               		.cfi_def_cfa_offset 4
 1658               		.cfi_offset 29, -3
 1659 074a 00D0      		rcall .
 1660 074c 00D0      		rcall .
 1661 074e 00D0      		rcall .
 1662               	.LCFI74:
 1663               		.cfi_def_cfa_offset 10
 1664 0750 CDB7      		in r28,__SP_L__
 1665 0752 DEB7      		in r29,__SP_H__
 1666               	.LCFI75:
 1667               		.cfi_def_cfa_register 28
 1668               	/* prologue: function */
 1669               	/* frame size = 6 */
 1670               	/* stack size = 8 */
 1671               	.L__stack_usage = 8
 1672 0754 9E83      		std Y+6,r25
 1673 0756 8D83      		std Y+5,r24
 268:ServerLLDN.c  **** 		int pos =  addr / 8;
 1674               		.loc 6 268 0
 1675 0758 8D81      		ldd r24,Y+5
 1676 075a 9E81      		ldd r25,Y+6
 1677 075c 9923      		tst r25
 1678 075e 04F4      		brge .L50
 1679 0760 0796      		adiw r24,7
 1680               	.L50:
 1681 0762 9595      		asr r25
 1682 0764 8795      		ror r24
 1683 0766 9595      		asr r25
 1684 0768 8795      		ror r24
 1685 076a 9595      		asr r25
 1686 076c 8795      		ror r24
 1687 076e 9A83      		std Y+2,r25
 1688 0770 8983      		std Y+1,r24
 269:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1689               		.loc 6 269 0
 1690 0772 8D81      		ldd r24,Y+5
 1691 0774 9E81      		ldd r25,Y+6
 1692 0776 8770      		andi r24,7
 1693 0778 9078      		andi r25,128
 1694 077a 9923      		tst r25
 1695 077c 04F4      		brge .L51
 1696 077e 0197      		sbiw r24,1
 1697 0780 886F      		ori r24,248
 1698 0782 9F6F      		ori r25,255
 1699 0784 0196      		adiw r24,1
 1700               	.L51:
 1701 0786 9C01      		movw r18,r24
 1702 0788 88E0      		ldi r24,lo8(8)
 1703 078a 90E0      		ldi r25,0
 1704 078c 821B      		sub r24,r18
 1705 078e 930B      		sbc r25,r19
 1706 0790 9C83      		std Y+4,r25
 1707 0792 8B83      		std Y+3,r24
 270:ServerLLDN.c  **** 		
 271:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1708               		.loc 6 271 0
 1709 0794 8981      		ldd r24,Y+1
 1710 0796 9A81      		ldd r25,Y+2
 1711 0798 8050      		subi r24,lo8(-(ACKFrame+1))
 1712 079a 9040      		sbci r25,hi8(-(ACKFrame+1))
 1713 079c FC01      		movw r30,r24
 1714 079e 8081      		ld r24,Z
 1715 07a0 882F      		mov r24,r24
 1716 07a2 90E0      		ldi r25,0
 1717 07a4 0B80      		ldd r0,Y+3
 1718 07a6 00C0      		rjmp 2f
 1719               		1:
 1720 07a8 9595      		asr r25
 1721 07aa 8795      		ror r24
 1722               		2:
 1723 07ac 0A94      		dec r0
 1724 07ae 02F4      		brpl 1b
 1725 07b0 8170      		andi r24,1
 1726 07b2 9927      		clr r25
 1727 07b4 892B      		or r24,r25
 1728 07b6 01F0      		breq .L52
 272:ServerLLDN.c  **** 		{
 273:ServerLLDN.c  **** 			return true;
 1729               		.loc 6 273 0
 1730 07b8 81E0      		ldi r24,lo8(1)
 1731 07ba 00C0      		rjmp .L53
 1732               	.L52:
 274:ServerLLDN.c  **** 		}
 275:ServerLLDN.c  **** 		else
 276:ServerLLDN.c  **** 			return false;
 1733               		.loc 6 276 0
 1734 07bc 80E0      		ldi r24,0
 1735               	.L53:
 1736               	/* epilogue start */
 277:ServerLLDN.c  **** 	}
 1737               		.loc 6 277 0
 1738 07be 2696      		adiw r28,6
 1739 07c0 0FB6      		in __tmp_reg__,__SREG__
 1740 07c2 F894      		cli
 1741 07c4 DEBF      		out __SP_H__,r29
 1742 07c6 0FBE      		out __SREG__,__tmp_reg__
 1743 07c8 CDBF      		out __SP_L__,r28
 1744 07ca DF91      		pop r29
 1745 07cc CF91      		pop r28
 1746 07ce 0895      		ret
 1747               		.cfi_endproc
 1748               	.LFE139:
 1750               	.global	check_ack_aux
 1752               	check_ack_aux:
 1753               	.LFB140:
 278:ServerLLDN.c  **** 	
 279:ServerLLDN.c  **** 	bool check_ack_aux(int addr)
 280:ServerLLDN.c  **** 	{
 1754               		.loc 6 280 0
 1755               		.cfi_startproc
 1756 07d0 CF93      		push r28
 1757               	.LCFI76:
 1758               		.cfi_def_cfa_offset 3
 1759               		.cfi_offset 28, -2
 1760 07d2 DF93      		push r29
 1761               	.LCFI77:
 1762               		.cfi_def_cfa_offset 4
 1763               		.cfi_offset 29, -3
 1764 07d4 00D0      		rcall .
 1765 07d6 00D0      		rcall .
 1766 07d8 00D0      		rcall .
 1767               	.LCFI78:
 1768               		.cfi_def_cfa_offset 10
 1769 07da CDB7      		in r28,__SP_L__
 1770 07dc DEB7      		in r29,__SP_H__
 1771               	.LCFI79:
 1772               		.cfi_def_cfa_register 28
 1773               	/* prologue: function */
 1774               	/* frame size = 6 */
 1775               	/* stack size = 8 */
 1776               	.L__stack_usage = 8
 1777 07de 9E83      		std Y+6,r25
 1778 07e0 8D83      		std Y+5,r24
 281:ServerLLDN.c  **** 		int pos =  addr / 8;
 1779               		.loc 6 281 0
 1780 07e2 8D81      		ldd r24,Y+5
 1781 07e4 9E81      		ldd r25,Y+6
 1782 07e6 9923      		tst r25
 1783 07e8 04F4      		brge .L55
 1784 07ea 0796      		adiw r24,7
 1785               	.L55:
 1786 07ec 9595      		asr r25
 1787 07ee 8795      		ror r24
 1788 07f0 9595      		asr r25
 1789 07f2 8795      		ror r24
 1790 07f4 9595      		asr r25
 1791 07f6 8795      		ror r24
 1792 07f8 9A83      		std Y+2,r25
 1793 07fa 8983      		std Y+1,r24
 282:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1794               		.loc 6 282 0
 1795 07fc 8D81      		ldd r24,Y+5
 1796 07fe 9E81      		ldd r25,Y+6
 1797 0800 8770      		andi r24,7
 1798 0802 9078      		andi r25,128
 1799 0804 9923      		tst r25
 1800 0806 04F4      		brge .L56
 1801 0808 0197      		sbiw r24,1
 1802 080a 886F      		ori r24,248
 1803 080c 9F6F      		ori r25,255
 1804 080e 0196      		adiw r24,1
 1805               	.L56:
 1806 0810 9C01      		movw r18,r24
 1807 0812 88E0      		ldi r24,lo8(8)
 1808 0814 90E0      		ldi r25,0
 1809 0816 821B      		sub r24,r18
 1810 0818 930B      		sbc r25,r19
 1811 081a 9C83      		std Y+4,r25
 1812 081c 8B83      		std Y+3,r24
 283:ServerLLDN.c  **** 		
 284:ServerLLDN.c  **** 		if( ACKFrame_aux.ackFlags[pos] & 1 << bit_shift)
 1813               		.loc 6 284 0
 1814 081e 8981      		ldd r24,Y+1
 1815 0820 9A81      		ldd r25,Y+2
 1816 0822 8050      		subi r24,lo8(-(ACKFrame_aux+1))
 1817 0824 9040      		sbci r25,hi8(-(ACKFrame_aux+1))
 1818 0826 FC01      		movw r30,r24
 1819 0828 8081      		ld r24,Z
 1820 082a 882F      		mov r24,r24
 1821 082c 90E0      		ldi r25,0
 1822 082e 0B80      		ldd r0,Y+3
 1823 0830 00C0      		rjmp 2f
 1824               		1:
 1825 0832 9595      		asr r25
 1826 0834 8795      		ror r24
 1827               		2:
 1828 0836 0A94      		dec r0
 1829 0838 02F4      		brpl 1b
 1830 083a 8170      		andi r24,1
 1831 083c 9927      		clr r25
 1832 083e 892B      		or r24,r25
 1833 0840 01F0      		breq .L57
 285:ServerLLDN.c  **** 		{
 286:ServerLLDN.c  **** 			return true;
 1834               		.loc 6 286 0
 1835 0842 81E0      		ldi r24,lo8(1)
 1836 0844 00C0      		rjmp .L58
 1837               	.L57:
 287:ServerLLDN.c  **** 		}
 288:ServerLLDN.c  **** 		else
 289:ServerLLDN.c  **** 		return false;
 1838               		.loc 6 289 0
 1839 0846 80E0      		ldi r24,0
 1840               	.L58:
 1841               	/* epilogue start */
 290:ServerLLDN.c  **** 	}
 1842               		.loc 6 290 0
 1843 0848 2696      		adiw r28,6
 1844 084a 0FB6      		in __tmp_reg__,__SREG__
 1845 084c F894      		cli
 1846 084e DEBF      		out __SP_H__,r29
 1847 0850 0FBE      		out __SREG__,__tmp_reg__
 1848 0852 CDBF      		out __SP_L__,r28
 1849 0854 DF91      		pop r29
 1850 0856 CF91      		pop r28
 1851 0858 0895      		ret
 1852               		.cfi_endproc
 1853               	.LFE140:
 1855               	.global	__floatsisf
 1856               	.global	__divsf3
 1857               	.global	__subsf3
 1858               	.global	__fixsfsi
 1859               	.global	__floatunsisf
 1860               	.global	__mulsf3
 1861               	.global	__addsf3
 1863               	appDataInd:
 1864               	.LFB141:
 291:ServerLLDN.c  **** 	
 292:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 293:ServerLLDN.c  **** 	{
 1865               		.loc 6 293 0
 1866               		.cfi_startproc
 1867 085a 8F92      		push r8
 1868               	.LCFI80:
 1869               		.cfi_def_cfa_offset 3
 1870               		.cfi_offset 8, -2
 1871 085c 9F92      		push r9
 1872               	.LCFI81:
 1873               		.cfi_def_cfa_offset 4
 1874               		.cfi_offset 9, -3
 1875 085e AF92      		push r10
 1876               	.LCFI82:
 1877               		.cfi_def_cfa_offset 5
 1878               		.cfi_offset 10, -4
 1879 0860 BF92      		push r11
 1880               	.LCFI83:
 1881               		.cfi_def_cfa_offset 6
 1882               		.cfi_offset 11, -5
 1883 0862 CF92      		push r12
 1884               	.LCFI84:
 1885               		.cfi_def_cfa_offset 7
 1886               		.cfi_offset 12, -6
 1887 0864 DF92      		push r13
 1888               	.LCFI85:
 1889               		.cfi_def_cfa_offset 8
 1890               		.cfi_offset 13, -7
 1891 0866 EF92      		push r14
 1892               	.LCFI86:
 1893               		.cfi_def_cfa_offset 9
 1894               		.cfi_offset 14, -8
 1895 0868 FF92      		push r15
 1896               	.LCFI87:
 1897               		.cfi_def_cfa_offset 10
 1898               		.cfi_offset 15, -9
 1899 086a CF93      		push r28
 1900               	.LCFI88:
 1901               		.cfi_def_cfa_offset 11
 1902               		.cfi_offset 28, -10
 1903 086c DF93      		push r29
 1904               	.LCFI89:
 1905               		.cfi_def_cfa_offset 12
 1906               		.cfi_offset 29, -11
 1907 086e CDB7      		in r28,__SP_L__
 1908 0870 DEB7      		in r29,__SP_H__
 1909               	.LCFI90:
 1910               		.cfi_def_cfa_register 28
 1911 0872 2E97      		sbiw r28,14
 1912               	.LCFI91:
 1913               		.cfi_def_cfa_offset 26
 1914 0874 0FB6      		in __tmp_reg__,__SREG__
 1915 0876 F894      		cli
 1916 0878 DEBF      		out __SP_H__,r29
 1917 087a 0FBE      		out __SREG__,__tmp_reg__
 1918 087c CDBF      		out __SP_L__,r28
 1919               	/* prologue: function */
 1920               	/* frame size = 14 */
 1921               	/* stack size = 24 */
 1922               	.L__stack_usage = 24
 1923 087e 9E87      		std Y+14,r25
 1924 0880 8D87      		std Y+13,r24
 294:ServerLLDN.c  **** 		uint32_t cmp_value = macsc_read_count();
 1925               		.loc 6 294 0
 1926 0882 0E94 0000 		call macsc_read_count
 1927 0886 DC01      		movw r26,r24
 1928 0888 CB01      		movw r24,r22
 1929 088a 8F83      		std Y+7,r24
 1930 088c 9887      		std Y+8,r25
 1931 088e A987      		std Y+9,r26
 1932 0890 BA87      		std Y+10,r27
 295:ServerLLDN.c  **** 		int relative_cmp =  cmp_value - cmp_value_start_superframe - 40;
 1933               		.loc 6 295 0
 1934 0892 2F81      		ldd r18,Y+7
 1935 0894 3885      		ldd r19,Y+8
 1936 0896 8091 0000 		lds r24,cmp_value_start_superframe
 1937 089a 9091 0000 		lds r25,cmp_value_start_superframe+1
 1938 089e A091 0000 		lds r26,cmp_value_start_superframe+2
 1939 08a2 B091 0000 		lds r27,cmp_value_start_superframe+3
 1940 08a6 A901      		movw r20,r18
 1941 08a8 481B      		sub r20,r24
 1942 08aa 590B      		sbc r21,r25
 1943 08ac CA01      		movw r24,r20
 1944 08ae 8897      		sbiw r24,40
 1945 08b0 9C87      		std Y+12,r25
 1946 08b2 8B87      		std Y+11,r24
 296:ServerLLDN.c  **** 		
 297:ServerLLDN.c  **** 
 298:ServerLLDN.c  **** 		int curr_up_ts = (relative_cmp)/(tTS / (SYMBOL_TIME)) - 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_on
 1947               		.loc 6 298 0
 1948 08b4 8B85      		ldd r24,Y+11
 1949 08b6 9C85      		ldd r25,Y+12
 1950 08b8 092E      		mov __tmp_reg__,r25
 1951 08ba 000C      		lsl r0
 1952 08bc AA0B      		sbc r26,r26
 1953 08be BB0B      		sbc r27,r27
 1954 08c0 BC01      		movw r22,r24
 1955 08c2 CD01      		movw r24,r26
 1956 08c4 0E94 0000 		call __floatsisf
 1957 08c8 6B01      		movw r12,r22
 1958 08ca 7C01      		movw r14,r24
 1959 08cc 8091 0000 		lds r24,tTS
 1960 08d0 9091 0000 		lds r25,tTS+1
 1961 08d4 A091 0000 		lds r26,tTS+2
 1962 08d8 B091 0000 		lds r27,tTS+3
 1963 08dc 2DEB      		ldi r18,lo8(-67)
 1964 08de 37E3      		ldi r19,lo8(55)
 1965 08e0 46E8      		ldi r20,lo8(-122)
 1966 08e2 57E3      		ldi r21,lo8(55)
 1967 08e4 BC01      		movw r22,r24
 1968 08e6 CD01      		movw r24,r26
 1969 08e8 0E94 0000 		call __divsf3
 1970 08ec DC01      		movw r26,r24
 1971 08ee CB01      		movw r24,r22
 1972 08f0 9C01      		movw r18,r24
 1973 08f2 AD01      		movw r20,r26
 1974 08f4 C701      		movw r24,r14
 1975 08f6 B601      		movw r22,r12
 1976 08f8 0E94 0000 		call __divsf3
 1977 08fc DC01      		movw r26,r24
 1978 08fe CB01      		movw r24,r22
 1979 0900 20E0      		ldi r18,0
 1980 0902 30E0      		ldi r19,0
 1981 0904 40E8      		ldi r20,lo8(-128)
 1982 0906 50E4      		ldi r21,lo8(64)
 1983 0908 BC01      		movw r22,r24
 1984 090a CD01      		movw r24,r26
 1985 090c 0E94 0000 		call __subsf3
 1986 0910 DC01      		movw r26,r24
 1987 0912 CB01      		movw r24,r22
 1988 0914 BC01      		movw r22,r24
 1989 0916 CD01      		movw r24,r26
 1990 0918 0E94 0000 		call __fixsfsi
 1991 091c DC01      		movw r26,r24
 1992 091e CB01      		movw r24,r22
 1993 0920 9A83      		std Y+2,r25
 1994 0922 8983      		std Y+1,r24
 299:ServerLLDN.c  **** 		if(curr_up_ts > assTimeSlot)
 1995               		.loc 6 299 0
 1996 0924 8091 0000 		lds r24,assTimeSlot
 1997 0928 9091 0000 		lds r25,assTimeSlot+1
 1998 092c 2981      		ldd r18,Y+1
 1999 092e 3A81      		ldd r19,Y+2
 2000 0930 8217      		cp r24,r18
 2001 0932 9307      		cpc r25,r19
 2002 0934 04F4      		brge .L60
 2003               	.LBB6:
 300:ServerLLDN.c  **** 		{
 301:ServerLLDN.c  **** 			
 302:ServerLLDN.c  **** 			int i;
 303:ServerLLDN.c  **** 			curr_up_ts -= assTimeSlot+1;
 2004               		.loc 6 303 0
 2005 0936 8091 0000 		lds r24,assTimeSlot
 2006 093a 9091 0000 		lds r25,assTimeSlot+1
 2007 093e 0196      		adiw r24,1
 2008 0940 2981      		ldd r18,Y+1
 2009 0942 3A81      		ldd r19,Y+2
 2010 0944 F901      		movw r30,r18
 2011 0946 E81B      		sub r30,r24
 2012 0948 F90B      		sbc r31,r25
 2013 094a CF01      		movw r24,r30
 2014 094c 9A83      		std Y+2,r25
 2015 094e 8983      		std Y+1,r24
 304:ServerLLDN.c  **** 			for (i = 0; i < assTimeSlot && curr_up_ts > 0; ++i)
 2016               		.loc 6 304 0
 2017 0950 1C82      		std Y+4,__zero_reg__
 2018 0952 1B82      		std Y+3,__zero_reg__
 2019 0954 00C0      		rjmp .L61
 2020               	.L64:
 305:ServerLLDN.c  **** 			{
 306:ServerLLDN.c  **** 				if(!check_ack_aux(i+1))
 2021               		.loc 6 306 0
 2022 0956 8B81      		ldd r24,Y+3
 2023 0958 9C81      		ldd r25,Y+4
 2024 095a 0196      		adiw r24,1
 2025 095c 0E94 0000 		call check_ack_aux
 2026 0960 982F      		mov r25,r24
 2027 0962 81E0      		ldi r24,lo8(1)
 2028 0964 8927      		eor r24,r25
 2029 0966 8823      		tst r24
 2030 0968 01F0      		breq .L62
 307:ServerLLDN.c  **** 				{
 308:ServerLLDN.c  **** 					curr_up_ts--;
 2031               		.loc 6 308 0
 2032 096a 8981      		ldd r24,Y+1
 2033 096c 9A81      		ldd r25,Y+2
 2034 096e 0197      		sbiw r24,1
 2035 0970 9A83      		std Y+2,r25
 2036 0972 8983      		std Y+1,r24
 2037               	.L62:
 304:ServerLLDN.c  **** 			{
 2038               		.loc 6 304 0 discriminator 2
 2039 0974 8B81      		ldd r24,Y+3
 2040 0976 9C81      		ldd r25,Y+4
 2041 0978 0196      		adiw r24,1
 2042 097a 9C83      		std Y+4,r25
 2043 097c 8B83      		std Y+3,r24
 2044               	.L61:
 304:ServerLLDN.c  **** 			{
 2045               		.loc 6 304 0 is_stmt 0 discriminator 1
 2046 097e 8091 0000 		lds r24,assTimeSlot
 2047 0982 9091 0000 		lds r25,assTimeSlot+1
 2048 0986 2B81      		ldd r18,Y+3
 2049 0988 3C81      		ldd r19,Y+4
 2050 098a 2817      		cp r18,r24
 2051 098c 3907      		cpc r19,r25
 2052 098e 04F4      		brge .L63
 304:ServerLLDN.c  **** 			{
 2053               		.loc 6 304 0 discriminator 3
 2054 0990 8981      		ldd r24,Y+1
 2055 0992 9A81      		ldd r25,Y+2
 2056 0994 1816      		cp __zero_reg__,r24
 2057 0996 1906      		cpc __zero_reg__,r25
 2058 0998 04F0      		brlt .L64
 2059               	.L63:
 309:ServerLLDN.c  **** 				}
 310:ServerLLDN.c  **** 			}
 311:ServerLLDN.c  **** 			curr_up_ts = i;
 2060               		.loc 6 311 0 is_stmt 1
 2061 099a 8B81      		ldd r24,Y+3
 2062 099c 9C81      		ldd r25,Y+4
 2063 099e 9A83      		std Y+2,r25
 2064 09a0 8983      		std Y+1,r24
 2065               	.L60:
 2066               	.LBE6:
 312:ServerLLDN.c  **** 		}
 313:ServerLLDN.c  **** 	
 314:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].rssi = ind->rssi;
 2067               		.loc 6 314 0
 2068 09a2 8D85      		ldd r24,Y+13
 2069 09a4 9E85      		ldd r25,Y+14
 2070 09a6 FC01      		movw r30,r24
 2071 09a8 8485      		ldd r24,Z+12
 2072 09aa 582F      		mov r21,r24
 2073 09ac 2981      		ldd r18,Y+1
 2074 09ae 3A81      		ldd r19,Y+2
 2075 09b0 4AE4      		ldi r20,lo8(74)
 2076 09b2 429F      		mul r20,r18
 2077 09b4 C001      		movw r24,r0
 2078 09b6 439F      		mul r20,r19
 2079 09b8 900D      		add r25,r0
 2080 09ba 1124      		clr __zero_reg__
 2081 09bc 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2082 09be 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2083 09c0 FC01      		movw r30,r24
 2084 09c2 5083      		st Z,r21
 315:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2085               		.loc 6 315 0
 2086 09c4 2981      		ldd r18,Y+1
 2087 09c6 3A81      		ldd r19,Y+2
 2088 09c8 4AE4      		ldi r20,lo8(74)
 2089 09ca 429F      		mul r20,r18
 2090 09cc C001      		movw r24,r0
 2091 09ce 439F      		mul r20,r19
 2092 09d0 900D      		add r25,r0
 2093 09d2 1124      		clr __zero_reg__
 2094 09d4 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2095 09d6 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2096 09d8 FC01      		movw r30,r24
 2097 09da 8081      		ld r24,Z
 2098 09dc 882F      		mov r24,r24
 2099 09de 90E0      		ldi r25,0
 2100 09e0 092E      		mov __tmp_reg__,r25
 2101 09e2 000C      		lsl r0
 2102 09e4 AA0B      		sbc r26,r26
 2103 09e6 BB0B      		sbc r27,r27
 2104 09e8 BC01      		movw r22,r24
 2105 09ea CD01      		movw r24,r26
 2106 09ec 0E94 0000 		call __floatsisf
 2107 09f0 4B01      		movw r8,r22
 2108 09f2 5C01      		movw r10,r24
 2109 09f4 2981      		ldd r18,Y+1
 2110 09f6 3A81      		ldd r19,Y+2
 2111 09f8 4AE4      		ldi r20,lo8(74)
 2112 09fa 429F      		mul r20,r18
 2113 09fc C001      		movw r24,r0
 2114 09fe 439F      		mul r20,r19
 2115 0a00 900D      		add r25,r0
 2116 0a02 1124      		clr __zero_reg__
 2117 0a04 8050      		subi r24,lo8(-(nodes_info_arr+5))
 2118 0a06 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 2119 0a08 FC01      		movw r30,r24
 2120 0a0a C080      		ld r12,Z
 2121 0a0c D180      		ldd r13,Z+1
 2122 0a0e E280      		ldd r14,Z+2
 2123 0a10 F380      		ldd r15,Z+3
 2124 0a12 2981      		ldd r18,Y+1
 2125 0a14 3A81      		ldd r19,Y+2
 2126 0a16 4AE4      		ldi r20,lo8(74)
 2127 0a18 429F      		mul r20,r18
 2128 0a1a C001      		movw r24,r0
 2129 0a1c 439F      		mul r20,r19
 2130 0a1e 900D      		add r25,r0
 2131 0a20 1124      		clr __zero_reg__
 2132 0a22 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2133 0a24 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2134 0a26 FC01      		movw r30,r24
 2135 0a28 8081      		ld r24,Z
 2136 0a2a 9181      		ldd r25,Z+1
 2137 0a2c CC01      		movw r24,r24
 2138 0a2e A0E0      		ldi r26,0
 2139 0a30 B0E0      		ldi r27,0
 2140 0a32 BC01      		movw r22,r24
 2141 0a34 CD01      		movw r24,r26
 2142 0a36 0E94 0000 		call __floatunsisf
 2143 0a3a DC01      		movw r26,r24
 2144 0a3c CB01      		movw r24,r22
 2145 0a3e 9C01      		movw r18,r24
 2146 0a40 AD01      		movw r20,r26
 2147 0a42 C701      		movw r24,r14
 2148 0a44 B601      		movw r22,r12
 2149 0a46 0E94 0000 		call __mulsf3
 2150 0a4a DC01      		movw r26,r24
 2151 0a4c CB01      		movw r24,r22
 2152 0a4e 9C01      		movw r18,r24
 2153 0a50 AD01      		movw r20,r26
 2154 0a52 C501      		movw r24,r10
 2155 0a54 B401      		movw r22,r8
 2156 0a56 0E94 0000 		call __addsf3
 2157 0a5a DC01      		movw r26,r24
 2158 0a5c CB01      		movw r24,r22
 2159 0a5e 6C01      		movw r12,r24
 2160 0a60 7D01      		movw r14,r26
 316:ServerLLDN.c  **** 																				/(nodes_info_arr[curr_up_ts].msg_rec + 1);
 2161               		.loc 6 316 0
 2162 0a62 2981      		ldd r18,Y+1
 2163 0a64 3A81      		ldd r19,Y+2
 2164 0a66 4AE4      		ldi r20,lo8(74)
 2165 0a68 429F      		mul r20,r18
 2166 0a6a C001      		movw r24,r0
 2167 0a6c 439F      		mul r20,r19
 2168 0a6e 900D      		add r25,r0
 2169 0a70 1124      		clr __zero_reg__
 2170 0a72 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2171 0a74 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2172 0a76 FC01      		movw r30,r24
 2173 0a78 8081      		ld r24,Z
 2174 0a7a 9181      		ldd r25,Z+1
 2175 0a7c 0196      		adiw r24,1
 2176 0a7e CC01      		movw r24,r24
 2177 0a80 A0E0      		ldi r26,0
 2178 0a82 B0E0      		ldi r27,0
 2179 0a84 BC01      		movw r22,r24
 2180 0a86 CD01      		movw r24,r26
 2181 0a88 0E94 0000 		call __floatunsisf
 2182 0a8c DC01      		movw r26,r24
 2183 0a8e CB01      		movw r24,r22
 2184 0a90 9C01      		movw r18,r24
 2185 0a92 AD01      		movw r20,r26
 2186 0a94 C701      		movw r24,r14
 2187 0a96 B601      		movw r22,r12
 2188 0a98 0E94 0000 		call __divsf3
 2189 0a9c DC01      		movw r26,r24
 2190 0a9e CB01      		movw r24,r22
 315:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2191               		.loc 6 315 0
 2192 0aa0 4981      		ldd r20,Y+1
 2193 0aa2 5A81      		ldd r21,Y+2
 2194 0aa4 6AE4      		ldi r22,lo8(74)
 2195 0aa6 649F      		mul r22,r20
 2196 0aa8 9001      		movw r18,r0
 2197 0aaa 659F      		mul r22,r21
 2198 0aac 300D      		add r19,r0
 2199 0aae 1124      		clr __zero_reg__
 2200 0ab0 2050      		subi r18,lo8(-(nodes_info_arr+5))
 2201 0ab2 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 2202 0ab4 F901      		movw r30,r18
 2203 0ab6 8083      		st Z,r24
 2204 0ab8 9183      		std Z+1,r25
 2205 0aba A283      		std Z+2,r26
 2206 0abc B383      		std Z+3,r27
 317:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].msg_rec++;
 2207               		.loc 6 317 0
 2208 0abe 2981      		ldd r18,Y+1
 2209 0ac0 3A81      		ldd r19,Y+2
 2210 0ac2 4AE4      		ldi r20,lo8(74)
 2211 0ac4 429F      		mul r20,r18
 2212 0ac6 C001      		movw r24,r0
 2213 0ac8 439F      		mul r20,r19
 2214 0aca 900D      		add r25,r0
 2215 0acc 1124      		clr __zero_reg__
 2216 0ace 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2217 0ad0 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2218 0ad2 FC01      		movw r30,r24
 2219 0ad4 8081      		ld r24,Z
 2220 0ad6 9181      		ldd r25,Z+1
 2221 0ad8 9C01      		movw r18,r24
 2222 0ada 2F5F      		subi r18,-1
 2223 0adc 3F4F      		sbci r19,-1
 2224 0ade 4981      		ldd r20,Y+1
 2225 0ae0 5A81      		ldd r21,Y+2
 2226 0ae2 6AE4      		ldi r22,lo8(74)
 2227 0ae4 649F      		mul r22,r20
 2228 0ae6 C001      		movw r24,r0
 2229 0ae8 659F      		mul r22,r21
 2230 0aea 900D      		add r25,r0
 2231 0aec 1124      		clr __zero_reg__
 2232 0aee 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2233 0af0 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2234 0af2 FC01      		movw r30,r24
 2235 0af4 3183      		std Z+1,r19
 2236 0af6 2083      		st Z,r18
 318:ServerLLDN.c  **** 
 319:ServerLLDN.c  **** 		addToAckArray(curr_up_ts+1);
 2237               		.loc 6 319 0
 2238 0af8 8981      		ldd r24,Y+1
 2239 0afa 8F5F      		subi r24,lo8(-(1))
 2240 0afc 0E94 0000 		call addToAckArray
 2241               	.LBB7:
 320:ServerLLDN.c  **** 		#if PRINT
 321:ServerLLDN.c  **** // 		printf("\n[%d] Data: ", curr_up_ts);
 322:ServerLLDN.c  **** 		#endif
 323:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2242               		.loc 6 323 0
 2243 0b00 1E82      		std Y+6,__zero_reg__
 2244 0b02 1D82      		std Y+5,__zero_reg__
 2245 0b04 00C0      		rjmp .L65
 2246               	.L66:
 324:ServerLLDN.c  **** 		{
 325:ServerLLDN.c  **** 			msg_info_array[curr_up_ts].data_payload[i] = ind->data[i];
 2247               		.loc 6 325 0 discriminator 3
 2248 0b06 8D85      		ldd r24,Y+13
 2249 0b08 9E85      		ldd r25,Y+14
 2250 0b0a FC01      		movw r30,r24
 2251 0b0c 2085      		ldd r18,Z+8
 2252 0b0e 3185      		ldd r19,Z+9
 2253 0b10 8D81      		ldd r24,Y+5
 2254 0b12 9E81      		ldd r25,Y+6
 2255 0b14 820F      		add r24,r18
 2256 0b16 931F      		adc r25,r19
 2257 0b18 FC01      		movw r30,r24
 2258 0b1a 4081      		ld r20,Z
 2259 0b1c 8981      		ldd r24,Y+1
 2260 0b1e 9A81      		ldd r25,Y+2
 2261 0b20 54E8      		ldi r21,lo8(-124)
 2262 0b22 589F      		mul r21,r24
 2263 0b24 9001      		movw r18,r0
 2264 0b26 599F      		mul r21,r25
 2265 0b28 300D      		add r19,r0
 2266 0b2a 1124      		clr __zero_reg__
 2267 0b2c 8D81      		ldd r24,Y+5
 2268 0b2e 9E81      		ldd r25,Y+6
 2269 0b30 820F      		add r24,r18
 2270 0b32 931F      		adc r25,r19
 2271 0b34 8050      		subi r24,lo8(-(msg_info_array+5))
 2272 0b36 9040      		sbci r25,hi8(-(msg_info_array+5))
 2273 0b38 FC01      		movw r30,r24
 2274 0b3a 4083      		st Z,r20
 323:ServerLLDN.c  **** 		{
 2275               		.loc 6 323 0 discriminator 3
 2276 0b3c 8D81      		ldd r24,Y+5
 2277 0b3e 9E81      		ldd r25,Y+6
 2278 0b40 0196      		adiw r24,1
 2279 0b42 9E83      		std Y+6,r25
 2280 0b44 8D83      		std Y+5,r24
 2281               	.L65:
 323:ServerLLDN.c  **** 		{
 2282               		.loc 6 323 0 is_stmt 0 discriminator 1
 2283 0b46 8D85      		ldd r24,Y+13
 2284 0b48 9E85      		ldd r25,Y+14
 2285 0b4a FC01      		movw r30,r24
 2286 0b4c 8285      		ldd r24,Z+10
 2287 0b4e 282F      		mov r18,r24
 2288 0b50 30E0      		ldi r19,0
 2289 0b52 8D81      		ldd r24,Y+5
 2290 0b54 9E81      		ldd r25,Y+6
 2291 0b56 8217      		cp r24,r18
 2292 0b58 9307      		cpc r25,r19
 2293 0b5a 04F0      		brlt .L66
 2294               	.LBE7:
 326:ServerLLDN.c  **** 			#if PRINT
 327:ServerLLDN.c  **** // 			printf("%hhx", msg_info_array[curr_up_ts].data_payload[i]);
 328:ServerLLDN.c  **** 			#endif
 329:ServerLLDN.c  **** 		}		
 330:ServerLLDN.c  **** // 		printf(" cmp %d", relative_cmp);
 331:ServerLLDN.c  **** 	}
 2295               		.loc 6 331 0 is_stmt 1
 2296 0b5c 0000      		nop
 2297               	/* epilogue start */
 2298 0b5e 2E96      		adiw r28,14
 2299 0b60 0FB6      		in __tmp_reg__,__SREG__
 2300 0b62 F894      		cli
 2301 0b64 DEBF      		out __SP_H__,r29
 2302 0b66 0FBE      		out __SREG__,__tmp_reg__
 2303 0b68 CDBF      		out __SP_L__,r28
 2304 0b6a DF91      		pop r29
 2305 0b6c CF91      		pop r28
 2306 0b6e FF90      		pop r15
 2307 0b70 EF90      		pop r14
 2308 0b72 DF90      		pop r13
 2309 0b74 CF90      		pop r12
 2310 0b76 BF90      		pop r11
 2311 0b78 AF90      		pop r10
 2312 0b7a 9F90      		pop r9
 2313 0b7c 8F90      		pop r8
 2314 0b7e 0895      		ret
 2315               		.cfi_endproc
 2316               	.LFE141:
 2319               	appPanPrepareACK:
 2320               	.LFB142:
 332:ServerLLDN.c  **** 	
 333:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 334:ServerLLDN.c  **** 	{
 2321               		.loc 6 334 0
 2322               		.cfi_startproc
 2323 0b80 CF93      		push r28
 2324               	.LCFI92:
 2325               		.cfi_def_cfa_offset 3
 2326               		.cfi_offset 28, -2
 2327 0b82 DF93      		push r29
 2328               	.LCFI93:
 2329               		.cfi_def_cfa_offset 4
 2330               		.cfi_offset 29, -3
 2331 0b84 CDB7      		in r28,__SP_L__
 2332 0b86 DEB7      		in r29,__SP_H__
 2333               	.LCFI94:
 2334               		.cfi_def_cfa_register 28
 2335               	/* prologue: function */
 2336               	/* frame size = 0 */
 2337               	/* stack size = 2 */
 2338               	.L__stack_usage = 2
 335:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2339               		.loc 6 335 0
 2340 0b88 1092 0000 		sts msgReq+5+1,__zero_reg__
 2341 0b8c 1092 0000 		sts msgReq+5,__zero_reg__
 336:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2342               		.loc 6 336 0
 2343 0b90 1092 0000 		sts msgReq+7,__zero_reg__
 337:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2344               		.loc 6 337 0
 2345 0b94 1092 0000 		sts msgReq+8,__zero_reg__
 338:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2346               		.loc 6 338 0
 2347 0b98 80E0      		ldi r24,0
 2348 0b9a 90E4      		ldi r25,lo8(64)
 2349 0b9c 9093 0000 		sts msgReq+9+1,r25
 2350 0ba0 8093 0000 		sts msgReq+9,r24
 339:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2351               		.loc 6 339 0
 2352 0ba4 80E0      		ldi r24,lo8(ACKFrame)
 2353 0ba6 90E0      		ldi r25,hi8(ACKFrame)
 2354 0ba8 9093 0000 		sts msgReq+13+1,r25
 2355 0bac 8093 0000 		sts msgReq+13,r24
 340:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2356               		.loc 6 340 0
 2357 0bb0 8091 0000 		lds r24,ACKFrame_size
 2358 0bb4 9091 0000 		lds r25,ACKFrame_size+1
 2359 0bb8 8F5F      		subi r24,lo8(-(1))
 2360 0bba 8093 0000 		sts msgReq+15,r24
 341:ServerLLDN.c  **** 
 342:ServerLLDN.c  **** 	}
 2361               		.loc 6 342 0
 2362 0bbe 0000      		nop
 2363               	/* epilogue start */
 2364 0bc0 DF91      		pop r29
 2365 0bc2 CF91      		pop r28
 2366 0bc4 0895      		ret
 2367               		.cfi_endproc
 2368               	.LFE142:
 2371               	appPanReset:
 2372               	.LFB143:
 343:ServerLLDN.c  **** 
 344:ServerLLDN.c  **** 	static void appPanReset(void)
 345:ServerLLDN.c  **** 	{
 2373               		.loc 6 345 0
 2374               		.cfi_startproc
 2375 0bc6 CF93      		push r28
 2376               	.LCFI95:
 2377               		.cfi_def_cfa_offset 3
 2378               		.cfi_offset 28, -2
 2379 0bc8 DF93      		push r29
 2380               	.LCFI96:
 2381               		.cfi_def_cfa_offset 4
 2382               		.cfi_offset 29, -3
 2383 0bca 00D0      		rcall .
 2384 0bcc 00D0      		rcall .
 2385 0bce 00D0      		rcall .
 2386               	.LCFI97:
 2387               		.cfi_def_cfa_offset 10
 2388 0bd0 CDB7      		in r28,__SP_L__
 2389 0bd2 DEB7      		in r29,__SP_H__
 2390               	.LCFI98:
 2391               		.cfi_def_cfa_register 28
 2392               	/* prologue: function */
 2393               	/* frame size = 6 */
 2394               	/* stack size = 8 */
 2395               	.L__stack_usage = 8
 346:ServerLLDN.c  **** 		// prepare beacon reset message
 347:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2396               		.loc 6 347 0
 2397 0bd4 1092 0000 		sts msgReq+5+1,__zero_reg__
 2398 0bd8 1092 0000 		sts msgReq+5,__zero_reg__
 348:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2399               		.loc 6 348 0
 2400 0bdc 1092 0000 		sts msgReq+7,__zero_reg__
 349:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2401               		.loc 6 349 0
 2402 0be0 1092 0000 		sts msgReq+8,__zero_reg__
 350:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2403               		.loc 6 350 0
 2404 0be4 80E4      		ldi r24,lo8(64)
 2405 0be6 94E0      		ldi r25,lo8(4)
 2406 0be8 9093 0000 		sts msgReq+9+1,r25
 2407 0bec 8093 0000 		sts msgReq+9,r24
 351:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2408               		.loc 6 351 0
 2409 0bf0 1092 0000 		sts msgReq+13+1,__zero_reg__
 2410 0bf4 1092 0000 		sts msgReq+13,__zero_reg__
 352:ServerLLDN.c  **** 		msgReq.size			= 0;
 2411               		.loc 6 352 0
 2412 0bf8 1092 0000 		sts msgReq+15,__zero_reg__
 2413               	.LBB8:
 353:ServerLLDN.c  **** 
 354:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2414               		.loc 6 354 0
 2415 0bfc 1A82      		std Y+2,__zero_reg__
 2416 0bfe 1982      		std Y+1,__zero_reg__
 2417 0c00 00C0      		rjmp .L69
 2418               	.L70:
 355:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2419               		.loc 6 355 0 discriminator 3
 2420 0c02 8981      		ldd r24,Y+1
 2421 0c04 9A81      		ldd r25,Y+2
 2422 0c06 8050      		subi r24,lo8(-(ACKFrame+1))
 2423 0c08 9040      		sbci r25,hi8(-(ACKFrame+1))
 2424 0c0a FC01      		movw r30,r24
 2425 0c0c 1082      		st Z,__zero_reg__
 354:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2426               		.loc 6 354 0 discriminator 3
 2427 0c0e 8981      		ldd r24,Y+1
 2428 0c10 9A81      		ldd r25,Y+2
 2429 0c12 0196      		adiw r24,1
 2430 0c14 9A83      		std Y+2,r25
 2431 0c16 8983      		std Y+1,r24
 2432               	.L69:
 354:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2433               		.loc 6 354 0 is_stmt 0 discriminator 1
 2434 0c18 8981      		ldd r24,Y+1
 2435 0c1a 9A81      		ldd r25,Y+2
 2436 0c1c 8097      		sbiw r24,32
 2437 0c1e 04F0      		brlt .L70
 2438               	.LBE8:
 2439               	.LBB9:
 356:ServerLLDN.c  **** 			
 357:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2440               		.loc 6 357 0 is_stmt 1
 2441 0c20 1C82      		std Y+4,__zero_reg__
 2442 0c22 1B82      		std Y+3,__zero_reg__
 2443 0c24 00C0      		rjmp .L71
 2444               	.L74:
 358:ServerLLDN.c  **** 		{
 359:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2445               		.loc 6 359 0
 2446 0c26 2B81      		ldd r18,Y+3
 2447 0c28 3C81      		ldd r19,Y+4
 2448 0c2a 4AE4      		ldi r20,lo8(74)
 2449 0c2c 429F      		mul r20,r18
 2450 0c2e C001      		movw r24,r0
 2451 0c30 439F      		mul r20,r19
 2452 0c32 900D      		add r25,r0
 2453 0c34 1124      		clr __zero_reg__
 2454 0c36 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2455 0c38 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2456 0c3a FC01      		movw r30,r24
 2457 0c3c 1182      		std Z+1,__zero_reg__
 2458 0c3e 1082      		st Z,__zero_reg__
 360:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2459               		.loc 6 360 0
 2460 0c40 2B81      		ldd r18,Y+3
 2461 0c42 3C81      		ldd r19,Y+4
 2462 0c44 4AE4      		ldi r20,lo8(74)
 2463 0c46 429F      		mul r20,r18
 2464 0c48 C001      		movw r24,r0
 2465 0c4a 439F      		mul r20,r19
 2466 0c4c 900D      		add r25,r0
 2467 0c4e 1124      		clr __zero_reg__
 2468 0c50 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2469 0c52 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2470 0c54 FC01      		movw r30,r24
 2471 0c56 1182      		std Z+1,__zero_reg__
 2472 0c58 1082      		st Z,__zero_reg__
 361:ServerLLDN.c  **** 
 362:ServerLLDN.c  **** 			
 363:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2473               		.loc 6 363 0
 2474 0c5a 2B81      		ldd r18,Y+3
 2475 0c5c 3C81      		ldd r19,Y+4
 2476 0c5e 44E8      		ldi r20,lo8(-124)
 2477 0c60 429F      		mul r20,r18
 2478 0c62 C001      		movw r24,r0
 2479 0c64 439F      		mul r20,r19
 2480 0c66 900D      		add r25,r0
 2481 0c68 1124      		clr __zero_reg__
 2482 0c6a 8050      		subi r24,lo8(-(msg_info_array))
 2483 0c6c 9040      		sbci r25,hi8(-(msg_info_array))
 2484 0c6e FC01      		movw r30,r24
 2485 0c70 1182      		std Z+1,__zero_reg__
 2486 0c72 1082      		st Z,__zero_reg__
 364:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2487               		.loc 6 364 0
 2488 0c74 2B81      		ldd r18,Y+3
 2489 0c76 3C81      		ldd r19,Y+4
 2490 0c78 44E8      		ldi r20,lo8(-124)
 2491 0c7a 429F      		mul r20,r18
 2492 0c7c C001      		movw r24,r0
 2493 0c7e 439F      		mul r20,r19
 2494 0c80 900D      		add r25,r0
 2495 0c82 1124      		clr __zero_reg__
 2496 0c84 8050      		subi r24,lo8(-(msg_info_array+2))
 2497 0c86 9040      		sbci r25,hi8(-(msg_info_array+2))
 2498 0c88 FC01      		movw r30,r24
 2499 0c8a 1182      		std Z+1,__zero_reg__
 2500 0c8c 1082      		st Z,__zero_reg__
 2501               	.LBB10:
 365:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2502               		.loc 6 365 0
 2503 0c8e 1E82      		std Y+6,__zero_reg__
 2504 0c90 1D82      		std Y+5,__zero_reg__
 2505 0c92 00C0      		rjmp .L72
 2506               	.L73:
 366:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2507               		.loc 6 366 0 discriminator 3
 2508 0c94 8B81      		ldd r24,Y+3
 2509 0c96 9C81      		ldd r25,Y+4
 2510 0c98 4AE4      		ldi r20,lo8(74)
 2511 0c9a 489F      		mul r20,r24
 2512 0c9c 9001      		movw r18,r0
 2513 0c9e 499F      		mul r20,r25
 2514 0ca0 300D      		add r19,r0
 2515 0ca2 1124      		clr __zero_reg__
 2516 0ca4 8D81      		ldd r24,Y+5
 2517 0ca6 9E81      		ldd r25,Y+6
 2518 0ca8 820F      		add r24,r18
 2519 0caa 931F      		adc r25,r19
 2520 0cac 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2521 0cae 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2522 0cb0 FC01      		movw r30,r24
 2523 0cb2 1082      		st Z,__zero_reg__
 365:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2524               		.loc 6 365 0 discriminator 3
 2525 0cb4 8D81      		ldd r24,Y+5
 2526 0cb6 9E81      		ldd r25,Y+6
 2527 0cb8 0196      		adiw r24,1
 2528 0cba 9E83      		std Y+6,r25
 2529 0cbc 8D83      		std Y+5,r24
 2530               	.L72:
 365:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2531               		.loc 6 365 0 is_stmt 0 discriminator 1
 2532 0cbe 8D81      		ldd r24,Y+5
 2533 0cc0 9E81      		ldd r25,Y+6
 2534 0cc2 C297      		sbiw r24,50
 2535 0cc4 04F0      		brlt .L73
 2536               	.LBE10:
 357:ServerLLDN.c  **** 		{
 2537               		.loc 6 357 0 is_stmt 1 discriminator 2
 2538 0cc6 8B81      		ldd r24,Y+3
 2539 0cc8 9C81      		ldd r25,Y+4
 2540 0cca 0196      		adiw r24,1
 2541 0ccc 9C83      		std Y+4,r25
 2542 0cce 8B83      		std Y+3,r24
 2543               	.L71:
 357:ServerLLDN.c  **** 		{
 2544               		.loc 6 357 0 is_stmt 0 discriminator 1
 2545 0cd0 8B81      		ldd r24,Y+3
 2546 0cd2 9C81      		ldd r25,Y+4
 2547 0cd4 C297      		sbiw r24,50
 2548 0cd6 04F4      		brge .+2
 2549 0cd8 00C0      		rjmp .L74
 2550               	.LBE9:
 367:ServerLLDN.c  **** 		}
 368:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2551               		.loc 6 368 0 is_stmt 1
 2552 0cda 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2553 0cde 1092 0000 		sts ACKFrame_size,__zero_reg__
 369:ServerLLDN.c  **** 		counter_associados = 0;
 2554               		.loc 6 369 0
 2555 0ce2 1092 0000 		sts counter_associados+1,__zero_reg__
 2556 0ce6 1092 0000 		sts counter_associados,__zero_reg__
 370:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2557               		.loc 6 370 0
 2558 0cea 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2559 0cee 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 371:ServerLLDN.c  **** 		n = 0;
 2560               		.loc 6 371 0
 2561 0cf2 1092 0000 		sts n,__zero_reg__
 372:ServerLLDN.c  **** 	}
 2562               		.loc 6 372 0
 2563 0cf6 0000      		nop
 2564               	/* epilogue start */
 2565 0cf8 2696      		adiw r28,6
 2566 0cfa 0FB6      		in __tmp_reg__,__SREG__
 2567 0cfc F894      		cli
 2568 0cfe DEBF      		out __SP_H__,r29
 2569 0d00 0FBE      		out __SREG__,__tmp_reg__
 2570 0d02 CDBF      		out __SP_L__,r28
 2571 0d04 DF91      		pop r29
 2572 0d06 CF91      		pop r28
 2573 0d08 0895      		ret
 2574               		.cfi_endproc
 2575               	.LFE143:
 2577               	.global	__fixunssfsi
 2579               	appPanDiscInit:
 2580               	.LFB144:
 373:ServerLLDN.c  **** 
 374:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 375:ServerLLDN.c  **** 	{	
 2581               		.loc 6 375 0
 2582               		.cfi_startproc
 2583 0d0a CF93      		push r28
 2584               	.LCFI99:
 2585               		.cfi_def_cfa_offset 3
 2586               		.cfi_offset 28, -2
 2587 0d0c DF93      		push r29
 2588               	.LCFI100:
 2589               		.cfi_def_cfa_offset 4
 2590               		.cfi_offset 29, -3
 2591 0d0e 00D0      		rcall .
 2592               	.LCFI101:
 2593               		.cfi_def_cfa_offset 6
 2594 0d10 CDB7      		in r28,__SP_L__
 2595 0d12 DEB7      		in r29,__SP_H__
 2596               	.LCFI102:
 2597               		.cfi_def_cfa_register 28
 2598               	/* prologue: function */
 2599               	/* frame size = 2 */
 2600               	/* stack size = 4 */
 2601               	.L__stack_usage = 4
 2602               	.LBB11:
 376:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 377:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2603               		.loc 6 377 0
 2604 0d14 1A82      		std Y+2,__zero_reg__
 2605 0d16 1982      		std Y+1,__zero_reg__
 2606 0d18 00C0      		rjmp .L76
 2607               	.L77:
 378:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2608               		.loc 6 378 0 discriminator 3
 2609 0d1a 8981      		ldd r24,Y+1
 2610 0d1c 9A81      		ldd r25,Y+2
 2611 0d1e 8050      		subi r24,lo8(-(ACKFrame+1))
 2612 0d20 9040      		sbci r25,hi8(-(ACKFrame+1))
 2613 0d22 FC01      		movw r30,r24
 2614 0d24 1082      		st Z,__zero_reg__
 377:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2615               		.loc 6 377 0 discriminator 3
 2616 0d26 8981      		ldd r24,Y+1
 2617 0d28 9A81      		ldd r25,Y+2
 2618 0d2a 0196      		adiw r24,1
 2619 0d2c 9A83      		std Y+2,r25
 2620 0d2e 8983      		std Y+1,r24
 2621               	.L76:
 377:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2622               		.loc 6 377 0 is_stmt 0 discriminator 1
 2623 0d30 8981      		ldd r24,Y+1
 2624 0d32 9A81      		ldd r25,Y+2
 2625 0d34 8097      		sbiw r24,32
 2626 0d36 04F0      		brlt .L77
 2627               	.LBE11:
 379:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2628               		.loc 6 379 0 is_stmt 1
 2629 0d38 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2630 0d3c 1092 0000 		sts ACKFrame_size,__zero_reg__
 380:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 381:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2631               		.loc 6 381 0
 2632 0d40 1092 0000 		sts msgReq+5+1,__zero_reg__
 2633 0d44 1092 0000 		sts msgReq+5,__zero_reg__
 382:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2634               		.loc 6 382 0
 2635 0d48 1092 0000 		sts msgReq+7,__zero_reg__
 383:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2636               		.loc 6 383 0
 2637 0d4c 1092 0000 		sts msgReq+8,__zero_reg__
 384:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2638               		.loc 6 384 0
 2639 0d50 80E4      		ldi r24,lo8(64)
 2640 0d52 91E0      		ldi r25,lo8(1)
 2641 0d54 9093 0000 		sts msgReq+9+1,r25
 2642 0d58 8093 0000 		sts msgReq+9,r24
 385:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2643               		.loc 6 385 0
 2644 0d5c 1092 0000 		sts msgReq+13+1,__zero_reg__
 2645 0d60 1092 0000 		sts msgReq+13,__zero_reg__
 386:ServerLLDN.c  **** 		msgReq.size					= 0;
 2646               		.loc 6 386 0
 2647 0d64 1092 0000 		sts msgReq+15,__zero_reg__
 387:ServerLLDN.c  **** 		
 388:ServerLLDN.c  **** 		macLLDNnumTimeSlots = 2;
 2648               		.loc 6 388 0
 2649 0d68 82E0      		ldi r24,lo8(2)
 2650 0d6a 90E0      		ldi r25,0
 2651 0d6c 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 2652 0d70 8093 0000 		sts macLLDNnumTimeSlots,r24
 389:ServerLLDN.c  **** 		
 390:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 391:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2653               		.loc 6 391 0
 2654 0d74 8091 0000 		lds r24,cycles_counter
 2655 0d78 8823      		tst r24
 2656 0d7a 01F0      		breq .+2
 2657 0d7c 00C0      		rjmp .L79
 392:ServerLLDN.c  **** 		{
 393:ServerLLDN.c  **** 			
 394:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 395:ServerLLDN.c  **** 		n = 127; 
 2658               		.loc 6 395 0
 2659 0d7e 8FE7      		ldi r24,lo8(127)
 2660 0d80 8093 0000 		sts n,r24
 396:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2661               		.loc 6 396 0
 2662 0d84 8091 0000 		lds r24,n
 2663 0d88 882F      		mov r24,r24
 2664 0d8a 90E0      		ldi r25,0
 2665 0d8c 0396      		adiw r24,3
 2666 0d8e 880F      		lsl r24
 2667 0d90 991F      		rol r25
 2668 0d92 092E      		mov __tmp_reg__,r25
 2669 0d94 000C      		lsl r0
 2670 0d96 AA0B      		sbc r26,r26
 2671 0d98 BB0B      		sbc r27,r27
 2672 0d9a BC01      		movw r22,r24
 2673 0d9c CD01      		movw r24,r26
 2674 0d9e 0E94 0000 		call __floatsisf
 2675 0da2 DC01      		movw r26,r24
 2676 0da4 CB01      		movw r24,r22
 2677 0da6 20E0      		ldi r18,0
 2678 0da8 30E0      		ldi r19,0
 2679 0daa 40E4      		ldi r20,lo8(64)
 2680 0dac 51E4      		ldi r21,lo8(65)
 2681 0dae BC01      		movw r22,r24
 2682 0db0 CD01      		movw r24,r26
 2683 0db2 0E94 0000 		call __addsf3
 2684 0db6 DC01      		movw r26,r24
 2685 0db8 CB01      		movw r24,r22
 2686 0dba 20E0      		ldi r18,0
 2687 0dbc 30E0      		ldi r19,0
 2688 0dbe 40E2      		ldi r20,lo8(32)
 2689 0dc0 52E4      		ldi r21,lo8(66)
 2690 0dc2 BC01      		movw r22,r24
 2691 0dc4 CD01      		movw r24,r26
 2692 0dc6 0E94 0000 		call __addsf3
 2693 0dca DC01      		movw r26,r24
 2694 0dcc CB01      		movw r24,r22
 2695 0dce 20E0      		ldi r18,0
 2696 0dd0 34E2      		ldi r19,lo8(36)
 2697 0dd2 44E7      		ldi r20,lo8(116)
 2698 0dd4 57E4      		ldi r21,lo8(71)
 2699 0dd6 BC01      		movw r22,r24
 2700 0dd8 CD01      		movw r24,r26
 2701 0dda 0E94 0000 		call __divsf3
 2702 0dde DC01      		movw r26,r24
 2703 0de0 CB01      		movw r24,r22
 2704 0de2 8093 0000 		sts tTS,r24
 2705 0de6 9093 0000 		sts tTS+1,r25
 2706 0dea A093 0000 		sts tTS+2,r26
 2707 0dee B093 0000 		sts tTS+3,r27
 397:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 398:ServerLLDN.c  **** 		
 399:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2708               		.loc 6 399 0
 2709 0df2 8091 0000 		lds r24,tTS
 2710 0df6 9091 0000 		lds r25,tTS+1
 2711 0dfa A091 0000 		lds r26,tTS+2
 2712 0dfe B091 0000 		lds r27,tTS+3
 2713 0e02 20E0      		ldi r18,0
 2714 0e04 30E0      		ldi r19,0
 2715 0e06 40E8      		ldi r20,lo8(-128)
 2716 0e08 50E4      		ldi r21,lo8(64)
 2717 0e0a BC01      		movw r22,r24
 2718 0e0c CD01      		movw r24,r26
 2719 0e0e 0E94 0000 		call __mulsf3
 2720 0e12 DC01      		movw r26,r24
 2721 0e14 CB01      		movw r24,r22
 2722 0e16 2DEB      		ldi r18,lo8(-67)
 2723 0e18 37E3      		ldi r19,lo8(55)
 2724 0e1a 46E8      		ldi r20,lo8(-122)
 2725 0e1c 57E3      		ldi r21,lo8(55)
 2726 0e1e BC01      		movw r22,r24
 2727 0e20 CD01      		movw r24,r26
 2728 0e22 0E94 0000 		call __divsf3
 2729 0e26 DC01      		movw r26,r24
 2730 0e28 CB01      		movw r24,r22
 2731 0e2a 8093 0000 		sts beaconInterval_association,r24
 2732 0e2e 9093 0000 		sts beaconInterval_association+1,r25
 2733 0e32 A093 0000 		sts beaconInterval_association+2,r26
 2734 0e36 B093 0000 		sts beaconInterval_association+3,r27
 400:ServerLLDN.c  **** 			#if PRINT
 401:ServerLLDN.c  **** // 			printf("\n Beacon interval %f", beaconInterval_association);
 402:ServerLLDN.c  **** 			#endif
 403:ServerLLDN.c  **** 			/*
 404:ServerLLDN.c  **** 			* Configure interrupts callback functions
 405:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 406:ServerLLDN.c  **** 			*/
 407:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2735               		.loc 6 407 0
 2736 0e3a 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2737 0e3c 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2738 0e3e 0E94 0000 		call macsc_set_cmp1_int_cb
 408:ServerLLDN.c  **** 			/*
 409:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 410:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 411:ServerLLDN.c  **** 			*/
 412:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2739               		.loc 6 412 0
 2740 0e42 0E94 0000 		call macsc_enable_manual_bts
 413:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2741               		.loc 6 413 0
 2742 0e46 81E0      		ldi r24,lo8(1)
 2743 0e48 0E94 0000 		call macsc_enable_cmp_int
 414:ServerLLDN.c  **** 
 415:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2744               		.loc 6 415 0
 2745 0e4c 8091 0000 		lds r24,beaconInterval_association
 2746 0e50 9091 0000 		lds r25,beaconInterval_association+1
 2747 0e54 A091 0000 		lds r26,beaconInterval_association+2
 2748 0e58 B091 0000 		lds r27,beaconInterval_association+3
 2749 0e5c BC01      		movw r22,r24
 2750 0e5e CD01      		movw r24,r26
 2751 0e60 0E94 0000 		call __fixunssfsi
 2752 0e64 DC01      		movw r26,r24
 2753 0e66 CB01      		movw r24,r22
 2754 0e68 21E0      		ldi r18,lo8(1)
 2755 0e6a AC01      		movw r20,r24
 2756 0e6c BD01      		movw r22,r26
 2757 0e6e 81E0      		ldi r24,lo8(1)
 2758 0e70 0E94 0000 		call macsc_use_cmp
 2759               	.L79:
 416:ServerLLDN.c  **** 			
 417:ServerLLDN.c  **** 			/* Timer used in testing */
 418:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 419:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 420:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 421:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 422:ServerLLDN.c  **** 			#endif
 423:ServerLLDN.c  **** 			
 424:ServerLLDN.c  **** 		#endif
 425:ServerLLDN.c  **** 		}
 426:ServerLLDN.c  **** 	}
 2760               		.loc 6 426 0
 2761 0e74 0000      		nop
 2762               	/* epilogue start */
 2763 0e76 0F90      		pop __tmp_reg__
 2764 0e78 0F90      		pop __tmp_reg__
 2765 0e7a DF91      		pop r29
 2766 0e7c CF91      		pop r28
 2767 0e7e 0895      		ret
 2768               		.cfi_endproc
 2769               	.LFE144:
 2772               	end_of_superframe_Online:
 2773               	.LFB145:
 427:ServerLLDN.c  **** 	
 428:ServerLLDN.c  **** 	static void end_of_superframe_Online(void)
 429:ServerLLDN.c  **** 	{
 2774               		.loc 6 429 0
 2775               		.cfi_startproc
 2776 0e80 CF93      		push r28
 2777               	.LCFI103:
 2778               		.cfi_def_cfa_offset 3
 2779               		.cfi_offset 28, -2
 2780 0e82 DF93      		push r29
 2781               	.LCFI104:
 2782               		.cfi_def_cfa_offset 4
 2783               		.cfi_offset 29, -3
 2784 0e84 CDB7      		in r28,__SP_L__
 2785 0e86 DEB7      		in r29,__SP_H__
 2786               	.LCFI105:
 2787               		.cfi_def_cfa_register 28
 2788               	/* prologue: function */
 2789               	/* frame size = 0 */
 2790               	/* stack size = 2 */
 2791               	.L__stack_usage = 2
 430:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 2792               		.loc 6 430 0
 2793 0e88 88E0      		ldi r24,lo8(8)
 2794 0e8a 8093 0000 		sts appPanState,r24
 431:ServerLLDN.c  **** 		if(cycles_counter>0)
 2795               		.loc 6 431 0
 2796 0e8e 8091 0000 		lds r24,cycles_counter
 2797 0e92 8823      		tst r24
 2798 0e94 01F0      		breq .L81
 432:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 2799               		.loc 6 432 0
 2800 0e96 82E0      		ldi r24,lo8(2)
 2801 0e98 8093 0000 		sts appState,r24
 433:ServerLLDN.c  **** 		else
 434:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 435:ServerLLDN.c  **** 
 436:ServerLLDN.c  **** 	}
 2802               		.loc 6 436 0
 2803 0e9c 00C0      		rjmp .L83
 2804               	.L81:
 434:ServerLLDN.c  **** 
 2805               		.loc 6 434 0
 2806 0e9e 83E0      		ldi r24,lo8(3)
 2807 0ea0 8093 0000 		sts appState,r24
 2808               	.L83:
 2809               		.loc 6 436 0
 2810 0ea4 0000      		nop
 2811               	/* epilogue start */
 2812 0ea6 DF91      		pop r29
 2813 0ea8 CF91      		pop r28
 2814 0eaa 0895      		ret
 2815               		.cfi_endproc
 2816               	.LFE145:
 2819               	send_gack:
 2820               	.LFB146:
 437:ServerLLDN.c  **** 	
 438:ServerLLDN.c  **** 	static void send_gack(void)
 439:ServerLLDN.c  **** 	{
 2821               		.loc 6 439 0
 2822               		.cfi_startproc
 2823 0eac CF93      		push r28
 2824               	.LCFI106:
 2825               		.cfi_def_cfa_offset 3
 2826               		.cfi_offset 28, -2
 2827 0eae DF93      		push r29
 2828               	.LCFI107:
 2829               		.cfi_def_cfa_offset 4
 2830               		.cfi_offset 29, -3
 2831 0eb0 00D0      		rcall .
 2832               	.LCFI108:
 2833               		.cfi_def_cfa_offset 6
 2834 0eb2 CDB7      		in r28,__SP_L__
 2835 0eb4 DEB7      		in r29,__SP_H__
 2836               	.LCFI109:
 2837               		.cfi_def_cfa_register 28
 2838               	/* prologue: function */
 2839               	/* frame size = 2 */
 2840               	/* stack size = 4 */
 2841               	.L__stack_usage = 4
 440:ServerLLDN.c  **** 		msgReqGACK.size = sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 2842               		.loc 6 440 0
 2843 0eb6 8091 0000 		lds r24,macLLDNRetransmitTS
 2844 0eba 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2845 0ebe 8F5F      		subi r24,lo8(-(1))
 2846 0ec0 8093 0000 		sts msgReqGACK+15,r24
 441:ServerLLDN.c  **** 		NWK_DataReq(&msgReqGACK);
 2847               		.loc 6 441 0
 2848 0ec4 80E0      		ldi r24,lo8(msgReqGACK)
 2849 0ec6 90E0      		ldi r25,hi8(msgReqGACK)
 2850 0ec8 0E94 0000 		call NWK_DataReq
 442:ServerLLDN.c  **** 		ACKFrame_aux = ACKFrame;
 2851               		.loc 6 442 0
 2852 0ecc 81E2      		ldi r24,lo8(33)
 2853 0ece E0E0      		ldi r30,lo8(ACKFrame)
 2854 0ed0 F0E0      		ldi r31,hi8(ACKFrame)
 2855 0ed2 A0E0      		ldi r26,lo8(ACKFrame_aux)
 2856 0ed4 B0E0      		ldi r27,hi8(ACKFrame_aux)
 2857               		0:
 2858 0ed6 0190      		ld r0,Z+
 2859 0ed8 0D92      		st X+,r0
 2860 0eda 8A95      		dec r24
 2861 0edc 01F4      		brne 0b
 443:ServerLLDN.c  **** 		#if PRINT
 444:ServerLLDN.c  **** // 		printf("\n%hhx ", ACKFrame.ackFlags[0]);
 445:ServerLLDN.c  **** 		#endif
 446:ServerLLDN.c  **** 		if(cycles_counter<NUMERO_CICLOS_ONLINE-1)
 2862               		.loc 6 446 0
 2863 0ede 8091 0000 		lds r24,cycles_counter
 2864 0ee2 8431      		cpi r24,lo8(20)
 2865 0ee4 00F4      		brsh .L89
 2866               	.LBB12:
 447:ServerLLDN.c  **** 		{
 448:ServerLLDN.c  **** 			for (int i  = 0; i < assTimeSlot;i++)
 2867               		.loc 6 448 0
 2868 0ee6 1A82      		std Y+2,__zero_reg__
 2869 0ee8 1982      		std Y+1,__zero_reg__
 2870 0eea 00C0      		rjmp .L86
 2871               	.L88:
 449:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2872               		.loc 6 449 0
 2873 0eec 8981      		ldd r24,Y+1
 2874 0eee 9A81      		ldd r25,Y+2
 2875 0ef0 0196      		adiw r24,1
 2876 0ef2 0E94 0000 		call check_ack_pan
 2877 0ef6 982F      		mov r25,r24
 2878 0ef8 81E0      		ldi r24,lo8(1)
 2879 0efa 8927      		eor r24,r25
 2880 0efc 8823      		tst r24
 2881 0efe 01F0      		breq .L87
 450:ServerLLDN.c  **** 				{
 451:ServerLLDN.c  **** 					nodes_info_arr[i].msg_not_rec++;
 2882               		.loc 6 451 0
 2883 0f00 2981      		ldd r18,Y+1
 2884 0f02 3A81      		ldd r19,Y+2
 2885 0f04 4AE4      		ldi r20,lo8(74)
 2886 0f06 429F      		mul r20,r18
 2887 0f08 C001      		movw r24,r0
 2888 0f0a 439F      		mul r20,r19
 2889 0f0c 900D      		add r25,r0
 2890 0f0e 1124      		clr __zero_reg__
 2891 0f10 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2892 0f12 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2893 0f14 FC01      		movw r30,r24
 2894 0f16 8081      		ld r24,Z
 2895 0f18 9181      		ldd r25,Z+1
 2896 0f1a 9C01      		movw r18,r24
 2897 0f1c 2F5F      		subi r18,-1
 2898 0f1e 3F4F      		sbci r19,-1
 2899 0f20 4981      		ldd r20,Y+1
 2900 0f22 5A81      		ldd r21,Y+2
 2901 0f24 6AE4      		ldi r22,lo8(74)
 2902 0f26 649F      		mul r22,r20
 2903 0f28 C001      		movw r24,r0
 2904 0f2a 659F      		mul r22,r21
 2905 0f2c 900D      		add r25,r0
 2906 0f2e 1124      		clr __zero_reg__
 2907 0f30 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2908 0f32 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2909 0f34 FC01      		movw r30,r24
 2910 0f36 3183      		std Z+1,r19
 2911 0f38 2083      		st Z,r18
 2912               	.L87:
 448:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2913               		.loc 6 448 0 discriminator 2
 2914 0f3a 8981      		ldd r24,Y+1
 2915 0f3c 9A81      		ldd r25,Y+2
 2916 0f3e 0196      		adiw r24,1
 2917 0f40 9A83      		std Y+2,r25
 2918 0f42 8983      		std Y+1,r24
 2919               	.L86:
 448:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2920               		.loc 6 448 0 is_stmt 0 discriminator 1
 2921 0f44 8091 0000 		lds r24,assTimeSlot
 2922 0f48 9091 0000 		lds r25,assTimeSlot+1
 2923 0f4c 2981      		ldd r18,Y+1
 2924 0f4e 3A81      		ldd r19,Y+2
 2925 0f50 2817      		cp r18,r24
 2926 0f52 3907      		cpc r19,r25
 2927 0f54 04F0      		brlt .L88
 2928               	.L89:
 2929               	.LBE12:
 452:ServerLLDN.c  **** 			}
 453:ServerLLDN.c  **** 		}
 454:ServerLLDN.c  **** 	}
 2930               		.loc 6 454 0 is_stmt 1
 2931 0f56 0000      		nop
 2932               	/* epilogue start */
 2933 0f58 0F90      		pop __tmp_reg__
 2934 0f5a 0F90      		pop __tmp_reg__
 2935 0f5c DF91      		pop r29
 2936 0f5e CF91      		pop r28
 2937 0f60 0895      		ret
 2938               		.cfi_endproc
 2939               	.LFE146:
 2942               	appPanOnlineInit:
 2943               	.LFB147:
 455:ServerLLDN.c  **** 
 456:ServerLLDN.c  **** 	static void appPanOnlineInit()
 457:ServerLLDN.c  **** 	{
 2944               		.loc 6 457 0
 2945               		.cfi_startproc
 2946 0f62 EF92      		push r14
 2947               	.LCFI110:
 2948               		.cfi_def_cfa_offset 3
 2949               		.cfi_offset 14, -2
 2950 0f64 FF92      		push r15
 2951               	.LCFI111:
 2952               		.cfi_def_cfa_offset 4
 2953               		.cfi_offset 15, -3
 2954 0f66 0F93      		push r16
 2955               	.LCFI112:
 2956               		.cfi_def_cfa_offset 5
 2957               		.cfi_offset 16, -4
 2958 0f68 1F93      		push r17
 2959               	.LCFI113:
 2960               		.cfi_def_cfa_offset 6
 2961               		.cfi_offset 17, -5
 2962 0f6a CF93      		push r28
 2963               	.LCFI114:
 2964               		.cfi_def_cfa_offset 7
 2965               		.cfi_offset 28, -6
 2966 0f6c DF93      		push r29
 2967               	.LCFI115:
 2968               		.cfi_def_cfa_offset 8
 2969               		.cfi_offset 29, -7
 2970 0f6e 00D0      		rcall .
 2971 0f70 00D0      		rcall .
 2972 0f72 00D0      		rcall .
 2973               	.LCFI116:
 2974               		.cfi_def_cfa_offset 14
 2975 0f74 CDB7      		in r28,__SP_L__
 2976 0f76 DEB7      		in r29,__SP_H__
 2977               	.LCFI117:
 2978               		.cfi_def_cfa_register 28
 2979               	/* prologue: function */
 2980               	/* frame size = 6 */
 2981               	/* stack size = 12 */
 2982               	.L__stack_usage = 12
 458:ServerLLDN.c  **** 			
 459:ServerLLDN.c  **** 			macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 2983               		.loc 6 459 0
 2984 0f78 8091 0000 		lds r24,assTimeSlot
 2985 0f7c 9091 0000 		lds r25,assTimeSlot+1
 2986 0f80 880F      		lsl r24
 2987 0f82 991F      		rol r25
 2988 0f84 0196      		adiw r24,1
 2989 0f86 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 2990 0f8a 8093 0000 		sts macLLDNnumUplinkTS,r24
 460:ServerLLDN.c  **** 			macLLDNRetransmitTS = assTimeSlot;
 2991               		.loc 6 460 0
 2992 0f8e 8091 0000 		lds r24,assTimeSlot
 2993 0f92 9091 0000 		lds r25,assTimeSlot+1
 2994 0f96 9093 0000 		sts macLLDNRetransmitTS+1,r25
 2995 0f9a 8093 0000 		sts macLLDNRetransmitTS,r24
 461:ServerLLDN.c  **** 			macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;			
 2996               		.loc 6 461 0
 2997 0f9e 8091 0000 		lds r24,macLLDNnumUplinkTS
 2998 0fa2 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 2999 0fa6 0296      		adiw r24,2
 3000 0fa8 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 3001 0fac 8093 0000 		sts macLLDNnumTimeSlots,r24
 462:ServerLLDN.c  **** 			
 463:ServerLLDN.c  **** // 			printf("\nmacLLDNnumUplinkTS : %d\nmacLLDNRetransmitTS : %d\nmacLLDNnumTimeSlots : %d",macLLD
 464:ServerLLDN.c  **** 			
 465:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration = 75;
 3002               		.loc 6 465 0
 3003 0fb0 8091 0000 		lds r24,config_request_frame+5
 3004 0fb4 8078      		andi r24,lo8(-128)
 3005 0fb6 8B64      		ori r24,lo8(75)
 3006 0fb8 8093 0000 		sts config_request_frame+5,r24
 466:ServerLLDN.c  **** 			
 467:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 3007               		.loc 6 467 0
 3008 0fbc 8091 0000 		lds r24,config_request_frame+5
 3009 0fc0 8F77      		andi r24,lo8(127)
 3010 0fc2 882F      		mov r24,r24
 3011 0fc4 90E0      		ldi r25,0
 3012 0fc6 0396      		adiw r24,3
 3013 0fc8 880F      		lsl r24
 3014 0fca 991F      		rol r25
 3015 0fcc 092E      		mov __tmp_reg__,r25
 3016 0fce 000C      		lsl r0
 3017 0fd0 AA0B      		sbc r26,r26
 3018 0fd2 BB0B      		sbc r27,r27
 3019 0fd4 BC01      		movw r22,r24
 3020 0fd6 CD01      		movw r24,r26
 3021 0fd8 0E94 0000 		call __floatsisf
 3022 0fdc DC01      		movw r26,r24
 3023 0fde CB01      		movw r24,r22
 3024 0fe0 20E0      		ldi r18,0
 3025 0fe2 30E0      		ldi r19,0
 3026 0fe4 40E4      		ldi r20,lo8(64)
 3027 0fe6 51E4      		ldi r21,lo8(65)
 3028 0fe8 BC01      		movw r22,r24
 3029 0fea CD01      		movw r24,r26
 3030 0fec 0E94 0000 		call __addsf3
 3031 0ff0 DC01      		movw r26,r24
 3032 0ff2 CB01      		movw r24,r22
 3033 0ff4 20E0      		ldi r18,0
 3034 0ff6 30E0      		ldi r19,0
 3035 0ff8 40E2      		ldi r20,lo8(32)
 3036 0ffa 52E4      		ldi r21,lo8(66)
 3037 0ffc BC01      		movw r22,r24
 3038 0ffe CD01      		movw r24,r26
 3039 1000 0E94 0000 		call __addsf3
 3040 1004 DC01      		movw r26,r24
 3041 1006 CB01      		movw r24,r22
 3042 1008 20E0      		ldi r18,0
 3043 100a 34E2      		ldi r19,lo8(36)
 3044 100c 44E7      		ldi r20,lo8(116)
 3045 100e 57E4      		ldi r21,lo8(71)
 3046 1010 BC01      		movw r22,r24
 3047 1012 CD01      		movw r24,r26
 3048 1014 0E94 0000 		call __divsf3
 3049 1018 DC01      		movw r26,r24
 3050 101a CB01      		movw r24,r22
 3051 101c 8093 0000 		sts tTS,r24
 3052 1020 9093 0000 		sts tTS+1,r25
 3053 1024 A093 0000 		sts tTS+2,r26
 3054 1028 B093 0000 		sts tTS+3,r27
 468:ServerLLDN.c  **** 				
 469:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 3055               		.loc 6 469 0
 3056 102c 8091 0000 		lds r24,config_request_frame+5
 3057 1030 8F77      		andi r24,lo8(127)
 3058 1032 8093 0000 		sts n,r24
 470:ServerLLDN.c  **** 			
 471:ServerLLDN.c  **** 
 472:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 3059               		.loc 6 472 0
 3060 1036 1092 0000 		sts msgReq+5+1,__zero_reg__
 3061 103a 1092 0000 		sts msgReq+5,__zero_reg__
 473:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 3062               		.loc 6 473 0
 3063 103e 1092 0000 		sts msgReq+7,__zero_reg__
 474:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 3064               		.loc 6 474 0
 3065 1042 1092 0000 		sts msgReq+8,__zero_reg__
 475:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 3066               		.loc 6 475 0
 3067 1046 80EC      		ldi r24,lo8(-64)
 3068 1048 90E0      		ldi r25,0
 3069 104a 9093 0000 		sts msgReq+9+1,r25
 3070 104e 8093 0000 		sts msgReq+9,r24
 476:ServerLLDN.c  **** 			msgReq.data					= NULL;
 3071               		.loc 6 476 0
 3072 1052 1092 0000 		sts msgReq+13+1,__zero_reg__
 3073 1056 1092 0000 		sts msgReq+13,__zero_reg__
 477:ServerLLDN.c  **** 			msgReq.size					= 0;
 3074               		.loc 6 477 0
 3075 105a 1092 0000 		sts msgReq+15,__zero_reg__
 478:ServerLLDN.c  **** 			
 479:ServerLLDN.c  **** 			beaconInterval= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3076               		.loc 6 479 0
 3077 105e 8091 0000 		lds r24,macLLDNnumUplinkTS
 3078 1062 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3079 1066 0496      		adiw r24,4
 3080 1068 092E      		mov __tmp_reg__,r25
 3081 106a 000C      		lsl r0
 3082 106c AA0B      		sbc r26,r26
 3083 106e BB0B      		sbc r27,r27
 3084 1070 BC01      		movw r22,r24
 3085 1072 CD01      		movw r24,r26
 3086 1074 0E94 0000 		call __floatsisf
 3087 1078 7B01      		movw r14,r22
 3088 107a 8C01      		movw r16,r24
 3089 107c 8091 0000 		lds r24,tTS
 3090 1080 9091 0000 		lds r25,tTS+1
 3091 1084 A091 0000 		lds r26,tTS+2
 3092 1088 B091 0000 		lds r27,tTS+3
 3093 108c 9C01      		movw r18,r24
 3094 108e AD01      		movw r20,r26
 3095 1090 C801      		movw r24,r16
 3096 1092 B701      		movw r22,r14
 3097 1094 0E94 0000 		call __mulsf3
 3098 1098 DC01      		movw r26,r24
 3099 109a CB01      		movw r24,r22
 3100 109c 2DEB      		ldi r18,lo8(-67)
 3101 109e 37E3      		ldi r19,lo8(55)
 3102 10a0 46E8      		ldi r20,lo8(-122)
 3103 10a2 57E3      		ldi r21,lo8(55)
 3104 10a4 BC01      		movw r22,r24
 3105 10a6 CD01      		movw r24,r26
 3106 10a8 0E94 0000 		call __divsf3
 3107 10ac DC01      		movw r26,r24
 3108 10ae CB01      		movw r24,r22
 3109 10b0 8093 0000 		sts beaconInterval,r24
 3110 10b4 9093 0000 		sts beaconInterval+1,r25
 3111 10b8 A093 0000 		sts beaconInterval+2,r26
 3112 10bc B093 0000 		sts beaconInterval+3,r27
 480:ServerLLDN.c  **** 			float GACK_tTS = (assTimeSlot + 0.2 + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3113               		.loc 6 480 0
 3114 10c0 8091 0000 		lds r24,assTimeSlot
 3115 10c4 9091 0000 		lds r25,assTimeSlot+1
 3116 10c8 092E      		mov __tmp_reg__,r25
 3117 10ca 000C      		lsl r0
 3118 10cc AA0B      		sbc r26,r26
 3119 10ce BB0B      		sbc r27,r27
 3120 10d0 BC01      		movw r22,r24
 3121 10d2 CD01      		movw r24,r26
 3122 10d4 0E94 0000 		call __floatsisf
 3123 10d8 DC01      		movw r26,r24
 3124 10da CB01      		movw r24,r22
 3125 10dc 2DEC      		ldi r18,lo8(-51)
 3126 10de 3CEC      		ldi r19,lo8(-52)
 3127 10e0 4CE4      		ldi r20,lo8(76)
 3128 10e2 5EE3      		ldi r21,lo8(62)
 3129 10e4 BC01      		movw r22,r24
 3130 10e6 CD01      		movw r24,r26
 3131 10e8 0E94 0000 		call __addsf3
 3132 10ec DC01      		movw r26,r24
 3133 10ee CB01      		movw r24,r22
 3134 10f0 20E0      		ldi r18,0
 3135 10f2 30E0      		ldi r19,0
 3136 10f4 40E8      		ldi r20,lo8(-128)
 3137 10f6 50E4      		ldi r21,lo8(64)
 3138 10f8 BC01      		movw r22,r24
 3139 10fa CD01      		movw r24,r26
 3140 10fc 0E94 0000 		call __addsf3
 3141 1100 DC01      		movw r26,r24
 3142 1102 CB01      		movw r24,r22
 3143 1104 7C01      		movw r14,r24
 3144 1106 8D01      		movw r16,r26
 3145 1108 8091 0000 		lds r24,tTS
 3146 110c 9091 0000 		lds r25,tTS+1
 3147 1110 A091 0000 		lds r26,tTS+2
 3148 1114 B091 0000 		lds r27,tTS+3
 3149 1118 9C01      		movw r18,r24
 3150 111a AD01      		movw r20,r26
 3151 111c C801      		movw r24,r16
 3152 111e B701      		movw r22,r14
 3153 1120 0E94 0000 		call __mulsf3
 3154 1124 DC01      		movw r26,r24
 3155 1126 CB01      		movw r24,r22
 3156 1128 2DEB      		ldi r18,lo8(-67)
 3157 112a 37E3      		ldi r19,lo8(55)
 3158 112c 46E8      		ldi r20,lo8(-122)
 3159 112e 57E3      		ldi r21,lo8(55)
 3160 1130 BC01      		movw r22,r24
 3161 1132 CD01      		movw r24,r26
 3162 1134 0E94 0000 		call __divsf3
 3163 1138 DC01      		movw r26,r24
 3164 113a CB01      		movw r24,r22
 3165 113c 8B83      		std Y+3,r24
 3166 113e 9C83      		std Y+4,r25
 3167 1140 AD83      		std Y+5,r26
 3168 1142 BE83      		std Y+6,r27
 481:ServerLLDN.c  **** 			macsc_write_count(0);
 3169               		.loc 6 481 0
 3170 1144 60E0      		ldi r22,0
 3171 1146 70E0      		ldi r23,0
 3172 1148 CB01      		movw r24,r22
 3173 114a 0E94 0000 		call macsc_write_count
 482:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(end_of_superframe_Online);
 3174               		.loc 6 482 0
 3175 114e 80E0      		ldi r24,lo8(gs(end_of_superframe_Online))
 3176 1150 90E0      		ldi r25,hi8(gs(end_of_superframe_Online))
 3177 1152 0E94 0000 		call macsc_set_cmp1_int_cb
 483:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 3178               		.loc 6 483 0
 3179 1156 81E0      		ldi r24,lo8(1)
 3180 1158 0E94 0000 		call macsc_enable_cmp_int
 484:ServerLLDN.c  **** 
 485:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(send_gack);
 3181               		.loc 6 485 0
 3182 115c 80E0      		ldi r24,lo8(gs(send_gack))
 3183 115e 90E0      		ldi r25,hi8(gs(send_gack))
 3184 1160 0E94 0000 		call macsc_set_cmp2_int_cb
 486:ServerLLDN.c  **** 			if(cycles_counter != NUMERO_CICLOS_ONLINE)
 3185               		.loc 6 486 0
 3186 1164 8091 0000 		lds r24,cycles_counter
 3187 1168 8531      		cpi r24,lo8(21)
 3188 116a 01F0      		breq .L91
 487:ServerLLDN.c  **** 				macsc_enable_cmp_int(MACSC_CC2);
 3189               		.loc 6 487 0
 3190 116c 82E0      		ldi r24,lo8(2)
 3191 116e 0E94 0000 		call macsc_enable_cmp_int
 3192               	.L91:
 488:ServerLLDN.c  **** 
 489:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval, MACSC_CC1);
 3193               		.loc 6 489 0
 3194 1172 8091 0000 		lds r24,beaconInterval
 3195 1176 9091 0000 		lds r25,beaconInterval+1
 3196 117a A091 0000 		lds r26,beaconInterval+2
 3197 117e B091 0000 		lds r27,beaconInterval+3
 3198 1182 BC01      		movw r22,r24
 3199 1184 CD01      		movw r24,r26
 3200 1186 0E94 0000 		call __fixunssfsi
 3201 118a DC01      		movw r26,r24
 3202 118c CB01      		movw r24,r22
 3203 118e 21E0      		ldi r18,lo8(1)
 3204 1190 AC01      		movw r20,r24
 3205 1192 BD01      		movw r22,r26
 3206 1194 81E0      		ldi r24,lo8(1)
 3207 1196 0E94 0000 		call macsc_use_cmp
 490:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, GACK_tTS, MACSC_CC2);
 3208               		.loc 6 490 0
 3209 119a 6B81      		ldd r22,Y+3
 3210 119c 7C81      		ldd r23,Y+4
 3211 119e 8D81      		ldd r24,Y+5
 3212 11a0 9E81      		ldd r25,Y+6
 3213 11a2 0E94 0000 		call __fixunssfsi
 3214 11a6 DC01      		movw r26,r24
 3215 11a8 CB01      		movw r24,r22
 3216 11aa 22E0      		ldi r18,lo8(2)
 3217 11ac AC01      		movw r20,r24
 3218 11ae BD01      		movw r22,r26
 3219 11b0 81E0      		ldi r24,lo8(1)
 3220 11b2 0E94 0000 		call macsc_use_cmp
 491:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 3221               		.loc 6 491 0
 3222 11b6 0E94 0000 		call macsc_enable_manual_bts
 492:ServerLLDN.c  **** 			
 493:ServerLLDN.c  **** 			cmp_value_start_superframe = macsc_read_count();
 3223               		.loc 6 493 0
 3224 11ba 0E94 0000 		call macsc_read_count
 3225 11be DC01      		movw r26,r24
 3226 11c0 CB01      		movw r24,r22
 3227 11c2 8093 0000 		sts cmp_value_start_superframe,r24
 3228 11c6 9093 0000 		sts cmp_value_start_superframe+1,r25
 3229 11ca A093 0000 		sts cmp_value_start_superframe+2,r26
 3230 11ce B093 0000 		sts cmp_value_start_superframe+3,r27
 3231               	.LBB13:
 494:ServerLLDN.c  **** 
 495:ServerLLDN.c  **** 
 496:ServerLLDN.c  **** 			for(int i = 0; i < 32; i++)
 3232               		.loc 6 496 0
 3233 11d2 1A82      		std Y+2,__zero_reg__
 3234 11d4 1982      		std Y+1,__zero_reg__
 3235 11d6 00C0      		rjmp .L92
 3236               	.L93:
 497:ServerLLDN.c  **** 			{
 498:ServerLLDN.c  **** 				ACKFrame.ackFlags[i] = 0;
 3237               		.loc 6 498 0 discriminator 3
 3238 11d8 8981      		ldd r24,Y+1
 3239 11da 9A81      		ldd r25,Y+2
 3240 11dc 8050      		subi r24,lo8(-(ACKFrame+1))
 3241 11de 9040      		sbci r25,hi8(-(ACKFrame+1))
 3242 11e0 FC01      		movw r30,r24
 3243 11e2 1082      		st Z,__zero_reg__
 499:ServerLLDN.c  **** 				retransmit_ts_array[i] = 0;
 3244               		.loc 6 499 0 discriminator 3
 3245 11e4 8981      		ldd r24,Y+1
 3246 11e6 9A81      		ldd r25,Y+2
 3247 11e8 8050      		subi r24,lo8(-(retransmit_ts_array))
 3248 11ea 9040      		sbci r25,hi8(-(retransmit_ts_array))
 3249 11ec FC01      		movw r30,r24
 3250 11ee 1082      		st Z,__zero_reg__
 496:ServerLLDN.c  **** 			{
 3251               		.loc 6 496 0 discriminator 3
 3252 11f0 8981      		ldd r24,Y+1
 3253 11f2 9A81      		ldd r25,Y+2
 3254 11f4 0196      		adiw r24,1
 3255 11f6 9A83      		std Y+2,r25
 3256 11f8 8983      		std Y+1,r24
 3257               	.L92:
 496:ServerLLDN.c  **** 			{
 3258               		.loc 6 496 0 is_stmt 0 discriminator 1
 3259 11fa 8981      		ldd r24,Y+1
 3260 11fc 9A81      		ldd r25,Y+2
 3261 11fe 8097      		sbiw r24,32
 3262 1200 04F0      		brlt .L93
 3263               	.LBE13:
 500:ServerLLDN.c  **** 			}
 501:ServerLLDN.c  **** 			retransmit_ts_array_counter = 0;
 3264               		.loc 6 501 0 is_stmt 1
 3265 1202 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 3266 1206 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
 502:ServerLLDN.c  **** 			ACKFrame_size = 0;
 3267               		.loc 6 502 0
 3268 120a 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3269 120e 1092 0000 		sts ACKFrame_size,__zero_reg__
 503:ServerLLDN.c  **** 			
 504:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 3270               		.loc 6 504 0
 3271 1212 60E0      		ldi r22,lo8(gs(appDataInd))
 3272 1214 70E0      		ldi r23,hi8(gs(appDataInd))
 3273 1216 81E0      		ldi r24,lo8(1)
 3274 1218 0E94 0000 		call NWK_OpenEndpoint
 505:ServerLLDN.c  **** 	}
 3275               		.loc 6 505 0
 3276 121c 0000      		nop
 3277               	/* epilogue start */
 3278 121e 2696      		adiw r28,6
 3279 1220 0FB6      		in __tmp_reg__,__SREG__
 3280 1222 F894      		cli
 3281 1224 DEBF      		out __SP_H__,r29
 3282 1226 0FBE      		out __SREG__,__tmp_reg__
 3283 1228 CDBF      		out __SP_L__,r28
 3284 122a DF91      		pop r29
 3285 122c CF91      		pop r28
 3286 122e 1F91      		pop r17
 3287 1230 0F91      		pop r16
 3288 1232 FF90      		pop r15
 3289 1234 EF90      		pop r14
 3290 1236 0895      		ret
 3291               		.cfi_endproc
 3292               	.LFE147:
 3295               	appInit:
 3296               	.LFB148:
 506:ServerLLDN.c  **** 
 507:ServerLLDN.c  **** #else 
 508:ServerLLDN.c  **** 	uint8_t payloadSize = 50;
 509:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 510:ServerLLDN.c  **** 	uint8_t n = 0;
 511:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 512:ServerLLDN.c  **** 
 513:ServerLLDN.c  **** 
 514:ServerLLDN.c  **** 	
 515:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t rec_beacon;
 516:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 517:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 518:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 519:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 50,
 520:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 521:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 522:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 523:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 524:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 50,
 525:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 526:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 527:ServerLLDN.c  **** 												 
 528:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqDiscResponse = { .dstAddr = 0,
 529:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 530:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 531:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 532:ServerLLDN.c  **** 									.data = (uint8_t*)&msgDiscResponse,
 533:ServerLLDN.c  **** 									.size = sizeof(msgDiscResponse)};
 534:ServerLLDN.c  **** 	
 535:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqConfigStatus = { .dstAddr =0,
 536:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 537:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 538:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 539:ServerLLDN.c  **** 									.data = (uint8_t*)&msgConfigStatus,
 540:ServerLLDN.c  **** 									.size = sizeof(msgConfigStatus)};
 541:ServerLLDN.c  **** 		
 542:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqData = { .dstAddr =0,
 543:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 544:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 545:ServerLLDN.c  **** 									.options = NWK_OPT_LLDN_DATA,
 546:ServerLLDN.c  **** 									.data = (uint8_t*)&data_payload,
 547:ServerLLDN.c  **** 									.size = sizeof(data_payload)};
 548:ServerLLDN.c  **** 
 549:ServerLLDN.c  **** 	static bool ack_received = false;
 550:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 551:ServerLLDN.c  **** 	bool associated = 0;
 552:ServerLLDN.c  **** 	int ts_time;
 553:ServerLLDN.c  **** 	uint8_t STATE = DISC_MODE;
 554:ServerLLDN.c  **** 	int tmr_error = 0;
 555:ServerLLDN.c  **** 	float delta_error = 0;
 556:ServerLLDN.c  **** 	bool beacon_tmr = false;
 557:ServerLLDN.c  **** 	uint32_t be_read = 0;
 558:ServerLLDN.c  **** 	uint32_t tmr_read= 0;
 559:ServerLLDN.c  **** 	int msg_wait_time;
 560:ServerLLDN.c  **** 	int ok_seq = -1;
 561:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 562:ServerLLDN.c  **** 	{
 563:ServerLLDN.c  **** 		appSendData();
 564:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 565:ServerLLDN.c  **** 			timer_stop();
 566:ServerLLDN.c  **** 		#else 
 567:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC1);
 568:ServerLLDN.c  **** 		#endif
 569:ServerLLDN.c  **** 	
 570:ServerLLDN.c  **** 	}
 571:ServerLLDN.c  **** 
 572:ServerLLDN.c  **** 	static void node_time_handler(void)
 573:ServerLLDN.c  **** 	{
 574:ServerLLDN.c  **** 		beacon_tmr = true;
 575:ServerLLDN.c  **** 		tmr_read = macsc_read_count();
 576:ServerLLDN.c  **** 		return;
 577:ServerLLDN.c  **** 	}
 578:ServerLLDN.c  **** 	
 579:ServerLLDN.c  **** 	
 580:ServerLLDN.c  **** 	static void disc_time_hndlr(void)
 581:ServerLLDN.c  **** 	{
 582:ServerLLDN.c  **** 		printf("\nDisc");
 583:ServerLLDN.c  **** 			NWK_DataReq(&msgReqDiscResponse);
 584:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 585:ServerLLDN.c  **** 		
 586:ServerLLDN.c  **** 	}
 587:ServerLLDN.c  **** 	
 588:ServerLLDN.c  **** 	static void config_time_hndlr(void)
 589:ServerLLDN.c  **** 	{
 590:ServerLLDN.c  **** 		if(ack_received)
 591:ServerLLDN.c  **** 		{
 592:ServerLLDN.c  **** 			NWK_DataReq(&msgReqConfigStatus);
 593:ServerLLDN.c  **** 			ack_received = false;
 594:ServerLLDN.c  **** 		}
 595:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 596:ServerLLDN.c  **** 		
 597:ServerLLDN.c  **** 	}
 598:ServerLLDN.c  **** 	
 599:ServerLLDN.c  **** 		
 600:ServerLLDN.c  **** 	static void online_time_hndlr(void)
 601:ServerLLDN.c  **** 	{
 602:ServerLLDN.c  **** 		printf("\ndata_msg");
 603:ServerLLDN.c  **** 		NWK_DataReq(&msgReqData);
 604:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);		
 605:ServerLLDN.c  **** 	}
 606:ServerLLDN.c  **** 	
 607:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 608:ServerLLDN.c  **** 	{
 609:ServerLLDN.c  **** 		NwkFrameBeaconHeaderLLDN_t *tmp_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 610:ServerLLDN.c  **** 		rec_beacon = *tmp_beacon;
 611:ServerLLDN.c  **** 		PanId = tmp_beacon->PanId;
 612:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+ tmp_beacon->TimeSlotSize )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME)
 613:ServerLLDN.c  **** 		printf("\nBE %f", tTS);
 614:ServerLLDN.c  **** 		if(rec_beacon.Flags.txState == STATE && rec_beacon.confSeqNumber == 0)
 615:ServerLLDN.c  **** 		{
 616:ServerLLDN.c  **** 			if(STATE == DISC_MODE) 
 617:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(disc_time_hndlr);
 618:ServerLLDN.c  **** 			else if(STATE == CONFIG_MODE)
 619:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(config_time_hndlr);
 620:ServerLLDN.c  **** 			else if(STATE == ONLINE_MODE)
 621:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(online_time_hndlr);
 622:ServerLLDN.c  **** 					
 623:ServerLLDN.c  **** 			
 624:ServerLLDN.c  **** 			
 625:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 626:ServerLLDN.c  **** 			{
 627:ServerLLDN.c  **** 				msg_wait_time = (2*rec_beacon.Flags.numBaseMgmtTimeslots + assTimeSlot) * tTS /*+ 80 + 45*assTi
 628:ServerLLDN.c  **** 				printf("msg_wait %d", msg_wait_time);
 629:ServerLLDN.c  **** 			}
 630:ServerLLDN.c  **** 			else	
 631:ServerLLDN.c  **** 				msg_wait_time = tTS * rec_beacon.Flags.numBaseMgmtTimeslots; 
 632:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 633:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time - 150, MACSC_CC1);
 634:ServerLLDN.c  ****  			macsc_enable_manual_bts();
 635:ServerLLDN.c  **** 			
 636:ServerLLDN.c  **** 		}
 637:ServerLLDN.c  **** 
 638:ServerLLDN.c  **** 		else if (rec_beacon.Flags.txState == RESET_MODE)
 639:ServerLLDN.c  **** 		{
 640:ServerLLDN.c  **** 			PHY_SetTdmaMode(false);
 641:ServerLLDN.c  **** 			ack_received = 0;
 642:ServerLLDN.c  **** 			STATE = DISC_MODE;
 643:ServerLLDN.c  **** 		}
 644:ServerLLDN.c  **** 		return true;
 645:ServerLLDN.c  **** 	}
 646:ServerLLDN.c  **** 	
 647:ServerLLDN.c  **** 	bool check_ack(int addr)
 648:ServerLLDN.c  **** 	{
 649:ServerLLDN.c  **** 		int pos =  addr / 8;
 650:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 651:ServerLLDN.c  **** 		printf("\n ack rec %hhx ", ackframe->ackFlags[pos]);
 652:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 653:ServerLLDN.c  **** 		{
 654:ServerLLDN.c  **** 			return true;
 655:ServerLLDN.c  **** 		}
 656:ServerLLDN.c  **** 		else
 657:ServerLLDN.c  **** 			return false;
 658:ServerLLDN.c  **** 	}
 659:ServerLLDN.c  **** 	
 660:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 661:ServerLLDN.c  **** 	{
 662:ServerLLDN.c  **** 		#if !MASTER_MACSC
 663:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 664:ServerLLDN.c  **** 		#endif
 665:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 666:ServerLLDN.c  **** 
 667:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 668:ServerLLDN.c  **** 		{
 669:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 670:ServerLLDN.c  **** 			{
 671:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 672:ServerLLDN.c  **** 				if(!ack_received)
 673:ServerLLDN.c  **** 				{
 674:ServerLLDN.c  **** 				
 675:ServerLLDN.c  **** 					int retransmition_slot = 0;
 676:ServerLLDN.c  **** 					
 677:ServerLLDN.c  **** 
 678:ServerLLDN.c  **** 					for(int i = 0; i < assTimeSlot && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 679:ServerLLDN.c  **** 						if( !check_ack(i+1) )
 680:ServerLLDN.c  **** 							retransmition_slot++;
 681:ServerLLDN.c  **** 					
 682:ServerLLDN.c  **** 					
 683:ServerLLDN.c  **** // 					if( retransmition_slot > (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2 - 1)
 684:ServerLLDN.c  **** // 						return false;
 685:ServerLLDN.c  **** 										
 686:ServerLLDN.c  **** 					
 687:ServerLLDN.c  **** 					if(retransmition_slot == 0)
 688:ServerLLDN.c  **** 					{
 689:ServerLLDN.c  **** 						NWK_DataReq(&msgReqData);
 690:ServerLLDN.c  **** 					}
 691:ServerLLDN.c  **** 					else
 692:ServerLLDN.c  **** 					{
 693:ServerLLDN.c  **** 						#if MASTER_MACSC
 694:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 695:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(online_time_hndlr);
 696:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 697:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, tTS * retransmition_slot - 40, MACSC_CC1);
 698:ServerLLDN.c  **** 						#endif
 699:ServerLLDN.c  **** 					}					
 700:ServerLLDN.c  **** 					printf("\nretransmition_slot %d , %f", retransmition_slot, tTS);
 701:ServerLLDN.c  **** 
 702:ServerLLDN.c  **** 				}				
 703:ServerLLDN.c  **** 			}
 704:ServerLLDN.c  **** 			else
 705:ServerLLDN.c  **** 			{
 706:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 707:ServerLLDN.c  **** 				if(STATE == DISC_MODE && ack_received)
 708:ServerLLDN.c  **** 					STATE = CONFIG_MODE;
 709:ServerLLDN.c  **** 			}
 710:ServerLLDN.c  **** 		}
 711:ServerLLDN.c  **** 		return true;
 712:ServerLLDN.c  **** 	}
 713:ServerLLDN.c  **** 	
 714:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 715:ServerLLDN.c  **** 	{
 716:ServerLLDN.c  **** 		#if !MASTER_MACSC
 717:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 718:ServerLLDN.c  **** 		#endif
 719:ServerLLDN.c  **** 		
 720:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 721:ServerLLDN.c  **** 		{
 722:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 723:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 724:ServerLLDN.c  **** 			{
 725:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 726:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 727:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 728:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 729:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 730:ServerLLDN.c  **** 				associated = 1;
 731:ServerLLDN.c  **** 				STATE = ONLINE_MODE;
 732:ServerLLDN.c  **** 				PHY_SetTdmaMode(true);
 733:ServerLLDN.c  **** 				printf("\n asstimeslot %d, tsDuration %hhx", assTimeSlot, n);
 734:ServerLLDN.c  **** 			}
 735:ServerLLDN.c  **** 		}
 736:ServerLLDN.c  **** 		return true;
 737:ServerLLDN.c  **** 	}
 738:ServerLLDN.c  **** 
 739:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 740:ServerLLDN.c  **** 	{
 741:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 742:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 743:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 744:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 745:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 746:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 747:ServerLLDN.c  **** 	}
 748:ServerLLDN.c  **** 	
 749:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 750:ServerLLDN.c  **** 	{		
 751:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 752:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 753:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 754:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 755:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 756:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 757:ServerLLDN.c  **** 	}
 758:ServerLLDN.c  **** 	
 759:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 760:ServerLLDN.c  **** 	{
 761:ServerLLDN.c  **** 		
 762:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 763:ServerLLDN.c  **** 
 764:ServerLLDN.c  **** 	
 765:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 766:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 767:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 768:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 769:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 770:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 771:ServerLLDN.c  **** 	}
 772:ServerLLDN.c  **** 	
 773:ServerLLDN.c  **** 	
 774:ServerLLDN.c  **** #endif // APP_COORDINATOR
 775:ServerLLDN.c  **** 
 776:ServerLLDN.c  **** static void appInit(void)
 777:ServerLLDN.c  **** {
 3297               		.loc 6 777 0
 3298               		.cfi_startproc
 3299 1238 CF93      		push r28
 3300               	.LCFI118:
 3301               		.cfi_def_cfa_offset 3
 3302               		.cfi_offset 28, -2
 3303 123a DF93      		push r29
 3304               	.LCFI119:
 3305               		.cfi_def_cfa_offset 4
 3306               		.cfi_offset 29, -3
 3307 123c CDB7      		in r28,__SP_L__
 3308 123e DEB7      		in r29,__SP_H__
 3309               	.LCFI120:
 3310               		.cfi_def_cfa_register 28
 3311               	/* prologue: function */
 3312               	/* frame size = 0 */
 3313               	/* stack size = 2 */
 3314               	.L__stack_usage = 2
 778:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 3315               		.loc 6 778 0
 3316 1240 80E0      		ldi r24,0
 3317 1242 90E0      		ldi r25,0
 3318 1244 0E94 0000 		call NWK_SetAddr
 779:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 3319               		.loc 6 779 0
 3320 1248 8FE0      		ldi r24,lo8(15)
 3321 124a 0E94 0000 		call PHY_SetChannel
 780:ServerLLDN.c  **** 	PHY_SetRxState(true);
 3322               		.loc 6 780 0
 3323 124e 81E0      		ldi r24,lo8(1)
 3324 1250 0E94 0000 		call PHY_SetRxState
 781:ServerLLDN.c  **** 		
 782:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 783:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 784:ServerLLDN.c  **** 		tmrDelay.interval = 1;
 3325               		.loc 6 784 0
 3326 1254 81E0      		ldi r24,lo8(1)
 3327 1256 90E0      		ldi r25,0
 3328 1258 A0E0      		ldi r26,0
 3329 125a B0E0      		ldi r27,0
 3330 125c 8093 0000 		sts tmrDelay+6,r24
 3331 1260 9093 0000 		sts tmrDelay+6+1,r25
 3332 1264 A093 0000 		sts tmrDelay+6+2,r26
 3333 1268 B093 0000 		sts tmrDelay+6+3,r27
 785:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 3334               		.loc 6 785 0
 3335 126c 1092 0000 		sts tmrDelay+10,__zero_reg__
 786:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 3336               		.loc 6 786 0
 3337 1270 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 3338 1272 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 3339 1274 9093 0000 		sts tmrDelay+11+1,r25
 3340 1278 8093 0000 		sts tmrDelay+11,r24
 787:ServerLLDN.c  **** 	  
 788:ServerLLDN.c  **** 		/* 
 789:ServerLLDN.c  **** 		* Disable CSMA/CA
 790:ServerLLDN.c  **** 		* Disable auto ACK
 791:ServerLLDN.c  **** 		*/
 792:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 3341               		.loc 6 792 0
 3342 127c 8EEF      		ldi r24,lo8(-2)
 3343 127e 9AEC      		ldi r25,lo8(-54)
 3344 1280 0E94 0000 		call NWK_SetPanId
 793:ServerLLDN.c  **** 		PanId = APP_PANID;
 3345               		.loc 6 793 0
 3346 1284 8EEF      		ldi r24,lo8(-2)
 3347 1286 8093 0000 		sts PanId,r24
 794:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 3348               		.loc 6 794 0
 3349 128a 8EEF      		ldi r24,lo8(-2)
 3350 128c 8093 0000 		sts ACKFrame,r24
 795:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 3351               		.loc 6 795 0
 3352 1290 81E0      		ldi r24,lo8(1)
 3353 1292 0E94 0000 		call PHY_SetTdmaMode
 796:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 3354               		.loc 6 796 0
 3355 1296 60E0      		ldi r22,lo8(gs(appCommandInd))
 3356 1298 70E0      		ldi r23,hi8(gs(appCommandInd))
 3357 129a 83E0      		ldi r24,lo8(3)
 3358 129c 0E94 0000 		call NWK_OpenEndpoint
 797:ServerLLDN.c  **** 	#else
 798:ServerLLDN.c  **** 		appPrepareDiscoverResponse();	
 799:ServerLLDN.c  **** 		/*
 800:ServerLLDN.c  **** 		 * Enable CSMA/CA
 801:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 802:ServerLLDN.c  **** 		 */
 803:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 804:ServerLLDN.c  **** 		PHY_SetOptimizedCSMAValues();
 805:ServerLLDN.c  **** 		
 806:ServerLLDN.c  **** 		
 807:ServerLLDN.c  **** 		
 808:ServerLLDN.c  **** 		payloadSize = 127;
 809:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 810:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 811:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 812:ServerLLDN.c  **** 		/*
 813:ServerLLDN.c  **** 		* Configure interrupts callback functions
 814:ServerLLDN.c  **** 		*/
 815:ServerLLDN.c  **** 		
 816:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 817:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 3359               		.loc 6 817 0
 3360 12a0 81E0      		ldi r24,lo8(1)
 3361 12a2 0E94 0000 		call PHY_SetPromiscuousMode
 818:ServerLLDN.c  **** 
 819:ServerLLDN.c  **** }
 3362               		.loc 6 819 0
 3363 12a6 0000      		nop
 3364               	/* epilogue start */
 3365 12a8 DF91      		pop r29
 3366 12aa CF91      		pop r28
 3367 12ac 0895      		ret
 3368               		.cfi_endproc
 3369               	.LFE148:
 3371               		.section	.rodata
 3372               	.LC2:
 3373 0008 0A25 642C 		.string	"\n%d, %d"
 3373      2025 6400 
 3374               	.LC3:
 3375 0010 0A0A 204D 		.string	"\n\n M\351tricas (%d Ciclos):\n"
 3375      E974 7269 
 3375      6361 7320 
 3375      2825 6420 
 3375      4369 636C 
 3376               	.LC4:
 3377 002a 0A41 6464 		.string	"\nAddrs , %hhx"
 3377      7273 202C 
 3377      2025 6868 
 3377      7800 
 3378               	.LC5:
 3379 0038 0A50 4C52 		.string	"\nPLR ,  %.3f"
 3379      202C 2020 
 3379      252E 3366 
 3379      00
 3380               	.LC6:
 3381 0045 0A50 4552 		.string	"\nPER ,  %.3f"
 3381      202C 2020 
 3381      252E 3366 
 3381      00
 3382               	.LC7:
 3383 0052 0A52 7373 		.string	"\nRssi M\351dio , %f\n"
 3383      6920 4DE9 
 3383      6469 6F20 
 3383      2C20 2566 
 3383      0A00 
 3384               	.LC8:
 3385 0064 0A50 4C52 		.string	"\nPLR , %.3f\nPER , %.3f"
 3385      202C 2025 
 3385      2E33 660A 
 3385      5045 5220 
 3385      2C20 252E 
 3386               		.text
 3388               	APP_TaskHandler:
 3389               	.LFB149:
 820:ServerLLDN.c  **** 
 821:ServerLLDN.c  **** static void APP_TaskHandler(void)
 822:ServerLLDN.c  **** {
 3390               		.loc 6 822 0
 3391               		.cfi_startproc
 3392 12ae CF92      		push r12
 3393               	.LCFI121:
 3394               		.cfi_def_cfa_offset 3
 3395               		.cfi_offset 12, -2
 3396 12b0 DF92      		push r13
 3397               	.LCFI122:
 3398               		.cfi_def_cfa_offset 4
 3399               		.cfi_offset 13, -3
 3400 12b2 EF92      		push r14
 3401               	.LCFI123:
 3402               		.cfi_def_cfa_offset 5
 3403               		.cfi_offset 14, -4
 3404 12b4 FF92      		push r15
 3405               	.LCFI124:
 3406               		.cfi_def_cfa_offset 6
 3407               		.cfi_offset 15, -5
 3408 12b6 CF93      		push r28
 3409               	.LCFI125:
 3410               		.cfi_def_cfa_offset 7
 3411               		.cfi_offset 28, -6
 3412 12b8 DF93      		push r29
 3413               	.LCFI126:
 3414               		.cfi_def_cfa_offset 8
 3415               		.cfi_offset 29, -7
 3416 12ba CDB7      		in r28,__SP_L__
 3417 12bc DEB7      		in r29,__SP_H__
 3418               	.LCFI127:
 3419               		.cfi_def_cfa_register 28
 3420 12be 6097      		sbiw r28,16
 3421               	.LCFI128:
 3422               		.cfi_def_cfa_offset 24
 3423 12c0 0FB6      		in __tmp_reg__,__SREG__
 3424 12c2 F894      		cli
 3425 12c4 DEBF      		out __SP_H__,r29
 3426 12c6 0FBE      		out __SREG__,__tmp_reg__
 3427 12c8 CDBF      		out __SP_L__,r28
 3428               	/* prologue: function */
 3429               	/* frame size = 16 */
 3430               	/* stack size = 22 */
 3431               	.L__stack_usage = 22
 823:ServerLLDN.c  **** 	switch (appState){
 3432               		.loc 6 823 0
 3433 12ca 8091 0000 		lds r24,appState
 3434 12ce 882F      		mov r24,r24
 3435 12d0 90E0      		ldi r25,0
 3436 12d2 8230      		cpi r24,2
 3437 12d4 9105      		cpc r25,__zero_reg__
 3438 12d6 01F0      		breq .L97
 3439 12d8 8330      		cpi r24,3
 3440 12da 9105      		cpc r25,__zero_reg__
 3441 12dc 01F0      		breq .L98
 3442 12de 892B      		or r24,r25
 3443 12e0 01F0      		breq .L99
 824:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 825:ServerLLDN.c  **** 		{
 826:ServerLLDN.c  **** 			appInit();
 827:ServerLLDN.c  **** 			#if APP_COORDINATOR
 828:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 829:ServerLLDN.c  **** 			#else
 830:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 831:ServerLLDN.c  **** 			#endif
 832:ServerLLDN.c  **** 			break;
 833:ServerLLDN.c  **** 		}
 834:ServerLLDN.c  **** 		case APP_STATE_SEND:
 835:ServerLLDN.c  **** 		{
 836:ServerLLDN.c  **** 			appSendData();
 837:ServerLLDN.c  **** 			#if APP_COORDINATOR
 838:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 839:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 840:ServerLLDN.c  **** 			#else
 841:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 842:ServerLLDN.c  **** 			#endif
 843:ServerLLDN.c  **** 			break;
 844:ServerLLDN.c  **** 		}
 845:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 846:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 847:ServerLLDN.c  **** 		{
 848:ServerLLDN.c  **** 			switch(appPanState)
 849:ServerLLDN.c  **** 			{
 850:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 851:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 852:ServerLLDN.c  **** 				{
 853:ServerLLDN.c  **** 					appPanReset();
 854:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 855:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 856:ServerLLDN.c  **** 					cycles_counter = 0;
 857:ServerLLDN.c  **** 					break;
 858:ServerLLDN.c  **** 				}
 859:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 860:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 861:ServerLLDN.c  **** 				{
 862:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 863:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 864:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 865:ServerLLDN.c  **** 					 */
 866:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 12)
 867:ServerLLDN.c  **** 					{	
 868:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 869:ServerLLDN.c  **** 						counter_associados = 0;
 870:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 871:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 872:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 873:ServerLLDN.c  **** 						msgReq.options = 0;
 874:ServerLLDN.c  **** 						
 875:ServerLLDN.c  **** 						/* reseting ack bitmap */
 876:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 877:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 878:ServerLLDN.c  **** 						ACKFrame_size = 0;
 879:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 880:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 881:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 882:ServerLLDN.c  **** 					}
 883:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 884:ServerLLDN.c  **** 					else 
 885:ServerLLDN.c  **** 					{
 886:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 887:ServerLLDN.c  **** 						appPanDiscInit();
 888:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 889:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 890:ServerLLDN.c  **** 					}
 891:ServerLLDN.c  **** 					break;
 892:ServerLLDN.c  **** 				}
 893:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 894:ServerLLDN.c  **** 				{
 895:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 896:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 897:ServerLLDN.c  **** 					msgReq.data = NULL;
 898:ServerLLDN.c  **** 					msgReq.size = 0;
 899:ServerLLDN.c  **** 					
 900:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 901:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 902:ServerLLDN.c  **** 					break;
 903:ServerLLDN.c  **** 				}
 904:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 905:ServerLLDN.c  **** 				{
 906:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 907:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 908:ServerLLDN.c  **** 					 */
 909:ServerLLDN.c  **** 					appPanPrepareACK();
 910:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 911:ServerLLDN.c  **** 					
 912:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 913:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 914:ServerLLDN.c  **** 					break;
 915:ServerLLDN.c  **** 				}
 916:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 917:ServerLLDN.c  **** 				{
 918:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 919:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 920:ServerLLDN.c  **** 					msgReq.data = NULL;
 921:ServerLLDN.c  **** 					msgReq.size = 0;
 922:ServerLLDN.c  **** 					
 923:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 924:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 925:ServerLLDN.c  **** 					break;
 926:ServerLLDN.c  **** 
 927:ServerLLDN.c  **** 				}
 928:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 929:ServerLLDN.c  **** 				{
 930:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 931:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 932:ServerLLDN.c  **** 					msgReq.data = NULL;
 933:ServerLLDN.c  **** 					msgReq.size = 0;
 934:ServerLLDN.c  **** 					
 935:ServerLLDN.c  **** 					counter_delay_msg = 0;
 936:ServerLLDN.c  **** 					
 937:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 938:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 939:ServerLLDN.c  **** 					
 940:ServerLLDN.c  **** 					break;
 941:ServerLLDN.c  **** 				}
 942:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 943:ServerLLDN.c  **** 				{
 944:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 945:ServerLLDN.c  **** 					{
 946:ServerLLDN.c  **** 						if(CopyToConfigRequest())
 947:ServerLLDN.c  **** 						{
 948:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 949:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 950:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 951:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 952:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 953:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 954:ServerLLDN.c  **** 						// Delay between messages
 955:ServerLLDN.c  **** 						}
 956:ServerLLDN.c  **** 						else
 957:ServerLLDN.c  **** 						{
 958:ServerLLDN.c  **** 							msgReq.options = 0;
 959:ServerLLDN.c  **** 						}
 960:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
 961:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 962:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 963:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 964:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 965:ServerLLDN.c  **** 						
 966:ServerLLDN.c  **** 						counter_associados++;
 967:ServerLLDN.c  **** 					}
 968:ServerLLDN.c  **** 					else
 969:ServerLLDN.c  **** 					{
 970:ServerLLDN.c  **** 						msgReq.options = 0;
 971:ServerLLDN.c  **** 
 972:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
 973:ServerLLDN.c  **** 						{
 974:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
 975:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 976:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 977:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 978:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 979:ServerLLDN.c  **** 						}
 980:ServerLLDN.c  **** 						
 981:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
 982:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 983:ServerLLDN.c  **** 					}
 984:ServerLLDN.c  **** 					break;
 985:ServerLLDN.c  **** 				}
 986:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 987:ServerLLDN.c  **** 				{
 988:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 989:ServerLLDN.c  **** 					msgReq.data = NULL;
 990:ServerLLDN.c  **** 					msgReq.size = 0;
 991:ServerLLDN.c  **** 					
 992:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 993:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 994:ServerLLDN.c  **** 					cycles_counter++;	
 995:ServerLLDN.c  **** 					
 996:ServerLLDN.c  **** 					break;
 997:ServerLLDN.c  **** 				}
 998:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 999:ServerLLDN.c  **** 				{
1000:ServerLLDN.c  **** 
1001:ServerLLDN.c  **** 					if(cycles_counter != 0)
1002:ServerLLDN.c  **** 					{
1003:ServerLLDN.c  **** 						appPanOnlineInit();
1004:ServerLLDN.c  **** 						
1005:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1006:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1007:ServerLLDN.c  **** 						
1008:ServerLLDN.c  **** 						cycles_counter--;
1009:ServerLLDN.c  **** 					}
1010:ServerLLDN.c  **** 					else
1011:ServerLLDN.c  **** 					{
1012:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1013:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1014:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
1015:ServerLLDN.c  **** 						
1016:ServerLLDN.c  **** 						printf("\n\n Mtricas (%d Ciclos):\n", NUMERO_CICLOS_ONLINE -1);
1017:ServerLLDN.c  **** 						int total_msg = 0;
1018:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
1019:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
1020:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
1021:ServerLLDN.c  **** 						{
1022:ServerLLDN.c  **** 							printf("\nAddrs , %hhx", nodes_info_arr[i].mac_addr);
1023:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1024:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1025:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
1026:ServerLLDN.c  **** 							
1027:ServerLLDN.c  **** 							total_msg = total_msg + nodes_info_arr[i].msg_rec;
1028:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
1029:ServerLLDN.c  **** 						}
1030:ServerLLDN.c  **** 						if(assTimeSlot > 0 && total_msg > 0)
1031:ServerLLDN.c  **** 						{
1032:ServerLLDN.c  **** 							PLR = 1 - total_msg / expected_messages;
1033:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
1034:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f", PLR, PER);
1035:ServerLLDN.c  **** 							
1036:ServerLLDN.c  **** 						}
1037:ServerLLDN.c  **** 					}
1038:ServerLLDN.c  **** 					break;
1039:ServerLLDN.c  **** 				}
1040:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
1041:ServerLLDN.c  **** 				{
1042:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
1043:ServerLLDN.c  **** 					{
1044:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
1045:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
1046:ServerLLDN.c  **** 					}
1047:ServerLLDN.c  **** 					retransmit_ts_array_counter = 0;
1048:ServerLLDN.c  **** 					ACKFrame_size = 0;
1049:ServerLLDN.c  **** 					
1050:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
1051:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
1052:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
1053:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
1054:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
1055:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
1056:ServerLLDN.c  **** 
1057:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1058:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
1059:ServerLLDN.c  **** 					break;
1060:ServerLLDN.c  **** 				}				
1061:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
1062:ServerLLDN.c  **** 				{
1063:ServerLLDN.c  **** 
1064:ServerLLDN.c  **** 					msgReq.options = 0;
1065:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1066:ServerLLDN.c  **** 					break;
1067:ServerLLDN.c  **** 				}
1068:ServerLLDN.c  **** 			}
1069:ServerLLDN.c  **** 			break;	
1070:ServerLLDN.c  **** 		}
1071:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
1072:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
1073:ServerLLDN.c  **** 		{
1074:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
1075:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
1076:ServerLLDN.c  **** 			break;
1077:ServerLLDN.c  **** 		}
1078:ServerLLDN.c  **** 		
1079:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
1080:ServerLLDN.c  **** 		{
1081:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
1082:ServerLLDN.c  **** 			if(ack_received && rec_beacon.confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
1083:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
1084:ServerLLDN.c  **** 			}
1085:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
1086:ServerLLDN.c  **** 			else {
1087:ServerLLDN.c  **** 				#if MASTER_MACSC
1088:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
1089:ServerLLDN.c  **** 				#else
1090:ServerLLDN.c  **** 				timer_stop();
1091:ServerLLDN.c  **** 				#endif
1092:ServerLLDN.c  **** 			}
1093:ServerLLDN.c  **** 			ack_received = 0;
1094:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1095:ServerLLDN.c  **** 			break;
1096:ServerLLDN.c  **** 		}
1097:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
1098:ServerLLDN.c  **** 		{
1099:ServerLLDN.c  **** 			appPrepareDataFrame();
1100:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1101:ServerLLDN.c  **** 			break;
1102:ServerLLDN.c  **** 		}
1103:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
1104:ServerLLDN.c  **** 		{
1105:ServerLLDN.c  **** 			if(!ack_received)
1106:ServerLLDN.c  **** 			{
1107:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1108:ServerLLDN.c  **** 				
1109:ServerLLDN.c  **** 				int retransmition_slot = 0;
1110:ServerLLDN.c  **** 				
1111:ServerLLDN.c  **** 				
1112:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot - 1 && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2;
1113:ServerLLDN.c  **** 					if( !check_ack(i) )
1114:ServerLLDN.c  **** 						retransmition_slot++;
1115:ServerLLDN.c  **** 					
1116:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
1117:ServerLLDN.c  **** 				
1118:ServerLLDN.c  **** 				if(retransmition_slot == 0)
1119:ServerLLDN.c  **** 				{
1120:ServerLLDN.c  **** 					appSendData();
1121:ServerLLDN.c  **** 					// appState = APP_STATE_SEND;			
1122:ServerLLDN.c  **** 				}
1123:ServerLLDN.c  **** 				else
1124:ServerLLDN.c  **** 				{
1125:ServerLLDN.c  **** 					#if MASTER_MACSC
1126:ServerLLDN.c  **** 					macsc_enable_manual_bts();
1127:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
1128:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
1129:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
1130:ServerLLDN.c  **** 					#endif
1131:ServerLLDN.c  **** 				}
1132:ServerLLDN.c  **** 				
1133:ServerLLDN.c  **** 			}
1134:ServerLLDN.c  **** 			else
1135:ServerLLDN.c  **** 			{
1136:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1137:ServerLLDN.c  **** 			}
1138:ServerLLDN.c  **** 			
1139:ServerLLDN.c  **** 			break;
1140:ServerLLDN.c  **** 		}
1141:ServerLLDN.c  **** 		#endif
1142:ServerLLDN.c  **** 		default:
1143:ServerLLDN.c  **** 		{
1144:ServerLLDN.c  **** 			break;
 3444               		.loc 6 1144 0
 3445 12e2 00C0      		rjmp .L100
 3446               	.L99:
 826:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3447               		.loc 6 826 0
 3448 12e4 0E94 0000 		call appInit
 828:ServerLLDN.c  **** 			#else
 3449               		.loc 6 828 0
 3450 12e8 83E0      		ldi r24,lo8(3)
 3451 12ea 8093 0000 		sts appState,r24
 832:ServerLLDN.c  **** 		}
 3452               		.loc 6 832 0
 3453 12ee 00C0      		rjmp .L100
 3454               	.L97:
 836:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3455               		.loc 6 836 0
 3456 12f0 0E94 0000 		call appSendData
 839:ServerLLDN.c  **** 			#else
 3457               		.loc 6 839 0
 3458 12f4 83E0      		ldi r24,lo8(3)
 3459 12f6 8093 0000 		sts appState,r24
 843:ServerLLDN.c  **** 		}
 3460               		.loc 6 843 0
 3461 12fa 00C0      		rjmp .L100
 3462               	.L98:
 848:ServerLLDN.c  **** 			{
 3463               		.loc 6 848 0
 3464 12fc 8091 0000 		lds r24,appPanState
 3465 1300 882F      		mov r24,r24
 3466 1302 90E0      		ldi r25,0
 3467 1304 092E      		mov __tmp_reg__,r25
 3468 1306 000C      		lsl r0
 3469 1308 AA0B      		sbc r26,r26
 3470 130a BB0B      		sbc r27,r27
 3471 130c 40E0      		ldi r20,0
 3472 130e 50E0      		ldi r21,0
 3473 1310 2DE0      		ldi r18,lo8(13)
 3474 1312 30E0      		ldi r19,0
 3475 1314 841B      		sub r24,r20
 3476 1316 950B      		sbc r25,r21
 3477 1318 2817      		cp r18,r24
 3478 131a 3907      		cpc r19,r25
 3479 131c 00F4      		brsh .+2
 3480 131e 00C0      		rjmp .L131
 3481 1320 8050      		subi r24,lo8(-(gs(.L103)))
 3482 1322 9040      		sbci r25,hi8(-(gs(.L103)))
 3483 1324 FC01      		movw r30,r24
 3484 1326 0C94 0000 		jmp __tablejump2__
 3485               		.section	.progmem.gcc_sw_table,"a",@progbits
 3486               		.p2align	1
 3487               	.L103:
 3488 0000 0000      		.word gs(.L102)
 3489 0002 0000      		.word gs(.L104)
 3490 0004 0000      		.word gs(.L105)
 3491 0006 0000      		.word gs(.L106)
 3492 0008 0000      		.word gs(.L107)
 3493 000a 0000      		.word gs(.L108)
 3494 000c 0000      		.word gs(.L109)
 3495 000e 0000      		.word gs(.L110)
 3496 0010 0000      		.word gs(.L111)
 3497 0012 0000      		.word gs(.L131)
 3498 0014 0000      		.word gs(.L131)
 3499 0016 0000      		.word gs(.L131)
 3500 0018 0000      		.word gs(.L112)
 3501 001a 0000      		.word gs(.L113)
 3502               		.text
 3503               	.L102:
 853:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3504               		.loc 6 853 0
 3505 132a 0E94 0000 		call appPanReset
 854:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 3506               		.loc 6 854 0
 3507 132e 81E0      		ldi r24,lo8(1)
 3508 1330 8093 0000 		sts appPanState,r24
 855:ServerLLDN.c  **** 					cycles_counter = 0;
 3509               		.loc 6 855 0
 3510 1334 82E0      		ldi r24,lo8(2)
 3511 1336 8093 0000 		sts appState,r24
 856:ServerLLDN.c  **** 					break;
 3512               		.loc 6 856 0
 3513 133a 1092 0000 		sts cycles_counter,__zero_reg__
 857:ServerLLDN.c  **** 				}
 3514               		.loc 6 857 0
 3515 133e 00C0      		rjmp .L101
 3516               	.L104:
 866:ServerLLDN.c  **** 					{	
 3517               		.loc 6 866 0
 3518 1340 8091 0000 		lds r24,counter_associados
 3519 1344 9091 0000 		lds r25,counter_associados+1
 3520 1348 0C97      		sbiw r24,12
 3521 134a 01F0      		breq .L114
 866:ServerLLDN.c  **** 					{	
 3522               		.loc 6 866 0 is_stmt 0 discriminator 1
 3523 134c 8091 0000 		lds r24,cycles_counter
 3524 1350 8C30      		cpi r24,lo8(12)
 3525 1352 00F4      		brsh .+2
 3526 1354 00C0      		rjmp .L115
 3527               	.L114:
 868:ServerLLDN.c  **** 						counter_associados = 0;
 3528               		.loc 6 868 0 is_stmt 1
 3529 1356 2091 0000 		lds r18,counter_associados
 3530 135a 3091 0000 		lds r19,counter_associados+1
 3531 135e 8091 0000 		lds r24,cycles_counter
 3532 1362 882F      		mov r24,r24
 3533 1364 90E0      		ldi r25,0
 3534 1366 432F      		mov r20,r19
 3535 1368 4F93      		push r20
 3536 136a 2F93      		push r18
 3537 136c 292F      		mov r18,r25
 3538 136e 2F93      		push r18
 3539 1370 8F93      		push r24
 3540 1372 80E0      		ldi r24,lo8(.LC2)
 3541 1374 90E0      		ldi r25,hi8(.LC2)
 3542 1376 892F      		mov r24,r25
 3543 1378 8F93      		push r24
 3544 137a 80E0      		ldi r24,lo8(.LC2)
 3545 137c 90E0      		ldi r25,hi8(.LC2)
 3546 137e 8F93      		push r24
 3547 1380 0E94 0000 		call printf
 3548 1384 0F90      		pop __tmp_reg__
 3549 1386 0F90      		pop __tmp_reg__
 3550 1388 0F90      		pop __tmp_reg__
 3551 138a 0F90      		pop __tmp_reg__
 3552 138c 0F90      		pop __tmp_reg__
 3553 138e 0F90      		pop __tmp_reg__
 869:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3554               		.loc 6 869 0
 3555 1390 1092 0000 		sts counter_associados+1,__zero_reg__
 3556 1394 1092 0000 		sts counter_associados,__zero_reg__
 871:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 3557               		.loc 6 871 0
 3558 1398 81E0      		ldi r24,lo8(1)
 3559 139a 0E94 0000 		call macsc_disable_cmp_int
 872:ServerLLDN.c  **** 						msgReq.options = 0;
 3560               		.loc 6 872 0
 3561 139e 82E0      		ldi r24,lo8(2)
 3562 13a0 0E94 0000 		call macsc_disable_cmp_int
 873:ServerLLDN.c  **** 						
 3563               		.loc 6 873 0
 3564 13a4 1092 0000 		sts msgReq+9+1,__zero_reg__
 3565 13a8 1092 0000 		sts msgReq+9,__zero_reg__
 3566               	.LBB14:
 876:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3567               		.loc 6 876 0
 3568 13ac 1A82      		std Y+2,__zero_reg__
 3569 13ae 1982      		std Y+1,__zero_reg__
 3570 13b0 00C0      		rjmp .L116
 3571               	.L117:
 877:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3572               		.loc 6 877 0 discriminator 3
 3573 13b2 8981      		ldd r24,Y+1
 3574 13b4 9A81      		ldd r25,Y+2
 3575 13b6 8050      		subi r24,lo8(-(ACKFrame+1))
 3576 13b8 9040      		sbci r25,hi8(-(ACKFrame+1))
 3577 13ba FC01      		movw r30,r24
 3578 13bc 1082      		st Z,__zero_reg__
 876:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3579               		.loc 6 876 0 discriminator 3
 3580 13be 8981      		ldd r24,Y+1
 3581 13c0 9A81      		ldd r25,Y+2
 3582 13c2 0196      		adiw r24,1
 3583 13c4 9A83      		std Y+2,r25
 3584 13c6 8983      		std Y+1,r24
 3585               	.L116:
 876:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3586               		.loc 6 876 0 is_stmt 0 discriminator 1
 3587 13c8 8981      		ldd r24,Y+1
 3588 13ca 9A81      		ldd r25,Y+2
 3589 13cc 8097      		sbiw r24,32
 3590 13ce 04F0      		brlt .L117
 3591               	.LBE14:
 878:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 3592               		.loc 6 878 0 is_stmt 1
 3593 13d0 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3594 13d4 1092 0000 		sts ACKFrame_size,__zero_reg__
 879:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3595               		.loc 6 879 0
 3596 13d8 83E0      		ldi r24,lo8(3)
 3597 13da 8093 0000 		sts appState,r24
 880:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3598               		.loc 6 880 0
 3599 13de 88E0      		ldi r24,lo8(8)
 3600 13e0 8093 0000 		sts appPanState,r24
 881:ServerLLDN.c  **** 					}
 3601               		.loc 6 881 0
 3602 13e4 85E1      		ldi r24,lo8(21)
 3603 13e6 8093 0000 		sts cycles_counter,r24
 891:ServerLLDN.c  **** 				}
 3604               		.loc 6 891 0
 3605 13ea 00C0      		rjmp .L101
 3606               	.L115:
 887:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3607               		.loc 6 887 0
 3608 13ec 0E94 0000 		call appPanDiscInit
 888:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3609               		.loc 6 888 0
 3610 13f0 81E0      		ldi r24,lo8(1)
 3611 13f2 8093 0000 		sts appState,r24
 889:ServerLLDN.c  **** 					}
 3612               		.loc 6 889 0
 3613 13f6 82E0      		ldi r24,lo8(2)
 3614 13f8 8093 0000 		sts appPanState,r24
 891:ServerLLDN.c  **** 				}
 3615               		.loc 6 891 0
 3616 13fc 00C0      		rjmp .L101
 3617               	.L105:
 896:ServerLLDN.c  **** 					msgReq.data = NULL;
 3618               		.loc 6 896 0
 3619 13fe 80E4      		ldi r24,lo8(64)
 3620 1400 99E0      		ldi r25,lo8(9)
 3621 1402 9093 0000 		sts msgReq+9+1,r25
 3622 1406 8093 0000 		sts msgReq+9,r24
 897:ServerLLDN.c  **** 					msgReq.size = 0;
 3623               		.loc 6 897 0
 3624 140a 1092 0000 		sts msgReq+13+1,__zero_reg__
 3625 140e 1092 0000 		sts msgReq+13,__zero_reg__
 898:ServerLLDN.c  **** 					
 3626               		.loc 6 898 0
 3627 1412 1092 0000 		sts msgReq+15,__zero_reg__
 900:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3628               		.loc 6 900 0
 3629 1416 83E0      		ldi r24,lo8(3)
 3630 1418 8093 0000 		sts appState,r24
 901:ServerLLDN.c  **** 					break;
 3631               		.loc 6 901 0
 3632 141c 83E0      		ldi r24,lo8(3)
 3633 141e 8093 0000 		sts appPanState,r24
 902:ServerLLDN.c  **** 				}
 3634               		.loc 6 902 0
 3635 1422 00C0      		rjmp .L101
 3636               	.L106:
 909:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 3637               		.loc 6 909 0
 3638 1424 0E94 0000 		call appPanPrepareACK
 910:ServerLLDN.c  **** 					
 3639               		.loc 6 910 0
 3640 1428 80E0      		ldi r24,lo8(tmrDelay)
 3641 142a 90E0      		ldi r25,hi8(tmrDelay)
 3642 142c 0E94 0000 		call SYS_TimerStart
 912:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3643               		.loc 6 912 0
 3644 1430 84E0      		ldi r24,lo8(4)
 3645 1432 8093 0000 		sts appPanState,r24
 913:ServerLLDN.c  **** 					break;
 3646               		.loc 6 913 0
 3647 1436 81E0      		ldi r24,lo8(1)
 3648 1438 8093 0000 		sts appState,r24
 914:ServerLLDN.c  **** 				}
 3649               		.loc 6 914 0
 3650 143c 00C0      		rjmp .L101
 3651               	.L107:
 919:ServerLLDN.c  **** 					msgReq.data = NULL;
 3652               		.loc 6 919 0
 3653 143e 80E4      		ldi r24,lo8(64)
 3654 1440 92E0      		ldi r25,lo8(2)
 3655 1442 9093 0000 		sts msgReq+9+1,r25
 3656 1446 8093 0000 		sts msgReq+9,r24
 920:ServerLLDN.c  **** 					msgReq.size = 0;
 3657               		.loc 6 920 0
 3658 144a 1092 0000 		sts msgReq+13+1,__zero_reg__
 3659 144e 1092 0000 		sts msgReq+13,__zero_reg__
 921:ServerLLDN.c  **** 					
 3660               		.loc 6 921 0
 3661 1452 1092 0000 		sts msgReq+15,__zero_reg__
 923:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3662               		.loc 6 923 0
 3663 1456 81E0      		ldi r24,lo8(1)
 3664 1458 8093 0000 		sts appState,r24
 924:ServerLLDN.c  **** 					break;
 3665               		.loc 6 924 0
 3666 145c 86E0      		ldi r24,lo8(6)
 3667 145e 8093 0000 		sts appPanState,r24
 925:ServerLLDN.c  **** 
 3668               		.loc 6 925 0
 3669 1462 00C0      		rjmp .L101
 3670               	.L109:
 931:ServerLLDN.c  **** 					msgReq.data = NULL;
 3671               		.loc 6 931 0
 3672 1464 80E4      		ldi r24,lo8(64)
 3673 1466 9AE0      		ldi r25,lo8(10)
 3674 1468 9093 0000 		sts msgReq+9+1,r25
 3675 146c 8093 0000 		sts msgReq+9,r24
 932:ServerLLDN.c  **** 					msgReq.size = 0;
 3676               		.loc 6 932 0
 3677 1470 1092 0000 		sts msgReq+13+1,__zero_reg__
 3678 1474 1092 0000 		sts msgReq+13,__zero_reg__
 933:ServerLLDN.c  **** 					
 3679               		.loc 6 933 0
 3680 1478 1092 0000 		sts msgReq+15,__zero_reg__
 935:ServerLLDN.c  **** 					
 3681               		.loc 6 935 0
 3682 147c 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3683 1480 1092 0000 		sts counter_delay_msg,__zero_reg__
 937:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3684               		.loc 6 937 0
 3685 1484 81E0      		ldi r24,lo8(1)
 3686 1486 8093 0000 		sts appState,r24
 938:ServerLLDN.c  **** 					
 3687               		.loc 6 938 0
 3688 148a 85E0      		ldi r24,lo8(5)
 3689 148c 8093 0000 		sts appPanState,r24
 940:ServerLLDN.c  **** 				}
 3690               		.loc 6 940 0
 3691 1490 00C0      		rjmp .L101
 3692               	.L108:
 944:ServerLLDN.c  **** 					{
 3693               		.loc 6 944 0
 3694 1492 8091 0000 		lds r24,conf_req_list
 3695 1496 9091 0000 		lds r25,conf_req_list+1
 3696 149a 892B      		or r24,r25
 3697 149c 01F0      		breq .L119
 946:ServerLLDN.c  **** 						{
 3698               		.loc 6 946 0
 3699 149e 0E94 0000 		call CopyToConfigRequest
 3700 14a2 8823      		tst r24
 3701 14a4 01F0      		breq .L120
 948:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3702               		.loc 6 948 0
 3703 14a6 80E0      		ldi r24,0
 3704 14a8 90E8      		ldi r25,lo8(-128)
 3705 14aa 9093 0000 		sts msgReq+9+1,r25
 3706 14ae 8093 0000 		sts msgReq+9,r24
 949:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3707               		.loc 6 949 0
 3708 14b2 80E0      		ldi r24,lo8(config_request_frame)
 3709 14b4 90E0      		ldi r25,hi8(config_request_frame)
 3710 14b6 9093 0000 		sts msgReq+13+1,r25
 3711 14ba 8093 0000 		sts msgReq+13,r24
 950:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3712               		.loc 6 950 0
 3713 14be 86E0      		ldi r24,lo8(6)
 3714 14c0 8093 0000 		sts msgReq+15,r24
 951:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3715               		.loc 6 951 0
 3716 14c4 81E0      		ldi r24,lo8(1)
 3717 14c6 8093 0000 		sts appState,r24
 952:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 3718               		.loc 6 952 0
 3719 14ca 85E0      		ldi r24,lo8(5)
 3720 14cc 8093 0000 		sts appPanState,r24
 3721 14d0 00C0      		rjmp .L121
 3722               	.L120:
 958:ServerLLDN.c  **** 						}
 3723               		.loc 6 958 0
 3724 14d2 1092 0000 		sts msgReq+9+1,__zero_reg__
 3725 14d6 1092 0000 		sts msgReq+9,__zero_reg__
 3726               	.L121:
 960:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3727               		.loc 6 960 0
 3728 14da 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3729 14dc 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3730 14de 0E94 0000 		call macsc_set_cmp1_int_cb
 961:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3731               		.loc 6 961 0
 3732 14e2 81E0      		ldi r24,lo8(1)
 3733 14e4 0E94 0000 		call macsc_disable_cmp_int
 962:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3734               		.loc 6 962 0
 3735 14e8 0E94 0000 		call macsc_enable_manual_bts
 963:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3736               		.loc 6 963 0
 3737 14ec 81E0      		ldi r24,lo8(1)
 3738 14ee 0E94 0000 		call macsc_enable_cmp_int
 964:ServerLLDN.c  **** 						
 3739               		.loc 6 964 0
 3740 14f2 21E0      		ldi r18,lo8(1)
 3741 14f4 4BE4      		ldi r20,lo8(75)
 3742 14f6 50E0      		ldi r21,0
 3743 14f8 60E0      		ldi r22,0
 3744 14fa 70E0      		ldi r23,0
 3745 14fc 81E0      		ldi r24,lo8(1)
 3746 14fe 0E94 0000 		call macsc_use_cmp
 966:ServerLLDN.c  **** 					}
 3747               		.loc 6 966 0
 3748 1502 8091 0000 		lds r24,counter_associados
 3749 1506 9091 0000 		lds r25,counter_associados+1
 3750 150a 0196      		adiw r24,1
 3751 150c 9093 0000 		sts counter_associados+1,r25
 3752 1510 8093 0000 		sts counter_associados,r24
 984:ServerLLDN.c  **** 				}
 3753               		.loc 6 984 0
 3754 1514 00C0      		rjmp .L101
 3755               	.L119:
 970:ServerLLDN.c  **** 
 3756               		.loc 6 970 0
 3757 1516 1092 0000 		sts msgReq+9+1,__zero_reg__
 3758 151a 1092 0000 		sts msgReq+9,__zero_reg__
 972:ServerLLDN.c  **** 						{
 3759               		.loc 6 972 0
 3760 151e 8091 0000 		lds r24,counter_delay_msg
 3761 1522 9091 0000 		lds r25,counter_delay_msg+1
 3762 1526 1816      		cp __zero_reg__,r24
 3763 1528 1906      		cpc __zero_reg__,r25
 3764 152a 04F4      		brge .L123
 974:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3765               		.loc 6 974 0
 3766 152c 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 3767 152e 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 3768 1530 0E94 0000 		call macsc_set_cmp1_int_cb
 975:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3769               		.loc 6 975 0
 3770 1534 81E0      		ldi r24,lo8(1)
 3771 1536 0E94 0000 		call macsc_disable_cmp_int
 976:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3772               		.loc 6 976 0
 3773 153a 0E94 0000 		call macsc_enable_manual_bts
 977:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 3774               		.loc 6 977 0
 3775 153e 81E0      		ldi r24,lo8(1)
 3776 1540 0E94 0000 		call macsc_enable_cmp_int
 978:ServerLLDN.c  **** 						}
 3777               		.loc 6 978 0
 3778 1544 C090 0000 		lds r12,beaconInterval_association
 3779 1548 D090 0000 		lds r13,beaconInterval_association+1
 3780 154c E090 0000 		lds r14,beaconInterval_association+2
 3781 1550 F090 0000 		lds r15,beaconInterval_association+3
 3782 1554 2091 0000 		lds r18,counter_delay_msg
 3783 1558 3091 0000 		lds r19,counter_delay_msg+1
 3784 155c 4BE4      		ldi r20,lo8(75)
 3785 155e 429F      		mul r20,r18
 3786 1560 C001      		movw r24,r0
 3787 1562 439F      		mul r20,r19
 3788 1564 900D      		add r25,r0
 3789 1566 1124      		clr __zero_reg__
 3790 1568 092E      		mov __tmp_reg__,r25
 3791 156a 000C      		lsl r0
 3792 156c AA0B      		sbc r26,r26
 3793 156e BB0B      		sbc r27,r27
 3794 1570 BC01      		movw r22,r24
 3795 1572 CD01      		movw r24,r26
 3796 1574 0E94 0000 		call __floatsisf
 3797 1578 DC01      		movw r26,r24
 3798 157a CB01      		movw r24,r22
 3799 157c 9C01      		movw r18,r24
 3800 157e AD01      		movw r20,r26
 3801 1580 C701      		movw r24,r14
 3802 1582 B601      		movw r22,r12
 3803 1584 0E94 0000 		call __subsf3
 3804 1588 DC01      		movw r26,r24
 3805 158a CB01      		movw r24,r22
 3806 158c BC01      		movw r22,r24
 3807 158e CD01      		movw r24,r26
 3808 1590 0E94 0000 		call __fixunssfsi
 3809 1594 DC01      		movw r26,r24
 3810 1596 CB01      		movw r24,r22
 3811 1598 21E0      		ldi r18,lo8(1)
 3812 159a AC01      		movw r20,r24
 3813 159c BD01      		movw r22,r26
 3814 159e 81E0      		ldi r24,lo8(1)
 3815 15a0 0E94 0000 		call macsc_use_cmp
 3816               	.L123:
 981:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 3817               		.loc 6 981 0
 3818 15a4 83E0      		ldi r24,lo8(3)
 3819 15a6 8093 0000 		sts appState,r24
 982:ServerLLDN.c  **** 					}
 3820               		.loc 6 982 0
 3821 15aa 87E0      		ldi r24,lo8(7)
 3822 15ac 8093 0000 		sts appPanState,r24
 984:ServerLLDN.c  **** 				}
 3823               		.loc 6 984 0
 3824 15b0 00C0      		rjmp .L101
 3825               	.L110:
 988:ServerLLDN.c  **** 					msgReq.data = NULL;
 3826               		.loc 6 988 0
 3827 15b2 80E4      		ldi r24,lo8(64)
 3828 15b4 92E1      		ldi r25,lo8(18)
 3829 15b6 9093 0000 		sts msgReq+9+1,r25
 3830 15ba 8093 0000 		sts msgReq+9,r24
 989:ServerLLDN.c  **** 					msgReq.size = 0;
 3831               		.loc 6 989 0
 3832 15be 1092 0000 		sts msgReq+13+1,__zero_reg__
 3833 15c2 1092 0000 		sts msgReq+13,__zero_reg__
 990:ServerLLDN.c  **** 					
 3834               		.loc 6 990 0
 3835 15c6 1092 0000 		sts msgReq+15,__zero_reg__
 992:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3836               		.loc 6 992 0
 3837 15ca 81E0      		ldi r24,lo8(1)
 3838 15cc 8093 0000 		sts appState,r24
 993:ServerLLDN.c  **** 					cycles_counter++;	
 3839               		.loc 6 993 0
 3840 15d0 81E0      		ldi r24,lo8(1)
 3841 15d2 8093 0000 		sts appPanState,r24
 994:ServerLLDN.c  **** 					
 3842               		.loc 6 994 0
 3843 15d6 8091 0000 		lds r24,cycles_counter
 3844 15da 8F5F      		subi r24,lo8(-(1))
 3845 15dc 8093 0000 		sts cycles_counter,r24
 996:ServerLLDN.c  **** 				}
 3846               		.loc 6 996 0
 3847 15e0 00C0      		rjmp .L101
 3848               	.L111:
1001:ServerLLDN.c  **** 					{
 3849               		.loc 6 1001 0
 3850 15e2 8091 0000 		lds r24,cycles_counter
 3851 15e6 8823      		tst r24
 3852 15e8 01F0      		breq .L124
1003:ServerLLDN.c  **** 						
 3853               		.loc 6 1003 0
 3854 15ea 0E94 0000 		call appPanOnlineInit
1005:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3855               		.loc 6 1005 0
 3856 15ee 81E0      		ldi r24,lo8(1)
 3857 15f0 8093 0000 		sts appState,r24
1006:ServerLLDN.c  **** 						
 3858               		.loc 6 1006 0
 3859 15f4 8DE0      		ldi r24,lo8(13)
 3860 15f6 8093 0000 		sts appPanState,r24
1008:ServerLLDN.c  **** 					}
 3861               		.loc 6 1008 0
 3862 15fa 8091 0000 		lds r24,cycles_counter
 3863 15fe 8150      		subi r24,lo8(-(-1))
 3864 1600 8093 0000 		sts cycles_counter,r24
1038:ServerLLDN.c  **** 				}
 3865               		.loc 6 1038 0
 3866 1604 00C0      		rjmp .L132
 3867               	.L124:
 3868               	.LBB15:
1012:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3869               		.loc 6 1012 0
 3870 1606 81E0      		ldi r24,lo8(1)
 3871 1608 8093 0000 		sts appState,r24
1013:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3872               		.loc 6 1013 0
 3873 160c 8DE0      		ldi r24,lo8(13)
 3874 160e 8093 0000 		sts appPanState,r24
1014:ServerLLDN.c  **** 						
 3875               		.loc 6 1014 0
 3876 1612 81E0      		ldi r24,lo8(1)
 3877 1614 0E94 0000 		call macsc_disable_cmp_int
1016:ServerLLDN.c  **** 						int total_msg = 0;
 3878               		.loc 6 1016 0
 3879 1618 1F92      		push __zero_reg__
 3880 161a 84E1      		ldi r24,lo8(20)
 3881 161c 8F93      		push r24
 3882 161e 80E0      		ldi r24,lo8(.LC3)
 3883 1620 90E0      		ldi r25,hi8(.LC3)
 3884 1622 892F      		mov r24,r25
 3885 1624 8F93      		push r24
 3886 1626 80E0      		ldi r24,lo8(.LC3)
 3887 1628 90E0      		ldi r25,hi8(.LC3)
 3888 162a 8F93      		push r24
 3889 162c 0E94 0000 		call printf
 3890 1630 0F90      		pop __tmp_reg__
 3891 1632 0F90      		pop __tmp_reg__
 3892 1634 0F90      		pop __tmp_reg__
 3893 1636 0F90      		pop __tmp_reg__
1017:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
 3894               		.loc 6 1017 0
 3895 1638 1C82      		std Y+4,__zero_reg__
 3896 163a 1B82      		std Y+3,__zero_reg__
1018:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
 3897               		.loc 6 1018 0
 3898 163c 1D82      		std Y+5,__zero_reg__
 3899 163e 1E82      		std Y+6,__zero_reg__
 3900 1640 1F82      		std Y+7,__zero_reg__
 3901 1642 1886      		std Y+8,__zero_reg__
1019:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 3902               		.loc 6 1019 0
 3903 1644 8091 0000 		lds r24,assTimeSlot
 3904 1648 9091 0000 		lds r25,assTimeSlot+1
 3905 164c 092E      		mov __tmp_reg__,r25
 3906 164e 000C      		lsl r0
 3907 1650 AA0B      		sbc r26,r26
 3908 1652 BB0B      		sbc r27,r27
 3909 1654 BC01      		movw r22,r24
 3910 1656 CD01      		movw r24,r26
 3911 1658 0E94 0000 		call __floatsisf
 3912 165c DC01      		movw r26,r24
 3913 165e CB01      		movw r24,r22
 3914 1660 20E0      		ldi r18,0
 3915 1662 30E0      		ldi r19,0
 3916 1664 40EA      		ldi r20,lo8(-96)
 3917 1666 51E4      		ldi r21,lo8(65)
 3918 1668 BC01      		movw r22,r24
 3919 166a CD01      		movw r24,r26
 3920 166c 0E94 0000 		call __mulsf3
 3921 1670 DC01      		movw r26,r24
 3922 1672 CB01      		movw r24,r22
 3923 1674 8D87      		std Y+13,r24
 3924 1676 9E87      		std Y+14,r25
 3925 1678 AF87      		std Y+15,r26
 3926 167a B88B      		std Y+16,r27
 3927               	.LBB16:
1020:ServerLLDN.c  **** 						{
 3928               		.loc 6 1020 0
 3929 167c 1A86      		std Y+10,__zero_reg__
 3930 167e 1986      		std Y+9,__zero_reg__
 3931 1680 00C0      		rjmp .L126
 3932               	.L128:
1022:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3933               		.loc 6 1022 0 discriminator 4
 3934 1682 2985      		ldd r18,Y+9
 3935 1684 3A85      		ldd r19,Y+10
 3936 1686 4AE4      		ldi r20,lo8(74)
 3937 1688 429F      		mul r20,r18
 3938 168a C001      		movw r24,r0
 3939 168c 439F      		mul r20,r19
 3940 168e 900D      		add r25,r0
 3941 1690 1124      		clr __zero_reg__
 3942 1692 8050      		subi r24,lo8(-(nodes_info_arr+1))
 3943 1694 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 3944 1696 FC01      		movw r30,r24
 3945 1698 8081      		ld r24,Z
 3946 169a 9181      		ldd r25,Z+1
 3947 169c 292F      		mov r18,r25
 3948 169e 2F93      		push r18
 3949 16a0 8F93      		push r24
 3950 16a2 80E0      		ldi r24,lo8(.LC4)
 3951 16a4 90E0      		ldi r25,hi8(.LC4)
 3952 16a6 892F      		mov r24,r25
 3953 16a8 8F93      		push r24
 3954 16aa 80E0      		ldi r24,lo8(.LC4)
 3955 16ac 90E0      		ldi r25,hi8(.LC4)
 3956 16ae 8F93      		push r24
 3957 16b0 0E94 0000 		call printf
 3958 16b4 0F90      		pop __tmp_reg__
 3959 16b6 0F90      		pop __tmp_reg__
 3960 16b8 0F90      		pop __tmp_reg__
 3961 16ba 0F90      		pop __tmp_reg__
1023:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3962               		.loc 6 1023 0 discriminator 4
 3963 16bc 2985      		ldd r18,Y+9
 3964 16be 3A85      		ldd r19,Y+10
 3965 16c0 4AE4      		ldi r20,lo8(74)
 3966 16c2 429F      		mul r20,r18
 3967 16c4 C001      		movw r24,r0
 3968 16c6 439F      		mul r20,r19
 3969 16c8 900D      		add r25,r0
 3970 16ca 1124      		clr __zero_reg__
 3971 16cc 8050      		subi r24,lo8(-(nodes_info_arr+69))
 3972 16ce 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 3973 16d0 FC01      		movw r30,r24
 3974 16d2 8081      		ld r24,Z
 3975 16d4 9181      		ldd r25,Z+1
 3976 16d6 CC01      		movw r24,r24
 3977 16d8 A0E0      		ldi r26,0
 3978 16da B0E0      		ldi r27,0
 3979 16dc BC01      		movw r22,r24
 3980 16de CD01      		movw r24,r26
 3981 16e0 0E94 0000 		call __floatunsisf
 3982 16e4 DC01      		movw r26,r24
 3983 16e6 CB01      		movw r24,r22
 3984 16e8 20E0      		ldi r18,0
 3985 16ea 30E0      		ldi r19,0
 3986 16ec 40EA      		ldi r20,lo8(-96)
 3987 16ee 51E4      		ldi r21,lo8(65)
 3988 16f0 BC01      		movw r22,r24
 3989 16f2 CD01      		movw r24,r26
 3990 16f4 0E94 0000 		call __divsf3
 3991 16f8 DC01      		movw r26,r24
 3992 16fa CB01      		movw r24,r22
 3993 16fc 9C01      		movw r18,r24
 3994 16fe AD01      		movw r20,r26
 3995 1700 60E0      		ldi r22,0
 3996 1702 70E0      		ldi r23,0
 3997 1704 80E8      		ldi r24,lo8(-128)
 3998 1706 9FE3      		ldi r25,lo8(63)
 3999 1708 0E94 0000 		call __subsf3
 4000 170c DC01      		movw r26,r24
 4001 170e CB01      		movw r24,r22
 4002 1710 2B2F      		mov r18,r27
 4003 1712 2F93      		push r18
 4004 1714 2A2F      		mov r18,r26
 4005 1716 2F93      		push r18
 4006 1718 292F      		mov r18,r25
 4007 171a 2F93      		push r18
 4008 171c 8F93      		push r24
 4009 171e 80E0      		ldi r24,lo8(.LC5)
 4010 1720 90E0      		ldi r25,hi8(.LC5)
 4011 1722 892F      		mov r24,r25
 4012 1724 8F93      		push r24
 4013 1726 80E0      		ldi r24,lo8(.LC5)
 4014 1728 90E0      		ldi r25,hi8(.LC5)
 4015 172a 8F93      		push r24
 4016 172c 0E94 0000 		call printf
 4017 1730 0F90      		pop __tmp_reg__
 4018 1732 0F90      		pop __tmp_reg__
 4019 1734 0F90      		pop __tmp_reg__
 4020 1736 0F90      		pop __tmp_reg__
 4021 1738 0F90      		pop __tmp_reg__
 4022 173a 0F90      		pop __tmp_reg__
1024:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
 4023               		.loc 6 1024 0 discriminator 4
 4024 173c 2985      		ldd r18,Y+9
 4025 173e 3A85      		ldd r19,Y+10
 4026 1740 4AE4      		ldi r20,lo8(74)
 4027 1742 429F      		mul r20,r18
 4028 1744 C001      		movw r24,r0
 4029 1746 439F      		mul r20,r19
 4030 1748 900D      		add r25,r0
 4031 174a 1124      		clr __zero_reg__
 4032 174c 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4033 174e 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4034 1750 FC01      		movw r30,r24
 4035 1752 8081      		ld r24,Z
 4036 1754 9181      		ldd r25,Z+1
 4037 1756 CC01      		movw r24,r24
 4038 1758 A0E0      		ldi r26,0
 4039 175a B0E0      		ldi r27,0
 4040 175c BC01      		movw r22,r24
 4041 175e CD01      		movw r24,r26
 4042 1760 0E94 0000 		call __floatunsisf
 4043 1764 DC01      		movw r26,r24
 4044 1766 CB01      		movw r24,r22
 4045 1768 20E0      		ldi r18,0
 4046 176a 30E0      		ldi r19,0
 4047 176c 40EA      		ldi r20,lo8(-96)
 4048 176e 51E4      		ldi r21,lo8(65)
 4049 1770 BC01      		movw r22,r24
 4050 1772 CD01      		movw r24,r26
 4051 1774 0E94 0000 		call __divsf3
 4052 1778 DC01      		movw r26,r24
 4053 177a CB01      		movw r24,r22
 4054 177c 2B2F      		mov r18,r27
 4055 177e 2F93      		push r18
 4056 1780 2A2F      		mov r18,r26
 4057 1782 2F93      		push r18
 4058 1784 292F      		mov r18,r25
 4059 1786 2F93      		push r18
 4060 1788 8F93      		push r24
 4061 178a 80E0      		ldi r24,lo8(.LC6)
 4062 178c 90E0      		ldi r25,hi8(.LC6)
 4063 178e 892F      		mov r24,r25
 4064 1790 8F93      		push r24
 4065 1792 80E0      		ldi r24,lo8(.LC6)
 4066 1794 90E0      		ldi r25,hi8(.LC6)
 4067 1796 8F93      		push r24
 4068 1798 0E94 0000 		call printf
 4069 179c 0F90      		pop __tmp_reg__
 4070 179e 0F90      		pop __tmp_reg__
 4071 17a0 0F90      		pop __tmp_reg__
 4072 17a2 0F90      		pop __tmp_reg__
 4073 17a4 0F90      		pop __tmp_reg__
 4074 17a6 0F90      		pop __tmp_reg__
1025:ServerLLDN.c  **** 							
 4075               		.loc 6 1025 0 discriminator 4
 4076 17a8 2985      		ldd r18,Y+9
 4077 17aa 3A85      		ldd r19,Y+10
 4078 17ac 4AE4      		ldi r20,lo8(74)
 4079 17ae 429F      		mul r20,r18
 4080 17b0 C001      		movw r24,r0
 4081 17b2 439F      		mul r20,r19
 4082 17b4 900D      		add r25,r0
 4083 17b6 1124      		clr __zero_reg__
 4084 17b8 8050      		subi r24,lo8(-(nodes_info_arr+5))
 4085 17ba 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 4086 17bc FC01      		movw r30,r24
 4087 17be 8081      		ld r24,Z
 4088 17c0 9181      		ldd r25,Z+1
 4089 17c2 A281      		ldd r26,Z+2
 4090 17c4 B381      		ldd r27,Z+3
 4091 17c6 2B2F      		mov r18,r27
 4092 17c8 2F93      		push r18
 4093 17ca 2A2F      		mov r18,r26
 4094 17cc 2F93      		push r18
 4095 17ce 292F      		mov r18,r25
 4096 17d0 2F93      		push r18
 4097 17d2 8F93      		push r24
 4098 17d4 80E0      		ldi r24,lo8(.LC7)
 4099 17d6 90E0      		ldi r25,hi8(.LC7)
 4100 17d8 892F      		mov r24,r25
 4101 17da 8F93      		push r24
 4102 17dc 80E0      		ldi r24,lo8(.LC7)
 4103 17de 90E0      		ldi r25,hi8(.LC7)
 4104 17e0 8F93      		push r24
 4105 17e2 0E94 0000 		call printf
 4106 17e6 0F90      		pop __tmp_reg__
 4107 17e8 0F90      		pop __tmp_reg__
 4108 17ea 0F90      		pop __tmp_reg__
 4109 17ec 0F90      		pop __tmp_reg__
 4110 17ee 0F90      		pop __tmp_reg__
 4111 17f0 0F90      		pop __tmp_reg__
1027:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
 4112               		.loc 6 1027 0 discriminator 4
 4113 17f2 2985      		ldd r18,Y+9
 4114 17f4 3A85      		ldd r19,Y+10
 4115 17f6 4AE4      		ldi r20,lo8(74)
 4116 17f8 429F      		mul r20,r18
 4117 17fa C001      		movw r24,r0
 4118 17fc 439F      		mul r20,r19
 4119 17fe 900D      		add r25,r0
 4120 1800 1124      		clr __zero_reg__
 4121 1802 8050      		subi r24,lo8(-(nodes_info_arr+69))
 4122 1804 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 4123 1806 FC01      		movw r30,r24
 4124 1808 2081      		ld r18,Z
 4125 180a 3181      		ldd r19,Z+1
 4126 180c 8B81      		ldd r24,Y+3
 4127 180e 9C81      		ldd r25,Y+4
 4128 1810 820F      		add r24,r18
 4129 1812 931F      		adc r25,r19
 4130 1814 9C83      		std Y+4,r25
 4131 1816 8B83      		std Y+3,r24
1028:ServerLLDN.c  **** 						}
 4132               		.loc 6 1028 0 discriminator 4
 4133 1818 2985      		ldd r18,Y+9
 4134 181a 3A85      		ldd r19,Y+10
 4135 181c 4AE4      		ldi r20,lo8(74)
 4136 181e 429F      		mul r20,r18
 4137 1820 C001      		movw r24,r0
 4138 1822 439F      		mul r20,r19
 4139 1824 900D      		add r25,r0
 4140 1826 1124      		clr __zero_reg__
 4141 1828 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4142 182a 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4143 182c FC01      		movw r30,r24
 4144 182e 8081      		ld r24,Z
 4145 1830 9181      		ldd r25,Z+1
 4146 1832 CC01      		movw r24,r24
 4147 1834 A0E0      		ldi r26,0
 4148 1836 B0E0      		ldi r27,0
 4149 1838 BC01      		movw r22,r24
 4150 183a CD01      		movw r24,r26
 4151 183c 0E94 0000 		call __floatunsisf
 4152 1840 DC01      		movw r26,r24
 4153 1842 CB01      		movw r24,r22
 4154 1844 9C01      		movw r18,r24
 4155 1846 AD01      		movw r20,r26
 4156 1848 6D81      		ldd r22,Y+5
 4157 184a 7E81      		ldd r23,Y+6
 4158 184c 8F81      		ldd r24,Y+7
 4159 184e 9885      		ldd r25,Y+8
 4160 1850 0E94 0000 		call __addsf3
 4161 1854 DC01      		movw r26,r24
 4162 1856 CB01      		movw r24,r22
 4163 1858 8D83      		std Y+5,r24
 4164 185a 9E83      		std Y+6,r25
 4165 185c AF83      		std Y+7,r26
 4166 185e B887      		std Y+8,r27
1020:ServerLLDN.c  **** 						{
 4167               		.loc 6 1020 0 discriminator 4
 4168 1860 8985      		ldd r24,Y+9
 4169 1862 9A85      		ldd r25,Y+10
 4170 1864 0196      		adiw r24,1
 4171 1866 9A87      		std Y+10,r25
 4172 1868 8987      		std Y+9,r24
 4173               	.L126:
1020:ServerLLDN.c  **** 						{
 4174               		.loc 6 1020 0 is_stmt 0 discriminator 1
 4175 186a 2985      		ldd r18,Y+9
 4176 186c 3A85      		ldd r19,Y+10
 4177 186e 4AE4      		ldi r20,lo8(74)
 4178 1870 429F      		mul r20,r18
 4179 1872 C001      		movw r24,r0
 4180 1874 439F      		mul r20,r19
 4181 1876 900D      		add r25,r0
 4182 1878 1124      		clr __zero_reg__
 4183 187a 8050      		subi r24,lo8(-(nodes_info_arr+1))
 4184 187c 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 4185 187e FC01      		movw r30,r24
 4186 1880 8081      		ld r24,Z
 4187 1882 9181      		ldd r25,Z+1
 4188 1884 892B      		or r24,r25
 4189 1886 01F0      		breq .L127
1020:ServerLLDN.c  **** 						{
 4190               		.loc 6 1020 0 discriminator 3
 4191 1888 2091 0000 		lds r18,assTimeSlot
 4192 188c 3091 0000 		lds r19,assTimeSlot+1
 4193 1890 8985      		ldd r24,Y+9
 4194 1892 9A85      		ldd r25,Y+10
 4195 1894 8217      		cp r24,r18
 4196 1896 9307      		cpc r25,r19
 4197 1898 04F4      		brge .+2
 4198 189a 00C0      		rjmp .L128
 4199               	.L127:
 4200               	.LBE16:
1030:ServerLLDN.c  **** 						{
 4201               		.loc 6 1030 0 is_stmt 1
 4202 189c 8091 0000 		lds r24,assTimeSlot
 4203 18a0 9091 0000 		lds r25,assTimeSlot+1
 4204 18a4 1816      		cp __zero_reg__,r24
 4205 18a6 1906      		cpc __zero_reg__,r25
 4206 18a8 04F0      		brlt .+2
 4207 18aa 00C0      		rjmp .L132
1030:ServerLLDN.c  **** 						{
 4208               		.loc 6 1030 0 is_stmt 0 discriminator 1
 4209 18ac 8B81      		ldd r24,Y+3
 4210 18ae 9C81      		ldd r25,Y+4
 4211 18b0 1816      		cp __zero_reg__,r24
 4212 18b2 1906      		cpc __zero_reg__,r25
 4213 18b4 04F0      		brlt .+2
 4214 18b6 00C0      		rjmp .L132
1032:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
 4215               		.loc 6 1032 0 is_stmt 1
 4216 18b8 8B81      		ldd r24,Y+3
 4217 18ba 9C81      		ldd r25,Y+4
 4218 18bc 092E      		mov __tmp_reg__,r25
 4219 18be 000C      		lsl r0
 4220 18c0 AA0B      		sbc r26,r26
 4221 18c2 BB0B      		sbc r27,r27
 4222 18c4 BC01      		movw r22,r24
 4223 18c6 CD01      		movw r24,r26
 4224 18c8 0E94 0000 		call __floatsisf
 4225 18cc DC01      		movw r26,r24
 4226 18ce CB01      		movw r24,r22
 4227 18d0 2D85      		ldd r18,Y+13
 4228 18d2 3E85      		ldd r19,Y+14
 4229 18d4 4F85      		ldd r20,Y+15
 4230 18d6 5889      		ldd r21,Y+16
 4231 18d8 BC01      		movw r22,r24
 4232 18da CD01      		movw r24,r26
 4233 18dc 0E94 0000 		call __divsf3
 4234 18e0 DC01      		movw r26,r24
 4235 18e2 CB01      		movw r24,r22
 4236 18e4 9C01      		movw r18,r24
 4237 18e6 AD01      		movw r20,r26
 4238 18e8 60E0      		ldi r22,0
 4239 18ea 70E0      		ldi r23,0
 4240 18ec 80E8      		ldi r24,lo8(-128)
 4241 18ee 9FE3      		ldi r25,lo8(63)
 4242 18f0 0E94 0000 		call __subsf3
 4243 18f4 DC01      		movw r26,r24
 4244 18f6 CB01      		movw r24,r22
 4245 18f8 8093 0000 		sts PLR,r24
 4246 18fc 9093 0000 		sts PLR+1,r25
 4247 1900 A093 0000 		sts PLR+2,r26
 4248 1904 B093 0000 		sts PLR+3,r27
1033:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f", PLR, PER);
 4249               		.loc 6 1033 0
 4250 1908 2D85      		ldd r18,Y+13
 4251 190a 3E85      		ldd r19,Y+14
 4252 190c 4F85      		ldd r20,Y+15
 4253 190e 5889      		ldd r21,Y+16
 4254 1910 6D81      		ldd r22,Y+5
 4255 1912 7E81      		ldd r23,Y+6
 4256 1914 8F81      		ldd r24,Y+7
 4257 1916 9885      		ldd r25,Y+8
 4258 1918 0E94 0000 		call __divsf3
 4259 191c DC01      		movw r26,r24
 4260 191e CB01      		movw r24,r22
 4261 1920 8093 0000 		sts PER,r24
 4262 1924 9093 0000 		sts PER+1,r25
 4263 1928 A093 0000 		sts PER+2,r26
 4264 192c B093 0000 		sts PER+3,r27
1034:ServerLLDN.c  **** 							
 4265               		.loc 6 1034 0
 4266 1930 2091 0000 		lds r18,PER
 4267 1934 3091 0000 		lds r19,PER+1
 4268 1938 4091 0000 		lds r20,PER+2
 4269 193c 5091 0000 		lds r21,PER+3
 4270 1940 8091 0000 		lds r24,PLR
 4271 1944 9091 0000 		lds r25,PLR+1
 4272 1948 A091 0000 		lds r26,PLR+2
 4273 194c B091 0000 		lds r27,PLR+3
 4274 1950 652F      		mov r22,r21
 4275 1952 6F93      		push r22
 4276 1954 642F      		mov r22,r20
 4277 1956 6F93      		push r22
 4278 1958 632F      		mov r22,r19
 4279 195a 6F93      		push r22
 4280 195c 2F93      		push r18
 4281 195e 2B2F      		mov r18,r27
 4282 1960 2F93      		push r18
 4283 1962 2A2F      		mov r18,r26
 4284 1964 2F93      		push r18
 4285 1966 292F      		mov r18,r25
 4286 1968 2F93      		push r18
 4287 196a 8F93      		push r24
 4288 196c 80E0      		ldi r24,lo8(.LC8)
 4289 196e 90E0      		ldi r25,hi8(.LC8)
 4290 1970 892F      		mov r24,r25
 4291 1972 8F93      		push r24
 4292 1974 80E0      		ldi r24,lo8(.LC8)
 4293 1976 90E0      		ldi r25,hi8(.LC8)
 4294 1978 8F93      		push r24
 4295 197a 0E94 0000 		call printf
 4296 197e 8DB7      		in r24,__SP_L__
 4297 1980 9EB7      		in r25,__SP_H__
 4298 1982 0A96      		adiw r24,10
 4299 1984 0FB6      		in __tmp_reg__,__SREG__
 4300 1986 F894      		cli
 4301 1988 DEBF      		out __SP_H__,r29
 4302 198a 0FBE      		out __SREG__,__tmp_reg__
 4303 198c CDBF      		out __SP_L__,r28
 4304               	.LBE15:
1038:ServerLLDN.c  **** 				}
 4305               		.loc 6 1038 0
 4306 198e 00C0      		rjmp .L132
 4307               	.L112:
 4308               	.LBB17:
1042:ServerLLDN.c  **** 					{
 4309               		.loc 6 1042 0
 4310 1990 1C86      		std Y+12,__zero_reg__
 4311 1992 1B86      		std Y+11,__zero_reg__
 4312 1994 00C0      		rjmp .L129
 4313               	.L130:
1044:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
 4314               		.loc 6 1044 0 discriminator 3
 4315 1996 8B85      		ldd r24,Y+11
 4316 1998 9C85      		ldd r25,Y+12
 4317 199a 8050      		subi r24,lo8(-(ACKFrame+1))
 4318 199c 9040      		sbci r25,hi8(-(ACKFrame+1))
 4319 199e FC01      		movw r30,r24
 4320 19a0 1082      		st Z,__zero_reg__
1045:ServerLLDN.c  **** 					}
 4321               		.loc 6 1045 0 discriminator 3
 4322 19a2 8B85      		ldd r24,Y+11
 4323 19a4 9C85      		ldd r25,Y+12
 4324 19a6 8050      		subi r24,lo8(-(retransmit_ts_array))
 4325 19a8 9040      		sbci r25,hi8(-(retransmit_ts_array))
 4326 19aa FC01      		movw r30,r24
 4327 19ac 1082      		st Z,__zero_reg__
1042:ServerLLDN.c  **** 					{
 4328               		.loc 6 1042 0 discriminator 3
 4329 19ae 8B85      		ldd r24,Y+11
 4330 19b0 9C85      		ldd r25,Y+12
 4331 19b2 0196      		adiw r24,1
 4332 19b4 9C87      		std Y+12,r25
 4333 19b6 8B87      		std Y+11,r24
 4334               	.L129:
1042:ServerLLDN.c  **** 					{
 4335               		.loc 6 1042 0 is_stmt 0 discriminator 1
 4336 19b8 8B85      		ldd r24,Y+11
 4337 19ba 9C85      		ldd r25,Y+12
 4338 19bc 8097      		sbiw r24,32
 4339 19be 04F0      		brlt .L130
 4340               	.LBE17:
1047:ServerLLDN.c  **** 					ACKFrame_size = 0;
 4341               		.loc 6 1047 0 is_stmt 1
 4342 19c0 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 4343 19c4 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
1048:ServerLLDN.c  **** 					
 4344               		.loc 6 1048 0
 4345 19c8 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 4346 19cc 1092 0000 		sts ACKFrame_size,__zero_reg__
1050:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 4347               		.loc 6 1050 0
 4348 19d0 1092 0000 		sts msgReq+5+1,__zero_reg__
 4349 19d4 1092 0000 		sts msgReq+5,__zero_reg__
1051:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 4350               		.loc 6 1051 0
 4351 19d8 1092 0000 		sts msgReq+7,__zero_reg__
1052:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 4352               		.loc 6 1052 0
 4353 19dc 1092 0000 		sts msgReq+8,__zero_reg__
1053:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 4354               		.loc 6 1053 0
 4355 19e0 80E0      		ldi r24,0
 4356 19e2 90E4      		ldi r25,lo8(64)
 4357 19e4 9093 0000 		sts msgReq+9+1,r25
 4358 19e8 8093 0000 		sts msgReq+9,r24
1054:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 4359               		.loc 6 1054 0
 4360 19ec 80E0      		ldi r24,lo8(ACKFrame)
 4361 19ee 90E0      		ldi r25,hi8(ACKFrame)
 4362 19f0 9093 0000 		sts msgReq+13+1,r25
 4363 19f4 8093 0000 		sts msgReq+13,r24
1055:ServerLLDN.c  **** 
 4364               		.loc 6 1055 0
 4365 19f8 8091 0000 		lds r24,macLLDNRetransmitTS
 4366 19fc 9091 0000 		lds r25,macLLDNRetransmitTS+1
 4367 1a00 8F5F      		subi r24,lo8(-(1))
 4368 1a02 8093 0000 		sts msgReq+15,r24
1057:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
 4369               		.loc 6 1057 0
 4370 1a06 81E0      		ldi r24,lo8(1)
 4371 1a08 8093 0000 		sts appState,r24
1058:ServerLLDN.c  **** 					break;
 4372               		.loc 6 1058 0
 4373 1a0c 8DE0      		ldi r24,lo8(13)
 4374 1a0e 8093 0000 		sts appPanState,r24
1059:ServerLLDN.c  **** 				}				
 4375               		.loc 6 1059 0
 4376 1a12 00C0      		rjmp .L101
 4377               	.L113:
1064:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 4378               		.loc 6 1064 0
 4379 1a14 1092 0000 		sts msgReq+9+1,__zero_reg__
 4380 1a18 1092 0000 		sts msgReq+9,__zero_reg__
1065:ServerLLDN.c  **** 					break;
 4381               		.loc 6 1065 0
 4382 1a1c 81E0      		ldi r24,lo8(1)
 4383 1a1e 8093 0000 		sts appState,r24
1066:ServerLLDN.c  **** 				}
 4384               		.loc 6 1066 0
 4385 1a22 00C0      		rjmp .L101
 4386               	.L132:
1038:ServerLLDN.c  **** 				}
 4387               		.loc 6 1038 0
 4388 1a24 0000      		nop
 4389               	.L101:
 4390               	.L131:
1069:ServerLLDN.c  **** 		}
 4391               		.loc 6 1069 0
 4392 1a26 0000      		nop
 4393               	.L100:
1145:ServerLLDN.c  **** 		}
1146:ServerLLDN.c  **** 	}
1147:ServerLLDN.c  **** }
 4394               		.loc 6 1147 0
 4395 1a28 0000      		nop
 4396               	/* epilogue start */
 4397 1a2a 6096      		adiw r28,16
 4398 1a2c 0FB6      		in __tmp_reg__,__SREG__
 4399 1a2e F894      		cli
 4400 1a30 DEBF      		out __SP_H__,r29
 4401 1a32 0FBE      		out __SREG__,__tmp_reg__
 4402 1a34 CDBF      		out __SP_L__,r28
 4403 1a36 DF91      		pop r29
 4404 1a38 CF91      		pop r28
 4405 1a3a FF90      		pop r15
 4406 1a3c EF90      		pop r14
 4407 1a3e DF90      		pop r13
 4408 1a40 CF90      		pop r12
 4409 1a42 0895      		ret
 4410               		.cfi_endproc
 4411               	.LFE149:
 4413               		.section	.rodata
 4414               	.LC0:
 4415 007b 00        		.byte	0
 4416 007c C2        		.byte	-62
 4417 007d 01        		.byte	1
 4418 007e 00        		.byte	0
 4419 007f 03        		.byte	3
 4420 0080 00        		.byte	0
 4421 0081 00        		.byte	0
 4422               		.text
 4423               	.global	main
 4425               	main:
 4426               	.LFB150:
1148:ServerLLDN.c  **** 
1149:ServerLLDN.c  **** 	/*****************************************************************************
1150:ServerLLDN.c  **** 	*****************************************************************************/
1151:ServerLLDN.c  **** 	int main(void)
1152:ServerLLDN.c  **** 	{
 4427               		.loc 6 1152 0
 4428               		.cfi_startproc
 4429 1a44 0F93      		push r16
 4430               	.LCFI129:
 4431               		.cfi_def_cfa_offset 3
 4432               		.cfi_offset 16, -2
 4433 1a46 1F93      		push r17
 4434               	.LCFI130:
 4435               		.cfi_def_cfa_offset 4
 4436               		.cfi_offset 17, -3
 4437 1a48 CF93      		push r28
 4438               	.LCFI131:
 4439               		.cfi_def_cfa_offset 5
 4440               		.cfi_offset 28, -4
 4441 1a4a DF93      		push r29
 4442               	.LCFI132:
 4443               		.cfi_def_cfa_offset 6
 4444               		.cfi_offset 29, -5
 4445 1a4c CDB7      		in r28,__SP_L__
 4446 1a4e DEB7      		in r29,__SP_H__
 4447               	.LCFI133:
 4448               		.cfi_def_cfa_register 28
 4449 1a50 2797      		sbiw r28,7
 4450               	.LCFI134:
 4451               		.cfi_def_cfa_offset 13
 4452 1a52 0FB6      		in __tmp_reg__,__SREG__
 4453 1a54 F894      		cli
 4454 1a56 DEBF      		out __SP_H__,r29
 4455 1a58 0FBE      		out __SREG__,__tmp_reg__
 4456 1a5a CDBF      		out __SP_L__,r28
 4457               	/* prologue: function */
 4458               	/* frame size = 7 */
 4459               	/* stack size = 11 */
 4460               	.L__stack_usage = 11
1153:ServerLLDN.c  **** 		sysclk_init();
 4461               		.loc 6 1153 0
 4462 1a5c 0E94 0000 		call sysclk_init
1154:ServerLLDN.c  **** 		board_init();
 4463               		.loc 6 1154 0
 4464 1a60 0E94 0000 		call board_init
1155:ServerLLDN.c  **** 
1156:ServerLLDN.c  **** 		SYS_Init();
 4465               		.loc 6 1156 0
 4466 1a64 0E94 0000 		call SYS_Init
1157:ServerLLDN.c  **** 		/* Disable CSMA/CA
1158:ServerLLDN.c  **** 		 * Disable auto ACK
1159:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
1160:ServerLLDN.c  **** 		 */
1161:ServerLLDN.c  **** 
1162:ServerLLDN.c  **** 		sm_init();
 4467               		.loc 6 1162 0
 4468 1a68 0E94 0000 		call sm_init
1163:ServerLLDN.c  **** 
1164:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
1165:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1166:ServerLLDN.c  **** 		irq_initialize_vectors();
1167:ServerLLDN.c  **** 	#endif
1168:ServerLLDN.c  **** 		cpu_irq_enable();
 4469               		.loc 6 1168 0
 4470               	/* #APP */
 4471               	 ;  1168 "ServerLLDN.c" 1
 4472 1a6c 7894      		sei
 4473               	 ;  0 "" 2
1169:ServerLLDN.c  **** 
1170:ServerLLDN.c  **** 	#if 1
1171:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1172:ServerLLDN.c  **** 		stdio_usb_init();
1173:ServerLLDN.c  **** 	#else
1174:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 4474               		.loc 6 1174 0
 4475               	/* #NOAPP */
 4476 1a6e 27E0      		ldi r18,lo8(7)
 4477 1a70 E0E0      		ldi r30,lo8(.LC0)
 4478 1a72 F0E0      		ldi r31,hi8(.LC0)
 4479 1a74 CE01      		movw r24,r28
 4480 1a76 0196      		adiw r24,1
 4481 1a78 DC01      		movw r26,r24
 4482               		0:
 4483 1a7a 0190      		ld r0,Z+
 4484 1a7c 0D92      		st X+,r0
 4485 1a7e 2A95      		dec r18
 4486 1a80 01F4      		brne 0b
1175:ServerLLDN.c  **** 		{
1176:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1177:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1178:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1179:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1180:ServerLLDN.c  **** 		};
1181:ServerLLDN.c  **** 
1182:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 4487               		.loc 6 1182 0
 4488 1a82 CE01      		movw r24,r28
 4489 1a84 0196      		adiw r24,1
 4490 1a86 BC01      		movw r22,r24
 4491 1a88 80EC      		ldi r24,lo8(-64)
 4492 1a8a 90E0      		ldi r25,0
 4493 1a8c 0E94 0000 		call stdio_serial_init
1183:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 4494               		.loc 6 1183 0
 4495 1a90 80EC      		ldi r24,lo8(-64)
 4496 1a92 90E0      		ldi r25,0
 4497 1a94 0E94 0000 		call usart_double_baud_enable
1184:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 4498               		.loc 6 1184 0
 4499 1a98 0E94 0000 		call sysclk_get_source_clock_hz
 4500 1a9c DC01      		movw r26,r24
 4501 1a9e CB01      		movw r24,r22
 4502 1aa0 8C01      		movw r16,r24
 4503 1aa2 9D01      		movw r18,r26
 4504 1aa4 40E0      		ldi r20,0
 4505 1aa6 52EC      		ldi r21,lo8(-62)
 4506 1aa8 61E0      		ldi r22,lo8(1)
 4507 1aaa 70E0      		ldi r23,0
 4508 1aac 80EC      		ldi r24,lo8(-64)
 4509 1aae 90E0      		ldi r25,0
 4510 1ab0 0E94 0000 		call usart_set_baudrate_precalculated
 4511               	.L134:
1185:ServerLLDN.c  **** 
1186:ServerLLDN.c  **** 	#endif
1187:ServerLLDN.c  **** 	#endif
1188:ServerLLDN.c  **** 		for(;;)
1189:ServerLLDN.c  **** 		{
1190:ServerLLDN.c  **** 			SYS_TaskHandler();
 4512               		.loc 6 1190 0 discriminator 1
 4513 1ab4 0E94 0000 		call SYS_TaskHandler
1191:ServerLLDN.c  **** 			APP_TaskHandler();
 4514               		.loc 6 1191 0 discriminator 1
 4515 1ab8 0E94 0000 		call APP_TaskHandler
1192:ServerLLDN.c  **** 		}
 4516               		.loc 6 1192 0 discriminator 1
 4517 1abc 00C0      		rjmp .L134
 4518               		.cfi_endproc
 4519               	.LFE150:
 4521               	.Letext0:
 4522               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 4523               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 4524               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 4525               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 4526               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 4527               		.file 12 "lldn.h"
 4528               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 4529               		.file 14 "config/config.h"
 4530               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:91     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:103    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:115    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:126    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:175    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:270    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:314    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:365    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:436    .text:0000019e macsc_read32
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:519    .text:00000208 macsc_write_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:598    .text:00000270 macsc_read_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:641    .text:0000029a macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:694    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:699    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:704    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:712    .text:000002ce appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:774    .bss.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:781    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:791    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000014 stack_conf_req
                            *COM*:00000021 ACKFrame
                            *COM*:00000021 ACKFrame_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:800    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:806    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:812    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:817    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:823    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:829    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:835    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:841    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:848    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:854    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:860    .bss.PLR:00000000 PLR
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:866    .bss.PER:00000000 PER
                            *COM*:00000020 retransmit_ts_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:873    .bss.retransmit_ts_array_counter:00000000 retransmit_ts_array_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:879    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:885    .bss.cmp_value_start_superframe:00000000 cmp_value_start_superframe
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:890    .data.msgReqGACK:00000000 msgReqGACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:901    .text:0000031a tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:941    .text:0000033a lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:976    .text:00000354 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1022   .text:0000038a end_of_association_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1058   .text:000003a6 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1193   .text:0000046e addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1427   .text:0000060a CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1524   .text:000006a2 appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1647   .text:00000746 check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1752   .text:000007d0 check_ack_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:1863   .text:0000085a appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2319   .text:00000b80 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2371   .text:00000bc6 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2579   .text:00000d0a appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2772   .text:00000e80 end_of_superframe_Online
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2819   .text:00000eac send_gack
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:2942   .text:00000f62 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:3295   .text:00001238 appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:3388   .text:000012ae APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccElRAJK.s:4425   .text:00001a44 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
NWK_DataReq
printf
malloc
free
__floatsisf
__divsf3
__subsf3
__fixsfsi
__floatunsisf
__mulsf3
__addsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
macsc_set_cmp2_int_cb
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
