   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               	.global	received_packets
  89               		.section	.bss.received_packets,"aw",@nobits
  92               	received_packets:
  93 0000 0000 0000 		.zero	4
  94               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  97               	baudctrl_1mhz:
  98 0000 3300      		.word	51
  99 0002 1900      		.word	25
 100 0004 0C00      		.word	12
 101 0006 0600      		.word	6
 102 0008 0300      		.word	3
 103 000a 0200      		.word	2
 104 000c 0100      		.word	1
 105 000e FF00      		.word	255
 106               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 109               	baudctrl_8mhz:
 110 0000 A001      		.word	416
 111 0002 CF00      		.word	207
 112 0004 6700      		.word	103
 113 0006 3300      		.word	51
 114 0008 1900      		.word	25
 115 000a 0C00      		.word	12
 116 000c 0700      		.word	7
 117 000e 0800      		.word	8
 118               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 121               	baudctrl_16mhz:
 122 0000 4003      		.word	832
 123 0002 A001      		.word	416
 124 0004 CF00      		.word	207
 125 0006 6700      		.word	103
 126 0008 3300      		.word	51
 127 000a 1900      		.word	25
 128 000c 1000      		.word	16
 129 000e 1000      		.word	16
 130               		.text
 132               	usart_double_baud_enable:
 133               	.LFB101:
 134               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 135               		.loc 2 515 0
 136               		.cfi_startproc
 137 0034 CF93      		push r28
 138               	.LCFI6:
 139               		.cfi_def_cfa_offset 3
 140               		.cfi_offset 28, -2
 141 0036 DF93      		push r29
 142               	.LCFI7:
 143               		.cfi_def_cfa_offset 4
 144               		.cfi_offset 29, -3
 145 0038 00D0      		rcall .
 146               	.LCFI8:
 147               		.cfi_def_cfa_offset 6
 148 003a CDB7      		in r28,__SP_L__
 149 003c DEB7      		in r29,__SP_H__
 150               	.LCFI9:
 151               		.cfi_def_cfa_register 28
 152               	/* prologue: function */
 153               	/* frame size = 2 */
 154               	/* stack size = 4 */
 155               	.L__stack_usage = 4
 156 003e 9A83      		std Y+2,r25
 157 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 158               		.loc 2 516 0
 159 0042 8981      		ldd r24,Y+1
 160 0044 9A81      		ldd r25,Y+2
 161 0046 FC01      		movw r30,r24
 162 0048 8081      		ld r24,Z
 163 004a 282F      		mov r18,r24
 164 004c 2260      		ori r18,lo8(2)
 165 004e 8981      		ldd r24,Y+1
 166 0050 9A81      		ldd r25,Y+2
 167 0052 FC01      		movw r30,r24
 168 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 169               		.loc 2 517 0
 170 0056 0000      		nop
 171               	/* epilogue start */
 172 0058 0F90      		pop __tmp_reg__
 173 005a 0F90      		pop __tmp_reg__
 174 005c DF91      		pop r29
 175 005e CF91      		pop r28
 176 0060 0895      		ret
 177               		.cfi_endproc
 178               	.LFE101:
 181               	usart_serial_init:
 182               	.LFB104:
 183               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 184               		.loc 3 77 0
 185               		.cfi_startproc
 186 0062 CF93      		push r28
 187               	.LCFI10:
 188               		.cfi_def_cfa_offset 3
 189               		.cfi_offset 28, -2
 190 0064 DF93      		push r29
 191               	.LCFI11:
 192               		.cfi_def_cfa_offset 4
 193               		.cfi_offset 29, -3
 194 0066 CDB7      		in r28,__SP_L__
 195 0068 DEB7      		in r29,__SP_H__
 196               	.LCFI12:
 197               		.cfi_def_cfa_register 28
 198 006a 2B97      		sbiw r28,11
 199               	.LCFI13:
 200               		.cfi_def_cfa_offset 15
 201 006c 0FB6      		in __tmp_reg__,__SREG__
 202 006e F894      		cli
 203 0070 DEBF      		out __SP_H__,r29
 204 0072 0FBE      		out __SREG__,__tmp_reg__
 205 0074 CDBF      		out __SP_L__,r28
 206               	/* prologue: function */
 207               	/* frame size = 11 */
 208               	/* stack size = 13 */
 209               	.L__stack_usage = 13
 210 0076 9987      		std Y+9,r25
 211 0078 8887      		std Y+8,r24
 212 007a 7B87      		std Y+11,r23
 213 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 214               		.loc 3 80 0
 215 007e 8A85      		ldd r24,Y+10
 216 0080 9B85      		ldd r25,Y+11
 217 0082 FC01      		movw r30,r24
 218 0084 8481      		ldd r24,Z+4
 219 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 220               		.loc 3 81 0
 221 0088 8A85      		ldd r24,Y+10
 222 008a 9B85      		ldd r25,Y+11
 223 008c FC01      		movw r30,r24
 224 008e 8581      		ldd r24,Z+5
 225 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 226               		.loc 3 82 0
 227 0092 8A85      		ldd r24,Y+10
 228 0094 9B85      		ldd r25,Y+11
 229 0096 FC01      		movw r30,r24
 230 0098 8681      		ldd r24,Z+6
 231 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 232               		.loc 3 83 0
 233 009c 8A85      		ldd r24,Y+10
 234 009e 9B85      		ldd r25,Y+11
 235 00a0 FC01      		movw r30,r24
 236 00a2 8081      		ld r24,Z
 237 00a4 9181      		ldd r25,Z+1
 238 00a6 A281      		ldd r26,Z+2
 239 00a8 B381      		ldd r27,Z+3
 240 00aa 8983      		std Y+1,r24
 241 00ac 9A83      		std Y+2,r25
 242 00ae AB83      		std Y+3,r26
 243 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 244               		.loc 3 85 0
 245 00b2 8885      		ldd r24,Y+8
 246 00b4 9985      		ldd r25,Y+9
 247 00b6 9E01      		movw r18,r28
 248 00b8 2F5F      		subi r18,-1
 249 00ba 3F4F      		sbci r19,-1
 250 00bc B901      		movw r22,r18
 251 00be 0E94 0000 		call usart_init_rs232
 252 00c2 8823      		tst r24
 253 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 254               		.loc 3 86 0
 255 00c6 81E0      		ldi r24,lo8(1)
 256 00c8 00C0      		rjmp .L9
 257               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 258               		.loc 3 88 0
 259 00ca 80E0      		ldi r24,0
 260               	.L9:
 261               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 262               		.loc 3 90 0 discriminator 1
 263 00cc 2B96      		adiw r28,11
 264 00ce 0FB6      		in __tmp_reg__,__SREG__
 265 00d0 F894      		cli
 266 00d2 DEBF      		out __SP_H__,r29
 267 00d4 0FBE      		out __SREG__,__tmp_reg__
 268 00d6 CDBF      		out __SP_L__,r28
 269 00d8 DF91      		pop r29
 270 00da CF91      		pop r28
 271 00dc 0895      		ret
 272               		.cfi_endproc
 273               	.LFE104:
 276               	usart_serial_putchar:
 277               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 278               		.loc 3 100 0
 279               		.cfi_startproc
 280 00de CF93      		push r28
 281               	.LCFI14:
 282               		.cfi_def_cfa_offset 3
 283               		.cfi_offset 28, -2
 284 00e0 DF93      		push r29
 285               	.LCFI15:
 286               		.cfi_def_cfa_offset 4
 287               		.cfi_offset 29, -3
 288 00e2 00D0      		rcall .
 289 00e4 1F92      		push __zero_reg__
 290               	.LCFI16:
 291               		.cfi_def_cfa_offset 7
 292 00e6 CDB7      		in r28,__SP_L__
 293 00e8 DEB7      		in r29,__SP_H__
 294               	.LCFI17:
 295               		.cfi_def_cfa_register 28
 296               	/* prologue: function */
 297               	/* frame size = 3 */
 298               	/* stack size = 5 */
 299               	.L__stack_usage = 5
 300 00ea 9A83      		std Y+2,r25
 301 00ec 8983      		std Y+1,r24
 302 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 303               		.loc 3 101 0
 304 00f0 8981      		ldd r24,Y+1
 305 00f2 9A81      		ldd r25,Y+2
 306 00f4 6B81      		ldd r22,Y+3
 307 00f6 0E94 0000 		call usart_putchar
 308               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 309               		.loc 3 102 0
 310 00fa 0F90      		pop __tmp_reg__
 311 00fc 0F90      		pop __tmp_reg__
 312 00fe 0F90      		pop __tmp_reg__
 313 0100 DF91      		pop r29
 314 0102 CF91      		pop r28
 315 0104 0895      		ret
 316               		.cfi_endproc
 317               	.LFE105:
 320               	usart_serial_getchar:
 321               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 322               		.loc 3 111 0
 323               		.cfi_startproc
 324 0106 CF93      		push r28
 325               	.LCFI18:
 326               		.cfi_def_cfa_offset 3
 327               		.cfi_offset 28, -2
 328 0108 DF93      		push r29
 329               	.LCFI19:
 330               		.cfi_def_cfa_offset 4
 331               		.cfi_offset 29, -3
 332 010a 00D0      		rcall .
 333 010c 00D0      		rcall .
 334               	.LCFI20:
 335               		.cfi_def_cfa_offset 8
 336 010e CDB7      		in r28,__SP_L__
 337 0110 DEB7      		in r29,__SP_H__
 338               	.LCFI21:
 339               		.cfi_def_cfa_register 28
 340               	/* prologue: function */
 341               	/* frame size = 4 */
 342               	/* stack size = 6 */
 343               	.L__stack_usage = 6
 344 0112 9A83      		std Y+2,r25
 345 0114 8983      		std Y+1,r24
 346 0116 7C83      		std Y+4,r23
 347 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 348               		.loc 3 112 0
 349 011a 8981      		ldd r24,Y+1
 350 011c 9A81      		ldd r25,Y+2
 351 011e 0E94 0000 		call usart_getchar
 352 0122 282F      		mov r18,r24
 353 0124 8B81      		ldd r24,Y+3
 354 0126 9C81      		ldd r25,Y+4
 355 0128 FC01      		movw r30,r24
 356 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 357               		.loc 3 113 0
 358 012c 0000      		nop
 359               	/* epilogue start */
 360 012e 0F90      		pop __tmp_reg__
 361 0130 0F90      		pop __tmp_reg__
 362 0132 0F90      		pop __tmp_reg__
 363 0134 0F90      		pop __tmp_reg__
 364 0136 DF91      		pop r29
 365 0138 CF91      		pop r28
 366 013a 0895      		ret
 367               		.cfi_endproc
 368               	.LFE106:
 371               	stdio_serial_init:
 372               	.LFB107:
 373               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 374               		.loc 4 90 0
 375               		.cfi_startproc
 376 013c CF93      		push r28
 377               	.LCFI22:
 378               		.cfi_def_cfa_offset 3
 379               		.cfi_offset 28, -2
 380 013e DF93      		push r29
 381               	.LCFI23:
 382               		.cfi_def_cfa_offset 4
 383               		.cfi_offset 29, -3
 384 0140 00D0      		rcall .
 385 0142 00D0      		rcall .
 386               	.LCFI24:
 387               		.cfi_def_cfa_offset 8
 388 0144 CDB7      		in r28,__SP_L__
 389 0146 DEB7      		in r29,__SP_H__
 390               	.LCFI25:
 391               		.cfi_def_cfa_register 28
 392               	/* prologue: function */
 393               	/* frame size = 4 */
 394               	/* stack size = 6 */
 395               	.L__stack_usage = 6
 396 0148 9A83      		std Y+2,r25
 397 014a 8983      		std Y+1,r24
 398 014c 7C83      		std Y+4,r23
 399 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 400               		.loc 4 91 0
 401 0150 8981      		ldd r24,Y+1
 402 0152 9A81      		ldd r25,Y+2
 403 0154 9093 0000 		sts stdio_base+1,r25
 404 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 405               		.loc 4 92 0
 406 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 407 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 408 0160 9093 0000 		sts ptr_put+1,r25
 409 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 410               		.loc 4 93 0
 411 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 412 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 413 016c 9093 0000 		sts ptr_get+1,r25
 414 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 415               		.loc 4 95 0
 416 0174 2B81      		ldd r18,Y+3
 417 0176 3C81      		ldd r19,Y+4
 418 0178 8981      		ldd r24,Y+1
 419 017a 9A81      		ldd r25,Y+2
 420 017c B901      		movw r22,r18
 421 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 422               		.loc 4 107 0
 423 0182 60E0      		ldi r22,lo8(gs(_read))
 424 0184 70E0      		ldi r23,hi8(gs(_read))
 425 0186 80E0      		ldi r24,lo8(gs(_write))
 426 0188 90E0      		ldi r25,hi8(gs(_write))
 427 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 428               		.loc 4 120 0
 429 018e 0000      		nop
 430               	/* epilogue start */
 431 0190 0F90      		pop __tmp_reg__
 432 0192 0F90      		pop __tmp_reg__
 433 0194 0F90      		pop __tmp_reg__
 434 0196 0F90      		pop __tmp_reg__
 435 0198 DF91      		pop r29
 436 019a CF91      		pop r28
 437 019c 0895      		ret
 438               		.cfi_endproc
 439               	.LFE107:
 442               	macsc_read32:
 443               	.LFB108:
 444               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 445               		.loc 5 120 0
 446               		.cfi_startproc
 447 019e CF93      		push r28
 448               	.LCFI26:
 449               		.cfi_def_cfa_offset 3
 450               		.cfi_offset 28, -2
 451 01a0 DF93      		push r29
 452               	.LCFI27:
 453               		.cfi_def_cfa_offset 4
 454               		.cfi_offset 29, -3
 455 01a2 CDB7      		in r28,__SP_L__
 456 01a4 DEB7      		in r29,__SP_H__
 457               	.LCFI28:
 458               		.cfi_def_cfa_register 28
 459 01a6 2C97      		sbiw r28,12
 460               	.LCFI29:
 461               		.cfi_def_cfa_offset 16
 462 01a8 0FB6      		in __tmp_reg__,__SREG__
 463 01aa F894      		cli
 464 01ac DEBF      		out __SP_H__,r29
 465 01ae 0FBE      		out __SREG__,__tmp_reg__
 466 01b0 CDBF      		out __SP_L__,r28
 467               	/* prologue: function */
 468               	/* frame size = 12 */
 469               	/* stack size = 14 */
 470               	.L__stack_usage = 14
 471 01b2 9E83      		std Y+6,r25
 472 01b4 8D83      		std Y+5,r24
 473 01b6 7887      		std Y+8,r23
 474 01b8 6F83      		std Y+7,r22
 475 01ba 5A87      		std Y+10,r21
 476 01bc 4987      		std Y+9,r20
 477 01be 3C87      		std Y+12,r19
 478 01c0 2B87      		std Y+11,r18
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 479               		.loc 5 127 0
 480 01c2 8B85      		ldd r24,Y+11
 481 01c4 9C85      		ldd r25,Y+12
 482 01c6 FC01      		movw r30,r24
 483 01c8 8081      		ld r24,Z
 484 01ca 8983      		std Y+1,r24
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 485               		.loc 5 128 0
 486 01cc 8985      		ldd r24,Y+9
 487 01ce 9A85      		ldd r25,Y+10
 488 01d0 FC01      		movw r30,r24
 489 01d2 8081      		ld r24,Z
 490 01d4 8A83      		std Y+2,r24
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 491               		.loc 5 129 0
 492 01d6 8F81      		ldd r24,Y+7
 493 01d8 9885      		ldd r25,Y+8
 494 01da FC01      		movw r30,r24
 495 01dc 8081      		ld r24,Z
 496 01de 8B83      		std Y+3,r24
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 497               		.loc 5 130 0
 498 01e0 8D81      		ldd r24,Y+5
 499 01e2 9E81      		ldd r25,Y+6
 500 01e4 FC01      		movw r30,r24
 501 01e6 8081      		ld r24,Z
 502 01e8 8C83      		std Y+4,r24
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 503               		.loc 5 132 0
 504 01ea 8981      		ldd r24,Y+1
 505 01ec 9A81      		ldd r25,Y+2
 506 01ee AB81      		ldd r26,Y+3
 507 01f0 BC81      		ldd r27,Y+4
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 508               		.loc 5 133 0
 509 01f2 BC01      		movw r22,r24
 510 01f4 CD01      		movw r24,r26
 511               	/* epilogue start */
 512 01f6 2C96      		adiw r28,12
 513 01f8 0FB6      		in __tmp_reg__,__SREG__
 514 01fa F894      		cli
 515 01fc DEBF      		out __SP_H__,r29
 516 01fe 0FBE      		out __SREG__,__tmp_reg__
 517 0200 CDBF      		out __SP_L__,r28
 518 0202 DF91      		pop r29
 519 0204 CF91      		pop r28
 520 0206 0895      		ret
 521               		.cfi_endproc
 522               	.LFE108:
 525               	macsc_write_count:
 526               	.LFB113:
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 527               		.loc 5 345 0
 528               		.cfi_startproc
 529 0208 CF93      		push r28
 530               	.LCFI30:
 531               		.cfi_def_cfa_offset 3
 532               		.cfi_offset 28, -2
 533 020a DF93      		push r29
 534               	.LCFI31:
 535               		.cfi_def_cfa_offset 4
 536               		.cfi_offset 29, -3
 537 020c CDB7      		in r28,__SP_L__
 538 020e DEB7      		in r29,__SP_H__
 539               	.LCFI32:
 540               		.cfi_def_cfa_register 28
 541 0210 2897      		sbiw r28,8
 542               	.LCFI33:
 543               		.cfi_def_cfa_offset 12
 544 0212 0FB6      		in __tmp_reg__,__SREG__
 545 0214 F894      		cli
 546 0216 DEBF      		out __SP_H__,r29
 547 0218 0FBE      		out __SREG__,__tmp_reg__
 548 021a CDBF      		out __SP_L__,r28
 549               	/* prologue: function */
 550               	/* frame size = 8 */
 551               	/* stack size = 10 */
 552               	.L__stack_usage = 10
 553 021c 6D83      		std Y+5,r22
 554 021e 7E83      		std Y+6,r23
 555 0220 8F83      		std Y+7,r24
 556 0222 9887      		std Y+8,r25
 557               	.LBB2:
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 558               		.loc 5 346 0
 559 0224 8D81      		ldd r24,Y+5
 560 0226 9E81      		ldd r25,Y+6
 561 0228 AF81      		ldd r26,Y+7
 562 022a B885      		ldd r27,Y+8
 563 022c 8983      		std Y+1,r24
 564 022e 9A83      		std Y+2,r25
 565 0230 AB83      		std Y+3,r26
 566 0232 BC83      		std Y+4,r27
 567 0234 84EE      		ldi r24,lo8(-28)
 568 0236 90E0      		ldi r25,0
 569 0238 2C81      		ldd r18,Y+4
 570 023a FC01      		movw r30,r24
 571 023c 2083      		st Z,r18
 572 023e 83EE      		ldi r24,lo8(-29)
 573 0240 90E0      		ldi r25,0
 574 0242 2B81      		ldd r18,Y+3
 575 0244 FC01      		movw r30,r24
 576 0246 2083      		st Z,r18
 577 0248 82EE      		ldi r24,lo8(-30)
 578 024a 90E0      		ldi r25,0
 579 024c 2A81      		ldd r18,Y+2
 580 024e FC01      		movw r30,r24
 581 0250 2083      		st Z,r18
 582 0252 81EE      		ldi r24,lo8(-31)
 583 0254 90E0      		ldi r25,0
 584 0256 2981      		ldd r18,Y+1
 585 0258 FC01      		movw r30,r24
 586 025a 2083      		st Z,r18
 587               	.LBE2:
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 588               		.loc 5 347 0
 589 025c 0000      		nop
 590               	/* epilogue start */
 591 025e 2896      		adiw r28,8
 592 0260 0FB6      		in __tmp_reg__,__SREG__
 593 0262 F894      		cli
 594 0264 DEBF      		out __SP_H__,r29
 595 0266 0FBE      		out __SREG__,__tmp_reg__
 596 0268 CDBF      		out __SP_L__,r28
 597 026a DF91      		pop r29
 598 026c CF91      		pop r28
 599 026e 0895      		ret
 600               		.cfi_endproc
 601               	.LFE113:
 604               	macsc_read_count:
 605               	.LFB114:
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 606               		.loc 5 355 0
 607               		.cfi_startproc
 608 0270 CF93      		push r28
 609               	.LCFI34:
 610               		.cfi_def_cfa_offset 3
 611               		.cfi_offset 28, -2
 612 0272 DF93      		push r29
 613               	.LCFI35:
 614               		.cfi_def_cfa_offset 4
 615               		.cfi_offset 29, -3
 616 0274 CDB7      		in r28,__SP_L__
 617 0276 DEB7      		in r29,__SP_H__
 618               	.LCFI36:
 619               		.cfi_def_cfa_register 28
 620               	/* prologue: function */
 621               	/* frame size = 0 */
 622               	/* stack size = 2 */
 623               	.L__stack_usage = 2
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 624               		.loc 5 356 0
 625 0278 21EE      		ldi r18,lo8(-31)
 626 027a 30E0      		ldi r19,0
 627 027c 42EE      		ldi r20,lo8(-30)
 628 027e 50E0      		ldi r21,0
 629 0280 63EE      		ldi r22,lo8(-29)
 630 0282 70E0      		ldi r23,0
 631 0284 84EE      		ldi r24,lo8(-28)
 632 0286 90E0      		ldi r25,0
 633 0288 0E94 0000 		call macsc_read32
 634 028c DC01      		movw r26,r24
 635 028e CB01      		movw r24,r22
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 636               		.loc 5 357 0
 637 0290 BC01      		movw r22,r24
 638 0292 CD01      		movw r24,r26
 639               	/* epilogue start */
 640 0294 DF91      		pop r29
 641 0296 CF91      		pop r28
 642 0298 0895      		ret
 643               		.cfi_endproc
 644               	.LFE114:
 647               	macsc_enable_manual_bts:
 648               	.LFB121:
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 649               		.loc 5 444 0
 650               		.cfi_startproc
 651 029a CF93      		push r28
 652               	.LCFI37:
 653               		.cfi_def_cfa_offset 3
 654               		.cfi_offset 28, -2
 655 029c DF93      		push r29
 656               	.LCFI38:
 657               		.cfi_def_cfa_offset 4
 658               		.cfi_offset 29, -3
 659 029e CDB7      		in r28,__SP_L__
 660 02a0 DEB7      		in r29,__SP_H__
 661               	.LCFI39:
 662               		.cfi_def_cfa_register 28
 663               	/* prologue: function */
 664               	/* frame size = 0 */
 665               	/* stack size = 2 */
 666               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 667               		.loc 5 445 0
 668 02a2 8CED      		ldi r24,lo8(-36)
 669 02a4 90E0      		ldi r25,0
 670 02a6 2CED      		ldi r18,lo8(-36)
 671 02a8 30E0      		ldi r19,0
 672 02aa F901      		movw r30,r18
 673 02ac 2081      		ld r18,Z
 674 02ae 2064      		ori r18,lo8(64)
 675 02b0 FC01      		movw r30,r24
 676 02b2 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 677               		.loc 5 446 0
 678 02b4 8CED      		ldi r24,lo8(-36)
 679 02b6 90E0      		ldi r25,0
 680 02b8 2CED      		ldi r18,lo8(-36)
 681 02ba 30E0      		ldi r19,0
 682 02bc F901      		movw r30,r18
 683 02be 2081      		ld r18,Z
 684 02c0 277F      		andi r18,lo8(-9)
 685 02c2 FC01      		movw r30,r24
 686 02c4 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 687               		.loc 5 447 0
 688 02c6 0000      		nop
 689               	/* epilogue start */
 690 02c8 DF91      		pop r29
 691 02ca CF91      		pop r28
 692 02cc 0895      		ret
 693               		.cfi_endproc
 694               	.LFE121:
 696               	.global	appState
 697               		.section	.bss.appState,"aw",@nobits
 700               	appState:
 701 0000 00        		.zero	1
 702               		.section	.bss.msgReq,"aw",@nobits
 705               	msgReq:
 706 0000 0000 0000 		.zero	20
 706      0000 0000 
 706      0000 0000 
 706      0000 0000 
 706      0000 0000 
 707               		.section	.bss.PanId,"aw",@nobits
 710               	PanId:
 711 0000 00        		.zero	1
 712               		.section	.rodata
 713               	.LC1:
 714 0000 0A52 4551 		.string	"\nREQ %d"
 714      2025 6400 
 715               		.text
 716               	.global	appSendData
 718               	appSendData:
 719               	.LFB130:
 720               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 721               		.loc 6 64 0
 722               		.cfi_startproc
 723 02ce CF93      		push r28
 724               	.LCFI40:
 725               		.cfi_def_cfa_offset 3
 726               		.cfi_offset 28, -2
 727 02d0 DF93      		push r29
 728               	.LCFI41:
 729               		.cfi_def_cfa_offset 4
 730               		.cfi_offset 29, -3
 731 02d2 CDB7      		in r28,__SP_L__
 732 02d4 DEB7      		in r29,__SP_H__
 733               	.LCFI42:
 734               		.cfi_def_cfa_register 28
 735               	/* prologue: function */
 736               	/* frame size = 0 */
 737               	/* stack size = 2 */
 738               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 739               		.loc 6 65 0
 740 02d6 8091 0000 		lds r24,msgReq+9
 741 02da 9091 0000 		lds r25,msgReq+9+1
 742 02de 892B      		or r24,r25
 743 02e0 01F0      		breq .L22
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 744               		.loc 6 67 0
 745 02e2 80E0      		ldi r24,lo8(msgReq)
 746 02e4 90E0      		ldi r25,hi8(msgReq)
 747 02e6 0E94 0000 		call NWK_DataReq
  68:ServerLLDN.c  **** 		#if PRINT
  69:ServerLLDN.c  **** 		printf("\nREQ %d",msgReq.options);
 748               		.loc 6 69 0
 749 02ea 8091 0000 		lds r24,msgReq+9
 750 02ee 9091 0000 		lds r25,msgReq+9+1
 751 02f2 292F      		mov r18,r25
 752 02f4 2F93      		push r18
 753 02f6 8F93      		push r24
 754 02f8 80E0      		ldi r24,lo8(.LC1)
 755 02fa 90E0      		ldi r25,hi8(.LC1)
 756 02fc 892F      		mov r24,r25
 757 02fe 8F93      		push r24
 758 0300 80E0      		ldi r24,lo8(.LC1)
 759 0302 90E0      		ldi r25,hi8(.LC1)
 760 0304 8F93      		push r24
 761 0306 0E94 0000 		call printf
 762 030a 0F90      		pop __tmp_reg__
 763 030c 0F90      		pop __tmp_reg__
 764 030e 0F90      		pop __tmp_reg__
 765 0310 0F90      		pop __tmp_reg__
 766               	.L22:
  70:ServerLLDN.c  **** 		#endif
  71:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  72:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(0);
  73:ServerLLDN.c  **** 	#endif
  74:ServerLLDN.c  **** 	}
  75:ServerLLDN.c  **** }
 767               		.loc 6 75 0
 768 0312 0000      		nop
 769               	/* epilogue start */
 770 0314 DF91      		pop r29
 771 0316 CF91      		pop r28
 772 0318 0895      		ret
 773               		.cfi_endproc
 774               	.LFE130:
 776               	.global	appPanState
 777               		.section	.data.appPanState,"aw",@progbits
 780               	appPanState:
 781 0000 01        		.byte	1
 782               		.comm	nodes_info_arr,3700,1
 783               	.global	config_request_frame
 784               		.section	.data.config_request_frame,"aw",@progbits
 787               	config_request_frame:
 788 0000 0F        		.byte	15
 789 0001 00        		.byte	0
 790 0002 0F        		.byte	15
 791 0003 0000      		.zero	2
 792 0005 80        		.byte	128
 793               	.global	conf_req_list
 794               		.section	.bss.conf_req_list,"aw",@nobits
 797               	conf_req_list:
 798 0000 0000      		.zero	2
 799               		.comm	ACKFrame,33,1
 800               		.comm	ACKFrame_aux,33,1
 801               	.global	ACKFrame_size
 802               		.section	.bss.ACKFrame_size,"aw",@nobits
 805               	ACKFrame_size:
 806 0000 0000      		.zero	2
 807               	.global	beaconInterval
 808               		.section	.bss.beaconInterval,"aw",@nobits
 811               	beaconInterval:
 812 0000 0000 0000 		.zero	4
 813               	.global	beaconInterval_association
 814               		.section	.bss.beaconInterval_association,"aw",@nobits
 817               	beaconInterval_association:
 818 0000 0000 0000 		.zero	4
 819               		.section	.bss.tmrDelay,"aw",@nobits
 822               	tmrDelay:
 823 0000 0000 0000 		.zero	13
 823      0000 0000 
 823      0000 0000 
 823      00
 824               	.global	assTimeSlot
 825               		.section	.bss.assTimeSlot,"aw",@nobits
 828               	assTimeSlot:
 829 0000 0000      		.zero	2
 830               	.global	timeslot_counter
 831               		.section	.bss.timeslot_counter,"aw",@nobits
 834               	timeslot_counter:
 835 0000 00        		.zero	1
 836               	.global	counter_associados
 837               		.section	.bss.counter_associados,"aw",@nobits
 840               	counter_associados:
 841 0000 0000      		.zero	2
 842               	.global	cycles_counter
 843               		.section	.data.cycles_counter,"aw",@progbits
 846               	cycles_counter:
 847 0000 01        		.byte	1
 848               	.global	association_request
 849               		.section	.bss.association_request,"aw",@nobits
 852               	association_request:
 853 0000 00        		.zero	1
 854               		.comm	msg_info_array,6600,1
 855               	.global	size_msg_info
 856               		.section	.bss.size_msg_info,"aw",@nobits
 859               	size_msg_info:
 860 0000 0000      		.zero	2
 861               	.global	data_received
 862               		.section	.bss.data_received,"aw",@nobits
 865               	data_received:
 866 0000 00        		.zero	1
 867               	.global	PLR
 868               		.section	.bss.PLR,"aw",@nobits
 871               	PLR:
 872 0000 0000 0000 		.zero	4
 873               	.global	PER
 874               		.section	.bss.PER,"aw",@nobits
 877               	PER:
 878 0000 0000 0000 		.zero	4
 879               		.comm	retransmit_ts_array,32,1
 880               	.global	retransmit_ts_array_counter
 881               		.section	.bss.retransmit_ts_array_counter,"aw",@nobits
 884               	retransmit_ts_array_counter:
 885 0000 0000      		.zero	2
 886               	.global	counter_delay_msg
 887               		.section	.bss.counter_delay_msg,"aw",@nobits
 890               	counter_delay_msg:
 891 0000 0000      		.zero	2
 892               	.global	cmp_value_start_superframe
 893               		.section	.bss.cmp_value_start_superframe,"aw",@nobits
 896               	cmp_value_start_superframe:
 897 0000 0000 0000 		.zero	4
 898               		.section	.data.msgReqGACK,"aw",@progbits
 901               	msgReqGACK:
 902 0000 0000 0000 		.zero	5
 902      00
 903 0005 0000      		.word	0
 904 0007 00        		.byte	0
 905 0008 00        		.byte	0
 906 0009 0040      		.word	16384
 907 000b 0000      		.zero	2
 908 000d 0000      		.word	ACKFrame
 909 000f 0000 0000 		.zero	5
 909      00
 910               		.text
 912               	tmrDelayHandler:
 913               	.LFB131:
  76:ServerLLDN.c  **** 
  77:ServerLLDN.c  **** #if APP_COORDINATOR
  78:ServerLLDN.c  **** 
  79:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  80:ServerLLDN.c  **** 	
  81:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  82:ServerLLDN.c  **** 	
  83:ServerLLDN.c  **** 	/* Configuration Request Frames */
  84:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  85:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  86:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  87:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  88:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  89:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  90:ServerLLDN.c  **** 
  91:ServerLLDN.c  **** 
  92:ServerLLDN.c  **** // 	for(int i = 0; i < 32; i++)
  93:ServerLLDN.c  **** // 	{
  94:ServerLLDN.c  **** // 		ACKFrame.ackFlags[i] = 0;
  95:ServerLLDN.c  **** // 		retransmit_ts_array[i] = 0;
  96:ServerLLDN.c  **** // 	}
  97:ServerLLDN.c  **** // 	retransmit_ts_array_counter = 0;
  98:ServerLLDN.c  **** // 	ACKFrame_size = 0;
  99:ServerLLDN.c  **** // 	
 100:ServerLLDN.c  **** // 											 					
 101:ServerLLDN.c  **** // 	msgReq.dstAddr		= 0;
 102:ServerLLDN.c  **** // 	msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 103:ServerLLDN.c  **** // 	msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 104:ServerLLDN.c  **** // 	msgReq.options		= NWK_OPT_LLDN_ACK;
 105:ServerLLDN.c  **** // 	msgReq.data	= (uint8_t *)&ACKFrame;
 106:ServerLLDN.c  **** // 	m_
 107:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
 108:ServerLLDN.c  **** 
 109:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
 110:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	
 111:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame_aux;
 112:ServerLLDN.c  **** 	
 113:ServerLLDN.c  **** 	int ACKFrame_size = 0;
 114:ServerLLDN.c  **** 	
 115:ServerLLDN.c  **** 
 116:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
 117:ServerLLDN.c  **** 	float beaconInterval_association = 0;
 118:ServerLLDN.c  **** 	
 119:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
 120:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
 121:ServerLLDN.c  **** 	 */
 122:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 123:ServerLLDN.c  **** 	
 124:ServerLLDN.c  **** 	/*  Control variables for testing */	
 125:ServerLLDN.c  **** 	int assTimeSlot = 0;
 126:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 127:ServerLLDN.c  **** 
 128:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 129:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 130:ServerLLDN.c  **** 
 131:ServerLLDN.c  **** 	bool association_request = false;
 132:ServerLLDN.c  **** 
 133:ServerLLDN.c  **** 	/* data related variables */
 134:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 135:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 136:ServerLLDN.c  **** 	bool data_received = false;	
 137:ServerLLDN.c  **** 	float PLR = 0;
 138:ServerLLDN.c  **** 	float PER = 0;
 139:ServerLLDN.c  **** 	uint8_t retransmit_ts_array[32];
 140:ServerLLDN.c  **** 	int retransmit_ts_array_counter = 0;
 141:ServerLLDN.c  **** 	
 142:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 143:ServerLLDN.c  **** 	uint32_t cmp_value_start_superframe = 0;
 144:ServerLLDN.c  **** 	
 145:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqGACK = { .dstAddr = 0,
 146:ServerLLDN.c  **** 										.dstEndpoint = APP_BEACON_ENDPOINT,
 147:ServerLLDN.c  **** 										.srcEndpoint = APP_BEACON_ENDPOINT,
 148:ServerLLDN.c  **** 										.options = NWK_OPT_LLDN_ACK,
 149:ServerLLDN.c  **** 										.data = (uint8_t*)&ACKFrame};
 150:ServerLLDN.c  **** 
 151:ServerLLDN.c  **** 	
 152:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 153:ServerLLDN.c  **** 	{
 914               		.loc 6 153 0
 915               		.cfi_startproc
 916 031a CF93      		push r28
 917               	.LCFI43:
 918               		.cfi_def_cfa_offset 3
 919               		.cfi_offset 28, -2
 920 031c DF93      		push r29
 921               	.LCFI44:
 922               		.cfi_def_cfa_offset 4
 923               		.cfi_offset 29, -3
 924 031e 00D0      		rcall .
 925               	.LCFI45:
 926               		.cfi_def_cfa_offset 6
 927 0320 CDB7      		in r28,__SP_L__
 928 0322 DEB7      		in r29,__SP_H__
 929               	.LCFI46:
 930               		.cfi_def_cfa_register 28
 931               	/* prologue: function */
 932               	/* frame size = 2 */
 933               	/* stack size = 4 */
 934               	.L__stack_usage = 4
 935 0324 9A83      		std Y+2,r25
 936 0326 8983      		std Y+1,r24
 154:ServerLLDN.c  **** 		#if PRINT
 155:ServerLLDN.c  **** 		// printf("\ndelay handler");
 156:ServerLLDN.c  **** 		#endif
 157:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 937               		.loc 6 157 0
 938 0328 82E0      		ldi r24,lo8(2)
 939 032a 8093 0000 		sts appState,r24
 158:ServerLLDN.c  **** 	}
 940               		.loc 6 158 0
 941 032e 0000      		nop
 942               	/* epilogue start */
 943 0330 0F90      		pop __tmp_reg__
 944 0332 0F90      		pop __tmp_reg__
 945 0334 DF91      		pop r29
 946 0336 CF91      		pop r28
 947 0338 0895      		ret
 948               		.cfi_endproc
 949               	.LFE131:
 952               	lldn_server_beacon:
 953               	.LFB132:
 159:ServerLLDN.c  **** 	
 160:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 161:ServerLLDN.c  **** 	{
 954               		.loc 6 161 0
 955               		.cfi_startproc
 956 033a CF93      		push r28
 957               	.LCFI47:
 958               		.cfi_def_cfa_offset 3
 959               		.cfi_offset 28, -2
 960 033c DF93      		push r29
 961               	.LCFI48:
 962               		.cfi_def_cfa_offset 4
 963               		.cfi_offset 29, -3
 964 033e CDB7      		in r28,__SP_L__
 965 0340 DEB7      		in r29,__SP_H__
 966               	.LCFI49:
 967               		.cfi_def_cfa_register 28
 968               	/* prologue: function */
 969               	/* frame size = 0 */
 970               	/* stack size = 2 */
 971               	.L__stack_usage = 2
 162:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 972               		.loc 6 162 0
 973 0342 0E94 0000 		call macsc_enable_manual_bts
 163:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 974               		.loc 6 163 0
 975 0346 82E0      		ldi r24,lo8(2)
 976 0348 8093 0000 		sts appState,r24
 164:ServerLLDN.c  **** 	}
 977               		.loc 6 164 0
 978 034c 0000      		nop
 979               	/* epilogue start */
 980 034e DF91      		pop r29
 981 0350 CF91      		pop r28
 982 0352 0895      		ret
 983               		.cfi_endproc
 984               	.LFE132:
 987               	downlink_delay_handler:
 988               	.LFB133:
 165:ServerLLDN.c  **** 	
 166:ServerLLDN.c  **** 
 167:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 168:ServerLLDN.c  **** 	{
 989               		.loc 6 168 0
 990               		.cfi_startproc
 991 0354 CF93      		push r28
 992               	.LCFI50:
 993               		.cfi_def_cfa_offset 3
 994               		.cfi_offset 28, -2
 995 0356 DF93      		push r29
 996               	.LCFI51:
 997               		.cfi_def_cfa_offset 4
 998               		.cfi_offset 29, -3
 999 0358 CDB7      		in r28,__SP_L__
 1000 035a DEB7      		in r29,__SP_H__
 1001               	.LCFI52:
 1002               		.cfi_def_cfa_register 28
 1003               	/* prologue: function */
 1004               	/* frame size = 0 */
 1005               	/* stack size = 2 */
 1006               	.L__stack_usage = 2
 169:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 1007               		.loc 6 169 0
 1008 035c 8091 0000 		lds r24,msgReq+9
 1009 0360 9091 0000 		lds r25,msgReq+9+1
 1010 0364 8115      		cp r24,__zero_reg__
 1011 0366 9048      		sbci r25,-128
 1012 0368 01F4      		brne .L27
 170:ServerLLDN.c  **** 		{
 171:ServerLLDN.c  **** 			counter_delay_msg++;
 1013               		.loc 6 171 0
 1014 036a 8091 0000 		lds r24,counter_delay_msg
 1015 036e 9091 0000 		lds r25,counter_delay_msg+1
 1016 0372 0196      		adiw r24,1
 1017 0374 9093 0000 		sts counter_delay_msg+1,r25
 1018 0378 8093 0000 		sts counter_delay_msg,r24
 172:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 1019               		.loc 6 172 0
 1020 037c 82E0      		ldi r24,lo8(2)
 1021 037e 8093 0000 		sts appState,r24
 1022               	.L27:
 173:ServerLLDN.c  **** 		}
 174:ServerLLDN.c  **** 	}
 1023               		.loc 6 174 0
 1024 0382 0000      		nop
 1025               	/* epilogue start */
 1026 0384 DF91      		pop r29
 1027 0386 CF91      		pop r28
 1028 0388 0895      		ret
 1029               		.cfi_endproc
 1030               	.LFE133:
 1033               	end_of_association_delay_handler:
 1034               	.LFB134:
 175:ServerLLDN.c  **** 
 176:ServerLLDN.c  **** 	static void end_of_association_delay_handler(void)
 177:ServerLLDN.c  **** 	{
 1035               		.loc 6 177 0
 1036               		.cfi_startproc
 1037 038a CF93      		push r28
 1038               	.LCFI53:
 1039               		.cfi_def_cfa_offset 3
 1040               		.cfi_offset 28, -2
 1041 038c DF93      		push r29
 1042               	.LCFI54:
 1043               		.cfi_def_cfa_offset 4
 1044               		.cfi_offset 29, -3
 1045 038e CDB7      		in r28,__SP_L__
 1046 0390 DEB7      		in r29,__SP_H__
 1047               	.LCFI55:
 1048               		.cfi_def_cfa_register 28
 1049               	/* prologue: function */
 1050               	/* frame size = 0 */
 1051               	/* stack size = 2 */
 1052               	.L__stack_usage = 2
 178:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 1053               		.loc 6 178 0
 1054 0392 83E0      		ldi r24,lo8(3)
 1055 0394 8093 0000 		sts appState,r24
 179:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 1056               		.loc 6 179 0
 1057 0398 89E0      		ldi r24,lo8(9)
 1058 039a 8093 0000 		sts appPanState,r24
 180:ServerLLDN.c  **** 	}
 1059               		.loc 6 180 0
 1060 039e 0000      		nop
 1061               	/* epilogue start */
 1062 03a0 DF91      		pop r29
 1063 03a2 CF91      		pop r28
 1064 03a4 0895      		ret
 1065               		.cfi_endproc
 1066               	.LFE134:
 1069               	addToAckArray:
 1070               	.LFB135:
 181:ServerLLDN.c  **** 	
 182:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 183:ServerLLDN.c  **** 	static void teste_handler(void)
 184:ServerLLDN.c  **** 	{
 185:ServerLLDN.c  **** 		if(msgReq.options)
 186:ServerLLDN.c  **** 			// printf("\n***TIMESLOT****");
 187:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 188:ServerLLDN.c  **** 	}
 189:ServerLLDN.c  **** 	#endif
 190:ServerLLDN.c  **** 	
 191:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 192:ServerLLDN.c  **** 	{	
 1071               		.loc 6 192 0
 1072               		.cfi_startproc
 1073 03a6 CF93      		push r28
 1074               	.LCFI56:
 1075               		.cfi_def_cfa_offset 3
 1076               		.cfi_offset 28, -2
 1077 03a8 DF93      		push r29
 1078               	.LCFI57:
 1079               		.cfi_def_cfa_offset 4
 1080               		.cfi_offset 29, -3
 1081 03aa 00D0      		rcall .
 1082 03ac 00D0      		rcall .
 1083 03ae 1F92      		push __zero_reg__
 1084               	.LCFI58:
 1085               		.cfi_def_cfa_offset 9
 1086 03b0 CDB7      		in r28,__SP_L__
 1087 03b2 DEB7      		in r29,__SP_H__
 1088               	.LCFI59:
 1089               		.cfi_def_cfa_register 28
 1090               	/* prologue: function */
 1091               	/* frame size = 5 */
 1092               	/* stack size = 7 */
 1093               	.L__stack_usage = 7
 1094 03b4 8D83      		std Y+5,r24
 193:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 1095               		.loc 6 193 0
 1096 03b6 8D81      		ldd r24,Y+5
 1097 03b8 8695      		lsr r24
 1098 03ba 8695      		lsr r24
 1099 03bc 8695      		lsr r24
 1100 03be 882F      		mov r24,r24
 1101 03c0 90E0      		ldi r25,0
 1102 03c2 9A83      		std Y+2,r25
 1103 03c4 8983      		std Y+1,r24
 194:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 1104               		.loc 6 194 0
 1105 03c6 8D81      		ldd r24,Y+5
 1106 03c8 882F      		mov r24,r24
 1107 03ca 90E0      		ldi r25,0
 1108 03cc 8770      		andi r24,7
 1109 03ce 9927      		clr r25
 1110 03d0 28E0      		ldi r18,lo8(8)
 1111 03d2 30E0      		ldi r19,0
 1112 03d4 A901      		movw r20,r18
 1113 03d6 481B      		sub r20,r24
 1114 03d8 590B      		sbc r21,r25
 1115 03da CA01      		movw r24,r20
 1116 03dc 9C83      		std Y+4,r25
 1117 03de 8B83      		std Y+3,r24
 195:ServerLLDN.c  **** 		
 196:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1118               		.loc 6 196 0
 1119 03e0 8981      		ldd r24,Y+1
 1120 03e2 9A81      		ldd r25,Y+2
 1121 03e4 8050      		subi r24,lo8(-(ACKFrame+1))
 1122 03e6 9040      		sbci r25,hi8(-(ACKFrame+1))
 1123 03e8 FC01      		movw r30,r24
 1124 03ea 8081      		ld r24,Z
 1125 03ec 882F      		mov r24,r24
 1126 03ee 90E0      		ldi r25,0
 1127 03f0 0B80      		ldd r0,Y+3
 1128 03f2 00C0      		rjmp 2f
 1129               		1:
 1130 03f4 9595      		asr r25
 1131 03f6 8795      		ror r24
 1132               		2:
 1133 03f8 0A94      		dec r0
 1134 03fa 02F4      		brpl 1b
 1135 03fc 8170      		andi r24,1
 1136 03fe 9927      		clr r25
 1137 0400 892B      		or r24,r25
 1138 0402 01F0      		breq .L30
 197:ServerLLDN.c  **** 		{
 198:ServerLLDN.c  **** 			// printf("\nAddr rep %d", addres);
 199:ServerLLDN.c  **** 			return false;
 1139               		.loc 6 199 0
 1140 0404 80E0      		ldi r24,0
 1141 0406 00C0      		rjmp .L31
 1142               	.L30:
 200:ServerLLDN.c  **** 		}
 201:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 1143               		.loc 6 201 0
 1144 0408 8981      		ldd r24,Y+1
 1145 040a 9A81      		ldd r25,Y+2
 1146 040c 8050      		subi r24,lo8(-(ACKFrame+1))
 1147 040e 9040      		sbci r25,hi8(-(ACKFrame+1))
 1148 0410 FC01      		movw r30,r24
 1149 0412 8081      		ld r24,Z
 1150 0414 282F      		mov r18,r24
 1151 0416 81E0      		ldi r24,lo8(1)
 1152 0418 90E0      		ldi r25,0
 1153 041a 0B80      		ldd r0,Y+3
 1154 041c 00C0      		rjmp 2f
 1155               		1:
 1156 041e 880F      		lsl r24
 1157 0420 991F      		rol r25
 1158               		2:
 1159 0422 0A94      		dec r0
 1160 0424 02F4      		brpl 1b
 1161 0426 822B      		or r24,r18
 1162 0428 282F      		mov r18,r24
 1163 042a 8981      		ldd r24,Y+1
 1164 042c 9A81      		ldd r25,Y+2
 1165 042e 8050      		subi r24,lo8(-(ACKFrame+1))
 1166 0430 9040      		sbci r25,hi8(-(ACKFrame+1))
 1167 0432 FC01      		movw r30,r24
 1168 0434 2083      		st Z,r18
 202:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 1169               		.loc 6 202 0
 1170 0436 8981      		ldd r24,Y+1
 1171 0438 9A81      		ldd r25,Y+2
 1172 043a 9C01      		movw r18,r24
 1173 043c 2F5F      		subi r18,-1
 1174 043e 3F4F      		sbci r19,-1
 1175 0440 8091 0000 		lds r24,ACKFrame_size
 1176 0444 9091 0000 		lds r25,ACKFrame_size+1
 1177 0448 8217      		cp r24,r18
 1178 044a 9307      		cpc r25,r19
 1179 044c 04F4      		brge .L32
 203:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 1180               		.loc 6 203 0
 1181 044e 8981      		ldd r24,Y+1
 1182 0450 9A81      		ldd r25,Y+2
 1183 0452 0196      		adiw r24,1
 1184 0454 9093 0000 		sts ACKFrame_size+1,r25
 1185 0458 8093 0000 		sts ACKFrame_size,r24
 1186               	.L32:
 204:ServerLLDN.c  **** 		
 205:ServerLLDN.c  **** 		return true;
 1187               		.loc 6 205 0
 1188 045c 81E0      		ldi r24,lo8(1)
 1189               	.L31:
 1190               	/* epilogue start */
 206:ServerLLDN.c  **** 	}
 1191               		.loc 6 206 0
 1192 045e 0F90      		pop __tmp_reg__
 1193 0460 0F90      		pop __tmp_reg__
 1194 0462 0F90      		pop __tmp_reg__
 1195 0464 0F90      		pop __tmp_reg__
 1196 0466 0F90      		pop __tmp_reg__
 1197 0468 DF91      		pop r29
 1198 046a CF91      		pop r28
 1199 046c 0895      		ret
 1200               		.cfi_endproc
 1201               	.LFE135:
 1204               	addConfRequestArray:
 1205               	.LFB136:
 207:ServerLLDN.c  **** 
 208:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 209:ServerLLDN.c  **** 	{
 1206               		.loc 6 209 0
 1207               		.cfi_startproc
 1208 046e CF93      		push r28
 1209               	.LCFI60:
 1210               		.cfi_def_cfa_offset 3
 1211               		.cfi_offset 28, -2
 1212 0470 DF93      		push r29
 1213               	.LCFI61:
 1214               		.cfi_def_cfa_offset 4
 1215               		.cfi_offset 29, -3
 1216 0472 00D0      		rcall .
 1217 0474 00D0      		rcall .
 1218 0476 1F92      		push __zero_reg__
 1219               	.LCFI62:
 1220               		.cfi_def_cfa_offset 9
 1221 0478 CDB7      		in r28,__SP_L__
 1222 047a DEB7      		in r29,__SP_H__
 1223               	.LCFI63:
 1224               		.cfi_def_cfa_register 28
 1225               	/* prologue: function */
 1226               	/* frame size = 5 */
 1227               	/* stack size = 7 */
 1228               	.L__stack_usage = 7
 1229 047c 9D83      		std Y+5,r25
 1230 047e 8C83      		std Y+4,r24
 210:ServerLLDN.c  **** 
 211:ServerLLDN.c  **** 		uint8_t i;
 212:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1231               		.loc 6 212 0
 1232 0480 1982      		std Y+1,__zero_reg__
 1233 0482 00C0      		rjmp .L34
 1234               	.L35:
 1235               		.loc 6 212 0 is_stmt 0 discriminator 3
 1236 0484 8981      		ldd r24,Y+1
 1237 0486 8F5F      		subi r24,lo8(-(1))
 1238 0488 8983      		std Y+1,r24
 1239               	.L34:
 1240               		.loc 6 212 0 discriminator 1
 1241 048a 8981      		ldd r24,Y+1
 1242 048c 282F      		mov r18,r24
 1243 048e 30E0      		ldi r19,0
 1244 0490 4AE4      		ldi r20,lo8(74)
 1245 0492 429F      		mul r20,r18
 1246 0494 C001      		movw r24,r0
 1247 0496 439F      		mul r20,r19
 1248 0498 900D      		add r25,r0
 1249 049a 1124      		clr __zero_reg__
 1250 049c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1251 049e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1252 04a0 FC01      		movw r30,r24
 1253 04a2 8081      		ld r24,Z
 1254 04a4 9181      		ldd r25,Z+1
 1255 04a6 892B      		or r24,r25
 1256 04a8 01F4      		brne .L35
 213:ServerLLDN.c  **** 		
 214:ServerLLDN.c  **** 		assTimeSlot++;
 1257               		.loc 6 214 0 is_stmt 1
 1258 04aa 8091 0000 		lds r24,assTimeSlot
 1259 04ae 9091 0000 		lds r25,assTimeSlot+1
 1260 04b2 0196      		adiw r24,1
 1261 04b4 9093 0000 		sts assTimeSlot+1,r25
 1262 04b8 8093 0000 		sts assTimeSlot,r24
 215:ServerLLDN.c  **** 	
 216:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1263               		.loc 6 216 0
 1264 04bc 8C81      		ldd r24,Y+4
 1265 04be 9D81      		ldd r25,Y+5
 1266 04c0 FC01      		movw r30,r24
 1267 04c2 8481      		ldd r24,Z+4
 1268 04c4 8F77      		andi r24,lo8(127)
 1269 04c6 282F      		mov r18,r24
 1270 04c8 30E0      		ldi r19,0
 1271 04ca 8091 0000 		lds r24,config_request_frame+5
 1272 04ce 8F77      		andi r24,lo8(127)
 1273 04d0 882F      		mov r24,r24
 1274 04d2 90E0      		ldi r25,0
 1275 04d4 8217      		cp r24,r18
 1276 04d6 9307      		cpc r25,r19
 1277 04d8 04F4      		brge .L36
 217:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1278               		.loc 6 217 0
 1279 04da 8C81      		ldd r24,Y+4
 1280 04dc 9D81      		ldd r25,Y+5
 1281 04de FC01      		movw r30,r24
 1282 04e0 8481      		ldd r24,Z+4
 1283 04e2 8F77      		andi r24,lo8(127)
 1284 04e4 8F77      		andi r24,lo8(127)
 1285 04e6 9091 0000 		lds r25,config_request_frame+5
 1286 04ea 9078      		andi r25,lo8(-128)
 1287 04ec 892B      		or r24,r25
 1288 04ee 8093 0000 		sts config_request_frame+5,r24
 1289               	.L36:
 218:ServerLLDN.c  **** 		
 219:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1290               		.loc 6 219 0
 1291 04f2 8981      		ldd r24,Y+1
 1292 04f4 282F      		mov r18,r24
 1293 04f6 30E0      		ldi r19,0
 1294 04f8 8C81      		ldd r24,Y+4
 1295 04fa 9D81      		ldd r25,Y+5
 1296 04fc FC01      		movw r30,r24
 1297 04fe 8481      		ldd r24,Z+4
 1298 0500 8F77      		andi r24,lo8(127)
 1299 0502 582F      		mov r21,r24
 1300 0504 4AE4      		ldi r20,lo8(74)
 1301 0506 429F      		mul r20,r18
 1302 0508 C001      		movw r24,r0
 1303 050a 439F      		mul r20,r19
 1304 050c 900D      		add r25,r0
 1305 050e 1124      		clr __zero_reg__
 1306 0510 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1307 0512 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1308 0514 FC01      		movw r30,r24
 1309 0516 5083      		st Z,r21
 220:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1310               		.loc 6 220 0
 1311 0518 8981      		ldd r24,Y+1
 1312 051a 482F      		mov r20,r24
 1313 051c 50E0      		ldi r21,0
 1314 051e 8C81      		ldd r24,Y+4
 1315 0520 9D81      		ldd r25,Y+5
 1316 0522 FC01      		movw r30,r24
 1317 0524 8381      		ldd r24,Z+3
 1318 0526 282F      		mov r18,r24
 1319 0528 30E0      		ldi r19,0
 1320 052a 6AE4      		ldi r22,lo8(74)
 1321 052c 649F      		mul r22,r20
 1322 052e C001      		movw r24,r0
 1323 0530 659F      		mul r22,r21
 1324 0532 900D      		add r25,r0
 1325 0534 1124      		clr __zero_reg__
 1326 0536 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1327 0538 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1328 053a FC01      		movw r30,r24
 1329 053c 3183      		std Z+1,r19
 1330 053e 2083      		st Z,r18
 221:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1331               		.loc 6 221 0
 1332 0540 8981      		ldd r24,Y+1
 1333 0542 282F      		mov r18,r24
 1334 0544 30E0      		ldi r19,0
 1335 0546 4AE4      		ldi r20,lo8(74)
 1336 0548 429F      		mul r20,r18
 1337 054a C001      		movw r24,r0
 1338 054c 439F      		mul r20,r19
 1339 054e 900D      		add r25,r0
 1340 0550 1124      		clr __zero_reg__
 1341 0552 8050      		subi r24,lo8(-(nodes_info_arr))
 1342 0554 9040      		sbci r25,hi8(-(nodes_info_arr))
 1343 0556 2981      		ldd r18,Y+1
 1344 0558 FC01      		movw r30,r24
 1345 055a 2083      		st Z,r18
 222:ServerLLDN.c  **** 		
 223:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1346               		.loc 6 223 0
 1347 055c 8091 0000 		lds r24,conf_req_list
 1348 0560 9091 0000 		lds r25,conf_req_list+1
 1349 0564 892B      		or r24,r25
 1350 0566 01F0      		breq .L37
 1351               	.LBB3:
 224:ServerLLDN.c  **** 		{
 225:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1352               		.loc 6 225 0
 1353 0568 84E0      		ldi r24,lo8(4)
 1354 056a 90E0      		ldi r25,0
 1355 056c 0E94 0000 		call malloc
 1356 0570 9B83      		std Y+3,r25
 1357 0572 8A83      		std Y+2,r24
 226:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1358               		.loc 6 226 0
 1359 0574 8981      		ldd r24,Y+1
 1360 0576 282F      		mov r18,r24
 1361 0578 30E0      		ldi r19,0
 1362 057a 4AE4      		ldi r20,lo8(74)
 1363 057c 429F      		mul r20,r18
 1364 057e C001      		movw r24,r0
 1365 0580 439F      		mul r20,r19
 1366 0582 900D      		add r25,r0
 1367 0584 1124      		clr __zero_reg__
 1368 0586 9C01      		movw r18,r24
 1369 0588 2050      		subi r18,lo8(-(nodes_info_arr))
 1370 058a 3040      		sbci r19,hi8(-(nodes_info_arr))
 1371 058c 8A81      		ldd r24,Y+2
 1372 058e 9B81      		ldd r25,Y+3
 1373 0590 FC01      		movw r30,r24
 1374 0592 3183      		std Z+1,r19
 1375 0594 2083      		st Z,r18
 227:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1376               		.loc 6 227 0
 1377 0596 2091 0000 		lds r18,conf_req_list
 1378 059a 3091 0000 		lds r19,conf_req_list+1
 1379 059e 8A81      		ldd r24,Y+2
 1380 05a0 9B81      		ldd r25,Y+3
 1381 05a2 FC01      		movw r30,r24
 1382 05a4 3383      		std Z+3,r19
 1383 05a6 2283      		std Z+2,r18
 228:ServerLLDN.c  **** 			conf_req_list = tmp;
 1384               		.loc 6 228 0
 1385 05a8 8A81      		ldd r24,Y+2
 1386 05aa 9B81      		ldd r25,Y+3
 1387 05ac 9093 0000 		sts conf_req_list+1,r25
 1388 05b0 8093 0000 		sts conf_req_list,r24
 1389               	.LBE3:
 229:ServerLLDN.c  **** 		}
 230:ServerLLDN.c  **** 		else
 231:ServerLLDN.c  **** 		{
 232:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 233:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 234:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 235:ServerLLDN.c  **** 		}
 236:ServerLLDN.c  **** 	}
 1390               		.loc 6 236 0
 1391 05b4 00C0      		rjmp .L39
 1392               	.L37:
 232:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1393               		.loc 6 232 0
 1394 05b6 84E0      		ldi r24,lo8(4)
 1395 05b8 90E0      		ldi r25,0
 1396 05ba 0E94 0000 		call malloc
 1397 05be 9093 0000 		sts conf_req_list+1,r25
 1398 05c2 8093 0000 		sts conf_req_list,r24
 233:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1399               		.loc 6 233 0
 1400 05c6 8091 0000 		lds r24,conf_req_list
 1401 05ca 9091 0000 		lds r25,conf_req_list+1
 1402 05ce 2981      		ldd r18,Y+1
 1403 05d0 422F      		mov r20,r18
 1404 05d2 50E0      		ldi r21,0
 1405 05d4 6AE4      		ldi r22,lo8(74)
 1406 05d6 649F      		mul r22,r20
 1407 05d8 9001      		movw r18,r0
 1408 05da 659F      		mul r22,r21
 1409 05dc 300D      		add r19,r0
 1410 05de 1124      		clr __zero_reg__
 1411 05e0 2050      		subi r18,lo8(-(nodes_info_arr))
 1412 05e2 3040      		sbci r19,hi8(-(nodes_info_arr))
 1413 05e4 FC01      		movw r30,r24
 1414 05e6 3183      		std Z+1,r19
 1415 05e8 2083      		st Z,r18
 234:ServerLLDN.c  **** 		}
 1416               		.loc 6 234 0
 1417 05ea 8091 0000 		lds r24,conf_req_list
 1418 05ee 9091 0000 		lds r25,conf_req_list+1
 1419 05f2 FC01      		movw r30,r24
 1420 05f4 1382      		std Z+3,__zero_reg__
 1421 05f6 1282      		std Z+2,__zero_reg__
 1422               	.L39:
 1423               		.loc 6 236 0
 1424 05f8 0000      		nop
 1425               	/* epilogue start */
 1426 05fa 0F90      		pop __tmp_reg__
 1427 05fc 0F90      		pop __tmp_reg__
 1428 05fe 0F90      		pop __tmp_reg__
 1429 0600 0F90      		pop __tmp_reg__
 1430 0602 0F90      		pop __tmp_reg__
 1431 0604 DF91      		pop r29
 1432 0606 CF91      		pop r28
 1433 0608 0895      		ret
 1434               		.cfi_endproc
 1435               	.LFE136:
 1438               	CopyToConfigRequest:
 1439               	.LFB137:
 237:ServerLLDN.c  **** 
 238:ServerLLDN.c  **** 	static void CopyToConfigRequest()
 239:ServerLLDN.c  **** 	{
 1440               		.loc 6 239 0
 1441               		.cfi_startproc
 1442 060a CF93      		push r28
 1443               	.LCFI64:
 1444               		.cfi_def_cfa_offset 3
 1445               		.cfi_offset 28, -2
 1446 060c DF93      		push r29
 1447               	.LCFI65:
 1448               		.cfi_def_cfa_offset 4
 1449               		.cfi_offset 29, -3
 1450 060e 00D0      		rcall .
 1451               	.LCFI66:
 1452               		.cfi_def_cfa_offset 6
 1453 0610 CDB7      		in r28,__SP_L__
 1454 0612 DEB7      		in r29,__SP_H__
 1455               	.LCFI67:
 1456               		.cfi_def_cfa_register 28
 1457               	/* prologue: function */
 1458               	/* frame size = 2 */
 1459               	/* stack size = 4 */
 1460               	.L__stack_usage = 4
 240:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1461               		.loc 6 240 0
 1462 0614 8091 0000 		lds r24,conf_req_list
 1463 0618 9091 0000 		lds r25,conf_req_list+1
 1464 061c FC01      		movw r30,r24
 1465 061e 8081      		ld r24,Z
 1466 0620 9181      		ldd r25,Z+1
 1467 0622 FC01      		movw r30,r24
 1468 0624 8081      		ld r24,Z
 1469 0626 8093 0000 		sts config_request_frame+3,r24
 241:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1470               		.loc 6 241 0
 1471 062a 8091 0000 		lds r24,conf_req_list
 1472 062e 9091 0000 		lds r25,conf_req_list+1
 1473 0632 FC01      		movw r30,r24
 1474 0634 8081      		ld r24,Z
 1475 0636 9181      		ldd r25,Z+1
 1476 0638 FC01      		movw r30,r24
 1477 063a 8181      		ldd r24,Z+1
 1478 063c 9281      		ldd r25,Z+2
 1479 063e 8093 0000 		sts config_request_frame+4,r24
 242:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1480               		.loc 6 242 0
 1481 0642 8091 0000 		lds r24,conf_req_list
 1482 0646 9091 0000 		lds r25,conf_req_list+1
 1483 064a 9A83      		std Y+2,r25
 1484 064c 8983      		std Y+1,r24
 243:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1485               		.loc 6 243 0
 1486 064e 8091 0000 		lds r24,conf_req_list
 1487 0652 9091 0000 		lds r25,conf_req_list+1
 1488 0656 FC01      		movw r30,r24
 1489 0658 8281      		ldd r24,Z+2
 1490 065a 9381      		ldd r25,Z+3
 1491 065c 9093 0000 		sts conf_req_list+1,r25
 1492 0660 8093 0000 		sts conf_req_list,r24
 244:ServerLLDN.c  **** 		tmp->node = NULL;
 1493               		.loc 6 244 0
 1494 0664 8981      		ldd r24,Y+1
 1495 0666 9A81      		ldd r25,Y+2
 1496 0668 FC01      		movw r30,r24
 1497 066a 1182      		std Z+1,__zero_reg__
 1498 066c 1082      		st Z,__zero_reg__
 245:ServerLLDN.c  **** 		tmp->next = NULL;
 1499               		.loc 6 245 0
 1500 066e 8981      		ldd r24,Y+1
 1501 0670 9A81      		ldd r25,Y+2
 1502 0672 FC01      		movw r30,r24
 1503 0674 1382      		std Z+3,__zero_reg__
 1504 0676 1282      		std Z+2,__zero_reg__
 246:ServerLLDN.c  **** 		free(tmp);
 1505               		.loc 6 246 0
 1506 0678 8981      		ldd r24,Y+1
 1507 067a 9A81      		ldd r25,Y+2
 1508 067c 0E94 0000 		call free
 247:ServerLLDN.c  **** 	}
 1509               		.loc 6 247 0
 1510 0680 0000      		nop
 1511               	/* epilogue start */
 1512 0682 0F90      		pop __tmp_reg__
 1513 0684 0F90      		pop __tmp_reg__
 1514 0686 DF91      		pop r29
 1515 0688 CF91      		pop r28
 1516 068a 0895      		ret
 1517               		.cfi_endproc
 1518               	.LFE137:
 1521               	appCommandInd:
 1522               	.LFB138:
 248:ServerLLDN.c  **** 
 249:ServerLLDN.c  **** 
 250:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 251:ServerLLDN.c  **** 	{
 1523               		.loc 6 251 0
 1524               		.cfi_startproc
 1525 068c CF93      		push r28
 1526               	.LCFI68:
 1527               		.cfi_def_cfa_offset 3
 1528               		.cfi_offset 28, -2
 1529 068e DF93      		push r29
 1530               	.LCFI69:
 1531               		.cfi_def_cfa_offset 4
 1532               		.cfi_offset 29, -3
 1533 0690 CDB7      		in r28,__SP_L__
 1534 0692 DEB7      		in r29,__SP_H__
 1535               	.LCFI70:
 1536               		.cfi_def_cfa_register 28
 1537 0694 2A97      		sbiw r28,10
 1538               	.LCFI71:
 1539               		.cfi_def_cfa_offset 14
 1540 0696 0FB6      		in __tmp_reg__,__SREG__
 1541 0698 F894      		cli
 1542 069a DEBF      		out __SP_H__,r29
 1543 069c 0FBE      		out __SREG__,__tmp_reg__
 1544 069e CDBF      		out __SP_L__,r28
 1545               	/* prologue: function */
 1546               	/* frame size = 10 */
 1547               	/* stack size = 12 */
 1548               	.L__stack_usage = 12
 1549 06a0 9A87      		std Y+10,r25
 1550 06a2 8987      		std Y+9,r24
 252:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1551               		.loc 6 252 0
 1552 06a4 8985      		ldd r24,Y+9
 1553 06a6 9A85      		ldd r25,Y+10
 1554 06a8 FC01      		movw r30,r24
 1555 06aa 8085      		ldd r24,Z+8
 1556 06ac 9185      		ldd r25,Z+9
 1557 06ae FC01      		movw r30,r24
 1558 06b0 8081      		ld r24,Z
 1559 06b2 8D30      		cpi r24,lo8(13)
 1560 06b4 01F4      		brne .L42
 1561               	.LBB4:
 253:ServerLLDN.c  **** 		{
 254:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1562               		.loc 6 254 0
 1563 06b6 8985      		ldd r24,Y+9
 1564 06b8 9A85      		ldd r25,Y+10
 1565 06ba FC01      		movw r30,r24
 1566 06bc 8085      		ldd r24,Z+8
 1567 06be 9185      		ldd r25,Z+9
 1568 06c0 9C83      		std Y+4,r25
 1569 06c2 8B83      		std Y+3,r24
 255:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1570               		.loc 6 255 0
 1571 06c4 8B81      		ldd r24,Y+3
 1572 06c6 9C81      		ldd r25,Y+4
 1573 06c8 FC01      		movw r30,r24
 1574 06ca 8181      		ldd r24,Z+1
 1575 06cc 0E94 0000 		call addToAckArray
 256:ServerLLDN.c  **** 					
 257:ServerLLDN.c  **** 			#if PRINT
 258:ServerLLDN.c  **** 			uint32_t tmp = macsc_read_count();
 1576               		.loc 6 258 0
 1577 06d0 0E94 0000 		call macsc_read_count
 1578 06d4 DC01      		movw r26,r24
 1579 06d6 CB01      		movw r24,r22
 1580 06d8 8D83      		std Y+5,r24
 1581 06da 9E83      		std Y+6,r25
 1582 06dc AF83      		std Y+7,r26
 1583 06de B887      		std Y+8,r27
 1584               	.LBE4:
 1585 06e0 00C0      		rjmp .L43
 1586               	.L42:
 259:ServerLLDN.c  **** // 			printf("\n%" PRIu32 " ", tmp);			
 260:ServerLLDN.c  **** // 			printf(" DISC %hhx", msg->macAddr);	
 261:ServerLLDN.c  **** 			#endif
 262:ServerLLDN.c  **** 		}
 263:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1587               		.loc 6 263 0
 1588 06e2 8985      		ldd r24,Y+9
 1589 06e4 9A85      		ldd r25,Y+10
 1590 06e6 FC01      		movw r30,r24
 1591 06e8 8085      		ldd r24,Z+8
 1592 06ea 9185      		ldd r25,Z+9
 1593 06ec FC01      		movw r30,r24
 1594 06ee 8081      		ld r24,Z
 1595 06f0 8E30      		cpi r24,lo8(14)
 1596 06f2 01F4      		brne .L44
 1597               	.LBB5:
 264:ServerLLDN.c  **** 		{
 265:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1598               		.loc 6 265 0
 1599 06f4 8985      		ldd r24,Y+9
 1600 06f6 9A85      		ldd r25,Y+10
 1601 06f8 FC01      		movw r30,r24
 1602 06fa 8085      		ldd r24,Z+8
 1603 06fc 9185      		ldd r25,Z+9
 1604 06fe 9A83      		std Y+2,r25
 1605 0700 8983      		std Y+1,r24
 266:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1606               		.loc 6 266 0
 1607 0702 8981      		ldd r24,Y+1
 1608 0704 9A81      		ldd r25,Y+2
 1609 0706 0E94 0000 		call addConfRequestArray
 1610               	.LBE5:
 1611 070a 00C0      		rjmp .L43
 1612               	.L44:
 267:ServerLLDN.c  **** 			#if PRINT
 268:ServerLLDN.c  **** // 			printf("\nCONF %d", msg->macAddr);	
 269:ServerLLDN.c  **** 			#endif
 270:ServerLLDN.c  **** 		}
 271:ServerLLDN.c  **** 		else return false;			
 1613               		.loc 6 271 0
 1614 070c 80E0      		ldi r24,0
 1615 070e 00C0      		rjmp .L45
 1616               	.L43:
 272:ServerLLDN.c  **** 		return true;
 1617               		.loc 6 272 0
 1618 0710 81E0      		ldi r24,lo8(1)
 1619               	.L45:
 1620               	/* epilogue start */
 273:ServerLLDN.c  **** 	}
 1621               		.loc 6 273 0
 1622 0712 2A96      		adiw r28,10
 1623 0714 0FB6      		in __tmp_reg__,__SREG__
 1624 0716 F894      		cli
 1625 0718 DEBF      		out __SP_H__,r29
 1626 071a 0FBE      		out __SREG__,__tmp_reg__
 1627 071c CDBF      		out __SP_L__,r28
 1628 071e DF91      		pop r29
 1629 0720 CF91      		pop r28
 1630 0722 0895      		ret
 1631               		.cfi_endproc
 1632               	.LFE138:
 1634               	.global	check_ack_pan
 1636               	check_ack_pan:
 1637               	.LFB139:
 274:ServerLLDN.c  **** 	
 275:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 276:ServerLLDN.c  **** 	{
 1638               		.loc 6 276 0
 1639               		.cfi_startproc
 1640 0724 CF93      		push r28
 1641               	.LCFI72:
 1642               		.cfi_def_cfa_offset 3
 1643               		.cfi_offset 28, -2
 1644 0726 DF93      		push r29
 1645               	.LCFI73:
 1646               		.cfi_def_cfa_offset 4
 1647               		.cfi_offset 29, -3
 1648 0728 00D0      		rcall .
 1649 072a 00D0      		rcall .
 1650 072c 00D0      		rcall .
 1651               	.LCFI74:
 1652               		.cfi_def_cfa_offset 10
 1653 072e CDB7      		in r28,__SP_L__
 1654 0730 DEB7      		in r29,__SP_H__
 1655               	.LCFI75:
 1656               		.cfi_def_cfa_register 28
 1657               	/* prologue: function */
 1658               	/* frame size = 6 */
 1659               	/* stack size = 8 */
 1660               	.L__stack_usage = 8
 1661 0732 9E83      		std Y+6,r25
 1662 0734 8D83      		std Y+5,r24
 277:ServerLLDN.c  **** 		int pos =  addr / 8;
 1663               		.loc 6 277 0
 1664 0736 8D81      		ldd r24,Y+5
 1665 0738 9E81      		ldd r25,Y+6
 1666 073a 9923      		tst r25
 1667 073c 04F4      		brge .L47
 1668 073e 0796      		adiw r24,7
 1669               	.L47:
 1670 0740 9595      		asr r25
 1671 0742 8795      		ror r24
 1672 0744 9595      		asr r25
 1673 0746 8795      		ror r24
 1674 0748 9595      		asr r25
 1675 074a 8795      		ror r24
 1676 074c 9A83      		std Y+2,r25
 1677 074e 8983      		std Y+1,r24
 278:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1678               		.loc 6 278 0
 1679 0750 8D81      		ldd r24,Y+5
 1680 0752 9E81      		ldd r25,Y+6
 1681 0754 8770      		andi r24,7
 1682 0756 9078      		andi r25,128
 1683 0758 9923      		tst r25
 1684 075a 04F4      		brge .L48
 1685 075c 0197      		sbiw r24,1
 1686 075e 886F      		ori r24,248
 1687 0760 9F6F      		ori r25,255
 1688 0762 0196      		adiw r24,1
 1689               	.L48:
 1690 0764 9C01      		movw r18,r24
 1691 0766 88E0      		ldi r24,lo8(8)
 1692 0768 90E0      		ldi r25,0
 1693 076a 821B      		sub r24,r18
 1694 076c 930B      		sbc r25,r19
 1695 076e 9C83      		std Y+4,r25
 1696 0770 8B83      		std Y+3,r24
 279:ServerLLDN.c  **** 		
 280:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1697               		.loc 6 280 0
 1698 0772 8981      		ldd r24,Y+1
 1699 0774 9A81      		ldd r25,Y+2
 1700 0776 8050      		subi r24,lo8(-(ACKFrame+1))
 1701 0778 9040      		sbci r25,hi8(-(ACKFrame+1))
 1702 077a FC01      		movw r30,r24
 1703 077c 8081      		ld r24,Z
 1704 077e 882F      		mov r24,r24
 1705 0780 90E0      		ldi r25,0
 1706 0782 0B80      		ldd r0,Y+3
 1707 0784 00C0      		rjmp 2f
 1708               		1:
 1709 0786 9595      		asr r25
 1710 0788 8795      		ror r24
 1711               		2:
 1712 078a 0A94      		dec r0
 1713 078c 02F4      		brpl 1b
 1714 078e 8170      		andi r24,1
 1715 0790 9927      		clr r25
 1716 0792 892B      		or r24,r25
 1717 0794 01F0      		breq .L49
 281:ServerLLDN.c  **** 		{
 282:ServerLLDN.c  **** 			return true;
 1718               		.loc 6 282 0
 1719 0796 81E0      		ldi r24,lo8(1)
 1720 0798 00C0      		rjmp .L50
 1721               	.L49:
 283:ServerLLDN.c  **** 		}
 284:ServerLLDN.c  **** 		else
 285:ServerLLDN.c  **** 			return false;
 1722               		.loc 6 285 0
 1723 079a 80E0      		ldi r24,0
 1724               	.L50:
 1725               	/* epilogue start */
 286:ServerLLDN.c  **** 	}
 1726               		.loc 6 286 0
 1727 079c 2696      		adiw r28,6
 1728 079e 0FB6      		in __tmp_reg__,__SREG__
 1729 07a0 F894      		cli
 1730 07a2 DEBF      		out __SP_H__,r29
 1731 07a4 0FBE      		out __SREG__,__tmp_reg__
 1732 07a6 CDBF      		out __SP_L__,r28
 1733 07a8 DF91      		pop r29
 1734 07aa CF91      		pop r28
 1735 07ac 0895      		ret
 1736               		.cfi_endproc
 1737               	.LFE139:
 1739               	.global	check_ack_aux
 1741               	check_ack_aux:
 1742               	.LFB140:
 287:ServerLLDN.c  **** 	
 288:ServerLLDN.c  **** 	bool check_ack_aux(int addr)
 289:ServerLLDN.c  **** 	{
 1743               		.loc 6 289 0
 1744               		.cfi_startproc
 1745 07ae CF93      		push r28
 1746               	.LCFI76:
 1747               		.cfi_def_cfa_offset 3
 1748               		.cfi_offset 28, -2
 1749 07b0 DF93      		push r29
 1750               	.LCFI77:
 1751               		.cfi_def_cfa_offset 4
 1752               		.cfi_offset 29, -3
 1753 07b2 00D0      		rcall .
 1754 07b4 00D0      		rcall .
 1755 07b6 00D0      		rcall .
 1756               	.LCFI78:
 1757               		.cfi_def_cfa_offset 10
 1758 07b8 CDB7      		in r28,__SP_L__
 1759 07ba DEB7      		in r29,__SP_H__
 1760               	.LCFI79:
 1761               		.cfi_def_cfa_register 28
 1762               	/* prologue: function */
 1763               	/* frame size = 6 */
 1764               	/* stack size = 8 */
 1765               	.L__stack_usage = 8
 1766 07bc 9E83      		std Y+6,r25
 1767 07be 8D83      		std Y+5,r24
 290:ServerLLDN.c  **** 		int pos =  addr / 8;
 1768               		.loc 6 290 0
 1769 07c0 8D81      		ldd r24,Y+5
 1770 07c2 9E81      		ldd r25,Y+6
 1771 07c4 9923      		tst r25
 1772 07c6 04F4      		brge .L52
 1773 07c8 0796      		adiw r24,7
 1774               	.L52:
 1775 07ca 9595      		asr r25
 1776 07cc 8795      		ror r24
 1777 07ce 9595      		asr r25
 1778 07d0 8795      		ror r24
 1779 07d2 9595      		asr r25
 1780 07d4 8795      		ror r24
 1781 07d6 9A83      		std Y+2,r25
 1782 07d8 8983      		std Y+1,r24
 291:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1783               		.loc 6 291 0
 1784 07da 8D81      		ldd r24,Y+5
 1785 07dc 9E81      		ldd r25,Y+6
 1786 07de 8770      		andi r24,7
 1787 07e0 9078      		andi r25,128
 1788 07e2 9923      		tst r25
 1789 07e4 04F4      		brge .L53
 1790 07e6 0197      		sbiw r24,1
 1791 07e8 886F      		ori r24,248
 1792 07ea 9F6F      		ori r25,255
 1793 07ec 0196      		adiw r24,1
 1794               	.L53:
 1795 07ee 9C01      		movw r18,r24
 1796 07f0 88E0      		ldi r24,lo8(8)
 1797 07f2 90E0      		ldi r25,0
 1798 07f4 821B      		sub r24,r18
 1799 07f6 930B      		sbc r25,r19
 1800 07f8 9C83      		std Y+4,r25
 1801 07fa 8B83      		std Y+3,r24
 292:ServerLLDN.c  **** 		
 293:ServerLLDN.c  **** 		if( ACKFrame_aux.ackFlags[pos] & 1 << bit_shift)
 1802               		.loc 6 293 0
 1803 07fc 8981      		ldd r24,Y+1
 1804 07fe 9A81      		ldd r25,Y+2
 1805 0800 8050      		subi r24,lo8(-(ACKFrame_aux+1))
 1806 0802 9040      		sbci r25,hi8(-(ACKFrame_aux+1))
 1807 0804 FC01      		movw r30,r24
 1808 0806 8081      		ld r24,Z
 1809 0808 882F      		mov r24,r24
 1810 080a 90E0      		ldi r25,0
 1811 080c 0B80      		ldd r0,Y+3
 1812 080e 00C0      		rjmp 2f
 1813               		1:
 1814 0810 9595      		asr r25
 1815 0812 8795      		ror r24
 1816               		2:
 1817 0814 0A94      		dec r0
 1818 0816 02F4      		brpl 1b
 1819 0818 8170      		andi r24,1
 1820 081a 9927      		clr r25
 1821 081c 892B      		or r24,r25
 1822 081e 01F0      		breq .L54
 294:ServerLLDN.c  **** 		{
 295:ServerLLDN.c  **** 			return true;
 1823               		.loc 6 295 0
 1824 0820 81E0      		ldi r24,lo8(1)
 1825 0822 00C0      		rjmp .L55
 1826               	.L54:
 296:ServerLLDN.c  **** 		}
 297:ServerLLDN.c  **** 		else
 298:ServerLLDN.c  **** 		return false;
 1827               		.loc 6 298 0
 1828 0824 80E0      		ldi r24,0
 1829               	.L55:
 1830               	/* epilogue start */
 299:ServerLLDN.c  **** 	}
 1831               		.loc 6 299 0
 1832 0826 2696      		adiw r28,6
 1833 0828 0FB6      		in __tmp_reg__,__SREG__
 1834 082a F894      		cli
 1835 082c DEBF      		out __SP_H__,r29
 1836 082e 0FBE      		out __SREG__,__tmp_reg__
 1837 0830 CDBF      		out __SP_L__,r28
 1838 0832 DF91      		pop r29
 1839 0834 CF91      		pop r28
 1840 0836 0895      		ret
 1841               		.cfi_endproc
 1842               	.LFE140:
 1844               	.global	__floatsisf
 1845               	.global	__divsf3
 1846               	.global	__subsf3
 1847               	.global	__fixsfsi
 1848               	.global	__floatunsisf
 1849               	.global	__mulsf3
 1850               	.global	__addsf3
 1852               	appDataInd:
 1853               	.LFB141:
 300:ServerLLDN.c  **** 	
 301:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 302:ServerLLDN.c  **** 	{
 1854               		.loc 6 302 0
 1855               		.cfi_startproc
 1856 0838 8F92      		push r8
 1857               	.LCFI80:
 1858               		.cfi_def_cfa_offset 3
 1859               		.cfi_offset 8, -2
 1860 083a 9F92      		push r9
 1861               	.LCFI81:
 1862               		.cfi_def_cfa_offset 4
 1863               		.cfi_offset 9, -3
 1864 083c AF92      		push r10
 1865               	.LCFI82:
 1866               		.cfi_def_cfa_offset 5
 1867               		.cfi_offset 10, -4
 1868 083e BF92      		push r11
 1869               	.LCFI83:
 1870               		.cfi_def_cfa_offset 6
 1871               		.cfi_offset 11, -5
 1872 0840 CF92      		push r12
 1873               	.LCFI84:
 1874               		.cfi_def_cfa_offset 7
 1875               		.cfi_offset 12, -6
 1876 0842 DF92      		push r13
 1877               	.LCFI85:
 1878               		.cfi_def_cfa_offset 8
 1879               		.cfi_offset 13, -7
 1880 0844 EF92      		push r14
 1881               	.LCFI86:
 1882               		.cfi_def_cfa_offset 9
 1883               		.cfi_offset 14, -8
 1884 0846 FF92      		push r15
 1885               	.LCFI87:
 1886               		.cfi_def_cfa_offset 10
 1887               		.cfi_offset 15, -9
 1888 0848 CF93      		push r28
 1889               	.LCFI88:
 1890               		.cfi_def_cfa_offset 11
 1891               		.cfi_offset 28, -10
 1892 084a DF93      		push r29
 1893               	.LCFI89:
 1894               		.cfi_def_cfa_offset 12
 1895               		.cfi_offset 29, -11
 1896 084c CDB7      		in r28,__SP_L__
 1897 084e DEB7      		in r29,__SP_H__
 1898               	.LCFI90:
 1899               		.cfi_def_cfa_register 28
 1900 0850 2E97      		sbiw r28,14
 1901               	.LCFI91:
 1902               		.cfi_def_cfa_offset 26
 1903 0852 0FB6      		in __tmp_reg__,__SREG__
 1904 0854 F894      		cli
 1905 0856 DEBF      		out __SP_H__,r29
 1906 0858 0FBE      		out __SREG__,__tmp_reg__
 1907 085a CDBF      		out __SP_L__,r28
 1908               	/* prologue: function */
 1909               	/* frame size = 14 */
 1910               	/* stack size = 24 */
 1911               	.L__stack_usage = 24
 1912 085c 9E87      		std Y+14,r25
 1913 085e 8D87      		std Y+13,r24
 303:ServerLLDN.c  **** 		uint32_t cmp_value = macsc_read_count();
 1914               		.loc 6 303 0
 1915 0860 0E94 0000 		call macsc_read_count
 1916 0864 DC01      		movw r26,r24
 1917 0866 CB01      		movw r24,r22
 1918 0868 8F83      		std Y+7,r24
 1919 086a 9887      		std Y+8,r25
 1920 086c A987      		std Y+9,r26
 1921 086e BA87      		std Y+10,r27
 304:ServerLLDN.c  **** 		int relative_cmp =  cmp_value - cmp_value_start_superframe - 40;
 1922               		.loc 6 304 0
 1923 0870 2F81      		ldd r18,Y+7
 1924 0872 3885      		ldd r19,Y+8
 1925 0874 8091 0000 		lds r24,cmp_value_start_superframe
 1926 0878 9091 0000 		lds r25,cmp_value_start_superframe+1
 1927 087c A091 0000 		lds r26,cmp_value_start_superframe+2
 1928 0880 B091 0000 		lds r27,cmp_value_start_superframe+3
 1929 0884 A901      		movw r20,r18
 1930 0886 481B      		sub r20,r24
 1931 0888 590B      		sbc r21,r25
 1932 088a CA01      		movw r24,r20
 1933 088c 8897      		sbiw r24,40
 1934 088e 9C87      		std Y+12,r25
 1935 0890 8B87      		std Y+11,r24
 305:ServerLLDN.c  **** 		
 306:ServerLLDN.c  **** 
 307:ServerLLDN.c  **** 		int curr_up_ts = (relative_cmp)/(tTS / (SYMBOL_TIME)) - 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_on
 1936               		.loc 6 307 0
 1937 0892 8B85      		ldd r24,Y+11
 1938 0894 9C85      		ldd r25,Y+12
 1939 0896 092E      		mov __tmp_reg__,r25
 1940 0898 000C      		lsl r0
 1941 089a AA0B      		sbc r26,r26
 1942 089c BB0B      		sbc r27,r27
 1943 089e BC01      		movw r22,r24
 1944 08a0 CD01      		movw r24,r26
 1945 08a2 0E94 0000 		call __floatsisf
 1946 08a6 6B01      		movw r12,r22
 1947 08a8 7C01      		movw r14,r24
 1948 08aa 8091 0000 		lds r24,tTS
 1949 08ae 9091 0000 		lds r25,tTS+1
 1950 08b2 A091 0000 		lds r26,tTS+2
 1951 08b6 B091 0000 		lds r27,tTS+3
 1952 08ba 2DEB      		ldi r18,lo8(-67)
 1953 08bc 37E3      		ldi r19,lo8(55)
 1954 08be 46E8      		ldi r20,lo8(-122)
 1955 08c0 57E3      		ldi r21,lo8(55)
 1956 08c2 BC01      		movw r22,r24
 1957 08c4 CD01      		movw r24,r26
 1958 08c6 0E94 0000 		call __divsf3
 1959 08ca DC01      		movw r26,r24
 1960 08cc CB01      		movw r24,r22
 1961 08ce 9C01      		movw r18,r24
 1962 08d0 AD01      		movw r20,r26
 1963 08d2 C701      		movw r24,r14
 1964 08d4 B601      		movw r22,r12
 1965 08d6 0E94 0000 		call __divsf3
 1966 08da DC01      		movw r26,r24
 1967 08dc CB01      		movw r24,r22
 1968 08de 20E0      		ldi r18,0
 1969 08e0 30E0      		ldi r19,0
 1970 08e2 40E8      		ldi r20,lo8(-128)
 1971 08e4 50E4      		ldi r21,lo8(64)
 1972 08e6 BC01      		movw r22,r24
 1973 08e8 CD01      		movw r24,r26
 1974 08ea 0E94 0000 		call __subsf3
 1975 08ee DC01      		movw r26,r24
 1976 08f0 CB01      		movw r24,r22
 1977 08f2 BC01      		movw r22,r24
 1978 08f4 CD01      		movw r24,r26
 1979 08f6 0E94 0000 		call __fixsfsi
 1980 08fa DC01      		movw r26,r24
 1981 08fc CB01      		movw r24,r22
 1982 08fe 9A83      		std Y+2,r25
 1983 0900 8983      		std Y+1,r24
 308:ServerLLDN.c  **** 		if(curr_up_ts > assTimeSlot)
 1984               		.loc 6 308 0
 1985 0902 8091 0000 		lds r24,assTimeSlot
 1986 0906 9091 0000 		lds r25,assTimeSlot+1
 1987 090a 2981      		ldd r18,Y+1
 1988 090c 3A81      		ldd r19,Y+2
 1989 090e 8217      		cp r24,r18
 1990 0910 9307      		cpc r25,r19
 1991 0912 04F4      		brge .L57
 1992               	.LBB6:
 309:ServerLLDN.c  **** 		{
 310:ServerLLDN.c  **** 			
 311:ServerLLDN.c  **** 			int i;
 312:ServerLLDN.c  **** 			curr_up_ts -= assTimeSlot+1;
 1993               		.loc 6 312 0
 1994 0914 8091 0000 		lds r24,assTimeSlot
 1995 0918 9091 0000 		lds r25,assTimeSlot+1
 1996 091c 0196      		adiw r24,1
 1997 091e 2981      		ldd r18,Y+1
 1998 0920 3A81      		ldd r19,Y+2
 1999 0922 F901      		movw r30,r18
 2000 0924 E81B      		sub r30,r24
 2001 0926 F90B      		sbc r31,r25
 2002 0928 CF01      		movw r24,r30
 2003 092a 9A83      		std Y+2,r25
 2004 092c 8983      		std Y+1,r24
 313:ServerLLDN.c  **** 			for (i = 0; i < assTimeSlot && curr_up_ts > 0; ++i)
 2005               		.loc 6 313 0
 2006 092e 1C82      		std Y+4,__zero_reg__
 2007 0930 1B82      		std Y+3,__zero_reg__
 2008 0932 00C0      		rjmp .L58
 2009               	.L61:
 314:ServerLLDN.c  **** 			{
 315:ServerLLDN.c  **** 				if(!check_ack_aux(i+1))
 2010               		.loc 6 315 0
 2011 0934 8B81      		ldd r24,Y+3
 2012 0936 9C81      		ldd r25,Y+4
 2013 0938 0196      		adiw r24,1
 2014 093a 0E94 0000 		call check_ack_aux
 2015 093e 982F      		mov r25,r24
 2016 0940 81E0      		ldi r24,lo8(1)
 2017 0942 8927      		eor r24,r25
 2018 0944 8823      		tst r24
 2019 0946 01F0      		breq .L59
 316:ServerLLDN.c  **** 				{
 317:ServerLLDN.c  **** 					curr_up_ts--;
 2020               		.loc 6 317 0
 2021 0948 8981      		ldd r24,Y+1
 2022 094a 9A81      		ldd r25,Y+2
 2023 094c 0197      		sbiw r24,1
 2024 094e 9A83      		std Y+2,r25
 2025 0950 8983      		std Y+1,r24
 2026               	.L59:
 313:ServerLLDN.c  **** 			{
 2027               		.loc 6 313 0 discriminator 2
 2028 0952 8B81      		ldd r24,Y+3
 2029 0954 9C81      		ldd r25,Y+4
 2030 0956 0196      		adiw r24,1
 2031 0958 9C83      		std Y+4,r25
 2032 095a 8B83      		std Y+3,r24
 2033               	.L58:
 313:ServerLLDN.c  **** 			{
 2034               		.loc 6 313 0 is_stmt 0 discriminator 1
 2035 095c 8091 0000 		lds r24,assTimeSlot
 2036 0960 9091 0000 		lds r25,assTimeSlot+1
 2037 0964 2B81      		ldd r18,Y+3
 2038 0966 3C81      		ldd r19,Y+4
 2039 0968 2817      		cp r18,r24
 2040 096a 3907      		cpc r19,r25
 2041 096c 04F4      		brge .L60
 313:ServerLLDN.c  **** 			{
 2042               		.loc 6 313 0 discriminator 3
 2043 096e 8981      		ldd r24,Y+1
 2044 0970 9A81      		ldd r25,Y+2
 2045 0972 1816      		cp __zero_reg__,r24
 2046 0974 1906      		cpc __zero_reg__,r25
 2047 0976 04F0      		brlt .L61
 2048               	.L60:
 318:ServerLLDN.c  **** 				}
 319:ServerLLDN.c  **** 			}
 320:ServerLLDN.c  **** 			curr_up_ts = i;
 2049               		.loc 6 320 0 is_stmt 1
 2050 0978 8B81      		ldd r24,Y+3
 2051 097a 9C81      		ldd r25,Y+4
 2052 097c 9A83      		std Y+2,r25
 2053 097e 8983      		std Y+1,r24
 2054               	.L57:
 2055               	.LBE6:
 321:ServerLLDN.c  **** 		}
 322:ServerLLDN.c  **** 	
 323:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].rssi = ind->rssi;
 2056               		.loc 6 323 0
 2057 0980 8D85      		ldd r24,Y+13
 2058 0982 9E85      		ldd r25,Y+14
 2059 0984 FC01      		movw r30,r24
 2060 0986 8485      		ldd r24,Z+12
 2061 0988 582F      		mov r21,r24
 2062 098a 2981      		ldd r18,Y+1
 2063 098c 3A81      		ldd r19,Y+2
 2064 098e 4AE4      		ldi r20,lo8(74)
 2065 0990 429F      		mul r20,r18
 2066 0992 C001      		movw r24,r0
 2067 0994 439F      		mul r20,r19
 2068 0996 900D      		add r25,r0
 2069 0998 1124      		clr __zero_reg__
 2070 099a 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2071 099c 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2072 099e FC01      		movw r30,r24
 2073 09a0 5083      		st Z,r21
 324:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2074               		.loc 6 324 0
 2075 09a2 2981      		ldd r18,Y+1
 2076 09a4 3A81      		ldd r19,Y+2
 2077 09a6 4AE4      		ldi r20,lo8(74)
 2078 09a8 429F      		mul r20,r18
 2079 09aa C001      		movw r24,r0
 2080 09ac 439F      		mul r20,r19
 2081 09ae 900D      		add r25,r0
 2082 09b0 1124      		clr __zero_reg__
 2083 09b2 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2084 09b4 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2085 09b6 FC01      		movw r30,r24
 2086 09b8 8081      		ld r24,Z
 2087 09ba 882F      		mov r24,r24
 2088 09bc 90E0      		ldi r25,0
 2089 09be 092E      		mov __tmp_reg__,r25
 2090 09c0 000C      		lsl r0
 2091 09c2 AA0B      		sbc r26,r26
 2092 09c4 BB0B      		sbc r27,r27
 2093 09c6 BC01      		movw r22,r24
 2094 09c8 CD01      		movw r24,r26
 2095 09ca 0E94 0000 		call __floatsisf
 2096 09ce 4B01      		movw r8,r22
 2097 09d0 5C01      		movw r10,r24
 2098 09d2 2981      		ldd r18,Y+1
 2099 09d4 3A81      		ldd r19,Y+2
 2100 09d6 4AE4      		ldi r20,lo8(74)
 2101 09d8 429F      		mul r20,r18
 2102 09da C001      		movw r24,r0
 2103 09dc 439F      		mul r20,r19
 2104 09de 900D      		add r25,r0
 2105 09e0 1124      		clr __zero_reg__
 2106 09e2 8050      		subi r24,lo8(-(nodes_info_arr+5))
 2107 09e4 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 2108 09e6 FC01      		movw r30,r24
 2109 09e8 C080      		ld r12,Z
 2110 09ea D180      		ldd r13,Z+1
 2111 09ec E280      		ldd r14,Z+2
 2112 09ee F380      		ldd r15,Z+3
 2113 09f0 2981      		ldd r18,Y+1
 2114 09f2 3A81      		ldd r19,Y+2
 2115 09f4 4AE4      		ldi r20,lo8(74)
 2116 09f6 429F      		mul r20,r18
 2117 09f8 C001      		movw r24,r0
 2118 09fa 439F      		mul r20,r19
 2119 09fc 900D      		add r25,r0
 2120 09fe 1124      		clr __zero_reg__
 2121 0a00 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2122 0a02 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2123 0a04 FC01      		movw r30,r24
 2124 0a06 8081      		ld r24,Z
 2125 0a08 9181      		ldd r25,Z+1
 2126 0a0a CC01      		movw r24,r24
 2127 0a0c A0E0      		ldi r26,0
 2128 0a0e B0E0      		ldi r27,0
 2129 0a10 BC01      		movw r22,r24
 2130 0a12 CD01      		movw r24,r26
 2131 0a14 0E94 0000 		call __floatunsisf
 2132 0a18 DC01      		movw r26,r24
 2133 0a1a CB01      		movw r24,r22
 2134 0a1c 9C01      		movw r18,r24
 2135 0a1e AD01      		movw r20,r26
 2136 0a20 C701      		movw r24,r14
 2137 0a22 B601      		movw r22,r12
 2138 0a24 0E94 0000 		call __mulsf3
 2139 0a28 DC01      		movw r26,r24
 2140 0a2a CB01      		movw r24,r22
 2141 0a2c 9C01      		movw r18,r24
 2142 0a2e AD01      		movw r20,r26
 2143 0a30 C501      		movw r24,r10
 2144 0a32 B401      		movw r22,r8
 2145 0a34 0E94 0000 		call __addsf3
 2146 0a38 DC01      		movw r26,r24
 2147 0a3a CB01      		movw r24,r22
 2148 0a3c 6C01      		movw r12,r24
 2149 0a3e 7D01      		movw r14,r26
 325:ServerLLDN.c  **** 																				/(nodes_info_arr[curr_up_ts].msg_rec + 1);
 2150               		.loc 6 325 0
 2151 0a40 2981      		ldd r18,Y+1
 2152 0a42 3A81      		ldd r19,Y+2
 2153 0a44 4AE4      		ldi r20,lo8(74)
 2154 0a46 429F      		mul r20,r18
 2155 0a48 C001      		movw r24,r0
 2156 0a4a 439F      		mul r20,r19
 2157 0a4c 900D      		add r25,r0
 2158 0a4e 1124      		clr __zero_reg__
 2159 0a50 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2160 0a52 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2161 0a54 FC01      		movw r30,r24
 2162 0a56 8081      		ld r24,Z
 2163 0a58 9181      		ldd r25,Z+1
 2164 0a5a 0196      		adiw r24,1
 2165 0a5c CC01      		movw r24,r24
 2166 0a5e A0E0      		ldi r26,0
 2167 0a60 B0E0      		ldi r27,0
 2168 0a62 BC01      		movw r22,r24
 2169 0a64 CD01      		movw r24,r26
 2170 0a66 0E94 0000 		call __floatunsisf
 2171 0a6a DC01      		movw r26,r24
 2172 0a6c CB01      		movw r24,r22
 2173 0a6e 9C01      		movw r18,r24
 2174 0a70 AD01      		movw r20,r26
 2175 0a72 C701      		movw r24,r14
 2176 0a74 B601      		movw r22,r12
 2177 0a76 0E94 0000 		call __divsf3
 2178 0a7a DC01      		movw r26,r24
 2179 0a7c CB01      		movw r24,r22
 324:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2180               		.loc 6 324 0
 2181 0a7e 4981      		ldd r20,Y+1
 2182 0a80 5A81      		ldd r21,Y+2
 2183 0a82 6AE4      		ldi r22,lo8(74)
 2184 0a84 649F      		mul r22,r20
 2185 0a86 9001      		movw r18,r0
 2186 0a88 659F      		mul r22,r21
 2187 0a8a 300D      		add r19,r0
 2188 0a8c 1124      		clr __zero_reg__
 2189 0a8e 2050      		subi r18,lo8(-(nodes_info_arr+5))
 2190 0a90 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 2191 0a92 F901      		movw r30,r18
 2192 0a94 8083      		st Z,r24
 2193 0a96 9183      		std Z+1,r25
 2194 0a98 A283      		std Z+2,r26
 2195 0a9a B383      		std Z+3,r27
 326:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].msg_rec++;
 2196               		.loc 6 326 0
 2197 0a9c 2981      		ldd r18,Y+1
 2198 0a9e 3A81      		ldd r19,Y+2
 2199 0aa0 4AE4      		ldi r20,lo8(74)
 2200 0aa2 429F      		mul r20,r18
 2201 0aa4 C001      		movw r24,r0
 2202 0aa6 439F      		mul r20,r19
 2203 0aa8 900D      		add r25,r0
 2204 0aaa 1124      		clr __zero_reg__
 2205 0aac 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2206 0aae 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2207 0ab0 FC01      		movw r30,r24
 2208 0ab2 8081      		ld r24,Z
 2209 0ab4 9181      		ldd r25,Z+1
 2210 0ab6 9C01      		movw r18,r24
 2211 0ab8 2F5F      		subi r18,-1
 2212 0aba 3F4F      		sbci r19,-1
 2213 0abc 4981      		ldd r20,Y+1
 2214 0abe 5A81      		ldd r21,Y+2
 2215 0ac0 6AE4      		ldi r22,lo8(74)
 2216 0ac2 649F      		mul r22,r20
 2217 0ac4 C001      		movw r24,r0
 2218 0ac6 659F      		mul r22,r21
 2219 0ac8 900D      		add r25,r0
 2220 0aca 1124      		clr __zero_reg__
 2221 0acc 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2222 0ace 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2223 0ad0 FC01      		movw r30,r24
 2224 0ad2 3183      		std Z+1,r19
 2225 0ad4 2083      		st Z,r18
 327:ServerLLDN.c  **** 
 328:ServerLLDN.c  **** 		addToAckArray(curr_up_ts+1);
 2226               		.loc 6 328 0
 2227 0ad6 8981      		ldd r24,Y+1
 2228 0ad8 8F5F      		subi r24,lo8(-(1))
 2229 0ada 0E94 0000 		call addToAckArray
 2230               	.LBB7:
 329:ServerLLDN.c  **** 		#if PRINT
 330:ServerLLDN.c  **** // 		printf("\n[%d] Data: ", curr_up_ts);
 331:ServerLLDN.c  **** 		#endif
 332:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2231               		.loc 6 332 0
 2232 0ade 1E82      		std Y+6,__zero_reg__
 2233 0ae0 1D82      		std Y+5,__zero_reg__
 2234 0ae2 00C0      		rjmp .L62
 2235               	.L63:
 333:ServerLLDN.c  **** 		{
 334:ServerLLDN.c  **** 			msg_info_array[curr_up_ts].data_payload[i] = ind->data[i];
 2236               		.loc 6 334 0 discriminator 3
 2237 0ae4 8D85      		ldd r24,Y+13
 2238 0ae6 9E85      		ldd r25,Y+14
 2239 0ae8 FC01      		movw r30,r24
 2240 0aea 2085      		ldd r18,Z+8
 2241 0aec 3185      		ldd r19,Z+9
 2242 0aee 8D81      		ldd r24,Y+5
 2243 0af0 9E81      		ldd r25,Y+6
 2244 0af2 820F      		add r24,r18
 2245 0af4 931F      		adc r25,r19
 2246 0af6 FC01      		movw r30,r24
 2247 0af8 4081      		ld r20,Z
 2248 0afa 8981      		ldd r24,Y+1
 2249 0afc 9A81      		ldd r25,Y+2
 2250 0afe 54E8      		ldi r21,lo8(-124)
 2251 0b00 589F      		mul r21,r24
 2252 0b02 9001      		movw r18,r0
 2253 0b04 599F      		mul r21,r25
 2254 0b06 300D      		add r19,r0
 2255 0b08 1124      		clr __zero_reg__
 2256 0b0a 8D81      		ldd r24,Y+5
 2257 0b0c 9E81      		ldd r25,Y+6
 2258 0b0e 820F      		add r24,r18
 2259 0b10 931F      		adc r25,r19
 2260 0b12 8050      		subi r24,lo8(-(msg_info_array+5))
 2261 0b14 9040      		sbci r25,hi8(-(msg_info_array+5))
 2262 0b16 FC01      		movw r30,r24
 2263 0b18 4083      		st Z,r20
 332:ServerLLDN.c  **** 		{
 2264               		.loc 6 332 0 discriminator 3
 2265 0b1a 8D81      		ldd r24,Y+5
 2266 0b1c 9E81      		ldd r25,Y+6
 2267 0b1e 0196      		adiw r24,1
 2268 0b20 9E83      		std Y+6,r25
 2269 0b22 8D83      		std Y+5,r24
 2270               	.L62:
 332:ServerLLDN.c  **** 		{
 2271               		.loc 6 332 0 is_stmt 0 discriminator 1
 2272 0b24 8D85      		ldd r24,Y+13
 2273 0b26 9E85      		ldd r25,Y+14
 2274 0b28 FC01      		movw r30,r24
 2275 0b2a 8285      		ldd r24,Z+10
 2276 0b2c 282F      		mov r18,r24
 2277 0b2e 30E0      		ldi r19,0
 2278 0b30 8D81      		ldd r24,Y+5
 2279 0b32 9E81      		ldd r25,Y+6
 2280 0b34 8217      		cp r24,r18
 2281 0b36 9307      		cpc r25,r19
 2282 0b38 04F0      		brlt .L63
 2283               	.LBE7:
 335:ServerLLDN.c  **** 			#if PRINT
 336:ServerLLDN.c  **** // 			printf("%hhx", msg_info_array[curr_up_ts].data_payload[i]);
 337:ServerLLDN.c  **** 			#endif
 338:ServerLLDN.c  **** 		}		
 339:ServerLLDN.c  **** // 		printf(" cmp %d", relative_cmp);
 340:ServerLLDN.c  **** 	}
 2284               		.loc 6 340 0 is_stmt 1
 2285 0b3a 0000      		nop
 2286               	/* epilogue start */
 2287 0b3c 2E96      		adiw r28,14
 2288 0b3e 0FB6      		in __tmp_reg__,__SREG__
 2289 0b40 F894      		cli
 2290 0b42 DEBF      		out __SP_H__,r29
 2291 0b44 0FBE      		out __SREG__,__tmp_reg__
 2292 0b46 CDBF      		out __SP_L__,r28
 2293 0b48 DF91      		pop r29
 2294 0b4a CF91      		pop r28
 2295 0b4c FF90      		pop r15
 2296 0b4e EF90      		pop r14
 2297 0b50 DF90      		pop r13
 2298 0b52 CF90      		pop r12
 2299 0b54 BF90      		pop r11
 2300 0b56 AF90      		pop r10
 2301 0b58 9F90      		pop r9
 2302 0b5a 8F90      		pop r8
 2303 0b5c 0895      		ret
 2304               		.cfi_endproc
 2305               	.LFE141:
 2308               	appPanPrepareACK:
 2309               	.LFB142:
 341:ServerLLDN.c  **** 	
 342:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 343:ServerLLDN.c  **** 	{
 2310               		.loc 6 343 0
 2311               		.cfi_startproc
 2312 0b5e CF93      		push r28
 2313               	.LCFI92:
 2314               		.cfi_def_cfa_offset 3
 2315               		.cfi_offset 28, -2
 2316 0b60 DF93      		push r29
 2317               	.LCFI93:
 2318               		.cfi_def_cfa_offset 4
 2319               		.cfi_offset 29, -3
 2320 0b62 CDB7      		in r28,__SP_L__
 2321 0b64 DEB7      		in r29,__SP_H__
 2322               	.LCFI94:
 2323               		.cfi_def_cfa_register 28
 2324               	/* prologue: function */
 2325               	/* frame size = 0 */
 2326               	/* stack size = 2 */
 2327               	.L__stack_usage = 2
 344:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2328               		.loc 6 344 0
 2329 0b66 1092 0000 		sts msgReq+5+1,__zero_reg__
 2330 0b6a 1092 0000 		sts msgReq+5,__zero_reg__
 345:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2331               		.loc 6 345 0
 2332 0b6e 1092 0000 		sts msgReq+7,__zero_reg__
 346:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2333               		.loc 6 346 0
 2334 0b72 1092 0000 		sts msgReq+8,__zero_reg__
 347:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2335               		.loc 6 347 0
 2336 0b76 80E0      		ldi r24,0
 2337 0b78 90E4      		ldi r25,lo8(64)
 2338 0b7a 9093 0000 		sts msgReq+9+1,r25
 2339 0b7e 8093 0000 		sts msgReq+9,r24
 348:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2340               		.loc 6 348 0
 2341 0b82 80E0      		ldi r24,lo8(ACKFrame)
 2342 0b84 90E0      		ldi r25,hi8(ACKFrame)
 2343 0b86 9093 0000 		sts msgReq+13+1,r25
 2344 0b8a 8093 0000 		sts msgReq+13,r24
 349:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2345               		.loc 6 349 0
 2346 0b8e 8091 0000 		lds r24,ACKFrame_size
 2347 0b92 9091 0000 		lds r25,ACKFrame_size+1
 2348 0b96 8F5F      		subi r24,lo8(-(1))
 2349 0b98 8093 0000 		sts msgReq+15,r24
 350:ServerLLDN.c  **** 
 351:ServerLLDN.c  **** 	}
 2350               		.loc 6 351 0
 2351 0b9c 0000      		nop
 2352               	/* epilogue start */
 2353 0b9e DF91      		pop r29
 2354 0ba0 CF91      		pop r28
 2355 0ba2 0895      		ret
 2356               		.cfi_endproc
 2357               	.LFE142:
 2360               	appPanReset:
 2361               	.LFB143:
 352:ServerLLDN.c  **** 
 353:ServerLLDN.c  **** 	static void appPanReset(void)
 354:ServerLLDN.c  **** 	{
 2362               		.loc 6 354 0
 2363               		.cfi_startproc
 2364 0ba4 CF93      		push r28
 2365               	.LCFI95:
 2366               		.cfi_def_cfa_offset 3
 2367               		.cfi_offset 28, -2
 2368 0ba6 DF93      		push r29
 2369               	.LCFI96:
 2370               		.cfi_def_cfa_offset 4
 2371               		.cfi_offset 29, -3
 2372 0ba8 00D0      		rcall .
 2373 0baa 00D0      		rcall .
 2374 0bac 00D0      		rcall .
 2375               	.LCFI97:
 2376               		.cfi_def_cfa_offset 10
 2377 0bae CDB7      		in r28,__SP_L__
 2378 0bb0 DEB7      		in r29,__SP_H__
 2379               	.LCFI98:
 2380               		.cfi_def_cfa_register 28
 2381               	/* prologue: function */
 2382               	/* frame size = 6 */
 2383               	/* stack size = 8 */
 2384               	.L__stack_usage = 8
 355:ServerLLDN.c  **** 		// prepare beacon reset message
 356:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2385               		.loc 6 356 0
 2386 0bb2 1092 0000 		sts msgReq+5+1,__zero_reg__
 2387 0bb6 1092 0000 		sts msgReq+5,__zero_reg__
 357:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2388               		.loc 6 357 0
 2389 0bba 1092 0000 		sts msgReq+7,__zero_reg__
 358:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2390               		.loc 6 358 0
 2391 0bbe 1092 0000 		sts msgReq+8,__zero_reg__
 359:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2392               		.loc 6 359 0
 2393 0bc2 80E4      		ldi r24,lo8(64)
 2394 0bc4 94E0      		ldi r25,lo8(4)
 2395 0bc6 9093 0000 		sts msgReq+9+1,r25
 2396 0bca 8093 0000 		sts msgReq+9,r24
 360:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2397               		.loc 6 360 0
 2398 0bce 1092 0000 		sts msgReq+13+1,__zero_reg__
 2399 0bd2 1092 0000 		sts msgReq+13,__zero_reg__
 361:ServerLLDN.c  **** 		msgReq.size			= 0;
 2400               		.loc 6 361 0
 2401 0bd6 1092 0000 		sts msgReq+15,__zero_reg__
 2402               	.LBB8:
 362:ServerLLDN.c  **** 
 363:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2403               		.loc 6 363 0
 2404 0bda 1A82      		std Y+2,__zero_reg__
 2405 0bdc 1982      		std Y+1,__zero_reg__
 2406 0bde 00C0      		rjmp .L66
 2407               	.L67:
 364:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2408               		.loc 6 364 0 discriminator 3
 2409 0be0 8981      		ldd r24,Y+1
 2410 0be2 9A81      		ldd r25,Y+2
 2411 0be4 8050      		subi r24,lo8(-(ACKFrame+1))
 2412 0be6 9040      		sbci r25,hi8(-(ACKFrame+1))
 2413 0be8 FC01      		movw r30,r24
 2414 0bea 1082      		st Z,__zero_reg__
 363:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2415               		.loc 6 363 0 discriminator 3
 2416 0bec 8981      		ldd r24,Y+1
 2417 0bee 9A81      		ldd r25,Y+2
 2418 0bf0 0196      		adiw r24,1
 2419 0bf2 9A83      		std Y+2,r25
 2420 0bf4 8983      		std Y+1,r24
 2421               	.L66:
 363:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2422               		.loc 6 363 0 is_stmt 0 discriminator 1
 2423 0bf6 8981      		ldd r24,Y+1
 2424 0bf8 9A81      		ldd r25,Y+2
 2425 0bfa 8097      		sbiw r24,32
 2426 0bfc 04F0      		brlt .L67
 2427               	.LBE8:
 2428               	.LBB9:
 365:ServerLLDN.c  **** 			
 366:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2429               		.loc 6 366 0 is_stmt 1
 2430 0bfe 1C82      		std Y+4,__zero_reg__
 2431 0c00 1B82      		std Y+3,__zero_reg__
 2432 0c02 00C0      		rjmp .L68
 2433               	.L71:
 367:ServerLLDN.c  **** 		{
 368:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2434               		.loc 6 368 0
 2435 0c04 2B81      		ldd r18,Y+3
 2436 0c06 3C81      		ldd r19,Y+4
 2437 0c08 4AE4      		ldi r20,lo8(74)
 2438 0c0a 429F      		mul r20,r18
 2439 0c0c C001      		movw r24,r0
 2440 0c0e 439F      		mul r20,r19
 2441 0c10 900D      		add r25,r0
 2442 0c12 1124      		clr __zero_reg__
 2443 0c14 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2444 0c16 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2445 0c18 FC01      		movw r30,r24
 2446 0c1a 1182      		std Z+1,__zero_reg__
 2447 0c1c 1082      		st Z,__zero_reg__
 369:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2448               		.loc 6 369 0
 2449 0c1e 2B81      		ldd r18,Y+3
 2450 0c20 3C81      		ldd r19,Y+4
 2451 0c22 4AE4      		ldi r20,lo8(74)
 2452 0c24 429F      		mul r20,r18
 2453 0c26 C001      		movw r24,r0
 2454 0c28 439F      		mul r20,r19
 2455 0c2a 900D      		add r25,r0
 2456 0c2c 1124      		clr __zero_reg__
 2457 0c2e 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2458 0c30 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2459 0c32 FC01      		movw r30,r24
 2460 0c34 1182      		std Z+1,__zero_reg__
 2461 0c36 1082      		st Z,__zero_reg__
 370:ServerLLDN.c  **** 
 371:ServerLLDN.c  **** 			
 372:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2462               		.loc 6 372 0
 2463 0c38 2B81      		ldd r18,Y+3
 2464 0c3a 3C81      		ldd r19,Y+4
 2465 0c3c 44E8      		ldi r20,lo8(-124)
 2466 0c3e 429F      		mul r20,r18
 2467 0c40 C001      		movw r24,r0
 2468 0c42 439F      		mul r20,r19
 2469 0c44 900D      		add r25,r0
 2470 0c46 1124      		clr __zero_reg__
 2471 0c48 8050      		subi r24,lo8(-(msg_info_array))
 2472 0c4a 9040      		sbci r25,hi8(-(msg_info_array))
 2473 0c4c FC01      		movw r30,r24
 2474 0c4e 1182      		std Z+1,__zero_reg__
 2475 0c50 1082      		st Z,__zero_reg__
 373:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2476               		.loc 6 373 0
 2477 0c52 2B81      		ldd r18,Y+3
 2478 0c54 3C81      		ldd r19,Y+4
 2479 0c56 44E8      		ldi r20,lo8(-124)
 2480 0c58 429F      		mul r20,r18
 2481 0c5a C001      		movw r24,r0
 2482 0c5c 439F      		mul r20,r19
 2483 0c5e 900D      		add r25,r0
 2484 0c60 1124      		clr __zero_reg__
 2485 0c62 8050      		subi r24,lo8(-(msg_info_array+2))
 2486 0c64 9040      		sbci r25,hi8(-(msg_info_array+2))
 2487 0c66 FC01      		movw r30,r24
 2488 0c68 1182      		std Z+1,__zero_reg__
 2489 0c6a 1082      		st Z,__zero_reg__
 2490               	.LBB10:
 374:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2491               		.loc 6 374 0
 2492 0c6c 1E82      		std Y+6,__zero_reg__
 2493 0c6e 1D82      		std Y+5,__zero_reg__
 2494 0c70 00C0      		rjmp .L69
 2495               	.L70:
 375:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2496               		.loc 6 375 0 discriminator 3
 2497 0c72 8B81      		ldd r24,Y+3
 2498 0c74 9C81      		ldd r25,Y+4
 2499 0c76 4AE4      		ldi r20,lo8(74)
 2500 0c78 489F      		mul r20,r24
 2501 0c7a 9001      		movw r18,r0
 2502 0c7c 499F      		mul r20,r25
 2503 0c7e 300D      		add r19,r0
 2504 0c80 1124      		clr __zero_reg__
 2505 0c82 8D81      		ldd r24,Y+5
 2506 0c84 9E81      		ldd r25,Y+6
 2507 0c86 820F      		add r24,r18
 2508 0c88 931F      		adc r25,r19
 2509 0c8a 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2510 0c8c 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2511 0c8e FC01      		movw r30,r24
 2512 0c90 1082      		st Z,__zero_reg__
 374:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2513               		.loc 6 374 0 discriminator 3
 2514 0c92 8D81      		ldd r24,Y+5
 2515 0c94 9E81      		ldd r25,Y+6
 2516 0c96 0196      		adiw r24,1
 2517 0c98 9E83      		std Y+6,r25
 2518 0c9a 8D83      		std Y+5,r24
 2519               	.L69:
 374:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2520               		.loc 6 374 0 is_stmt 0 discriminator 1
 2521 0c9c 8D81      		ldd r24,Y+5
 2522 0c9e 9E81      		ldd r25,Y+6
 2523 0ca0 C297      		sbiw r24,50
 2524 0ca2 04F0      		brlt .L70
 2525               	.LBE10:
 366:ServerLLDN.c  **** 		{
 2526               		.loc 6 366 0 is_stmt 1 discriminator 2
 2527 0ca4 8B81      		ldd r24,Y+3
 2528 0ca6 9C81      		ldd r25,Y+4
 2529 0ca8 0196      		adiw r24,1
 2530 0caa 9C83      		std Y+4,r25
 2531 0cac 8B83      		std Y+3,r24
 2532               	.L68:
 366:ServerLLDN.c  **** 		{
 2533               		.loc 6 366 0 is_stmt 0 discriminator 1
 2534 0cae 8B81      		ldd r24,Y+3
 2535 0cb0 9C81      		ldd r25,Y+4
 2536 0cb2 C297      		sbiw r24,50
 2537 0cb4 04F4      		brge .+2
 2538 0cb6 00C0      		rjmp .L71
 2539               	.LBE9:
 376:ServerLLDN.c  **** 		}
 377:ServerLLDN.c  **** 		// assTimeSlot = MacLLDNMgmtTS * 2;	
 378:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2540               		.loc 6 378 0 is_stmt 1
 2541 0cb8 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2542 0cbc 1092 0000 		sts ACKFrame_size,__zero_reg__
 379:ServerLLDN.c  **** 		counter_associados = 0;
 2543               		.loc 6 379 0
 2544 0cc0 1092 0000 		sts counter_associados+1,__zero_reg__
 2545 0cc4 1092 0000 		sts counter_associados,__zero_reg__
 380:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2546               		.loc 6 380 0
 2547 0cc8 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2548 0ccc 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 381:ServerLLDN.c  **** 		n = 0;
 2549               		.loc 6 381 0
 2550 0cd0 1092 0000 		sts n,__zero_reg__
 382:ServerLLDN.c  **** 	}
 2551               		.loc 6 382 0
 2552 0cd4 0000      		nop
 2553               	/* epilogue start */
 2554 0cd6 2696      		adiw r28,6
 2555 0cd8 0FB6      		in __tmp_reg__,__SREG__
 2556 0cda F894      		cli
 2557 0cdc DEBF      		out __SP_H__,r29
 2558 0cde 0FBE      		out __SREG__,__tmp_reg__
 2559 0ce0 CDBF      		out __SP_L__,r28
 2560 0ce2 DF91      		pop r29
 2561 0ce4 CF91      		pop r28
 2562 0ce6 0895      		ret
 2563               		.cfi_endproc
 2564               	.LFE143:
 2566               	.global	__fixunssfsi
 2568               	appPanDiscInit:
 2569               	.LFB144:
 383:ServerLLDN.c  **** 
 384:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 385:ServerLLDN.c  **** 	{	
 2570               		.loc 6 385 0
 2571               		.cfi_startproc
 2572 0ce8 CF93      		push r28
 2573               	.LCFI99:
 2574               		.cfi_def_cfa_offset 3
 2575               		.cfi_offset 28, -2
 2576 0cea DF93      		push r29
 2577               	.LCFI100:
 2578               		.cfi_def_cfa_offset 4
 2579               		.cfi_offset 29, -3
 2580 0cec 00D0      		rcall .
 2581               	.LCFI101:
 2582               		.cfi_def_cfa_offset 6
 2583 0cee CDB7      		in r28,__SP_L__
 2584 0cf0 DEB7      		in r29,__SP_H__
 2585               	.LCFI102:
 2586               		.cfi_def_cfa_register 28
 2587               	/* prologue: function */
 2588               	/* frame size = 2 */
 2589               	/* stack size = 4 */
 2590               	.L__stack_usage = 4
 2591               	.LBB11:
 386:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 387:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2592               		.loc 6 387 0
 2593 0cf2 1A82      		std Y+2,__zero_reg__
 2594 0cf4 1982      		std Y+1,__zero_reg__
 2595 0cf6 00C0      		rjmp .L73
 2596               	.L74:
 388:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2597               		.loc 6 388 0 discriminator 3
 2598 0cf8 8981      		ldd r24,Y+1
 2599 0cfa 9A81      		ldd r25,Y+2
 2600 0cfc 8050      		subi r24,lo8(-(ACKFrame+1))
 2601 0cfe 9040      		sbci r25,hi8(-(ACKFrame+1))
 2602 0d00 FC01      		movw r30,r24
 2603 0d02 1082      		st Z,__zero_reg__
 387:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2604               		.loc 6 387 0 discriminator 3
 2605 0d04 8981      		ldd r24,Y+1
 2606 0d06 9A81      		ldd r25,Y+2
 2607 0d08 0196      		adiw r24,1
 2608 0d0a 9A83      		std Y+2,r25
 2609 0d0c 8983      		std Y+1,r24
 2610               	.L73:
 387:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2611               		.loc 6 387 0 is_stmt 0 discriminator 1
 2612 0d0e 8981      		ldd r24,Y+1
 2613 0d10 9A81      		ldd r25,Y+2
 2614 0d12 8097      		sbiw r24,32
 2615 0d14 04F0      		brlt .L74
 2616               	.LBE11:
 389:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2617               		.loc 6 389 0 is_stmt 1
 2618 0d16 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2619 0d1a 1092 0000 		sts ACKFrame_size,__zero_reg__
 390:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 391:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2620               		.loc 6 391 0
 2621 0d1e 1092 0000 		sts msgReq+5+1,__zero_reg__
 2622 0d22 1092 0000 		sts msgReq+5,__zero_reg__
 392:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2623               		.loc 6 392 0
 2624 0d26 1092 0000 		sts msgReq+7,__zero_reg__
 393:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2625               		.loc 6 393 0
 2626 0d2a 1092 0000 		sts msgReq+8,__zero_reg__
 394:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2627               		.loc 6 394 0
 2628 0d2e 80E4      		ldi r24,lo8(64)
 2629 0d30 91E0      		ldi r25,lo8(1)
 2630 0d32 9093 0000 		sts msgReq+9+1,r25
 2631 0d36 8093 0000 		sts msgReq+9,r24
 395:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2632               		.loc 6 395 0
 2633 0d3a 1092 0000 		sts msgReq+13+1,__zero_reg__
 2634 0d3e 1092 0000 		sts msgReq+13,__zero_reg__
 396:ServerLLDN.c  **** 		msgReq.size					= 0;
 2635               		.loc 6 396 0
 2636 0d42 1092 0000 		sts msgReq+15,__zero_reg__
 397:ServerLLDN.c  **** 		
 398:ServerLLDN.c  **** 		macLLDNnumTimeSlots = 2;
 2637               		.loc 6 398 0
 2638 0d46 82E0      		ldi r24,lo8(2)
 2639 0d48 90E0      		ldi r25,0
 2640 0d4a 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 2641 0d4e 8093 0000 		sts macLLDNnumTimeSlots,r24
 399:ServerLLDN.c  **** 		
 400:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 401:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2642               		.loc 6 401 0
 2643 0d52 8091 0000 		lds r24,cycles_counter
 2644 0d56 8823      		tst r24
 2645 0d58 01F0      		breq .+2
 2646 0d5a 00C0      		rjmp .L76
 402:ServerLLDN.c  **** 		{
 403:ServerLLDN.c  **** 			
 404:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 405:ServerLLDN.c  **** 		n = 127; 
 2647               		.loc 6 405 0
 2648 0d5c 8FE7      		ldi r24,lo8(127)
 2649 0d5e 8093 0000 		sts n,r24
 406:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2650               		.loc 6 406 0
 2651 0d62 8091 0000 		lds r24,n
 2652 0d66 882F      		mov r24,r24
 2653 0d68 90E0      		ldi r25,0
 2654 0d6a 0396      		adiw r24,3
 2655 0d6c 880F      		lsl r24
 2656 0d6e 991F      		rol r25
 2657 0d70 092E      		mov __tmp_reg__,r25
 2658 0d72 000C      		lsl r0
 2659 0d74 AA0B      		sbc r26,r26
 2660 0d76 BB0B      		sbc r27,r27
 2661 0d78 BC01      		movw r22,r24
 2662 0d7a CD01      		movw r24,r26
 2663 0d7c 0E94 0000 		call __floatsisf
 2664 0d80 DC01      		movw r26,r24
 2665 0d82 CB01      		movw r24,r22
 2666 0d84 20E0      		ldi r18,0
 2667 0d86 30E0      		ldi r19,0
 2668 0d88 40E4      		ldi r20,lo8(64)
 2669 0d8a 51E4      		ldi r21,lo8(65)
 2670 0d8c BC01      		movw r22,r24
 2671 0d8e CD01      		movw r24,r26
 2672 0d90 0E94 0000 		call __addsf3
 2673 0d94 DC01      		movw r26,r24
 2674 0d96 CB01      		movw r24,r22
 2675 0d98 20E0      		ldi r18,0
 2676 0d9a 30E0      		ldi r19,0
 2677 0d9c 40E2      		ldi r20,lo8(32)
 2678 0d9e 52E4      		ldi r21,lo8(66)
 2679 0da0 BC01      		movw r22,r24
 2680 0da2 CD01      		movw r24,r26
 2681 0da4 0E94 0000 		call __addsf3
 2682 0da8 DC01      		movw r26,r24
 2683 0daa CB01      		movw r24,r22
 2684 0dac 20E0      		ldi r18,0
 2685 0dae 34E2      		ldi r19,lo8(36)
 2686 0db0 44E7      		ldi r20,lo8(116)
 2687 0db2 57E4      		ldi r21,lo8(71)
 2688 0db4 BC01      		movw r22,r24
 2689 0db6 CD01      		movw r24,r26
 2690 0db8 0E94 0000 		call __divsf3
 2691 0dbc DC01      		movw r26,r24
 2692 0dbe CB01      		movw r24,r22
 2693 0dc0 8093 0000 		sts tTS,r24
 2694 0dc4 9093 0000 		sts tTS+1,r25
 2695 0dc8 A093 0000 		sts tTS+2,r26
 2696 0dcc B093 0000 		sts tTS+3,r27
 407:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 408:ServerLLDN.c  **** 		
 409:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2697               		.loc 6 409 0
 2698 0dd0 8091 0000 		lds r24,tTS
 2699 0dd4 9091 0000 		lds r25,tTS+1
 2700 0dd8 A091 0000 		lds r26,tTS+2
 2701 0ddc B091 0000 		lds r27,tTS+3
 2702 0de0 20E0      		ldi r18,0
 2703 0de2 30E0      		ldi r19,0
 2704 0de4 40E8      		ldi r20,lo8(-128)
 2705 0de6 50E4      		ldi r21,lo8(64)
 2706 0de8 BC01      		movw r22,r24
 2707 0dea CD01      		movw r24,r26
 2708 0dec 0E94 0000 		call __mulsf3
 2709 0df0 DC01      		movw r26,r24
 2710 0df2 CB01      		movw r24,r22
 2711 0df4 2DEB      		ldi r18,lo8(-67)
 2712 0df6 37E3      		ldi r19,lo8(55)
 2713 0df8 46E8      		ldi r20,lo8(-122)
 2714 0dfa 57E3      		ldi r21,lo8(55)
 2715 0dfc BC01      		movw r22,r24
 2716 0dfe CD01      		movw r24,r26
 2717 0e00 0E94 0000 		call __divsf3
 2718 0e04 DC01      		movw r26,r24
 2719 0e06 CB01      		movw r24,r22
 2720 0e08 8093 0000 		sts beaconInterval_association,r24
 2721 0e0c 9093 0000 		sts beaconInterval_association+1,r25
 2722 0e10 A093 0000 		sts beaconInterval_association+2,r26
 2723 0e14 B093 0000 		sts beaconInterval_association+3,r27
 410:ServerLLDN.c  **** 			#if PRINT
 411:ServerLLDN.c  **** // 			printf("\n Beacon interval %f", beaconInterval_association);
 412:ServerLLDN.c  **** 			#endif
 413:ServerLLDN.c  **** 			/*
 414:ServerLLDN.c  **** 			* Configure interrupts callback functions
 415:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 416:ServerLLDN.c  **** 			*/
 417:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2724               		.loc 6 417 0
 2725 0e18 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2726 0e1a 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2727 0e1c 0E94 0000 		call macsc_set_cmp1_int_cb
 418:ServerLLDN.c  **** 			/*
 419:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 420:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 421:ServerLLDN.c  **** 			*/
 422:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2728               		.loc 6 422 0
 2729 0e20 0E94 0000 		call macsc_enable_manual_bts
 423:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2730               		.loc 6 423 0
 2731 0e24 81E0      		ldi r24,lo8(1)
 2732 0e26 0E94 0000 		call macsc_enable_cmp_int
 424:ServerLLDN.c  **** 
 425:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2733               		.loc 6 425 0
 2734 0e2a 8091 0000 		lds r24,beaconInterval_association
 2735 0e2e 9091 0000 		lds r25,beaconInterval_association+1
 2736 0e32 A091 0000 		lds r26,beaconInterval_association+2
 2737 0e36 B091 0000 		lds r27,beaconInterval_association+3
 2738 0e3a BC01      		movw r22,r24
 2739 0e3c CD01      		movw r24,r26
 2740 0e3e 0E94 0000 		call __fixunssfsi
 2741 0e42 DC01      		movw r26,r24
 2742 0e44 CB01      		movw r24,r22
 2743 0e46 21E0      		ldi r18,lo8(1)
 2744 0e48 AC01      		movw r20,r24
 2745 0e4a BD01      		movw r22,r26
 2746 0e4c 81E0      		ldi r24,lo8(1)
 2747 0e4e 0E94 0000 		call macsc_use_cmp
 2748               	.L76:
 426:ServerLLDN.c  **** 			
 427:ServerLLDN.c  **** 			/* Timer used in testing */
 428:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 429:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 430:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 431:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 432:ServerLLDN.c  **** 			#endif
 433:ServerLLDN.c  **** 			
 434:ServerLLDN.c  **** 		#endif
 435:ServerLLDN.c  **** 		}
 436:ServerLLDN.c  **** 	}
 2749               		.loc 6 436 0
 2750 0e52 0000      		nop
 2751               	/* epilogue start */
 2752 0e54 0F90      		pop __tmp_reg__
 2753 0e56 0F90      		pop __tmp_reg__
 2754 0e58 DF91      		pop r29
 2755 0e5a CF91      		pop r28
 2756 0e5c 0895      		ret
 2757               		.cfi_endproc
 2758               	.LFE144:
 2761               	end_of_superframe_Online:
 2762               	.LFB145:
 437:ServerLLDN.c  **** 	
 438:ServerLLDN.c  **** 	static void end_of_superframe_Online(void)
 439:ServerLLDN.c  **** 	{
 2763               		.loc 6 439 0
 2764               		.cfi_startproc
 2765 0e5e CF93      		push r28
 2766               	.LCFI103:
 2767               		.cfi_def_cfa_offset 3
 2768               		.cfi_offset 28, -2
 2769 0e60 DF93      		push r29
 2770               	.LCFI104:
 2771               		.cfi_def_cfa_offset 4
 2772               		.cfi_offset 29, -3
 2773 0e62 CDB7      		in r28,__SP_L__
 2774 0e64 DEB7      		in r29,__SP_H__
 2775               	.LCFI105:
 2776               		.cfi_def_cfa_register 28
 2777               	/* prologue: function */
 2778               	/* frame size = 0 */
 2779               	/* stack size = 2 */
 2780               	.L__stack_usage = 2
 440:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 2781               		.loc 6 440 0
 2782 0e66 89E0      		ldi r24,lo8(9)
 2783 0e68 8093 0000 		sts appPanState,r24
 441:ServerLLDN.c  **** 		if(cycles_counter>0)
 2784               		.loc 6 441 0
 2785 0e6c 8091 0000 		lds r24,cycles_counter
 2786 0e70 8823      		tst r24
 2787 0e72 01F0      		breq .L78
 442:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 2788               		.loc 6 442 0
 2789 0e74 82E0      		ldi r24,lo8(2)
 2790 0e76 8093 0000 		sts appState,r24
 443:ServerLLDN.c  **** 		else
 444:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 445:ServerLLDN.c  **** 
 446:ServerLLDN.c  **** 	}
 2791               		.loc 6 446 0
 2792 0e7a 00C0      		rjmp .L80
 2793               	.L78:
 444:ServerLLDN.c  **** 
 2794               		.loc 6 444 0
 2795 0e7c 83E0      		ldi r24,lo8(3)
 2796 0e7e 8093 0000 		sts appState,r24
 2797               	.L80:
 2798               		.loc 6 446 0
 2799 0e82 0000      		nop
 2800               	/* epilogue start */
 2801 0e84 DF91      		pop r29
 2802 0e86 CF91      		pop r28
 2803 0e88 0895      		ret
 2804               		.cfi_endproc
 2805               	.LFE145:
 2808               	send_gack:
 2809               	.LFB146:
 447:ServerLLDN.c  **** 	
 448:ServerLLDN.c  **** 	static void send_gack(void)
 449:ServerLLDN.c  **** 	{
 2810               		.loc 6 449 0
 2811               		.cfi_startproc
 2812 0e8a CF93      		push r28
 2813               	.LCFI106:
 2814               		.cfi_def_cfa_offset 3
 2815               		.cfi_offset 28, -2
 2816 0e8c DF93      		push r29
 2817               	.LCFI107:
 2818               		.cfi_def_cfa_offset 4
 2819               		.cfi_offset 29, -3
 2820 0e8e 00D0      		rcall .
 2821               	.LCFI108:
 2822               		.cfi_def_cfa_offset 6
 2823 0e90 CDB7      		in r28,__SP_L__
 2824 0e92 DEB7      		in r29,__SP_H__
 2825               	.LCFI109:
 2826               		.cfi_def_cfa_register 28
 2827               	/* prologue: function */
 2828               	/* frame size = 2 */
 2829               	/* stack size = 4 */
 2830               	.L__stack_usage = 4
 450:ServerLLDN.c  **** 		msgReqGACK.size = sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 2831               		.loc 6 450 0
 2832 0e94 8091 0000 		lds r24,macLLDNRetransmitTS
 2833 0e98 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2834 0e9c 8F5F      		subi r24,lo8(-(1))
 2835 0e9e 8093 0000 		sts msgReqGACK+15,r24
 451:ServerLLDN.c  **** 		NWK_DataReq(&msgReqGACK);
 2836               		.loc 6 451 0
 2837 0ea2 80E0      		ldi r24,lo8(msgReqGACK)
 2838 0ea4 90E0      		ldi r25,hi8(msgReqGACK)
 2839 0ea6 0E94 0000 		call NWK_DataReq
 452:ServerLLDN.c  **** 		ACKFrame_aux = ACKFrame;
 2840               		.loc 6 452 0
 2841 0eaa 81E2      		ldi r24,lo8(33)
 2842 0eac E0E0      		ldi r30,lo8(ACKFrame)
 2843 0eae F0E0      		ldi r31,hi8(ACKFrame)
 2844 0eb0 A0E0      		ldi r26,lo8(ACKFrame_aux)
 2845 0eb2 B0E0      		ldi r27,hi8(ACKFrame_aux)
 2846               		0:
 2847 0eb4 0190      		ld r0,Z+
 2848 0eb6 0D92      		st X+,r0
 2849 0eb8 8A95      		dec r24
 2850 0eba 01F4      		brne 0b
 453:ServerLLDN.c  **** 		#if PRINT
 454:ServerLLDN.c  **** // 		printf("\n%hhx ", ACKFrame.ackFlags[0]);
 455:ServerLLDN.c  **** 		#endif
 456:ServerLLDN.c  **** 		if(cycles_counter<NUMERO_CICLOS_ONLINE-1)
 2851               		.loc 6 456 0
 2852 0ebc 8091 0000 		lds r24,cycles_counter
 2853 0ec0 8431      		cpi r24,lo8(20)
 2854 0ec2 00F4      		brsh .L86
 2855               	.LBB12:
 457:ServerLLDN.c  **** 		{
 458:ServerLLDN.c  **** 			for (int i  = 0; i < assTimeSlot;i++)
 2856               		.loc 6 458 0
 2857 0ec4 1A82      		std Y+2,__zero_reg__
 2858 0ec6 1982      		std Y+1,__zero_reg__
 2859 0ec8 00C0      		rjmp .L83
 2860               	.L85:
 459:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2861               		.loc 6 459 0
 2862 0eca 8981      		ldd r24,Y+1
 2863 0ecc 9A81      		ldd r25,Y+2
 2864 0ece 0196      		adiw r24,1
 2865 0ed0 0E94 0000 		call check_ack_pan
 2866 0ed4 982F      		mov r25,r24
 2867 0ed6 81E0      		ldi r24,lo8(1)
 2868 0ed8 8927      		eor r24,r25
 2869 0eda 8823      		tst r24
 2870 0edc 01F0      		breq .L84
 460:ServerLLDN.c  **** 				{
 461:ServerLLDN.c  **** 					nodes_info_arr[i].msg_not_rec++;
 2871               		.loc 6 461 0
 2872 0ede 2981      		ldd r18,Y+1
 2873 0ee0 3A81      		ldd r19,Y+2
 2874 0ee2 4AE4      		ldi r20,lo8(74)
 2875 0ee4 429F      		mul r20,r18
 2876 0ee6 C001      		movw r24,r0
 2877 0ee8 439F      		mul r20,r19
 2878 0eea 900D      		add r25,r0
 2879 0eec 1124      		clr __zero_reg__
 2880 0eee 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2881 0ef0 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2882 0ef2 FC01      		movw r30,r24
 2883 0ef4 8081      		ld r24,Z
 2884 0ef6 9181      		ldd r25,Z+1
 2885 0ef8 9C01      		movw r18,r24
 2886 0efa 2F5F      		subi r18,-1
 2887 0efc 3F4F      		sbci r19,-1
 2888 0efe 4981      		ldd r20,Y+1
 2889 0f00 5A81      		ldd r21,Y+2
 2890 0f02 6AE4      		ldi r22,lo8(74)
 2891 0f04 649F      		mul r22,r20
 2892 0f06 C001      		movw r24,r0
 2893 0f08 659F      		mul r22,r21
 2894 0f0a 900D      		add r25,r0
 2895 0f0c 1124      		clr __zero_reg__
 2896 0f0e 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2897 0f10 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2898 0f12 FC01      		movw r30,r24
 2899 0f14 3183      		std Z+1,r19
 2900 0f16 2083      		st Z,r18
 2901               	.L84:
 458:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2902               		.loc 6 458 0 discriminator 2
 2903 0f18 8981      		ldd r24,Y+1
 2904 0f1a 9A81      		ldd r25,Y+2
 2905 0f1c 0196      		adiw r24,1
 2906 0f1e 9A83      		std Y+2,r25
 2907 0f20 8983      		std Y+1,r24
 2908               	.L83:
 458:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2909               		.loc 6 458 0 is_stmt 0 discriminator 1
 2910 0f22 8091 0000 		lds r24,assTimeSlot
 2911 0f26 9091 0000 		lds r25,assTimeSlot+1
 2912 0f2a 2981      		ldd r18,Y+1
 2913 0f2c 3A81      		ldd r19,Y+2
 2914 0f2e 2817      		cp r18,r24
 2915 0f30 3907      		cpc r19,r25
 2916 0f32 04F0      		brlt .L85
 2917               	.L86:
 2918               	.LBE12:
 462:ServerLLDN.c  **** 			}
 463:ServerLLDN.c  **** 		}
 464:ServerLLDN.c  **** 	}
 2919               		.loc 6 464 0 is_stmt 1
 2920 0f34 0000      		nop
 2921               	/* epilogue start */
 2922 0f36 0F90      		pop __tmp_reg__
 2923 0f38 0F90      		pop __tmp_reg__
 2924 0f3a DF91      		pop r29
 2925 0f3c CF91      		pop r28
 2926 0f3e 0895      		ret
 2927               		.cfi_endproc
 2928               	.LFE146:
 2931               	appPanOnlineInit:
 2932               	.LFB147:
 465:ServerLLDN.c  **** 
 466:ServerLLDN.c  **** 	static void appPanOnlineInit()
 467:ServerLLDN.c  **** 	{
 2933               		.loc 6 467 0
 2934               		.cfi_startproc
 2935 0f40 EF92      		push r14
 2936               	.LCFI110:
 2937               		.cfi_def_cfa_offset 3
 2938               		.cfi_offset 14, -2
 2939 0f42 FF92      		push r15
 2940               	.LCFI111:
 2941               		.cfi_def_cfa_offset 4
 2942               		.cfi_offset 15, -3
 2943 0f44 0F93      		push r16
 2944               	.LCFI112:
 2945               		.cfi_def_cfa_offset 5
 2946               		.cfi_offset 16, -4
 2947 0f46 1F93      		push r17
 2948               	.LCFI113:
 2949               		.cfi_def_cfa_offset 6
 2950               		.cfi_offset 17, -5
 2951 0f48 CF93      		push r28
 2952               	.LCFI114:
 2953               		.cfi_def_cfa_offset 7
 2954               		.cfi_offset 28, -6
 2955 0f4a DF93      		push r29
 2956               	.LCFI115:
 2957               		.cfi_def_cfa_offset 8
 2958               		.cfi_offset 29, -7
 2959 0f4c 00D0      		rcall .
 2960 0f4e 00D0      		rcall .
 2961 0f50 00D0      		rcall .
 2962               	.LCFI116:
 2963               		.cfi_def_cfa_offset 14
 2964 0f52 CDB7      		in r28,__SP_L__
 2965 0f54 DEB7      		in r29,__SP_H__
 2966               	.LCFI117:
 2967               		.cfi_def_cfa_register 28
 2968               	/* prologue: function */
 2969               	/* frame size = 6 */
 2970               	/* stack size = 12 */
 2971               	.L__stack_usage = 12
 468:ServerLLDN.c  **** 			timeslot_counter = 0;
 2972               		.loc 6 468 0
 2973 0f56 1092 0000 		sts timeslot_counter,__zero_reg__
 469:ServerLLDN.c  **** 			
 470:ServerLLDN.c  **** 			macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 2974               		.loc 6 470 0
 2975 0f5a 8091 0000 		lds r24,assTimeSlot
 2976 0f5e 9091 0000 		lds r25,assTimeSlot+1
 2977 0f62 880F      		lsl r24
 2978 0f64 991F      		rol r25
 2979 0f66 0196      		adiw r24,1
 2980 0f68 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 2981 0f6c 8093 0000 		sts macLLDNnumUplinkTS,r24
 471:ServerLLDN.c  **** 			macLLDNRetransmitTS = assTimeSlot;
 2982               		.loc 6 471 0
 2983 0f70 8091 0000 		lds r24,assTimeSlot
 2984 0f74 9091 0000 		lds r25,assTimeSlot+1
 2985 0f78 9093 0000 		sts macLLDNRetransmitTS+1,r25
 2986 0f7c 8093 0000 		sts macLLDNRetransmitTS,r24
 472:ServerLLDN.c  **** 			macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;			
 2987               		.loc 6 472 0
 2988 0f80 8091 0000 		lds r24,macLLDNnumUplinkTS
 2989 0f84 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 2990 0f88 0296      		adiw r24,2
 2991 0f8a 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 2992 0f8e 8093 0000 		sts macLLDNnumTimeSlots,r24
 473:ServerLLDN.c  **** 			
 474:ServerLLDN.c  **** // 			printf("\nmacLLDNnumUplinkTS : %d\nmacLLDNRetransmitTS : %d\nmacLLDNnumTimeSlots : %d",macLLD
 475:ServerLLDN.c  **** 			
 476:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration = 75;
 2993               		.loc 6 476 0
 2994 0f92 8091 0000 		lds r24,config_request_frame+5
 2995 0f96 8078      		andi r24,lo8(-128)
 2996 0f98 8B64      		ori r24,lo8(75)
 2997 0f9a 8093 0000 		sts config_request_frame+5,r24
 477:ServerLLDN.c  **** 			
 478:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 2998               		.loc 6 478 0
 2999 0f9e 8091 0000 		lds r24,config_request_frame+5
 3000 0fa2 8F77      		andi r24,lo8(127)
 3001 0fa4 882F      		mov r24,r24
 3002 0fa6 90E0      		ldi r25,0
 3003 0fa8 0396      		adiw r24,3
 3004 0faa 880F      		lsl r24
 3005 0fac 991F      		rol r25
 3006 0fae 092E      		mov __tmp_reg__,r25
 3007 0fb0 000C      		lsl r0
 3008 0fb2 AA0B      		sbc r26,r26
 3009 0fb4 BB0B      		sbc r27,r27
 3010 0fb6 BC01      		movw r22,r24
 3011 0fb8 CD01      		movw r24,r26
 3012 0fba 0E94 0000 		call __floatsisf
 3013 0fbe DC01      		movw r26,r24
 3014 0fc0 CB01      		movw r24,r22
 3015 0fc2 20E0      		ldi r18,0
 3016 0fc4 30E0      		ldi r19,0
 3017 0fc6 40E4      		ldi r20,lo8(64)
 3018 0fc8 51E4      		ldi r21,lo8(65)
 3019 0fca BC01      		movw r22,r24
 3020 0fcc CD01      		movw r24,r26
 3021 0fce 0E94 0000 		call __addsf3
 3022 0fd2 DC01      		movw r26,r24
 3023 0fd4 CB01      		movw r24,r22
 3024 0fd6 20E0      		ldi r18,0
 3025 0fd8 30E0      		ldi r19,0
 3026 0fda 40E2      		ldi r20,lo8(32)
 3027 0fdc 52E4      		ldi r21,lo8(66)
 3028 0fde BC01      		movw r22,r24
 3029 0fe0 CD01      		movw r24,r26
 3030 0fe2 0E94 0000 		call __addsf3
 3031 0fe6 DC01      		movw r26,r24
 3032 0fe8 CB01      		movw r24,r22
 3033 0fea 20E0      		ldi r18,0
 3034 0fec 34E2      		ldi r19,lo8(36)
 3035 0fee 44E7      		ldi r20,lo8(116)
 3036 0ff0 57E4      		ldi r21,lo8(71)
 3037 0ff2 BC01      		movw r22,r24
 3038 0ff4 CD01      		movw r24,r26
 3039 0ff6 0E94 0000 		call __divsf3
 3040 0ffa DC01      		movw r26,r24
 3041 0ffc CB01      		movw r24,r22
 3042 0ffe 8093 0000 		sts tTS,r24
 3043 1002 9093 0000 		sts tTS+1,r25
 3044 1006 A093 0000 		sts tTS+2,r26
 3045 100a B093 0000 		sts tTS+3,r27
 479:ServerLLDN.c  **** 				
 480:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 3046               		.loc 6 480 0
 3047 100e 8091 0000 		lds r24,config_request_frame+5
 3048 1012 8F77      		andi r24,lo8(127)
 3049 1014 8093 0000 		sts n,r24
 481:ServerLLDN.c  **** 			
 482:ServerLLDN.c  **** 
 483:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 3050               		.loc 6 483 0
 3051 1018 1092 0000 		sts msgReq+5+1,__zero_reg__
 3052 101c 1092 0000 		sts msgReq+5,__zero_reg__
 484:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 3053               		.loc 6 484 0
 3054 1020 1092 0000 		sts msgReq+7,__zero_reg__
 485:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 3055               		.loc 6 485 0
 3056 1024 1092 0000 		sts msgReq+8,__zero_reg__
 486:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 3057               		.loc 6 486 0
 3058 1028 80EC      		ldi r24,lo8(-64)
 3059 102a 90E0      		ldi r25,0
 3060 102c 9093 0000 		sts msgReq+9+1,r25
 3061 1030 8093 0000 		sts msgReq+9,r24
 487:ServerLLDN.c  **** 			msgReq.data					= NULL;
 3062               		.loc 6 487 0
 3063 1034 1092 0000 		sts msgReq+13+1,__zero_reg__
 3064 1038 1092 0000 		sts msgReq+13,__zero_reg__
 488:ServerLLDN.c  **** 			msgReq.size					= 0;
 3065               		.loc 6 488 0
 3066 103c 1092 0000 		sts msgReq+15,__zero_reg__
 489:ServerLLDN.c  **** 			
 490:ServerLLDN.c  **** 			beaconInterval= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3067               		.loc 6 490 0
 3068 1040 8091 0000 		lds r24,macLLDNnumUplinkTS
 3069 1044 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3070 1048 0496      		adiw r24,4
 3071 104a 092E      		mov __tmp_reg__,r25
 3072 104c 000C      		lsl r0
 3073 104e AA0B      		sbc r26,r26
 3074 1050 BB0B      		sbc r27,r27
 3075 1052 BC01      		movw r22,r24
 3076 1054 CD01      		movw r24,r26
 3077 1056 0E94 0000 		call __floatsisf
 3078 105a 7B01      		movw r14,r22
 3079 105c 8C01      		movw r16,r24
 3080 105e 8091 0000 		lds r24,tTS
 3081 1062 9091 0000 		lds r25,tTS+1
 3082 1066 A091 0000 		lds r26,tTS+2
 3083 106a B091 0000 		lds r27,tTS+3
 3084 106e 9C01      		movw r18,r24
 3085 1070 AD01      		movw r20,r26
 3086 1072 C801      		movw r24,r16
 3087 1074 B701      		movw r22,r14
 3088 1076 0E94 0000 		call __mulsf3
 3089 107a DC01      		movw r26,r24
 3090 107c CB01      		movw r24,r22
 3091 107e 2DEB      		ldi r18,lo8(-67)
 3092 1080 37E3      		ldi r19,lo8(55)
 3093 1082 46E8      		ldi r20,lo8(-122)
 3094 1084 57E3      		ldi r21,lo8(55)
 3095 1086 BC01      		movw r22,r24
 3096 1088 CD01      		movw r24,r26
 3097 108a 0E94 0000 		call __divsf3
 3098 108e DC01      		movw r26,r24
 3099 1090 CB01      		movw r24,r22
 3100 1092 8093 0000 		sts beaconInterval,r24
 3101 1096 9093 0000 		sts beaconInterval+1,r25
 3102 109a A093 0000 		sts beaconInterval+2,r26
 3103 109e B093 0000 		sts beaconInterval+3,r27
 491:ServerLLDN.c  **** 			float GACK_tTS = (assTimeSlot + 0.2 + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3104               		.loc 6 491 0
 3105 10a2 8091 0000 		lds r24,assTimeSlot
 3106 10a6 9091 0000 		lds r25,assTimeSlot+1
 3107 10aa 092E      		mov __tmp_reg__,r25
 3108 10ac 000C      		lsl r0
 3109 10ae AA0B      		sbc r26,r26
 3110 10b0 BB0B      		sbc r27,r27
 3111 10b2 BC01      		movw r22,r24
 3112 10b4 CD01      		movw r24,r26
 3113 10b6 0E94 0000 		call __floatsisf
 3114 10ba DC01      		movw r26,r24
 3115 10bc CB01      		movw r24,r22
 3116 10be 2DEC      		ldi r18,lo8(-51)
 3117 10c0 3CEC      		ldi r19,lo8(-52)
 3118 10c2 4CE4      		ldi r20,lo8(76)
 3119 10c4 5EE3      		ldi r21,lo8(62)
 3120 10c6 BC01      		movw r22,r24
 3121 10c8 CD01      		movw r24,r26
 3122 10ca 0E94 0000 		call __addsf3
 3123 10ce DC01      		movw r26,r24
 3124 10d0 CB01      		movw r24,r22
 3125 10d2 20E0      		ldi r18,0
 3126 10d4 30E0      		ldi r19,0
 3127 10d6 40E8      		ldi r20,lo8(-128)
 3128 10d8 50E4      		ldi r21,lo8(64)
 3129 10da BC01      		movw r22,r24
 3130 10dc CD01      		movw r24,r26
 3131 10de 0E94 0000 		call __addsf3
 3132 10e2 DC01      		movw r26,r24
 3133 10e4 CB01      		movw r24,r22
 3134 10e6 7C01      		movw r14,r24
 3135 10e8 8D01      		movw r16,r26
 3136 10ea 8091 0000 		lds r24,tTS
 3137 10ee 9091 0000 		lds r25,tTS+1
 3138 10f2 A091 0000 		lds r26,tTS+2
 3139 10f6 B091 0000 		lds r27,tTS+3
 3140 10fa 9C01      		movw r18,r24
 3141 10fc AD01      		movw r20,r26
 3142 10fe C801      		movw r24,r16
 3143 1100 B701      		movw r22,r14
 3144 1102 0E94 0000 		call __mulsf3
 3145 1106 DC01      		movw r26,r24
 3146 1108 CB01      		movw r24,r22
 3147 110a 2DEB      		ldi r18,lo8(-67)
 3148 110c 37E3      		ldi r19,lo8(55)
 3149 110e 46E8      		ldi r20,lo8(-122)
 3150 1110 57E3      		ldi r21,lo8(55)
 3151 1112 BC01      		movw r22,r24
 3152 1114 CD01      		movw r24,r26
 3153 1116 0E94 0000 		call __divsf3
 3154 111a DC01      		movw r26,r24
 3155 111c CB01      		movw r24,r22
 3156 111e 8B83      		std Y+3,r24
 3157 1120 9C83      		std Y+4,r25
 3158 1122 AD83      		std Y+5,r26
 3159 1124 BE83      		std Y+6,r27
 492:ServerLLDN.c  **** 			macsc_write_count(0);
 3160               		.loc 6 492 0
 3161 1126 60E0      		ldi r22,0
 3162 1128 70E0      		ldi r23,0
 3163 112a CB01      		movw r24,r22
 3164 112c 0E94 0000 		call macsc_write_count
 493:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(end_of_superframe_Online);
 3165               		.loc 6 493 0
 3166 1130 80E0      		ldi r24,lo8(gs(end_of_superframe_Online))
 3167 1132 90E0      		ldi r25,hi8(gs(end_of_superframe_Online))
 3168 1134 0E94 0000 		call macsc_set_cmp1_int_cb
 494:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 3169               		.loc 6 494 0
 3170 1138 81E0      		ldi r24,lo8(1)
 3171 113a 0E94 0000 		call macsc_enable_cmp_int
 495:ServerLLDN.c  **** 
 496:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(send_gack);
 3172               		.loc 6 496 0
 3173 113e 80E0      		ldi r24,lo8(gs(send_gack))
 3174 1140 90E0      		ldi r25,hi8(gs(send_gack))
 3175 1142 0E94 0000 		call macsc_set_cmp2_int_cb
 497:ServerLLDN.c  **** 			if(cycles_counter != NUMERO_CICLOS_ONLINE)
 3176               		.loc 6 497 0
 3177 1146 8091 0000 		lds r24,cycles_counter
 3178 114a 8531      		cpi r24,lo8(21)
 3179 114c 01F0      		breq .L88
 498:ServerLLDN.c  **** 				macsc_enable_cmp_int(MACSC_CC2);
 3180               		.loc 6 498 0
 3181 114e 82E0      		ldi r24,lo8(2)
 3182 1150 0E94 0000 		call macsc_enable_cmp_int
 3183               	.L88:
 499:ServerLLDN.c  **** 
 500:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval, MACSC_CC1);
 3184               		.loc 6 500 0
 3185 1154 8091 0000 		lds r24,beaconInterval
 3186 1158 9091 0000 		lds r25,beaconInterval+1
 3187 115c A091 0000 		lds r26,beaconInterval+2
 3188 1160 B091 0000 		lds r27,beaconInterval+3
 3189 1164 BC01      		movw r22,r24
 3190 1166 CD01      		movw r24,r26
 3191 1168 0E94 0000 		call __fixunssfsi
 3192 116c DC01      		movw r26,r24
 3193 116e CB01      		movw r24,r22
 3194 1170 21E0      		ldi r18,lo8(1)
 3195 1172 AC01      		movw r20,r24
 3196 1174 BD01      		movw r22,r26
 3197 1176 81E0      		ldi r24,lo8(1)
 3198 1178 0E94 0000 		call macsc_use_cmp
 501:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, GACK_tTS, MACSC_CC2);
 3199               		.loc 6 501 0
 3200 117c 6B81      		ldd r22,Y+3
 3201 117e 7C81      		ldd r23,Y+4
 3202 1180 8D81      		ldd r24,Y+5
 3203 1182 9E81      		ldd r25,Y+6
 3204 1184 0E94 0000 		call __fixunssfsi
 3205 1188 DC01      		movw r26,r24
 3206 118a CB01      		movw r24,r22
 3207 118c 22E0      		ldi r18,lo8(2)
 3208 118e AC01      		movw r20,r24
 3209 1190 BD01      		movw r22,r26
 3210 1192 81E0      		ldi r24,lo8(1)
 3211 1194 0E94 0000 		call macsc_use_cmp
 502:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 3212               		.loc 6 502 0
 3213 1198 0E94 0000 		call macsc_enable_manual_bts
 503:ServerLLDN.c  **** 			
 504:ServerLLDN.c  **** 			cmp_value_start_superframe = macsc_read_count();
 3214               		.loc 6 504 0
 3215 119c 0E94 0000 		call macsc_read_count
 3216 11a0 DC01      		movw r26,r24
 3217 11a2 CB01      		movw r24,r22
 3218 11a4 8093 0000 		sts cmp_value_start_superframe,r24
 3219 11a8 9093 0000 		sts cmp_value_start_superframe+1,r25
 3220 11ac A093 0000 		sts cmp_value_start_superframe+2,r26
 3221 11b0 B093 0000 		sts cmp_value_start_superframe+3,r27
 3222               	.LBB13:
 505:ServerLLDN.c  **** 
 506:ServerLLDN.c  **** 
 507:ServerLLDN.c  **** 			for(int i = 0; i < 32; i++)
 3223               		.loc 6 507 0
 3224 11b4 1A82      		std Y+2,__zero_reg__
 3225 11b6 1982      		std Y+1,__zero_reg__
 3226 11b8 00C0      		rjmp .L89
 3227               	.L90:
 508:ServerLLDN.c  **** 			{
 509:ServerLLDN.c  **** 				ACKFrame.ackFlags[i] = 0;
 3228               		.loc 6 509 0 discriminator 3
 3229 11ba 8981      		ldd r24,Y+1
 3230 11bc 9A81      		ldd r25,Y+2
 3231 11be 8050      		subi r24,lo8(-(ACKFrame+1))
 3232 11c0 9040      		sbci r25,hi8(-(ACKFrame+1))
 3233 11c2 FC01      		movw r30,r24
 3234 11c4 1082      		st Z,__zero_reg__
 510:ServerLLDN.c  **** 				retransmit_ts_array[i] = 0;
 3235               		.loc 6 510 0 discriminator 3
 3236 11c6 8981      		ldd r24,Y+1
 3237 11c8 9A81      		ldd r25,Y+2
 3238 11ca 8050      		subi r24,lo8(-(retransmit_ts_array))
 3239 11cc 9040      		sbci r25,hi8(-(retransmit_ts_array))
 3240 11ce FC01      		movw r30,r24
 3241 11d0 1082      		st Z,__zero_reg__
 507:ServerLLDN.c  **** 			{
 3242               		.loc 6 507 0 discriminator 3
 3243 11d2 8981      		ldd r24,Y+1
 3244 11d4 9A81      		ldd r25,Y+2
 3245 11d6 0196      		adiw r24,1
 3246 11d8 9A83      		std Y+2,r25
 3247 11da 8983      		std Y+1,r24
 3248               	.L89:
 507:ServerLLDN.c  **** 			{
 3249               		.loc 6 507 0 is_stmt 0 discriminator 1
 3250 11dc 8981      		ldd r24,Y+1
 3251 11de 9A81      		ldd r25,Y+2
 3252 11e0 8097      		sbiw r24,32
 3253 11e2 04F0      		brlt .L90
 3254               	.LBE13:
 511:ServerLLDN.c  **** 			}
 512:ServerLLDN.c  **** 			retransmit_ts_array_counter = 0;
 3255               		.loc 6 512 0 is_stmt 1
 3256 11e4 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 3257 11e8 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
 513:ServerLLDN.c  **** 			ACKFrame_size = 0;
 3258               		.loc 6 513 0
 3259 11ec 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3260 11f0 1092 0000 		sts ACKFrame_size,__zero_reg__
 514:ServerLLDN.c  **** 			
 515:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 3261               		.loc 6 515 0
 3262 11f4 60E0      		ldi r22,lo8(gs(appDataInd))
 3263 11f6 70E0      		ldi r23,hi8(gs(appDataInd))
 3264 11f8 81E0      		ldi r24,lo8(1)
 3265 11fa 0E94 0000 		call NWK_OpenEndpoint
 516:ServerLLDN.c  **** 	}
 3266               		.loc 6 516 0
 3267 11fe 0000      		nop
 3268               	/* epilogue start */
 3269 1200 2696      		adiw r28,6
 3270 1202 0FB6      		in __tmp_reg__,__SREG__
 3271 1204 F894      		cli
 3272 1206 DEBF      		out __SP_H__,r29
 3273 1208 0FBE      		out __SREG__,__tmp_reg__
 3274 120a CDBF      		out __SP_L__,r28
 3275 120c DF91      		pop r29
 3276 120e CF91      		pop r28
 3277 1210 1F91      		pop r17
 3278 1212 0F91      		pop r16
 3279 1214 FF90      		pop r15
 3280 1216 EF90      		pop r14
 3281 1218 0895      		ret
 3282               		.cfi_endproc
 3283               	.LFE147:
 3286               	appInit:
 3287               	.LFB148:
 517:ServerLLDN.c  **** 
 518:ServerLLDN.c  **** #else 
 519:ServerLLDN.c  **** 	uint8_t payloadSize = 50;
 520:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 521:ServerLLDN.c  **** 	uint8_t n = 0;
 522:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 523:ServerLLDN.c  **** 
 524:ServerLLDN.c  **** 
 525:ServerLLDN.c  **** 	
 526:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t rec_beacon;
 527:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 528:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 529:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 530:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 50,
 531:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 532:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 533:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 534:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 535:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 50,
 536:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 537:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 538:ServerLLDN.c  **** 												 
 539:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqDiscResponse = { .dstAddr = 0,
 540:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 541:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 542:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 543:ServerLLDN.c  **** 									.data = (uint8_t*)&msgDiscResponse,
 544:ServerLLDN.c  **** 									.size = sizeof(msgDiscResponse)};
 545:ServerLLDN.c  **** 	
 546:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqConfigStatus = { .dstAddr =0,
 547:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 548:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 549:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 550:ServerLLDN.c  **** 									.data = (uint8_t*)&msgConfigStatus,
 551:ServerLLDN.c  **** 									.size = sizeof(msgConfigStatus)};
 552:ServerLLDN.c  **** 		
 553:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqData = { .dstAddr =0,
 554:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 555:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 556:ServerLLDN.c  **** 									.options = NWK_OPT_LLDN_DATA,
 557:ServerLLDN.c  **** 									.data = (uint8_t*)&data_payload,
 558:ServerLLDN.c  **** 									.size = sizeof(data_payload)};
 559:ServerLLDN.c  **** 
 560:ServerLLDN.c  **** 	static bool ack_received = false;
 561:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 562:ServerLLDN.c  **** 	bool associated = 0;
 563:ServerLLDN.c  **** 	int ts_time;
 564:ServerLLDN.c  **** 	uint8_t STATE = DISC_MODE;
 565:ServerLLDN.c  **** 	int tmr_error = 0;
 566:ServerLLDN.c  **** 	float delta_error = 0;
 567:ServerLLDN.c  **** 	int timeslot_counter = 0;
 568:ServerLLDN.c  **** 	bool beacon_tmr = false;
 569:ServerLLDN.c  **** 	uint32_t be_read = 0;
 570:ServerLLDN.c  **** 	uint32_t tmr_read= 0;
 571:ServerLLDN.c  **** 	int msg_wait_time;
 572:ServerLLDN.c  **** 	int ok_seq = -1;
 573:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 574:ServerLLDN.c  **** 	{
 575:ServerLLDN.c  **** 		appSendData();
 576:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 577:ServerLLDN.c  **** 			timer_stop();
 578:ServerLLDN.c  **** 		#else 
 579:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC1);
 580:ServerLLDN.c  **** 		#endif
 581:ServerLLDN.c  **** 	
 582:ServerLLDN.c  **** 	}
 583:ServerLLDN.c  **** 
 584:ServerLLDN.c  **** 	static void node_time_handler(void)
 585:ServerLLDN.c  **** 	{
 586:ServerLLDN.c  **** 		beacon_tmr = true;
 587:ServerLLDN.c  **** 		tmr_read = macsc_read_count();
 588:ServerLLDN.c  **** 		return;
 589:ServerLLDN.c  **** 	}
 590:ServerLLDN.c  **** 	
 591:ServerLLDN.c  **** 	
 592:ServerLLDN.c  **** 	static void disc_time_hndlr(void)
 593:ServerLLDN.c  **** 	{
 594:ServerLLDN.c  **** 		printf("\nDisc");
 595:ServerLLDN.c  **** 			NWK_DataReq(&msgReqDiscResponse);
 596:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 597:ServerLLDN.c  **** 		
 598:ServerLLDN.c  **** 	}
 599:ServerLLDN.c  **** 	
 600:ServerLLDN.c  **** 	static void config_time_hndlr(void)
 601:ServerLLDN.c  **** 	{
 602:ServerLLDN.c  **** 		if(ack_received)
 603:ServerLLDN.c  **** 		{
 604:ServerLLDN.c  **** 			NWK_DataReq(&msgReqConfigStatus);
 605:ServerLLDN.c  **** 			ack_received = false;
 606:ServerLLDN.c  **** 		}
 607:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 608:ServerLLDN.c  **** 		
 609:ServerLLDN.c  **** 	}
 610:ServerLLDN.c  **** 	
 611:ServerLLDN.c  **** 		
 612:ServerLLDN.c  **** 	static void online_time_hndlr(void)
 613:ServerLLDN.c  **** 	{
 614:ServerLLDN.c  **** 		printf("\ndata_msg");
 615:ServerLLDN.c  **** 		NWK_DataReq(&msgReqData);
 616:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);		
 617:ServerLLDN.c  **** 	}
 618:ServerLLDN.c  **** 	
 619:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 620:ServerLLDN.c  **** 	{
 621:ServerLLDN.c  **** 		NwkFrameBeaconHeaderLLDN_t *tmp_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 622:ServerLLDN.c  **** 		rec_beacon = *tmp_beacon;
 623:ServerLLDN.c  **** 		PanId = tmp_beacon->PanId;
 624:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+ tmp_beacon->TimeSlotSize )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME)
 625:ServerLLDN.c  **** 		printf("\nBE %f", tTS);
 626:ServerLLDN.c  **** 		if(rec_beacon.Flags.txState == STATE && rec_beacon.confSeqNumber == 0)
 627:ServerLLDN.c  **** 		{
 628:ServerLLDN.c  **** 			if(STATE == DISC_MODE) 
 629:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(disc_time_hndlr);
 630:ServerLLDN.c  **** 			else if(STATE == CONFIG_MODE)
 631:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(config_time_hndlr);
 632:ServerLLDN.c  **** 			else if(STATE == ONLINE_MODE)
 633:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(online_time_hndlr);
 634:ServerLLDN.c  **** 					
 635:ServerLLDN.c  **** 			
 636:ServerLLDN.c  **** 			
 637:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 638:ServerLLDN.c  **** 			{
 639:ServerLLDN.c  **** 				msg_wait_time = (2*rec_beacon.Flags.numBaseMgmtTimeslots + assTimeSlot) * tTS /*+ 80 + 45*assTi
 640:ServerLLDN.c  **** 				printf("msg_wait %d", msg_wait_time);
 641:ServerLLDN.c  **** 			}
 642:ServerLLDN.c  **** 			else	
 643:ServerLLDN.c  **** 				msg_wait_time = tTS * rec_beacon.Flags.numBaseMgmtTimeslots; 
 644:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 645:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time - 150, MACSC_CC1);
 646:ServerLLDN.c  ****  			macsc_enable_manual_bts();
 647:ServerLLDN.c  **** 			
 648:ServerLLDN.c  **** 		}
 649:ServerLLDN.c  **** 
 650:ServerLLDN.c  **** 		else if (rec_beacon.Flags.txState == RESET_MODE)
 651:ServerLLDN.c  **** 		{
 652:ServerLLDN.c  **** 			PHY_SetTdmaMode(false);
 653:ServerLLDN.c  **** 			ack_received = 0;
 654:ServerLLDN.c  **** 			STATE = DISC_MODE;
 655:ServerLLDN.c  **** 		}
 656:ServerLLDN.c  **** 		return true;
 657:ServerLLDN.c  **** 	}
 658:ServerLLDN.c  **** 	
 659:ServerLLDN.c  **** 	bool check_ack(int addr)
 660:ServerLLDN.c  **** 	{
 661:ServerLLDN.c  **** 		int pos =  addr / 8;
 662:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 663:ServerLLDN.c  **** 		printf("\n ack rec %hhx ", ackframe->ackFlags[pos]);
 664:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 665:ServerLLDN.c  **** 		{
 666:ServerLLDN.c  **** 			return true;
 667:ServerLLDN.c  **** 		}
 668:ServerLLDN.c  **** 		else
 669:ServerLLDN.c  **** 			return false;
 670:ServerLLDN.c  **** 	}
 671:ServerLLDN.c  **** 	
 672:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 673:ServerLLDN.c  **** 	{
 674:ServerLLDN.c  **** 		#if !MASTER_MACSC
 675:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 676:ServerLLDN.c  **** 		#endif
 677:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 678:ServerLLDN.c  **** 
 679:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 680:ServerLLDN.c  **** 		{
 681:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 682:ServerLLDN.c  **** 			{
 683:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 684:ServerLLDN.c  **** 				if(!ack_received)
 685:ServerLLDN.c  **** 				{
 686:ServerLLDN.c  **** 				
 687:ServerLLDN.c  **** 					int retransmition_slot = 0;
 688:ServerLLDN.c  **** 					
 689:ServerLLDN.c  **** 
 690:ServerLLDN.c  **** 					for(int i = 0; i < assTimeSlot && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 691:ServerLLDN.c  **** 						if( !check_ack(i+1) )
 692:ServerLLDN.c  **** 							retransmition_slot++;
 693:ServerLLDN.c  **** 					
 694:ServerLLDN.c  **** 					
 695:ServerLLDN.c  **** // 					if( retransmition_slot > (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2 - 1)
 696:ServerLLDN.c  **** // 						return false;
 697:ServerLLDN.c  **** 										
 698:ServerLLDN.c  **** 					
 699:ServerLLDN.c  **** 					if(retransmition_slot == 0)
 700:ServerLLDN.c  **** 					{
 701:ServerLLDN.c  **** 						NWK_DataReq(&msgReqData);
 702:ServerLLDN.c  **** 					}
 703:ServerLLDN.c  **** 					else
 704:ServerLLDN.c  **** 					{
 705:ServerLLDN.c  **** 						#if MASTER_MACSC
 706:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 707:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(online_time_hndlr);
 708:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 709:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, tTS * retransmition_slot - 40, MACSC_CC1);
 710:ServerLLDN.c  **** 						#endif
 711:ServerLLDN.c  **** 					}					
 712:ServerLLDN.c  **** 					printf("\nretransmition_slot %d , %f", retransmition_slot, tTS);
 713:ServerLLDN.c  **** 
 714:ServerLLDN.c  **** 				}				
 715:ServerLLDN.c  **** 			}
 716:ServerLLDN.c  **** 			else
 717:ServerLLDN.c  **** 			{
 718:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 719:ServerLLDN.c  **** 				if(STATE == DISC_MODE && ack_received)
 720:ServerLLDN.c  **** 					STATE = CONFIG_MODE;
 721:ServerLLDN.c  **** 			}
 722:ServerLLDN.c  **** 		}
 723:ServerLLDN.c  **** 		return true;
 724:ServerLLDN.c  **** 	}
 725:ServerLLDN.c  **** 	
 726:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 727:ServerLLDN.c  **** 	{
 728:ServerLLDN.c  **** 		#if !MASTER_MACSC
 729:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 730:ServerLLDN.c  **** 		#endif
 731:ServerLLDN.c  **** 		
 732:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 733:ServerLLDN.c  **** 		{
 734:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 735:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 736:ServerLLDN.c  **** 			{
 737:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 738:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 739:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 740:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 741:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 742:ServerLLDN.c  **** 				associated = 1;
 743:ServerLLDN.c  **** 				STATE = ONLINE_MODE;
 744:ServerLLDN.c  **** 				PHY_SetTdmaMode(true);
 745:ServerLLDN.c  **** 				printf("\n asstimeslot %d, tsDuration %hhx", assTimeSlot, n);
 746:ServerLLDN.c  **** 			}
 747:ServerLLDN.c  **** 		}
 748:ServerLLDN.c  **** 		return true;
 749:ServerLLDN.c  **** 	}
 750:ServerLLDN.c  **** 
 751:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 752:ServerLLDN.c  **** 	{
 753:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 754:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 755:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 756:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 757:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 758:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 759:ServerLLDN.c  **** 	}
 760:ServerLLDN.c  **** 	
 761:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 762:ServerLLDN.c  **** 	{		
 763:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 764:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 765:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 766:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 767:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 768:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 769:ServerLLDN.c  **** 	}
 770:ServerLLDN.c  **** 	
 771:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 772:ServerLLDN.c  **** 	{
 773:ServerLLDN.c  **** 		
 774:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 775:ServerLLDN.c  **** 
 776:ServerLLDN.c  **** 	
 777:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 778:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 779:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 780:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 781:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 782:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 783:ServerLLDN.c  **** 	}
 784:ServerLLDN.c  **** 	
 785:ServerLLDN.c  **** 	
 786:ServerLLDN.c  **** #endif // APP_COORDINATOR
 787:ServerLLDN.c  **** 
 788:ServerLLDN.c  **** static void appInit(void)
 789:ServerLLDN.c  **** {
 3288               		.loc 6 789 0
 3289               		.cfi_startproc
 3290 121a CF93      		push r28
 3291               	.LCFI118:
 3292               		.cfi_def_cfa_offset 3
 3293               		.cfi_offset 28, -2
 3294 121c DF93      		push r29
 3295               	.LCFI119:
 3296               		.cfi_def_cfa_offset 4
 3297               		.cfi_offset 29, -3
 3298 121e CDB7      		in r28,__SP_L__
 3299 1220 DEB7      		in r29,__SP_H__
 3300               	.LCFI120:
 3301               		.cfi_def_cfa_register 28
 3302               	/* prologue: function */
 3303               	/* frame size = 0 */
 3304               	/* stack size = 2 */
 3305               	.L__stack_usage = 2
 790:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 3306               		.loc 6 790 0
 3307 1222 80E0      		ldi r24,0
 3308 1224 90E0      		ldi r25,0
 3309 1226 0E94 0000 		call NWK_SetAddr
 791:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 3310               		.loc 6 791 0
 3311 122a 8FE0      		ldi r24,lo8(15)
 3312 122c 0E94 0000 		call PHY_SetChannel
 792:ServerLLDN.c  **** 	PHY_SetRxState(true);
 3313               		.loc 6 792 0
 3314 1230 81E0      		ldi r24,lo8(1)
 3315 1232 0E94 0000 		call PHY_SetRxState
 793:ServerLLDN.c  **** 		
 794:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 795:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 796:ServerLLDN.c  **** 		tmrDelay.interval = 1;
 3316               		.loc 6 796 0
 3317 1236 81E0      		ldi r24,lo8(1)
 3318 1238 90E0      		ldi r25,0
 3319 123a A0E0      		ldi r26,0
 3320 123c B0E0      		ldi r27,0
 3321 123e 8093 0000 		sts tmrDelay+6,r24
 3322 1242 9093 0000 		sts tmrDelay+6+1,r25
 3323 1246 A093 0000 		sts tmrDelay+6+2,r26
 3324 124a B093 0000 		sts tmrDelay+6+3,r27
 797:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 3325               		.loc 6 797 0
 3326 124e 1092 0000 		sts tmrDelay+10,__zero_reg__
 798:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 3327               		.loc 6 798 0
 3328 1252 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 3329 1254 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 3330 1256 9093 0000 		sts tmrDelay+11+1,r25
 3331 125a 8093 0000 		sts tmrDelay+11,r24
 799:ServerLLDN.c  **** 	  
 800:ServerLLDN.c  **** 		/* 
 801:ServerLLDN.c  **** 		* Disable CSMA/CA
 802:ServerLLDN.c  **** 		* Disable auto ACK
 803:ServerLLDN.c  **** 		*/
 804:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 3332               		.loc 6 804 0
 3333 125e 8EEF      		ldi r24,lo8(-2)
 3334 1260 9AEC      		ldi r25,lo8(-54)
 3335 1262 0E94 0000 		call NWK_SetPanId
 805:ServerLLDN.c  **** 		PanId = APP_PANID;
 3336               		.loc 6 805 0
 3337 1266 8EEF      		ldi r24,lo8(-2)
 3338 1268 8093 0000 		sts PanId,r24
 806:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 3339               		.loc 6 806 0
 3340 126c 8EEF      		ldi r24,lo8(-2)
 3341 126e 8093 0000 		sts ACKFrame,r24
 807:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 3342               		.loc 6 807 0
 3343 1272 81E0      		ldi r24,lo8(1)
 3344 1274 0E94 0000 		call PHY_SetTdmaMode
 808:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 3345               		.loc 6 808 0
 3346 1278 60E0      		ldi r22,lo8(gs(appCommandInd))
 3347 127a 70E0      		ldi r23,hi8(gs(appCommandInd))
 3348 127c 83E0      		ldi r24,lo8(3)
 3349 127e 0E94 0000 		call NWK_OpenEndpoint
 809:ServerLLDN.c  **** 	#else
 810:ServerLLDN.c  **** 		appPrepareDiscoverResponse();	
 811:ServerLLDN.c  **** 		/*
 812:ServerLLDN.c  **** 		 * Enable CSMA/CA
 813:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 814:ServerLLDN.c  **** 		 */
 815:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 816:ServerLLDN.c  **** 		PHY_SetOptimizedCSMAValues();
 817:ServerLLDN.c  **** 		
 818:ServerLLDN.c  **** 		
 819:ServerLLDN.c  **** 		
 820:ServerLLDN.c  **** 		payloadSize = 127;
 821:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 822:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 823:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 824:ServerLLDN.c  **** 		/*
 825:ServerLLDN.c  **** 		* Configure interrupts callback functions
 826:ServerLLDN.c  **** 		*/
 827:ServerLLDN.c  **** 		
 828:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 829:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 3350               		.loc 6 829 0
 3351 1282 81E0      		ldi r24,lo8(1)
 3352 1284 0E94 0000 		call PHY_SetPromiscuousMode
 830:ServerLLDN.c  **** 
 831:ServerLLDN.c  **** }
 3353               		.loc 6 831 0
 3354 1288 0000      		nop
 3355               	/* epilogue start */
 3356 128a DF91      		pop r29
 3357 128c CF91      		pop r28
 3358 128e 0895      		ret
 3359               		.cfi_endproc
 3360               	.LFE148:
 3362               		.section	.rodata
 3363               	.LC2:
 3364 0008 0A25 642C 		.string	"\n%d, %d"
 3364      2025 6400 
 3365               	.LC3:
 3366 0010 0A0A 204D 		.string	"\n\n M\351tricas (%d Ciclos):\n"
 3366      E974 7269 
 3366      6361 7320 
 3366      2825 6420 
 3366      4369 636C 
 3367               	.LC4:
 3368 002a 0A41 6464 		.string	"\nAddrs , %hhx"
 3368      7273 202C 
 3368      2025 6868 
 3368      7800 
 3369               	.LC5:
 3370 0038 0A50 4C52 		.string	"\nPLR ,  %.3f"
 3370      202C 2020 
 3370      252E 3366 
 3370      00
 3371               	.LC6:
 3372 0045 0A50 4552 		.string	"\nPER ,  %.3f"
 3372      202C 2020 
 3372      252E 3366 
 3372      00
 3373               	.LC7:
 3374 0052 0A52 7373 		.string	"\nRssi M\351dio , %f\n"
 3374      6920 4DE9 
 3374      6469 6F20 
 3374      2C20 2566 
 3374      0A00 
 3375               	.LC8:
 3376 0064 0A50 4C52 		.string	"\nPLR , %.3f\nPER , %.3f"
 3376      202C 2025 
 3376      2E33 660A 
 3376      5045 5220 
 3376      2C20 252E 
 3377               		.text
 3379               	APP_TaskHandler:
 3380               	.LFB149:
 832:ServerLLDN.c  **** 
 833:ServerLLDN.c  **** static void APP_TaskHandler(void)
 834:ServerLLDN.c  **** {
 3381               		.loc 6 834 0
 3382               		.cfi_startproc
 3383 1290 CF92      		push r12
 3384               	.LCFI121:
 3385               		.cfi_def_cfa_offset 3
 3386               		.cfi_offset 12, -2
 3387 1292 DF92      		push r13
 3388               	.LCFI122:
 3389               		.cfi_def_cfa_offset 4
 3390               		.cfi_offset 13, -3
 3391 1294 EF92      		push r14
 3392               	.LCFI123:
 3393               		.cfi_def_cfa_offset 5
 3394               		.cfi_offset 14, -4
 3395 1296 FF92      		push r15
 3396               	.LCFI124:
 3397               		.cfi_def_cfa_offset 6
 3398               		.cfi_offset 15, -5
 3399 1298 CF93      		push r28
 3400               	.LCFI125:
 3401               		.cfi_def_cfa_offset 7
 3402               		.cfi_offset 28, -6
 3403 129a DF93      		push r29
 3404               	.LCFI126:
 3405               		.cfi_def_cfa_offset 8
 3406               		.cfi_offset 29, -7
 3407 129c CDB7      		in r28,__SP_L__
 3408 129e DEB7      		in r29,__SP_H__
 3409               	.LCFI127:
 3410               		.cfi_def_cfa_register 28
 3411 12a0 6097      		sbiw r28,16
 3412               	.LCFI128:
 3413               		.cfi_def_cfa_offset 24
 3414 12a2 0FB6      		in __tmp_reg__,__SREG__
 3415 12a4 F894      		cli
 3416 12a6 DEBF      		out __SP_H__,r29
 3417 12a8 0FBE      		out __SREG__,__tmp_reg__
 3418 12aa CDBF      		out __SP_L__,r28
 3419               	/* prologue: function */
 3420               	/* frame size = 16 */
 3421               	/* stack size = 22 */
 3422               	.L__stack_usage = 22
 835:ServerLLDN.c  **** 	switch (appState){
 3423               		.loc 6 835 0
 3424 12ac 8091 0000 		lds r24,appState
 3425 12b0 882F      		mov r24,r24
 3426 12b2 90E0      		ldi r25,0
 3427 12b4 8230      		cpi r24,2
 3428 12b6 9105      		cpc r25,__zero_reg__
 3429 12b8 01F0      		breq .L94
 3430 12ba 8330      		cpi r24,3
 3431 12bc 9105      		cpc r25,__zero_reg__
 3432 12be 01F0      		breq .L95
 3433 12c0 892B      		or r24,r25
 3434 12c2 01F0      		breq .L96
 836:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 837:ServerLLDN.c  **** 		{
 838:ServerLLDN.c  **** 			appInit();
 839:ServerLLDN.c  **** 			#if APP_COORDINATOR
 840:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 841:ServerLLDN.c  **** 			#else
 842:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 843:ServerLLDN.c  **** 			#endif
 844:ServerLLDN.c  **** 			break;
 845:ServerLLDN.c  **** 		}
 846:ServerLLDN.c  **** 		case APP_STATE_SEND:
 847:ServerLLDN.c  **** 		{
 848:ServerLLDN.c  **** 			appSendData();
 849:ServerLLDN.c  **** 			#if APP_COORDINATOR
 850:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 851:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 852:ServerLLDN.c  **** 			#else
 853:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 854:ServerLLDN.c  **** 			#endif
 855:ServerLLDN.c  **** 			break;
 856:ServerLLDN.c  **** 		}
 857:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 858:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 859:ServerLLDN.c  **** 		{
 860:ServerLLDN.c  **** 			switch(appPanState)
 861:ServerLLDN.c  **** 			{
 862:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 863:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 864:ServerLLDN.c  **** 				{
 865:ServerLLDN.c  **** 					appPanReset();
 866:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 867:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 868:ServerLLDN.c  **** 					cycles_counter = 0;
 869:ServerLLDN.c  **** 					break;
 870:ServerLLDN.c  **** 				}
 871:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 872:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 873:ServerLLDN.c  **** 				{
 874:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 875:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 876:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 877:ServerLLDN.c  **** 					 */
 878:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 7)
 879:ServerLLDN.c  **** 					{	
 880:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 881:ServerLLDN.c  **** 						counter_associados = 0;
 882:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 883:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 884:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 885:ServerLLDN.c  **** 						msgReq.options = 0;
 886:ServerLLDN.c  **** 						
 887:ServerLLDN.c  **** 						/* reseting ack bitmap */
 888:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 889:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 890:ServerLLDN.c  **** 						ACKFrame_size = 0;
 891:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 892:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 893:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 894:ServerLLDN.c  **** 					}
 895:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 896:ServerLLDN.c  **** 					else 
 897:ServerLLDN.c  **** 					{
 898:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 899:ServerLLDN.c  **** 						appPanDiscInit();
 900:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 901:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 902:ServerLLDN.c  **** 					}
 903:ServerLLDN.c  **** 					break;
 904:ServerLLDN.c  **** 				}
 905:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 906:ServerLLDN.c  **** 				{
 907:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 908:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 909:ServerLLDN.c  **** 					msgReq.data = NULL;
 910:ServerLLDN.c  **** 					msgReq.size = 0;
 911:ServerLLDN.c  **** 					
 912:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 913:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 914:ServerLLDN.c  **** 					break;
 915:ServerLLDN.c  **** 				}
 916:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 917:ServerLLDN.c  **** 				{
 918:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 919:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 920:ServerLLDN.c  **** 					 */
 921:ServerLLDN.c  **** 					appPanPrepareACK();
 922:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 923:ServerLLDN.c  **** 					
 924:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 925:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 926:ServerLLDN.c  **** 					break;
 927:ServerLLDN.c  **** 				}
 928:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 929:ServerLLDN.c  **** 				{
 930:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 931:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 932:ServerLLDN.c  **** 					msgReq.data = NULL;
 933:ServerLLDN.c  **** 					msgReq.size = 0;
 934:ServerLLDN.c  **** 					
 935:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 936:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 937:ServerLLDN.c  **** 					break;
 938:ServerLLDN.c  **** 
 939:ServerLLDN.c  **** 				}
 940:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 941:ServerLLDN.c  **** 				{
 942:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 943:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 944:ServerLLDN.c  **** 					msgReq.data = NULL;
 945:ServerLLDN.c  **** 					msgReq.size = 0;
 946:ServerLLDN.c  **** 					
 947:ServerLLDN.c  **** 					counter_delay_msg = 0;
 948:ServerLLDN.c  **** 					
 949:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 950:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 951:ServerLLDN.c  **** 					
 952:ServerLLDN.c  **** 					break;
 953:ServerLLDN.c  **** 				}
 954:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 955:ServerLLDN.c  **** 				{
 956:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 957:ServerLLDN.c  **** 					{
 958:ServerLLDN.c  **** 						CopyToConfigRequest();
 959:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 960:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 961:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 962:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 963:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 964:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 965:ServerLLDN.c  **** 						// Delay between messages
 966:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
 967:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 968:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 969:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 970:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 971:ServerLLDN.c  **** 						
 972:ServerLLDN.c  **** 						counter_associados++;
 973:ServerLLDN.c  **** 					}
 974:ServerLLDN.c  **** 					else
 975:ServerLLDN.c  **** 					{
 976:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
 977:ServerLLDN.c  **** 						{
 978:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
 979:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 980:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 981:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 982:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 983:ServerLLDN.c  **** 						}
 984:ServerLLDN.c  **** 						
 985:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
 986:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 987:ServerLLDN.c  **** 					}
 988:ServerLLDN.c  **** 					break;
 989:ServerLLDN.c  **** 				}
 990:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 991:ServerLLDN.c  **** 				{
 992:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 993:ServerLLDN.c  **** 					msgReq.data = NULL;
 994:ServerLLDN.c  **** 					msgReq.size = 0;
 995:ServerLLDN.c  **** 					
 996:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 997:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 998:ServerLLDN.c  **** 					cycles_counter++;	
 999:ServerLLDN.c  **** 					
1000:ServerLLDN.c  **** 					break;
1001:ServerLLDN.c  **** 				}
1002:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
1003:ServerLLDN.c  **** 				{
1004:ServerLLDN.c  **** 
1005:ServerLLDN.c  **** 					if(cycles_counter != 0)
1006:ServerLLDN.c  **** 					{
1007:ServerLLDN.c  **** 						appPanOnlineInit();
1008:ServerLLDN.c  **** 						
1009:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1010:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1011:ServerLLDN.c  **** 						
1012:ServerLLDN.c  **** 						cycles_counter--;
1013:ServerLLDN.c  **** 					}
1014:ServerLLDN.c  **** 					else
1015:ServerLLDN.c  **** 					{
1016:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1017:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1018:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
1019:ServerLLDN.c  **** 						
1020:ServerLLDN.c  **** 						printf("\n\n Mtricas (%d Ciclos):\n", NUMERO_CICLOS_ONLINE -1);
1021:ServerLLDN.c  **** 						int total_msg = 0;
1022:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
1023:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
1024:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
1025:ServerLLDN.c  **** 						{
1026:ServerLLDN.c  **** 							printf("\nAddrs , %hhx", nodes_info_arr[i].mac_addr);
1027:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1028:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1029:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
1030:ServerLLDN.c  **** 							
1031:ServerLLDN.c  **** 							total_msg = total_msg + nodes_info_arr[i].msg_rec;
1032:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
1033:ServerLLDN.c  **** 						}
1034:ServerLLDN.c  **** 						if(assTimeSlot > 0 && total_msg > 0)
1035:ServerLLDN.c  **** 						{
1036:ServerLLDN.c  **** 							PLR = 1 - total_msg / expected_messages;
1037:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
1038:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f", PLR, PER);
1039:ServerLLDN.c  **** 							
1040:ServerLLDN.c  **** 						}
1041:ServerLLDN.c  **** 					}
1042:ServerLLDN.c  **** 					break;
1043:ServerLLDN.c  **** 				}
1044:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
1045:ServerLLDN.c  **** 				{
1046:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
1047:ServerLLDN.c  **** 					{
1048:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
1049:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
1050:ServerLLDN.c  **** 					}
1051:ServerLLDN.c  **** 					retransmit_ts_array_counter = 0;
1052:ServerLLDN.c  **** 					ACKFrame_size = 0;
1053:ServerLLDN.c  **** 					
1054:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
1055:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
1056:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
1057:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
1058:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
1059:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
1060:ServerLLDN.c  **** 
1061:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1062:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
1063:ServerLLDN.c  **** 					break;
1064:ServerLLDN.c  **** 				}				
1065:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
1066:ServerLLDN.c  **** 				{
1067:ServerLLDN.c  **** 
1068:ServerLLDN.c  **** 					msgReq.options = 0;
1069:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1070:ServerLLDN.c  **** 					break;
1071:ServerLLDN.c  **** 				}
1072:ServerLLDN.c  **** 			}
1073:ServerLLDN.c  **** 			break;	
1074:ServerLLDN.c  **** 		}
1075:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
1076:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
1077:ServerLLDN.c  **** 		{
1078:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
1079:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
1080:ServerLLDN.c  **** 			break;
1081:ServerLLDN.c  **** 		}
1082:ServerLLDN.c  **** 		
1083:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
1084:ServerLLDN.c  **** 		{
1085:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
1086:ServerLLDN.c  **** 			if(ack_received && rec_beacon.confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
1087:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
1088:ServerLLDN.c  **** 			}
1089:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
1090:ServerLLDN.c  **** 			else {
1091:ServerLLDN.c  **** 				#if MASTER_MACSC
1092:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
1093:ServerLLDN.c  **** 				#else
1094:ServerLLDN.c  **** 				timer_stop();
1095:ServerLLDN.c  **** 				#endif
1096:ServerLLDN.c  **** 			}
1097:ServerLLDN.c  **** 			ack_received = 0;
1098:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1099:ServerLLDN.c  **** 			break;
1100:ServerLLDN.c  **** 		}
1101:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
1102:ServerLLDN.c  **** 		{
1103:ServerLLDN.c  **** 			appPrepareDataFrame();
1104:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1105:ServerLLDN.c  **** 			break;
1106:ServerLLDN.c  **** 		}
1107:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
1108:ServerLLDN.c  **** 		{
1109:ServerLLDN.c  **** 			if(!ack_received)
1110:ServerLLDN.c  **** 			{
1111:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1112:ServerLLDN.c  **** 				
1113:ServerLLDN.c  **** 				int retransmition_slot = 0;
1114:ServerLLDN.c  **** 				
1115:ServerLLDN.c  **** 				
1116:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot - 1 && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2;
1117:ServerLLDN.c  **** 					if( !check_ack(i) )
1118:ServerLLDN.c  **** 						retransmition_slot++;
1119:ServerLLDN.c  **** 					
1120:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
1121:ServerLLDN.c  **** 				
1122:ServerLLDN.c  **** 				if(retransmition_slot == 0)
1123:ServerLLDN.c  **** 				{
1124:ServerLLDN.c  **** 					appSendData();
1125:ServerLLDN.c  **** 					// appState = APP_STATE_SEND;			
1126:ServerLLDN.c  **** 				}
1127:ServerLLDN.c  **** 				else
1128:ServerLLDN.c  **** 				{
1129:ServerLLDN.c  **** 					#if MASTER_MACSC
1130:ServerLLDN.c  **** 					macsc_enable_manual_bts();
1131:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
1132:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
1133:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
1134:ServerLLDN.c  **** 					#endif
1135:ServerLLDN.c  **** 				}
1136:ServerLLDN.c  **** 				
1137:ServerLLDN.c  **** 			}
1138:ServerLLDN.c  **** 			else
1139:ServerLLDN.c  **** 			{
1140:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1141:ServerLLDN.c  **** 			}
1142:ServerLLDN.c  **** 			
1143:ServerLLDN.c  **** 			break;
1144:ServerLLDN.c  **** 		}
1145:ServerLLDN.c  **** 		#endif
1146:ServerLLDN.c  **** 		default:
1147:ServerLLDN.c  **** 		{
1148:ServerLLDN.c  **** 			break;
 3435               		.loc 6 1148 0
 3436 12c4 00C0      		rjmp .L97
 3437               	.L96:
 838:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3438               		.loc 6 838 0
 3439 12c6 0E94 0000 		call appInit
 840:ServerLLDN.c  **** 			#else
 3440               		.loc 6 840 0
 3441 12ca 83E0      		ldi r24,lo8(3)
 3442 12cc 8093 0000 		sts appState,r24
 844:ServerLLDN.c  **** 		}
 3443               		.loc 6 844 0
 3444 12d0 00C0      		rjmp .L97
 3445               	.L94:
 848:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3446               		.loc 6 848 0
 3447 12d2 0E94 0000 		call appSendData
 851:ServerLLDN.c  **** 			#else
 3448               		.loc 6 851 0
 3449 12d6 83E0      		ldi r24,lo8(3)
 3450 12d8 8093 0000 		sts appState,r24
 855:ServerLLDN.c  **** 		}
 3451               		.loc 6 855 0
 3452 12dc 00C0      		rjmp .L97
 3453               	.L95:
 860:ServerLLDN.c  **** 			{
 3454               		.loc 6 860 0
 3455 12de 8091 0000 		lds r24,appPanState
 3456 12e2 882F      		mov r24,r24
 3457 12e4 90E0      		ldi r25,0
 3458 12e6 092E      		mov __tmp_reg__,r25
 3459 12e8 000C      		lsl r0
 3460 12ea AA0B      		sbc r26,r26
 3461 12ec BB0B      		sbc r27,r27
 3462 12ee 40E0      		ldi r20,0
 3463 12f0 50E0      		ldi r21,0
 3464 12f2 2DE0      		ldi r18,lo8(13)
 3465 12f4 30E0      		ldi r19,0
 3466 12f6 841B      		sub r24,r20
 3467 12f8 950B      		sbc r25,r21
 3468 12fa 2817      		cp r18,r24
 3469 12fc 3907      		cpc r19,r25
 3470 12fe 00F4      		brsh .+2
 3471 1300 00C0      		rjmp .L126
 3472 1302 8050      		subi r24,lo8(-(gs(.L100)))
 3473 1304 9040      		sbci r25,hi8(-(gs(.L100)))
 3474 1306 FC01      		movw r30,r24
 3475 1308 0C94 0000 		jmp __tablejump2__
 3476               		.section	.progmem.gcc_sw_table,"a",@progbits
 3477               		.p2align	1
 3478               	.L100:
 3479 0000 0000      		.word gs(.L99)
 3480 0002 0000      		.word gs(.L101)
 3481 0004 0000      		.word gs(.L102)
 3482 0006 0000      		.word gs(.L103)
 3483 0008 0000      		.word gs(.L104)
 3484 000a 0000      		.word gs(.L105)
 3485 000c 0000      		.word gs(.L106)
 3486 000e 0000      		.word gs(.L107)
 3487 0010 0000      		.word gs(.L108)
 3488 0012 0000      		.word gs(.L109)
 3489 0014 0000      		.word gs(.L126)
 3490 0016 0000      		.word gs(.L126)
 3491 0018 0000      		.word gs(.L126)
 3492 001a 0000      		.word gs(.L110)
 3493               		.text
 3494               	.L101:
 865:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3495               		.loc 6 865 0
 3496 130c 0E94 0000 		call appPanReset
 866:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 3497               		.loc 6 866 0
 3498 1310 82E0      		ldi r24,lo8(2)
 3499 1312 8093 0000 		sts appPanState,r24
 867:ServerLLDN.c  **** 					cycles_counter = 0;
 3500               		.loc 6 867 0
 3501 1316 82E0      		ldi r24,lo8(2)
 3502 1318 8093 0000 		sts appState,r24
 868:ServerLLDN.c  **** 					break;
 3503               		.loc 6 868 0
 3504 131c 1092 0000 		sts cycles_counter,__zero_reg__
 869:ServerLLDN.c  **** 				}
 3505               		.loc 6 869 0
 3506 1320 00C0      		rjmp .L98
 3507               	.L102:
 878:ServerLLDN.c  **** 					{	
 3508               		.loc 6 878 0
 3509 1322 8091 0000 		lds r24,counter_associados
 3510 1326 9091 0000 		lds r25,counter_associados+1
 3511 132a 0C97      		sbiw r24,12
 3512 132c 01F0      		breq .L111
 878:ServerLLDN.c  **** 					{	
 3513               		.loc 6 878 0 is_stmt 0 discriminator 1
 3514 132e 8091 0000 		lds r24,cycles_counter
 3515 1332 8730      		cpi r24,lo8(7)
 3516 1334 00F4      		brsh .+2
 3517 1336 00C0      		rjmp .L112
 3518               	.L111:
 880:ServerLLDN.c  **** 						counter_associados = 0;
 3519               		.loc 6 880 0 is_stmt 1
 3520 1338 2091 0000 		lds r18,counter_associados
 3521 133c 3091 0000 		lds r19,counter_associados+1
 3522 1340 8091 0000 		lds r24,cycles_counter
 3523 1344 882F      		mov r24,r24
 3524 1346 90E0      		ldi r25,0
 3525 1348 432F      		mov r20,r19
 3526 134a 4F93      		push r20
 3527 134c 2F93      		push r18
 3528 134e 292F      		mov r18,r25
 3529 1350 2F93      		push r18
 3530 1352 8F93      		push r24
 3531 1354 80E0      		ldi r24,lo8(.LC2)
 3532 1356 90E0      		ldi r25,hi8(.LC2)
 3533 1358 892F      		mov r24,r25
 3534 135a 8F93      		push r24
 3535 135c 80E0      		ldi r24,lo8(.LC2)
 3536 135e 90E0      		ldi r25,hi8(.LC2)
 3537 1360 8F93      		push r24
 3538 1362 0E94 0000 		call printf
 3539 1366 0F90      		pop __tmp_reg__
 3540 1368 0F90      		pop __tmp_reg__
 3541 136a 0F90      		pop __tmp_reg__
 3542 136c 0F90      		pop __tmp_reg__
 3543 136e 0F90      		pop __tmp_reg__
 3544 1370 0F90      		pop __tmp_reg__
 881:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3545               		.loc 6 881 0
 3546 1372 1092 0000 		sts counter_associados+1,__zero_reg__
 3547 1376 1092 0000 		sts counter_associados,__zero_reg__
 883:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 3548               		.loc 6 883 0
 3549 137a 81E0      		ldi r24,lo8(1)
 3550 137c 0E94 0000 		call macsc_disable_cmp_int
 884:ServerLLDN.c  **** 						msgReq.options = 0;
 3551               		.loc 6 884 0
 3552 1380 82E0      		ldi r24,lo8(2)
 3553 1382 0E94 0000 		call macsc_disable_cmp_int
 885:ServerLLDN.c  **** 						
 3554               		.loc 6 885 0
 3555 1386 1092 0000 		sts msgReq+9+1,__zero_reg__
 3556 138a 1092 0000 		sts msgReq+9,__zero_reg__
 3557               	.LBB14:
 888:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3558               		.loc 6 888 0
 3559 138e 1A82      		std Y+2,__zero_reg__
 3560 1390 1982      		std Y+1,__zero_reg__
 3561 1392 00C0      		rjmp .L113
 3562               	.L114:
 889:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3563               		.loc 6 889 0 discriminator 3
 3564 1394 8981      		ldd r24,Y+1
 3565 1396 9A81      		ldd r25,Y+2
 3566 1398 8050      		subi r24,lo8(-(ACKFrame+1))
 3567 139a 9040      		sbci r25,hi8(-(ACKFrame+1))
 3568 139c FC01      		movw r30,r24
 3569 139e 1082      		st Z,__zero_reg__
 888:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3570               		.loc 6 888 0 discriminator 3
 3571 13a0 8981      		ldd r24,Y+1
 3572 13a2 9A81      		ldd r25,Y+2
 3573 13a4 0196      		adiw r24,1
 3574 13a6 9A83      		std Y+2,r25
 3575 13a8 8983      		std Y+1,r24
 3576               	.L113:
 888:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3577               		.loc 6 888 0 is_stmt 0 discriminator 1
 3578 13aa 8981      		ldd r24,Y+1
 3579 13ac 9A81      		ldd r25,Y+2
 3580 13ae 8097      		sbiw r24,32
 3581 13b0 04F0      		brlt .L114
 3582               	.LBE14:
 890:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 3583               		.loc 6 890 0 is_stmt 1
 3584 13b2 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3585 13b6 1092 0000 		sts ACKFrame_size,__zero_reg__
 891:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3586               		.loc 6 891 0
 3587 13ba 83E0      		ldi r24,lo8(3)
 3588 13bc 8093 0000 		sts appState,r24
 892:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3589               		.loc 6 892 0
 3590 13c0 89E0      		ldi r24,lo8(9)
 3591 13c2 8093 0000 		sts appPanState,r24
 893:ServerLLDN.c  **** 					}
 3592               		.loc 6 893 0
 3593 13c6 85E1      		ldi r24,lo8(21)
 3594 13c8 8093 0000 		sts cycles_counter,r24
 903:ServerLLDN.c  **** 				}
 3595               		.loc 6 903 0
 3596 13cc 00C0      		rjmp .L98
 3597               	.L112:
 899:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3598               		.loc 6 899 0
 3599 13ce 0E94 0000 		call appPanDiscInit
 900:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3600               		.loc 6 900 0
 3601 13d2 81E0      		ldi r24,lo8(1)
 3602 13d4 8093 0000 		sts appState,r24
 901:ServerLLDN.c  **** 					}
 3603               		.loc 6 901 0
 3604 13d8 83E0      		ldi r24,lo8(3)
 3605 13da 8093 0000 		sts appPanState,r24
 903:ServerLLDN.c  **** 				}
 3606               		.loc 6 903 0
 3607 13de 00C0      		rjmp .L98
 3608               	.L103:
 908:ServerLLDN.c  **** 					msgReq.data = NULL;
 3609               		.loc 6 908 0
 3610 13e0 80E4      		ldi r24,lo8(64)
 3611 13e2 99E0      		ldi r25,lo8(9)
 3612 13e4 9093 0000 		sts msgReq+9+1,r25
 3613 13e8 8093 0000 		sts msgReq+9,r24
 909:ServerLLDN.c  **** 					msgReq.size = 0;
 3614               		.loc 6 909 0
 3615 13ec 1092 0000 		sts msgReq+13+1,__zero_reg__
 3616 13f0 1092 0000 		sts msgReq+13,__zero_reg__
 910:ServerLLDN.c  **** 					
 3617               		.loc 6 910 0
 3618 13f4 1092 0000 		sts msgReq+15,__zero_reg__
 912:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3619               		.loc 6 912 0
 3620 13f8 84E0      		ldi r24,lo8(4)
 3621 13fa 8093 0000 		sts appState,r24
 913:ServerLLDN.c  **** 					break;
 3622               		.loc 6 913 0
 3623 13fe 84E0      		ldi r24,lo8(4)
 3624 1400 8093 0000 		sts appPanState,r24
 914:ServerLLDN.c  **** 				}
 3625               		.loc 6 914 0
 3626 1404 00C0      		rjmp .L98
 3627               	.L104:
 921:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 3628               		.loc 6 921 0
 3629 1406 0E94 0000 		call appPanPrepareACK
 922:ServerLLDN.c  **** 					
 3630               		.loc 6 922 0
 3631 140a 80E0      		ldi r24,lo8(tmrDelay)
 3632 140c 90E0      		ldi r25,hi8(tmrDelay)
 3633 140e 0E94 0000 		call SYS_TimerStart
 924:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3634               		.loc 6 924 0
 3635 1412 85E0      		ldi r24,lo8(5)
 3636 1414 8093 0000 		sts appPanState,r24
 925:ServerLLDN.c  **** 					break;
 3637               		.loc 6 925 0
 3638 1418 81E0      		ldi r24,lo8(1)
 3639 141a 8093 0000 		sts appState,r24
 926:ServerLLDN.c  **** 				}
 3640               		.loc 6 926 0
 3641 141e 00C0      		rjmp .L98
 3642               	.L105:
 931:ServerLLDN.c  **** 					msgReq.data = NULL;
 3643               		.loc 6 931 0
 3644 1420 80E4      		ldi r24,lo8(64)
 3645 1422 92E0      		ldi r25,lo8(2)
 3646 1424 9093 0000 		sts msgReq+9+1,r25
 3647 1428 8093 0000 		sts msgReq+9,r24
 932:ServerLLDN.c  **** 					msgReq.size = 0;
 3648               		.loc 6 932 0
 3649 142c 1092 0000 		sts msgReq+13+1,__zero_reg__
 3650 1430 1092 0000 		sts msgReq+13,__zero_reg__
 933:ServerLLDN.c  **** 					
 3651               		.loc 6 933 0
 3652 1434 1092 0000 		sts msgReq+15,__zero_reg__
 935:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3653               		.loc 6 935 0
 3654 1438 81E0      		ldi r24,lo8(1)
 3655 143a 8093 0000 		sts appState,r24
 936:ServerLLDN.c  **** 					break;
 3656               		.loc 6 936 0
 3657 143e 87E0      		ldi r24,lo8(7)
 3658 1440 8093 0000 		sts appPanState,r24
 937:ServerLLDN.c  **** 
 3659               		.loc 6 937 0
 3660 1444 00C0      		rjmp .L98
 3661               	.L107:
 943:ServerLLDN.c  **** 					msgReq.data = NULL;
 3662               		.loc 6 943 0
 3663 1446 80E4      		ldi r24,lo8(64)
 3664 1448 9AE0      		ldi r25,lo8(10)
 3665 144a 9093 0000 		sts msgReq+9+1,r25
 3666 144e 8093 0000 		sts msgReq+9,r24
 944:ServerLLDN.c  **** 					msgReq.size = 0;
 3667               		.loc 6 944 0
 3668 1452 1092 0000 		sts msgReq+13+1,__zero_reg__
 3669 1456 1092 0000 		sts msgReq+13,__zero_reg__
 945:ServerLLDN.c  **** 					
 3670               		.loc 6 945 0
 3671 145a 1092 0000 		sts msgReq+15,__zero_reg__
 947:ServerLLDN.c  **** 					
 3672               		.loc 6 947 0
 3673 145e 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3674 1462 1092 0000 		sts counter_delay_msg,__zero_reg__
 949:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3675               		.loc 6 949 0
 3676 1466 81E0      		ldi r24,lo8(1)
 3677 1468 8093 0000 		sts appState,r24
 950:ServerLLDN.c  **** 					
 3678               		.loc 6 950 0
 3679 146c 86E0      		ldi r24,lo8(6)
 3680 146e 8093 0000 		sts appPanState,r24
 952:ServerLLDN.c  **** 				}
 3681               		.loc 6 952 0
 3682 1472 00C0      		rjmp .L98
 3683               	.L106:
 956:ServerLLDN.c  **** 					{
 3684               		.loc 6 956 0
 3685 1474 8091 0000 		lds r24,conf_req_list
 3686 1478 9091 0000 		lds r25,conf_req_list+1
 3687 147c 892B      		or r24,r25
 3688 147e 01F0      		breq .L116
 958:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 3689               		.loc 6 958 0
 3690 1480 0E94 0000 		call CopyToConfigRequest
 959:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3691               		.loc 6 959 0
 3692 1484 80E0      		ldi r24,0
 3693 1486 90E8      		ldi r25,lo8(-128)
 3694 1488 9093 0000 		sts msgReq+9+1,r25
 3695 148c 8093 0000 		sts msgReq+9,r24
 960:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3696               		.loc 6 960 0
 3697 1490 80E0      		ldi r24,lo8(config_request_frame)
 3698 1492 90E0      		ldi r25,hi8(config_request_frame)
 3699 1494 9093 0000 		sts msgReq+13+1,r25
 3700 1498 8093 0000 		sts msgReq+13,r24
 961:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3701               		.loc 6 961 0
 3702 149c 86E0      		ldi r24,lo8(6)
 3703 149e 8093 0000 		sts msgReq+15,r24
 962:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3704               		.loc 6 962 0
 3705 14a2 81E0      		ldi r24,lo8(1)
 3706 14a4 8093 0000 		sts appState,r24
 963:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 3707               		.loc 6 963 0
 3708 14a8 86E0      		ldi r24,lo8(6)
 3709 14aa 8093 0000 		sts appPanState,r24
 966:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3710               		.loc 6 966 0
 3711 14ae 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3712 14b0 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3713 14b2 0E94 0000 		call macsc_set_cmp1_int_cb
 967:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3714               		.loc 6 967 0
 3715 14b6 81E0      		ldi r24,lo8(1)
 3716 14b8 0E94 0000 		call macsc_disable_cmp_int
 968:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3717               		.loc 6 968 0
 3718 14bc 0E94 0000 		call macsc_enable_manual_bts
 969:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3719               		.loc 6 969 0
 3720 14c0 81E0      		ldi r24,lo8(1)
 3721 14c2 0E94 0000 		call macsc_enable_cmp_int
 970:ServerLLDN.c  **** 						
 3722               		.loc 6 970 0
 3723 14c6 21E0      		ldi r18,lo8(1)
 3724 14c8 4BE4      		ldi r20,lo8(75)
 3725 14ca 50E0      		ldi r21,0
 3726 14cc 60E0      		ldi r22,0
 3727 14ce 70E0      		ldi r23,0
 3728 14d0 81E0      		ldi r24,lo8(1)
 3729 14d2 0E94 0000 		call macsc_use_cmp
 972:ServerLLDN.c  **** 					}
 3730               		.loc 6 972 0
 3731 14d6 8091 0000 		lds r24,counter_associados
 3732 14da 9091 0000 		lds r25,counter_associados+1
 3733 14de 0196      		adiw r24,1
 3734 14e0 9093 0000 		sts counter_associados+1,r25
 3735 14e4 8093 0000 		sts counter_associados,r24
 988:ServerLLDN.c  **** 				}
 3736               		.loc 6 988 0
 3737 14e8 00C0      		rjmp .L98
 3738               	.L116:
 976:ServerLLDN.c  **** 						{
 3739               		.loc 6 976 0
 3740 14ea 8091 0000 		lds r24,counter_delay_msg
 3741 14ee 9091 0000 		lds r25,counter_delay_msg+1
 3742 14f2 1816      		cp __zero_reg__,r24
 3743 14f4 1906      		cpc __zero_reg__,r25
 3744 14f6 04F4      		brge .L118
 978:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3745               		.loc 6 978 0
 3746 14f8 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 3747 14fa 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 3748 14fc 0E94 0000 		call macsc_set_cmp1_int_cb
 979:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3749               		.loc 6 979 0
 3750 1500 81E0      		ldi r24,lo8(1)
 3751 1502 0E94 0000 		call macsc_disable_cmp_int
 980:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3752               		.loc 6 980 0
 3753 1506 0E94 0000 		call macsc_enable_manual_bts
 981:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 3754               		.loc 6 981 0
 3755 150a 81E0      		ldi r24,lo8(1)
 3756 150c 0E94 0000 		call macsc_enable_cmp_int
 982:ServerLLDN.c  **** 						}
 3757               		.loc 6 982 0
 3758 1510 C090 0000 		lds r12,beaconInterval_association
 3759 1514 D090 0000 		lds r13,beaconInterval_association+1
 3760 1518 E090 0000 		lds r14,beaconInterval_association+2
 3761 151c F090 0000 		lds r15,beaconInterval_association+3
 3762 1520 2091 0000 		lds r18,counter_delay_msg
 3763 1524 3091 0000 		lds r19,counter_delay_msg+1
 3764 1528 4BE4      		ldi r20,lo8(75)
 3765 152a 429F      		mul r20,r18
 3766 152c C001      		movw r24,r0
 3767 152e 439F      		mul r20,r19
 3768 1530 900D      		add r25,r0
 3769 1532 1124      		clr __zero_reg__
 3770 1534 092E      		mov __tmp_reg__,r25
 3771 1536 000C      		lsl r0
 3772 1538 AA0B      		sbc r26,r26
 3773 153a BB0B      		sbc r27,r27
 3774 153c BC01      		movw r22,r24
 3775 153e CD01      		movw r24,r26
 3776 1540 0E94 0000 		call __floatsisf
 3777 1544 DC01      		movw r26,r24
 3778 1546 CB01      		movw r24,r22
 3779 1548 9C01      		movw r18,r24
 3780 154a AD01      		movw r20,r26
 3781 154c C701      		movw r24,r14
 3782 154e B601      		movw r22,r12
 3783 1550 0E94 0000 		call __subsf3
 3784 1554 DC01      		movw r26,r24
 3785 1556 CB01      		movw r24,r22
 3786 1558 BC01      		movw r22,r24
 3787 155a CD01      		movw r24,r26
 3788 155c 0E94 0000 		call __fixunssfsi
 3789 1560 DC01      		movw r26,r24
 3790 1562 CB01      		movw r24,r22
 3791 1564 21E0      		ldi r18,lo8(1)
 3792 1566 AC01      		movw r20,r24
 3793 1568 BD01      		movw r22,r26
 3794 156a 81E0      		ldi r24,lo8(1)
 3795 156c 0E94 0000 		call macsc_use_cmp
 3796               	.L118:
 985:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 3797               		.loc 6 985 0
 3798 1570 83E0      		ldi r24,lo8(3)
 3799 1572 8093 0000 		sts appState,r24
 986:ServerLLDN.c  **** 					}
 3800               		.loc 6 986 0
 3801 1576 88E0      		ldi r24,lo8(8)
 3802 1578 8093 0000 		sts appPanState,r24
 988:ServerLLDN.c  **** 				}
 3803               		.loc 6 988 0
 3804 157c 00C0      		rjmp .L98
 3805               	.L108:
 992:ServerLLDN.c  **** 					msgReq.data = NULL;
 3806               		.loc 6 992 0
 3807 157e 80E4      		ldi r24,lo8(64)
 3808 1580 92E1      		ldi r25,lo8(18)
 3809 1582 9093 0000 		sts msgReq+9+1,r25
 3810 1586 8093 0000 		sts msgReq+9,r24
 993:ServerLLDN.c  **** 					msgReq.size = 0;
 3811               		.loc 6 993 0
 3812 158a 1092 0000 		sts msgReq+13+1,__zero_reg__
 3813 158e 1092 0000 		sts msgReq+13,__zero_reg__
 994:ServerLLDN.c  **** 					
 3814               		.loc 6 994 0
 3815 1592 1092 0000 		sts msgReq+15,__zero_reg__
 996:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3816               		.loc 6 996 0
 3817 1596 81E0      		ldi r24,lo8(1)
 3818 1598 8093 0000 		sts appState,r24
 997:ServerLLDN.c  **** 					cycles_counter++;	
 3819               		.loc 6 997 0
 3820 159c 82E0      		ldi r24,lo8(2)
 3821 159e 8093 0000 		sts appPanState,r24
 998:ServerLLDN.c  **** 					
 3822               		.loc 6 998 0
 3823 15a2 8091 0000 		lds r24,cycles_counter
 3824 15a6 8F5F      		subi r24,lo8(-(1))
 3825 15a8 8093 0000 		sts cycles_counter,r24
1000:ServerLLDN.c  **** 				}
 3826               		.loc 6 1000 0
 3827 15ac 00C0      		rjmp .L98
 3828               	.L109:
1005:ServerLLDN.c  **** 					{
 3829               		.loc 6 1005 0
 3830 15ae 8091 0000 		lds r24,cycles_counter
 3831 15b2 8823      		tst r24
 3832 15b4 01F0      		breq .L119
1007:ServerLLDN.c  **** 						
 3833               		.loc 6 1007 0
 3834 15b6 0E94 0000 		call appPanOnlineInit
1009:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3835               		.loc 6 1009 0
 3836 15ba 81E0      		ldi r24,lo8(1)
 3837 15bc 8093 0000 		sts appState,r24
1010:ServerLLDN.c  **** 						
 3838               		.loc 6 1010 0
 3839 15c0 1092 0000 		sts appPanState,__zero_reg__
1012:ServerLLDN.c  **** 					}
 3840               		.loc 6 1012 0
 3841 15c4 8091 0000 		lds r24,cycles_counter
 3842 15c8 8150      		subi r24,lo8(-(-1))
 3843 15ca 8093 0000 		sts cycles_counter,r24
1042:ServerLLDN.c  **** 				}
 3844               		.loc 6 1042 0
 3845 15ce 00C0      		rjmp .L127
 3846               	.L119:
 3847               	.LBB15:
1016:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3848               		.loc 6 1016 0
 3849 15d0 81E0      		ldi r24,lo8(1)
 3850 15d2 8093 0000 		sts appState,r24
1017:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3851               		.loc 6 1017 0
 3852 15d6 1092 0000 		sts appPanState,__zero_reg__
1018:ServerLLDN.c  **** 						
 3853               		.loc 6 1018 0
 3854 15da 81E0      		ldi r24,lo8(1)
 3855 15dc 0E94 0000 		call macsc_disable_cmp_int
1020:ServerLLDN.c  **** 						int total_msg = 0;
 3856               		.loc 6 1020 0
 3857 15e0 1F92      		push __zero_reg__
 3858 15e2 84E1      		ldi r24,lo8(20)
 3859 15e4 8F93      		push r24
 3860 15e6 80E0      		ldi r24,lo8(.LC3)
 3861 15e8 90E0      		ldi r25,hi8(.LC3)
 3862 15ea 892F      		mov r24,r25
 3863 15ec 8F93      		push r24
 3864 15ee 80E0      		ldi r24,lo8(.LC3)
 3865 15f0 90E0      		ldi r25,hi8(.LC3)
 3866 15f2 8F93      		push r24
 3867 15f4 0E94 0000 		call printf
 3868 15f8 0F90      		pop __tmp_reg__
 3869 15fa 0F90      		pop __tmp_reg__
 3870 15fc 0F90      		pop __tmp_reg__
 3871 15fe 0F90      		pop __tmp_reg__
1021:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
 3872               		.loc 6 1021 0
 3873 1600 1C82      		std Y+4,__zero_reg__
 3874 1602 1B82      		std Y+3,__zero_reg__
1022:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
 3875               		.loc 6 1022 0
 3876 1604 1D82      		std Y+5,__zero_reg__
 3877 1606 1E82      		std Y+6,__zero_reg__
 3878 1608 1F82      		std Y+7,__zero_reg__
 3879 160a 1886      		std Y+8,__zero_reg__
1023:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 3880               		.loc 6 1023 0
 3881 160c 8091 0000 		lds r24,assTimeSlot
 3882 1610 9091 0000 		lds r25,assTimeSlot+1
 3883 1614 092E      		mov __tmp_reg__,r25
 3884 1616 000C      		lsl r0
 3885 1618 AA0B      		sbc r26,r26
 3886 161a BB0B      		sbc r27,r27
 3887 161c BC01      		movw r22,r24
 3888 161e CD01      		movw r24,r26
 3889 1620 0E94 0000 		call __floatsisf
 3890 1624 DC01      		movw r26,r24
 3891 1626 CB01      		movw r24,r22
 3892 1628 20E0      		ldi r18,0
 3893 162a 30E0      		ldi r19,0
 3894 162c 40EA      		ldi r20,lo8(-96)
 3895 162e 51E4      		ldi r21,lo8(65)
 3896 1630 BC01      		movw r22,r24
 3897 1632 CD01      		movw r24,r26
 3898 1634 0E94 0000 		call __mulsf3
 3899 1638 DC01      		movw r26,r24
 3900 163a CB01      		movw r24,r22
 3901 163c 8D87      		std Y+13,r24
 3902 163e 9E87      		std Y+14,r25
 3903 1640 AF87      		std Y+15,r26
 3904 1642 B88B      		std Y+16,r27
 3905               	.LBB16:
1024:ServerLLDN.c  **** 						{
 3906               		.loc 6 1024 0
 3907 1644 1A86      		std Y+10,__zero_reg__
 3908 1646 1986      		std Y+9,__zero_reg__
 3909 1648 00C0      		rjmp .L121
 3910               	.L123:
1026:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3911               		.loc 6 1026 0 discriminator 4
 3912 164a 2985      		ldd r18,Y+9
 3913 164c 3A85      		ldd r19,Y+10
 3914 164e 4AE4      		ldi r20,lo8(74)
 3915 1650 429F      		mul r20,r18
 3916 1652 C001      		movw r24,r0
 3917 1654 439F      		mul r20,r19
 3918 1656 900D      		add r25,r0
 3919 1658 1124      		clr __zero_reg__
 3920 165a 8050      		subi r24,lo8(-(nodes_info_arr+1))
 3921 165c 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 3922 165e FC01      		movw r30,r24
 3923 1660 8081      		ld r24,Z
 3924 1662 9181      		ldd r25,Z+1
 3925 1664 292F      		mov r18,r25
 3926 1666 2F93      		push r18
 3927 1668 8F93      		push r24
 3928 166a 80E0      		ldi r24,lo8(.LC4)
 3929 166c 90E0      		ldi r25,hi8(.LC4)
 3930 166e 892F      		mov r24,r25
 3931 1670 8F93      		push r24
 3932 1672 80E0      		ldi r24,lo8(.LC4)
 3933 1674 90E0      		ldi r25,hi8(.LC4)
 3934 1676 8F93      		push r24
 3935 1678 0E94 0000 		call printf
 3936 167c 0F90      		pop __tmp_reg__
 3937 167e 0F90      		pop __tmp_reg__
 3938 1680 0F90      		pop __tmp_reg__
 3939 1682 0F90      		pop __tmp_reg__
1027:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 3940               		.loc 6 1027 0 discriminator 4
 3941 1684 2985      		ldd r18,Y+9
 3942 1686 3A85      		ldd r19,Y+10
 3943 1688 4AE4      		ldi r20,lo8(74)
 3944 168a 429F      		mul r20,r18
 3945 168c C001      		movw r24,r0
 3946 168e 439F      		mul r20,r19
 3947 1690 900D      		add r25,r0
 3948 1692 1124      		clr __zero_reg__
 3949 1694 8050      		subi r24,lo8(-(nodes_info_arr+69))
 3950 1696 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 3951 1698 FC01      		movw r30,r24
 3952 169a 8081      		ld r24,Z
 3953 169c 9181      		ldd r25,Z+1
 3954 169e CC01      		movw r24,r24
 3955 16a0 A0E0      		ldi r26,0
 3956 16a2 B0E0      		ldi r27,0
 3957 16a4 BC01      		movw r22,r24
 3958 16a6 CD01      		movw r24,r26
 3959 16a8 0E94 0000 		call __floatunsisf
 3960 16ac DC01      		movw r26,r24
 3961 16ae CB01      		movw r24,r22
 3962 16b0 20E0      		ldi r18,0
 3963 16b2 30E0      		ldi r19,0
 3964 16b4 40EA      		ldi r20,lo8(-96)
 3965 16b6 51E4      		ldi r21,lo8(65)
 3966 16b8 BC01      		movw r22,r24
 3967 16ba CD01      		movw r24,r26
 3968 16bc 0E94 0000 		call __divsf3
 3969 16c0 DC01      		movw r26,r24
 3970 16c2 CB01      		movw r24,r22
 3971 16c4 9C01      		movw r18,r24
 3972 16c6 AD01      		movw r20,r26
 3973 16c8 60E0      		ldi r22,0
 3974 16ca 70E0      		ldi r23,0
 3975 16cc 80E8      		ldi r24,lo8(-128)
 3976 16ce 9FE3      		ldi r25,lo8(63)
 3977 16d0 0E94 0000 		call __subsf3
 3978 16d4 DC01      		movw r26,r24
 3979 16d6 CB01      		movw r24,r22
 3980 16d8 2B2F      		mov r18,r27
 3981 16da 2F93      		push r18
 3982 16dc 2A2F      		mov r18,r26
 3983 16de 2F93      		push r18
 3984 16e0 292F      		mov r18,r25
 3985 16e2 2F93      		push r18
 3986 16e4 8F93      		push r24
 3987 16e6 80E0      		ldi r24,lo8(.LC5)
 3988 16e8 90E0      		ldi r25,hi8(.LC5)
 3989 16ea 892F      		mov r24,r25
 3990 16ec 8F93      		push r24
 3991 16ee 80E0      		ldi r24,lo8(.LC5)
 3992 16f0 90E0      		ldi r25,hi8(.LC5)
 3993 16f2 8F93      		push r24
 3994 16f4 0E94 0000 		call printf
 3995 16f8 0F90      		pop __tmp_reg__
 3996 16fa 0F90      		pop __tmp_reg__
 3997 16fc 0F90      		pop __tmp_reg__
 3998 16fe 0F90      		pop __tmp_reg__
 3999 1700 0F90      		pop __tmp_reg__
 4000 1702 0F90      		pop __tmp_reg__
1028:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
 4001               		.loc 6 1028 0 discriminator 4
 4002 1704 2985      		ldd r18,Y+9
 4003 1706 3A85      		ldd r19,Y+10
 4004 1708 4AE4      		ldi r20,lo8(74)
 4005 170a 429F      		mul r20,r18
 4006 170c C001      		movw r24,r0
 4007 170e 439F      		mul r20,r19
 4008 1710 900D      		add r25,r0
 4009 1712 1124      		clr __zero_reg__
 4010 1714 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4011 1716 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4012 1718 FC01      		movw r30,r24
 4013 171a 8081      		ld r24,Z
 4014 171c 9181      		ldd r25,Z+1
 4015 171e CC01      		movw r24,r24
 4016 1720 A0E0      		ldi r26,0
 4017 1722 B0E0      		ldi r27,0
 4018 1724 BC01      		movw r22,r24
 4019 1726 CD01      		movw r24,r26
 4020 1728 0E94 0000 		call __floatunsisf
 4021 172c DC01      		movw r26,r24
 4022 172e CB01      		movw r24,r22
 4023 1730 20E0      		ldi r18,0
 4024 1732 30E0      		ldi r19,0
 4025 1734 40EA      		ldi r20,lo8(-96)
 4026 1736 51E4      		ldi r21,lo8(65)
 4027 1738 BC01      		movw r22,r24
 4028 173a CD01      		movw r24,r26
 4029 173c 0E94 0000 		call __divsf3
 4030 1740 DC01      		movw r26,r24
 4031 1742 CB01      		movw r24,r22
 4032 1744 2B2F      		mov r18,r27
 4033 1746 2F93      		push r18
 4034 1748 2A2F      		mov r18,r26
 4035 174a 2F93      		push r18
 4036 174c 292F      		mov r18,r25
 4037 174e 2F93      		push r18
 4038 1750 8F93      		push r24
 4039 1752 80E0      		ldi r24,lo8(.LC6)
 4040 1754 90E0      		ldi r25,hi8(.LC6)
 4041 1756 892F      		mov r24,r25
 4042 1758 8F93      		push r24
 4043 175a 80E0      		ldi r24,lo8(.LC6)
 4044 175c 90E0      		ldi r25,hi8(.LC6)
 4045 175e 8F93      		push r24
 4046 1760 0E94 0000 		call printf
 4047 1764 0F90      		pop __tmp_reg__
 4048 1766 0F90      		pop __tmp_reg__
 4049 1768 0F90      		pop __tmp_reg__
 4050 176a 0F90      		pop __tmp_reg__
 4051 176c 0F90      		pop __tmp_reg__
 4052 176e 0F90      		pop __tmp_reg__
1029:ServerLLDN.c  **** 							
 4053               		.loc 6 1029 0 discriminator 4
 4054 1770 2985      		ldd r18,Y+9
 4055 1772 3A85      		ldd r19,Y+10
 4056 1774 4AE4      		ldi r20,lo8(74)
 4057 1776 429F      		mul r20,r18
 4058 1778 C001      		movw r24,r0
 4059 177a 439F      		mul r20,r19
 4060 177c 900D      		add r25,r0
 4061 177e 1124      		clr __zero_reg__
 4062 1780 8050      		subi r24,lo8(-(nodes_info_arr+5))
 4063 1782 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 4064 1784 FC01      		movw r30,r24
 4065 1786 8081      		ld r24,Z
 4066 1788 9181      		ldd r25,Z+1
 4067 178a A281      		ldd r26,Z+2
 4068 178c B381      		ldd r27,Z+3
 4069 178e 2B2F      		mov r18,r27
 4070 1790 2F93      		push r18
 4071 1792 2A2F      		mov r18,r26
 4072 1794 2F93      		push r18
 4073 1796 292F      		mov r18,r25
 4074 1798 2F93      		push r18
 4075 179a 8F93      		push r24
 4076 179c 80E0      		ldi r24,lo8(.LC7)
 4077 179e 90E0      		ldi r25,hi8(.LC7)
 4078 17a0 892F      		mov r24,r25
 4079 17a2 8F93      		push r24
 4080 17a4 80E0      		ldi r24,lo8(.LC7)
 4081 17a6 90E0      		ldi r25,hi8(.LC7)
 4082 17a8 8F93      		push r24
 4083 17aa 0E94 0000 		call printf
 4084 17ae 0F90      		pop __tmp_reg__
 4085 17b0 0F90      		pop __tmp_reg__
 4086 17b2 0F90      		pop __tmp_reg__
 4087 17b4 0F90      		pop __tmp_reg__
 4088 17b6 0F90      		pop __tmp_reg__
 4089 17b8 0F90      		pop __tmp_reg__
1031:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
 4090               		.loc 6 1031 0 discriminator 4
 4091 17ba 2985      		ldd r18,Y+9
 4092 17bc 3A85      		ldd r19,Y+10
 4093 17be 4AE4      		ldi r20,lo8(74)
 4094 17c0 429F      		mul r20,r18
 4095 17c2 C001      		movw r24,r0
 4096 17c4 439F      		mul r20,r19
 4097 17c6 900D      		add r25,r0
 4098 17c8 1124      		clr __zero_reg__
 4099 17ca 8050      		subi r24,lo8(-(nodes_info_arr+69))
 4100 17cc 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 4101 17ce FC01      		movw r30,r24
 4102 17d0 2081      		ld r18,Z
 4103 17d2 3181      		ldd r19,Z+1
 4104 17d4 8B81      		ldd r24,Y+3
 4105 17d6 9C81      		ldd r25,Y+4
 4106 17d8 820F      		add r24,r18
 4107 17da 931F      		adc r25,r19
 4108 17dc 9C83      		std Y+4,r25
 4109 17de 8B83      		std Y+3,r24
1032:ServerLLDN.c  **** 						}
 4110               		.loc 6 1032 0 discriminator 4
 4111 17e0 2985      		ldd r18,Y+9
 4112 17e2 3A85      		ldd r19,Y+10
 4113 17e4 4AE4      		ldi r20,lo8(74)
 4114 17e6 429F      		mul r20,r18
 4115 17e8 C001      		movw r24,r0
 4116 17ea 439F      		mul r20,r19
 4117 17ec 900D      		add r25,r0
 4118 17ee 1124      		clr __zero_reg__
 4119 17f0 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4120 17f2 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4121 17f4 FC01      		movw r30,r24
 4122 17f6 8081      		ld r24,Z
 4123 17f8 9181      		ldd r25,Z+1
 4124 17fa CC01      		movw r24,r24
 4125 17fc A0E0      		ldi r26,0
 4126 17fe B0E0      		ldi r27,0
 4127 1800 BC01      		movw r22,r24
 4128 1802 CD01      		movw r24,r26
 4129 1804 0E94 0000 		call __floatunsisf
 4130 1808 DC01      		movw r26,r24
 4131 180a CB01      		movw r24,r22
 4132 180c 9C01      		movw r18,r24
 4133 180e AD01      		movw r20,r26
 4134 1810 6D81      		ldd r22,Y+5
 4135 1812 7E81      		ldd r23,Y+6
 4136 1814 8F81      		ldd r24,Y+7
 4137 1816 9885      		ldd r25,Y+8
 4138 1818 0E94 0000 		call __addsf3
 4139 181c DC01      		movw r26,r24
 4140 181e CB01      		movw r24,r22
 4141 1820 8D83      		std Y+5,r24
 4142 1822 9E83      		std Y+6,r25
 4143 1824 AF83      		std Y+7,r26
 4144 1826 B887      		std Y+8,r27
1024:ServerLLDN.c  **** 						{
 4145               		.loc 6 1024 0 discriminator 4
 4146 1828 8985      		ldd r24,Y+9
 4147 182a 9A85      		ldd r25,Y+10
 4148 182c 0196      		adiw r24,1
 4149 182e 9A87      		std Y+10,r25
 4150 1830 8987      		std Y+9,r24
 4151               	.L121:
1024:ServerLLDN.c  **** 						{
 4152               		.loc 6 1024 0 is_stmt 0 discriminator 1
 4153 1832 2985      		ldd r18,Y+9
 4154 1834 3A85      		ldd r19,Y+10
 4155 1836 4AE4      		ldi r20,lo8(74)
 4156 1838 429F      		mul r20,r18
 4157 183a C001      		movw r24,r0
 4158 183c 439F      		mul r20,r19
 4159 183e 900D      		add r25,r0
 4160 1840 1124      		clr __zero_reg__
 4161 1842 8050      		subi r24,lo8(-(nodes_info_arr+1))
 4162 1844 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 4163 1846 FC01      		movw r30,r24
 4164 1848 8081      		ld r24,Z
 4165 184a 9181      		ldd r25,Z+1
 4166 184c 892B      		or r24,r25
 4167 184e 01F0      		breq .L122
1024:ServerLLDN.c  **** 						{
 4168               		.loc 6 1024 0 discriminator 3
 4169 1850 2091 0000 		lds r18,assTimeSlot
 4170 1854 3091 0000 		lds r19,assTimeSlot+1
 4171 1858 8985      		ldd r24,Y+9
 4172 185a 9A85      		ldd r25,Y+10
 4173 185c 8217      		cp r24,r18
 4174 185e 9307      		cpc r25,r19
 4175 1860 04F4      		brge .+2
 4176 1862 00C0      		rjmp .L123
 4177               	.L122:
 4178               	.LBE16:
1034:ServerLLDN.c  **** 						{
 4179               		.loc 6 1034 0 is_stmt 1
 4180 1864 8091 0000 		lds r24,assTimeSlot
 4181 1868 9091 0000 		lds r25,assTimeSlot+1
 4182 186c 1816      		cp __zero_reg__,r24
 4183 186e 1906      		cpc __zero_reg__,r25
 4184 1870 04F0      		brlt .+2
 4185 1872 00C0      		rjmp .L127
1034:ServerLLDN.c  **** 						{
 4186               		.loc 6 1034 0 is_stmt 0 discriminator 1
 4187 1874 8B81      		ldd r24,Y+3
 4188 1876 9C81      		ldd r25,Y+4
 4189 1878 1816      		cp __zero_reg__,r24
 4190 187a 1906      		cpc __zero_reg__,r25
 4191 187c 04F0      		brlt .+2
 4192 187e 00C0      		rjmp .L127
1036:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
 4193               		.loc 6 1036 0 is_stmt 1
 4194 1880 8B81      		ldd r24,Y+3
 4195 1882 9C81      		ldd r25,Y+4
 4196 1884 092E      		mov __tmp_reg__,r25
 4197 1886 000C      		lsl r0
 4198 1888 AA0B      		sbc r26,r26
 4199 188a BB0B      		sbc r27,r27
 4200 188c BC01      		movw r22,r24
 4201 188e CD01      		movw r24,r26
 4202 1890 0E94 0000 		call __floatsisf
 4203 1894 DC01      		movw r26,r24
 4204 1896 CB01      		movw r24,r22
 4205 1898 2D85      		ldd r18,Y+13
 4206 189a 3E85      		ldd r19,Y+14
 4207 189c 4F85      		ldd r20,Y+15
 4208 189e 5889      		ldd r21,Y+16
 4209 18a0 BC01      		movw r22,r24
 4210 18a2 CD01      		movw r24,r26
 4211 18a4 0E94 0000 		call __divsf3
 4212 18a8 DC01      		movw r26,r24
 4213 18aa CB01      		movw r24,r22
 4214 18ac 9C01      		movw r18,r24
 4215 18ae AD01      		movw r20,r26
 4216 18b0 60E0      		ldi r22,0
 4217 18b2 70E0      		ldi r23,0
 4218 18b4 80E8      		ldi r24,lo8(-128)
 4219 18b6 9FE3      		ldi r25,lo8(63)
 4220 18b8 0E94 0000 		call __subsf3
 4221 18bc DC01      		movw r26,r24
 4222 18be CB01      		movw r24,r22
 4223 18c0 8093 0000 		sts PLR,r24
 4224 18c4 9093 0000 		sts PLR+1,r25
 4225 18c8 A093 0000 		sts PLR+2,r26
 4226 18cc B093 0000 		sts PLR+3,r27
1037:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f", PLR, PER);
 4227               		.loc 6 1037 0
 4228 18d0 2D85      		ldd r18,Y+13
 4229 18d2 3E85      		ldd r19,Y+14
 4230 18d4 4F85      		ldd r20,Y+15
 4231 18d6 5889      		ldd r21,Y+16
 4232 18d8 6D81      		ldd r22,Y+5
 4233 18da 7E81      		ldd r23,Y+6
 4234 18dc 8F81      		ldd r24,Y+7
 4235 18de 9885      		ldd r25,Y+8
 4236 18e0 0E94 0000 		call __divsf3
 4237 18e4 DC01      		movw r26,r24
 4238 18e6 CB01      		movw r24,r22
 4239 18e8 8093 0000 		sts PER,r24
 4240 18ec 9093 0000 		sts PER+1,r25
 4241 18f0 A093 0000 		sts PER+2,r26
 4242 18f4 B093 0000 		sts PER+3,r27
1038:ServerLLDN.c  **** 							
 4243               		.loc 6 1038 0
 4244 18f8 2091 0000 		lds r18,PER
 4245 18fc 3091 0000 		lds r19,PER+1
 4246 1900 4091 0000 		lds r20,PER+2
 4247 1904 5091 0000 		lds r21,PER+3
 4248 1908 8091 0000 		lds r24,PLR
 4249 190c 9091 0000 		lds r25,PLR+1
 4250 1910 A091 0000 		lds r26,PLR+2
 4251 1914 B091 0000 		lds r27,PLR+3
 4252 1918 652F      		mov r22,r21
 4253 191a 6F93      		push r22
 4254 191c 642F      		mov r22,r20
 4255 191e 6F93      		push r22
 4256 1920 632F      		mov r22,r19
 4257 1922 6F93      		push r22
 4258 1924 2F93      		push r18
 4259 1926 2B2F      		mov r18,r27
 4260 1928 2F93      		push r18
 4261 192a 2A2F      		mov r18,r26
 4262 192c 2F93      		push r18
 4263 192e 292F      		mov r18,r25
 4264 1930 2F93      		push r18
 4265 1932 8F93      		push r24
 4266 1934 80E0      		ldi r24,lo8(.LC8)
 4267 1936 90E0      		ldi r25,hi8(.LC8)
 4268 1938 892F      		mov r24,r25
 4269 193a 8F93      		push r24
 4270 193c 80E0      		ldi r24,lo8(.LC8)
 4271 193e 90E0      		ldi r25,hi8(.LC8)
 4272 1940 8F93      		push r24
 4273 1942 0E94 0000 		call printf
 4274 1946 8DB7      		in r24,__SP_L__
 4275 1948 9EB7      		in r25,__SP_H__
 4276 194a 0A96      		adiw r24,10
 4277 194c 0FB6      		in __tmp_reg__,__SREG__
 4278 194e F894      		cli
 4279 1950 DEBF      		out __SP_H__,r29
 4280 1952 0FBE      		out __SREG__,__tmp_reg__
 4281 1954 CDBF      		out __SP_L__,r28
 4282               	.LBE15:
1042:ServerLLDN.c  **** 				}
 4283               		.loc 6 1042 0
 4284 1956 00C0      		rjmp .L127
 4285               	.L110:
 4286               	.LBB17:
1046:ServerLLDN.c  **** 					{
 4287               		.loc 6 1046 0
 4288 1958 1C86      		std Y+12,__zero_reg__
 4289 195a 1B86      		std Y+11,__zero_reg__
 4290 195c 00C0      		rjmp .L124
 4291               	.L125:
1048:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
 4292               		.loc 6 1048 0 discriminator 3
 4293 195e 8B85      		ldd r24,Y+11
 4294 1960 9C85      		ldd r25,Y+12
 4295 1962 8050      		subi r24,lo8(-(ACKFrame+1))
 4296 1964 9040      		sbci r25,hi8(-(ACKFrame+1))
 4297 1966 FC01      		movw r30,r24
 4298 1968 1082      		st Z,__zero_reg__
1049:ServerLLDN.c  **** 					}
 4299               		.loc 6 1049 0 discriminator 3
 4300 196a 8B85      		ldd r24,Y+11
 4301 196c 9C85      		ldd r25,Y+12
 4302 196e 8050      		subi r24,lo8(-(retransmit_ts_array))
 4303 1970 9040      		sbci r25,hi8(-(retransmit_ts_array))
 4304 1972 FC01      		movw r30,r24
 4305 1974 1082      		st Z,__zero_reg__
1046:ServerLLDN.c  **** 					{
 4306               		.loc 6 1046 0 discriminator 3
 4307 1976 8B85      		ldd r24,Y+11
 4308 1978 9C85      		ldd r25,Y+12
 4309 197a 0196      		adiw r24,1
 4310 197c 9C87      		std Y+12,r25
 4311 197e 8B87      		std Y+11,r24
 4312               	.L124:
1046:ServerLLDN.c  **** 					{
 4313               		.loc 6 1046 0 is_stmt 0 discriminator 1
 4314 1980 8B85      		ldd r24,Y+11
 4315 1982 9C85      		ldd r25,Y+12
 4316 1984 8097      		sbiw r24,32
 4317 1986 04F0      		brlt .L125
 4318               	.LBE17:
1051:ServerLLDN.c  **** 					ACKFrame_size = 0;
 4319               		.loc 6 1051 0 is_stmt 1
 4320 1988 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 4321 198c 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
1052:ServerLLDN.c  **** 					
 4322               		.loc 6 1052 0
 4323 1990 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 4324 1994 1092 0000 		sts ACKFrame_size,__zero_reg__
1054:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 4325               		.loc 6 1054 0
 4326 1998 1092 0000 		sts msgReq+5+1,__zero_reg__
 4327 199c 1092 0000 		sts msgReq+5,__zero_reg__
1055:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 4328               		.loc 6 1055 0
 4329 19a0 1092 0000 		sts msgReq+7,__zero_reg__
1056:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 4330               		.loc 6 1056 0
 4331 19a4 1092 0000 		sts msgReq+8,__zero_reg__
1057:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 4332               		.loc 6 1057 0
 4333 19a8 80E0      		ldi r24,0
 4334 19aa 90E4      		ldi r25,lo8(64)
 4335 19ac 9093 0000 		sts msgReq+9+1,r25
 4336 19b0 8093 0000 		sts msgReq+9,r24
1058:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 4337               		.loc 6 1058 0
 4338 19b4 80E0      		ldi r24,lo8(ACKFrame)
 4339 19b6 90E0      		ldi r25,hi8(ACKFrame)
 4340 19b8 9093 0000 		sts msgReq+13+1,r25
 4341 19bc 8093 0000 		sts msgReq+13,r24
1059:ServerLLDN.c  **** 
 4342               		.loc 6 1059 0
 4343 19c0 8091 0000 		lds r24,macLLDNRetransmitTS
 4344 19c4 9091 0000 		lds r25,macLLDNRetransmitTS+1
 4345 19c8 8F5F      		subi r24,lo8(-(1))
 4346 19ca 8093 0000 		sts msgReq+15,r24
1061:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
 4347               		.loc 6 1061 0
 4348 19ce 81E0      		ldi r24,lo8(1)
 4349 19d0 8093 0000 		sts appState,r24
1062:ServerLLDN.c  **** 					break;
 4350               		.loc 6 1062 0
 4351 19d4 1092 0000 		sts appPanState,__zero_reg__
1063:ServerLLDN.c  **** 				}				
 4352               		.loc 6 1063 0
 4353 19d8 00C0      		rjmp .L98
 4354               	.L99:
1068:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 4355               		.loc 6 1068 0
 4356 19da 1092 0000 		sts msgReq+9+1,__zero_reg__
 4357 19de 1092 0000 		sts msgReq+9,__zero_reg__
1069:ServerLLDN.c  **** 					break;
 4358               		.loc 6 1069 0
 4359 19e2 81E0      		ldi r24,lo8(1)
 4360 19e4 8093 0000 		sts appState,r24
1070:ServerLLDN.c  **** 				}
 4361               		.loc 6 1070 0
 4362 19e8 00C0      		rjmp .L98
 4363               	.L127:
1042:ServerLLDN.c  **** 				}
 4364               		.loc 6 1042 0
 4365 19ea 0000      		nop
 4366               	.L98:
 4367               	.L126:
1073:ServerLLDN.c  **** 		}
 4368               		.loc 6 1073 0
 4369 19ec 0000      		nop
 4370               	.L97:
1149:ServerLLDN.c  **** 		}
1150:ServerLLDN.c  **** 	}
1151:ServerLLDN.c  **** }
 4371               		.loc 6 1151 0
 4372 19ee 0000      		nop
 4373               	/* epilogue start */
 4374 19f0 6096      		adiw r28,16
 4375 19f2 0FB6      		in __tmp_reg__,__SREG__
 4376 19f4 F894      		cli
 4377 19f6 DEBF      		out __SP_H__,r29
 4378 19f8 0FBE      		out __SREG__,__tmp_reg__
 4379 19fa CDBF      		out __SP_L__,r28
 4380 19fc DF91      		pop r29
 4381 19fe CF91      		pop r28
 4382 1a00 FF90      		pop r15
 4383 1a02 EF90      		pop r14
 4384 1a04 DF90      		pop r13
 4385 1a06 CF90      		pop r12
 4386 1a08 0895      		ret
 4387               		.cfi_endproc
 4388               	.LFE149:
 4390               		.section	.rodata
 4391               	.LC0:
 4392 007b 00        		.byte	0
 4393 007c C2        		.byte	-62
 4394 007d 01        		.byte	1
 4395 007e 00        		.byte	0
 4396 007f 03        		.byte	3
 4397 0080 00        		.byte	0
 4398 0081 00        		.byte	0
 4399               		.text
 4400               	.global	main
 4402               	main:
 4403               	.LFB150:
1152:ServerLLDN.c  **** 
1153:ServerLLDN.c  **** 	/*****************************************************************************
1154:ServerLLDN.c  **** 	*****************************************************************************/
1155:ServerLLDN.c  **** 	int main(void)
1156:ServerLLDN.c  **** 	{
 4404               		.loc 6 1156 0
 4405               		.cfi_startproc
 4406 1a0a 0F93      		push r16
 4407               	.LCFI129:
 4408               		.cfi_def_cfa_offset 3
 4409               		.cfi_offset 16, -2
 4410 1a0c 1F93      		push r17
 4411               	.LCFI130:
 4412               		.cfi_def_cfa_offset 4
 4413               		.cfi_offset 17, -3
 4414 1a0e CF93      		push r28
 4415               	.LCFI131:
 4416               		.cfi_def_cfa_offset 5
 4417               		.cfi_offset 28, -4
 4418 1a10 DF93      		push r29
 4419               	.LCFI132:
 4420               		.cfi_def_cfa_offset 6
 4421               		.cfi_offset 29, -5
 4422 1a12 CDB7      		in r28,__SP_L__
 4423 1a14 DEB7      		in r29,__SP_H__
 4424               	.LCFI133:
 4425               		.cfi_def_cfa_register 28
 4426 1a16 2797      		sbiw r28,7
 4427               	.LCFI134:
 4428               		.cfi_def_cfa_offset 13
 4429 1a18 0FB6      		in __tmp_reg__,__SREG__
 4430 1a1a F894      		cli
 4431 1a1c DEBF      		out __SP_H__,r29
 4432 1a1e 0FBE      		out __SREG__,__tmp_reg__
 4433 1a20 CDBF      		out __SP_L__,r28
 4434               	/* prologue: function */
 4435               	/* frame size = 7 */
 4436               	/* stack size = 11 */
 4437               	.L__stack_usage = 11
1157:ServerLLDN.c  **** 		sysclk_init();
 4438               		.loc 6 1157 0
 4439 1a22 0E94 0000 		call sysclk_init
1158:ServerLLDN.c  **** 		board_init();
 4440               		.loc 6 1158 0
 4441 1a26 0E94 0000 		call board_init
1159:ServerLLDN.c  **** 
1160:ServerLLDN.c  **** 		SYS_Init();
 4442               		.loc 6 1160 0
 4443 1a2a 0E94 0000 		call SYS_Init
1161:ServerLLDN.c  **** 		/* Disable CSMA/CA
1162:ServerLLDN.c  **** 		 * Disable auto ACK
1163:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
1164:ServerLLDN.c  **** 		 */
1165:ServerLLDN.c  **** 
1166:ServerLLDN.c  **** 		sm_init();
 4444               		.loc 6 1166 0
 4445 1a2e 0E94 0000 		call sm_init
1167:ServerLLDN.c  **** 
1168:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
1169:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1170:ServerLLDN.c  **** 		irq_initialize_vectors();
1171:ServerLLDN.c  **** 	#endif
1172:ServerLLDN.c  **** 		cpu_irq_enable();
 4446               		.loc 6 1172 0
 4447               	/* #APP */
 4448               	 ;  1172 "ServerLLDN.c" 1
 4449 1a32 7894      		sei
 4450               	 ;  0 "" 2
1173:ServerLLDN.c  **** 
1174:ServerLLDN.c  **** 	#if 1
1175:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1176:ServerLLDN.c  **** 		stdio_usb_init();
1177:ServerLLDN.c  **** 	#else
1178:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 4451               		.loc 6 1178 0
 4452               	/* #NOAPP */
 4453 1a34 27E0      		ldi r18,lo8(7)
 4454 1a36 E0E0      		ldi r30,lo8(.LC0)
 4455 1a38 F0E0      		ldi r31,hi8(.LC0)
 4456 1a3a CE01      		movw r24,r28
 4457 1a3c 0196      		adiw r24,1
 4458 1a3e DC01      		movw r26,r24
 4459               		0:
 4460 1a40 0190      		ld r0,Z+
 4461 1a42 0D92      		st X+,r0
 4462 1a44 2A95      		dec r18
 4463 1a46 01F4      		brne 0b
1179:ServerLLDN.c  **** 		{
1180:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1181:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1182:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1183:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1184:ServerLLDN.c  **** 		};
1185:ServerLLDN.c  **** 
1186:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 4464               		.loc 6 1186 0
 4465 1a48 CE01      		movw r24,r28
 4466 1a4a 0196      		adiw r24,1
 4467 1a4c BC01      		movw r22,r24
 4468 1a4e 80EC      		ldi r24,lo8(-64)
 4469 1a50 90E0      		ldi r25,0
 4470 1a52 0E94 0000 		call stdio_serial_init
1187:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 4471               		.loc 6 1187 0
 4472 1a56 80EC      		ldi r24,lo8(-64)
 4473 1a58 90E0      		ldi r25,0
 4474 1a5a 0E94 0000 		call usart_double_baud_enable
1188:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 4475               		.loc 6 1188 0
 4476 1a5e 0E94 0000 		call sysclk_get_source_clock_hz
 4477 1a62 DC01      		movw r26,r24
 4478 1a64 CB01      		movw r24,r22
 4479 1a66 8C01      		movw r16,r24
 4480 1a68 9D01      		movw r18,r26
 4481 1a6a 40E0      		ldi r20,0
 4482 1a6c 52EC      		ldi r21,lo8(-62)
 4483 1a6e 61E0      		ldi r22,lo8(1)
 4484 1a70 70E0      		ldi r23,0
 4485 1a72 80EC      		ldi r24,lo8(-64)
 4486 1a74 90E0      		ldi r25,0
 4487 1a76 0E94 0000 		call usart_set_baudrate_precalculated
 4488               	.L129:
1189:ServerLLDN.c  **** 
1190:ServerLLDN.c  **** 	#endif
1191:ServerLLDN.c  **** 	#endif
1192:ServerLLDN.c  **** 		for(;;)
1193:ServerLLDN.c  **** 		{
1194:ServerLLDN.c  **** 			SYS_TaskHandler();
 4489               		.loc 6 1194 0 discriminator 1
 4490 1a7a 0E94 0000 		call SYS_TaskHandler
1195:ServerLLDN.c  **** 			APP_TaskHandler();
 4491               		.loc 6 1195 0 discriminator 1
 4492 1a7e 0E94 0000 		call APP_TaskHandler
1196:ServerLLDN.c  **** 		}
 4493               		.loc 6 1196 0 discriminator 1
 4494 1a82 00C0      		rjmp .L129
 4495               		.cfi_endproc
 4496               	.LFE150:
 4498               	.Letext0:
 4499               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 4500               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 4501               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 4502               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 4503               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 4504               		.file 12 "lldn.h"
 4505               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 4506               		.file 14 "config/config.h"
 4507               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:92     .bss.received_packets:00000000 received_packets
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:97     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:109    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:121    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:132    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:181    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:276    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:320    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:371    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:442    .text:0000019e macsc_read32
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:525    .text:00000208 macsc_write_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:604    .text:00000270 macsc_read_count
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:647    .text:0000029a macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:700    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:705    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:710    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:718    .text:000002ce appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:780    .data.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:787    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:797    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000021 ACKFrame
                            *COM*:00000021 ACKFrame_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:805    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:811    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:817    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:822    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:828    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:834    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:840    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:846    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:852    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:859    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:865    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:871    .bss.PLR:00000000 PLR
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:877    .bss.PER:00000000 PER
                            *COM*:00000020 retransmit_ts_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:884    .bss.retransmit_ts_array_counter:00000000 retransmit_ts_array_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:890    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:896    .bss.cmp_value_start_superframe:00000000 cmp_value_start_superframe
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:901    .data.msgReqGACK:00000000 msgReqGACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:912    .text:0000031a tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:952    .text:0000033a lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:987    .text:00000354 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1033   .text:0000038a end_of_association_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1069   .text:000003a6 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1204   .text:0000046e addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1438   .text:0000060a CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1521   .text:0000068c appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1636   .text:00000724 check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1741   .text:000007ae check_ack_aux
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:1852   .text:00000838 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2308   .text:00000b5e appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2360   .text:00000ba4 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2568   .text:00000ce8 appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2761   .text:00000e5e end_of_superframe_Online
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2808   .text:00000e8a send_gack
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:2931   .text:00000f40 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:3286   .text:0000121a appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:3379   .text:00001290 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccH9blSc.s:4402   .text:00001a0a main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
NWK_DataReq
printf
malloc
free
__floatsisf
__divsf3
__subsf3
__fixsfsi
__floatunsisf
__mulsf3
__addsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
macsc_set_cmp2_int_cb
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
