   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  14               	sysclk_get_main_hz:
  15               	.LFB67:
  16               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  17               		.loc 1 175 0
  18               		.cfi_startproc
  19 0000 CF93      		push r28
  20               	.LCFI0:
  21               		.cfi_def_cfa_offset 3
  22               		.cfi_offset 28, -2
  23 0002 DF93      		push r29
  24               	.LCFI1:
  25               		.cfi_def_cfa_offset 4
  26               		.cfi_offset 29, -3
  27 0004 CDB7      		in r28,__SP_L__
  28 0006 DEB7      		in r29,__SP_H__
  29               	.LCFI2:
  30               		.cfi_def_cfa_register 28
  31               	/* prologue: function */
  32               	/* frame size = 0 */
  33               	/* stack size = 2 */
  34               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  35               		.loc 1 185 0
  36 0008 80E0      		ldi r24,0
  37 000a 94E2      		ldi r25,lo8(36)
  38 000c A4EF      		ldi r26,lo8(-12)
  39 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  40               		.loc 1 195 0
  41 0010 BC01      		movw r22,r24
  42 0012 CD01      		movw r24,r26
  43               	/* epilogue start */
  44 0014 DF91      		pop r29
  45 0016 CF91      		pop r28
  46 0018 0895      		ret
  47               		.cfi_endproc
  48               	.LFE67:
  51               	sysclk_get_source_clock_hz:
  52               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  53               		.loc 1 206 0
  54               		.cfi_startproc
  55 001a CF93      		push r28
  56               	.LCFI3:
  57               		.cfi_def_cfa_offset 3
  58               		.cfi_offset 28, -2
  59 001c DF93      		push r29
  60               	.LCFI4:
  61               		.cfi_def_cfa_offset 4
  62               		.cfi_offset 29, -3
  63 001e CDB7      		in r28,__SP_L__
  64 0020 DEB7      		in r29,__SP_H__
  65               	.LCFI5:
  66               		.cfi_def_cfa_register 28
  67               	/* prologue: function */
  68               	/* frame size = 0 */
  69               	/* stack size = 2 */
  70               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  71               		.loc 1 213 0
  72 0022 0E94 0000 		call sysclk_get_main_hz
  73 0026 DC01      		movw r26,r24
  74 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  75               		.loc 1 284 0
  76 002a BC01      		movw r22,r24
  77 002c CD01      		movw r24,r26
  78               	/* epilogue start */
  79 002e DF91      		pop r29
  80 0030 CF91      		pop r28
  81 0032 0895      		ret
  82               		.cfi_endproc
  83               	.LFE68:
  85               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  88               	baudctrl_1mhz:
  89 0000 3300      		.word	51
  90 0002 1900      		.word	25
  91 0004 0C00      		.word	12
  92 0006 0600      		.word	6
  93 0008 0300      		.word	3
  94 000a 0200      		.word	2
  95 000c 0100      		.word	1
  96 000e FF00      		.word	255
  97               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 100               	baudctrl_8mhz:
 101 0000 A001      		.word	416
 102 0002 CF00      		.word	207
 103 0004 6700      		.word	103
 104 0006 3300      		.word	51
 105 0008 1900      		.word	25
 106 000a 0C00      		.word	12
 107 000c 0700      		.word	7
 108 000e 0800      		.word	8
 109               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 112               	baudctrl_16mhz:
 113 0000 4003      		.word	832
 114 0002 A001      		.word	416
 115 0004 CF00      		.word	207
 116 0006 6700      		.word	103
 117 0008 3300      		.word	51
 118 000a 1900      		.word	25
 119 000c 1000      		.word	16
 120 000e 1000      		.word	16
 121               		.text
 123               	usart_double_baud_enable:
 124               	.LFB101:
 125               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 126               		.loc 2 515 0
 127               		.cfi_startproc
 128 0034 CF93      		push r28
 129               	.LCFI6:
 130               		.cfi_def_cfa_offset 3
 131               		.cfi_offset 28, -2
 132 0036 DF93      		push r29
 133               	.LCFI7:
 134               		.cfi_def_cfa_offset 4
 135               		.cfi_offset 29, -3
 136 0038 00D0      		rcall .
 137               	.LCFI8:
 138               		.cfi_def_cfa_offset 6
 139 003a CDB7      		in r28,__SP_L__
 140 003c DEB7      		in r29,__SP_H__
 141               	.LCFI9:
 142               		.cfi_def_cfa_register 28
 143               	/* prologue: function */
 144               	/* frame size = 2 */
 145               	/* stack size = 4 */
 146               	.L__stack_usage = 4
 147 003e 9A83      		std Y+2,r25
 148 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 149               		.loc 2 516 0
 150 0042 8981      		ldd r24,Y+1
 151 0044 9A81      		ldd r25,Y+2
 152 0046 FC01      		movw r30,r24
 153 0048 8081      		ld r24,Z
 154 004a 282F      		mov r18,r24
 155 004c 2260      		ori r18,lo8(2)
 156 004e 8981      		ldd r24,Y+1
 157 0050 9A81      		ldd r25,Y+2
 158 0052 FC01      		movw r30,r24
 159 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 160               		.loc 2 517 0
 161 0056 0000      		nop
 162               	/* epilogue start */
 163 0058 0F90      		pop __tmp_reg__
 164 005a 0F90      		pop __tmp_reg__
 165 005c DF91      		pop r29
 166 005e CF91      		pop r28
 167 0060 0895      		ret
 168               		.cfi_endproc
 169               	.LFE101:
 172               	usart_serial_init:
 173               	.LFB104:
 174               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 175               		.loc 3 77 0
 176               		.cfi_startproc
 177 0062 CF93      		push r28
 178               	.LCFI10:
 179               		.cfi_def_cfa_offset 3
 180               		.cfi_offset 28, -2
 181 0064 DF93      		push r29
 182               	.LCFI11:
 183               		.cfi_def_cfa_offset 4
 184               		.cfi_offset 29, -3
 185 0066 CDB7      		in r28,__SP_L__
 186 0068 DEB7      		in r29,__SP_H__
 187               	.LCFI12:
 188               		.cfi_def_cfa_register 28
 189 006a 2B97      		sbiw r28,11
 190               	.LCFI13:
 191               		.cfi_def_cfa_offset 15
 192 006c 0FB6      		in __tmp_reg__,__SREG__
 193 006e F894      		cli
 194 0070 DEBF      		out __SP_H__,r29
 195 0072 0FBE      		out __SREG__,__tmp_reg__
 196 0074 CDBF      		out __SP_L__,r28
 197               	/* prologue: function */
 198               	/* frame size = 11 */
 199               	/* stack size = 13 */
 200               	.L__stack_usage = 13
 201 0076 9987      		std Y+9,r25
 202 0078 8887      		std Y+8,r24
 203 007a 7B87      		std Y+11,r23
 204 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 205               		.loc 3 80 0
 206 007e 8A85      		ldd r24,Y+10
 207 0080 9B85      		ldd r25,Y+11
 208 0082 FC01      		movw r30,r24
 209 0084 8481      		ldd r24,Z+4
 210 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 211               		.loc 3 81 0
 212 0088 8A85      		ldd r24,Y+10
 213 008a 9B85      		ldd r25,Y+11
 214 008c FC01      		movw r30,r24
 215 008e 8581      		ldd r24,Z+5
 216 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 217               		.loc 3 82 0
 218 0092 8A85      		ldd r24,Y+10
 219 0094 9B85      		ldd r25,Y+11
 220 0096 FC01      		movw r30,r24
 221 0098 8681      		ldd r24,Z+6
 222 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 223               		.loc 3 83 0
 224 009c 8A85      		ldd r24,Y+10
 225 009e 9B85      		ldd r25,Y+11
 226 00a0 FC01      		movw r30,r24
 227 00a2 8081      		ld r24,Z
 228 00a4 9181      		ldd r25,Z+1
 229 00a6 A281      		ldd r26,Z+2
 230 00a8 B381      		ldd r27,Z+3
 231 00aa 8983      		std Y+1,r24
 232 00ac 9A83      		std Y+2,r25
 233 00ae AB83      		std Y+3,r26
 234 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 235               		.loc 3 85 0
 236 00b2 8885      		ldd r24,Y+8
 237 00b4 9985      		ldd r25,Y+9
 238 00b6 9E01      		movw r18,r28
 239 00b8 2F5F      		subi r18,-1
 240 00ba 3F4F      		sbci r19,-1
 241 00bc B901      		movw r22,r18
 242 00be 0E94 0000 		call usart_init_rs232
 243 00c2 8823      		tst r24
 244 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 245               		.loc 3 86 0
 246 00c6 81E0      		ldi r24,lo8(1)
 247 00c8 00C0      		rjmp .L9
 248               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 249               		.loc 3 88 0
 250 00ca 80E0      		ldi r24,0
 251               	.L9:
 252               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 253               		.loc 3 90 0 discriminator 1
 254 00cc 2B96      		adiw r28,11
 255 00ce 0FB6      		in __tmp_reg__,__SREG__
 256 00d0 F894      		cli
 257 00d2 DEBF      		out __SP_H__,r29
 258 00d4 0FBE      		out __SREG__,__tmp_reg__
 259 00d6 CDBF      		out __SP_L__,r28
 260 00d8 DF91      		pop r29
 261 00da CF91      		pop r28
 262 00dc 0895      		ret
 263               		.cfi_endproc
 264               	.LFE104:
 267               	usart_serial_putchar:
 268               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 269               		.loc 3 100 0
 270               		.cfi_startproc
 271 00de CF93      		push r28
 272               	.LCFI14:
 273               		.cfi_def_cfa_offset 3
 274               		.cfi_offset 28, -2
 275 00e0 DF93      		push r29
 276               	.LCFI15:
 277               		.cfi_def_cfa_offset 4
 278               		.cfi_offset 29, -3
 279 00e2 00D0      		rcall .
 280 00e4 1F92      		push __zero_reg__
 281               	.LCFI16:
 282               		.cfi_def_cfa_offset 7
 283 00e6 CDB7      		in r28,__SP_L__
 284 00e8 DEB7      		in r29,__SP_H__
 285               	.LCFI17:
 286               		.cfi_def_cfa_register 28
 287               	/* prologue: function */
 288               	/* frame size = 3 */
 289               	/* stack size = 5 */
 290               	.L__stack_usage = 5
 291 00ea 9A83      		std Y+2,r25
 292 00ec 8983      		std Y+1,r24
 293 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 294               		.loc 3 101 0
 295 00f0 8981      		ldd r24,Y+1
 296 00f2 9A81      		ldd r25,Y+2
 297 00f4 6B81      		ldd r22,Y+3
 298 00f6 0E94 0000 		call usart_putchar
 299               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 300               		.loc 3 102 0
 301 00fa 0F90      		pop __tmp_reg__
 302 00fc 0F90      		pop __tmp_reg__
 303 00fe 0F90      		pop __tmp_reg__
 304 0100 DF91      		pop r29
 305 0102 CF91      		pop r28
 306 0104 0895      		ret
 307               		.cfi_endproc
 308               	.LFE105:
 311               	usart_serial_getchar:
 312               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 313               		.loc 3 111 0
 314               		.cfi_startproc
 315 0106 CF93      		push r28
 316               	.LCFI18:
 317               		.cfi_def_cfa_offset 3
 318               		.cfi_offset 28, -2
 319 0108 DF93      		push r29
 320               	.LCFI19:
 321               		.cfi_def_cfa_offset 4
 322               		.cfi_offset 29, -3
 323 010a 00D0      		rcall .
 324 010c 00D0      		rcall .
 325               	.LCFI20:
 326               		.cfi_def_cfa_offset 8
 327 010e CDB7      		in r28,__SP_L__
 328 0110 DEB7      		in r29,__SP_H__
 329               	.LCFI21:
 330               		.cfi_def_cfa_register 28
 331               	/* prologue: function */
 332               	/* frame size = 4 */
 333               	/* stack size = 6 */
 334               	.L__stack_usage = 6
 335 0112 9A83      		std Y+2,r25
 336 0114 8983      		std Y+1,r24
 337 0116 7C83      		std Y+4,r23
 338 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 339               		.loc 3 112 0
 340 011a 8981      		ldd r24,Y+1
 341 011c 9A81      		ldd r25,Y+2
 342 011e 0E94 0000 		call usart_getchar
 343 0122 282F      		mov r18,r24
 344 0124 8B81      		ldd r24,Y+3
 345 0126 9C81      		ldd r25,Y+4
 346 0128 FC01      		movw r30,r24
 347 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 348               		.loc 3 113 0
 349 012c 0000      		nop
 350               	/* epilogue start */
 351 012e 0F90      		pop __tmp_reg__
 352 0130 0F90      		pop __tmp_reg__
 353 0132 0F90      		pop __tmp_reg__
 354 0134 0F90      		pop __tmp_reg__
 355 0136 DF91      		pop r29
 356 0138 CF91      		pop r28
 357 013a 0895      		ret
 358               		.cfi_endproc
 359               	.LFE106:
 362               	stdio_serial_init:
 363               	.LFB107:
 364               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 365               		.loc 4 90 0
 366               		.cfi_startproc
 367 013c CF93      		push r28
 368               	.LCFI22:
 369               		.cfi_def_cfa_offset 3
 370               		.cfi_offset 28, -2
 371 013e DF93      		push r29
 372               	.LCFI23:
 373               		.cfi_def_cfa_offset 4
 374               		.cfi_offset 29, -3
 375 0140 00D0      		rcall .
 376 0142 00D0      		rcall .
 377               	.LCFI24:
 378               		.cfi_def_cfa_offset 8
 379 0144 CDB7      		in r28,__SP_L__
 380 0146 DEB7      		in r29,__SP_H__
 381               	.LCFI25:
 382               		.cfi_def_cfa_register 28
 383               	/* prologue: function */
 384               	/* frame size = 4 */
 385               	/* stack size = 6 */
 386               	.L__stack_usage = 6
 387 0148 9A83      		std Y+2,r25
 388 014a 8983      		std Y+1,r24
 389 014c 7C83      		std Y+4,r23
 390 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 391               		.loc 4 91 0
 392 0150 8981      		ldd r24,Y+1
 393 0152 9A81      		ldd r25,Y+2
 394 0154 9093 0000 		sts stdio_base+1,r25
 395 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 396               		.loc 4 92 0
 397 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 398 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 399 0160 9093 0000 		sts ptr_put+1,r25
 400 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 401               		.loc 4 93 0
 402 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 403 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 404 016c 9093 0000 		sts ptr_get+1,r25
 405 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 406               		.loc 4 95 0
 407 0174 2B81      		ldd r18,Y+3
 408 0176 3C81      		ldd r19,Y+4
 409 0178 8981      		ldd r24,Y+1
 410 017a 9A81      		ldd r25,Y+2
 411 017c B901      		movw r22,r18
 412 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 413               		.loc 4 107 0
 414 0182 60E0      		ldi r22,lo8(gs(_read))
 415 0184 70E0      		ldi r23,hi8(gs(_read))
 416 0186 80E0      		ldi r24,lo8(gs(_write))
 417 0188 90E0      		ldi r25,hi8(gs(_write))
 418 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 419               		.loc 4 120 0
 420 018e 0000      		nop
 421               	/* epilogue start */
 422 0190 0F90      		pop __tmp_reg__
 423 0192 0F90      		pop __tmp_reg__
 424 0194 0F90      		pop __tmp_reg__
 425 0196 0F90      		pop __tmp_reg__
 426 0198 DF91      		pop r29
 427 019a CF91      		pop r28
 428 019c 0895      		ret
 429               		.cfi_endproc
 430               	.LFE107:
 433               	macsc_enable_manual_bts:
 434               	.LFB121:
 435               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 436               		.loc 5 444 0
 437               		.cfi_startproc
 438 019e CF93      		push r28
 439               	.LCFI26:
 440               		.cfi_def_cfa_offset 3
 441               		.cfi_offset 28, -2
 442 01a0 DF93      		push r29
 443               	.LCFI27:
 444               		.cfi_def_cfa_offset 4
 445               		.cfi_offset 29, -3
 446 01a2 CDB7      		in r28,__SP_L__
 447 01a4 DEB7      		in r29,__SP_H__
 448               	.LCFI28:
 449               		.cfi_def_cfa_register 28
 450               	/* prologue: function */
 451               	/* frame size = 0 */
 452               	/* stack size = 2 */
 453               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 454               		.loc 5 445 0
 455 01a6 8CED      		ldi r24,lo8(-36)
 456 01a8 90E0      		ldi r25,0
 457 01aa 2CED      		ldi r18,lo8(-36)
 458 01ac 30E0      		ldi r19,0
 459 01ae F901      		movw r30,r18
 460 01b0 2081      		ld r18,Z
 461 01b2 2064      		ori r18,lo8(64)
 462 01b4 FC01      		movw r30,r24
 463 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 464               		.loc 5 446 0
 465 01b8 8CED      		ldi r24,lo8(-36)
 466 01ba 90E0      		ldi r25,0
 467 01bc 2CED      		ldi r18,lo8(-36)
 468 01be 30E0      		ldi r19,0
 469 01c0 F901      		movw r30,r18
 470 01c2 2081      		ld r18,Z
 471 01c4 277F      		andi r18,lo8(-9)
 472 01c6 FC01      		movw r30,r24
 473 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 474               		.loc 5 447 0
 475 01ca 0000      		nop
 476               	/* epilogue start */
 477 01cc DF91      		pop r29
 478 01ce CF91      		pop r28
 479 01d0 0895      		ret
 480               		.cfi_endproc
 481               	.LFE121:
 483               	.global	appState
 484               		.section	.bss.appState,"aw",@nobits
 487               	appState:
 488 0000 00        		.zero	1
 489               		.section	.bss.msgReq,"aw",@nobits
 492               	msgReq:
 493 0000 0000 0000 		.zero	20
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 494               		.section	.bss.PanId,"aw",@nobits
 497               	PanId:
 498 0000 00        		.zero	1
 499               		.section	.rodata
 500               	.LC1:
 501 0000 0A4D 5347 		.string	"\nMSG REQ SENT %d"
 501      2052 4551 
 501      2053 454E 
 501      5420 2564 
 501      00
 502               		.text
 503               	.global	appSendData
 505               	appSendData:
 506               	.LFB130:
 507               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 508               		.loc 6 64 0
 509               		.cfi_startproc
 510 01d2 CF93      		push r28
 511               	.LCFI29:
 512               		.cfi_def_cfa_offset 3
 513               		.cfi_offset 28, -2
 514 01d4 DF93      		push r29
 515               	.LCFI30:
 516               		.cfi_def_cfa_offset 4
 517               		.cfi_offset 29, -3
 518 01d6 CDB7      		in r28,__SP_L__
 519 01d8 DEB7      		in r29,__SP_H__
 520               	.LCFI31:
 521               		.cfi_def_cfa_register 28
 522               	/* prologue: function */
 523               	/* frame size = 0 */
 524               	/* stack size = 2 */
 525               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 526               		.loc 6 65 0
 527 01da 8091 0000 		lds r24,msgReq+9
 528 01de 9091 0000 		lds r25,msgReq+9+1
 529 01e2 892B      		or r24,r25
 530 01e4 01F0      		breq .L17
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		printf("\nMSG REQ SENT %d",msgReq.options);
 531               		.loc 6 67 0
 532 01e6 8091 0000 		lds r24,msgReq+9
 533 01ea 9091 0000 		lds r25,msgReq+9+1
 534 01ee 292F      		mov r18,r25
 535 01f0 2F93      		push r18
 536 01f2 8F93      		push r24
 537 01f4 80E0      		ldi r24,lo8(.LC1)
 538 01f6 90E0      		ldi r25,hi8(.LC1)
 539 01f8 892F      		mov r24,r25
 540 01fa 8F93      		push r24
 541 01fc 80E0      		ldi r24,lo8(.LC1)
 542 01fe 90E0      		ldi r25,hi8(.LC1)
 543 0200 8F93      		push r24
 544 0202 0E94 0000 		call printf
 545 0206 0F90      		pop __tmp_reg__
 546 0208 0F90      		pop __tmp_reg__
 547 020a 0F90      		pop __tmp_reg__
 548 020c 0F90      		pop __tmp_reg__
  68:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 549               		.loc 6 68 0
 550 020e 80E0      		ldi r24,lo8(msgReq)
 551 0210 90E0      		ldi r25,hi8(msgReq)
 552 0212 0E94 0000 		call NWK_DataReq
 553               	.L17:
  69:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  70:ServerLLDN.c  **** 	#endif
  71:ServerLLDN.c  **** 	}
  72:ServerLLDN.c  **** }
 554               		.loc 6 72 0
 555 0216 0000      		nop
 556               	/* epilogue start */
 557 0218 DF91      		pop r29
 558 021a CF91      		pop r28
 559 021c 0895      		ret
 560               		.cfi_endproc
 561               	.LFE130:
 563               	.global	appPanState
 564               		.section	.data.appPanState,"aw",@progbits
 567               	appPanState:
 568 0000 01        		.byte	1
 569               		.comm	nodes_info_arr,3500,1
 570               	.global	config_request_frame
 571               		.section	.data.config_request_frame,"aw",@progbits
 574               	config_request_frame:
 575 0000 0F        		.byte	15
 576 0001 00        		.byte	0
 577 0002 0F        		.byte	15
 578 0003 0000      		.zero	2
 579 0005 80        		.byte	128
 580               	.global	conf_req_list
 581               		.section	.bss.conf_req_list,"aw",@nobits
 584               	conf_req_list:
 585 0000 0000      		.zero	2
 586               		.comm	ACKFrame,33,1
 587               	.global	ACKFrame_size
 588               		.section	.bss.ACKFrame_size,"aw",@nobits
 591               	ACKFrame_size:
 592 0000 0000      		.zero	2
 593               	.global	beaconInterval
 594               		.section	.bss.beaconInterval,"aw",@nobits
 597               	beaconInterval:
 598 0000 0000 0000 		.zero	4
 599               	.global	macLLDNnumUplinkTS
 600               		.section	.bss.macLLDNnumUplinkTS,"aw",@nobits
 603               	macLLDNnumUplinkTS:
 604 0000 0000      		.zero	2
 605               		.section	.bss.tmrDelay,"aw",@nobits
 608               	tmrDelay:
 609 0000 0000 0000 		.zero	13
 609      0000 0000 
 609      0000 0000 
 609      00
 610               	.global	assTimeSlot
 611               		.section	.bss.assTimeSlot,"aw",@nobits
 614               	assTimeSlot:
 615 0000 0000      		.zero	2
 616               	.global	timeslot_counter
 617               		.section	.bss.timeslot_counter,"aw",@nobits
 620               	timeslot_counter:
 621 0000 00        		.zero	1
 622               	.global	counter_associados
 623               		.section	.bss.counter_associados,"aw",@nobits
 626               	counter_associados:
 627 0000 0000      		.zero	2
 628               	.global	cycles_counter
 629               		.section	.data.cycles_counter,"aw",@progbits
 632               	cycles_counter:
 633 0000 01        		.byte	1
 634               		.comm	msg_info_array,6550,1
 635               	.global	size_msg_info
 636               		.section	.bss.size_msg_info,"aw",@nobits
 639               	size_msg_info:
 640 0000 0000      		.zero	2
 641               	.global	data_received
 642               		.section	.bss.data_received,"aw",@nobits
 645               	data_received:
 646 0000 00        		.zero	1
 647               	.global	succes_rate
 648               		.section	.bss.succes_rate,"aw",@nobits
 651               	succes_rate:
 652 0000 0000 0000 		.zero	4
 653               		.text
 655               	tmrDelayHandler:
 656               	.LFB131:
  73:ServerLLDN.c  **** 
  74:ServerLLDN.c  **** #if APP_COORDINATOR
  75:ServerLLDN.c  **** 
  76:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  77:ServerLLDN.c  **** 	
  78:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  79:ServerLLDN.c  **** 	
  80:ServerLLDN.c  **** 	/* Configuration Request Frames */
  81:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  82:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  83:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  84:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  85:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  86:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  87:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  88:ServerLLDN.c  **** 
  89:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  90:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	// ACK Frame Payload used in Discovery State
  91:ServerLLDN.c  **** 	int ACKFrame_size = 0;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
  94:ServerLLDN.c  **** 	
  95:ServerLLDN.c  **** 	int macLLDNnumUplinkTS = 0;		// Number of uplink timeslots, is also the control of associated node
  96:ServerLLDN.c  **** 	
  97:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
  98:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
  99:ServerLLDN.c  **** 	 */
 100:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 101:ServerLLDN.c  **** 	
 102:ServerLLDN.c  **** 	/*  Control variables for testing */	
 103:ServerLLDN.c  **** 	int assTimeSlot = 0;
 104:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 105:ServerLLDN.c  **** 
 106:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 107:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 108:ServerLLDN.c  **** 
 109:ServerLLDN.c  **** 	/* data related variables */
 110:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 111:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 112:ServerLLDN.c  **** 	bool data_received = false;
 113:ServerLLDN.c  **** 	float succes_rate = 0;
 114:ServerLLDN.c  **** 	
 115:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 116:ServerLLDN.c  **** 	{
 657               		.loc 6 116 0
 658               		.cfi_startproc
 659 021e CF93      		push r28
 660               	.LCFI32:
 661               		.cfi_def_cfa_offset 3
 662               		.cfi_offset 28, -2
 663 0220 DF93      		push r29
 664               	.LCFI33:
 665               		.cfi_def_cfa_offset 4
 666               		.cfi_offset 29, -3
 667 0222 00D0      		rcall .
 668               	.LCFI34:
 669               		.cfi_def_cfa_offset 6
 670 0224 CDB7      		in r28,__SP_L__
 671 0226 DEB7      		in r29,__SP_H__
 672               	.LCFI35:
 673               		.cfi_def_cfa_register 28
 674               	/* prologue: function */
 675               	/* frame size = 2 */
 676               	/* stack size = 4 */
 677               	.L__stack_usage = 4
 678 0228 9A83      		std Y+2,r25
 679 022a 8983      		std Y+1,r24
 117:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 680               		.loc 6 117 0
 681 022c 82E0      		ldi r24,lo8(2)
 682 022e 8093 0000 		sts appState,r24
 118:ServerLLDN.c  **** 	}
 683               		.loc 6 118 0
 684 0232 0000      		nop
 685               	/* epilogue start */
 686 0234 0F90      		pop __tmp_reg__
 687 0236 0F90      		pop __tmp_reg__
 688 0238 DF91      		pop r29
 689 023a CF91      		pop r28
 690 023c 0895      		ret
 691               		.cfi_endproc
 692               	.LFE131:
 695               	lldn_server_beacon:
 696               	.LFB132:
 119:ServerLLDN.c  **** 	
 120:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 121:ServerLLDN.c  **** 	{
 697               		.loc 6 121 0
 698               		.cfi_startproc
 699 023e CF93      		push r28
 700               	.LCFI36:
 701               		.cfi_def_cfa_offset 3
 702               		.cfi_offset 28, -2
 703 0240 DF93      		push r29
 704               	.LCFI37:
 705               		.cfi_def_cfa_offset 4
 706               		.cfi_offset 29, -3
 707 0242 CDB7      		in r28,__SP_L__
 708 0244 DEB7      		in r29,__SP_H__
 709               	.LCFI38:
 710               		.cfi_def_cfa_register 28
 711               	/* prologue: function */
 712               	/* frame size = 0 */
 713               	/* stack size = 2 */
 714               	.L__stack_usage = 2
 122:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 715               		.loc 6 122 0
 716 0246 0E94 0000 		call macsc_enable_manual_bts
 123:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 717               		.loc 6 123 0
 718 024a 82E0      		ldi r24,lo8(2)
 719 024c 8093 0000 		sts appState,r24
 124:ServerLLDN.c  **** 	}
 720               		.loc 6 124 0
 721 0250 0000      		nop
 722               	/* epilogue start */
 723 0252 DF91      		pop r29
 724 0254 CF91      		pop r28
 725 0256 0895      		ret
 726               		.cfi_endproc
 727               	.LFE132:
 729               	.global	__divsf3
 730               	.global	__fixunssfsi
 732               	time_slot_handler:
 733               	.LFB133:
 125:ServerLLDN.c  **** 	
 126:ServerLLDN.c  **** 	static void time_slot_handler(void)
 127:ServerLLDN.c  **** 	{
 734               		.loc 6 127 0
 735               		.cfi_startproc
 736 0258 CF93      		push r28
 737               	.LCFI39:
 738               		.cfi_def_cfa_offset 3
 739               		.cfi_offset 28, -2
 740 025a DF93      		push r29
 741               	.LCFI40:
 742               		.cfi_def_cfa_offset 4
 743               		.cfi_offset 29, -3
 744 025c CDB7      		in r28,__SP_L__
 745 025e DEB7      		in r29,__SP_H__
 746               	.LCFI41:
 747               		.cfi_def_cfa_register 28
 748               	/* prologue: function */
 749               	/* frame size = 0 */
 750               	/* stack size = 2 */
 751               	.L__stack_usage = 2
 128:ServerLLDN.c  **** 		if (timeslot_counter > 0)
 752               		.loc 6 128 0
 753 0260 8091 0000 		lds r24,timeslot_counter
 754 0264 8823      		tst r24
 755 0266 01F0      		breq .L21
 129:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 756               		.loc 6 129 0
 757 0268 8091 0000 		lds r24,tTS
 758 026c 9091 0000 		lds r25,tTS+1
 759 0270 A091 0000 		lds r26,tTS+2
 760 0274 B091 0000 		lds r27,tTS+3
 761 0278 2DEB      		ldi r18,lo8(-67)
 762 027a 37E3      		ldi r19,lo8(55)
 763 027c 46E8      		ldi r20,lo8(-122)
 764 027e 57E3      		ldi r21,lo8(55)
 765 0280 BC01      		movw r22,r24
 766 0282 CD01      		movw r24,r26
 767 0284 0E94 0000 		call __divsf3
 768 0288 DC01      		movw r26,r24
 769 028a CB01      		movw r24,r22
 770 028c BC01      		movw r22,r24
 771 028e CD01      		movw r24,r26
 772 0290 0E94 0000 		call __fixunssfsi
 773 0294 DC01      		movw r26,r24
 774 0296 CB01      		movw r24,r22
 775 0298 21E0      		ldi r18,lo8(1)
 776 029a AC01      		movw r20,r24
 777 029c BD01      		movw r22,r26
 778 029e 81E0      		ldi r24,lo8(1)
 779 02a0 0E94 0000 		call macsc_use_cmp
 780               	.L21:
 130:ServerLLDN.c  **** 		
 131:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 781               		.loc 6 131 0
 782 02a4 0E94 0000 		call macsc_enable_manual_bts
 132:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 783               		.loc 6 132 0
 784 02a8 83E0      		ldi r24,lo8(3)
 785 02aa 8093 0000 		sts appState,r24
 133:ServerLLDN.c  **** 	}
 786               		.loc 6 133 0
 787 02ae 0000      		nop
 788               	/* epilogue start */
 789 02b0 DF91      		pop r29
 790 02b2 CF91      		pop r28
 791 02b4 0895      		ret
 792               		.cfi_endproc
 793               	.LFE133:
 796               	downlink_delay_handler:
 797               	.LFB134:
 134:ServerLLDN.c  **** 	
 135:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 136:ServerLLDN.c  **** 	{
 798               		.loc 6 136 0
 799               		.cfi_startproc
 800 02b6 CF93      		push r28
 801               	.LCFI42:
 802               		.cfi_def_cfa_offset 3
 803               		.cfi_offset 28, -2
 804 02b8 DF93      		push r29
 805               	.LCFI43:
 806               		.cfi_def_cfa_offset 4
 807               		.cfi_offset 29, -3
 808 02ba CDB7      		in r28,__SP_L__
 809 02bc DEB7      		in r29,__SP_H__
 810               	.LCFI44:
 811               		.cfi_def_cfa_register 28
 812               	/* prologue: function */
 813               	/* frame size = 0 */
 814               	/* stack size = 2 */
 815               	.L__stack_usage = 2
 137:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_LLDN_ACK)
 816               		.loc 6 137 0
 817 02be 8091 0000 		lds r24,msgReq+9
 818 02c2 9091 0000 		lds r25,msgReq+9+1
 819 02c6 8115      		cp r24,__zero_reg__
 820 02c8 9044      		sbci r25,64
 821 02ca 01F4      		brne .L24
 138:ServerLLDN.c  **** 		{
 139:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 822               		.loc 6 139 0
 823 02cc 82E0      		ldi r24,lo8(2)
 824 02ce 8093 0000 		sts appState,r24
 825               	.L24:
 140:ServerLLDN.c  **** 		}
 141:ServerLLDN.c  **** 	}
 826               		.loc 6 141 0
 827 02d2 0000      		nop
 828               	/* epilogue start */
 829 02d4 DF91      		pop r29
 830 02d6 CF91      		pop r28
 831 02d8 0895      		ret
 832               		.cfi_endproc
 833               	.LFE134:
 836               	end_of_online_handler:
 837               	.LFB135:
 142:ServerLLDN.c  **** 
 143:ServerLLDN.c  **** 	static void end_of_online_handler(void)
 144:ServerLLDN.c  **** 	{
 838               		.loc 6 144 0
 839               		.cfi_startproc
 840 02da CF93      		push r28
 841               	.LCFI45:
 842               		.cfi_def_cfa_offset 3
 843               		.cfi_offset 28, -2
 844 02dc DF93      		push r29
 845               	.LCFI46:
 846               		.cfi_def_cfa_offset 4
 847               		.cfi_offset 29, -3
 848 02de CDB7      		in r28,__SP_L__
 849 02e0 DEB7      		in r29,__SP_H__
 850               	.LCFI47:
 851               		.cfi_def_cfa_register 28
 852               	/* prologue: function */
 853               	/* frame size = 0 */
 854               	/* stack size = 2 */
 855               	.L__stack_usage = 2
 145:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 856               		.loc 6 145 0
 857 02e2 83E0      		ldi r24,lo8(3)
 858 02e4 8093 0000 		sts appState,r24
 146:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_END_BE;
 859               		.loc 6 146 0
 860 02e8 8AE0      		ldi r24,lo8(10)
 861 02ea 8093 0000 		sts appPanState,r24
 147:ServerLLDN.c  **** 	}
 862               		.loc 6 147 0
 863 02ee 0000      		nop
 864               	/* epilogue start */
 865 02f0 DF91      		pop r29
 866 02f2 CF91      		pop r28
 867 02f4 0895      		ret
 868               		.cfi_endproc
 869               	.LFE135:
 871               		.section	.rodata
 872               	.LC2:
 873 0011 0A41 6464 		.string	"\nAddr rep %d"
 873      7220 7265 
 873      7020 2564 
 873      00
 874               		.text
 876               	addToAckArray:
 877               	.LFB136:
 148:ServerLLDN.c  **** 	
 149:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 150:ServerLLDN.c  **** 	static void teste_handler(void)
 151:ServerLLDN.c  **** 	{
 152:ServerLLDN.c  **** 		if(msgReq.options)
 153:ServerLLDN.c  **** 			printf("\n***TIMESLOT****");
 154:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 155:ServerLLDN.c  **** 	}
 156:ServerLLDN.c  **** 	#endif
 157:ServerLLDN.c  **** 	
 158:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 159:ServerLLDN.c  **** 	{	
 878               		.loc 6 159 0
 879               		.cfi_startproc
 880 02f6 CF93      		push r28
 881               	.LCFI48:
 882               		.cfi_def_cfa_offset 3
 883               		.cfi_offset 28, -2
 884 02f8 DF93      		push r29
 885               	.LCFI49:
 886               		.cfi_def_cfa_offset 4
 887               		.cfi_offset 29, -3
 888 02fa 00D0      		rcall .
 889 02fc 00D0      		rcall .
 890 02fe 1F92      		push __zero_reg__
 891               	.LCFI50:
 892               		.cfi_def_cfa_offset 9
 893 0300 CDB7      		in r28,__SP_L__
 894 0302 DEB7      		in r29,__SP_H__
 895               	.LCFI51:
 896               		.cfi_def_cfa_register 28
 897               	/* prologue: function */
 898               	/* frame size = 5 */
 899               	/* stack size = 7 */
 900               	.L__stack_usage = 7
 901 0304 8D83      		std Y+5,r24
 160:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 902               		.loc 6 160 0
 903 0306 8D81      		ldd r24,Y+5
 904 0308 8695      		lsr r24
 905 030a 8695      		lsr r24
 906 030c 8695      		lsr r24
 907 030e 882F      		mov r24,r24
 908 0310 90E0      		ldi r25,0
 909 0312 9A83      		std Y+2,r25
 910 0314 8983      		std Y+1,r24
 161:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 911               		.loc 6 161 0
 912 0316 8D81      		ldd r24,Y+5
 913 0318 882F      		mov r24,r24
 914 031a 90E0      		ldi r25,0
 915 031c 8770      		andi r24,7
 916 031e 9927      		clr r25
 917 0320 28E0      		ldi r18,lo8(8)
 918 0322 30E0      		ldi r19,0
 919 0324 A901      		movw r20,r18
 920 0326 481B      		sub r20,r24
 921 0328 590B      		sbc r21,r25
 922 032a CA01      		movw r24,r20
 923 032c 9C83      		std Y+4,r25
 924 032e 8B83      		std Y+3,r24
 162:ServerLLDN.c  **** 		
 163:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 925               		.loc 6 163 0
 926 0330 8981      		ldd r24,Y+1
 927 0332 9A81      		ldd r25,Y+2
 928 0334 8050      		subi r24,lo8(-(ACKFrame+1))
 929 0336 9040      		sbci r25,hi8(-(ACKFrame+1))
 930 0338 FC01      		movw r30,r24
 931 033a 8081      		ld r24,Z
 932 033c 882F      		mov r24,r24
 933 033e 90E0      		ldi r25,0
 934 0340 0B80      		ldd r0,Y+3
 935 0342 00C0      		rjmp 2f
 936               		1:
 937 0344 9595      		asr r25
 938 0346 8795      		ror r24
 939               		2:
 940 0348 0A94      		dec r0
 941 034a 02F4      		brpl 1b
 942 034c 8170      		andi r24,1
 943 034e 9927      		clr r25
 944 0350 892B      		or r24,r25
 945 0352 01F0      		breq .L27
 164:ServerLLDN.c  **** 		{
 165:ServerLLDN.c  **** 			printf("\nAddr rep %d", addres);
 946               		.loc 6 165 0
 947 0354 8D81      		ldd r24,Y+5
 948 0356 882F      		mov r24,r24
 949 0358 90E0      		ldi r25,0
 950 035a 292F      		mov r18,r25
 951 035c 2F93      		push r18
 952 035e 8F93      		push r24
 953 0360 80E0      		ldi r24,lo8(.LC2)
 954 0362 90E0      		ldi r25,hi8(.LC2)
 955 0364 892F      		mov r24,r25
 956 0366 8F93      		push r24
 957 0368 80E0      		ldi r24,lo8(.LC2)
 958 036a 90E0      		ldi r25,hi8(.LC2)
 959 036c 8F93      		push r24
 960 036e 0E94 0000 		call printf
 961 0372 0F90      		pop __tmp_reg__
 962 0374 0F90      		pop __tmp_reg__
 963 0376 0F90      		pop __tmp_reg__
 964 0378 0F90      		pop __tmp_reg__
 166:ServerLLDN.c  **** 			return false;
 965               		.loc 6 166 0
 966 037a 80E0      		ldi r24,0
 967 037c 00C0      		rjmp .L28
 968               	.L27:
 167:ServerLLDN.c  **** 		}
 168:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] = 1 << bit_shift;
 969               		.loc 6 168 0
 970 037e 81E0      		ldi r24,lo8(1)
 971 0380 90E0      		ldi r25,0
 972 0382 0B80      		ldd r0,Y+3
 973 0384 00C0      		rjmp 2f
 974               		1:
 975 0386 880F      		lsl r24
 976 0388 991F      		rol r25
 977               		2:
 978 038a 0A94      		dec r0
 979 038c 02F4      		brpl 1b
 980 038e 282F      		mov r18,r24
 981 0390 8981      		ldd r24,Y+1
 982 0392 9A81      		ldd r25,Y+2
 983 0394 8050      		subi r24,lo8(-(ACKFrame+1))
 984 0396 9040      		sbci r25,hi8(-(ACKFrame+1))
 985 0398 FC01      		movw r30,r24
 986 039a 2083      		st Z,r18
 169:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 987               		.loc 6 169 0
 988 039c 8981      		ldd r24,Y+1
 989 039e 9A81      		ldd r25,Y+2
 990 03a0 9C01      		movw r18,r24
 991 03a2 2F5F      		subi r18,-1
 992 03a4 3F4F      		sbci r19,-1
 993 03a6 8091 0000 		lds r24,ACKFrame_size
 994 03aa 9091 0000 		lds r25,ACKFrame_size+1
 995 03ae 8217      		cp r24,r18
 996 03b0 9307      		cpc r25,r19
 997 03b2 04F4      		brge .L29
 170:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 998               		.loc 6 170 0
 999 03b4 8981      		ldd r24,Y+1
 1000 03b6 9A81      		ldd r25,Y+2
 1001 03b8 0196      		adiw r24,1
 1002 03ba 9093 0000 		sts ACKFrame_size+1,r25
 1003 03be 8093 0000 		sts ACKFrame_size,r24
 1004               	.L29:
 171:ServerLLDN.c  **** 		
 172:ServerLLDN.c  **** 		return true;
 1005               		.loc 6 172 0
 1006 03c2 81E0      		ldi r24,lo8(1)
 1007               	.L28:
 1008               	/* epilogue start */
 173:ServerLLDN.c  **** 	}
 1009               		.loc 6 173 0
 1010 03c4 0F90      		pop __tmp_reg__
 1011 03c6 0F90      		pop __tmp_reg__
 1012 03c8 0F90      		pop __tmp_reg__
 1013 03ca 0F90      		pop __tmp_reg__
 1014 03cc 0F90      		pop __tmp_reg__
 1015 03ce DF91      		pop r29
 1016 03d0 CF91      		pop r28
 1017 03d2 0895      		ret
 1018               		.cfi_endproc
 1019               	.LFE136:
 1022               	addConfRequestArray:
 1023               	.LFB137:
 174:ServerLLDN.c  **** 
 175:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 176:ServerLLDN.c  **** 	{
 1024               		.loc 6 176 0
 1025               		.cfi_startproc
 1026 03d4 CF93      		push r28
 1027               	.LCFI52:
 1028               		.cfi_def_cfa_offset 3
 1029               		.cfi_offset 28, -2
 1030 03d6 DF93      		push r29
 1031               	.LCFI53:
 1032               		.cfi_def_cfa_offset 4
 1033               		.cfi_offset 29, -3
 1034 03d8 00D0      		rcall .
 1035 03da 00D0      		rcall .
 1036 03dc 1F92      		push __zero_reg__
 1037               	.LCFI54:
 1038               		.cfi_def_cfa_offset 9
 1039 03de CDB7      		in r28,__SP_L__
 1040 03e0 DEB7      		in r29,__SP_H__
 1041               	.LCFI55:
 1042               		.cfi_def_cfa_register 28
 1043               	/* prologue: function */
 1044               	/* frame size = 5 */
 1045               	/* stack size = 7 */
 1046               	.L__stack_usage = 7
 1047 03e2 9D83      		std Y+5,r25
 1048 03e4 8C83      		std Y+4,r24
 177:ServerLLDN.c  **** 
 178:ServerLLDN.c  **** 		uint8_t i;
 179:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1049               		.loc 6 179 0
 1050 03e6 1982      		std Y+1,__zero_reg__
 1051 03e8 00C0      		rjmp .L31
 1052               	.L32:
 1053               		.loc 6 179 0 is_stmt 0 discriminator 3
 1054 03ea 8981      		ldd r24,Y+1
 1055 03ec 8F5F      		subi r24,lo8(-(1))
 1056 03ee 8983      		std Y+1,r24
 1057               	.L31:
 1058               		.loc 6 179 0 discriminator 1
 1059 03f0 8981      		ldd r24,Y+1
 1060 03f2 282F      		mov r18,r24
 1061 03f4 30E0      		ldi r19,0
 1062 03f6 46E4      		ldi r20,lo8(70)
 1063 03f8 429F      		mul r20,r18
 1064 03fa C001      		movw r24,r0
 1065 03fc 439F      		mul r20,r19
 1066 03fe 900D      		add r25,r0
 1067 0400 1124      		clr __zero_reg__
 1068 0402 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1069 0404 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1070 0406 FC01      		movw r30,r24
 1071 0408 8081      		ld r24,Z
 1072 040a 9181      		ldd r25,Z+1
 1073 040c 892B      		or r24,r25
 1074 040e 01F4      		brne .L32
 180:ServerLLDN.c  **** 		
 181:ServerLLDN.c  **** 		assTimeSlot++;
 1075               		.loc 6 181 0 is_stmt 1
 1076 0410 8091 0000 		lds r24,assTimeSlot
 1077 0414 9091 0000 		lds r25,assTimeSlot+1
 1078 0418 0196      		adiw r24,1
 1079 041a 9093 0000 		sts assTimeSlot+1,r25
 1080 041e 8093 0000 		sts assTimeSlot,r24
 182:ServerLLDN.c  **** 	
 183:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1081               		.loc 6 183 0
 1082 0422 8C81      		ldd r24,Y+4
 1083 0424 9D81      		ldd r25,Y+5
 1084 0426 FC01      		movw r30,r24
 1085 0428 8481      		ldd r24,Z+4
 1086 042a 8F77      		andi r24,lo8(127)
 1087 042c 282F      		mov r18,r24
 1088 042e 30E0      		ldi r19,0
 1089 0430 8091 0000 		lds r24,config_request_frame+5
 1090 0434 8F77      		andi r24,lo8(127)
 1091 0436 882F      		mov r24,r24
 1092 0438 90E0      		ldi r25,0
 1093 043a 8217      		cp r24,r18
 1094 043c 9307      		cpc r25,r19
 1095 043e 04F4      		brge .L33
 184:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1096               		.loc 6 184 0
 1097 0440 8C81      		ldd r24,Y+4
 1098 0442 9D81      		ldd r25,Y+5
 1099 0444 FC01      		movw r30,r24
 1100 0446 8481      		ldd r24,Z+4
 1101 0448 8F77      		andi r24,lo8(127)
 1102 044a 8F77      		andi r24,lo8(127)
 1103 044c 9091 0000 		lds r25,config_request_frame+5
 1104 0450 9078      		andi r25,lo8(-128)
 1105 0452 892B      		or r24,r25
 1106 0454 8093 0000 		sts config_request_frame+5,r24
 1107               	.L33:
 185:ServerLLDN.c  **** 		
 186:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1108               		.loc 6 186 0
 1109 0458 8981      		ldd r24,Y+1
 1110 045a 282F      		mov r18,r24
 1111 045c 30E0      		ldi r19,0
 1112 045e 8C81      		ldd r24,Y+4
 1113 0460 9D81      		ldd r25,Y+5
 1114 0462 FC01      		movw r30,r24
 1115 0464 8481      		ldd r24,Z+4
 1116 0466 8F77      		andi r24,lo8(127)
 1117 0468 582F      		mov r21,r24
 1118 046a 46E4      		ldi r20,lo8(70)
 1119 046c 429F      		mul r20,r18
 1120 046e C001      		movw r24,r0
 1121 0470 439F      		mul r20,r19
 1122 0472 900D      		add r25,r0
 1123 0474 1124      		clr __zero_reg__
 1124 0476 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1125 0478 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1126 047a FC01      		movw r30,r24
 1127 047c 5083      		st Z,r21
 187:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1128               		.loc 6 187 0
 1129 047e 8981      		ldd r24,Y+1
 1130 0480 482F      		mov r20,r24
 1131 0482 50E0      		ldi r21,0
 1132 0484 8C81      		ldd r24,Y+4
 1133 0486 9D81      		ldd r25,Y+5
 1134 0488 FC01      		movw r30,r24
 1135 048a 8381      		ldd r24,Z+3
 1136 048c 282F      		mov r18,r24
 1137 048e 30E0      		ldi r19,0
 1138 0490 66E4      		ldi r22,lo8(70)
 1139 0492 649F      		mul r22,r20
 1140 0494 C001      		movw r24,r0
 1141 0496 659F      		mul r22,r21
 1142 0498 900D      		add r25,r0
 1143 049a 1124      		clr __zero_reg__
 1144 049c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1145 049e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1146 04a0 FC01      		movw r30,r24
 1147 04a2 3183      		std Z+1,r19
 1148 04a4 2083      		st Z,r18
 188:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1149               		.loc 6 188 0
 1150 04a6 8981      		ldd r24,Y+1
 1151 04a8 282F      		mov r18,r24
 1152 04aa 30E0      		ldi r19,0
 1153 04ac 46E4      		ldi r20,lo8(70)
 1154 04ae 429F      		mul r20,r18
 1155 04b0 C001      		movw r24,r0
 1156 04b2 439F      		mul r20,r19
 1157 04b4 900D      		add r25,r0
 1158 04b6 1124      		clr __zero_reg__
 1159 04b8 8050      		subi r24,lo8(-(nodes_info_arr))
 1160 04ba 9040      		sbci r25,hi8(-(nodes_info_arr))
 1161 04bc 2981      		ldd r18,Y+1
 1162 04be FC01      		movw r30,r24
 1163 04c0 2083      		st Z,r18
 189:ServerLLDN.c  **** 		
 190:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1164               		.loc 6 190 0
 1165 04c2 8091 0000 		lds r24,conf_req_list
 1166 04c6 9091 0000 		lds r25,conf_req_list+1
 1167 04ca 892B      		or r24,r25
 1168 04cc 01F0      		breq .L34
 1169               	.LBB2:
 191:ServerLLDN.c  **** 		{
 192:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1170               		.loc 6 192 0
 1171 04ce 84E0      		ldi r24,lo8(4)
 1172 04d0 90E0      		ldi r25,0
 1173 04d2 0E94 0000 		call malloc
 1174 04d6 9B83      		std Y+3,r25
 1175 04d8 8A83      		std Y+2,r24
 193:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1176               		.loc 6 193 0
 1177 04da 8981      		ldd r24,Y+1
 1178 04dc 282F      		mov r18,r24
 1179 04de 30E0      		ldi r19,0
 1180 04e0 46E4      		ldi r20,lo8(70)
 1181 04e2 429F      		mul r20,r18
 1182 04e4 C001      		movw r24,r0
 1183 04e6 439F      		mul r20,r19
 1184 04e8 900D      		add r25,r0
 1185 04ea 1124      		clr __zero_reg__
 1186 04ec 9C01      		movw r18,r24
 1187 04ee 2050      		subi r18,lo8(-(nodes_info_arr))
 1188 04f0 3040      		sbci r19,hi8(-(nodes_info_arr))
 1189 04f2 8A81      		ldd r24,Y+2
 1190 04f4 9B81      		ldd r25,Y+3
 1191 04f6 FC01      		movw r30,r24
 1192 04f8 3183      		std Z+1,r19
 1193 04fa 2083      		st Z,r18
 194:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1194               		.loc 6 194 0
 1195 04fc 2091 0000 		lds r18,conf_req_list
 1196 0500 3091 0000 		lds r19,conf_req_list+1
 1197 0504 8A81      		ldd r24,Y+2
 1198 0506 9B81      		ldd r25,Y+3
 1199 0508 FC01      		movw r30,r24
 1200 050a 3383      		std Z+3,r19
 1201 050c 2283      		std Z+2,r18
 195:ServerLLDN.c  **** 			conf_req_list = tmp;
 1202               		.loc 6 195 0
 1203 050e 8A81      		ldd r24,Y+2
 1204 0510 9B81      		ldd r25,Y+3
 1205 0512 9093 0000 		sts conf_req_list+1,r25
 1206 0516 8093 0000 		sts conf_req_list,r24
 1207               	.LBE2:
 196:ServerLLDN.c  **** 		}
 197:ServerLLDN.c  **** 		else
 198:ServerLLDN.c  **** 		{
 199:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 200:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 201:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 202:ServerLLDN.c  **** 		}
 203:ServerLLDN.c  **** 	}
 1208               		.loc 6 203 0
 1209 051a 00C0      		rjmp .L36
 1210               	.L34:
 199:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1211               		.loc 6 199 0
 1212 051c 84E0      		ldi r24,lo8(4)
 1213 051e 90E0      		ldi r25,0
 1214 0520 0E94 0000 		call malloc
 1215 0524 9093 0000 		sts conf_req_list+1,r25
 1216 0528 8093 0000 		sts conf_req_list,r24
 200:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1217               		.loc 6 200 0
 1218 052c 8091 0000 		lds r24,conf_req_list
 1219 0530 9091 0000 		lds r25,conf_req_list+1
 1220 0534 2981      		ldd r18,Y+1
 1221 0536 422F      		mov r20,r18
 1222 0538 50E0      		ldi r21,0
 1223 053a 66E4      		ldi r22,lo8(70)
 1224 053c 649F      		mul r22,r20
 1225 053e 9001      		movw r18,r0
 1226 0540 659F      		mul r22,r21
 1227 0542 300D      		add r19,r0
 1228 0544 1124      		clr __zero_reg__
 1229 0546 2050      		subi r18,lo8(-(nodes_info_arr))
 1230 0548 3040      		sbci r19,hi8(-(nodes_info_arr))
 1231 054a FC01      		movw r30,r24
 1232 054c 3183      		std Z+1,r19
 1233 054e 2083      		st Z,r18
 201:ServerLLDN.c  **** 		}
 1234               		.loc 6 201 0
 1235 0550 8091 0000 		lds r24,conf_req_list
 1236 0554 9091 0000 		lds r25,conf_req_list+1
 1237 0558 FC01      		movw r30,r24
 1238 055a 1382      		std Z+3,__zero_reg__
 1239 055c 1282      		std Z+2,__zero_reg__
 1240               	.L36:
 1241               		.loc 6 203 0
 1242 055e 0000      		nop
 1243               	/* epilogue start */
 1244 0560 0F90      		pop __tmp_reg__
 1245 0562 0F90      		pop __tmp_reg__
 1246 0564 0F90      		pop __tmp_reg__
 1247 0566 0F90      		pop __tmp_reg__
 1248 0568 0F90      		pop __tmp_reg__
 1249 056a DF91      		pop r29
 1250 056c CF91      		pop r28
 1251 056e 0895      		ret
 1252               		.cfi_endproc
 1253               	.LFE137:
 1256               	CopyToConfigRequest:
 1257               	.LFB138:
 204:ServerLLDN.c  **** 
 205:ServerLLDN.c  **** 	static void CopyToConfigRequest()
 206:ServerLLDN.c  **** 	{
 1258               		.loc 6 206 0
 1259               		.cfi_startproc
 1260 0570 CF93      		push r28
 1261               	.LCFI56:
 1262               		.cfi_def_cfa_offset 3
 1263               		.cfi_offset 28, -2
 1264 0572 DF93      		push r29
 1265               	.LCFI57:
 1266               		.cfi_def_cfa_offset 4
 1267               		.cfi_offset 29, -3
 1268 0574 00D0      		rcall .
 1269               	.LCFI58:
 1270               		.cfi_def_cfa_offset 6
 1271 0576 CDB7      		in r28,__SP_L__
 1272 0578 DEB7      		in r29,__SP_H__
 1273               	.LCFI59:
 1274               		.cfi_def_cfa_register 28
 1275               	/* prologue: function */
 1276               	/* frame size = 2 */
 1277               	/* stack size = 4 */
 1278               	.L__stack_usage = 4
 207:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1279               		.loc 6 207 0
 1280 057a 8091 0000 		lds r24,conf_req_list
 1281 057e 9091 0000 		lds r25,conf_req_list+1
 1282 0582 FC01      		movw r30,r24
 1283 0584 8081      		ld r24,Z
 1284 0586 9181      		ldd r25,Z+1
 1285 0588 FC01      		movw r30,r24
 1286 058a 8081      		ld r24,Z
 1287 058c 8093 0000 		sts config_request_frame+3,r24
 208:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1288               		.loc 6 208 0
 1289 0590 8091 0000 		lds r24,conf_req_list
 1290 0594 9091 0000 		lds r25,conf_req_list+1
 1291 0598 FC01      		movw r30,r24
 1292 059a 8081      		ld r24,Z
 1293 059c 9181      		ldd r25,Z+1
 1294 059e FC01      		movw r30,r24
 1295 05a0 8181      		ldd r24,Z+1
 1296 05a2 9281      		ldd r25,Z+2
 1297 05a4 8093 0000 		sts config_request_frame+4,r24
 209:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1298               		.loc 6 209 0
 1299 05a8 8091 0000 		lds r24,conf_req_list
 1300 05ac 9091 0000 		lds r25,conf_req_list+1
 1301 05b0 9A83      		std Y+2,r25
 1302 05b2 8983      		std Y+1,r24
 210:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1303               		.loc 6 210 0
 1304 05b4 8091 0000 		lds r24,conf_req_list
 1305 05b8 9091 0000 		lds r25,conf_req_list+1
 1306 05bc FC01      		movw r30,r24
 1307 05be 8281      		ldd r24,Z+2
 1308 05c0 9381      		ldd r25,Z+3
 1309 05c2 9093 0000 		sts conf_req_list+1,r25
 1310 05c6 8093 0000 		sts conf_req_list,r24
 211:ServerLLDN.c  **** 		tmp->node = NULL;
 1311               		.loc 6 211 0
 1312 05ca 8981      		ldd r24,Y+1
 1313 05cc 9A81      		ldd r25,Y+2
 1314 05ce FC01      		movw r30,r24
 1315 05d0 1182      		std Z+1,__zero_reg__
 1316 05d2 1082      		st Z,__zero_reg__
 212:ServerLLDN.c  **** 		tmp->next = NULL;
 1317               		.loc 6 212 0
 1318 05d4 8981      		ldd r24,Y+1
 1319 05d6 9A81      		ldd r25,Y+2
 1320 05d8 FC01      		movw r30,r24
 1321 05da 1382      		std Z+3,__zero_reg__
 1322 05dc 1282      		std Z+2,__zero_reg__
 213:ServerLLDN.c  **** 		free(tmp);
 1323               		.loc 6 213 0
 1324 05de 8981      		ldd r24,Y+1
 1325 05e0 9A81      		ldd r25,Y+2
 1326 05e2 0E94 0000 		call free
 214:ServerLLDN.c  **** 	}
 1327               		.loc 6 214 0
 1328 05e6 0000      		nop
 1329               	/* epilogue start */
 1330 05e8 0F90      		pop __tmp_reg__
 1331 05ea 0F90      		pop __tmp_reg__
 1332 05ec DF91      		pop r29
 1333 05ee CF91      		pop r28
 1334 05f0 0895      		ret
 1335               		.cfi_endproc
 1336               	.LFE138:
 1338               		.section	.rodata
 1339               	.LC3:
 1340 001e 0A44 4953 		.string	"\nDISC %hhx"
 1340      4320 2568 
 1340      6878 00
 1341               	.LC4:
 1342 0029 0A43 4F4E 		.string	"\nCONF %d"
 1342      4620 2564 
 1342      00
 1343               		.text
 1345               	appCommandInd:
 1346               	.LFB139:
 215:ServerLLDN.c  **** 
 216:ServerLLDN.c  **** 
 217:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 218:ServerLLDN.c  **** 	{
 1347               		.loc 6 218 0
 1348               		.cfi_startproc
 1349 05f2 CF93      		push r28
 1350               	.LCFI60:
 1351               		.cfi_def_cfa_offset 3
 1352               		.cfi_offset 28, -2
 1353 05f4 DF93      		push r29
 1354               	.LCFI61:
 1355               		.cfi_def_cfa_offset 4
 1356               		.cfi_offset 29, -3
 1357 05f6 00D0      		rcall .
 1358 05f8 00D0      		rcall .
 1359 05fa 00D0      		rcall .
 1360               	.LCFI62:
 1361               		.cfi_def_cfa_offset 10
 1362 05fc CDB7      		in r28,__SP_L__
 1363 05fe DEB7      		in r29,__SP_H__
 1364               	.LCFI63:
 1365               		.cfi_def_cfa_register 28
 1366               	/* prologue: function */
 1367               	/* frame size = 6 */
 1368               	/* stack size = 8 */
 1369               	.L__stack_usage = 8
 1370 0600 9E83      		std Y+6,r25
 1371 0602 8D83      		std Y+5,r24
 219:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1372               		.loc 6 219 0
 1373 0604 8D81      		ldd r24,Y+5
 1374 0606 9E81      		ldd r25,Y+6
 1375 0608 FC01      		movw r30,r24
 1376 060a 8085      		ldd r24,Z+8
 1377 060c 9185      		ldd r25,Z+9
 1378 060e FC01      		movw r30,r24
 1379 0610 8081      		ld r24,Z
 1380 0612 8D30      		cpi r24,lo8(13)
 1381 0614 01F4      		brne .L39
 1382               	.LBB3:
 220:ServerLLDN.c  **** 		{
 221:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1383               		.loc 6 221 0
 1384 0616 8D81      		ldd r24,Y+5
 1385 0618 9E81      		ldd r25,Y+6
 1386 061a FC01      		movw r30,r24
 1387 061c 8085      		ldd r24,Z+8
 1388 061e 9185      		ldd r25,Z+9
 1389 0620 9C83      		std Y+4,r25
 1390 0622 8B83      		std Y+3,r24
 222:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1391               		.loc 6 222 0
 1392 0624 8B81      		ldd r24,Y+3
 1393 0626 9C81      		ldd r25,Y+4
 1394 0628 FC01      		movw r30,r24
 1395 062a 8181      		ldd r24,Z+1
 1396 062c 0E94 0000 		call addToAckArray
 223:ServerLLDN.c  **** 					
 224:ServerLLDN.c  **** 			#if PRINT
 225:ServerLLDN.c  **** 			printf("\nDISC %hhx", msg->macAddr);	
 1397               		.loc 6 225 0
 1398 0630 8B81      		ldd r24,Y+3
 1399 0632 9C81      		ldd r25,Y+4
 1400 0634 FC01      		movw r30,r24
 1401 0636 8181      		ldd r24,Z+1
 1402 0638 882F      		mov r24,r24
 1403 063a 90E0      		ldi r25,0
 1404 063c 292F      		mov r18,r25
 1405 063e 2F93      		push r18
 1406 0640 8F93      		push r24
 1407 0642 80E0      		ldi r24,lo8(.LC3)
 1408 0644 90E0      		ldi r25,hi8(.LC3)
 1409 0646 892F      		mov r24,r25
 1410 0648 8F93      		push r24
 1411 064a 80E0      		ldi r24,lo8(.LC3)
 1412 064c 90E0      		ldi r25,hi8(.LC3)
 1413 064e 8F93      		push r24
 1414 0650 0E94 0000 		call printf
 1415 0654 0F90      		pop __tmp_reg__
 1416 0656 0F90      		pop __tmp_reg__
 1417 0658 0F90      		pop __tmp_reg__
 1418 065a 0F90      		pop __tmp_reg__
 1419               	.LBE3:
 1420 065c 00C0      		rjmp .L40
 1421               	.L39:
 226:ServerLLDN.c  **** 			#endif
 227:ServerLLDN.c  **** 		}
 228:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1422               		.loc 6 228 0
 1423 065e 8D81      		ldd r24,Y+5
 1424 0660 9E81      		ldd r25,Y+6
 1425 0662 FC01      		movw r30,r24
 1426 0664 8085      		ldd r24,Z+8
 1427 0666 9185      		ldd r25,Z+9
 1428 0668 FC01      		movw r30,r24
 1429 066a 8081      		ld r24,Z
 1430 066c 8E30      		cpi r24,lo8(14)
 1431 066e 01F4      		brne .L41
 1432               	.LBB4:
 229:ServerLLDN.c  **** 		{
 230:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1433               		.loc 6 230 0
 1434 0670 8D81      		ldd r24,Y+5
 1435 0672 9E81      		ldd r25,Y+6
 1436 0674 FC01      		movw r30,r24
 1437 0676 8085      		ldd r24,Z+8
 1438 0678 9185      		ldd r25,Z+9
 1439 067a 9A83      		std Y+2,r25
 1440 067c 8983      		std Y+1,r24
 231:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1441               		.loc 6 231 0
 1442 067e 8981      		ldd r24,Y+1
 1443 0680 9A81      		ldd r25,Y+2
 1444 0682 0E94 0000 		call addConfRequestArray
 232:ServerLLDN.c  **** 			#if PRINT
 233:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 1445               		.loc 6 233 0
 1446 0686 8981      		ldd r24,Y+1
 1447 0688 9A81      		ldd r25,Y+2
 1448 068a FC01      		movw r30,r24
 1449 068c 8381      		ldd r24,Z+3
 1450 068e 882F      		mov r24,r24
 1451 0690 90E0      		ldi r25,0
 1452 0692 292F      		mov r18,r25
 1453 0694 2F93      		push r18
 1454 0696 8F93      		push r24
 1455 0698 80E0      		ldi r24,lo8(.LC4)
 1456 069a 90E0      		ldi r25,hi8(.LC4)
 1457 069c 892F      		mov r24,r25
 1458 069e 8F93      		push r24
 1459 06a0 80E0      		ldi r24,lo8(.LC4)
 1460 06a2 90E0      		ldi r25,hi8(.LC4)
 1461 06a4 8F93      		push r24
 1462 06a6 0E94 0000 		call printf
 1463 06aa 0F90      		pop __tmp_reg__
 1464 06ac 0F90      		pop __tmp_reg__
 1465 06ae 0F90      		pop __tmp_reg__
 1466 06b0 0F90      		pop __tmp_reg__
 1467               	.LBE4:
 1468 06b2 00C0      		rjmp .L40
 1469               	.L41:
 234:ServerLLDN.c  **** 			#endif
 235:ServerLLDN.c  **** 		}
 236:ServerLLDN.c  **** 		else return false;			
 1470               		.loc 6 236 0
 1471 06b4 80E0      		ldi r24,0
 1472 06b6 00C0      		rjmp .L42
 1473               	.L40:
 237:ServerLLDN.c  **** 		return true;
 1474               		.loc 6 237 0
 1475 06b8 81E0      		ldi r24,lo8(1)
 1476               	.L42:
 1477               	/* epilogue start */
 238:ServerLLDN.c  **** 	}
 1478               		.loc 6 238 0
 1479 06ba 2696      		adiw r28,6
 1480 06bc 0FB6      		in __tmp_reg__,__SREG__
 1481 06be F894      		cli
 1482 06c0 DEBF      		out __SP_H__,r29
 1483 06c2 0FBE      		out __SREG__,__tmp_reg__
 1484 06c4 CDBF      		out __SP_L__,r28
 1485 06c6 DF91      		pop r29
 1486 06c8 CF91      		pop r28
 1487 06ca 0895      		ret
 1488               		.cfi_endproc
 1489               	.LFE139:
 1491               		.section	.rodata
 1492               	.LC5:
 1493 0032 0A20 2564 		.string	"\n %d payload: "
 1493      2070 6179 
 1493      6C6F 6164 
 1493      3A20 00
 1494               	.LC6:
 1495 0041 2568 6878 		.string	"%hhx"
 1495      00
 1496               		.text
 1498               	appDataInd:
 1499               	.LFB140:
 239:ServerLLDN.c  **** 	
 240:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 241:ServerLLDN.c  **** 	{
 1500               		.loc 6 241 0
 1501               		.cfi_startproc
 1502 06cc CF93      		push r28
 1503               	.LCFI64:
 1504               		.cfi_def_cfa_offset 3
 1505               		.cfi_offset 28, -2
 1506 06ce DF93      		push r29
 1507               	.LCFI65:
 1508               		.cfi_def_cfa_offset 4
 1509               		.cfi_offset 29, -3
 1510 06d0 00D0      		rcall .
 1511 06d2 00D0      		rcall .
 1512 06d4 00D0      		rcall .
 1513               	.LCFI66:
 1514               		.cfi_def_cfa_offset 10
 1515 06d6 CDB7      		in r28,__SP_L__
 1516 06d8 DEB7      		in r29,__SP_H__
 1517               	.LCFI67:
 1518               		.cfi_def_cfa_register 28
 1519               	/* prologue: function */
 1520               	/* frame size = 6 */
 1521               	/* stack size = 8 */
 1522               	.L__stack_usage = 8
 1523 06da 9E83      		std Y+6,r25
 1524 06dc 8D83      		std Y+5,r24
 242:ServerLLDN.c  **** 		if(!data_received)
 1525               		.loc 6 242 0
 1526 06de 9091 0000 		lds r25,data_received
 1527 06e2 81E0      		ldi r24,lo8(1)
 1528 06e4 8927      		eor r24,r25
 1529 06e6 8823      		tst r24
 1530 06e8 01F4      		brne .+2
 1531 06ea 00C0      		rjmp .L44
 1532               	.LBB5:
 243:ServerLLDN.c  **** 		{
 244:ServerLLDN.c  **** 		int curr_ts = timeslot_counter - 2*MacLLDNMgmtTS;
 1533               		.loc 6 244 0
 1534 06ec 8091 0000 		lds r24,timeslot_counter
 1535 06f0 882F      		mov r24,r24
 1536 06f2 90E0      		ldi r25,0
 1537 06f4 0297      		sbiw r24,2
 1538 06f6 9C83      		std Y+4,r25
 1539 06f8 8B83      		std Y+3,r24
 245:ServerLLDN.c  **** 		data_received = true;
 1540               		.loc 6 245 0
 1541 06fa 81E0      		ldi r24,lo8(1)
 1542 06fc 8093 0000 		sts data_received,r24
 246:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].rssi = ind->rssi;
 1543               		.loc 6 246 0
 1544 0700 8D81      		ldd r24,Y+5
 1545 0702 9E81      		ldd r25,Y+6
 1546 0704 FC01      		movw r30,r24
 1547 0706 8485      		ldd r24,Z+12
 1548 0708 582F      		mov r21,r24
 1549 070a 2B81      		ldd r18,Y+3
 1550 070c 3C81      		ldd r19,Y+4
 1551 070e 46E4      		ldi r20,lo8(70)
 1552 0710 429F      		mul r20,r18
 1553 0712 C001      		movw r24,r0
 1554 0714 439F      		mul r20,r19
 1555 0716 900D      		add r25,r0
 1556 0718 1124      		clr __zero_reg__
 1557 071a 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1558 071c 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1559 071e FC01      		movw r30,r24
 1560 0720 5083      		st Z,r21
 247:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].msg_rec++;
 1561               		.loc 6 247 0
 1562 0722 2B81      		ldd r18,Y+3
 1563 0724 3C81      		ldd r19,Y+4
 1564 0726 46E4      		ldi r20,lo8(70)
 1565 0728 429F      		mul r20,r18
 1566 072a C001      		movw r24,r0
 1567 072c 439F      		mul r20,r19
 1568 072e 900D      		add r25,r0
 1569 0730 1124      		clr __zero_reg__
 1570 0732 8050      		subi r24,lo8(-(nodes_info_arr+65))
 1571 0734 9040      		sbci r25,hi8(-(nodes_info_arr+65))
 1572 0736 FC01      		movw r30,r24
 1573 0738 8081      		ld r24,Z
 1574 073a 9181      		ldd r25,Z+1
 1575 073c 9C01      		movw r18,r24
 1576 073e 2F5F      		subi r18,-1
 1577 0740 3F4F      		sbci r19,-1
 1578 0742 4B81      		ldd r20,Y+3
 1579 0744 5C81      		ldd r21,Y+4
 1580 0746 66E4      		ldi r22,lo8(70)
 1581 0748 649F      		mul r22,r20
 1582 074a C001      		movw r24,r0
 1583 074c 659F      		mul r22,r21
 1584 074e 900D      		add r25,r0
 1585 0750 1124      		clr __zero_reg__
 1586 0752 8050      		subi r24,lo8(-(nodes_info_arr+65))
 1587 0754 9040      		sbci r25,hi8(-(nodes_info_arr+65))
 1588 0756 FC01      		movw r30,r24
 1589 0758 3183      		std Z+1,r19
 1590 075a 2083      		st Z,r18
 248:ServerLLDN.c  **** 		
 249:ServerLLDN.c  **** 		printf("\n %d payload: ", curr_ts);
 1591               		.loc 6 249 0
 1592 075c 8C81      		ldd r24,Y+4
 1593 075e 8F93      		push r24
 1594 0760 8B81      		ldd r24,Y+3
 1595 0762 8F93      		push r24
 1596 0764 80E0      		ldi r24,lo8(.LC5)
 1597 0766 90E0      		ldi r25,hi8(.LC5)
 1598 0768 892F      		mov r24,r25
 1599 076a 8F93      		push r24
 1600 076c 80E0      		ldi r24,lo8(.LC5)
 1601 076e 90E0      		ldi r25,hi8(.LC5)
 1602 0770 8F93      		push r24
 1603 0772 0E94 0000 		call printf
 1604 0776 0F90      		pop __tmp_reg__
 1605 0778 0F90      		pop __tmp_reg__
 1606 077a 0F90      		pop __tmp_reg__
 1607 077c 0F90      		pop __tmp_reg__
 1608               	.LBB6:
 250:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1609               		.loc 6 250 0
 1610 077e 1A82      		std Y+2,__zero_reg__
 1611 0780 1982      		std Y+1,__zero_reg__
 1612 0782 00C0      		rjmp .L45
 1613               	.L46:
 251:ServerLLDN.c  **** 			printf("%hhx", ind->data[i]);
 1614               		.loc 6 251 0 discriminator 3
 1615 0784 8D81      		ldd r24,Y+5
 1616 0786 9E81      		ldd r25,Y+6
 1617 0788 FC01      		movw r30,r24
 1618 078a 2085      		ldd r18,Z+8
 1619 078c 3185      		ldd r19,Z+9
 1620 078e 8981      		ldd r24,Y+1
 1621 0790 9A81      		ldd r25,Y+2
 1622 0792 820F      		add r24,r18
 1623 0794 931F      		adc r25,r19
 1624 0796 FC01      		movw r30,r24
 1625 0798 8081      		ld r24,Z
 1626 079a 882F      		mov r24,r24
 1627 079c 90E0      		ldi r25,0
 1628 079e 292F      		mov r18,r25
 1629 07a0 2F93      		push r18
 1630 07a2 8F93      		push r24
 1631 07a4 80E0      		ldi r24,lo8(.LC6)
 1632 07a6 90E0      		ldi r25,hi8(.LC6)
 1633 07a8 892F      		mov r24,r25
 1634 07aa 8F93      		push r24
 1635 07ac 80E0      		ldi r24,lo8(.LC6)
 1636 07ae 90E0      		ldi r25,hi8(.LC6)
 1637 07b0 8F93      		push r24
 1638 07b2 0E94 0000 		call printf
 1639 07b6 0F90      		pop __tmp_reg__
 1640 07b8 0F90      		pop __tmp_reg__
 1641 07ba 0F90      		pop __tmp_reg__
 1642 07bc 0F90      		pop __tmp_reg__
 250:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1643               		.loc 6 250 0 discriminator 3
 1644 07be 8981      		ldd r24,Y+1
 1645 07c0 9A81      		ldd r25,Y+2
 1646 07c2 0196      		adiw r24,1
 1647 07c4 9A83      		std Y+2,r25
 1648 07c6 8983      		std Y+1,r24
 1649               	.L45:
 250:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1650               		.loc 6 250 0 is_stmt 0 discriminator 1
 1651 07c8 8D81      		ldd r24,Y+5
 1652 07ca 9E81      		ldd r25,Y+6
 1653 07cc FC01      		movw r30,r24
 1654 07ce 8285      		ldd r24,Z+10
 1655 07d0 282F      		mov r18,r24
 1656 07d2 30E0      		ldi r19,0
 1657 07d4 8981      		ldd r24,Y+1
 1658 07d6 9A81      		ldd r25,Y+2
 1659 07d8 8217      		cp r24,r18
 1660 07da 9307      		cpc r25,r19
 1661 07dc 04F0      		brlt .L46
 1662               	.L44:
 1663               	.LBE6:
 1664               	.LBE5:
 252:ServerLLDN.c  **** 		}
 253:ServerLLDN.c  **** 	}
 1665               		.loc 6 253 0 is_stmt 1
 1666 07de 0000      		nop
 1667               	/* epilogue start */
 1668 07e0 2696      		adiw r28,6
 1669 07e2 0FB6      		in __tmp_reg__,__SREG__
 1670 07e4 F894      		cli
 1671 07e6 DEBF      		out __SP_H__,r29
 1672 07e8 0FBE      		out __SREG__,__tmp_reg__
 1673 07ea CDBF      		out __SP_L__,r28
 1674 07ec DF91      		pop r29
 1675 07ee CF91      		pop r28
 1676 07f0 0895      		ret
 1677               		.cfi_endproc
 1678               	.LFE140:
 1681               	appPanPrepareACK:
 1682               	.LFB141:
 254:ServerLLDN.c  **** 	
 255:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 256:ServerLLDN.c  **** 	{
 1683               		.loc 6 256 0
 1684               		.cfi_startproc
 1685 07f2 CF93      		push r28
 1686               	.LCFI68:
 1687               		.cfi_def_cfa_offset 3
 1688               		.cfi_offset 28, -2
 1689 07f4 DF93      		push r29
 1690               	.LCFI69:
 1691               		.cfi_def_cfa_offset 4
 1692               		.cfi_offset 29, -3
 1693 07f6 CDB7      		in r28,__SP_L__
 1694 07f8 DEB7      		in r29,__SP_H__
 1695               	.LCFI70:
 1696               		.cfi_def_cfa_register 28
 1697               	/* prologue: function */
 1698               	/* frame size = 0 */
 1699               	/* stack size = 2 */
 1700               	.L__stack_usage = 2
 257:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1701               		.loc 6 257 0
 1702 07fa 1092 0000 		sts msgReq+5+1,__zero_reg__
 1703 07fe 1092 0000 		sts msgReq+5,__zero_reg__
 258:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1704               		.loc 6 258 0
 1705 0802 1092 0000 		sts msgReq+7,__zero_reg__
 259:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1706               		.loc 6 259 0
 1707 0806 1092 0000 		sts msgReq+8,__zero_reg__
 260:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 1708               		.loc 6 260 0
 1709 080a 80E0      		ldi r24,0
 1710 080c 90E4      		ldi r25,lo8(64)
 1711 080e 9093 0000 		sts msgReq+9+1,r25
 1712 0812 8093 0000 		sts msgReq+9,r24
 261:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 1713               		.loc 6 261 0
 1714 0816 80E0      		ldi r24,lo8(ACKFrame)
 1715 0818 90E0      		ldi r25,hi8(ACKFrame)
 1716 081a 9093 0000 		sts msgReq+13+1,r25
 1717 081e 8093 0000 		sts msgReq+13,r24
 262:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 1718               		.loc 6 262 0
 1719 0822 8091 0000 		lds r24,ACKFrame_size
 1720 0826 9091 0000 		lds r25,ACKFrame_size+1
 1721 082a 8F5F      		subi r24,lo8(-(1))
 1722 082c 8093 0000 		sts msgReq+15,r24
 263:ServerLLDN.c  **** 
 264:ServerLLDN.c  **** 	}
 1723               		.loc 6 264 0
 1724 0830 0000      		nop
 1725               	/* epilogue start */
 1726 0832 DF91      		pop r29
 1727 0834 CF91      		pop r28
 1728 0836 0895      		ret
 1729               		.cfi_endproc
 1730               	.LFE141:
 1733               	appPanReset:
 1734               	.LFB142:
 265:ServerLLDN.c  **** 
 266:ServerLLDN.c  **** 	static void appPanReset(void)
 267:ServerLLDN.c  **** 	{
 1735               		.loc 6 267 0
 1736               		.cfi_startproc
 1737 0838 CF93      		push r28
 1738               	.LCFI71:
 1739               		.cfi_def_cfa_offset 3
 1740               		.cfi_offset 28, -2
 1741 083a DF93      		push r29
 1742               	.LCFI72:
 1743               		.cfi_def_cfa_offset 4
 1744               		.cfi_offset 29, -3
 1745 083c 00D0      		rcall .
 1746 083e 00D0      		rcall .
 1747 0840 00D0      		rcall .
 1748               	.LCFI73:
 1749               		.cfi_def_cfa_offset 10
 1750 0842 CDB7      		in r28,__SP_L__
 1751 0844 DEB7      		in r29,__SP_H__
 1752               	.LCFI74:
 1753               		.cfi_def_cfa_register 28
 1754               	/* prologue: function */
 1755               	/* frame size = 6 */
 1756               	/* stack size = 8 */
 1757               	.L__stack_usage = 8
 268:ServerLLDN.c  **** 		// prepare beacon reset message
 269:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1758               		.loc 6 269 0
 1759 0846 1092 0000 		sts msgReq+5+1,__zero_reg__
 1760 084a 1092 0000 		sts msgReq+5,__zero_reg__
 270:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1761               		.loc 6 270 0
 1762 084e 1092 0000 		sts msgReq+7,__zero_reg__
 271:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1763               		.loc 6 271 0
 1764 0852 1092 0000 		sts msgReq+8,__zero_reg__
 272:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 1765               		.loc 6 272 0
 1766 0856 80E4      		ldi r24,lo8(64)
 1767 0858 94E0      		ldi r25,lo8(4)
 1768 085a 9093 0000 		sts msgReq+9+1,r25
 1769 085e 8093 0000 		sts msgReq+9,r24
 273:ServerLLDN.c  **** 		msgReq.data			= NULL;
 1770               		.loc 6 273 0
 1771 0862 1092 0000 		sts msgReq+13+1,__zero_reg__
 1772 0866 1092 0000 		sts msgReq+13,__zero_reg__
 274:ServerLLDN.c  **** 		msgReq.size			= 0;
 1773               		.loc 6 274 0
 1774 086a 1092 0000 		sts msgReq+15,__zero_reg__
 1775               	.LBB7:
 275:ServerLLDN.c  **** 
 276:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1776               		.loc 6 276 0
 1777 086e 1A82      		std Y+2,__zero_reg__
 1778 0870 1982      		std Y+1,__zero_reg__
 1779 0872 00C0      		rjmp .L49
 1780               	.L50:
 277:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1781               		.loc 6 277 0 discriminator 3
 1782 0874 8981      		ldd r24,Y+1
 1783 0876 9A81      		ldd r25,Y+2
 1784 0878 8050      		subi r24,lo8(-(ACKFrame+1))
 1785 087a 9040      		sbci r25,hi8(-(ACKFrame+1))
 1786 087c FC01      		movw r30,r24
 1787 087e 1082      		st Z,__zero_reg__
 276:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1788               		.loc 6 276 0 discriminator 3
 1789 0880 8981      		ldd r24,Y+1
 1790 0882 9A81      		ldd r25,Y+2
 1791 0884 0196      		adiw r24,1
 1792 0886 9A83      		std Y+2,r25
 1793 0888 8983      		std Y+1,r24
 1794               	.L49:
 276:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1795               		.loc 6 276 0 is_stmt 0 discriminator 1
 1796 088a 8981      		ldd r24,Y+1
 1797 088c 9A81      		ldd r25,Y+2
 1798 088e 8097      		sbiw r24,32
 1799 0890 04F0      		brlt .L50
 1800               	.LBE7:
 1801               	.LBB8:
 278:ServerLLDN.c  **** 			
 279:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 1802               		.loc 6 279 0 is_stmt 1
 1803 0892 1C82      		std Y+4,__zero_reg__
 1804 0894 1B82      		std Y+3,__zero_reg__
 1805 0896 00C0      		rjmp .L51
 1806               	.L54:
 280:ServerLLDN.c  **** 		{
 281:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 1807               		.loc 6 281 0
 1808 0898 2B81      		ldd r18,Y+3
 1809 089a 3C81      		ldd r19,Y+4
 1810 089c 46E4      		ldi r20,lo8(70)
 1811 089e 429F      		mul r20,r18
 1812 08a0 C001      		movw r24,r0
 1813 08a2 439F      		mul r20,r19
 1814 08a4 900D      		add r25,r0
 1815 08a6 1124      		clr __zero_reg__
 1816 08a8 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1817 08aa 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1818 08ac FC01      		movw r30,r24
 1819 08ae 1182      		std Z+1,__zero_reg__
 1820 08b0 1082      		st Z,__zero_reg__
 282:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 1821               		.loc 6 282 0
 1822 08b2 2B81      		ldd r18,Y+3
 1823 08b4 3C81      		ldd r19,Y+4
 1824 08b6 46E4      		ldi r20,lo8(70)
 1825 08b8 429F      		mul r20,r18
 1826 08ba C001      		movw r24,r0
 1827 08bc 439F      		mul r20,r19
 1828 08be 900D      		add r25,r0
 1829 08c0 1124      		clr __zero_reg__
 1830 08c2 8050      		subi r24,lo8(-(nodes_info_arr+65))
 1831 08c4 9040      		sbci r25,hi8(-(nodes_info_arr+65))
 1832 08c6 FC01      		movw r30,r24
 1833 08c8 1182      		std Z+1,__zero_reg__
 1834 08ca 1082      		st Z,__zero_reg__
 283:ServerLLDN.c  **** 
 284:ServerLLDN.c  **** 			
 285:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 1835               		.loc 6 285 0
 1836 08cc 2B81      		ldd r18,Y+3
 1837 08ce 3C81      		ldd r19,Y+4
 1838 08d0 43E8      		ldi r20,lo8(-125)
 1839 08d2 429F      		mul r20,r18
 1840 08d4 C001      		movw r24,r0
 1841 08d6 439F      		mul r20,r19
 1842 08d8 900D      		add r25,r0
 1843 08da 1124      		clr __zero_reg__
 1844 08dc 8050      		subi r24,lo8(-(msg_info_array))
 1845 08de 9040      		sbci r25,hi8(-(msg_info_array))
 1846 08e0 FC01      		movw r30,r24
 1847 08e2 1182      		std Z+1,__zero_reg__
 1848 08e4 1082      		st Z,__zero_reg__
 286:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 1849               		.loc 6 286 0
 1850 08e6 2B81      		ldd r18,Y+3
 1851 08e8 3C81      		ldd r19,Y+4
 1852 08ea 43E8      		ldi r20,lo8(-125)
 1853 08ec 429F      		mul r20,r18
 1854 08ee C001      		movw r24,r0
 1855 08f0 439F      		mul r20,r19
 1856 08f2 900D      		add r25,r0
 1857 08f4 1124      		clr __zero_reg__
 1858 08f6 8050      		subi r24,lo8(-(msg_info_array+2))
 1859 08f8 9040      		sbci r25,hi8(-(msg_info_array+2))
 1860 08fa FC01      		movw r30,r24
 1861 08fc 1182      		std Z+1,__zero_reg__
 1862 08fe 1082      		st Z,__zero_reg__
 1863               	.LBB9:
 287:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 1864               		.loc 6 287 0
 1865 0900 1E82      		std Y+6,__zero_reg__
 1866 0902 1D82      		std Y+5,__zero_reg__
 1867 0904 00C0      		rjmp .L52
 1868               	.L53:
 288:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 1869               		.loc 6 288 0 discriminator 3
 1870 0906 8B81      		ldd r24,Y+3
 1871 0908 9C81      		ldd r25,Y+4
 1872 090a 46E4      		ldi r20,lo8(70)
 1873 090c 489F      		mul r20,r24
 1874 090e 9001      		movw r18,r0
 1875 0910 499F      		mul r20,r25
 1876 0912 300D      		add r19,r0
 1877 0914 1124      		clr __zero_reg__
 1878 0916 8D81      		ldd r24,Y+5
 1879 0918 9E81      		ldd r25,Y+6
 1880 091a 820F      		add r24,r18
 1881 091c 931F      		adc r25,r19
 1882 091e 8050      		subi r24,lo8(-(nodes_info_arr+5))
 1883 0920 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 1884 0922 FC01      		movw r30,r24
 1885 0924 1082      		st Z,__zero_reg__
 287:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 1886               		.loc 6 287 0 discriminator 3
 1887 0926 8D81      		ldd r24,Y+5
 1888 0928 9E81      		ldd r25,Y+6
 1889 092a 0196      		adiw r24,1
 1890 092c 9E83      		std Y+6,r25
 1891 092e 8D83      		std Y+5,r24
 1892               	.L52:
 287:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 1893               		.loc 6 287 0 is_stmt 0 discriminator 1
 1894 0930 8D81      		ldd r24,Y+5
 1895 0932 9E81      		ldd r25,Y+6
 1896 0934 C297      		sbiw r24,50
 1897 0936 04F0      		brlt .L53
 1898               	.LBE9:
 279:ServerLLDN.c  **** 		{
 1899               		.loc 6 279 0 is_stmt 1 discriminator 2
 1900 0938 8B81      		ldd r24,Y+3
 1901 093a 9C81      		ldd r25,Y+4
 1902 093c 0196      		adiw r24,1
 1903 093e 9C83      		std Y+4,r25
 1904 0940 8B83      		std Y+3,r24
 1905               	.L51:
 279:ServerLLDN.c  **** 		{
 1906               		.loc 6 279 0 is_stmt 0 discriminator 1
 1907 0942 8B81      		ldd r24,Y+3
 1908 0944 9C81      		ldd r25,Y+4
 1909 0946 C297      		sbiw r24,50
 1910 0948 04F4      		brge .+2
 1911 094a 00C0      		rjmp .L54
 1912               	.LBE8:
 289:ServerLLDN.c  **** 		}
 290:ServerLLDN.c  **** 		assTimeSlot = MacLLDNMgmtTS * 2;	
 1913               		.loc 6 290 0 is_stmt 1
 1914 094c 82E0      		ldi r24,lo8(2)
 1915 094e 90E0      		ldi r25,0
 1916 0950 9093 0000 		sts assTimeSlot+1,r25
 1917 0954 8093 0000 		sts assTimeSlot,r24
 291:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1918               		.loc 6 291 0
 1919 0958 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1920 095c 1092 0000 		sts ACKFrame_size,__zero_reg__
 292:ServerLLDN.c  **** 		counter_associados = 0;
 1921               		.loc 6 292 0
 1922 0960 1092 0000 		sts counter_associados+1,__zero_reg__
 1923 0964 1092 0000 		sts counter_associados,__zero_reg__
 293:ServerLLDN.c  **** 		n = 0;
 1924               		.loc 6 293 0
 1925 0968 1092 0000 		sts n,__zero_reg__
 294:ServerLLDN.c  **** 	}
 1926               		.loc 6 294 0
 1927 096c 0000      		nop
 1928               	/* epilogue start */
 1929 096e 2696      		adiw r28,6
 1930 0970 0FB6      		in __tmp_reg__,__SREG__
 1931 0972 F894      		cli
 1932 0974 DEBF      		out __SP_H__,r29
 1933 0976 0FBE      		out __SREG__,__tmp_reg__
 1934 0978 CDBF      		out __SP_L__,r28
 1935 097a DF91      		pop r29
 1936 097c CF91      		pop r28
 1937 097e 0895      		ret
 1938               		.cfi_endproc
 1939               	.LFE142:
 1941               	.global	__floatsisf
 1942               	.global	__addsf3
 1943               	.global	__mulsf3
 1945               	appPanDiscInit:
 1946               	.LFB143:
 295:ServerLLDN.c  **** 
 296:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 297:ServerLLDN.c  **** 	{	
 1947               		.loc 6 297 0
 1948               		.cfi_startproc
 1949 0980 CF93      		push r28
 1950               	.LCFI75:
 1951               		.cfi_def_cfa_offset 3
 1952               		.cfi_offset 28, -2
 1953 0982 DF93      		push r29
 1954               	.LCFI76:
 1955               		.cfi_def_cfa_offset 4
 1956               		.cfi_offset 29, -3
 1957 0984 00D0      		rcall .
 1958               	.LCFI77:
 1959               		.cfi_def_cfa_offset 6
 1960 0986 CDB7      		in r28,__SP_L__
 1961 0988 DEB7      		in r29,__SP_H__
 1962               	.LCFI78:
 1963               		.cfi_def_cfa_register 28
 1964               	/* prologue: function */
 1965               	/* frame size = 2 */
 1966               	/* stack size = 4 */
 1967               	.L__stack_usage = 4
 1968               	.LBB10:
 298:ServerLLDN.c  **** 		/* clear Ack array of previous discovery state */
 299:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1969               		.loc 6 299 0
 1970 098a 1A82      		std Y+2,__zero_reg__
 1971 098c 1982      		std Y+1,__zero_reg__
 1972 098e 00C0      		rjmp .L56
 1973               	.L57:
 300:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1974               		.loc 6 300 0 discriminator 3
 1975 0990 8981      		ldd r24,Y+1
 1976 0992 9A81      		ldd r25,Y+2
 1977 0994 8050      		subi r24,lo8(-(ACKFrame+1))
 1978 0996 9040      		sbci r25,hi8(-(ACKFrame+1))
 1979 0998 FC01      		movw r30,r24
 1980 099a 1082      		st Z,__zero_reg__
 299:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1981               		.loc 6 299 0 discriminator 3
 1982 099c 8981      		ldd r24,Y+1
 1983 099e 9A81      		ldd r25,Y+2
 1984 09a0 0196      		adiw r24,1
 1985 09a2 9A83      		std Y+2,r25
 1986 09a4 8983      		std Y+1,r24
 1987               	.L56:
 299:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1988               		.loc 6 299 0 is_stmt 0 discriminator 1
 1989 09a6 8981      		ldd r24,Y+1
 1990 09a8 9A81      		ldd r25,Y+2
 1991 09aa 8097      		sbiw r24,32
 1992 09ac 04F0      		brlt .L57
 1993               	.LBE10:
 301:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1994               		.loc 6 301 0 is_stmt 1
 1995 09ae 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1996 09b2 1092 0000 		sts ACKFrame_size,__zero_reg__
 302:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 303:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 1997               		.loc 6 303 0
 1998 09b6 1092 0000 		sts msgReq+5+1,__zero_reg__
 1999 09ba 1092 0000 		sts msgReq+5,__zero_reg__
 304:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2000               		.loc 6 304 0
 2001 09be 1092 0000 		sts msgReq+7,__zero_reg__
 305:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2002               		.loc 6 305 0
 2003 09c2 1092 0000 		sts msgReq+8,__zero_reg__
 306:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2004               		.loc 6 306 0
 2005 09c6 80E4      		ldi r24,lo8(64)
 2006 09c8 91E0      		ldi r25,lo8(1)
 2007 09ca 9093 0000 		sts msgReq+9+1,r25
 2008 09ce 8093 0000 		sts msgReq+9,r24
 307:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2009               		.loc 6 307 0
 2010 09d2 1092 0000 		sts msgReq+13+1,__zero_reg__
 2011 09d6 1092 0000 		sts msgReq+13,__zero_reg__
 308:ServerLLDN.c  **** 		msgReq.size					= 0;
 2012               		.loc 6 308 0
 2013 09da 1092 0000 		sts msgReq+15,__zero_reg__
 309:ServerLLDN.c  **** 		
 310:ServerLLDN.c  **** 		
 311:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 312:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2014               		.loc 6 312 0
 2015 09de 8091 0000 		lds r24,cycles_counter
 2016 09e2 8823      		tst r24
 2017 09e4 01F0      		breq .+2
 2018 09e6 00C0      		rjmp .L59
 313:ServerLLDN.c  **** 		{
 314:ServerLLDN.c  **** 			
 315:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 316:ServerLLDN.c  **** 		n = 127; 
 2019               		.loc 6 316 0
 2020 09e8 8FE7      		ldi r24,lo8(127)
 2021 09ea 8093 0000 		sts n,r24
 317:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2022               		.loc 6 317 0
 2023 09ee 8091 0000 		lds r24,n
 2024 09f2 882F      		mov r24,r24
 2025 09f4 90E0      		ldi r25,0
 2026 09f6 0396      		adiw r24,3
 2027 09f8 880F      		lsl r24
 2028 09fa 991F      		rol r25
 2029 09fc 092E      		mov __tmp_reg__,r25
 2030 09fe 000C      		lsl r0
 2031 0a00 AA0B      		sbc r26,r26
 2032 0a02 BB0B      		sbc r27,r27
 2033 0a04 BC01      		movw r22,r24
 2034 0a06 CD01      		movw r24,r26
 2035 0a08 0E94 0000 		call __floatsisf
 2036 0a0c DC01      		movw r26,r24
 2037 0a0e CB01      		movw r24,r22
 2038 0a10 20E0      		ldi r18,0
 2039 0a12 30E0      		ldi r19,0
 2040 0a14 40E4      		ldi r20,lo8(64)
 2041 0a16 51E4      		ldi r21,lo8(65)
 2042 0a18 BC01      		movw r22,r24
 2043 0a1a CD01      		movw r24,r26
 2044 0a1c 0E94 0000 		call __addsf3
 2045 0a20 DC01      		movw r26,r24
 2046 0a22 CB01      		movw r24,r22
 2047 0a24 20E0      		ldi r18,0
 2048 0a26 30E0      		ldi r19,0
 2049 0a28 40E2      		ldi r20,lo8(32)
 2050 0a2a 52E4      		ldi r21,lo8(66)
 2051 0a2c BC01      		movw r22,r24
 2052 0a2e CD01      		movw r24,r26
 2053 0a30 0E94 0000 		call __addsf3
 2054 0a34 DC01      		movw r26,r24
 2055 0a36 CB01      		movw r24,r22
 2056 0a38 20E0      		ldi r18,0
 2057 0a3a 34E2      		ldi r19,lo8(36)
 2058 0a3c 44E7      		ldi r20,lo8(116)
 2059 0a3e 57E4      		ldi r21,lo8(71)
 2060 0a40 BC01      		movw r22,r24
 2061 0a42 CD01      		movw r24,r26
 2062 0a44 0E94 0000 		call __divsf3
 2063 0a48 DC01      		movw r26,r24
 2064 0a4a CB01      		movw r24,r22
 2065 0a4c 8093 0000 		sts tTS,r24
 2066 0a50 9093 0000 		sts tTS+1,r25
 2067 0a54 A093 0000 		sts tTS+2,r26
 2068 0a58 B093 0000 		sts tTS+3,r27
 318:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 319:ServerLLDN.c  **** 		
 320:ServerLLDN.c  **** 			beaconInterval = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2069               		.loc 6 320 0
 2070 0a5c 8091 0000 		lds r24,tTS
 2071 0a60 9091 0000 		lds r25,tTS+1
 2072 0a64 A091 0000 		lds r26,tTS+2
 2073 0a68 B091 0000 		lds r27,tTS+3
 2074 0a6c 20E0      		ldi r18,0
 2075 0a6e 30E0      		ldi r19,0
 2076 0a70 40E8      		ldi r20,lo8(-128)
 2077 0a72 50E4      		ldi r21,lo8(64)
 2078 0a74 BC01      		movw r22,r24
 2079 0a76 CD01      		movw r24,r26
 2080 0a78 0E94 0000 		call __mulsf3
 2081 0a7c DC01      		movw r26,r24
 2082 0a7e CB01      		movw r24,r22
 2083 0a80 2DEB      		ldi r18,lo8(-67)
 2084 0a82 37E3      		ldi r19,lo8(55)
 2085 0a84 46E8      		ldi r20,lo8(-122)
 2086 0a86 57E3      		ldi r21,lo8(55)
 2087 0a88 BC01      		movw r22,r24
 2088 0a8a CD01      		movw r24,r26
 2089 0a8c 0E94 0000 		call __divsf3
 2090 0a90 DC01      		movw r26,r24
 2091 0a92 CB01      		movw r24,r22
 2092 0a94 8093 0000 		sts beaconInterval,r24
 2093 0a98 9093 0000 		sts beaconInterval+1,r25
 2094 0a9c A093 0000 		sts beaconInterval+2,r26
 2095 0aa0 B093 0000 		sts beaconInterval+3,r27
 321:ServerLLDN.c  **** 			/*
 322:ServerLLDN.c  **** 			* Configure interrupts callback functions
 323:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 324:ServerLLDN.c  **** 			*/
 325:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2096               		.loc 6 325 0
 2097 0aa4 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2098 0aa6 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2099 0aa8 0E94 0000 		call macsc_set_cmp1_int_cb
 326:ServerLLDN.c  **** 			/*
 327:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 328:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 329:ServerLLDN.c  **** 			*/
 330:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2100               		.loc 6 330 0
 2101 0aac 0E94 0000 		call macsc_enable_manual_bts
 331:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2102               		.loc 6 331 0
 2103 0ab0 81E0      		ldi r24,lo8(1)
 2104 0ab2 0E94 0000 		call macsc_enable_cmp_int
 332:ServerLLDN.c  **** 
 333:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval , MACSC_CC1);
 2105               		.loc 6 333 0
 2106 0ab6 8091 0000 		lds r24,beaconInterval
 2107 0aba 9091 0000 		lds r25,beaconInterval+1
 2108 0abe A091 0000 		lds r26,beaconInterval+2
 2109 0ac2 B091 0000 		lds r27,beaconInterval+3
 2110 0ac6 BC01      		movw r22,r24
 2111 0ac8 CD01      		movw r24,r26
 2112 0aca 0E94 0000 		call __fixunssfsi
 2113 0ace DC01      		movw r26,r24
 2114 0ad0 CB01      		movw r24,r22
 2115 0ad2 21E0      		ldi r18,lo8(1)
 2116 0ad4 AC01      		movw r20,r24
 2117 0ad6 BD01      		movw r22,r26
 2118 0ad8 81E0      		ldi r24,lo8(1)
 2119 0ada 0E94 0000 		call macsc_use_cmp
 2120               	.L59:
 334:ServerLLDN.c  **** 			
 335:ServerLLDN.c  **** 			/* Timer used in testing */
 336:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 337:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 338:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 339:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval / 2, MACSC_CC2);
 340:ServerLLDN.c  **** 			#endif
 341:ServerLLDN.c  **** 			
 342:ServerLLDN.c  **** 		#endif
 343:ServerLLDN.c  **** 		}
 344:ServerLLDN.c  **** 	}
 2121               		.loc 6 344 0
 2122 0ade 0000      		nop
 2123               	/* epilogue start */
 2124 0ae0 0F90      		pop __tmp_reg__
 2125 0ae2 0F90      		pop __tmp_reg__
 2126 0ae4 DF91      		pop r29
 2127 0ae6 CF91      		pop r28
 2128 0ae8 0895      		ret
 2129               		.cfi_endproc
 2130               	.LFE143:
 2133               	appPanOnlineInit:
 2134               	.LFB144:
 345:ServerLLDN.c  **** 
 346:ServerLLDN.c  **** 	static void appPanOnlineInit()
 347:ServerLLDN.c  **** 	{
 2135               		.loc 6 347 0
 2136               		.cfi_startproc
 2137 0aea EF92      		push r14
 2138               	.LCFI79:
 2139               		.cfi_def_cfa_offset 3
 2140               		.cfi_offset 14, -2
 2141 0aec FF92      		push r15
 2142               	.LCFI80:
 2143               		.cfi_def_cfa_offset 4
 2144               		.cfi_offset 15, -3
 2145 0aee 0F93      		push r16
 2146               	.LCFI81:
 2147               		.cfi_def_cfa_offset 5
 2148               		.cfi_offset 16, -4
 2149 0af0 1F93      		push r17
 2150               	.LCFI82:
 2151               		.cfi_def_cfa_offset 6
 2152               		.cfi_offset 17, -5
 2153 0af2 CF93      		push r28
 2154               	.LCFI83:
 2155               		.cfi_def_cfa_offset 7
 2156               		.cfi_offset 28, -6
 2157 0af4 DF93      		push r29
 2158               	.LCFI84:
 2159               		.cfi_def_cfa_offset 8
 2160               		.cfi_offset 29, -7
 2161 0af6 CDB7      		in r28,__SP_L__
 2162 0af8 DEB7      		in r29,__SP_H__
 2163               	.LCFI85:
 2164               		.cfi_def_cfa_register 28
 2165               	/* prologue: function */
 2166               	/* frame size = 0 */
 2167               	/* stack size = 6 */
 2168               	.L__stack_usage = 6
 348:ServerLLDN.c  **** 			timeslot_counter = 0;
 2169               		.loc 6 348 0
 2170 0afa 1092 0000 		sts timeslot_counter,__zero_reg__
 349:ServerLLDN.c  **** 			
 350:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 2171               		.loc 6 350 0
 2172 0afe 8091 0000 		lds r24,config_request_frame+5
 2173 0b02 8F77      		andi r24,lo8(127)
 2174 0b04 882F      		mov r24,r24
 2175 0b06 90E0      		ldi r25,0
 2176 0b08 0396      		adiw r24,3
 2177 0b0a 880F      		lsl r24
 2178 0b0c 991F      		rol r25
 2179 0b0e 092E      		mov __tmp_reg__,r25
 2180 0b10 000C      		lsl r0
 2181 0b12 AA0B      		sbc r26,r26
 2182 0b14 BB0B      		sbc r27,r27
 2183 0b16 BC01      		movw r22,r24
 2184 0b18 CD01      		movw r24,r26
 2185 0b1a 0E94 0000 		call __floatsisf
 2186 0b1e DC01      		movw r26,r24
 2187 0b20 CB01      		movw r24,r22
 2188 0b22 20E0      		ldi r18,0
 2189 0b24 30E0      		ldi r19,0
 2190 0b26 40E4      		ldi r20,lo8(64)
 2191 0b28 51E4      		ldi r21,lo8(65)
 2192 0b2a BC01      		movw r22,r24
 2193 0b2c CD01      		movw r24,r26
 2194 0b2e 0E94 0000 		call __addsf3
 2195 0b32 DC01      		movw r26,r24
 2196 0b34 CB01      		movw r24,r22
 2197 0b36 20E0      		ldi r18,0
 2198 0b38 30E0      		ldi r19,0
 2199 0b3a 40E2      		ldi r20,lo8(32)
 2200 0b3c 52E4      		ldi r21,lo8(66)
 2201 0b3e BC01      		movw r22,r24
 2202 0b40 CD01      		movw r24,r26
 2203 0b42 0E94 0000 		call __addsf3
 2204 0b46 DC01      		movw r26,r24
 2205 0b48 CB01      		movw r24,r22
 2206 0b4a 20E0      		ldi r18,0
 2207 0b4c 34E2      		ldi r19,lo8(36)
 2208 0b4e 44E7      		ldi r20,lo8(116)
 2209 0b50 57E4      		ldi r21,lo8(71)
 2210 0b52 BC01      		movw r22,r24
 2211 0b54 CD01      		movw r24,r26
 2212 0b56 0E94 0000 		call __divsf3
 2213 0b5a DC01      		movw r26,r24
 2214 0b5c CB01      		movw r24,r22
 2215 0b5e 8093 0000 		sts tTS,r24
 2216 0b62 9093 0000 		sts tTS+1,r25
 2217 0b66 A093 0000 		sts tTS+2,r26
 2218 0b6a B093 0000 		sts tTS+3,r27
 351:ServerLLDN.c  **** 			
 352:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 2219               		.loc 6 352 0
 2220 0b6e 8091 0000 		lds r24,config_request_frame+5
 2221 0b72 8F77      		andi r24,lo8(127)
 2222 0b74 8093 0000 		sts n,r24
 353:ServerLLDN.c  **** 			
 354:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 2223               		.loc 6 354 0
 2224 0b78 1092 0000 		sts msgReq+5+1,__zero_reg__
 2225 0b7c 1092 0000 		sts msgReq+5,__zero_reg__
 355:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2226               		.loc 6 355 0
 2227 0b80 1092 0000 		sts msgReq+7,__zero_reg__
 356:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2228               		.loc 6 356 0
 2229 0b84 1092 0000 		sts msgReq+8,__zero_reg__
 357:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 2230               		.loc 6 357 0
 2231 0b88 80EC      		ldi r24,lo8(-64)
 2232 0b8a 90E0      		ldi r25,0
 2233 0b8c 9093 0000 		sts msgReq+9+1,r25
 2234 0b90 8093 0000 		sts msgReq+9,r24
 358:ServerLLDN.c  **** 			msgReq.data					= NULL;
 2235               		.loc 6 358 0
 2236 0b94 1092 0000 		sts msgReq+13+1,__zero_reg__
 2237 0b98 1092 0000 		sts msgReq+13,__zero_reg__
 359:ServerLLDN.c  **** 			msgReq.size					= 0;
 2238               		.loc 6 359 0
 2239 0b9c 1092 0000 		sts msgReq+15,__zero_reg__
 360:ServerLLDN.c  **** 			
 361:ServerLLDN.c  **** 			// (number of time slots x mgmt time solts) x base timelosts
 362:ServerLLDN.c  **** 			beaconInterval = (assTimeSlot + 2*MacLLDNMgmtTS) * tTS / (SYMBOL_TIME);
 2240               		.loc 6 362 0
 2241 0ba0 8091 0000 		lds r24,assTimeSlot
 2242 0ba4 9091 0000 		lds r25,assTimeSlot+1
 2243 0ba8 0296      		adiw r24,2
 2244 0baa 092E      		mov __tmp_reg__,r25
 2245 0bac 000C      		lsl r0
 2246 0bae AA0B      		sbc r26,r26
 2247 0bb0 BB0B      		sbc r27,r27
 2248 0bb2 BC01      		movw r22,r24
 2249 0bb4 CD01      		movw r24,r26
 2250 0bb6 0E94 0000 		call __floatsisf
 2251 0bba 7B01      		movw r14,r22
 2252 0bbc 8C01      		movw r16,r24
 2253 0bbe 8091 0000 		lds r24,tTS
 2254 0bc2 9091 0000 		lds r25,tTS+1
 2255 0bc6 A091 0000 		lds r26,tTS+2
 2256 0bca B091 0000 		lds r27,tTS+3
 2257 0bce 9C01      		movw r18,r24
 2258 0bd0 AD01      		movw r20,r26
 2259 0bd2 C801      		movw r24,r16
 2260 0bd4 B701      		movw r22,r14
 2261 0bd6 0E94 0000 		call __mulsf3
 2262 0bda DC01      		movw r26,r24
 2263 0bdc CB01      		movw r24,r22
 2264 0bde 2DEB      		ldi r18,lo8(-67)
 2265 0be0 37E3      		ldi r19,lo8(55)
 2266 0be2 46E8      		ldi r20,lo8(-122)
 2267 0be4 57E3      		ldi r21,lo8(55)
 2268 0be6 BC01      		movw r22,r24
 2269 0be8 CD01      		movw r24,r26
 2270 0bea 0E94 0000 		call __divsf3
 2271 0bee DC01      		movw r26,r24
 2272 0bf0 CB01      		movw r24,r22
 2273 0bf2 8093 0000 		sts beaconInterval,r24
 2274 0bf6 9093 0000 		sts beaconInterval+1,r25
 2275 0bfa A093 0000 		sts beaconInterval+2,r26
 2276 0bfe B093 0000 		sts beaconInterval+3,r27
 363:ServerLLDN.c  **** 			
 364:ServerLLDN.c  **** 			// Configure Timers
 365:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(time_slot_handler);
 2277               		.loc 6 365 0
 2278 0c02 80E0      		ldi r24,lo8(gs(time_slot_handler))
 2279 0c04 90E0      		ldi r25,hi8(gs(time_slot_handler))
 2280 0c06 0E94 0000 		call macsc_set_cmp1_int_cb
 366:ServerLLDN.c  **** 			
 367:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2281               		.loc 6 367 0
 2282 0c0a 0E94 0000 		call macsc_enable_manual_bts
 368:ServerLLDN.c  **** 			
 369:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2283               		.loc 6 369 0
 2284 0c0e 81E0      		ldi r24,lo8(1)
 2285 0c10 0E94 0000 		call macsc_enable_cmp_int
 370:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, numBaseTimeSlotperMgmt_online * tTS / (SYMBOL_TIME), MACSC_CC1
 2286               		.loc 6 370 0
 2287 0c14 8091 0000 		lds r24,tTS
 2288 0c18 9091 0000 		lds r25,tTS+1
 2289 0c1c A091 0000 		lds r26,tTS+2
 2290 0c20 B091 0000 		lds r27,tTS+3
 2291 0c24 9C01      		movw r18,r24
 2292 0c26 AD01      		movw r20,r26
 2293 0c28 BC01      		movw r22,r24
 2294 0c2a CD01      		movw r24,r26
 2295 0c2c 0E94 0000 		call __addsf3
 2296 0c30 DC01      		movw r26,r24
 2297 0c32 CB01      		movw r24,r22
 2298 0c34 2DEB      		ldi r18,lo8(-67)
 2299 0c36 37E3      		ldi r19,lo8(55)
 2300 0c38 46E8      		ldi r20,lo8(-122)
 2301 0c3a 57E3      		ldi r21,lo8(55)
 2302 0c3c BC01      		movw r22,r24
 2303 0c3e CD01      		movw r24,r26
 2304 0c40 0E94 0000 		call __divsf3
 2305 0c44 DC01      		movw r26,r24
 2306 0c46 CB01      		movw r24,r22
 2307 0c48 BC01      		movw r22,r24
 2308 0c4a CD01      		movw r24,r26
 2309 0c4c 0E94 0000 		call __fixunssfsi
 2310 0c50 DC01      		movw r26,r24
 2311 0c52 CB01      		movw r24,r22
 2312 0c54 21E0      		ldi r18,lo8(1)
 2313 0c56 AC01      		movw r20,r24
 2314 0c58 BD01      		movw r22,r26
 2315 0c5a 81E0      		ldi r24,lo8(1)
 2316 0c5c 0E94 0000 		call macsc_use_cmp
 371:ServerLLDN.c  **** 			
 372:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 2317               		.loc 6 372 0
 2318 0c60 60E0      		ldi r22,lo8(gs(appDataInd))
 2319 0c62 70E0      		ldi r23,hi8(gs(appDataInd))
 2320 0c64 81E0      		ldi r24,lo8(1)
 2321 0c66 0E94 0000 		call NWK_OpenEndpoint
 373:ServerLLDN.c  **** 
 374:ServerLLDN.c  **** 			
 375:ServerLLDN.c  **** 	}
 2322               		.loc 6 375 0
 2323 0c6a 0000      		nop
 2324               	/* epilogue start */
 2325 0c6c DF91      		pop r29
 2326 0c6e CF91      		pop r28
 2327 0c70 1F91      		pop r17
 2328 0c72 0F91      		pop r16
 2329 0c74 FF90      		pop r15
 2330 0c76 EF90      		pop r14
 2331 0c78 0895      		ret
 2332               		.cfi_endproc
 2333               	.LFE144:
 2336               	appInit:
 2337               	.LFB145:
 376:ServerLLDN.c  **** 
 377:ServerLLDN.c  **** 
 378:ServerLLDN.c  **** #else 
 379:ServerLLDN.c  **** 	uint8_t payloadSize = 22;
 380:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 381:ServerLLDN.c  **** 	uint8_t n = 0;
 382:ServerLLDN.c  **** 	
 383:ServerLLDN.c  **** 	static NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 384:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 385:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 386:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 22,
 387:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 388:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 389:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 390:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 391:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 22,
 392:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 393:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 394:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 395:ServerLLDN.c  **** 	static bool ack_received;
 396:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 397:ServerLLDN.c  **** 	bool associated = 0;
 398:ServerLLDN.c  **** 	
 399:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 400:ServerLLDN.c  **** 	{
 401:ServerLLDN.c  **** 		printf("\nmsg_hdlr");
 402:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 403:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 404:ServerLLDN.c  **** 			timer_stop();
 405:ServerLLDN.c  **** 		#endif
 406:ServerLLDN.c  **** 	}
 407:ServerLLDN.c  **** 
 408:ServerLLDN.c  **** 	static void start_timer(int delay)
 409:ServerLLDN.c  **** 	{
 410:ServerLLDN.c  **** 		#if MASTER_MACSC
 411:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 412:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(send_message_timeHandler);
 413:ServerLLDN.c  **** 		macsc_enable_cmp_int(MACSC_CC1);
 414:ServerLLDN.c  **** 		macsc_use_cmp(MACSC_RELATIVE_CMP, delay - 195, MACSC_CC1);
 415:ServerLLDN.c  **** 		#else
 416:ServerLLDN.c  **** 		timer_init();
 417:ServerLLDN.c  **** 		timer_delay(delay/2);
 418:ServerLLDN.c  **** 		hw_timer_setup_handler(send_message_timeHandler);
 419:ServerLLDN.c  **** 		timer_start();
 420:ServerLLDN.c  **** 		#endif
 421:ServerLLDN.c  **** 	}
 422:ServerLLDN.c  **** 	
 423:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 424:ServerLLDN.c  **** 	{
 425:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 426:ServerLLDN.c  **** 		PanId = rec_beacon->PanId;
 427:ServerLLDN.c  **** 		//  bom implementar rotinas pra se o nodo estiver associado a um coordeandor e se no estiver
 428:ServerLLDN.c  **** 		if( ((rec_beacon->Flags.txState == DISC_MODE && !ack_received && rec_beacon->confSeqNumber == 0x0
 429:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received)) && associated == 0)
 430:ServerLLDN.c  **** 		{
 431:ServerLLDN.c  **** 	
 432:ServerLLDN.c  **** 			int ts_time =  ((p_var*sp + (m+ rec_beacon->TimeSlotSize  )*sm + macMinLIFSPeriod)/v_var)  / (SY
 433:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize * 2; // sy
 434:ServerLLDN.c  **** 			
 435:ServerLLDN.c  **** 			start_timer(msg_wait_time);
 436:ServerLLDN.c  **** 			
 437:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 438:ServerLLDN.c  **** 		}
 439:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == ONLINE_MODE && assTimeSlot != 0xFF && associated == 1)
 440:ServerLLDN.c  **** 		{
 441:ServerLLDN.c  **** 			int ts_time = ((p_var*sp + (m+ n)*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME);
 442:ServerLLDN.c  **** 			int msg_wait_time = (2*rec_beacon->Flags.numBaseMgmtTimeslots + assTimeSlot) * ts_time;
 443:ServerLLDN.c  **** 			printf("msg_wait_time: %d", msg_wait_time);
 444:ServerLLDN.c  **** 			start_timer(msg_wait_time - 80);
 445:ServerLLDN.c  **** 			appState = APP_STATE_PREP_DATA_FRAME;
 446:ServerLLDN.c  **** 		}
 447:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 448:ServerLLDN.c  **** 		{
 449:ServerLLDN.c  **** 			printf("\n Reset beacon");
 450:ServerLLDN.c  **** 			ack_received = 0;
 451:ServerLLDN.c  **** 			associated = 0;
 452:ServerLLDN.c  **** 		}
 453:ServerLLDN.c  **** 		return true;
 454:ServerLLDN.c  **** 	}
 455:ServerLLDN.c  **** 	
 456:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 457:ServerLLDN.c  **** 	{
 458:ServerLLDN.c  **** 		#if !MASTER_MACSC
 459:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 460:ServerLLDN.c  **** 		#endif
 461:ServerLLDN.c  **** 		NWK_ACKFormat_t *ackframe = (NWK_ACKFormat_t*)ind->data;
 462:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 463:ServerLLDN.c  **** 		{
 464:ServerLLDN.c  **** 			int pos = (int) APP_ADDR / 8;
 465:ServerLLDN.c  **** 			int bit_shift = 8 - APP_ADDR % 8;
 466:ServerLLDN.c  **** 			if( ackframe->ackFlags[pos] & 1 << bit_shift)	
 467:ServerLLDN.c  **** 			{
 468:ServerLLDN.c  **** 				printf("\n ack true");
 469:ServerLLDN.c  **** 				ack_received = true;
 470:ServerLLDN.c  **** 			}
 471:ServerLLDN.c  **** 		}
 472:ServerLLDN.c  **** 		return true;
 473:ServerLLDN.c  **** 	}
 474:ServerLLDN.c  **** 	
 475:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 476:ServerLLDN.c  **** 	{
 477:ServerLLDN.c  **** 		#if !MASTER_MACSC
 478:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 479:ServerLLDN.c  **** 		#endif
 480:ServerLLDN.c  **** 		
 481:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 482:ServerLLDN.c  **** 		{
 483:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 484:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 485:ServerLLDN.c  **** 			{
 486:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 487:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 488:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 489:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 490:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 491:ServerLLDN.c  **** 				associated = 1;
 492:ServerLLDN.c  **** 				printf("\nAssociado!");
 493:ServerLLDN.c  **** 			}
 494:ServerLLDN.c  **** 		}
 495:ServerLLDN.c  **** 		return true;
 496:ServerLLDN.c  **** 	}
 497:ServerLLDN.c  **** 
 498:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 499:ServerLLDN.c  **** 	{
 500:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 501:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 502:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 503:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 504:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 505:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 506:ServerLLDN.c  **** 	}
 507:ServerLLDN.c  **** 	
 508:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 509:ServerLLDN.c  **** 	{		
 510:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 511:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 512:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 513:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 514:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 515:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 516:ServerLLDN.c  **** 	}
 517:ServerLLDN.c  **** 	
 518:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 519:ServerLLDN.c  **** 	{
 520:ServerLLDN.c  **** 		
 521:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 522:ServerLLDN.c  **** 
 523:ServerLLDN.c  **** 	
 524:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 525:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 526:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 527:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 528:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 529:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 530:ServerLLDN.c  **** 	}
 531:ServerLLDN.c  **** 	
 532:ServerLLDN.c  **** 	
 533:ServerLLDN.c  **** #endif // APP_COORDINATOR
 534:ServerLLDN.c  **** 
 535:ServerLLDN.c  **** static void appInit(void)
 536:ServerLLDN.c  **** {
 2338               		.loc 6 536 0
 2339               		.cfi_startproc
 2340 0c7a CF93      		push r28
 2341               	.LCFI86:
 2342               		.cfi_def_cfa_offset 3
 2343               		.cfi_offset 28, -2
 2344 0c7c DF93      		push r29
 2345               	.LCFI87:
 2346               		.cfi_def_cfa_offset 4
 2347               		.cfi_offset 29, -3
 2348 0c7e CDB7      		in r28,__SP_L__
 2349 0c80 DEB7      		in r29,__SP_H__
 2350               	.LCFI88:
 2351               		.cfi_def_cfa_register 28
 2352               	/* prologue: function */
 2353               	/* frame size = 0 */
 2354               	/* stack size = 2 */
 2355               	.L__stack_usage = 2
 537:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 2356               		.loc 6 537 0
 2357 0c82 80E0      		ldi r24,0
 2358 0c84 90E0      		ldi r25,0
 2359 0c86 0E94 0000 		call NWK_SetAddr
 538:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 2360               		.loc 6 538 0
 2361 0c8a 8FE0      		ldi r24,lo8(15)
 2362 0c8c 0E94 0000 		call PHY_SetChannel
 539:ServerLLDN.c  **** 	PHY_SetRxState(true);
 2363               		.loc 6 539 0
 2364 0c90 81E0      		ldi r24,lo8(1)
 2365 0c92 0E94 0000 		call PHY_SetRxState
 540:ServerLLDN.c  **** 		
 541:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 542:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 543:ServerLLDN.c  **** 		tmrDelay.interval = 2;
 2366               		.loc 6 543 0
 2367 0c96 82E0      		ldi r24,lo8(2)
 2368 0c98 90E0      		ldi r25,0
 2369 0c9a A0E0      		ldi r26,0
 2370 0c9c B0E0      		ldi r27,0
 2371 0c9e 8093 0000 		sts tmrDelay+6,r24
 2372 0ca2 9093 0000 		sts tmrDelay+6+1,r25
 2373 0ca6 A093 0000 		sts tmrDelay+6+2,r26
 2374 0caa B093 0000 		sts tmrDelay+6+3,r27
 544:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 2375               		.loc 6 544 0
 2376 0cae 1092 0000 		sts tmrDelay+10,__zero_reg__
 545:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 2377               		.loc 6 545 0
 2378 0cb2 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 2379 0cb4 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 2380 0cb6 9093 0000 		sts tmrDelay+11+1,r25
 2381 0cba 8093 0000 		sts tmrDelay+11,r24
 546:ServerLLDN.c  **** 	  
 547:ServerLLDN.c  **** 		/* 
 548:ServerLLDN.c  **** 		* Disable CSMA/CA
 549:ServerLLDN.c  **** 		* Disable auto ACK
 550:ServerLLDN.c  **** 		*/
 551:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 2382               		.loc 6 551 0
 2383 0cbe 8EEF      		ldi r24,lo8(-2)
 2384 0cc0 9AEC      		ldi r25,lo8(-54)
 2385 0cc2 0E94 0000 		call NWK_SetPanId
 552:ServerLLDN.c  **** 		PanId = APP_PANID;
 2386               		.loc 6 552 0
 2387 0cc6 8EEF      		ldi r24,lo8(-2)
 2388 0cc8 8093 0000 		sts PanId,r24
 553:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 2389               		.loc 6 553 0
 2390 0ccc 8EEF      		ldi r24,lo8(-2)
 2391 0cce 8093 0000 		sts ACKFrame,r24
 554:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 2392               		.loc 6 554 0
 2393 0cd2 81E0      		ldi r24,lo8(1)
 2394 0cd4 0E94 0000 		call PHY_SetTdmaMode
 555:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 2395               		.loc 6 555 0
 2396 0cd8 60E0      		ldi r22,lo8(gs(appCommandInd))
 2397 0cda 70E0      		ldi r23,hi8(gs(appCommandInd))
 2398 0cdc 83E0      		ldi r24,lo8(3)
 2399 0cde 0E94 0000 		call NWK_OpenEndpoint
 556:ServerLLDN.c  **** 	#else
 557:ServerLLDN.c  **** 		/*
 558:ServerLLDN.c  **** 		 * Enable CSMA/CA
 559:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 560:ServerLLDN.c  **** 		 */
 561:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 562:ServerLLDN.c  **** 		// PHY_SetOptimizedCSMAValues();
 563:ServerLLDN.c  **** 		
 564:ServerLLDN.c  **** 		payloadSize = 127;
 565:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 566:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 567:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 568:ServerLLDN.c  **** 		/*
 569:ServerLLDN.c  **** 		* Configure interrupts callback functions
 570:ServerLLDN.c  **** 		*/
 571:ServerLLDN.c  **** 		
 572:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 573:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 2400               		.loc 6 573 0
 2401 0ce2 81E0      		ldi r24,lo8(1)
 2402 0ce4 0E94 0000 		call PHY_SetPromiscuousMode
 574:ServerLLDN.c  **** 
 575:ServerLLDN.c  **** }
 2403               		.loc 6 575 0
 2404 0ce8 0000      		nop
 2405               	/* epilogue start */
 2406 0cea DF91      		pop r29
 2407 0cec CF91      		pop r28
 2408 0cee 0895      		ret
 2409               		.cfi_endproc
 2410               	.LFE145:
 2412               		.section	.rodata
 2413               	.LC7:
 2414 0046 0A25 642C 		.string	"\n%d, %d"
 2414      2025 6400 
 2415               	.LC8:
 2416 004e 0A46 696D 		.string	"\nFim de um Per\355odo"
 2416      2064 6520 
 2416      756D 2050 
 2416      6572 ED6F 
 2416      646F 00
 2417               	.LC9:
 2418 0061 0A2D 2D2D 		.string	"\n------- slot %d --------"
 2418      2D2D 2D2D 
 2418      2073 6C6F 
 2418      7420 2564 
 2418      202D 2D2D 
 2419               		.text
 2421               	APP_TaskHandler:
 2422               	.LFB146:
 576:ServerLLDN.c  **** 
 577:ServerLLDN.c  **** static void APP_TaskHandler(void)
 578:ServerLLDN.c  **** {
 2423               		.loc 6 578 0
 2424               		.cfi_startproc
 2425 0cf0 CF93      		push r28
 2426               	.LCFI89:
 2427               		.cfi_def_cfa_offset 3
 2428               		.cfi_offset 28, -2
 2429 0cf2 DF93      		push r29
 2430               	.LCFI90:
 2431               		.cfi_def_cfa_offset 4
 2432               		.cfi_offset 29, -3
 2433 0cf4 CDB7      		in r28,__SP_L__
 2434 0cf6 DEB7      		in r29,__SP_H__
 2435               	.LCFI91:
 2436               		.cfi_def_cfa_register 28
 2437               	/* prologue: function */
 2438               	/* frame size = 0 */
 2439               	/* stack size = 2 */
 2440               	.L__stack_usage = 2
 579:ServerLLDN.c  **** 	switch (appState){
 2441               		.loc 6 579 0
 2442 0cf8 8091 0000 		lds r24,appState
 2443 0cfc 882F      		mov r24,r24
 2444 0cfe 90E0      		ldi r25,0
 2445 0d00 8230      		cpi r24,2
 2446 0d02 9105      		cpc r25,__zero_reg__
 2447 0d04 01F0      		breq .L64
 2448 0d06 8330      		cpi r24,3
 2449 0d08 9105      		cpc r25,__zero_reg__
 2450 0d0a 01F0      		breq .L65
 2451 0d0c 892B      		or r24,r25
 2452 0d0e 01F0      		breq .L66
 580:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 581:ServerLLDN.c  **** 		{
 582:ServerLLDN.c  **** 			appInit();
 583:ServerLLDN.c  **** 			#if APP_COORDINATOR
 584:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 585:ServerLLDN.c  **** 			#else
 586:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 587:ServerLLDN.c  **** 			#endif
 588:ServerLLDN.c  **** 			break;
 589:ServerLLDN.c  **** 		}
 590:ServerLLDN.c  **** 		case APP_STATE_SEND:
 591:ServerLLDN.c  **** 		{
 592:ServerLLDN.c  **** 			appSendData();
 593:ServerLLDN.c  **** 			#if APP_COORDINATOR
 594:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 595:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 596:ServerLLDN.c  **** 			#else
 597:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 598:ServerLLDN.c  **** 			#endif
 599:ServerLLDN.c  **** 			break;
 600:ServerLLDN.c  **** 		}
 601:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 602:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 603:ServerLLDN.c  **** 		{
 604:ServerLLDN.c  **** 			switch(appPanState)
 605:ServerLLDN.c  **** 			{
 606:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 607:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 608:ServerLLDN.c  **** 				{
 609:ServerLLDN.c  **** 					appPanReset();
 610:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 611:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 612:ServerLLDN.c  **** 					cycles_counter = 0;
 613:ServerLLDN.c  **** 					break;
 614:ServerLLDN.c  **** 				}
 615:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 616:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 617:ServerLLDN.c  **** 				{
 618:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 619:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 620:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 621:ServerLLDN.c  **** 					 */
 622:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 2)
 623:ServerLLDN.c  **** 					{	
 624:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 625:ServerLLDN.c  **** 						counter_associados = 0;
 626:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 627:ServerLLDN.c  **** 						// macsc_disable_cmp_int(MACSC_CC1);
 628:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 629:ServerLLDN.c  **** 						msgReq.options = 0;
 630:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 631:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 632:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 633:ServerLLDN.c  **** 						
 634:ServerLLDN.c  **** 					}
 635:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 636:ServerLLDN.c  **** 					else 
 637:ServerLLDN.c  **** 					{
 638:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 639:ServerLLDN.c  **** 						appPanDiscInit();
 640:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 641:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 642:ServerLLDN.c  **** 					}
 643:ServerLLDN.c  **** 					break;
 644:ServerLLDN.c  **** 				}
 645:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 646:ServerLLDN.c  **** 				{
 647:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 648:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 649:ServerLLDN.c  **** 					msgReq.data = NULL;
 650:ServerLLDN.c  **** 					msgReq.size = 0;
 651:ServerLLDN.c  **** 					
 652:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 653:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 654:ServerLLDN.c  **** 					break;
 655:ServerLLDN.c  **** 				}
 656:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 657:ServerLLDN.c  **** 				{
 658:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 659:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 660:ServerLLDN.c  **** 					 */
 661:ServerLLDN.c  **** 					appPanPrepareACK();
 662:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 663:ServerLLDN.c  **** 					
 664:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL; 
 665:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 666:ServerLLDN.c  **** 					break;
 667:ServerLLDN.c  **** 				}
 668:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 669:ServerLLDN.c  **** 				{
 670:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 671:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 672:ServerLLDN.c  **** 					msgReq.data = NULL;
 673:ServerLLDN.c  **** 					msgReq.size = 0;
 674:ServerLLDN.c  **** 					
 675:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 676:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 677:ServerLLDN.c  **** 					break;
 678:ServerLLDN.c  **** 
 679:ServerLLDN.c  **** 				}
 680:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 681:ServerLLDN.c  **** 				{
 682:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 683:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 684:ServerLLDN.c  **** 					msgReq.data = NULL;
 685:ServerLLDN.c  **** 					msgReq.size = 0;
 686:ServerLLDN.c  **** 					
 687:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 688:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 689:ServerLLDN.c  **** 					break;
 690:ServerLLDN.c  **** 				}
 691:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 692:ServerLLDN.c  **** 				{
 693:ServerLLDN.c  **** 
 694:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 695:ServerLLDN.c  **** 					{
 696:ServerLLDN.c  **** 						CopyToConfigRequest();
 697:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 698:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 699:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 700:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 701:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 702:ServerLLDN.c  **** 						
 703:ServerLLDN.c  **** 						counter_associados++;
 704:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 705:ServerLLDN.c  **** 					}
 706:ServerLLDN.c  **** 					else
 707:ServerLLDN.c  **** 					{
 708:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 709:ServerLLDN.c  **** 					}
 710:ServerLLDN.c  **** 					break;
 711:ServerLLDN.c  **** 				}
 712:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 713:ServerLLDN.c  **** 				{
 714:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 715:ServerLLDN.c  **** 					msgReq.data = NULL;
 716:ServerLLDN.c  **** 					msgReq.size = 0;
 717:ServerLLDN.c  **** 					
 718:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 719:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 720:ServerLLDN.c  **** 					cycles_counter++;	
 721:ServerLLDN.c  **** 					
 722:ServerLLDN.c  **** 					break;
 723:ServerLLDN.c  **** 				}
 724:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 725:ServerLLDN.c  **** 				{
 726:ServerLLDN.c  **** 					appPanOnlineInit();
 727:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 728:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 729:ServerLLDN.c  **** 
 730:ServerLLDN.c  **** 					break;
 731:ServerLLDN.c  **** 				}
 732:ServerLLDN.c  **** 				case APP_PAN_STATE_CHECK_TS:
 733:ServerLLDN.c  **** 				{
 734:ServerLLDN.c  **** 					if(timeslot_counter >= assTimeSlot)
 735:ServerLLDN.c  **** 					{
 736:ServerLLDN.c  **** 						printf("\nFim de um Perodo");
 737:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 738:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 739:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 740:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 741:ServerLLDN.c  **** 					}
 742:ServerLLDN.c  **** 					else
 743:ServerLLDN.c  **** 					{
 744:ServerLLDN.c  **** 						/* check if coordinator received any message in last time slot, used to calculate success rat
 745:ServerLLDN.c  **** 						if(timeslot_counter >= 2*MacLLDNMgmtTS && !data_received)
 746:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 747:ServerLLDN.c  **** 						data_received = false;
 748:ServerLLDN.c  **** 						
 749:ServerLLDN.c  **** 						printf("\n------- slot %d --------", timeslot_counter);
 750:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 751:ServerLLDN.c  **** 						timeslot_counter++;
 752:ServerLLDN.c  **** 					}
 753:ServerLLDN.c  **** 					break;
 754:ServerLLDN.c  **** 				}
 755:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_END_BE:
 756:ServerLLDN.c  **** 				{
 757:ServerLLDN.c  **** 					if(0)
 758:ServerLLDN.c  **** 					{
 759:ServerLLDN.c  **** 						// implementar as condies para entrar no processo de associao
 760:ServerLLDN.c  **** 					}
 761:ServerLLDN.c  **** 					else
 762:ServerLLDN.c  **** 					{
 763:ServerLLDN.c  **** 						// posso calcular esse valor no onlineinit, o tTS precisa ser recalculado, o seu valor muda n
 764:ServerLLDN.c  **** 						// pode voltar pro state_online_initial porque precisa reconfigurar os timers
 765:ServerLLDN.c  **** 						// precisa revisar o macsc_enable_manual_bts()
 766:ServerLLDN.c  **** 						/*
 767:ServerLLDN.c  **** 						int idle_time =  2 * numBaseTimeSlotperMgmt * (tTS) * 5 / (SYMBOL_TIME); // 5 is the total of
 768:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(lldn_server_beacon); // esta funo pode s mandar o beacon do online, 
 769:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 770:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 771:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, idle_time, MACSC_CC1);
 772:ServerLLDN.c  **** 						*/
 773:ServerLLDN.c  **** 					}
 774:ServerLLDN.c  **** 					break;
 775:ServerLLDN.c  **** 				}
 776:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 777:ServerLLDN.c  **** 				{
 778:ServerLLDN.c  **** 					msgReq.options = 0;
 779:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 780:ServerLLDN.c  **** 					break;
 781:ServerLLDN.c  **** 				}
 782:ServerLLDN.c  **** 			}
 783:ServerLLDN.c  **** 			break;	
 784:ServerLLDN.c  **** 		}
 785:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 786:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 787:ServerLLDN.c  **** 		{
 788:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
 789:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 790:ServerLLDN.c  **** 			break;
 791:ServerLLDN.c  **** 		}
 792:ServerLLDN.c  **** 		
 793:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 794:ServerLLDN.c  **** 		{
 795:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 796:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0) {
 797:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 798:ServerLLDN.c  **** 			}
 799:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 800:ServerLLDN.c  **** 			else {
 801:ServerLLDN.c  **** 				#if MASTER_MACSC
 802:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 803:ServerLLDN.c  **** 				#else
 804:ServerLLDN.c  **** 				timer_stop();
 805:ServerLLDN.c  **** 				#endif
 806:ServerLLDN.c  **** 			}
 807:ServerLLDN.c  **** 			ack_received = 0;
 808:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 809:ServerLLDN.c  **** 			break;
 810:ServerLLDN.c  **** 		}
 811:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
 812:ServerLLDN.c  **** 		{
 813:ServerLLDN.c  **** 			appPrepareDataFrame();
 814:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 815:ServerLLDN.c  **** 		}
 816:ServerLLDN.c  **** 		#endif
 817:ServerLLDN.c  **** 		default:
 818:ServerLLDN.c  **** 		{
 819:ServerLLDN.c  **** 			break;
 2453               		.loc 6 819 0
 2454 0d10 00C0      		rjmp .L67
 2455               	.L66:
 582:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2456               		.loc 6 582 0
 2457 0d12 0E94 0000 		call appInit
 584:ServerLLDN.c  **** 			#else
 2458               		.loc 6 584 0
 2459 0d16 83E0      		ldi r24,lo8(3)
 2460 0d18 8093 0000 		sts appState,r24
 588:ServerLLDN.c  **** 		}
 2461               		.loc 6 588 0
 2462 0d1c 00C0      		rjmp .L67
 2463               	.L64:
 592:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2464               		.loc 6 592 0
 2465 0d1e 0E94 0000 		call appSendData
 595:ServerLLDN.c  **** 			#else
 2466               		.loc 6 595 0
 2467 0d22 83E0      		ldi r24,lo8(3)
 2468 0d24 8093 0000 		sts appState,r24
 599:ServerLLDN.c  **** 		}
 2469               		.loc 6 599 0
 2470 0d28 00C0      		rjmp .L67
 2471               	.L65:
 604:ServerLLDN.c  **** 			{
 2472               		.loc 6 604 0
 2473 0d2a 8091 0000 		lds r24,appPanState
 2474 0d2e 882F      		mov r24,r24
 2475 0d30 90E0      		ldi r25,0
 2476 0d32 092E      		mov __tmp_reg__,r25
 2477 0d34 000C      		lsl r0
 2478 0d36 AA0B      		sbc r26,r26
 2479 0d38 BB0B      		sbc r27,r27
 2480 0d3a 40E0      		ldi r20,0
 2481 0d3c 50E0      		ldi r21,0
 2482 0d3e 2BE0      		ldi r18,lo8(11)
 2483 0d40 30E0      		ldi r19,0
 2484 0d42 841B      		sub r24,r20
 2485 0d44 950B      		sbc r25,r21
 2486 0d46 2817      		cp r18,r24
 2487 0d48 3907      		cpc r19,r25
 2488 0d4a 00F4      		brsh .+2
 2489 0d4c 00C0      		rjmp .L90
 2490 0d4e 8050      		subi r24,lo8(-(gs(.L70)))
 2491 0d50 9040      		sbci r25,hi8(-(gs(.L70)))
 2492 0d52 FC01      		movw r30,r24
 2493 0d54 0C94 0000 		jmp __tablejump2__
 2494               		.section	.progmem.gcc_sw_table,"a",@progbits
 2495               		.p2align	1
 2496               	.L70:
 2497 0000 0000      		.word gs(.L69)
 2498 0002 0000      		.word gs(.L71)
 2499 0004 0000      		.word gs(.L72)
 2500 0006 0000      		.word gs(.L73)
 2501 0008 0000      		.word gs(.L74)
 2502 000a 0000      		.word gs(.L75)
 2503 000c 0000      		.word gs(.L76)
 2504 000e 0000      		.word gs(.L77)
 2505 0010 0000      		.word gs(.L78)
 2506 0012 0000      		.word gs(.L79)
 2507 0014 0000      		.word gs(.L91)
 2508 0016 0000      		.word gs(.L81)
 2509               		.text
 2510               	.L71:
 609:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2511               		.loc 6 609 0
 2512 0d58 0E94 0000 		call appPanReset
 610:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 2513               		.loc 6 610 0
 2514 0d5c 82E0      		ldi r24,lo8(2)
 2515 0d5e 8093 0000 		sts appPanState,r24
 611:ServerLLDN.c  **** 					cycles_counter = 0;
 2516               		.loc 6 611 0
 2517 0d62 82E0      		ldi r24,lo8(2)
 2518 0d64 8093 0000 		sts appState,r24
 612:ServerLLDN.c  **** 					break;
 2519               		.loc 6 612 0
 2520 0d68 1092 0000 		sts cycles_counter,__zero_reg__
 613:ServerLLDN.c  **** 				}
 2521               		.loc 6 613 0
 2522 0d6c 00C0      		rjmp .L68
 2523               	.L72:
 622:ServerLLDN.c  **** 					{	
 2524               		.loc 6 622 0
 2525 0d6e 8091 0000 		lds r24,counter_associados
 2526 0d72 9091 0000 		lds r25,counter_associados+1
 2527 0d76 0C97      		sbiw r24,12
 2528 0d78 01F0      		breq .L82
 622:ServerLLDN.c  **** 					{	
 2529               		.loc 6 622 0 is_stmt 0 discriminator 1
 2530 0d7a 8091 0000 		lds r24,cycles_counter
 2531 0d7e 8230      		cpi r24,lo8(2)
 2532 0d80 00F0      		brlo .L83
 2533               	.L82:
 624:ServerLLDN.c  **** 						counter_associados = 0;
 2534               		.loc 6 624 0 is_stmt 1
 2535 0d82 2091 0000 		lds r18,counter_associados
 2536 0d86 3091 0000 		lds r19,counter_associados+1
 2537 0d8a 8091 0000 		lds r24,cycles_counter
 2538 0d8e 882F      		mov r24,r24
 2539 0d90 90E0      		ldi r25,0
 2540 0d92 432F      		mov r20,r19
 2541 0d94 4F93      		push r20
 2542 0d96 2F93      		push r18
 2543 0d98 292F      		mov r18,r25
 2544 0d9a 2F93      		push r18
 2545 0d9c 8F93      		push r24
 2546 0d9e 80E0      		ldi r24,lo8(.LC7)
 2547 0da0 90E0      		ldi r25,hi8(.LC7)
 2548 0da2 892F      		mov r24,r25
 2549 0da4 8F93      		push r24
 2550 0da6 80E0      		ldi r24,lo8(.LC7)
 2551 0da8 90E0      		ldi r25,hi8(.LC7)
 2552 0daa 8F93      		push r24
 2553 0dac 0E94 0000 		call printf
 2554 0db0 0F90      		pop __tmp_reg__
 2555 0db2 0F90      		pop __tmp_reg__
 2556 0db4 0F90      		pop __tmp_reg__
 2557 0db6 0F90      		pop __tmp_reg__
 2558 0db8 0F90      		pop __tmp_reg__
 2559 0dba 0F90      		pop __tmp_reg__
 625:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 2560               		.loc 6 625 0
 2561 0dbc 1092 0000 		sts counter_associados+1,__zero_reg__
 2562 0dc0 1092 0000 		sts counter_associados,__zero_reg__
 628:ServerLLDN.c  **** 						msgReq.options = 0;
 2563               		.loc 6 628 0
 2564 0dc4 82E0      		ldi r24,lo8(2)
 2565 0dc6 0E94 0000 		call macsc_disable_cmp_int
 629:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 2566               		.loc 6 629 0
 2567 0dca 1092 0000 		sts msgReq+9+1,__zero_reg__
 2568 0dce 1092 0000 		sts msgReq+9,__zero_reg__
 631:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 2569               		.loc 6 631 0
 2570 0dd2 81E0      		ldi r24,lo8(1)
 2571 0dd4 8093 0000 		sts appState,r24
 632:ServerLLDN.c  **** 						
 2572               		.loc 6 632 0
 2573 0dd8 89E0      		ldi r24,lo8(9)
 2574 0dda 8093 0000 		sts appPanState,r24
 643:ServerLLDN.c  **** 				}
 2575               		.loc 6 643 0
 2576 0dde 00C0      		rjmp .L68
 2577               	.L83:
 639:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2578               		.loc 6 639 0
 2579 0de0 0E94 0000 		call appPanDiscInit
 640:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 2580               		.loc 6 640 0
 2581 0de4 81E0      		ldi r24,lo8(1)
 2582 0de6 8093 0000 		sts appState,r24
 641:ServerLLDN.c  **** 					}
 2583               		.loc 6 641 0
 2584 0dea 83E0      		ldi r24,lo8(3)
 2585 0dec 8093 0000 		sts appPanState,r24
 643:ServerLLDN.c  **** 				}
 2586               		.loc 6 643 0
 2587 0df0 00C0      		rjmp .L68
 2588               	.L73:
 648:ServerLLDN.c  **** 					msgReq.data = NULL;
 2589               		.loc 6 648 0
 2590 0df2 80E4      		ldi r24,lo8(64)
 2591 0df4 99E0      		ldi r25,lo8(9)
 2592 0df6 9093 0000 		sts msgReq+9+1,r25
 2593 0dfa 8093 0000 		sts msgReq+9,r24
 649:ServerLLDN.c  **** 					msgReq.size = 0;
 2594               		.loc 6 649 0
 2595 0dfe 1092 0000 		sts msgReq+13+1,__zero_reg__
 2596 0e02 1092 0000 		sts msgReq+13,__zero_reg__
 650:ServerLLDN.c  **** 					
 2597               		.loc 6 650 0
 2598 0e06 1092 0000 		sts msgReq+15,__zero_reg__
 652:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 2599               		.loc 6 652 0
 2600 0e0a 84E0      		ldi r24,lo8(4)
 2601 0e0c 8093 0000 		sts appState,r24
 653:ServerLLDN.c  **** 					break;
 2602               		.loc 6 653 0
 2603 0e10 84E0      		ldi r24,lo8(4)
 2604 0e12 8093 0000 		sts appPanState,r24
 654:ServerLLDN.c  **** 				}
 2605               		.loc 6 654 0
 2606 0e16 00C0      		rjmp .L68
 2607               	.L74:
 661:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 2608               		.loc 6 661 0
 2609 0e18 0E94 0000 		call appPanPrepareACK
 662:ServerLLDN.c  **** 					
 2610               		.loc 6 662 0
 2611 0e1c 80E0      		ldi r24,lo8(tmrDelay)
 2612 0e1e 90E0      		ldi r25,hi8(tmrDelay)
 2613 0e20 0E94 0000 		call SYS_TimerStart
 664:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2614               		.loc 6 664 0
 2615 0e24 85E0      		ldi r24,lo8(5)
 2616 0e26 8093 0000 		sts appPanState,r24
 665:ServerLLDN.c  **** 					break;
 2617               		.loc 6 665 0
 2618 0e2a 81E0      		ldi r24,lo8(1)
 2619 0e2c 8093 0000 		sts appState,r24
 666:ServerLLDN.c  **** 				}
 2620               		.loc 6 666 0
 2621 0e30 00C0      		rjmp .L68
 2622               	.L75:
 671:ServerLLDN.c  **** 					msgReq.data = NULL;
 2623               		.loc 6 671 0
 2624 0e32 80E4      		ldi r24,lo8(64)
 2625 0e34 92E0      		ldi r25,lo8(2)
 2626 0e36 9093 0000 		sts msgReq+9+1,r25
 2627 0e3a 8093 0000 		sts msgReq+9,r24
 672:ServerLLDN.c  **** 					msgReq.size = 0;
 2628               		.loc 6 672 0
 2629 0e3e 1092 0000 		sts msgReq+13+1,__zero_reg__
 2630 0e42 1092 0000 		sts msgReq+13,__zero_reg__
 673:ServerLLDN.c  **** 					
 2631               		.loc 6 673 0
 2632 0e46 1092 0000 		sts msgReq+15,__zero_reg__
 675:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 2633               		.loc 6 675 0
 2634 0e4a 81E0      		ldi r24,lo8(1)
 2635 0e4c 8093 0000 		sts appState,r24
 676:ServerLLDN.c  **** 					break;
 2636               		.loc 6 676 0
 2637 0e50 87E0      		ldi r24,lo8(7)
 2638 0e52 8093 0000 		sts appPanState,r24
 677:ServerLLDN.c  **** 
 2639               		.loc 6 677 0
 2640 0e56 00C0      		rjmp .L68
 2641               	.L77:
 683:ServerLLDN.c  **** 					msgReq.data = NULL;
 2642               		.loc 6 683 0
 2643 0e58 80E4      		ldi r24,lo8(64)
 2644 0e5a 9AE0      		ldi r25,lo8(10)
 2645 0e5c 9093 0000 		sts msgReq+9+1,r25
 2646 0e60 8093 0000 		sts msgReq+9,r24
 684:ServerLLDN.c  **** 					msgReq.size = 0;
 2647               		.loc 6 684 0
 2648 0e64 1092 0000 		sts msgReq+13+1,__zero_reg__
 2649 0e68 1092 0000 		sts msgReq+13,__zero_reg__
 685:ServerLLDN.c  **** 					
 2650               		.loc 6 685 0
 2651 0e6c 1092 0000 		sts msgReq+15,__zero_reg__
 687:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2652               		.loc 6 687 0
 2653 0e70 81E0      		ldi r24,lo8(1)
 2654 0e72 8093 0000 		sts appState,r24
 688:ServerLLDN.c  **** 					break;
 2655               		.loc 6 688 0
 2656 0e76 86E0      		ldi r24,lo8(6)
 2657 0e78 8093 0000 		sts appPanState,r24
 689:ServerLLDN.c  **** 				}
 2658               		.loc 6 689 0
 2659 0e7c 00C0      		rjmp .L68
 2660               	.L76:
 694:ServerLLDN.c  **** 					{
 2661               		.loc 6 694 0
 2662 0e7e 8091 0000 		lds r24,conf_req_list
 2663 0e82 9091 0000 		lds r25,conf_req_list+1
 2664 0e86 892B      		or r24,r25
 2665 0e88 01F0      		breq .L85
 696:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 2666               		.loc 6 696 0
 2667 0e8a 0E94 0000 		call CopyToConfigRequest
 697:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 2668               		.loc 6 697 0
 2669 0e8e 80E0      		ldi r24,0
 2670 0e90 90E8      		ldi r25,lo8(-128)
 2671 0e92 9093 0000 		sts msgReq+9+1,r25
 2672 0e96 8093 0000 		sts msgReq+9,r24
 698:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 2673               		.loc 6 698 0
 2674 0e9a 80E0      		ldi r24,lo8(config_request_frame)
 2675 0e9c 90E0      		ldi r25,hi8(config_request_frame)
 2676 0e9e 9093 0000 		sts msgReq+13+1,r25
 2677 0ea2 8093 0000 		sts msgReq+13,r24
 699:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2678               		.loc 6 699 0
 2679 0ea6 86E0      		ldi r24,lo8(6)
 2680 0ea8 8093 0000 		sts msgReq+15,r24
 700:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2681               		.loc 6 700 0
 2682 0eac 81E0      		ldi r24,lo8(1)
 2683 0eae 8093 0000 		sts appState,r24
 701:ServerLLDN.c  **** 						
 2684               		.loc 6 701 0
 2685 0eb2 86E0      		ldi r24,lo8(6)
 2686 0eb4 8093 0000 		sts appPanState,r24
 703:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 2687               		.loc 6 703 0
 2688 0eb8 8091 0000 		lds r24,counter_associados
 2689 0ebc 9091 0000 		lds r25,counter_associados+1
 2690 0ec0 0196      		adiw r24,1
 2691 0ec2 9093 0000 		sts counter_associados+1,r25
 2692 0ec6 8093 0000 		sts counter_associados,r24
 704:ServerLLDN.c  **** 					}
 2693               		.loc 6 704 0
 2694 0eca 80E0      		ldi r24,lo8(tmrDelay)
 2695 0ecc 90E0      		ldi r25,hi8(tmrDelay)
 2696 0ece 0E94 0000 		call SYS_TimerStart
 710:ServerLLDN.c  **** 				}
 2697               		.loc 6 710 0
 2698 0ed2 00C0      		rjmp .L68
 2699               	.L85:
 708:ServerLLDN.c  **** 					}
 2700               		.loc 6 708 0
 2701 0ed4 88E0      		ldi r24,lo8(8)
 2702 0ed6 8093 0000 		sts appPanState,r24
 710:ServerLLDN.c  **** 				}
 2703               		.loc 6 710 0
 2704 0eda 00C0      		rjmp .L68
 2705               	.L78:
 714:ServerLLDN.c  **** 					msgReq.data = NULL;
 2706               		.loc 6 714 0
 2707 0edc 80E4      		ldi r24,lo8(64)
 2708 0ede 92E1      		ldi r25,lo8(18)
 2709 0ee0 9093 0000 		sts msgReq+9+1,r25
 2710 0ee4 8093 0000 		sts msgReq+9,r24
 715:ServerLLDN.c  **** 					msgReq.size = 0;
 2711               		.loc 6 715 0
 2712 0ee8 1092 0000 		sts msgReq+13+1,__zero_reg__
 2713 0eec 1092 0000 		sts msgReq+13,__zero_reg__
 716:ServerLLDN.c  **** 					
 2714               		.loc 6 716 0
 2715 0ef0 1092 0000 		sts msgReq+15,__zero_reg__
 718:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2716               		.loc 6 718 0
 2717 0ef4 81E0      		ldi r24,lo8(1)
 2718 0ef6 8093 0000 		sts appState,r24
 719:ServerLLDN.c  **** 					cycles_counter++;	
 2719               		.loc 6 719 0
 2720 0efa 82E0      		ldi r24,lo8(2)
 2721 0efc 8093 0000 		sts appPanState,r24
 720:ServerLLDN.c  **** 					
 2722               		.loc 6 720 0
 2723 0f00 8091 0000 		lds r24,cycles_counter
 2724 0f04 8F5F      		subi r24,lo8(-(1))
 2725 0f06 8093 0000 		sts cycles_counter,r24
 722:ServerLLDN.c  **** 				}
 2726               		.loc 6 722 0
 2727 0f0a 00C0      		rjmp .L68
 2728               	.L79:
 726:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 2729               		.loc 6 726 0
 2730 0f0c 0E94 0000 		call appPanOnlineInit
 727:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 2731               		.loc 6 727 0
 2732 0f10 82E0      		ldi r24,lo8(2)
 2733 0f12 8093 0000 		sts appState,r24
 728:ServerLLDN.c  **** 
 2734               		.loc 6 728 0
 2735 0f16 8BE0      		ldi r24,lo8(11)
 2736 0f18 8093 0000 		sts appPanState,r24
 730:ServerLLDN.c  **** 				}
 2737               		.loc 6 730 0
 2738 0f1c 00C0      		rjmp .L68
 2739               	.L81:
 734:ServerLLDN.c  **** 					{
 2740               		.loc 6 734 0
 2741 0f1e 8091 0000 		lds r24,timeslot_counter
 2742 0f22 282F      		mov r18,r24
 2743 0f24 30E0      		ldi r19,0
 2744 0f26 8091 0000 		lds r24,assTimeSlot
 2745 0f2a 9091 0000 		lds r25,assTimeSlot+1
 2746 0f2e 2817      		cp r18,r24
 2747 0f30 3907      		cpc r19,r25
 2748 0f32 04F0      		brlt .L87
 736:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 2749               		.loc 6 736 0
 2750 0f34 80E0      		ldi r24,lo8(.LC8)
 2751 0f36 90E0      		ldi r25,hi8(.LC8)
 2752 0f38 892F      		mov r24,r25
 2753 0f3a 8F93      		push r24
 2754 0f3c 80E0      		ldi r24,lo8(.LC8)
 2755 0f3e 90E0      		ldi r25,hi8(.LC8)
 2756 0f40 8F93      		push r24
 2757 0f42 0E94 0000 		call printf
 2758 0f46 0F90      		pop __tmp_reg__
 2759 0f48 0F90      		pop __tmp_reg__
 737:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 2760               		.loc 6 737 0
 2761 0f4a 81E0      		ldi r24,lo8(1)
 2762 0f4c 0E94 0000 		call macsc_disable_cmp_int
 738:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2763               		.loc 6 738 0
 2764 0f50 82E0      		ldi r24,lo8(2)
 2765 0f52 0E94 0000 		call macsc_disable_cmp_int
 739:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 2766               		.loc 6 739 0
 2767 0f56 81E0      		ldi r24,lo8(1)
 2768 0f58 8093 0000 		sts appState,r24
 740:ServerLLDN.c  **** 					}
 2769               		.loc 6 740 0
 2770 0f5c 1092 0000 		sts appPanState,__zero_reg__
 753:ServerLLDN.c  **** 				}
 2771               		.loc 6 753 0
 2772 0f60 00C0      		rjmp .L68
 2773               	.L87:
 745:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 2774               		.loc 6 745 0
 2775 0f62 8091 0000 		lds r24,timeslot_counter
 2776 0f66 8230      		cpi r24,lo8(2)
 2777 0f68 00F0      		brlo .L89
 745:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 2778               		.loc 6 745 0 is_stmt 0 discriminator 1
 2779 0f6a 9091 0000 		lds r25,data_received
 2780 0f6e 81E0      		ldi r24,lo8(1)
 2781 0f70 8927      		eor r24,r25
 2782 0f72 8823      		tst r24
 2783 0f74 01F0      		breq .L89
 746:ServerLLDN.c  **** 						data_received = false;
 2784               		.loc 6 746 0 is_stmt 1
 2785 0f76 8091 0000 		lds r24,timeslot_counter
 2786 0f7a 882F      		mov r24,r24
 2787 0f7c 90E0      		ldi r25,0
 2788 0f7e 0297      		sbiw r24,2
 2789 0f80 46E4      		ldi r20,lo8(70)
 2790 0f82 489F      		mul r20,r24
 2791 0f84 9001      		movw r18,r0
 2792 0f86 499F      		mul r20,r25
 2793 0f88 300D      		add r19,r0
 2794 0f8a 1124      		clr __zero_reg__
 2795 0f8c 2050      		subi r18,lo8(-(nodes_info_arr+67))
 2796 0f8e 3040      		sbci r19,hi8(-(nodes_info_arr+67))
 2797 0f90 F901      		movw r30,r18
 2798 0f92 2081      		ld r18,Z
 2799 0f94 3181      		ldd r19,Z+1
 2800 0f96 2F5F      		subi r18,-1
 2801 0f98 3F4F      		sbci r19,-1
 2802 0f9a 66E4      		ldi r22,lo8(70)
 2803 0f9c 689F      		mul r22,r24
 2804 0f9e A001      		movw r20,r0
 2805 0fa0 699F      		mul r22,r25
 2806 0fa2 500D      		add r21,r0
 2807 0fa4 1124      		clr __zero_reg__
 2808 0fa6 CA01      		movw r24,r20
 2809 0fa8 8050      		subi r24,lo8(-(nodes_info_arr+67))
 2810 0faa 9040      		sbci r25,hi8(-(nodes_info_arr+67))
 2811 0fac FC01      		movw r30,r24
 2812 0fae 3183      		std Z+1,r19
 2813 0fb0 2083      		st Z,r18
 2814               	.L89:
 747:ServerLLDN.c  **** 						
 2815               		.loc 6 747 0
 2816 0fb2 1092 0000 		sts data_received,__zero_reg__
 749:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2817               		.loc 6 749 0
 2818 0fb6 8091 0000 		lds r24,timeslot_counter
 2819 0fba 882F      		mov r24,r24
 2820 0fbc 90E0      		ldi r25,0
 2821 0fbe 292F      		mov r18,r25
 2822 0fc0 2F93      		push r18
 2823 0fc2 8F93      		push r24
 2824 0fc4 80E0      		ldi r24,lo8(.LC9)
 2825 0fc6 90E0      		ldi r25,hi8(.LC9)
 2826 0fc8 892F      		mov r24,r25
 2827 0fca 8F93      		push r24
 2828 0fcc 80E0      		ldi r24,lo8(.LC9)
 2829 0fce 90E0      		ldi r25,hi8(.LC9)
 2830 0fd0 8F93      		push r24
 2831 0fd2 0E94 0000 		call printf
 2832 0fd6 0F90      		pop __tmp_reg__
 2833 0fd8 0F90      		pop __tmp_reg__
 2834 0fda 0F90      		pop __tmp_reg__
 2835 0fdc 0F90      		pop __tmp_reg__
 750:ServerLLDN.c  **** 						timeslot_counter++;
 2836               		.loc 6 750 0
 2837 0fde 81E0      		ldi r24,lo8(1)
 2838 0fe0 8093 0000 		sts appState,r24
 751:ServerLLDN.c  **** 					}
 2839               		.loc 6 751 0
 2840 0fe4 8091 0000 		lds r24,timeslot_counter
 2841 0fe8 8F5F      		subi r24,lo8(-(1))
 2842 0fea 8093 0000 		sts timeslot_counter,r24
 753:ServerLLDN.c  **** 				}
 2843               		.loc 6 753 0
 2844 0fee 00C0      		rjmp .L68
 2845               	.L69:
 778:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2846               		.loc 6 778 0
 2847 0ff0 1092 0000 		sts msgReq+9+1,__zero_reg__
 2848 0ff4 1092 0000 		sts msgReq+9,__zero_reg__
 779:ServerLLDN.c  **** 					break;
 2849               		.loc 6 779 0
 2850 0ff8 81E0      		ldi r24,lo8(1)
 2851 0ffa 8093 0000 		sts appState,r24
 780:ServerLLDN.c  **** 				}
 2852               		.loc 6 780 0
 2853 0ffe 00C0      		rjmp .L68
 2854               	.L91:
 774:ServerLLDN.c  **** 				}
 2855               		.loc 6 774 0
 2856 1000 0000      		nop
 2857               	.L68:
 2858               	.L90:
 783:ServerLLDN.c  **** 		}
 2859               		.loc 6 783 0
 2860 1002 0000      		nop
 2861               	.L67:
 820:ServerLLDN.c  **** 		}
 821:ServerLLDN.c  **** 	}
 822:ServerLLDN.c  **** }
 2862               		.loc 6 822 0
 2863 1004 0000      		nop
 2864               	/* epilogue start */
 2865 1006 DF91      		pop r29
 2866 1008 CF91      		pop r28
 2867 100a 0895      		ret
 2868               		.cfi_endproc
 2869               	.LFE146:
 2871               		.section	.rodata
 2872               	.LC0:
 2873 007b 00        		.byte	0
 2874 007c C2        		.byte	-62
 2875 007d 01        		.byte	1
 2876 007e 00        		.byte	0
 2877 007f 03        		.byte	3
 2878 0080 00        		.byte	0
 2879 0081 00        		.byte	0
 2880               		.text
 2881               	.global	main
 2883               	main:
 2884               	.LFB147:
 823:ServerLLDN.c  **** 
 824:ServerLLDN.c  **** 	/*****************************************************************************
 825:ServerLLDN.c  **** 	*****************************************************************************/
 826:ServerLLDN.c  **** 	int main(void)
 827:ServerLLDN.c  **** 	{
 2885               		.loc 6 827 0
 2886               		.cfi_startproc
 2887 100c 0F93      		push r16
 2888               	.LCFI92:
 2889               		.cfi_def_cfa_offset 3
 2890               		.cfi_offset 16, -2
 2891 100e 1F93      		push r17
 2892               	.LCFI93:
 2893               		.cfi_def_cfa_offset 4
 2894               		.cfi_offset 17, -3
 2895 1010 CF93      		push r28
 2896               	.LCFI94:
 2897               		.cfi_def_cfa_offset 5
 2898               		.cfi_offset 28, -4
 2899 1012 DF93      		push r29
 2900               	.LCFI95:
 2901               		.cfi_def_cfa_offset 6
 2902               		.cfi_offset 29, -5
 2903 1014 CDB7      		in r28,__SP_L__
 2904 1016 DEB7      		in r29,__SP_H__
 2905               	.LCFI96:
 2906               		.cfi_def_cfa_register 28
 2907 1018 2797      		sbiw r28,7
 2908               	.LCFI97:
 2909               		.cfi_def_cfa_offset 13
 2910 101a 0FB6      		in __tmp_reg__,__SREG__
 2911 101c F894      		cli
 2912 101e DEBF      		out __SP_H__,r29
 2913 1020 0FBE      		out __SREG__,__tmp_reg__
 2914 1022 CDBF      		out __SP_L__,r28
 2915               	/* prologue: function */
 2916               	/* frame size = 7 */
 2917               	/* stack size = 11 */
 2918               	.L__stack_usage = 11
 828:ServerLLDN.c  **** 		sysclk_init();
 2919               		.loc 6 828 0
 2920 1024 0E94 0000 		call sysclk_init
 829:ServerLLDN.c  **** 		board_init();
 2921               		.loc 6 829 0
 2922 1028 0E94 0000 		call board_init
 830:ServerLLDN.c  **** 
 831:ServerLLDN.c  **** 		SYS_Init();
 2923               		.loc 6 831 0
 2924 102c 0E94 0000 		call SYS_Init
 832:ServerLLDN.c  **** 		/* Disable CSMA/CA
 833:ServerLLDN.c  **** 		 * Disable auto ACK
 834:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
 835:ServerLLDN.c  **** 		 */
 836:ServerLLDN.c  **** 
 837:ServerLLDN.c  **** 		sm_init();
 2925               		.loc 6 837 0
 2926 1030 0E94 0000 		call sm_init
 838:ServerLLDN.c  **** 
 839:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
 840:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 841:ServerLLDN.c  **** 		irq_initialize_vectors();
 842:ServerLLDN.c  **** 	#endif
 843:ServerLLDN.c  **** 		cpu_irq_enable();
 2927               		.loc 6 843 0
 2928               	/* #APP */
 2929               	 ;  843 "ServerLLDN.c" 1
 2930 1034 7894      		sei
 2931               	 ;  0 "" 2
 844:ServerLLDN.c  **** 
 845:ServerLLDN.c  **** 	#if 1
 846:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 847:ServerLLDN.c  **** 		stdio_usb_init();
 848:ServerLLDN.c  **** 	#else
 849:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 2932               		.loc 6 849 0
 2933               	/* #NOAPP */
 2934 1036 27E0      		ldi r18,lo8(7)
 2935 1038 E0E0      		ldi r30,lo8(.LC0)
 2936 103a F0E0      		ldi r31,hi8(.LC0)
 2937 103c CE01      		movw r24,r28
 2938 103e 0196      		adiw r24,1
 2939 1040 DC01      		movw r26,r24
 2940               		0:
 2941 1042 0190      		ld r0,Z+
 2942 1044 0D92      		st X+,r0
 2943 1046 2A95      		dec r18
 2944 1048 01F4      		brne 0b
 850:ServerLLDN.c  **** 		{
 851:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
 852:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
 853:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
 854:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
 855:ServerLLDN.c  **** 		};
 856:ServerLLDN.c  **** 
 857:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 2945               		.loc 6 857 0
 2946 104a CE01      		movw r24,r28
 2947 104c 0196      		adiw r24,1
 2948 104e BC01      		movw r22,r24
 2949 1050 80EC      		ldi r24,lo8(-64)
 2950 1052 90E0      		ldi r25,0
 2951 1054 0E94 0000 		call stdio_serial_init
 858:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 2952               		.loc 6 858 0
 2953 1058 80EC      		ldi r24,lo8(-64)
 2954 105a 90E0      		ldi r25,0
 2955 105c 0E94 0000 		call usart_double_baud_enable
 859:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 2956               		.loc 6 859 0
 2957 1060 0E94 0000 		call sysclk_get_source_clock_hz
 2958 1064 DC01      		movw r26,r24
 2959 1066 CB01      		movw r24,r22
 2960 1068 8C01      		movw r16,r24
 2961 106a 9D01      		movw r18,r26
 2962 106c 40E0      		ldi r20,0
 2963 106e 52EC      		ldi r21,lo8(-62)
 2964 1070 61E0      		ldi r22,lo8(1)
 2965 1072 70E0      		ldi r23,0
 2966 1074 80EC      		ldi r24,lo8(-64)
 2967 1076 90E0      		ldi r25,0
 2968 1078 0E94 0000 		call usart_set_baudrate_precalculated
 2969               	.L93:
 860:ServerLLDN.c  **** 
 861:ServerLLDN.c  **** 	#endif
 862:ServerLLDN.c  **** 	#endif
 863:ServerLLDN.c  **** 		for(;;)
 864:ServerLLDN.c  **** 		{
 865:ServerLLDN.c  **** 			SYS_TaskHandler();
 2970               		.loc 6 865 0 discriminator 1
 2971 107c 0E94 0000 		call SYS_TaskHandler
 866:ServerLLDN.c  **** 			APP_TaskHandler();
 2972               		.loc 6 866 0 discriminator 1
 2973 1080 0E94 0000 		call APP_TaskHandler
 867:ServerLLDN.c  **** 		}
 2974               		.loc 6 867 0 discriminator 1
 2975 1084 00C0      		rjmp .L93
 2976               		.cfi_endproc
 2977               	.LFE147:
 2979               	.Letext0:
 2980               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 2981               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 2982               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 2983               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 2984               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 2985               		.file 12 "lldn.h"
 2986               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 2987               		.file 14 "config/config.h"
 2988               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:14     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:51     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:88     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:100    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:112    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:123    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:172    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:267    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:311    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:362    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:433    .text:0000019e macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:487    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:492    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:497    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:505    .text:000001d2 appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:567    .data.appPanState:00000000 appPanState
                            *COM*:00000dac nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:574    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:584    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000021 ACKFrame
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:591    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:597    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:603    .bss.macLLDNnumUplinkTS:00000000 macLLDNnumUplinkTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:608    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:614    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:620    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:626    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:632    .data.cycles_counter:00000000 cycles_counter
                            *COM*:00001996 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:639    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:645    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:651    .bss.succes_rate:00000000 succes_rate
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:655    .text:0000021e tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:695    .text:0000023e lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:732    .text:00000258 time_slot_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:796    .text:000002b6 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:836    .text:000002da end_of_online_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:876    .text:000002f6 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1022   .text:000003d4 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1256   .text:00000570 CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1345   .text:000005f2 appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1498   .text:000006cc appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1681   .text:000007f2 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1733   .text:00000838 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:1945   .text:00000980 appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:2133   .text:00000aea appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:2336   .text:00000c7a appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:2421   .text:00000cf0 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMNpjbN.s:2883   .text:0000100c main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
NWK_DataReq
__divsf3
__fixunssfsi
macsc_use_cmp
malloc
free
__floatsisf
__addsf3
__mulsf3
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
