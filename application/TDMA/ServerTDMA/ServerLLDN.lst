   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  91               	baudctrl_1mhz:
  92 0000 3300      		.word	51
  93 0002 1900      		.word	25
  94 0004 0C00      		.word	12
  95 0006 0600      		.word	6
  96 0008 0300      		.word	3
  97 000a 0200      		.word	2
  98 000c 0100      		.word	1
  99 000e FF00      		.word	255
 100               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 103               	baudctrl_8mhz:
 104 0000 A001      		.word	416
 105 0002 CF00      		.word	207
 106 0004 6700      		.word	103
 107 0006 3300      		.word	51
 108 0008 1900      		.word	25
 109 000a 0C00      		.word	12
 110 000c 0700      		.word	7
 111 000e 0800      		.word	8
 112               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 115               	baudctrl_16mhz:
 116 0000 4003      		.word	832
 117 0002 A001      		.word	416
 118 0004 CF00      		.word	207
 119 0006 6700      		.word	103
 120 0008 3300      		.word	51
 121 000a 1900      		.word	25
 122 000c 1000      		.word	16
 123 000e 1000      		.word	16
 124               		.text
 126               	usart_double_baud_enable:
 127               	.LFB101:
 128               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 129               		.loc 2 515 0
 130               		.cfi_startproc
 131 0034 CF93      		push r28
 132               	.LCFI6:
 133               		.cfi_def_cfa_offset 3
 134               		.cfi_offset 28, -2
 135 0036 DF93      		push r29
 136               	.LCFI7:
 137               		.cfi_def_cfa_offset 4
 138               		.cfi_offset 29, -3
 139 0038 00D0      		rcall .
 140               	.LCFI8:
 141               		.cfi_def_cfa_offset 6
 142 003a CDB7      		in r28,__SP_L__
 143 003c DEB7      		in r29,__SP_H__
 144               	.LCFI9:
 145               		.cfi_def_cfa_register 28
 146               	/* prologue: function */
 147               	/* frame size = 2 */
 148               	/* stack size = 4 */
 149               	.L__stack_usage = 4
 150 003e 9A83      		std Y+2,r25
 151 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 152               		.loc 2 516 0
 153 0042 8981      		ldd r24,Y+1
 154 0044 9A81      		ldd r25,Y+2
 155 0046 FC01      		movw r30,r24
 156 0048 8081      		ld r24,Z
 157 004a 282F      		mov r18,r24
 158 004c 2260      		ori r18,lo8(2)
 159 004e 8981      		ldd r24,Y+1
 160 0050 9A81      		ldd r25,Y+2
 161 0052 FC01      		movw r30,r24
 162 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 163               		.loc 2 517 0
 164 0056 0000      		nop
 165               	/* epilogue start */
 166 0058 0F90      		pop __tmp_reg__
 167 005a 0F90      		pop __tmp_reg__
 168 005c DF91      		pop r29
 169 005e CF91      		pop r28
 170 0060 0895      		ret
 171               		.cfi_endproc
 172               	.LFE101:
 175               	usart_serial_init:
 176               	.LFB104:
 177               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 178               		.loc 3 77 0
 179               		.cfi_startproc
 180 0062 CF93      		push r28
 181               	.LCFI10:
 182               		.cfi_def_cfa_offset 3
 183               		.cfi_offset 28, -2
 184 0064 DF93      		push r29
 185               	.LCFI11:
 186               		.cfi_def_cfa_offset 4
 187               		.cfi_offset 29, -3
 188 0066 CDB7      		in r28,__SP_L__
 189 0068 DEB7      		in r29,__SP_H__
 190               	.LCFI12:
 191               		.cfi_def_cfa_register 28
 192 006a 2B97      		sbiw r28,11
 193               	.LCFI13:
 194               		.cfi_def_cfa_offset 15
 195 006c 0FB6      		in __tmp_reg__,__SREG__
 196 006e F894      		cli
 197 0070 DEBF      		out __SP_H__,r29
 198 0072 0FBE      		out __SREG__,__tmp_reg__
 199 0074 CDBF      		out __SP_L__,r28
 200               	/* prologue: function */
 201               	/* frame size = 11 */
 202               	/* stack size = 13 */
 203               	.L__stack_usage = 13
 204 0076 9987      		std Y+9,r25
 205 0078 8887      		std Y+8,r24
 206 007a 7B87      		std Y+11,r23
 207 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 208               		.loc 3 80 0
 209 007e 8A85      		ldd r24,Y+10
 210 0080 9B85      		ldd r25,Y+11
 211 0082 FC01      		movw r30,r24
 212 0084 8481      		ldd r24,Z+4
 213 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 214               		.loc 3 81 0
 215 0088 8A85      		ldd r24,Y+10
 216 008a 9B85      		ldd r25,Y+11
 217 008c FC01      		movw r30,r24
 218 008e 8581      		ldd r24,Z+5
 219 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 220               		.loc 3 82 0
 221 0092 8A85      		ldd r24,Y+10
 222 0094 9B85      		ldd r25,Y+11
 223 0096 FC01      		movw r30,r24
 224 0098 8681      		ldd r24,Z+6
 225 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 226               		.loc 3 83 0
 227 009c 8A85      		ldd r24,Y+10
 228 009e 9B85      		ldd r25,Y+11
 229 00a0 FC01      		movw r30,r24
 230 00a2 8081      		ld r24,Z
 231 00a4 9181      		ldd r25,Z+1
 232 00a6 A281      		ldd r26,Z+2
 233 00a8 B381      		ldd r27,Z+3
 234 00aa 8983      		std Y+1,r24
 235 00ac 9A83      		std Y+2,r25
 236 00ae AB83      		std Y+3,r26
 237 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 238               		.loc 3 85 0
 239 00b2 8885      		ldd r24,Y+8
 240 00b4 9985      		ldd r25,Y+9
 241 00b6 9E01      		movw r18,r28
 242 00b8 2F5F      		subi r18,-1
 243 00ba 3F4F      		sbci r19,-1
 244 00bc B901      		movw r22,r18
 245 00be 0E94 0000 		call usart_init_rs232
 246 00c2 8823      		tst r24
 247 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 248               		.loc 3 86 0
 249 00c6 81E0      		ldi r24,lo8(1)
 250 00c8 00C0      		rjmp .L9
 251               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 252               		.loc 3 88 0
 253 00ca 80E0      		ldi r24,0
 254               	.L9:
 255               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 256               		.loc 3 90 0 discriminator 1
 257 00cc 2B96      		adiw r28,11
 258 00ce 0FB6      		in __tmp_reg__,__SREG__
 259 00d0 F894      		cli
 260 00d2 DEBF      		out __SP_H__,r29
 261 00d4 0FBE      		out __SREG__,__tmp_reg__
 262 00d6 CDBF      		out __SP_L__,r28
 263 00d8 DF91      		pop r29
 264 00da CF91      		pop r28
 265 00dc 0895      		ret
 266               		.cfi_endproc
 267               	.LFE104:
 270               	usart_serial_putchar:
 271               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 272               		.loc 3 100 0
 273               		.cfi_startproc
 274 00de CF93      		push r28
 275               	.LCFI14:
 276               		.cfi_def_cfa_offset 3
 277               		.cfi_offset 28, -2
 278 00e0 DF93      		push r29
 279               	.LCFI15:
 280               		.cfi_def_cfa_offset 4
 281               		.cfi_offset 29, -3
 282 00e2 00D0      		rcall .
 283 00e4 1F92      		push __zero_reg__
 284               	.LCFI16:
 285               		.cfi_def_cfa_offset 7
 286 00e6 CDB7      		in r28,__SP_L__
 287 00e8 DEB7      		in r29,__SP_H__
 288               	.LCFI17:
 289               		.cfi_def_cfa_register 28
 290               	/* prologue: function */
 291               	/* frame size = 3 */
 292               	/* stack size = 5 */
 293               	.L__stack_usage = 5
 294 00ea 9A83      		std Y+2,r25
 295 00ec 8983      		std Y+1,r24
 296 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 297               		.loc 3 101 0
 298 00f0 8981      		ldd r24,Y+1
 299 00f2 9A81      		ldd r25,Y+2
 300 00f4 6B81      		ldd r22,Y+3
 301 00f6 0E94 0000 		call usart_putchar
 302               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 303               		.loc 3 102 0
 304 00fa 0F90      		pop __tmp_reg__
 305 00fc 0F90      		pop __tmp_reg__
 306 00fe 0F90      		pop __tmp_reg__
 307 0100 DF91      		pop r29
 308 0102 CF91      		pop r28
 309 0104 0895      		ret
 310               		.cfi_endproc
 311               	.LFE105:
 314               	usart_serial_getchar:
 315               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 316               		.loc 3 111 0
 317               		.cfi_startproc
 318 0106 CF93      		push r28
 319               	.LCFI18:
 320               		.cfi_def_cfa_offset 3
 321               		.cfi_offset 28, -2
 322 0108 DF93      		push r29
 323               	.LCFI19:
 324               		.cfi_def_cfa_offset 4
 325               		.cfi_offset 29, -3
 326 010a 00D0      		rcall .
 327 010c 00D0      		rcall .
 328               	.LCFI20:
 329               		.cfi_def_cfa_offset 8
 330 010e CDB7      		in r28,__SP_L__
 331 0110 DEB7      		in r29,__SP_H__
 332               	.LCFI21:
 333               		.cfi_def_cfa_register 28
 334               	/* prologue: function */
 335               	/* frame size = 4 */
 336               	/* stack size = 6 */
 337               	.L__stack_usage = 6
 338 0112 9A83      		std Y+2,r25
 339 0114 8983      		std Y+1,r24
 340 0116 7C83      		std Y+4,r23
 341 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 342               		.loc 3 112 0
 343 011a 8981      		ldd r24,Y+1
 344 011c 9A81      		ldd r25,Y+2
 345 011e 0E94 0000 		call usart_getchar
 346 0122 282F      		mov r18,r24
 347 0124 8B81      		ldd r24,Y+3
 348 0126 9C81      		ldd r25,Y+4
 349 0128 FC01      		movw r30,r24
 350 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 351               		.loc 3 113 0
 352 012c 0000      		nop
 353               	/* epilogue start */
 354 012e 0F90      		pop __tmp_reg__
 355 0130 0F90      		pop __tmp_reg__
 356 0132 0F90      		pop __tmp_reg__
 357 0134 0F90      		pop __tmp_reg__
 358 0136 DF91      		pop r29
 359 0138 CF91      		pop r28
 360 013a 0895      		ret
 361               		.cfi_endproc
 362               	.LFE106:
 365               	stdio_serial_init:
 366               	.LFB107:
 367               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 368               		.loc 4 90 0
 369               		.cfi_startproc
 370 013c CF93      		push r28
 371               	.LCFI22:
 372               		.cfi_def_cfa_offset 3
 373               		.cfi_offset 28, -2
 374 013e DF93      		push r29
 375               	.LCFI23:
 376               		.cfi_def_cfa_offset 4
 377               		.cfi_offset 29, -3
 378 0140 00D0      		rcall .
 379 0142 00D0      		rcall .
 380               	.LCFI24:
 381               		.cfi_def_cfa_offset 8
 382 0144 CDB7      		in r28,__SP_L__
 383 0146 DEB7      		in r29,__SP_H__
 384               	.LCFI25:
 385               		.cfi_def_cfa_register 28
 386               	/* prologue: function */
 387               	/* frame size = 4 */
 388               	/* stack size = 6 */
 389               	.L__stack_usage = 6
 390 0148 9A83      		std Y+2,r25
 391 014a 8983      		std Y+1,r24
 392 014c 7C83      		std Y+4,r23
 393 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 394               		.loc 4 91 0
 395 0150 8981      		ldd r24,Y+1
 396 0152 9A81      		ldd r25,Y+2
 397 0154 9093 0000 		sts stdio_base+1,r25
 398 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 399               		.loc 4 92 0
 400 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 401 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 402 0160 9093 0000 		sts ptr_put+1,r25
 403 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 404               		.loc 4 93 0
 405 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 406 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 407 016c 9093 0000 		sts ptr_get+1,r25
 408 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 409               		.loc 4 95 0
 410 0174 2B81      		ldd r18,Y+3
 411 0176 3C81      		ldd r19,Y+4
 412 0178 8981      		ldd r24,Y+1
 413 017a 9A81      		ldd r25,Y+2
 414 017c B901      		movw r22,r18
 415 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 416               		.loc 4 107 0
 417 0182 60E0      		ldi r22,lo8(gs(_read))
 418 0184 70E0      		ldi r23,hi8(gs(_read))
 419 0186 80E0      		ldi r24,lo8(gs(_write))
 420 0188 90E0      		ldi r25,hi8(gs(_write))
 421 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 422               		.loc 4 120 0
 423 018e 0000      		nop
 424               	/* epilogue start */
 425 0190 0F90      		pop __tmp_reg__
 426 0192 0F90      		pop __tmp_reg__
 427 0194 0F90      		pop __tmp_reg__
 428 0196 0F90      		pop __tmp_reg__
 429 0198 DF91      		pop r29
 430 019a CF91      		pop r28
 431 019c 0895      		ret
 432               		.cfi_endproc
 433               	.LFE107:
 436               	macsc_enable_manual_bts:
 437               	.LFB121:
 438               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 439               		.loc 5 444 0
 440               		.cfi_startproc
 441 019e CF93      		push r28
 442               	.LCFI26:
 443               		.cfi_def_cfa_offset 3
 444               		.cfi_offset 28, -2
 445 01a0 DF93      		push r29
 446               	.LCFI27:
 447               		.cfi_def_cfa_offset 4
 448               		.cfi_offset 29, -3
 449 01a2 CDB7      		in r28,__SP_L__
 450 01a4 DEB7      		in r29,__SP_H__
 451               	.LCFI28:
 452               		.cfi_def_cfa_register 28
 453               	/* prologue: function */
 454               	/* frame size = 0 */
 455               	/* stack size = 2 */
 456               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 457               		.loc 5 445 0
 458 01a6 8CED      		ldi r24,lo8(-36)
 459 01a8 90E0      		ldi r25,0
 460 01aa 2CED      		ldi r18,lo8(-36)
 461 01ac 30E0      		ldi r19,0
 462 01ae F901      		movw r30,r18
 463 01b0 2081      		ld r18,Z
 464 01b2 2064      		ori r18,lo8(64)
 465 01b4 FC01      		movw r30,r24
 466 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 467               		.loc 5 446 0
 468 01b8 8CED      		ldi r24,lo8(-36)
 469 01ba 90E0      		ldi r25,0
 470 01bc 2CED      		ldi r18,lo8(-36)
 471 01be 30E0      		ldi r19,0
 472 01c0 F901      		movw r30,r18
 473 01c2 2081      		ld r18,Z
 474 01c4 277F      		andi r18,lo8(-9)
 475 01c6 FC01      		movw r30,r24
 476 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 477               		.loc 5 447 0
 478 01ca 0000      		nop
 479               	/* epilogue start */
 480 01cc DF91      		pop r29
 481 01ce CF91      		pop r28
 482 01d0 0895      		ret
 483               		.cfi_endproc
 484               	.LFE121:
 486               	.global	appState
 487               		.section	.bss.appState,"aw",@nobits
 490               	appState:
 491 0000 00        		.zero	1
 492               		.section	.bss.msgReq,"aw",@nobits
 495               	msgReq:
 496 0000 0000 0000 		.zero	20
 496      0000 0000 
 496      0000 0000 
 496      0000 0000 
 496      0000 0000 
 497               		.section	.bss.PanId,"aw",@nobits
 500               	PanId:
 501 0000 00        		.zero	1
 502               		.section	.rodata
 503               	.LC1:
 504 0000 0A4D 5347 		.string	"\nMSG REQ SENT %d"
 504      2052 4551 
 504      2053 454E 
 504      5420 2564 
 504      00
 505               		.text
 506               	.global	appSendData
 508               	appSendData:
 509               	.LFB130:
 510               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 511               		.loc 6 64 0
 512               		.cfi_startproc
 513 01d2 CF93      		push r28
 514               	.LCFI29:
 515               		.cfi_def_cfa_offset 3
 516               		.cfi_offset 28, -2
 517 01d4 DF93      		push r29
 518               	.LCFI30:
 519               		.cfi_def_cfa_offset 4
 520               		.cfi_offset 29, -3
 521 01d6 CDB7      		in r28,__SP_L__
 522 01d8 DEB7      		in r29,__SP_H__
 523               	.LCFI31:
 524               		.cfi_def_cfa_register 28
 525               	/* prologue: function */
 526               	/* frame size = 0 */
 527               	/* stack size = 2 */
 528               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 529               		.loc 6 65 0
 530 01da 8091 0000 		lds r24,msgReq+9
 531 01de 9091 0000 		lds r25,msgReq+9+1
 532 01e2 892B      		or r24,r25
 533 01e4 01F0      		breq .L17
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		printf("\nMSG REQ SENT %d",msgReq.options);
 534               		.loc 6 67 0
 535 01e6 8091 0000 		lds r24,msgReq+9
 536 01ea 9091 0000 		lds r25,msgReq+9+1
 537 01ee 292F      		mov r18,r25
 538 01f0 2F93      		push r18
 539 01f2 8F93      		push r24
 540 01f4 80E0      		ldi r24,lo8(.LC1)
 541 01f6 90E0      		ldi r25,hi8(.LC1)
 542 01f8 892F      		mov r24,r25
 543 01fa 8F93      		push r24
 544 01fc 80E0      		ldi r24,lo8(.LC1)
 545 01fe 90E0      		ldi r25,hi8(.LC1)
 546 0200 8F93      		push r24
 547 0202 0E94 0000 		call printf
 548 0206 0F90      		pop __tmp_reg__
 549 0208 0F90      		pop __tmp_reg__
 550 020a 0F90      		pop __tmp_reg__
 551 020c 0F90      		pop __tmp_reg__
  68:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 552               		.loc 6 68 0
 553 020e 80E0      		ldi r24,lo8(msgReq)
 554 0210 90E0      		ldi r25,hi8(msgReq)
 555 0212 0E94 0000 		call NWK_DataReq
 556               	.L17:
  69:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  70:ServerLLDN.c  **** 	#endif
  71:ServerLLDN.c  **** 	}
  72:ServerLLDN.c  **** }
 557               		.loc 6 72 0
 558 0216 0000      		nop
 559               	/* epilogue start */
 560 0218 DF91      		pop r29
 561 021a CF91      		pop r28
 562 021c 0895      		ret
 563               		.cfi_endproc
 564               	.LFE130:
 566               	.global	appPanState
 567               		.section	.data.appPanState,"aw",@progbits
 570               	appPanState:
 571 0000 01        		.byte	1
 572               		.comm	nodes_info_arr,3700,1
 573               	.global	config_request_frame
 574               		.section	.data.config_request_frame,"aw",@progbits
 577               	config_request_frame:
 578 0000 0F        		.byte	15
 579 0001 00        		.byte	0
 580 0002 0F        		.byte	15
 581 0003 0000      		.zero	2
 582 0005 80        		.byte	128
 583               	.global	conf_req_list
 584               		.section	.bss.conf_req_list,"aw",@nobits
 587               	conf_req_list:
 588 0000 0000      		.zero	2
 589               		.comm	ACKFrame,33,1
 590               	.global	ACKFrame_size
 591               		.section	.bss.ACKFrame_size,"aw",@nobits
 594               	ACKFrame_size:
 595 0000 0000      		.zero	2
 596               	.global	beaconInterval
 597               		.section	.bss.beaconInterval,"aw",@nobits
 600               	beaconInterval:
 601 0000 0000 0000 		.zero	4
 602               	.global	beaconInterval_association
 603               		.section	.bss.beaconInterval_association,"aw",@nobits
 606               	beaconInterval_association:
 607 0000 0000 0000 		.zero	4
 608               		.section	.bss.tmrDelay,"aw",@nobits
 611               	tmrDelay:
 612 0000 0000 0000 		.zero	13
 612      0000 0000 
 612      0000 0000 
 612      00
 613               	.global	assTimeSlot
 614               		.section	.bss.assTimeSlot,"aw",@nobits
 617               	assTimeSlot:
 618 0000 0000      		.zero	2
 619               	.global	timeslot_counter
 620               		.section	.bss.timeslot_counter,"aw",@nobits
 623               	timeslot_counter:
 624 0000 00        		.zero	1
 625               	.global	counter_associados
 626               		.section	.bss.counter_associados,"aw",@nobits
 629               	counter_associados:
 630 0000 0000      		.zero	2
 631               	.global	cycles_counter
 632               		.section	.data.cycles_counter,"aw",@progbits
 635               	cycles_counter:
 636 0000 01        		.byte	1
 637               	.global	association_request
 638               		.section	.bss.association_request,"aw",@nobits
 641               	association_request:
 642 0000 00        		.zero	1
 643               		.comm	msg_info_array,6600,1
 644               	.global	size_msg_info
 645               		.section	.bss.size_msg_info,"aw",@nobits
 648               	size_msg_info:
 649 0000 0000      		.zero	2
 650               	.global	data_received
 651               		.section	.bss.data_received,"aw",@nobits
 654               	data_received:
 655 0000 00        		.zero	1
 656               	.global	succes_rate
 657               		.section	.bss.succes_rate,"aw",@nobits
 660               	succes_rate:
 661 0000 0000 0000 		.zero	4
 662               	.global	counter_delay_msg
 663               		.section	.bss.counter_delay_msg,"aw",@nobits
 666               	counter_delay_msg:
 667 0000 0000      		.zero	2
 668               		.section	.rodata
 669               	.LC2:
 670 0011 0A64 656C 		.string	"\ndelay handler"
 670      6179 2068 
 670      616E 646C 
 670      6572 00
 671               		.text
 673               	tmrDelayHandler:
 674               	.LFB131:
  73:ServerLLDN.c  **** 
  74:ServerLLDN.c  **** #if APP_COORDINATOR
  75:ServerLLDN.c  **** 
  76:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  77:ServerLLDN.c  **** 	
  78:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  79:ServerLLDN.c  **** 	
  80:ServerLLDN.c  **** 	/* Configuration Request Frames */
  81:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  82:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  83:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  84:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  85:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  86:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  87:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  88:ServerLLDN.c  **** 
  89:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  90:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	// ACK Frame Payload used in Discovery State
  91:ServerLLDN.c  **** 	int ACKFrame_size = 0;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
  94:ServerLLDN.c  **** 	float beaconInterval_association = 0;
  95:ServerLLDN.c  **** 	
  96:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
  97:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
  98:ServerLLDN.c  **** 	 */
  99:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 100:ServerLLDN.c  **** 	
 101:ServerLLDN.c  **** 	/*  Control variables for testing */	
 102:ServerLLDN.c  **** 	int assTimeSlot = 0;
 103:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 104:ServerLLDN.c  **** 
 105:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 106:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 107:ServerLLDN.c  **** 
 108:ServerLLDN.c  **** 	bool association_request = false;
 109:ServerLLDN.c  **** 
 110:ServerLLDN.c  **** 	/* data related variables */
 111:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 112:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 113:ServerLLDN.c  **** 	bool data_received = false;	
 114:ServerLLDN.c  **** 	float succes_rate = 0;
 115:ServerLLDN.c  **** 	
 116:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 117:ServerLLDN.c  **** 	
 118:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 119:ServerLLDN.c  **** 	{
 675               		.loc 6 119 0
 676               		.cfi_startproc
 677 021e CF93      		push r28
 678               	.LCFI32:
 679               		.cfi_def_cfa_offset 3
 680               		.cfi_offset 28, -2
 681 0220 DF93      		push r29
 682               	.LCFI33:
 683               		.cfi_def_cfa_offset 4
 684               		.cfi_offset 29, -3
 685 0222 00D0      		rcall .
 686               	.LCFI34:
 687               		.cfi_def_cfa_offset 6
 688 0224 CDB7      		in r28,__SP_L__
 689 0226 DEB7      		in r29,__SP_H__
 690               	.LCFI35:
 691               		.cfi_def_cfa_register 28
 692               	/* prologue: function */
 693               	/* frame size = 2 */
 694               	/* stack size = 4 */
 695               	.L__stack_usage = 4
 696 0228 9A83      		std Y+2,r25
 697 022a 8983      		std Y+1,r24
 120:ServerLLDN.c  **** 		printf("\ndelay handler");
 698               		.loc 6 120 0
 699 022c 80E0      		ldi r24,lo8(.LC2)
 700 022e 90E0      		ldi r25,hi8(.LC2)
 701 0230 892F      		mov r24,r25
 702 0232 8F93      		push r24
 703 0234 80E0      		ldi r24,lo8(.LC2)
 704 0236 90E0      		ldi r25,hi8(.LC2)
 705 0238 8F93      		push r24
 706 023a 0E94 0000 		call printf
 707 023e 0F90      		pop __tmp_reg__
 708 0240 0F90      		pop __tmp_reg__
 121:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 709               		.loc 6 121 0
 710 0242 82E0      		ldi r24,lo8(2)
 711 0244 8093 0000 		sts appState,r24
 122:ServerLLDN.c  **** 	}
 712               		.loc 6 122 0
 713 0248 0000      		nop
 714               	/* epilogue start */
 715 024a 0F90      		pop __tmp_reg__
 716 024c 0F90      		pop __tmp_reg__
 717 024e DF91      		pop r29
 718 0250 CF91      		pop r28
 719 0252 0895      		ret
 720               		.cfi_endproc
 721               	.LFE131:
 724               	lldn_server_beacon:
 725               	.LFB132:
 123:ServerLLDN.c  **** 	
 124:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 125:ServerLLDN.c  **** 	{
 726               		.loc 6 125 0
 727               		.cfi_startproc
 728 0254 CF93      		push r28
 729               	.LCFI36:
 730               		.cfi_def_cfa_offset 3
 731               		.cfi_offset 28, -2
 732 0256 DF93      		push r29
 733               	.LCFI37:
 734               		.cfi_def_cfa_offset 4
 735               		.cfi_offset 29, -3
 736 0258 CDB7      		in r28,__SP_L__
 737 025a DEB7      		in r29,__SP_H__
 738               	.LCFI38:
 739               		.cfi_def_cfa_register 28
 740               	/* prologue: function */
 741               	/* frame size = 0 */
 742               	/* stack size = 2 */
 743               	.L__stack_usage = 2
 126:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 744               		.loc 6 126 0
 745 025c 0E94 0000 		call macsc_enable_manual_bts
 127:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 746               		.loc 6 127 0
 747 0260 82E0      		ldi r24,lo8(2)
 748 0262 8093 0000 		sts appState,r24
 128:ServerLLDN.c  **** 	}
 749               		.loc 6 128 0
 750 0266 0000      		nop
 751               	/* epilogue start */
 752 0268 DF91      		pop r29
 753 026a CF91      		pop r28
 754 026c 0895      		ret
 755               		.cfi_endproc
 756               	.LFE132:
 758               	.global	__divsf3
 759               	.global	__fixunssfsi
 761               	time_slot_handler:
 762               	.LFB133:
 129:ServerLLDN.c  **** 	
 130:ServerLLDN.c  **** 	static void time_slot_handler(void)
 131:ServerLLDN.c  **** 	{
 763               		.loc 6 131 0
 764               		.cfi_startproc
 765 026e CF93      		push r28
 766               	.LCFI39:
 767               		.cfi_def_cfa_offset 3
 768               		.cfi_offset 28, -2
 769 0270 DF93      		push r29
 770               	.LCFI40:
 771               		.cfi_def_cfa_offset 4
 772               		.cfi_offset 29, -3
 773 0272 CDB7      		in r28,__SP_L__
 774 0274 DEB7      		in r29,__SP_H__
 775               	.LCFI41:
 776               		.cfi_def_cfa_register 28
 777               	/* prologue: function */
 778               	/* frame size = 0 */
 779               	/* stack size = 2 */
 780               	.L__stack_usage = 2
 132:ServerLLDN.c  **** 		if (timeslot_counter > 0)
 781               		.loc 6 132 0
 782 0276 8091 0000 		lds r24,timeslot_counter
 783 027a 8823      		tst r24
 784 027c 01F0      		breq .L21
 133:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 785               		.loc 6 133 0
 786 027e 8091 0000 		lds r24,tTS
 787 0282 9091 0000 		lds r25,tTS+1
 788 0286 A091 0000 		lds r26,tTS+2
 789 028a B091 0000 		lds r27,tTS+3
 790 028e 2DEB      		ldi r18,lo8(-67)
 791 0290 37E3      		ldi r19,lo8(55)
 792 0292 46E8      		ldi r20,lo8(-122)
 793 0294 57E3      		ldi r21,lo8(55)
 794 0296 BC01      		movw r22,r24
 795 0298 CD01      		movw r24,r26
 796 029a 0E94 0000 		call __divsf3
 797 029e DC01      		movw r26,r24
 798 02a0 CB01      		movw r24,r22
 799 02a2 BC01      		movw r22,r24
 800 02a4 CD01      		movw r24,r26
 801 02a6 0E94 0000 		call __fixunssfsi
 802 02aa DC01      		movw r26,r24
 803 02ac CB01      		movw r24,r22
 804 02ae 21E0      		ldi r18,lo8(1)
 805 02b0 AC01      		movw r20,r24
 806 02b2 BD01      		movw r22,r26
 807 02b4 81E0      		ldi r24,lo8(1)
 808 02b6 0E94 0000 		call macsc_use_cmp
 809               	.L21:
 134:ServerLLDN.c  **** 		
 135:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 810               		.loc 6 135 0
 811 02ba 0E94 0000 		call macsc_enable_manual_bts
 136:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 812               		.loc 6 136 0
 813 02be 83E0      		ldi r24,lo8(3)
 814 02c0 8093 0000 		sts appState,r24
 137:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_CHECK_TS;
 815               		.loc 6 137 0
 816 02c4 8CE0      		ldi r24,lo8(12)
 817 02c6 8093 0000 		sts appPanState,r24
 138:ServerLLDN.c  **** 	}
 818               		.loc 6 138 0
 819 02ca 0000      		nop
 820               	/* epilogue start */
 821 02cc DF91      		pop r29
 822 02ce CF91      		pop r28
 823 02d0 0895      		ret
 824               		.cfi_endproc
 825               	.LFE133:
 828               	downlink_delay_handler:
 829               	.LFB134:
 139:ServerLLDN.c  **** 	
 140:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 141:ServerLLDN.c  **** 	{
 830               		.loc 6 141 0
 831               		.cfi_startproc
 832 02d2 CF93      		push r28
 833               	.LCFI42:
 834               		.cfi_def_cfa_offset 3
 835               		.cfi_offset 28, -2
 836 02d4 DF93      		push r29
 837               	.LCFI43:
 838               		.cfi_def_cfa_offset 4
 839               		.cfi_offset 29, -3
 840 02d6 CDB7      		in r28,__SP_L__
 841 02d8 DEB7      		in r29,__SP_H__
 842               	.LCFI44:
 843               		.cfi_def_cfa_register 28
 844               	/* prologue: function */
 845               	/* frame size = 0 */
 846               	/* stack size = 2 */
 847               	.L__stack_usage = 2
 142:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 848               		.loc 6 142 0
 849 02da 8091 0000 		lds r24,msgReq+9
 850 02de 9091 0000 		lds r25,msgReq+9+1
 851 02e2 8115      		cp r24,__zero_reg__
 852 02e4 9048      		sbci r25,-128
 853 02e6 01F4      		brne .L24
 143:ServerLLDN.c  **** 		{
 144:ServerLLDN.c  **** 			counter_delay_msg++;
 854               		.loc 6 144 0
 855 02e8 8091 0000 		lds r24,counter_delay_msg
 856 02ec 9091 0000 		lds r25,counter_delay_msg+1
 857 02f0 0196      		adiw r24,1
 858 02f2 9093 0000 		sts counter_delay_msg+1,r25
 859 02f6 8093 0000 		sts counter_delay_msg,r24
 145:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 860               		.loc 6 145 0
 861 02fa 82E0      		ldi r24,lo8(2)
 862 02fc 8093 0000 		sts appState,r24
 863               	.L24:
 146:ServerLLDN.c  **** 		}
 147:ServerLLDN.c  **** 	}
 864               		.loc 6 147 0
 865 0300 0000      		nop
 866               	/* epilogue start */
 867 0302 DF91      		pop r29
 868 0304 CF91      		pop r28
 869 0306 0895      		ret
 870               		.cfi_endproc
 871               	.LFE134:
 874               	end_of_association_delay_handler:
 875               	.LFB135:
 148:ServerLLDN.c  **** 
 149:ServerLLDN.c  **** 	static void end_of_association_delay_handler(void)
 150:ServerLLDN.c  **** 	{
 876               		.loc 6 150 0
 877               		.cfi_startproc
 878 0308 CF93      		push r28
 879               	.LCFI45:
 880               		.cfi_def_cfa_offset 3
 881               		.cfi_offset 28, -2
 882 030a DF93      		push r29
 883               	.LCFI46:
 884               		.cfi_def_cfa_offset 4
 885               		.cfi_offset 29, -3
 886 030c CDB7      		in r28,__SP_L__
 887 030e DEB7      		in r29,__SP_H__
 888               	.LCFI47:
 889               		.cfi_def_cfa_register 28
 890               	/* prologue: function */
 891               	/* frame size = 0 */
 892               	/* stack size = 2 */
 893               	.L__stack_usage = 2
 151:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 894               		.loc 6 151 0
 895 0310 83E0      		ldi r24,lo8(3)
 896 0312 8093 0000 		sts appState,r24
 152:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 897               		.loc 6 152 0
 898 0316 89E0      		ldi r24,lo8(9)
 899 0318 8093 0000 		sts appPanState,r24
 153:ServerLLDN.c  **** 	}
 900               		.loc 6 153 0
 901 031c 0000      		nop
 902               	/* epilogue start */
 903 031e DF91      		pop r29
 904 0320 CF91      		pop r28
 905 0322 0895      		ret
 906               		.cfi_endproc
 907               	.LFE135:
 910               	addToAckArray:
 911               	.LFB136:
 154:ServerLLDN.c  **** 	
 155:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 156:ServerLLDN.c  **** 	static void teste_handler(void)
 157:ServerLLDN.c  **** 	{
 158:ServerLLDN.c  **** 		if(msgReq.options)
 159:ServerLLDN.c  **** 			printf("\n***TIMESLOT****");
 160:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 161:ServerLLDN.c  **** 	}
 162:ServerLLDN.c  **** 	#endif
 163:ServerLLDN.c  **** 	
 164:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 165:ServerLLDN.c  **** 	{	
 912               		.loc 6 165 0
 913               		.cfi_startproc
 914 0324 CF93      		push r28
 915               	.LCFI48:
 916               		.cfi_def_cfa_offset 3
 917               		.cfi_offset 28, -2
 918 0326 DF93      		push r29
 919               	.LCFI49:
 920               		.cfi_def_cfa_offset 4
 921               		.cfi_offset 29, -3
 922 0328 00D0      		rcall .
 923 032a 00D0      		rcall .
 924 032c 1F92      		push __zero_reg__
 925               	.LCFI50:
 926               		.cfi_def_cfa_offset 9
 927 032e CDB7      		in r28,__SP_L__
 928 0330 DEB7      		in r29,__SP_H__
 929               	.LCFI51:
 930               		.cfi_def_cfa_register 28
 931               	/* prologue: function */
 932               	/* frame size = 5 */
 933               	/* stack size = 7 */
 934               	.L__stack_usage = 7
 935 0332 8D83      		std Y+5,r24
 166:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 936               		.loc 6 166 0
 937 0334 8D81      		ldd r24,Y+5
 938 0336 8695      		lsr r24
 939 0338 8695      		lsr r24
 940 033a 8695      		lsr r24
 941 033c 882F      		mov r24,r24
 942 033e 90E0      		ldi r25,0
 943 0340 9A83      		std Y+2,r25
 944 0342 8983      		std Y+1,r24
 167:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 945               		.loc 6 167 0
 946 0344 8D81      		ldd r24,Y+5
 947 0346 882F      		mov r24,r24
 948 0348 90E0      		ldi r25,0
 949 034a 8770      		andi r24,7
 950 034c 9927      		clr r25
 951 034e 28E0      		ldi r18,lo8(8)
 952 0350 30E0      		ldi r19,0
 953 0352 A901      		movw r20,r18
 954 0354 481B      		sub r20,r24
 955 0356 590B      		sbc r21,r25
 956 0358 CA01      		movw r24,r20
 957 035a 9C83      		std Y+4,r25
 958 035c 8B83      		std Y+3,r24
 168:ServerLLDN.c  **** 		
 169:ServerLLDN.c  **** // 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 170:ServerLLDN.c  **** // 		{
 171:ServerLLDN.c  **** // 			printf("\nAddr rep %d", addres);
 172:ServerLLDN.c  **** // 			return false;
 173:ServerLLDN.c  **** // 		}
 174:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 959               		.loc 6 174 0
 960 035e 8981      		ldd r24,Y+1
 961 0360 9A81      		ldd r25,Y+2
 962 0362 8050      		subi r24,lo8(-(ACKFrame+1))
 963 0364 9040      		sbci r25,hi8(-(ACKFrame+1))
 964 0366 FC01      		movw r30,r24
 965 0368 8081      		ld r24,Z
 966 036a 282F      		mov r18,r24
 967 036c 81E0      		ldi r24,lo8(1)
 968 036e 90E0      		ldi r25,0
 969 0370 0B80      		ldd r0,Y+3
 970 0372 00C0      		rjmp 2f
 971               		1:
 972 0374 880F      		lsl r24
 973 0376 991F      		rol r25
 974               		2:
 975 0378 0A94      		dec r0
 976 037a 02F4      		brpl 1b
 977 037c 822B      		or r24,r18
 978 037e 282F      		mov r18,r24
 979 0380 8981      		ldd r24,Y+1
 980 0382 9A81      		ldd r25,Y+2
 981 0384 8050      		subi r24,lo8(-(ACKFrame+1))
 982 0386 9040      		sbci r25,hi8(-(ACKFrame+1))
 983 0388 FC01      		movw r30,r24
 984 038a 2083      		st Z,r18
 175:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 985               		.loc 6 175 0
 986 038c 8981      		ldd r24,Y+1
 987 038e 9A81      		ldd r25,Y+2
 988 0390 9C01      		movw r18,r24
 989 0392 2F5F      		subi r18,-1
 990 0394 3F4F      		sbci r19,-1
 991 0396 8091 0000 		lds r24,ACKFrame_size
 992 039a 9091 0000 		lds r25,ACKFrame_size+1
 993 039e 8217      		cp r24,r18
 994 03a0 9307      		cpc r25,r19
 995 03a2 04F4      		brge .L27
 176:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 996               		.loc 6 176 0
 997 03a4 8981      		ldd r24,Y+1
 998 03a6 9A81      		ldd r25,Y+2
 999 03a8 0196      		adiw r24,1
 1000 03aa 9093 0000 		sts ACKFrame_size+1,r25
 1001 03ae 8093 0000 		sts ACKFrame_size,r24
 1002               	.L27:
 177:ServerLLDN.c  **** 		
 178:ServerLLDN.c  **** 		return true;
 1003               		.loc 6 178 0
 1004 03b2 81E0      		ldi r24,lo8(1)
 1005               	/* epilogue start */
 179:ServerLLDN.c  **** 	}
 1006               		.loc 6 179 0
 1007 03b4 0F90      		pop __tmp_reg__
 1008 03b6 0F90      		pop __tmp_reg__
 1009 03b8 0F90      		pop __tmp_reg__
 1010 03ba 0F90      		pop __tmp_reg__
 1011 03bc 0F90      		pop __tmp_reg__
 1012 03be DF91      		pop r29
 1013 03c0 CF91      		pop r28
 1014 03c2 0895      		ret
 1015               		.cfi_endproc
 1016               	.LFE136:
 1019               	addConfRequestArray:
 1020               	.LFB137:
 180:ServerLLDN.c  **** 
 181:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 182:ServerLLDN.c  **** 	{
 1021               		.loc 6 182 0
 1022               		.cfi_startproc
 1023 03c4 CF93      		push r28
 1024               	.LCFI52:
 1025               		.cfi_def_cfa_offset 3
 1026               		.cfi_offset 28, -2
 1027 03c6 DF93      		push r29
 1028               	.LCFI53:
 1029               		.cfi_def_cfa_offset 4
 1030               		.cfi_offset 29, -3
 1031 03c8 00D0      		rcall .
 1032 03ca 00D0      		rcall .
 1033 03cc 1F92      		push __zero_reg__
 1034               	.LCFI54:
 1035               		.cfi_def_cfa_offset 9
 1036 03ce CDB7      		in r28,__SP_L__
 1037 03d0 DEB7      		in r29,__SP_H__
 1038               	.LCFI55:
 1039               		.cfi_def_cfa_register 28
 1040               	/* prologue: function */
 1041               	/* frame size = 5 */
 1042               	/* stack size = 7 */
 1043               	.L__stack_usage = 7
 1044 03d2 9D83      		std Y+5,r25
 1045 03d4 8C83      		std Y+4,r24
 183:ServerLLDN.c  **** 
 184:ServerLLDN.c  **** 		uint8_t i;
 185:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1046               		.loc 6 185 0
 1047 03d6 1982      		std Y+1,__zero_reg__
 1048 03d8 00C0      		rjmp .L30
 1049               	.L31:
 1050               		.loc 6 185 0 is_stmt 0 discriminator 3
 1051 03da 8981      		ldd r24,Y+1
 1052 03dc 8F5F      		subi r24,lo8(-(1))
 1053 03de 8983      		std Y+1,r24
 1054               	.L30:
 1055               		.loc 6 185 0 discriminator 1
 1056 03e0 8981      		ldd r24,Y+1
 1057 03e2 282F      		mov r18,r24
 1058 03e4 30E0      		ldi r19,0
 1059 03e6 4AE4      		ldi r20,lo8(74)
 1060 03e8 429F      		mul r20,r18
 1061 03ea C001      		movw r24,r0
 1062 03ec 439F      		mul r20,r19
 1063 03ee 900D      		add r25,r0
 1064 03f0 1124      		clr __zero_reg__
 1065 03f2 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1066 03f4 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1067 03f6 FC01      		movw r30,r24
 1068 03f8 8081      		ld r24,Z
 1069 03fa 9181      		ldd r25,Z+1
 1070 03fc 892B      		or r24,r25
 1071 03fe 01F4      		brne .L31
 186:ServerLLDN.c  **** 		
 187:ServerLLDN.c  **** 		assTimeSlot++;
 1072               		.loc 6 187 0 is_stmt 1
 1073 0400 8091 0000 		lds r24,assTimeSlot
 1074 0404 9091 0000 		lds r25,assTimeSlot+1
 1075 0408 0196      		adiw r24,1
 1076 040a 9093 0000 		sts assTimeSlot+1,r25
 1077 040e 8093 0000 		sts assTimeSlot,r24
 188:ServerLLDN.c  **** 	
 189:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1078               		.loc 6 189 0
 1079 0412 8C81      		ldd r24,Y+4
 1080 0414 9D81      		ldd r25,Y+5
 1081 0416 FC01      		movw r30,r24
 1082 0418 8481      		ldd r24,Z+4
 1083 041a 8F77      		andi r24,lo8(127)
 1084 041c 282F      		mov r18,r24
 1085 041e 30E0      		ldi r19,0
 1086 0420 8091 0000 		lds r24,config_request_frame+5
 1087 0424 8F77      		andi r24,lo8(127)
 1088 0426 882F      		mov r24,r24
 1089 0428 90E0      		ldi r25,0
 1090 042a 8217      		cp r24,r18
 1091 042c 9307      		cpc r25,r19
 1092 042e 04F4      		brge .L32
 190:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1093               		.loc 6 190 0
 1094 0430 8C81      		ldd r24,Y+4
 1095 0432 9D81      		ldd r25,Y+5
 1096 0434 FC01      		movw r30,r24
 1097 0436 8481      		ldd r24,Z+4
 1098 0438 8F77      		andi r24,lo8(127)
 1099 043a 8F77      		andi r24,lo8(127)
 1100 043c 9091 0000 		lds r25,config_request_frame+5
 1101 0440 9078      		andi r25,lo8(-128)
 1102 0442 892B      		or r24,r25
 1103 0444 8093 0000 		sts config_request_frame+5,r24
 1104               	.L32:
 191:ServerLLDN.c  **** 		
 192:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1105               		.loc 6 192 0
 1106 0448 8981      		ldd r24,Y+1
 1107 044a 282F      		mov r18,r24
 1108 044c 30E0      		ldi r19,0
 1109 044e 8C81      		ldd r24,Y+4
 1110 0450 9D81      		ldd r25,Y+5
 1111 0452 FC01      		movw r30,r24
 1112 0454 8481      		ldd r24,Z+4
 1113 0456 8F77      		andi r24,lo8(127)
 1114 0458 582F      		mov r21,r24
 1115 045a 4AE4      		ldi r20,lo8(74)
 1116 045c 429F      		mul r20,r18
 1117 045e C001      		movw r24,r0
 1118 0460 439F      		mul r20,r19
 1119 0462 900D      		add r25,r0
 1120 0464 1124      		clr __zero_reg__
 1121 0466 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1122 0468 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1123 046a FC01      		movw r30,r24
 1124 046c 5083      		st Z,r21
 193:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1125               		.loc 6 193 0
 1126 046e 8981      		ldd r24,Y+1
 1127 0470 482F      		mov r20,r24
 1128 0472 50E0      		ldi r21,0
 1129 0474 8C81      		ldd r24,Y+4
 1130 0476 9D81      		ldd r25,Y+5
 1131 0478 FC01      		movw r30,r24
 1132 047a 8381      		ldd r24,Z+3
 1133 047c 282F      		mov r18,r24
 1134 047e 30E0      		ldi r19,0
 1135 0480 6AE4      		ldi r22,lo8(74)
 1136 0482 649F      		mul r22,r20
 1137 0484 C001      		movw r24,r0
 1138 0486 659F      		mul r22,r21
 1139 0488 900D      		add r25,r0
 1140 048a 1124      		clr __zero_reg__
 1141 048c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1142 048e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1143 0490 FC01      		movw r30,r24
 1144 0492 3183      		std Z+1,r19
 1145 0494 2083      		st Z,r18
 194:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1146               		.loc 6 194 0
 1147 0496 8981      		ldd r24,Y+1
 1148 0498 282F      		mov r18,r24
 1149 049a 30E0      		ldi r19,0
 1150 049c 4AE4      		ldi r20,lo8(74)
 1151 049e 429F      		mul r20,r18
 1152 04a0 C001      		movw r24,r0
 1153 04a2 439F      		mul r20,r19
 1154 04a4 900D      		add r25,r0
 1155 04a6 1124      		clr __zero_reg__
 1156 04a8 8050      		subi r24,lo8(-(nodes_info_arr))
 1157 04aa 9040      		sbci r25,hi8(-(nodes_info_arr))
 1158 04ac 2981      		ldd r18,Y+1
 1159 04ae FC01      		movw r30,r24
 1160 04b0 2083      		st Z,r18
 195:ServerLLDN.c  **** 		
 196:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1161               		.loc 6 196 0
 1162 04b2 8091 0000 		lds r24,conf_req_list
 1163 04b6 9091 0000 		lds r25,conf_req_list+1
 1164 04ba 892B      		or r24,r25
 1165 04bc 01F0      		breq .L33
 1166               	.LBB2:
 197:ServerLLDN.c  **** 		{
 198:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1167               		.loc 6 198 0
 1168 04be 84E0      		ldi r24,lo8(4)
 1169 04c0 90E0      		ldi r25,0
 1170 04c2 0E94 0000 		call malloc
 1171 04c6 9B83      		std Y+3,r25
 1172 04c8 8A83      		std Y+2,r24
 199:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1173               		.loc 6 199 0
 1174 04ca 8981      		ldd r24,Y+1
 1175 04cc 282F      		mov r18,r24
 1176 04ce 30E0      		ldi r19,0
 1177 04d0 4AE4      		ldi r20,lo8(74)
 1178 04d2 429F      		mul r20,r18
 1179 04d4 C001      		movw r24,r0
 1180 04d6 439F      		mul r20,r19
 1181 04d8 900D      		add r25,r0
 1182 04da 1124      		clr __zero_reg__
 1183 04dc 9C01      		movw r18,r24
 1184 04de 2050      		subi r18,lo8(-(nodes_info_arr))
 1185 04e0 3040      		sbci r19,hi8(-(nodes_info_arr))
 1186 04e2 8A81      		ldd r24,Y+2
 1187 04e4 9B81      		ldd r25,Y+3
 1188 04e6 FC01      		movw r30,r24
 1189 04e8 3183      		std Z+1,r19
 1190 04ea 2083      		st Z,r18
 200:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1191               		.loc 6 200 0
 1192 04ec 2091 0000 		lds r18,conf_req_list
 1193 04f0 3091 0000 		lds r19,conf_req_list+1
 1194 04f4 8A81      		ldd r24,Y+2
 1195 04f6 9B81      		ldd r25,Y+3
 1196 04f8 FC01      		movw r30,r24
 1197 04fa 3383      		std Z+3,r19
 1198 04fc 2283      		std Z+2,r18
 201:ServerLLDN.c  **** 			conf_req_list = tmp;
 1199               		.loc 6 201 0
 1200 04fe 8A81      		ldd r24,Y+2
 1201 0500 9B81      		ldd r25,Y+3
 1202 0502 9093 0000 		sts conf_req_list+1,r25
 1203 0506 8093 0000 		sts conf_req_list,r24
 1204               	.LBE2:
 202:ServerLLDN.c  **** 		}
 203:ServerLLDN.c  **** 		else
 204:ServerLLDN.c  **** 		{
 205:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 206:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 207:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 208:ServerLLDN.c  **** 		}
 209:ServerLLDN.c  **** 	}
 1205               		.loc 6 209 0
 1206 050a 00C0      		rjmp .L35
 1207               	.L33:
 205:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1208               		.loc 6 205 0
 1209 050c 84E0      		ldi r24,lo8(4)
 1210 050e 90E0      		ldi r25,0
 1211 0510 0E94 0000 		call malloc
 1212 0514 9093 0000 		sts conf_req_list+1,r25
 1213 0518 8093 0000 		sts conf_req_list,r24
 206:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1214               		.loc 6 206 0
 1215 051c 8091 0000 		lds r24,conf_req_list
 1216 0520 9091 0000 		lds r25,conf_req_list+1
 1217 0524 2981      		ldd r18,Y+1
 1218 0526 422F      		mov r20,r18
 1219 0528 50E0      		ldi r21,0
 1220 052a 6AE4      		ldi r22,lo8(74)
 1221 052c 649F      		mul r22,r20
 1222 052e 9001      		movw r18,r0
 1223 0530 659F      		mul r22,r21
 1224 0532 300D      		add r19,r0
 1225 0534 1124      		clr __zero_reg__
 1226 0536 2050      		subi r18,lo8(-(nodes_info_arr))
 1227 0538 3040      		sbci r19,hi8(-(nodes_info_arr))
 1228 053a FC01      		movw r30,r24
 1229 053c 3183      		std Z+1,r19
 1230 053e 2083      		st Z,r18
 207:ServerLLDN.c  **** 		}
 1231               		.loc 6 207 0
 1232 0540 8091 0000 		lds r24,conf_req_list
 1233 0544 9091 0000 		lds r25,conf_req_list+1
 1234 0548 FC01      		movw r30,r24
 1235 054a 1382      		std Z+3,__zero_reg__
 1236 054c 1282      		std Z+2,__zero_reg__
 1237               	.L35:
 1238               		.loc 6 209 0
 1239 054e 0000      		nop
 1240               	/* epilogue start */
 1241 0550 0F90      		pop __tmp_reg__
 1242 0552 0F90      		pop __tmp_reg__
 1243 0554 0F90      		pop __tmp_reg__
 1244 0556 0F90      		pop __tmp_reg__
 1245 0558 0F90      		pop __tmp_reg__
 1246 055a DF91      		pop r29
 1247 055c CF91      		pop r28
 1248 055e 0895      		ret
 1249               		.cfi_endproc
 1250               	.LFE137:
 1253               	CopyToConfigRequest:
 1254               	.LFB138:
 210:ServerLLDN.c  **** 
 211:ServerLLDN.c  **** 	static void CopyToConfigRequest()
 212:ServerLLDN.c  **** 	{
 1255               		.loc 6 212 0
 1256               		.cfi_startproc
 1257 0560 CF93      		push r28
 1258               	.LCFI56:
 1259               		.cfi_def_cfa_offset 3
 1260               		.cfi_offset 28, -2
 1261 0562 DF93      		push r29
 1262               	.LCFI57:
 1263               		.cfi_def_cfa_offset 4
 1264               		.cfi_offset 29, -3
 1265 0564 00D0      		rcall .
 1266               	.LCFI58:
 1267               		.cfi_def_cfa_offset 6
 1268 0566 CDB7      		in r28,__SP_L__
 1269 0568 DEB7      		in r29,__SP_H__
 1270               	.LCFI59:
 1271               		.cfi_def_cfa_register 28
 1272               	/* prologue: function */
 1273               	/* frame size = 2 */
 1274               	/* stack size = 4 */
 1275               	.L__stack_usage = 4
 213:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1276               		.loc 6 213 0
 1277 056a 8091 0000 		lds r24,conf_req_list
 1278 056e 9091 0000 		lds r25,conf_req_list+1
 1279 0572 FC01      		movw r30,r24
 1280 0574 8081      		ld r24,Z
 1281 0576 9181      		ldd r25,Z+1
 1282 0578 FC01      		movw r30,r24
 1283 057a 8081      		ld r24,Z
 1284 057c 8093 0000 		sts config_request_frame+3,r24
 214:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1285               		.loc 6 214 0
 1286 0580 8091 0000 		lds r24,conf_req_list
 1287 0584 9091 0000 		lds r25,conf_req_list+1
 1288 0588 FC01      		movw r30,r24
 1289 058a 8081      		ld r24,Z
 1290 058c 9181      		ldd r25,Z+1
 1291 058e FC01      		movw r30,r24
 1292 0590 8181      		ldd r24,Z+1
 1293 0592 9281      		ldd r25,Z+2
 1294 0594 8093 0000 		sts config_request_frame+4,r24
 215:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1295               		.loc 6 215 0
 1296 0598 8091 0000 		lds r24,conf_req_list
 1297 059c 9091 0000 		lds r25,conf_req_list+1
 1298 05a0 9A83      		std Y+2,r25
 1299 05a2 8983      		std Y+1,r24
 216:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1300               		.loc 6 216 0
 1301 05a4 8091 0000 		lds r24,conf_req_list
 1302 05a8 9091 0000 		lds r25,conf_req_list+1
 1303 05ac FC01      		movw r30,r24
 1304 05ae 8281      		ldd r24,Z+2
 1305 05b0 9381      		ldd r25,Z+3
 1306 05b2 9093 0000 		sts conf_req_list+1,r25
 1307 05b6 8093 0000 		sts conf_req_list,r24
 217:ServerLLDN.c  **** 		tmp->node = NULL;
 1308               		.loc 6 217 0
 1309 05ba 8981      		ldd r24,Y+1
 1310 05bc 9A81      		ldd r25,Y+2
 1311 05be FC01      		movw r30,r24
 1312 05c0 1182      		std Z+1,__zero_reg__
 1313 05c2 1082      		st Z,__zero_reg__
 218:ServerLLDN.c  **** 		tmp->next = NULL;
 1314               		.loc 6 218 0
 1315 05c4 8981      		ldd r24,Y+1
 1316 05c6 9A81      		ldd r25,Y+2
 1317 05c8 FC01      		movw r30,r24
 1318 05ca 1382      		std Z+3,__zero_reg__
 1319 05cc 1282      		std Z+2,__zero_reg__
 219:ServerLLDN.c  **** 		free(tmp);
 1320               		.loc 6 219 0
 1321 05ce 8981      		ldd r24,Y+1
 1322 05d0 9A81      		ldd r25,Y+2
 1323 05d2 0E94 0000 		call free
 220:ServerLLDN.c  **** 	}
 1324               		.loc 6 220 0
 1325 05d6 0000      		nop
 1326               	/* epilogue start */
 1327 05d8 0F90      		pop __tmp_reg__
 1328 05da 0F90      		pop __tmp_reg__
 1329 05dc DF91      		pop r29
 1330 05de CF91      		pop r28
 1331 05e0 0895      		ret
 1332               		.cfi_endproc
 1333               	.LFE138:
 1335               		.section	.rodata
 1336               	.LC3:
 1337 0020 0A44 4953 		.string	"\nDISC %hhx"
 1337      4320 2568 
 1337      6878 00
 1338               	.LC4:
 1339 002b 0A43 4F4E 		.string	"\nCONF %d"
 1339      4620 2564 
 1339      00
 1340               		.text
 1342               	appCommandInd:
 1343               	.LFB139:
 221:ServerLLDN.c  **** 
 222:ServerLLDN.c  **** 
 223:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 224:ServerLLDN.c  **** 	{
 1344               		.loc 6 224 0
 1345               		.cfi_startproc
 1346 05e2 CF93      		push r28
 1347               	.LCFI60:
 1348               		.cfi_def_cfa_offset 3
 1349               		.cfi_offset 28, -2
 1350 05e4 DF93      		push r29
 1351               	.LCFI61:
 1352               		.cfi_def_cfa_offset 4
 1353               		.cfi_offset 29, -3
 1354 05e6 00D0      		rcall .
 1355 05e8 00D0      		rcall .
 1356 05ea 00D0      		rcall .
 1357               	.LCFI62:
 1358               		.cfi_def_cfa_offset 10
 1359 05ec CDB7      		in r28,__SP_L__
 1360 05ee DEB7      		in r29,__SP_H__
 1361               	.LCFI63:
 1362               		.cfi_def_cfa_register 28
 1363               	/* prologue: function */
 1364               	/* frame size = 6 */
 1365               	/* stack size = 8 */
 1366               	.L__stack_usage = 8
 1367 05f0 9E83      		std Y+6,r25
 1368 05f2 8D83      		std Y+5,r24
 225:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1369               		.loc 6 225 0
 1370 05f4 8D81      		ldd r24,Y+5
 1371 05f6 9E81      		ldd r25,Y+6
 1372 05f8 FC01      		movw r30,r24
 1373 05fa 8085      		ldd r24,Z+8
 1374 05fc 9185      		ldd r25,Z+9
 1375 05fe FC01      		movw r30,r24
 1376 0600 8081      		ld r24,Z
 1377 0602 8D30      		cpi r24,lo8(13)
 1378 0604 01F4      		brne .L38
 1379               	.LBB3:
 226:ServerLLDN.c  **** 		{
 227:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1380               		.loc 6 227 0
 1381 0606 8D81      		ldd r24,Y+5
 1382 0608 9E81      		ldd r25,Y+6
 1383 060a FC01      		movw r30,r24
 1384 060c 8085      		ldd r24,Z+8
 1385 060e 9185      		ldd r25,Z+9
 1386 0610 9C83      		std Y+4,r25
 1387 0612 8B83      		std Y+3,r24
 228:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1388               		.loc 6 228 0
 1389 0614 8B81      		ldd r24,Y+3
 1390 0616 9C81      		ldd r25,Y+4
 1391 0618 FC01      		movw r30,r24
 1392 061a 8181      		ldd r24,Z+1
 1393 061c 0E94 0000 		call addToAckArray
 229:ServerLLDN.c  **** 					
 230:ServerLLDN.c  **** 			#if PRINT
 231:ServerLLDN.c  **** 			printf("\nDISC %hhx", msg->macAddr);	
 1394               		.loc 6 231 0
 1395 0620 8B81      		ldd r24,Y+3
 1396 0622 9C81      		ldd r25,Y+4
 1397 0624 FC01      		movw r30,r24
 1398 0626 8181      		ldd r24,Z+1
 1399 0628 882F      		mov r24,r24
 1400 062a 90E0      		ldi r25,0
 1401 062c 292F      		mov r18,r25
 1402 062e 2F93      		push r18
 1403 0630 8F93      		push r24
 1404 0632 80E0      		ldi r24,lo8(.LC3)
 1405 0634 90E0      		ldi r25,hi8(.LC3)
 1406 0636 892F      		mov r24,r25
 1407 0638 8F93      		push r24
 1408 063a 80E0      		ldi r24,lo8(.LC3)
 1409 063c 90E0      		ldi r25,hi8(.LC3)
 1410 063e 8F93      		push r24
 1411 0640 0E94 0000 		call printf
 1412 0644 0F90      		pop __tmp_reg__
 1413 0646 0F90      		pop __tmp_reg__
 1414 0648 0F90      		pop __tmp_reg__
 1415 064a 0F90      		pop __tmp_reg__
 1416               	.LBE3:
 1417 064c 00C0      		rjmp .L39
 1418               	.L38:
 232:ServerLLDN.c  **** 			#endif
 233:ServerLLDN.c  **** 		}
 234:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1419               		.loc 6 234 0
 1420 064e 8D81      		ldd r24,Y+5
 1421 0650 9E81      		ldd r25,Y+6
 1422 0652 FC01      		movw r30,r24
 1423 0654 8085      		ldd r24,Z+8
 1424 0656 9185      		ldd r25,Z+9
 1425 0658 FC01      		movw r30,r24
 1426 065a 8081      		ld r24,Z
 1427 065c 8E30      		cpi r24,lo8(14)
 1428 065e 01F4      		brne .L40
 1429               	.LBB4:
 235:ServerLLDN.c  **** 		{
 236:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1430               		.loc 6 236 0
 1431 0660 8D81      		ldd r24,Y+5
 1432 0662 9E81      		ldd r25,Y+6
 1433 0664 FC01      		movw r30,r24
 1434 0666 8085      		ldd r24,Z+8
 1435 0668 9185      		ldd r25,Z+9
 1436 066a 9A83      		std Y+2,r25
 1437 066c 8983      		std Y+1,r24
 237:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1438               		.loc 6 237 0
 1439 066e 8981      		ldd r24,Y+1
 1440 0670 9A81      		ldd r25,Y+2
 1441 0672 0E94 0000 		call addConfRequestArray
 238:ServerLLDN.c  **** 			#if PRINT
 239:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 1442               		.loc 6 239 0
 1443 0676 8981      		ldd r24,Y+1
 1444 0678 9A81      		ldd r25,Y+2
 1445 067a FC01      		movw r30,r24
 1446 067c 8381      		ldd r24,Z+3
 1447 067e 882F      		mov r24,r24
 1448 0680 90E0      		ldi r25,0
 1449 0682 292F      		mov r18,r25
 1450 0684 2F93      		push r18
 1451 0686 8F93      		push r24
 1452 0688 80E0      		ldi r24,lo8(.LC4)
 1453 068a 90E0      		ldi r25,hi8(.LC4)
 1454 068c 892F      		mov r24,r25
 1455 068e 8F93      		push r24
 1456 0690 80E0      		ldi r24,lo8(.LC4)
 1457 0692 90E0      		ldi r25,hi8(.LC4)
 1458 0694 8F93      		push r24
 1459 0696 0E94 0000 		call printf
 1460 069a 0F90      		pop __tmp_reg__
 1461 069c 0F90      		pop __tmp_reg__
 1462 069e 0F90      		pop __tmp_reg__
 1463 06a0 0F90      		pop __tmp_reg__
 1464               	.LBE4:
 1465 06a2 00C0      		rjmp .L39
 1466               	.L40:
 240:ServerLLDN.c  **** 			#endif
 241:ServerLLDN.c  **** 		}
 242:ServerLLDN.c  **** 		else return false;			
 1467               		.loc 6 242 0
 1468 06a4 80E0      		ldi r24,0
 1469 06a6 00C0      		rjmp .L41
 1470               	.L39:
 243:ServerLLDN.c  **** 		return true;
 1471               		.loc 6 243 0
 1472 06a8 81E0      		ldi r24,lo8(1)
 1473               	.L41:
 1474               	/* epilogue start */
 244:ServerLLDN.c  **** 	}
 1475               		.loc 6 244 0
 1476 06aa 2696      		adiw r28,6
 1477 06ac 0FB6      		in __tmp_reg__,__SREG__
 1478 06ae F894      		cli
 1479 06b0 DEBF      		out __SP_H__,r29
 1480 06b2 0FBE      		out __SREG__,__tmp_reg__
 1481 06b4 CDBF      		out __SP_L__,r28
 1482 06b6 DF91      		pop r29
 1483 06b8 CF91      		pop r28
 1484 06ba 0895      		ret
 1485               		.cfi_endproc
 1486               	.LFE139:
 1488               	.global	check_ack_pan
 1490               	check_ack_pan:
 1491               	.LFB140:
 245:ServerLLDN.c  **** 	
 246:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 247:ServerLLDN.c  **** 	{
 1492               		.loc 6 247 0
 1493               		.cfi_startproc
 1494 06bc CF93      		push r28
 1495               	.LCFI64:
 1496               		.cfi_def_cfa_offset 3
 1497               		.cfi_offset 28, -2
 1498 06be DF93      		push r29
 1499               	.LCFI65:
 1500               		.cfi_def_cfa_offset 4
 1501               		.cfi_offset 29, -3
 1502 06c0 00D0      		rcall .
 1503 06c2 00D0      		rcall .
 1504 06c4 00D0      		rcall .
 1505               	.LCFI66:
 1506               		.cfi_def_cfa_offset 10
 1507 06c6 CDB7      		in r28,__SP_L__
 1508 06c8 DEB7      		in r29,__SP_H__
 1509               	.LCFI67:
 1510               		.cfi_def_cfa_register 28
 1511               	/* prologue: function */
 1512               	/* frame size = 6 */
 1513               	/* stack size = 8 */
 1514               	.L__stack_usage = 8
 1515 06ca 9E83      		std Y+6,r25
 1516 06cc 8D83      		std Y+5,r24
 248:ServerLLDN.c  **** 		int pos =  addr / 8;
 1517               		.loc 6 248 0
 1518 06ce 8D81      		ldd r24,Y+5
 1519 06d0 9E81      		ldd r25,Y+6
 1520 06d2 9923      		tst r25
 1521 06d4 04F4      		brge .L43
 1522 06d6 0796      		adiw r24,7
 1523               	.L43:
 1524 06d8 9595      		asr r25
 1525 06da 8795      		ror r24
 1526 06dc 9595      		asr r25
 1527 06de 8795      		ror r24
 1528 06e0 9595      		asr r25
 1529 06e2 8795      		ror r24
 1530 06e4 9A83      		std Y+2,r25
 1531 06e6 8983      		std Y+1,r24
 249:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1532               		.loc 6 249 0
 1533 06e8 8D81      		ldd r24,Y+5
 1534 06ea 9E81      		ldd r25,Y+6
 1535 06ec 8770      		andi r24,7
 1536 06ee 9078      		andi r25,128
 1537 06f0 9923      		tst r25
 1538 06f2 04F4      		brge .L44
 1539 06f4 0197      		sbiw r24,1
 1540 06f6 886F      		ori r24,248
 1541 06f8 9F6F      		ori r25,255
 1542 06fa 0196      		adiw r24,1
 1543               	.L44:
 1544 06fc 9C01      		movw r18,r24
 1545 06fe 88E0      		ldi r24,lo8(8)
 1546 0700 90E0      		ldi r25,0
 1547 0702 821B      		sub r24,r18
 1548 0704 930B      		sbc r25,r19
 1549 0706 9C83      		std Y+4,r25
 1550 0708 8B83      		std Y+3,r24
 250:ServerLLDN.c  **** 		
 251:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1551               		.loc 6 251 0
 1552 070a 8981      		ldd r24,Y+1
 1553 070c 9A81      		ldd r25,Y+2
 1554 070e 8050      		subi r24,lo8(-(ACKFrame+1))
 1555 0710 9040      		sbci r25,hi8(-(ACKFrame+1))
 1556 0712 FC01      		movw r30,r24
 1557 0714 8081      		ld r24,Z
 1558 0716 882F      		mov r24,r24
 1559 0718 90E0      		ldi r25,0
 1560 071a 0B80      		ldd r0,Y+3
 1561 071c 00C0      		rjmp 2f
 1562               		1:
 1563 071e 9595      		asr r25
 1564 0720 8795      		ror r24
 1565               		2:
 1566 0722 0A94      		dec r0
 1567 0724 02F4      		brpl 1b
 1568 0726 8170      		andi r24,1
 1569 0728 9927      		clr r25
 1570 072a 892B      		or r24,r25
 1571 072c 01F0      		breq .L45
 252:ServerLLDN.c  **** 		{
 253:ServerLLDN.c  **** 			return true;
 1572               		.loc 6 253 0
 1573 072e 81E0      		ldi r24,lo8(1)
 1574 0730 00C0      		rjmp .L46
 1575               	.L45:
 254:ServerLLDN.c  **** 		}
 255:ServerLLDN.c  **** 		else
 256:ServerLLDN.c  **** 			return false;
 1576               		.loc 6 256 0
 1577 0732 80E0      		ldi r24,0
 1578               	.L46:
 1579               	/* epilogue start */
 257:ServerLLDN.c  **** 	}
 1580               		.loc 6 257 0
 1581 0734 2696      		adiw r28,6
 1582 0736 0FB6      		in __tmp_reg__,__SREG__
 1583 0738 F894      		cli
 1584 073a DEBF      		out __SP_H__,r29
 1585 073c 0FBE      		out __SREG__,__tmp_reg__
 1586 073e CDBF      		out __SP_L__,r28
 1587 0740 DF91      		pop r29
 1588 0742 CF91      		pop r28
 1589 0744 0895      		ret
 1590               		.cfi_endproc
 1591               	.LFE140:
 1593               	.global	__floatsisf
 1594               	.global	__floatunsisf
 1595               	.global	__mulsf3
 1596               	.global	__addsf3
 1597               		.section	.rodata
 1598               	.LC5:
 1599 0034 0A20 2564 		.string	"\n %d payload: "
 1599      2070 6179 
 1599      6C6F 6164 
 1599      3A20 00
 1600               	.LC6:
 1601 0043 2568 6878 		.string	"%hhx"
 1601      00
 1602               		.text
 1604               	appDataInd:
 1605               	.LFB141:
 258:ServerLLDN.c  **** 	
 259:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 260:ServerLLDN.c  **** 	{
 1606               		.loc 6 260 0
 1607               		.cfi_startproc
 1608 0746 8F92      		push r8
 1609               	.LCFI68:
 1610               		.cfi_def_cfa_offset 3
 1611               		.cfi_offset 8, -2
 1612 0748 9F92      		push r9
 1613               	.LCFI69:
 1614               		.cfi_def_cfa_offset 4
 1615               		.cfi_offset 9, -3
 1616 074a AF92      		push r10
 1617               	.LCFI70:
 1618               		.cfi_def_cfa_offset 5
 1619               		.cfi_offset 10, -4
 1620 074c BF92      		push r11
 1621               	.LCFI71:
 1622               		.cfi_def_cfa_offset 6
 1623               		.cfi_offset 11, -5
 1624 074e CF92      		push r12
 1625               	.LCFI72:
 1626               		.cfi_def_cfa_offset 7
 1627               		.cfi_offset 12, -6
 1628 0750 DF92      		push r13
 1629               	.LCFI73:
 1630               		.cfi_def_cfa_offset 8
 1631               		.cfi_offset 13, -7
 1632 0752 EF92      		push r14
 1633               	.LCFI74:
 1634               		.cfi_def_cfa_offset 9
 1635               		.cfi_offset 14, -8
 1636 0754 FF92      		push r15
 1637               	.LCFI75:
 1638               		.cfi_def_cfa_offset 10
 1639               		.cfi_offset 15, -9
 1640 0756 CF93      		push r28
 1641               	.LCFI76:
 1642               		.cfi_def_cfa_offset 11
 1643               		.cfi_offset 28, -10
 1644 0758 DF93      		push r29
 1645               	.LCFI77:
 1646               		.cfi_def_cfa_offset 12
 1647               		.cfi_offset 29, -11
 1648 075a CDB7      		in r28,__SP_L__
 1649 075c DEB7      		in r29,__SP_H__
 1650               	.LCFI78:
 1651               		.cfi_def_cfa_register 28
 1652 075e 2A97      		sbiw r28,10
 1653               	.LCFI79:
 1654               		.cfi_def_cfa_offset 22
 1655 0760 0FB6      		in __tmp_reg__,__SREG__
 1656 0762 F894      		cli
 1657 0764 DEBF      		out __SP_H__,r29
 1658 0766 0FBE      		out __SREG__,__tmp_reg__
 1659 0768 CDBF      		out __SP_L__,r28
 1660               	/* prologue: function */
 1661               	/* frame size = 10 */
 1662               	/* stack size = 20 */
 1663               	.L__stack_usage = 20
 1664 076a 9A87      		std Y+10,r25
 1665 076c 8987      		std Y+9,r24
 261:ServerLLDN.c  **** 		if(!data_received && timeslot_counter > 1)
 1666               		.loc 6 261 0
 1667 076e 9091 0000 		lds r25,data_received
 1668 0772 81E0      		ldi r24,lo8(1)
 1669 0774 8927      		eor r24,r25
 1670 0776 8823      		tst r24
 1671 0778 01F4      		brne .+2
 1672 077a 00C0      		rjmp .L48
 1673               		.loc 6 261 0 is_stmt 0 discriminator 1
 1674 077c 8091 0000 		lds r24,timeslot_counter
 1675 0780 8230      		cpi r24,lo8(2)
 1676 0782 00F4      		brsh .+2
 1677 0784 00C0      		rjmp .L48
 1678               	.LBB5:
 262:ServerLLDN.c  **** 		{
 263:ServerLLDN.c  **** 		int curr_ts = timeslot_counter - 2*MacLLDNMgmtTS - 1;
 1679               		.loc 6 263 0 is_stmt 1
 1680 0786 8091 0000 		lds r24,timeslot_counter
 1681 078a 882F      		mov r24,r24
 1682 078c 90E0      		ldi r25,0
 1683 078e 0397      		sbiw r24,3
 1684 0790 9A83      		std Y+2,r25
 1685 0792 8983      		std Y+1,r24
 264:ServerLLDN.c  **** 		if(curr_ts > macLLDNRetransmitTS)
 1686               		.loc 6 264 0
 1687 0794 8091 0000 		lds r24,macLLDNRetransmitTS
 1688 0798 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1689 079c 2981      		ldd r18,Y+1
 1690 079e 3A81      		ldd r19,Y+2
 1691 07a0 8217      		cp r24,r18
 1692 07a2 9307      		cpc r25,r19
 1693 07a4 04F0      		brlt .+2
 1694 07a6 00C0      		rjmp .L49
 1695               	.LBB6:
 265:ServerLLDN.c  **** 		{
 266:ServerLLDN.c  **** 			int retransmition_slot = 0;
 1696               		.loc 6 266 0
 1697 07a8 1C82      		std Y+4,__zero_reg__
 1698 07aa 1B82      		std Y+3,__zero_reg__
 267:ServerLLDN.c  **** 			int i;
 268:ServerLLDN.c  **** 			curr_ts = curr_ts - macLLDNRetransmitTS - 1;
 1699               		.loc 6 268 0
 1700 07ac 8091 0000 		lds r24,macLLDNRetransmitTS
 1701 07b0 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1702 07b4 2981      		ldd r18,Y+1
 1703 07b6 3A81      		ldd r19,Y+2
 1704 07b8 A901      		movw r20,r18
 1705 07ba 481B      		sub r20,r24
 1706 07bc 590B      		sbc r21,r25
 1707 07be CA01      		movw r24,r20
 1708 07c0 0197      		sbiw r24,1
 1709 07c2 9A83      		std Y+2,r25
 1710 07c4 8983      		std Y+1,r24
 269:ServerLLDN.c  **** 			for(i = 1; retransmition_slot == curr_ts && i <= macLLDNRetransmitTS; i++) 
 1711               		.loc 6 269 0
 1712 07c6 81E0      		ldi r24,lo8(1)
 1713 07c8 90E0      		ldi r25,0
 1714 07ca 9E83      		std Y+6,r25
 1715 07cc 8D83      		std Y+5,r24
 1716 07ce 00C0      		rjmp .L50
 1717               	.L53:
 270:ServerLLDN.c  **** 				if( !check_ack_pan(i) )
 1718               		.loc 6 270 0
 1719 07d0 8D81      		ldd r24,Y+5
 1720 07d2 9E81      		ldd r25,Y+6
 1721 07d4 0E94 0000 		call check_ack_pan
 1722 07d8 982F      		mov r25,r24
 1723 07da 81E0      		ldi r24,lo8(1)
 1724 07dc 8927      		eor r24,r25
 1725 07de 8823      		tst r24
 1726 07e0 01F0      		breq .L51
 271:ServerLLDN.c  **** 					retransmition_slot++;
 1727               		.loc 6 271 0
 1728 07e2 8B81      		ldd r24,Y+3
 1729 07e4 9C81      		ldd r25,Y+4
 1730 07e6 0196      		adiw r24,1
 1731 07e8 9C83      		std Y+4,r25
 1732 07ea 8B83      		std Y+3,r24
 1733               	.L51:
 269:ServerLLDN.c  **** 			for(i = 1; retransmition_slot == curr_ts && i <= macLLDNRetransmitTS; i++) 
 1734               		.loc 6 269 0 discriminator 2
 1735 07ec 8D81      		ldd r24,Y+5
 1736 07ee 9E81      		ldd r25,Y+6
 1737 07f0 0196      		adiw r24,1
 1738 07f2 9E83      		std Y+6,r25
 1739 07f4 8D83      		std Y+5,r24
 1740               	.L50:
 269:ServerLLDN.c  **** 			for(i = 1; retransmition_slot == curr_ts && i <= macLLDNRetransmitTS; i++) 
 1741               		.loc 6 269 0 is_stmt 0 discriminator 1
 1742 07f6 2B81      		ldd r18,Y+3
 1743 07f8 3C81      		ldd r19,Y+4
 1744 07fa 8981      		ldd r24,Y+1
 1745 07fc 9A81      		ldd r25,Y+2
 1746 07fe 2817      		cp r18,r24
 1747 0800 3907      		cpc r19,r25
 1748 0802 01F4      		brne .L52
 269:ServerLLDN.c  **** 			for(i = 1; retransmition_slot == curr_ts && i <= macLLDNRetransmitTS; i++) 
 1749               		.loc 6 269 0 discriminator 3
 1750 0804 8091 0000 		lds r24,macLLDNRetransmitTS
 1751 0808 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1752 080c 2D81      		ldd r18,Y+5
 1753 080e 3E81      		ldd r19,Y+6
 1754 0810 8217      		cp r24,r18
 1755 0812 9307      		cpc r25,r19
 1756 0814 04F4      		brge .L53
 1757               	.L52:
 272:ServerLLDN.c  **** 			
 273:ServerLLDN.c  **** 			if(i == macLLDNRetransmitTS + 1)
 1758               		.loc 6 273 0 is_stmt 1
 1759 0816 8091 0000 		lds r24,macLLDNRetransmitTS
 1760 081a 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1761 081e 9C01      		movw r18,r24
 1762 0820 2F5F      		subi r18,-1
 1763 0822 3F4F      		sbci r19,-1
 1764 0824 8D81      		ldd r24,Y+5
 1765 0826 9E81      		ldd r25,Y+6
 1766 0828 2817      		cp r18,r24
 1767 082a 3907      		cpc r19,r25
 1768 082c 01F4      		brne .L54
 274:ServerLLDN.c  **** 				return false;
 1769               		.loc 6 274 0
 1770 082e 80E0      		ldi r24,0
 1771 0830 00C0      		rjmp .L47
 1772               	.L54:
 275:ServerLLDN.c  **** 			
 276:ServerLLDN.c  **** 			curr_ts = i;
 1773               		.loc 6 276 0
 1774 0832 8D81      		ldd r24,Y+5
 1775 0834 9E81      		ldd r25,Y+6
 1776 0836 9A83      		std Y+2,r25
 1777 0838 8983      		std Y+1,r24
 1778               	.L49:
 1779               	.LBE6:
 277:ServerLLDN.c  **** 			
 278:ServerLLDN.c  **** 		}
 279:ServerLLDN.c  **** 		data_received = true;
 1780               		.loc 6 279 0
 1781 083a 81E0      		ldi r24,lo8(1)
 1782 083c 8093 0000 		sts data_received,r24
 280:ServerLLDN.c  **** 		
 281:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].rssi = ind->rssi;
 1783               		.loc 6 281 0
 1784 0840 8985      		ldd r24,Y+9
 1785 0842 9A85      		ldd r25,Y+10
 1786 0844 FC01      		movw r30,r24
 1787 0846 8485      		ldd r24,Z+12
 1788 0848 582F      		mov r21,r24
 1789 084a 2981      		ldd r18,Y+1
 1790 084c 3A81      		ldd r19,Y+2
 1791 084e 4AE4      		ldi r20,lo8(74)
 1792 0850 429F      		mul r20,r18
 1793 0852 C001      		movw r24,r0
 1794 0854 439F      		mul r20,r19
 1795 0856 900D      		add r25,r0
 1796 0858 1124      		clr __zero_reg__
 1797 085a 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1798 085c 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1799 085e FC01      		movw r30,r24
 1800 0860 5083      		st Z,r21
 282:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].average_rssi = (nodes_info_arr[curr_ts].rssi + nodes_info_arr[curr_ts].av
 1801               		.loc 6 282 0
 1802 0862 2981      		ldd r18,Y+1
 1803 0864 3A81      		ldd r19,Y+2
 1804 0866 4AE4      		ldi r20,lo8(74)
 1805 0868 429F      		mul r20,r18
 1806 086a C001      		movw r24,r0
 1807 086c 439F      		mul r20,r19
 1808 086e 900D      		add r25,r0
 1809 0870 1124      		clr __zero_reg__
 1810 0872 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1811 0874 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1812 0876 FC01      		movw r30,r24
 1813 0878 8081      		ld r24,Z
 1814 087a 882F      		mov r24,r24
 1815 087c 90E0      		ldi r25,0
 1816 087e 092E      		mov __tmp_reg__,r25
 1817 0880 000C      		lsl r0
 1818 0882 AA0B      		sbc r26,r26
 1819 0884 BB0B      		sbc r27,r27
 1820 0886 BC01      		movw r22,r24
 1821 0888 CD01      		movw r24,r26
 1822 088a 0E94 0000 		call __floatsisf
 1823 088e 4B01      		movw r8,r22
 1824 0890 5C01      		movw r10,r24
 1825 0892 2981      		ldd r18,Y+1
 1826 0894 3A81      		ldd r19,Y+2
 1827 0896 4AE4      		ldi r20,lo8(74)
 1828 0898 429F      		mul r20,r18
 1829 089a C001      		movw r24,r0
 1830 089c 439F      		mul r20,r19
 1831 089e 900D      		add r25,r0
 1832 08a0 1124      		clr __zero_reg__
 1833 08a2 8050      		subi r24,lo8(-(nodes_info_arr+5))
 1834 08a4 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 1835 08a6 FC01      		movw r30,r24
 1836 08a8 C080      		ld r12,Z
 1837 08aa D180      		ldd r13,Z+1
 1838 08ac E280      		ldd r14,Z+2
 1839 08ae F380      		ldd r15,Z+3
 1840 08b0 2981      		ldd r18,Y+1
 1841 08b2 3A81      		ldd r19,Y+2
 1842 08b4 4AE4      		ldi r20,lo8(74)
 1843 08b6 429F      		mul r20,r18
 1844 08b8 C001      		movw r24,r0
 1845 08ba 439F      		mul r20,r19
 1846 08bc 900D      		add r25,r0
 1847 08be 1124      		clr __zero_reg__
 1848 08c0 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1849 08c2 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1850 08c4 FC01      		movw r30,r24
 1851 08c6 8081      		ld r24,Z
 1852 08c8 9181      		ldd r25,Z+1
 1853 08ca CC01      		movw r24,r24
 1854 08cc A0E0      		ldi r26,0
 1855 08ce B0E0      		ldi r27,0
 1856 08d0 BC01      		movw r22,r24
 1857 08d2 CD01      		movw r24,r26
 1858 08d4 0E94 0000 		call __floatunsisf
 1859 08d8 DC01      		movw r26,r24
 1860 08da CB01      		movw r24,r22
 1861 08dc 9C01      		movw r18,r24
 1862 08de AD01      		movw r20,r26
 1863 08e0 C701      		movw r24,r14
 1864 08e2 B601      		movw r22,r12
 1865 08e4 0E94 0000 		call __mulsf3
 1866 08e8 DC01      		movw r26,r24
 1867 08ea CB01      		movw r24,r22
 1868 08ec 9C01      		movw r18,r24
 1869 08ee AD01      		movw r20,r26
 1870 08f0 C501      		movw r24,r10
 1871 08f2 B401      		movw r22,r8
 1872 08f4 0E94 0000 		call __addsf3
 1873 08f8 DC01      		movw r26,r24
 1874 08fa CB01      		movw r24,r22
 1875 08fc 6C01      		movw r12,r24
 1876 08fe 7D01      		movw r14,r26
 283:ServerLLDN.c  **** 															/(nodes_info_arr[curr_ts].msg_rec + 1);
 1877               		.loc 6 283 0
 1878 0900 2981      		ldd r18,Y+1
 1879 0902 3A81      		ldd r19,Y+2
 1880 0904 4AE4      		ldi r20,lo8(74)
 1881 0906 429F      		mul r20,r18
 1882 0908 C001      		movw r24,r0
 1883 090a 439F      		mul r20,r19
 1884 090c 900D      		add r25,r0
 1885 090e 1124      		clr __zero_reg__
 1886 0910 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1887 0912 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1888 0914 FC01      		movw r30,r24
 1889 0916 8081      		ld r24,Z
 1890 0918 9181      		ldd r25,Z+1
 1891 091a 0196      		adiw r24,1
 1892 091c CC01      		movw r24,r24
 1893 091e A0E0      		ldi r26,0
 1894 0920 B0E0      		ldi r27,0
 1895 0922 BC01      		movw r22,r24
 1896 0924 CD01      		movw r24,r26
 1897 0926 0E94 0000 		call __floatunsisf
 1898 092a DC01      		movw r26,r24
 1899 092c CB01      		movw r24,r22
 1900 092e 9C01      		movw r18,r24
 1901 0930 AD01      		movw r20,r26
 1902 0932 C701      		movw r24,r14
 1903 0934 B601      		movw r22,r12
 1904 0936 0E94 0000 		call __divsf3
 1905 093a DC01      		movw r26,r24
 1906 093c CB01      		movw r24,r22
 282:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].average_rssi = (nodes_info_arr[curr_ts].rssi + nodes_info_arr[curr_ts].av
 1907               		.loc 6 282 0
 1908 093e 4981      		ldd r20,Y+1
 1909 0940 5A81      		ldd r21,Y+2
 1910 0942 6AE4      		ldi r22,lo8(74)
 1911 0944 649F      		mul r22,r20
 1912 0946 9001      		movw r18,r0
 1913 0948 659F      		mul r22,r21
 1914 094a 300D      		add r19,r0
 1915 094c 1124      		clr __zero_reg__
 1916 094e 2050      		subi r18,lo8(-(nodes_info_arr+5))
 1917 0950 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 1918 0952 F901      		movw r30,r18
 1919 0954 8083      		st Z,r24
 1920 0956 9183      		std Z+1,r25
 1921 0958 A283      		std Z+2,r26
 1922 095a B383      		std Z+3,r27
 284:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].msg_rec++;
 1923               		.loc 6 284 0
 1924 095c 2981      		ldd r18,Y+1
 1925 095e 3A81      		ldd r19,Y+2
 1926 0960 4AE4      		ldi r20,lo8(74)
 1927 0962 429F      		mul r20,r18
 1928 0964 C001      		movw r24,r0
 1929 0966 439F      		mul r20,r19
 1930 0968 900D      		add r25,r0
 1931 096a 1124      		clr __zero_reg__
 1932 096c 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1933 096e 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1934 0970 FC01      		movw r30,r24
 1935 0972 8081      		ld r24,Z
 1936 0974 9181      		ldd r25,Z+1
 1937 0976 9C01      		movw r18,r24
 1938 0978 2F5F      		subi r18,-1
 1939 097a 3F4F      		sbci r19,-1
 1940 097c 4981      		ldd r20,Y+1
 1941 097e 5A81      		ldd r21,Y+2
 1942 0980 6AE4      		ldi r22,lo8(74)
 1943 0982 649F      		mul r22,r20
 1944 0984 C001      		movw r24,r0
 1945 0986 659F      		mul r22,r21
 1946 0988 900D      		add r25,r0
 1947 098a 1124      		clr __zero_reg__
 1948 098c 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1949 098e 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1950 0990 FC01      		movw r30,r24
 1951 0992 3183      		std Z+1,r19
 1952 0994 2083      		st Z,r18
 285:ServerLLDN.c  **** 
 286:ServerLLDN.c  **** 		addToAckArray(curr_ts+1);
 1953               		.loc 6 286 0
 1954 0996 8981      		ldd r24,Y+1
 1955 0998 8F5F      		subi r24,lo8(-(1))
 1956 099a 0E94 0000 		call addToAckArray
 287:ServerLLDN.c  **** 		
 288:ServerLLDN.c  **** 		printf("\n %d payload: ", curr_ts);
 1957               		.loc 6 288 0
 1958 099e 8A81      		ldd r24,Y+2
 1959 09a0 8F93      		push r24
 1960 09a2 8981      		ldd r24,Y+1
 1961 09a4 8F93      		push r24
 1962 09a6 80E0      		ldi r24,lo8(.LC5)
 1963 09a8 90E0      		ldi r25,hi8(.LC5)
 1964 09aa 892F      		mov r24,r25
 1965 09ac 8F93      		push r24
 1966 09ae 80E0      		ldi r24,lo8(.LC5)
 1967 09b0 90E0      		ldi r25,hi8(.LC5)
 1968 09b2 8F93      		push r24
 1969 09b4 0E94 0000 		call printf
 1970 09b8 0F90      		pop __tmp_reg__
 1971 09ba 0F90      		pop __tmp_reg__
 1972 09bc 0F90      		pop __tmp_reg__
 1973 09be 0F90      		pop __tmp_reg__
 289:ServerLLDN.c  **** 		
 290:ServerLLDN.c  **** 		msg_info_array[curr_ts].size = ind->size;		
 1974               		.loc 6 290 0
 1975 09c0 8985      		ldd r24,Y+9
 1976 09c2 9A85      		ldd r25,Y+10
 1977 09c4 FC01      		movw r30,r24
 1978 09c6 4285      		ldd r20,Z+10
 1979 09c8 2981      		ldd r18,Y+1
 1980 09ca 3A81      		ldd r19,Y+2
 1981 09cc 54E8      		ldi r21,lo8(-124)
 1982 09ce 529F      		mul r21,r18
 1983 09d0 C001      		movw r24,r0
 1984 09d2 539F      		mul r21,r19
 1985 09d4 900D      		add r25,r0
 1986 09d6 1124      		clr __zero_reg__
 1987 09d8 8050      		subi r24,lo8(-(msg_info_array+4))
 1988 09da 9040      		sbci r25,hi8(-(msg_info_array+4))
 1989 09dc FC01      		movw r30,r24
 1990 09de 4083      		st Z,r20
 1991               	.LBB7:
 291:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1992               		.loc 6 291 0
 1993 09e0 1886      		std Y+8,__zero_reg__
 1994 09e2 1F82      		std Y+7,__zero_reg__
 1995 09e4 00C0      		rjmp .L56
 1996               	.L57:
 292:ServerLLDN.c  **** 			{
 293:ServerLLDN.c  **** 			msg_info_array[curr_ts].data_payload[i] = ind->data[i];
 1997               		.loc 6 293 0 discriminator 3
 1998 09e6 8985      		ldd r24,Y+9
 1999 09e8 9A85      		ldd r25,Y+10
 2000 09ea FC01      		movw r30,r24
 2001 09ec 2085      		ldd r18,Z+8
 2002 09ee 3185      		ldd r19,Z+9
 2003 09f0 8F81      		ldd r24,Y+7
 2004 09f2 9885      		ldd r25,Y+8
 2005 09f4 820F      		add r24,r18
 2006 09f6 931F      		adc r25,r19
 2007 09f8 FC01      		movw r30,r24
 2008 09fa 4081      		ld r20,Z
 2009 09fc 8981      		ldd r24,Y+1
 2010 09fe 9A81      		ldd r25,Y+2
 2011 0a00 54E8      		ldi r21,lo8(-124)
 2012 0a02 589F      		mul r21,r24
 2013 0a04 9001      		movw r18,r0
 2014 0a06 599F      		mul r21,r25
 2015 0a08 300D      		add r19,r0
 2016 0a0a 1124      		clr __zero_reg__
 2017 0a0c 8F81      		ldd r24,Y+7
 2018 0a0e 9885      		ldd r25,Y+8
 2019 0a10 820F      		add r24,r18
 2020 0a12 931F      		adc r25,r19
 2021 0a14 8050      		subi r24,lo8(-(msg_info_array+5))
 2022 0a16 9040      		sbci r25,hi8(-(msg_info_array+5))
 2023 0a18 FC01      		movw r30,r24
 2024 0a1a 4083      		st Z,r20
 294:ServerLLDN.c  **** 			printf("%hhx", msg_info_array[curr_ts].data_payload[i]);
 2025               		.loc 6 294 0 discriminator 3
 2026 0a1c 8981      		ldd r24,Y+1
 2027 0a1e 9A81      		ldd r25,Y+2
 2028 0a20 44E8      		ldi r20,lo8(-124)
 2029 0a22 489F      		mul r20,r24
 2030 0a24 9001      		movw r18,r0
 2031 0a26 499F      		mul r20,r25
 2032 0a28 300D      		add r19,r0
 2033 0a2a 1124      		clr __zero_reg__
 2034 0a2c 8F81      		ldd r24,Y+7
 2035 0a2e 9885      		ldd r25,Y+8
 2036 0a30 820F      		add r24,r18
 2037 0a32 931F      		adc r25,r19
 2038 0a34 8050      		subi r24,lo8(-(msg_info_array+5))
 2039 0a36 9040      		sbci r25,hi8(-(msg_info_array+5))
 2040 0a38 FC01      		movw r30,r24
 2041 0a3a 8081      		ld r24,Z
 2042 0a3c 882F      		mov r24,r24
 2043 0a3e 90E0      		ldi r25,0
 2044 0a40 292F      		mov r18,r25
 2045 0a42 2F93      		push r18
 2046 0a44 8F93      		push r24
 2047 0a46 80E0      		ldi r24,lo8(.LC6)
 2048 0a48 90E0      		ldi r25,hi8(.LC6)
 2049 0a4a 892F      		mov r24,r25
 2050 0a4c 8F93      		push r24
 2051 0a4e 80E0      		ldi r24,lo8(.LC6)
 2052 0a50 90E0      		ldi r25,hi8(.LC6)
 2053 0a52 8F93      		push r24
 2054 0a54 0E94 0000 		call printf
 2055 0a58 0F90      		pop __tmp_reg__
 2056 0a5a 0F90      		pop __tmp_reg__
 2057 0a5c 0F90      		pop __tmp_reg__
 2058 0a5e 0F90      		pop __tmp_reg__
 291:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2059               		.loc 6 291 0 discriminator 3
 2060 0a60 8F81      		ldd r24,Y+7
 2061 0a62 9885      		ldd r25,Y+8
 2062 0a64 0196      		adiw r24,1
 2063 0a66 9887      		std Y+8,r25
 2064 0a68 8F83      		std Y+7,r24
 2065               	.L56:
 291:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2066               		.loc 6 291 0 is_stmt 0 discriminator 1
 2067 0a6a 8985      		ldd r24,Y+9
 2068 0a6c 9A85      		ldd r25,Y+10
 2069 0a6e FC01      		movw r30,r24
 2070 0a70 8285      		ldd r24,Z+10
 2071 0a72 282F      		mov r18,r24
 2072 0a74 30E0      		ldi r19,0
 2073 0a76 8F81      		ldd r24,Y+7
 2074 0a78 9885      		ldd r25,Y+8
 2075 0a7a 8217      		cp r24,r18
 2076 0a7c 9307      		cpc r25,r19
 2077 0a7e 04F4      		brge .+2
 2078 0a80 00C0      		rjmp .L57
 2079               	.L48:
 2080               	.L47:
 2081               	/* epilogue start */
 2082               	.LBE7:
 2083               	.LBE5:
 295:ServerLLDN.c  **** 			}
 296:ServerLLDN.c  **** 		}
 297:ServerLLDN.c  **** 	}
 2084               		.loc 6 297 0 is_stmt 1
 2085 0a82 2A96      		adiw r28,10
 2086 0a84 0FB6      		in __tmp_reg__,__SREG__
 2087 0a86 F894      		cli
 2088 0a88 DEBF      		out __SP_H__,r29
 2089 0a8a 0FBE      		out __SREG__,__tmp_reg__
 2090 0a8c CDBF      		out __SP_L__,r28
 2091 0a8e DF91      		pop r29
 2092 0a90 CF91      		pop r28
 2093 0a92 FF90      		pop r15
 2094 0a94 EF90      		pop r14
 2095 0a96 DF90      		pop r13
 2096 0a98 CF90      		pop r12
 2097 0a9a BF90      		pop r11
 2098 0a9c AF90      		pop r10
 2099 0a9e 9F90      		pop r9
 2100 0aa0 8F90      		pop r8
 2101 0aa2 0895      		ret
 2102               		.cfi_endproc
 2103               	.LFE141:
 2106               	appPanPrepareACK:
 2107               	.LFB142:
 298:ServerLLDN.c  **** 	
 299:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 300:ServerLLDN.c  **** 	{
 2108               		.loc 6 300 0
 2109               		.cfi_startproc
 2110 0aa4 CF93      		push r28
 2111               	.LCFI80:
 2112               		.cfi_def_cfa_offset 3
 2113               		.cfi_offset 28, -2
 2114 0aa6 DF93      		push r29
 2115               	.LCFI81:
 2116               		.cfi_def_cfa_offset 4
 2117               		.cfi_offset 29, -3
 2118 0aa8 CDB7      		in r28,__SP_L__
 2119 0aaa DEB7      		in r29,__SP_H__
 2120               	.LCFI82:
 2121               		.cfi_def_cfa_register 28
 2122               	/* prologue: function */
 2123               	/* frame size = 0 */
 2124               	/* stack size = 2 */
 2125               	.L__stack_usage = 2
 301:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2126               		.loc 6 301 0
 2127 0aac 1092 0000 		sts msgReq+5+1,__zero_reg__
 2128 0ab0 1092 0000 		sts msgReq+5,__zero_reg__
 302:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2129               		.loc 6 302 0
 2130 0ab4 1092 0000 		sts msgReq+7,__zero_reg__
 303:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2131               		.loc 6 303 0
 2132 0ab8 1092 0000 		sts msgReq+8,__zero_reg__
 304:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2133               		.loc 6 304 0
 2134 0abc 80E0      		ldi r24,0
 2135 0abe 90E4      		ldi r25,lo8(64)
 2136 0ac0 9093 0000 		sts msgReq+9+1,r25
 2137 0ac4 8093 0000 		sts msgReq+9,r24
 305:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2138               		.loc 6 305 0
 2139 0ac8 80E0      		ldi r24,lo8(ACKFrame)
 2140 0aca 90E0      		ldi r25,hi8(ACKFrame)
 2141 0acc 9093 0000 		sts msgReq+13+1,r25
 2142 0ad0 8093 0000 		sts msgReq+13,r24
 306:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2143               		.loc 6 306 0
 2144 0ad4 8091 0000 		lds r24,ACKFrame_size
 2145 0ad8 9091 0000 		lds r25,ACKFrame_size+1
 2146 0adc 8F5F      		subi r24,lo8(-(1))
 2147 0ade 8093 0000 		sts msgReq+15,r24
 307:ServerLLDN.c  **** 
 308:ServerLLDN.c  **** 	}
 2148               		.loc 6 308 0
 2149 0ae2 0000      		nop
 2150               	/* epilogue start */
 2151 0ae4 DF91      		pop r29
 2152 0ae6 CF91      		pop r28
 2153 0ae8 0895      		ret
 2154               		.cfi_endproc
 2155               	.LFE142:
 2158               	appPanReset:
 2159               	.LFB143:
 309:ServerLLDN.c  **** 
 310:ServerLLDN.c  **** 	static void appPanReset(void)
 311:ServerLLDN.c  **** 	{
 2160               		.loc 6 311 0
 2161               		.cfi_startproc
 2162 0aea CF93      		push r28
 2163               	.LCFI83:
 2164               		.cfi_def_cfa_offset 3
 2165               		.cfi_offset 28, -2
 2166 0aec DF93      		push r29
 2167               	.LCFI84:
 2168               		.cfi_def_cfa_offset 4
 2169               		.cfi_offset 29, -3
 2170 0aee 00D0      		rcall .
 2171 0af0 00D0      		rcall .
 2172 0af2 00D0      		rcall .
 2173               	.LCFI85:
 2174               		.cfi_def_cfa_offset 10
 2175 0af4 CDB7      		in r28,__SP_L__
 2176 0af6 DEB7      		in r29,__SP_H__
 2177               	.LCFI86:
 2178               		.cfi_def_cfa_register 28
 2179               	/* prologue: function */
 2180               	/* frame size = 6 */
 2181               	/* stack size = 8 */
 2182               	.L__stack_usage = 8
 312:ServerLLDN.c  **** 		// prepare beacon reset message
 313:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2183               		.loc 6 313 0
 2184 0af8 1092 0000 		sts msgReq+5+1,__zero_reg__
 2185 0afc 1092 0000 		sts msgReq+5,__zero_reg__
 314:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2186               		.loc 6 314 0
 2187 0b00 1092 0000 		sts msgReq+7,__zero_reg__
 315:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2188               		.loc 6 315 0
 2189 0b04 1092 0000 		sts msgReq+8,__zero_reg__
 316:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2190               		.loc 6 316 0
 2191 0b08 80E4      		ldi r24,lo8(64)
 2192 0b0a 94E0      		ldi r25,lo8(4)
 2193 0b0c 9093 0000 		sts msgReq+9+1,r25
 2194 0b10 8093 0000 		sts msgReq+9,r24
 317:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2195               		.loc 6 317 0
 2196 0b14 1092 0000 		sts msgReq+13+1,__zero_reg__
 2197 0b18 1092 0000 		sts msgReq+13,__zero_reg__
 318:ServerLLDN.c  **** 		msgReq.size			= 0;
 2198               		.loc 6 318 0
 2199 0b1c 1092 0000 		sts msgReq+15,__zero_reg__
 2200               	.LBB8:
 319:ServerLLDN.c  **** 
 320:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2201               		.loc 6 320 0
 2202 0b20 1A82      		std Y+2,__zero_reg__
 2203 0b22 1982      		std Y+1,__zero_reg__
 2204 0b24 00C0      		rjmp .L60
 2205               	.L61:
 321:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2206               		.loc 6 321 0 discriminator 3
 2207 0b26 8981      		ldd r24,Y+1
 2208 0b28 9A81      		ldd r25,Y+2
 2209 0b2a 8050      		subi r24,lo8(-(ACKFrame+1))
 2210 0b2c 9040      		sbci r25,hi8(-(ACKFrame+1))
 2211 0b2e FC01      		movw r30,r24
 2212 0b30 1082      		st Z,__zero_reg__
 320:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2213               		.loc 6 320 0 discriminator 3
 2214 0b32 8981      		ldd r24,Y+1
 2215 0b34 9A81      		ldd r25,Y+2
 2216 0b36 0196      		adiw r24,1
 2217 0b38 9A83      		std Y+2,r25
 2218 0b3a 8983      		std Y+1,r24
 2219               	.L60:
 320:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2220               		.loc 6 320 0 is_stmt 0 discriminator 1
 2221 0b3c 8981      		ldd r24,Y+1
 2222 0b3e 9A81      		ldd r25,Y+2
 2223 0b40 8097      		sbiw r24,32
 2224 0b42 04F0      		brlt .L61
 2225               	.LBE8:
 2226               	.LBB9:
 322:ServerLLDN.c  **** 			
 323:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2227               		.loc 6 323 0 is_stmt 1
 2228 0b44 1C82      		std Y+4,__zero_reg__
 2229 0b46 1B82      		std Y+3,__zero_reg__
 2230 0b48 00C0      		rjmp .L62
 2231               	.L65:
 324:ServerLLDN.c  **** 		{
 325:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2232               		.loc 6 325 0
 2233 0b4a 2B81      		ldd r18,Y+3
 2234 0b4c 3C81      		ldd r19,Y+4
 2235 0b4e 4AE4      		ldi r20,lo8(74)
 2236 0b50 429F      		mul r20,r18
 2237 0b52 C001      		movw r24,r0
 2238 0b54 439F      		mul r20,r19
 2239 0b56 900D      		add r25,r0
 2240 0b58 1124      		clr __zero_reg__
 2241 0b5a 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2242 0b5c 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2243 0b5e FC01      		movw r30,r24
 2244 0b60 1182      		std Z+1,__zero_reg__
 2245 0b62 1082      		st Z,__zero_reg__
 326:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2246               		.loc 6 326 0
 2247 0b64 2B81      		ldd r18,Y+3
 2248 0b66 3C81      		ldd r19,Y+4
 2249 0b68 4AE4      		ldi r20,lo8(74)
 2250 0b6a 429F      		mul r20,r18
 2251 0b6c C001      		movw r24,r0
 2252 0b6e 439F      		mul r20,r19
 2253 0b70 900D      		add r25,r0
 2254 0b72 1124      		clr __zero_reg__
 2255 0b74 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2256 0b76 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2257 0b78 FC01      		movw r30,r24
 2258 0b7a 1182      		std Z+1,__zero_reg__
 2259 0b7c 1082      		st Z,__zero_reg__
 327:ServerLLDN.c  **** 
 328:ServerLLDN.c  **** 			
 329:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2260               		.loc 6 329 0
 2261 0b7e 2B81      		ldd r18,Y+3
 2262 0b80 3C81      		ldd r19,Y+4
 2263 0b82 44E8      		ldi r20,lo8(-124)
 2264 0b84 429F      		mul r20,r18
 2265 0b86 C001      		movw r24,r0
 2266 0b88 439F      		mul r20,r19
 2267 0b8a 900D      		add r25,r0
 2268 0b8c 1124      		clr __zero_reg__
 2269 0b8e 8050      		subi r24,lo8(-(msg_info_array))
 2270 0b90 9040      		sbci r25,hi8(-(msg_info_array))
 2271 0b92 FC01      		movw r30,r24
 2272 0b94 1182      		std Z+1,__zero_reg__
 2273 0b96 1082      		st Z,__zero_reg__
 330:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2274               		.loc 6 330 0
 2275 0b98 2B81      		ldd r18,Y+3
 2276 0b9a 3C81      		ldd r19,Y+4
 2277 0b9c 44E8      		ldi r20,lo8(-124)
 2278 0b9e 429F      		mul r20,r18
 2279 0ba0 C001      		movw r24,r0
 2280 0ba2 439F      		mul r20,r19
 2281 0ba4 900D      		add r25,r0
 2282 0ba6 1124      		clr __zero_reg__
 2283 0ba8 8050      		subi r24,lo8(-(msg_info_array+2))
 2284 0baa 9040      		sbci r25,hi8(-(msg_info_array+2))
 2285 0bac FC01      		movw r30,r24
 2286 0bae 1182      		std Z+1,__zero_reg__
 2287 0bb0 1082      		st Z,__zero_reg__
 2288               	.LBB10:
 331:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2289               		.loc 6 331 0
 2290 0bb2 1E82      		std Y+6,__zero_reg__
 2291 0bb4 1D82      		std Y+5,__zero_reg__
 2292 0bb6 00C0      		rjmp .L63
 2293               	.L64:
 332:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2294               		.loc 6 332 0 discriminator 3
 2295 0bb8 8B81      		ldd r24,Y+3
 2296 0bba 9C81      		ldd r25,Y+4
 2297 0bbc 4AE4      		ldi r20,lo8(74)
 2298 0bbe 489F      		mul r20,r24
 2299 0bc0 9001      		movw r18,r0
 2300 0bc2 499F      		mul r20,r25
 2301 0bc4 300D      		add r19,r0
 2302 0bc6 1124      		clr __zero_reg__
 2303 0bc8 8D81      		ldd r24,Y+5
 2304 0bca 9E81      		ldd r25,Y+6
 2305 0bcc 820F      		add r24,r18
 2306 0bce 931F      		adc r25,r19
 2307 0bd0 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2308 0bd2 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2309 0bd4 FC01      		movw r30,r24
 2310 0bd6 1082      		st Z,__zero_reg__
 331:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2311               		.loc 6 331 0 discriminator 3
 2312 0bd8 8D81      		ldd r24,Y+5
 2313 0bda 9E81      		ldd r25,Y+6
 2314 0bdc 0196      		adiw r24,1
 2315 0bde 9E83      		std Y+6,r25
 2316 0be0 8D83      		std Y+5,r24
 2317               	.L63:
 331:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2318               		.loc 6 331 0 is_stmt 0 discriminator 1
 2319 0be2 8D81      		ldd r24,Y+5
 2320 0be4 9E81      		ldd r25,Y+6
 2321 0be6 C297      		sbiw r24,50
 2322 0be8 04F0      		brlt .L64
 2323               	.LBE10:
 323:ServerLLDN.c  **** 		{
 2324               		.loc 6 323 0 is_stmt 1 discriminator 2
 2325 0bea 8B81      		ldd r24,Y+3
 2326 0bec 9C81      		ldd r25,Y+4
 2327 0bee 0196      		adiw r24,1
 2328 0bf0 9C83      		std Y+4,r25
 2329 0bf2 8B83      		std Y+3,r24
 2330               	.L62:
 323:ServerLLDN.c  **** 		{
 2331               		.loc 6 323 0 is_stmt 0 discriminator 1
 2332 0bf4 8B81      		ldd r24,Y+3
 2333 0bf6 9C81      		ldd r25,Y+4
 2334 0bf8 C297      		sbiw r24,50
 2335 0bfa 04F4      		brge .+2
 2336 0bfc 00C0      		rjmp .L65
 2337               	.LBE9:
 333:ServerLLDN.c  **** 		}
 334:ServerLLDN.c  **** 		// assTimeSlot = MacLLDNMgmtTS * 2;	
 335:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2338               		.loc 6 335 0 is_stmt 1
 2339 0bfe 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2340 0c02 1092 0000 		sts ACKFrame_size,__zero_reg__
 336:ServerLLDN.c  **** 		counter_associados = 0;
 2341               		.loc 6 336 0
 2342 0c06 1092 0000 		sts counter_associados+1,__zero_reg__
 2343 0c0a 1092 0000 		sts counter_associados,__zero_reg__
 337:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2344               		.loc 6 337 0
 2345 0c0e 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2346 0c12 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 338:ServerLLDN.c  **** 		n = 0;
 2347               		.loc 6 338 0
 2348 0c16 1092 0000 		sts n,__zero_reg__
 339:ServerLLDN.c  **** 	}
 2349               		.loc 6 339 0
 2350 0c1a 0000      		nop
 2351               	/* epilogue start */
 2352 0c1c 2696      		adiw r28,6
 2353 0c1e 0FB6      		in __tmp_reg__,__SREG__
 2354 0c20 F894      		cli
 2355 0c22 DEBF      		out __SP_H__,r29
 2356 0c24 0FBE      		out __SREG__,__tmp_reg__
 2357 0c26 CDBF      		out __SP_L__,r28
 2358 0c28 DF91      		pop r29
 2359 0c2a CF91      		pop r28
 2360 0c2c 0895      		ret
 2361               		.cfi_endproc
 2362               	.LFE143:
 2365               	appPanDiscInit:
 2366               	.LFB144:
 340:ServerLLDN.c  **** 
 341:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 342:ServerLLDN.c  **** 	{	
 2367               		.loc 6 342 0
 2368               		.cfi_startproc
 2369 0c2e CF93      		push r28
 2370               	.LCFI87:
 2371               		.cfi_def_cfa_offset 3
 2372               		.cfi_offset 28, -2
 2373 0c30 DF93      		push r29
 2374               	.LCFI88:
 2375               		.cfi_def_cfa_offset 4
 2376               		.cfi_offset 29, -3
 2377 0c32 00D0      		rcall .
 2378               	.LCFI89:
 2379               		.cfi_def_cfa_offset 6
 2380 0c34 CDB7      		in r28,__SP_L__
 2381 0c36 DEB7      		in r29,__SP_H__
 2382               	.LCFI90:
 2383               		.cfi_def_cfa_register 28
 2384               	/* prologue: function */
 2385               	/* frame size = 2 */
 2386               	/* stack size = 4 */
 2387               	.L__stack_usage = 4
 2388               	.LBB11:
 343:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 344:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2389               		.loc 6 344 0
 2390 0c38 1A82      		std Y+2,__zero_reg__
 2391 0c3a 1982      		std Y+1,__zero_reg__
 2392 0c3c 00C0      		rjmp .L67
 2393               	.L68:
 345:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2394               		.loc 6 345 0 discriminator 3
 2395 0c3e 8981      		ldd r24,Y+1
 2396 0c40 9A81      		ldd r25,Y+2
 2397 0c42 8050      		subi r24,lo8(-(ACKFrame+1))
 2398 0c44 9040      		sbci r25,hi8(-(ACKFrame+1))
 2399 0c46 FC01      		movw r30,r24
 2400 0c48 1082      		st Z,__zero_reg__
 344:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2401               		.loc 6 344 0 discriminator 3
 2402 0c4a 8981      		ldd r24,Y+1
 2403 0c4c 9A81      		ldd r25,Y+2
 2404 0c4e 0196      		adiw r24,1
 2405 0c50 9A83      		std Y+2,r25
 2406 0c52 8983      		std Y+1,r24
 2407               	.L67:
 344:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2408               		.loc 6 344 0 is_stmt 0 discriminator 1
 2409 0c54 8981      		ldd r24,Y+1
 2410 0c56 9A81      		ldd r25,Y+2
 2411 0c58 8097      		sbiw r24,32
 2412 0c5a 04F0      		brlt .L68
 2413               	.LBE11:
 346:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2414               		.loc 6 346 0 is_stmt 1
 2415 0c5c 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2416 0c60 1092 0000 		sts ACKFrame_size,__zero_reg__
 347:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 348:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2417               		.loc 6 348 0
 2418 0c64 1092 0000 		sts msgReq+5+1,__zero_reg__
 2419 0c68 1092 0000 		sts msgReq+5,__zero_reg__
 349:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2420               		.loc 6 349 0
 2421 0c6c 1092 0000 		sts msgReq+7,__zero_reg__
 350:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2422               		.loc 6 350 0
 2423 0c70 1092 0000 		sts msgReq+8,__zero_reg__
 351:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2424               		.loc 6 351 0
 2425 0c74 80E4      		ldi r24,lo8(64)
 2426 0c76 91E0      		ldi r25,lo8(1)
 2427 0c78 9093 0000 		sts msgReq+9+1,r25
 2428 0c7c 8093 0000 		sts msgReq+9,r24
 352:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2429               		.loc 6 352 0
 2430 0c80 1092 0000 		sts msgReq+13+1,__zero_reg__
 2431 0c84 1092 0000 		sts msgReq+13,__zero_reg__
 353:ServerLLDN.c  **** 		msgReq.size					= 0;
 2432               		.loc 6 353 0
 2433 0c88 1092 0000 		sts msgReq+15,__zero_reg__
 354:ServerLLDN.c  **** 		
 355:ServerLLDN.c  **** 		
 356:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 357:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2434               		.loc 6 357 0
 2435 0c8c 8091 0000 		lds r24,cycles_counter
 2436 0c90 8823      		tst r24
 2437 0c92 01F0      		breq .+2
 2438 0c94 00C0      		rjmp .L70
 358:ServerLLDN.c  **** 		{
 359:ServerLLDN.c  **** 			
 360:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 361:ServerLLDN.c  **** 		n = 127; 
 2439               		.loc 6 361 0
 2440 0c96 8FE7      		ldi r24,lo8(127)
 2441 0c98 8093 0000 		sts n,r24
 362:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2442               		.loc 6 362 0
 2443 0c9c 8091 0000 		lds r24,n
 2444 0ca0 882F      		mov r24,r24
 2445 0ca2 90E0      		ldi r25,0
 2446 0ca4 0396      		adiw r24,3
 2447 0ca6 880F      		lsl r24
 2448 0ca8 991F      		rol r25
 2449 0caa 092E      		mov __tmp_reg__,r25
 2450 0cac 000C      		lsl r0
 2451 0cae AA0B      		sbc r26,r26
 2452 0cb0 BB0B      		sbc r27,r27
 2453 0cb2 BC01      		movw r22,r24
 2454 0cb4 CD01      		movw r24,r26
 2455 0cb6 0E94 0000 		call __floatsisf
 2456 0cba DC01      		movw r26,r24
 2457 0cbc CB01      		movw r24,r22
 2458 0cbe 20E0      		ldi r18,0
 2459 0cc0 30E0      		ldi r19,0
 2460 0cc2 40E4      		ldi r20,lo8(64)
 2461 0cc4 51E4      		ldi r21,lo8(65)
 2462 0cc6 BC01      		movw r22,r24
 2463 0cc8 CD01      		movw r24,r26
 2464 0cca 0E94 0000 		call __addsf3
 2465 0cce DC01      		movw r26,r24
 2466 0cd0 CB01      		movw r24,r22
 2467 0cd2 20E0      		ldi r18,0
 2468 0cd4 30E0      		ldi r19,0
 2469 0cd6 40E2      		ldi r20,lo8(32)
 2470 0cd8 52E4      		ldi r21,lo8(66)
 2471 0cda BC01      		movw r22,r24
 2472 0cdc CD01      		movw r24,r26
 2473 0cde 0E94 0000 		call __addsf3
 2474 0ce2 DC01      		movw r26,r24
 2475 0ce4 CB01      		movw r24,r22
 2476 0ce6 20E0      		ldi r18,0
 2477 0ce8 34E2      		ldi r19,lo8(36)
 2478 0cea 44E7      		ldi r20,lo8(116)
 2479 0cec 57E4      		ldi r21,lo8(71)
 2480 0cee BC01      		movw r22,r24
 2481 0cf0 CD01      		movw r24,r26
 2482 0cf2 0E94 0000 		call __divsf3
 2483 0cf6 DC01      		movw r26,r24
 2484 0cf8 CB01      		movw r24,r22
 2485 0cfa 8093 0000 		sts tTS,r24
 2486 0cfe 9093 0000 		sts tTS+1,r25
 2487 0d02 A093 0000 		sts tTS+2,r26
 2488 0d06 B093 0000 		sts tTS+3,r27
 363:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 364:ServerLLDN.c  **** 		
 365:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2489               		.loc 6 365 0
 2490 0d0a 8091 0000 		lds r24,tTS
 2491 0d0e 9091 0000 		lds r25,tTS+1
 2492 0d12 A091 0000 		lds r26,tTS+2
 2493 0d16 B091 0000 		lds r27,tTS+3
 2494 0d1a 20E0      		ldi r18,0
 2495 0d1c 30E0      		ldi r19,0
 2496 0d1e 40E8      		ldi r20,lo8(-128)
 2497 0d20 50E4      		ldi r21,lo8(64)
 2498 0d22 BC01      		movw r22,r24
 2499 0d24 CD01      		movw r24,r26
 2500 0d26 0E94 0000 		call __mulsf3
 2501 0d2a DC01      		movw r26,r24
 2502 0d2c CB01      		movw r24,r22
 2503 0d2e 2DEB      		ldi r18,lo8(-67)
 2504 0d30 37E3      		ldi r19,lo8(55)
 2505 0d32 46E8      		ldi r20,lo8(-122)
 2506 0d34 57E3      		ldi r21,lo8(55)
 2507 0d36 BC01      		movw r22,r24
 2508 0d38 CD01      		movw r24,r26
 2509 0d3a 0E94 0000 		call __divsf3
 2510 0d3e DC01      		movw r26,r24
 2511 0d40 CB01      		movw r24,r22
 2512 0d42 8093 0000 		sts beaconInterval_association,r24
 2513 0d46 9093 0000 		sts beaconInterval_association+1,r25
 2514 0d4a A093 0000 		sts beaconInterval_association+2,r26
 2515 0d4e B093 0000 		sts beaconInterval_association+3,r27
 366:ServerLLDN.c  **** 			/*
 367:ServerLLDN.c  **** 			* Configure interrupts callback functions
 368:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 369:ServerLLDN.c  **** 			*/
 370:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2516               		.loc 6 370 0
 2517 0d52 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2518 0d54 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2519 0d56 0E94 0000 		call macsc_set_cmp1_int_cb
 371:ServerLLDN.c  **** 			/*
 372:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 373:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 374:ServerLLDN.c  **** 			*/
 375:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2520               		.loc 6 375 0
 2521 0d5a 0E94 0000 		call macsc_enable_manual_bts
 376:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2522               		.loc 6 376 0
 2523 0d5e 81E0      		ldi r24,lo8(1)
 2524 0d60 0E94 0000 		call macsc_enable_cmp_int
 377:ServerLLDN.c  **** 
 378:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2525               		.loc 6 378 0
 2526 0d64 8091 0000 		lds r24,beaconInterval_association
 2527 0d68 9091 0000 		lds r25,beaconInterval_association+1
 2528 0d6c A091 0000 		lds r26,beaconInterval_association+2
 2529 0d70 B091 0000 		lds r27,beaconInterval_association+3
 2530 0d74 BC01      		movw r22,r24
 2531 0d76 CD01      		movw r24,r26
 2532 0d78 0E94 0000 		call __fixunssfsi
 2533 0d7c DC01      		movw r26,r24
 2534 0d7e CB01      		movw r24,r22
 2535 0d80 21E0      		ldi r18,lo8(1)
 2536 0d82 AC01      		movw r20,r24
 2537 0d84 BD01      		movw r22,r26
 2538 0d86 81E0      		ldi r24,lo8(1)
 2539 0d88 0E94 0000 		call macsc_use_cmp
 2540               	.L70:
 379:ServerLLDN.c  **** 			
 380:ServerLLDN.c  **** 			/* Timer used in testing */
 381:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 382:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 383:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 384:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 385:ServerLLDN.c  **** 			#endif
 386:ServerLLDN.c  **** 			
 387:ServerLLDN.c  **** 		#endif
 388:ServerLLDN.c  **** 		}
 389:ServerLLDN.c  **** 	}
 2541               		.loc 6 389 0
 2542 0d8c 0000      		nop
 2543               	/* epilogue start */
 2544 0d8e 0F90      		pop __tmp_reg__
 2545 0d90 0F90      		pop __tmp_reg__
 2546 0d92 DF91      		pop r29
 2547 0d94 CF91      		pop r28
 2548 0d96 0895      		ret
 2549               		.cfi_endproc
 2550               	.LFE144:
 2553               	appPanOnlineInit:
 2554               	.LFB145:
 390:ServerLLDN.c  **** 
 391:ServerLLDN.c  **** 	static void appPanOnlineInit()
 392:ServerLLDN.c  **** 	{
 2555               		.loc 6 392 0
 2556               		.cfi_startproc
 2557 0d98 EF92      		push r14
 2558               	.LCFI91:
 2559               		.cfi_def_cfa_offset 3
 2560               		.cfi_offset 14, -2
 2561 0d9a FF92      		push r15
 2562               	.LCFI92:
 2563               		.cfi_def_cfa_offset 4
 2564               		.cfi_offset 15, -3
 2565 0d9c 0F93      		push r16
 2566               	.LCFI93:
 2567               		.cfi_def_cfa_offset 5
 2568               		.cfi_offset 16, -4
 2569 0d9e 1F93      		push r17
 2570               	.LCFI94:
 2571               		.cfi_def_cfa_offset 6
 2572               		.cfi_offset 17, -5
 2573 0da0 CF93      		push r28
 2574               	.LCFI95:
 2575               		.cfi_def_cfa_offset 7
 2576               		.cfi_offset 28, -6
 2577 0da2 DF93      		push r29
 2578               	.LCFI96:
 2579               		.cfi_def_cfa_offset 8
 2580               		.cfi_offset 29, -7
 2581 0da4 CDB7      		in r28,__SP_L__
 2582 0da6 DEB7      		in r29,__SP_H__
 2583               	.LCFI97:
 2584               		.cfi_def_cfa_register 28
 2585               	/* prologue: function */
 2586               	/* frame size = 0 */
 2587               	/* stack size = 6 */
 2588               	.L__stack_usage = 6
 393:ServerLLDN.c  **** 			timeslot_counter = 0;
 2589               		.loc 6 393 0
 2590 0da8 1092 0000 		sts timeslot_counter,__zero_reg__
 394:ServerLLDN.c  **** 			
 395:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 2591               		.loc 6 395 0
 2592 0dac 8091 0000 		lds r24,config_request_frame+5
 2593 0db0 8F77      		andi r24,lo8(127)
 2594 0db2 882F      		mov r24,r24
 2595 0db4 90E0      		ldi r25,0
 2596 0db6 0396      		adiw r24,3
 2597 0db8 880F      		lsl r24
 2598 0dba 991F      		rol r25
 2599 0dbc 092E      		mov __tmp_reg__,r25
 2600 0dbe 000C      		lsl r0
 2601 0dc0 AA0B      		sbc r26,r26
 2602 0dc2 BB0B      		sbc r27,r27
 2603 0dc4 BC01      		movw r22,r24
 2604 0dc6 CD01      		movw r24,r26
 2605 0dc8 0E94 0000 		call __floatsisf
 2606 0dcc DC01      		movw r26,r24
 2607 0dce CB01      		movw r24,r22
 2608 0dd0 20E0      		ldi r18,0
 2609 0dd2 30E0      		ldi r19,0
 2610 0dd4 40E4      		ldi r20,lo8(64)
 2611 0dd6 51E4      		ldi r21,lo8(65)
 2612 0dd8 BC01      		movw r22,r24
 2613 0dda CD01      		movw r24,r26
 2614 0ddc 0E94 0000 		call __addsf3
 2615 0de0 DC01      		movw r26,r24
 2616 0de2 CB01      		movw r24,r22
 2617 0de4 20E0      		ldi r18,0
 2618 0de6 30E0      		ldi r19,0
 2619 0de8 40E2      		ldi r20,lo8(32)
 2620 0dea 52E4      		ldi r21,lo8(66)
 2621 0dec BC01      		movw r22,r24
 2622 0dee CD01      		movw r24,r26
 2623 0df0 0E94 0000 		call __addsf3
 2624 0df4 DC01      		movw r26,r24
 2625 0df6 CB01      		movw r24,r22
 2626 0df8 20E0      		ldi r18,0
 2627 0dfa 34E2      		ldi r19,lo8(36)
 2628 0dfc 44E7      		ldi r20,lo8(116)
 2629 0dfe 57E4      		ldi r21,lo8(71)
 2630 0e00 BC01      		movw r22,r24
 2631 0e02 CD01      		movw r24,r26
 2632 0e04 0E94 0000 		call __divsf3
 2633 0e08 DC01      		movw r26,r24
 2634 0e0a CB01      		movw r24,r22
 2635 0e0c 8093 0000 		sts tTS,r24
 2636 0e10 9093 0000 		sts tTS+1,r25
 2637 0e14 A093 0000 		sts tTS+2,r26
 2638 0e18 B093 0000 		sts tTS+3,r27
 396:ServerLLDN.c  **** 			
 397:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 2639               		.loc 6 397 0
 2640 0e1c 8091 0000 		lds r24,config_request_frame+5
 2641 0e20 8F77      		andi r24,lo8(127)
 2642 0e22 8093 0000 		sts n,r24
 398:ServerLLDN.c  **** 			
 399:ServerLLDN.c  **** 			msgReq.dstAddr		= 0;
 2643               		.loc 6 399 0
 2644 0e26 1092 0000 		sts msgReq+5+1,__zero_reg__
 2645 0e2a 1092 0000 		sts msgReq+5,__zero_reg__
 400:ServerLLDN.c  **** 			msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2646               		.loc 6 400 0
 2647 0e2e 1092 0000 		sts msgReq+7,__zero_reg__
 401:ServerLLDN.c  **** 			msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2648               		.loc 6 401 0
 2649 0e32 1092 0000 		sts msgReq+8,__zero_reg__
 402:ServerLLDN.c  **** 			msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 2650               		.loc 6 402 0
 2651 0e36 80EC      		ldi r24,lo8(-64)
 2652 0e38 90E0      		ldi r25,0
 2653 0e3a 9093 0000 		sts msgReq+9+1,r25
 2654 0e3e 8093 0000 		sts msgReq+9,r24
 403:ServerLLDN.c  **** 			
 404:ServerLLDN.c  **** 			if(macLLDNRetransmitTS > 0)
 2655               		.loc 6 404 0
 2656 0e42 8091 0000 		lds r24,macLLDNRetransmitTS
 2657 0e46 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2658 0e4a 1816      		cp __zero_reg__,r24
 2659 0e4c 1906      		cpc __zero_reg__,r25
 2660 0e4e 04F4      		brge .L72
 405:ServerLLDN.c  **** 			{
 406:ServerLLDN.c  **** 				// precisa repensar isto
 407:ServerLLDN.c  **** 				msgReq.data		= &ACKFrame.ackFlags[macLLDNRetransmitTS + 1];
 2661               		.loc 6 407 0
 2662 0e50 8091 0000 		lds r24,macLLDNRetransmitTS
 2663 0e54 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2664 0e58 0196      		adiw r24,1
 2665 0e5a 0196      		adiw r24,1
 2666 0e5c 8050      		subi r24,lo8(-(ACKFrame))
 2667 0e5e 9040      		sbci r25,hi8(-(ACKFrame))
 2668 0e60 9093 0000 		sts msgReq+13+1,r25
 2669 0e64 8093 0000 		sts msgReq+13,r24
 408:ServerLLDN.c  **** 				msgReq.size		= macLLDNRetransmitTS;
 2670               		.loc 6 408 0
 2671 0e68 8091 0000 		lds r24,macLLDNRetransmitTS
 2672 0e6c 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2673 0e70 8093 0000 		sts msgReq+15,r24
 2674 0e74 00C0      		rjmp .L73
 2675               	.L72:
 409:ServerLLDN.c  **** 			}
 410:ServerLLDN.c  **** 			else
 411:ServerLLDN.c  **** 			{
 412:ServerLLDN.c  **** 				msgReq.data					= NULL;
 2676               		.loc 6 412 0
 2677 0e76 1092 0000 		sts msgReq+13+1,__zero_reg__
 2678 0e7a 1092 0000 		sts msgReq+13,__zero_reg__
 413:ServerLLDN.c  **** 				msgReq.size					= 0;	
 2679               		.loc 6 413 0
 2680 0e7e 1092 0000 		sts msgReq+15,__zero_reg__
 2681               	.L73:
 414:ServerLLDN.c  **** 			}
 415:ServerLLDN.c  **** 			
 416:ServerLLDN.c  **** 			// (number of time slots x mgmt time solts) x base timelosts
 417:ServerLLDN.c  **** 			beaconInterval = (assTimeSlot * 2 + 1 + 2*MacLLDNMgmtTS) * tTS / (SYMBOL_TIME);
 2682               		.loc 6 417 0
 2683 0e82 8091 0000 		lds r24,assTimeSlot
 2684 0e86 9091 0000 		lds r25,assTimeSlot+1
 2685 0e8a 880F      		lsl r24
 2686 0e8c 991F      		rol r25
 2687 0e8e 0396      		adiw r24,3
 2688 0e90 092E      		mov __tmp_reg__,r25
 2689 0e92 000C      		lsl r0
 2690 0e94 AA0B      		sbc r26,r26
 2691 0e96 BB0B      		sbc r27,r27
 2692 0e98 BC01      		movw r22,r24
 2693 0e9a CD01      		movw r24,r26
 2694 0e9c 0E94 0000 		call __floatsisf
 2695 0ea0 7B01      		movw r14,r22
 2696 0ea2 8C01      		movw r16,r24
 2697 0ea4 8091 0000 		lds r24,tTS
 2698 0ea8 9091 0000 		lds r25,tTS+1
 2699 0eac A091 0000 		lds r26,tTS+2
 2700 0eb0 B091 0000 		lds r27,tTS+3
 2701 0eb4 9C01      		movw r18,r24
 2702 0eb6 AD01      		movw r20,r26
 2703 0eb8 C801      		movw r24,r16
 2704 0eba B701      		movw r22,r14
 2705 0ebc 0E94 0000 		call __mulsf3
 2706 0ec0 DC01      		movw r26,r24
 2707 0ec2 CB01      		movw r24,r22
 2708 0ec4 2DEB      		ldi r18,lo8(-67)
 2709 0ec6 37E3      		ldi r19,lo8(55)
 2710 0ec8 46E8      		ldi r20,lo8(-122)
 2711 0eca 57E3      		ldi r21,lo8(55)
 2712 0ecc BC01      		movw r22,r24
 2713 0ece CD01      		movw r24,r26
 2714 0ed0 0E94 0000 		call __divsf3
 2715 0ed4 DC01      		movw r26,r24
 2716 0ed6 CB01      		movw r24,r22
 2717 0ed8 8093 0000 		sts beaconInterval,r24
 2718 0edc 9093 0000 		sts beaconInterval+1,r25
 2719 0ee0 A093 0000 		sts beaconInterval+2,r26
 2720 0ee4 B093 0000 		sts beaconInterval+3,r27
 418:ServerLLDN.c  **** 			
 419:ServerLLDN.c  **** 			// Configure Timers
 420:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(time_slot_handler);
 2721               		.loc 6 420 0
 2722 0ee8 80E0      		ldi r24,lo8(gs(time_slot_handler))
 2723 0eea 90E0      		ldi r25,hi8(gs(time_slot_handler))
 2724 0eec 0E94 0000 		call macsc_set_cmp1_int_cb
 421:ServerLLDN.c  **** 			
 422:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2725               		.loc 6 422 0
 2726 0ef0 0E94 0000 		call macsc_enable_manual_bts
 423:ServerLLDN.c  **** 			
 424:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2727               		.loc 6 424 0
 2728 0ef4 81E0      		ldi r24,lo8(1)
 2729 0ef6 0E94 0000 		call macsc_enable_cmp_int
 425:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, numBaseTimeSlotperMgmt_online * tTS / (SYMBOL_TIME), MACSC_CC1
 2730               		.loc 6 425 0
 2731 0efa 8091 0000 		lds r24,tTS
 2732 0efe 9091 0000 		lds r25,tTS+1
 2733 0f02 A091 0000 		lds r26,tTS+2
 2734 0f06 B091 0000 		lds r27,tTS+3
 2735 0f0a 9C01      		movw r18,r24
 2736 0f0c AD01      		movw r20,r26
 2737 0f0e BC01      		movw r22,r24
 2738 0f10 CD01      		movw r24,r26
 2739 0f12 0E94 0000 		call __addsf3
 2740 0f16 DC01      		movw r26,r24
 2741 0f18 CB01      		movw r24,r22
 2742 0f1a 2DEB      		ldi r18,lo8(-67)
 2743 0f1c 37E3      		ldi r19,lo8(55)
 2744 0f1e 46E8      		ldi r20,lo8(-122)
 2745 0f20 57E3      		ldi r21,lo8(55)
 2746 0f22 BC01      		movw r22,r24
 2747 0f24 CD01      		movw r24,r26
 2748 0f26 0E94 0000 		call __divsf3
 2749 0f2a DC01      		movw r26,r24
 2750 0f2c CB01      		movw r24,r22
 2751 0f2e BC01      		movw r22,r24
 2752 0f30 CD01      		movw r24,r26
 2753 0f32 0E94 0000 		call __fixunssfsi
 2754 0f36 DC01      		movw r26,r24
 2755 0f38 CB01      		movw r24,r22
 2756 0f3a 21E0      		ldi r18,lo8(1)
 2757 0f3c AC01      		movw r20,r24
 2758 0f3e BD01      		movw r22,r26
 2759 0f40 81E0      		ldi r24,lo8(1)
 2760 0f42 0E94 0000 		call macsc_use_cmp
 426:ServerLLDN.c  **** 			
 427:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 2761               		.loc 6 427 0
 2762 0f46 60E0      		ldi r22,lo8(gs(appDataInd))
 2763 0f48 70E0      		ldi r23,hi8(gs(appDataInd))
 2764 0f4a 81E0      		ldi r24,lo8(1)
 2765 0f4c 0E94 0000 		call NWK_OpenEndpoint
 428:ServerLLDN.c  **** 	}
 2766               		.loc 6 428 0
 2767 0f50 0000      		nop
 2768               	/* epilogue start */
 2769 0f52 DF91      		pop r29
 2770 0f54 CF91      		pop r28
 2771 0f56 1F91      		pop r17
 2772 0f58 0F91      		pop r16
 2773 0f5a FF90      		pop r15
 2774 0f5c EF90      		pop r14
 2775 0f5e 0895      		ret
 2776               		.cfi_endproc
 2777               	.LFE145:
 2780               	appInit:
 2781               	.LFB146:
 429:ServerLLDN.c  **** 
 430:ServerLLDN.c  **** #else 
 431:ServerLLDN.c  **** 	uint8_t payloadSize = 22;
 432:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 433:ServerLLDN.c  **** 	uint8_t n = 0;
 434:ServerLLDN.c  **** 	
 435:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 436:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 437:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 438:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 439:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 22,
 440:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 441:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 442:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 443:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 444:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 22,
 445:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 446:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 447:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 448:ServerLLDN.c  **** 	static bool ack_received;
 449:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 450:ServerLLDN.c  **** 	bool associated = 0;
 451:ServerLLDN.c  **** 	int ts_time;
 452:ServerLLDN.c  **** 	uint8_t STATE = 10;
 453:ServerLLDN.c  **** 	
 454:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 455:ServerLLDN.c  **** 	{
 456:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 457:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 458:ServerLLDN.c  **** 			timer_stop();
 459:ServerLLDN.c  **** 		#endif
 460:ServerLLDN.c  **** 	}
 461:ServerLLDN.c  **** 
 462:ServerLLDN.c  **** 	static void start_timer(int delay)
 463:ServerLLDN.c  **** 	{
 464:ServerLLDN.c  **** 		#if MASTER_MACSC
 465:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 466:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(send_message_timeHandler);
 467:ServerLLDN.c  **** 		macsc_enable_cmp_int(MACSC_CC1);
 468:ServerLLDN.c  **** 		macsc_use_cmp(MACSC_RELATIVE_CMP, delay - 125, MACSC_CC1);
 469:ServerLLDN.c  **** 		#else
 470:ServerLLDN.c  **** 		timer_init();
 471:ServerLLDN.c  **** 		timer_delay(delay/2);
 472:ServerLLDN.c  **** 		hw_timer_setup_handler(send_message_timeHandler);
 473:ServerLLDN.c  **** 		timer_start();
 474:ServerLLDN.c  **** 		#endif
 475:ServerLLDN.c  **** 	}
 476:ServerLLDN.c  **** 	
 477:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 478:ServerLLDN.c  **** 	{
 479:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 480:ServerLLDN.c  **** 		STATE = rec_beacon->Flags.txState;
 481:ServerLLDN.c  **** 		PanId = rec_beacon->PanId;
 482:ServerLLDN.c  **** 		//  bom implementar rotinas pra se o nodo estiver associado a um coordeandor e se no estiver
 483:ServerLLDN.c  **** 		if( ((rec_beacon->Flags.txState == DISC_MODE && !ack_received && rec_beacon->confSeqNumber == 0x0
 484:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received)) && associated == 0)
 485:ServerLLDN.c  **** 		{
 486:ServerLLDN.c  **** 	
 487:ServerLLDN.c  **** 			ts_time =  ((p_var*sp + (m+ rec_beacon->TimeSlotSize  )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL
 488:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize * 2; // sy
 489:ServerLLDN.c  **** 			
 490:ServerLLDN.c  **** 			start_timer(msg_wait_time);
 491:ServerLLDN.c  **** 			
 492:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 493:ServerLLDN.c  **** 		}
 494:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == ONLINE_MODE && assTimeSlot != 0xFF && associated == 1)
 495:ServerLLDN.c  **** 		{
 496:ServerLLDN.c  **** 			ts_time = ((p_var*sp + (m+ n)*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME);
 497:ServerLLDN.c  **** 			int msg_wait_time = (2*rec_beacon->Flags.numBaseMgmtTimeslots + assTimeSlot) * ts_time;
 498:ServerLLDN.c  **** 			start_timer(msg_wait_time+30);
 499:ServerLLDN.c  **** 			ack_received = false;
 500:ServerLLDN.c  **** 			appState = APP_STATE_PREP_DATA_FRAME;
 501:ServerLLDN.c  **** 		}
 502:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 503:ServerLLDN.c  **** 		{
 504:ServerLLDN.c  **** 			printf("\n Reset beacon");
 505:ServerLLDN.c  **** 			ack_received = 0;
 506:ServerLLDN.c  **** 			associated = 0;
 507:ServerLLDN.c  **** 		}
 508:ServerLLDN.c  **** 		return true;
 509:ServerLLDN.c  **** 	}
 510:ServerLLDN.c  **** 	
 511:ServerLLDN.c  **** 	bool check_ack(int addr)
 512:ServerLLDN.c  **** 	{
 513:ServerLLDN.c  **** 		int pos =  addr / 8;
 514:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 515:ServerLLDN.c  **** 		printf("\n %hhx ", ackframe->ackFlags[pos]);
 516:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 517:ServerLLDN.c  **** 		{
 518:ServerLLDN.c  **** 			printf("ACK TRUE");
 519:ServerLLDN.c  **** 			return true;
 520:ServerLLDN.c  **** 		}
 521:ServerLLDN.c  **** 		else
 522:ServerLLDN.c  **** 			return false;
 523:ServerLLDN.c  **** 	}
 524:ServerLLDN.c  **** 	
 525:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 526:ServerLLDN.c  **** 	{
 527:ServerLLDN.c  **** 		#if !MASTER_MACSC
 528:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 529:ServerLLDN.c  **** 		#endif
 530:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 531:ServerLLDN.c  **** 
 532:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 533:ServerLLDN.c  **** 		{
 534:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 535:ServerLLDN.c  **** 			{
 536:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 537:ServerLLDN.c  **** 				appState = APP_STATE_RETRANSMIT_DATA;
 538:ServerLLDN.c  **** 			}
 539:ServerLLDN.c  **** 			else
 540:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 541:ServerLLDN.c  **** 		}
 542:ServerLLDN.c  **** 		return true;
 543:ServerLLDN.c  **** 	}
 544:ServerLLDN.c  **** 	
 545:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 546:ServerLLDN.c  **** 	{
 547:ServerLLDN.c  **** 		#if !MASTER_MACSC
 548:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 549:ServerLLDN.c  **** 		#endif
 550:ServerLLDN.c  **** 		
 551:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 552:ServerLLDN.c  **** 		{
 553:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 554:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 555:ServerLLDN.c  **** 			{
 556:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 557:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 558:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 559:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 560:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 561:ServerLLDN.c  **** 				associated = 1;
 562:ServerLLDN.c  **** 				printf("\nAssociado!");
 563:ServerLLDN.c  **** 			}
 564:ServerLLDN.c  **** 		}
 565:ServerLLDN.c  **** 		return true;
 566:ServerLLDN.c  **** 	}
 567:ServerLLDN.c  **** 
 568:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 569:ServerLLDN.c  **** 	{
 570:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 571:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 572:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 573:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 574:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 575:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 576:ServerLLDN.c  **** 	}
 577:ServerLLDN.c  **** 	
 578:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 579:ServerLLDN.c  **** 	{		
 580:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 581:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 582:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 583:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 584:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 585:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 586:ServerLLDN.c  **** 	}
 587:ServerLLDN.c  **** 	
 588:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 589:ServerLLDN.c  **** 	{
 590:ServerLLDN.c  **** 		
 591:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 592:ServerLLDN.c  **** 
 593:ServerLLDN.c  **** 	
 594:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 595:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 596:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 597:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 598:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 599:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 600:ServerLLDN.c  **** 	}
 601:ServerLLDN.c  **** 	
 602:ServerLLDN.c  **** 	
 603:ServerLLDN.c  **** #endif // APP_COORDINATOR
 604:ServerLLDN.c  **** 
 605:ServerLLDN.c  **** static void appInit(void)
 606:ServerLLDN.c  **** {
 2782               		.loc 6 606 0
 2783               		.cfi_startproc
 2784 0f60 CF93      		push r28
 2785               	.LCFI98:
 2786               		.cfi_def_cfa_offset 3
 2787               		.cfi_offset 28, -2
 2788 0f62 DF93      		push r29
 2789               	.LCFI99:
 2790               		.cfi_def_cfa_offset 4
 2791               		.cfi_offset 29, -3
 2792 0f64 CDB7      		in r28,__SP_L__
 2793 0f66 DEB7      		in r29,__SP_H__
 2794               	.LCFI100:
 2795               		.cfi_def_cfa_register 28
 2796               	/* prologue: function */
 2797               	/* frame size = 0 */
 2798               	/* stack size = 2 */
 2799               	.L__stack_usage = 2
 607:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 2800               		.loc 6 607 0
 2801 0f68 80E0      		ldi r24,0
 2802 0f6a 90E0      		ldi r25,0
 2803 0f6c 0E94 0000 		call NWK_SetAddr
 608:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 2804               		.loc 6 608 0
 2805 0f70 8FE0      		ldi r24,lo8(15)
 2806 0f72 0E94 0000 		call PHY_SetChannel
 609:ServerLLDN.c  **** 	PHY_SetRxState(true);
 2807               		.loc 6 609 0
 2808 0f76 81E0      		ldi r24,lo8(1)
 2809 0f78 0E94 0000 		call PHY_SetRxState
 610:ServerLLDN.c  **** 		
 611:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 612:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 613:ServerLLDN.c  **** 		tmrDelay.interval = 1;
 2810               		.loc 6 613 0
 2811 0f7c 81E0      		ldi r24,lo8(1)
 2812 0f7e 90E0      		ldi r25,0
 2813 0f80 A0E0      		ldi r26,0
 2814 0f82 B0E0      		ldi r27,0
 2815 0f84 8093 0000 		sts tmrDelay+6,r24
 2816 0f88 9093 0000 		sts tmrDelay+6+1,r25
 2817 0f8c A093 0000 		sts tmrDelay+6+2,r26
 2818 0f90 B093 0000 		sts tmrDelay+6+3,r27
 614:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 2819               		.loc 6 614 0
 2820 0f94 1092 0000 		sts tmrDelay+10,__zero_reg__
 615:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 2821               		.loc 6 615 0
 2822 0f98 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 2823 0f9a 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 2824 0f9c 9093 0000 		sts tmrDelay+11+1,r25
 2825 0fa0 8093 0000 		sts tmrDelay+11,r24
 616:ServerLLDN.c  **** 	  
 617:ServerLLDN.c  **** 		/* 
 618:ServerLLDN.c  **** 		* Disable CSMA/CA
 619:ServerLLDN.c  **** 		* Disable auto ACK
 620:ServerLLDN.c  **** 		*/
 621:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 2826               		.loc 6 621 0
 2827 0fa4 8EEF      		ldi r24,lo8(-2)
 2828 0fa6 9AEC      		ldi r25,lo8(-54)
 2829 0fa8 0E94 0000 		call NWK_SetPanId
 622:ServerLLDN.c  **** 		PanId = APP_PANID;
 2830               		.loc 6 622 0
 2831 0fac 8EEF      		ldi r24,lo8(-2)
 2832 0fae 8093 0000 		sts PanId,r24
 623:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 2833               		.loc 6 623 0
 2834 0fb2 8EEF      		ldi r24,lo8(-2)
 2835 0fb4 8093 0000 		sts ACKFrame,r24
 624:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 2836               		.loc 6 624 0
 2837 0fb8 81E0      		ldi r24,lo8(1)
 2838 0fba 0E94 0000 		call PHY_SetTdmaMode
 625:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 2839               		.loc 6 625 0
 2840 0fbe 60E0      		ldi r22,lo8(gs(appCommandInd))
 2841 0fc0 70E0      		ldi r23,hi8(gs(appCommandInd))
 2842 0fc2 83E0      		ldi r24,lo8(3)
 2843 0fc4 0E94 0000 		call NWK_OpenEndpoint
 626:ServerLLDN.c  **** 	#else
 627:ServerLLDN.c  **** 		/*
 628:ServerLLDN.c  **** 		 * Enable CSMA/CA
 629:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 630:ServerLLDN.c  **** 		 */
 631:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 632:ServerLLDN.c  **** 		// PHY_SetOptimizedCSMAValues();
 633:ServerLLDN.c  **** 		
 634:ServerLLDN.c  **** 		payloadSize = 127;
 635:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 636:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 637:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 638:ServerLLDN.c  **** 		/*
 639:ServerLLDN.c  **** 		* Configure interrupts callback functions
 640:ServerLLDN.c  **** 		*/
 641:ServerLLDN.c  **** 		
 642:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 643:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 2844               		.loc 6 643 0
 2845 0fc8 81E0      		ldi r24,lo8(1)
 2846 0fca 0E94 0000 		call PHY_SetPromiscuousMode
 644:ServerLLDN.c  **** 
 645:ServerLLDN.c  **** }
 2847               		.loc 6 645 0
 2848 0fce 0000      		nop
 2849               	/* epilogue start */
 2850 0fd0 DF91      		pop r29
 2851 0fd2 CF91      		pop r28
 2852 0fd4 0895      		ret
 2853               		.cfi_endproc
 2854               	.LFE146:
 2856               		.section	.rodata
 2857               	.LC7:
 2858 0048 0A25 642C 		.string	"\n%d, %d"
 2858      2025 6400 
 2859               	.global	__subsf3
 2860               	.LC8:
 2861 0050 0A46 696D 		.string	"\nFim de um Per\355odo"
 2861      2064 6520 
 2861      756D 2050 
 2861      6572 ED6F 
 2861      646F 00
 2862               	.LC9:
 2863 0063 0A2D 2D2D 		.string	"\n------- slot %d --------"
 2863      2D2D 2D2D 
 2863      2073 6C6F 
 2863      7420 2564 
 2863      202D 2D2D 
 2864               	.LC10:
 2865 007d 0A61 636B 		.string	"\nack_frame %hhx"
 2865      5F66 7261 
 2865      6D65 2025 
 2865      6868 7800 
 2866               		.text
 2868               	APP_TaskHandler:
 2869               	.LFB147:
 646:ServerLLDN.c  **** 
 647:ServerLLDN.c  **** static void APP_TaskHandler(void)
 648:ServerLLDN.c  **** {
 2870               		.loc 6 648 0
 2871               		.cfi_startproc
 2872 0fd6 CF92      		push r12
 2873               	.LCFI101:
 2874               		.cfi_def_cfa_offset 3
 2875               		.cfi_offset 12, -2
 2876 0fd8 DF92      		push r13
 2877               	.LCFI102:
 2878               		.cfi_def_cfa_offset 4
 2879               		.cfi_offset 13, -3
 2880 0fda EF92      		push r14
 2881               	.LCFI103:
 2882               		.cfi_def_cfa_offset 5
 2883               		.cfi_offset 14, -4
 2884 0fdc FF92      		push r15
 2885               	.LCFI104:
 2886               		.cfi_def_cfa_offset 6
 2887               		.cfi_offset 15, -5
 2888 0fde CF93      		push r28
 2889               	.LCFI105:
 2890               		.cfi_def_cfa_offset 7
 2891               		.cfi_offset 28, -6
 2892 0fe0 DF93      		push r29
 2893               	.LCFI106:
 2894               		.cfi_def_cfa_offset 8
 2895               		.cfi_offset 29, -7
 2896 0fe2 00D0      		rcall .
 2897 0fe4 00D0      		rcall .
 2898               	.LCFI107:
 2899               		.cfi_def_cfa_offset 12
 2900 0fe6 CDB7      		in r28,__SP_L__
 2901 0fe8 DEB7      		in r29,__SP_H__
 2902               	.LCFI108:
 2903               		.cfi_def_cfa_register 28
 2904               	/* prologue: function */
 2905               	/* frame size = 4 */
 2906               	/* stack size = 10 */
 2907               	.L__stack_usage = 10
 649:ServerLLDN.c  **** 	switch (appState){
 2908               		.loc 6 649 0
 2909 0fea 8091 0000 		lds r24,appState
 2910 0fee 882F      		mov r24,r24
 2911 0ff0 90E0      		ldi r25,0
 2912 0ff2 8230      		cpi r24,2
 2913 0ff4 9105      		cpc r25,__zero_reg__
 2914 0ff6 01F0      		breq .L77
 2915 0ff8 8330      		cpi r24,3
 2916 0ffa 9105      		cpc r25,__zero_reg__
 2917 0ffc 01F0      		breq .L78
 2918 0ffe 892B      		or r24,r25
 2919 1000 01F0      		breq .L79
 650:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 651:ServerLLDN.c  **** 		{
 652:ServerLLDN.c  **** 			appInit();
 653:ServerLLDN.c  **** 			#if APP_COORDINATOR
 654:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 655:ServerLLDN.c  **** 			#else
 656:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 657:ServerLLDN.c  **** 			#endif
 658:ServerLLDN.c  **** 			break;
 659:ServerLLDN.c  **** 		}
 660:ServerLLDN.c  **** 		case APP_STATE_SEND:
 661:ServerLLDN.c  **** 		{
 662:ServerLLDN.c  **** 			appSendData();
 663:ServerLLDN.c  **** 			#if APP_COORDINATOR
 664:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 665:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 666:ServerLLDN.c  **** 			#else
 667:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 668:ServerLLDN.c  **** 			#endif
 669:ServerLLDN.c  **** 			break;
 670:ServerLLDN.c  **** 		}
 671:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 672:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 673:ServerLLDN.c  **** 		{
 674:ServerLLDN.c  **** 			switch(appPanState)
 675:ServerLLDN.c  **** 			{
 676:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 677:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 678:ServerLLDN.c  **** 				{
 679:ServerLLDN.c  **** 					appPanReset();
 680:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 681:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 682:ServerLLDN.c  **** 					cycles_counter = 0;
 683:ServerLLDN.c  **** 					break;
 684:ServerLLDN.c  **** 				}
 685:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 686:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 687:ServerLLDN.c  **** 				{
 688:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 689:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 690:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 691:ServerLLDN.c  **** 					 */
 692:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 2)
 693:ServerLLDN.c  **** 					{	
 694:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 695:ServerLLDN.c  **** 						counter_associados = 0;
 696:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 697:ServerLLDN.c  **** 						// macsc_disable_cmp_int(MACSC_CC1);
 698:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 699:ServerLLDN.c  **** 						msgReq.options = 0;
 700:ServerLLDN.c  **** 						
 701:ServerLLDN.c  **** 						macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 702:ServerLLDN.c  **** 						macLLDNRetransmitTS = assTimeSlot;
 703:ServerLLDN.c  **** 						macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;
 704:ServerLLDN.c  **** 						
 705:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 706:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 707:ServerLLDN.c  **** 						ACKFrame_size = 0;
 708:ServerLLDN.c  **** 						
 709:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 710:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 711:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 712:ServerLLDN.c  **** 					}
 713:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 714:ServerLLDN.c  **** 					else 
 715:ServerLLDN.c  **** 					{
 716:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 717:ServerLLDN.c  **** 						appPanDiscInit();
 718:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 719:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 720:ServerLLDN.c  **** 					}
 721:ServerLLDN.c  **** 					break;
 722:ServerLLDN.c  **** 				}
 723:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 724:ServerLLDN.c  **** 				{
 725:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 726:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 727:ServerLLDN.c  **** 					msgReq.data = NULL;
 728:ServerLLDN.c  **** 					msgReq.size = 0;
 729:ServerLLDN.c  **** 					
 730:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 731:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 732:ServerLLDN.c  **** 					break;
 733:ServerLLDN.c  **** 				}
 734:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 735:ServerLLDN.c  **** 				{
 736:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 737:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 738:ServerLLDN.c  **** 					 */
 739:ServerLLDN.c  **** 					appPanPrepareACK();
 740:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 741:ServerLLDN.c  **** 					
 742:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 743:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 744:ServerLLDN.c  **** 					break;
 745:ServerLLDN.c  **** 				}
 746:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 747:ServerLLDN.c  **** 				{
 748:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 749:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 750:ServerLLDN.c  **** 					msgReq.data = NULL;
 751:ServerLLDN.c  **** 					msgReq.size = 0;
 752:ServerLLDN.c  **** 					
 753:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 754:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 755:ServerLLDN.c  **** 					break;
 756:ServerLLDN.c  **** 
 757:ServerLLDN.c  **** 				}
 758:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 759:ServerLLDN.c  **** 				{
 760:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 761:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 762:ServerLLDN.c  **** 					msgReq.data = NULL;
 763:ServerLLDN.c  **** 					msgReq.size = 0;
 764:ServerLLDN.c  **** 					
 765:ServerLLDN.c  **** 					counter_delay_msg = 0;
 766:ServerLLDN.c  **** 					
 767:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 768:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 769:ServerLLDN.c  **** 					
 770:ServerLLDN.c  **** 					break;
 771:ServerLLDN.c  **** 				}
 772:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 773:ServerLLDN.c  **** 				{
 774:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 775:ServerLLDN.c  **** 					{
 776:ServerLLDN.c  **** 						CopyToConfigRequest();
 777:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 778:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 779:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 780:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 781:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 782:ServerLLDN.c  **** 						
 783:ServerLLDN.c  **** 						// Delay between messages
 784:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
 785:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 786:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 787:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 788:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 789:ServerLLDN.c  **** 						
 790:ServerLLDN.c  **** 						counter_associados++;
 791:ServerLLDN.c  **** 					}
 792:ServerLLDN.c  **** 					else
 793:ServerLLDN.c  **** 					{
 794:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
 795:ServerLLDN.c  **** 						{
 796:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
 797:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 798:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 799:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 800:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 801:ServerLLDN.c  **** 						}
 802:ServerLLDN.c  **** 						
 803:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
 804:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 805:ServerLLDN.c  **** 					}
 806:ServerLLDN.c  **** 					break;
 807:ServerLLDN.c  **** 				}
 808:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 809:ServerLLDN.c  **** 				{
 810:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 811:ServerLLDN.c  **** 					msgReq.data = NULL;
 812:ServerLLDN.c  **** 					msgReq.size = 0;
 813:ServerLLDN.c  **** 					
 814:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 815:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 816:ServerLLDN.c  **** 					cycles_counter++;	
 817:ServerLLDN.c  **** 					
 818:ServerLLDN.c  **** 					break;
 819:ServerLLDN.c  **** 				}
 820:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 821:ServerLLDN.c  **** 				{
 822:ServerLLDN.c  **** 					if(cycles_counter != 0)
 823:ServerLLDN.c  **** 					{
 824:ServerLLDN.c  **** 					appPanOnlineInit();
 825:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 826:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP;
 827:ServerLLDN.c  **** 	
 828:ServerLLDN.c  **** 					cycles_counter--;
 829:ServerLLDN.c  **** 					}
 830:ServerLLDN.c  **** 					break;
 831:ServerLLDN.c  **** 				}
 832:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
 833:ServerLLDN.c  **** 				{
 834:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
 835:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 836:ServerLLDN.c  **** 					ACKFrame_size = 0;
 837:ServerLLDN.c  **** 					
 838:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
 839:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 840:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 841:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 842:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 843:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 844:ServerLLDN.c  **** 					
 845:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 846:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 847:ServerLLDN.c  **** 					break;
 848:ServerLLDN.c  **** 				}				
 849:ServerLLDN.c  **** 				case APP_PAN_STATE_CHECK_TS:
 850:ServerLLDN.c  **** 				{
 851:ServerLLDN.c  **** 					if(timeslot_counter >= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS))
 852:ServerLLDN.c  **** 					{
 853:ServerLLDN.c  **** 						if(!association_request)
 854:ServerLLDN.c  **** 						{
 855:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(end_of_association_delay_handler);
 856:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 857:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 858:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 859:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, 5 * beaconInterval_association, MACSC_CC1);
 860:ServerLLDN.c  **** 						}
 861:ServerLLDN.c  **** 						else
 862:ServerLLDN.c  **** 						{
 863:ServerLLDN.c  **** 							printf("\nFim de um Perodo");
 864:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 865:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC2);
 866:ServerLLDN.c  **** 							
 867:ServerLLDN.c  **** 						}
 868:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 869:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 870:ServerLLDN.c  **** 					}
 871:ServerLLDN.c  **** 					else
 872:ServerLLDN.c  **** 					{
 873:ServerLLDN.c  **** 
 874:ServerLLDN.c  **** 						/* check if coordinator received any message in last time slot, used to calculate success rat
 875:ServerLLDN.c  **** 						if(timeslot_counter >= 2*MacLLDNMgmtTS && !data_received)
 876:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 877:ServerLLDN.c  **** 						data_received = false;
 878:ServerLLDN.c  **** 						
 879:ServerLLDN.c  **** 						printf("\n------- slot %d --------", timeslot_counter);
 880:ServerLLDN.c  **** 						
 881:ServerLLDN.c  **** 						if(timeslot_counter == 2*MacLLDNMgmtTS + macLLDNRetransmitTS)
 882:ServerLLDN.c  **** 						{
 883:ServerLLDN.c  **** 							data_received = true;
 884:ServerLLDN.c  **** 							printf("\nack_frame %hhx", ACKFrame.ackFlags[0]);
 885:ServerLLDN.c  **** 							appState = APP_STATE_SEND;
 886:ServerLLDN.c  **** 							appPanState = APP_PAN_STATE_IDLE;
 887:ServerLLDN.c  **** 						}
 888:ServerLLDN.c  **** 						else
 889:ServerLLDN.c  **** 							appState = APP_STATE_IDLE;
 890:ServerLLDN.c  **** 						timeslot_counter++;
 891:ServerLLDN.c  **** 					}
 892:ServerLLDN.c  **** 					break;
 893:ServerLLDN.c  **** 				}
 894:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 895:ServerLLDN.c  **** 				{
 896:ServerLLDN.c  **** 					msgReq.options = 0;
 897:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 898:ServerLLDN.c  **** 					break;
 899:ServerLLDN.c  **** 				}
 900:ServerLLDN.c  **** 			}
 901:ServerLLDN.c  **** 			break;	
 902:ServerLLDN.c  **** 		}
 903:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 904:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 905:ServerLLDN.c  **** 		{
 906:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
 907:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 908:ServerLLDN.c  **** 			break;
 909:ServerLLDN.c  **** 		}
 910:ServerLLDN.c  **** 		
 911:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 912:ServerLLDN.c  **** 		{
 913:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 914:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
 915:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 916:ServerLLDN.c  **** 			}
 917:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 918:ServerLLDN.c  **** 			else {
 919:ServerLLDN.c  **** 				#if MASTER_MACSC
 920:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 921:ServerLLDN.c  **** 				#else
 922:ServerLLDN.c  **** 				timer_stop();
 923:ServerLLDN.c  **** 				#endif
 924:ServerLLDN.c  **** 			}
 925:ServerLLDN.c  **** 			ack_received = 0;
 926:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 927:ServerLLDN.c  **** 			break;
 928:ServerLLDN.c  **** 		}
 929:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
 930:ServerLLDN.c  **** 		{
 931:ServerLLDN.c  **** 			appPrepareDataFrame();
 932:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 933:ServerLLDN.c  **** 			break;
 934:ServerLLDN.c  **** 		}
 935:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
 936:ServerLLDN.c  **** 		{
 937:ServerLLDN.c  **** 			if(!ack_received)
 938:ServerLLDN.c  **** 			{
 939:ServerLLDN.c  **** 				int retransmition_slot = 0;
 940:ServerLLDN.c  **** 				
 941:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot && i < (rec_beacon->NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 942:ServerLLDN.c  **** 					if( check_ack(i) )
 943:ServerLLDN.c  **** 						retransmition_slot++;
 944:ServerLLDN.c  **** 						
 945:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
 946:ServerLLDN.c  **** 				if(retransmition_slot == 0)
 947:ServerLLDN.c  **** 				{
 948:ServerLLDN.c  **** 					appState = APP_STATE_SEND;			
 949:ServerLLDN.c  **** 				}
 950:ServerLLDN.c  **** 				else
 951:ServerLLDN.c  **** 				{
 952:ServerLLDN.c  **** 					#if MASTER_MACSC
 953:ServerLLDN.c  **** 					macsc_enable_manual_bts();
 954:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
 955:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
 956:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
 957:ServerLLDN.c  **** 					#endif
 958:ServerLLDN.c  **** 				}
 959:ServerLLDN.c  **** 			}
 960:ServerLLDN.c  **** 			else
 961:ServerLLDN.c  **** 			{
 962:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;	
 963:ServerLLDN.c  **** 			}
 964:ServerLLDN.c  **** 			
 965:ServerLLDN.c  **** 			break;
 966:ServerLLDN.c  **** 		}
 967:ServerLLDN.c  **** 		#endif
 968:ServerLLDN.c  **** 		default:
 969:ServerLLDN.c  **** 		{
 970:ServerLLDN.c  **** 			break;
 2920               		.loc 6 970 0
 2921 1002 00C0      		rjmp .L80
 2922               	.L79:
 652:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2923               		.loc 6 652 0
 2924 1004 0E94 0000 		call appInit
 654:ServerLLDN.c  **** 			#else
 2925               		.loc 6 654 0
 2926 1008 83E0      		ldi r24,lo8(3)
 2927 100a 8093 0000 		sts appState,r24
 658:ServerLLDN.c  **** 		}
 2928               		.loc 6 658 0
 2929 100e 00C0      		rjmp .L80
 2930               	.L77:
 662:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2931               		.loc 6 662 0
 2932 1010 0E94 0000 		call appSendData
 665:ServerLLDN.c  **** 			#else
 2933               		.loc 6 665 0
 2934 1014 83E0      		ldi r24,lo8(3)
 2935 1016 8093 0000 		sts appState,r24
 669:ServerLLDN.c  **** 		}
 2936               		.loc 6 669 0
 2937 101a 00C0      		rjmp .L80
 2938               	.L78:
 674:ServerLLDN.c  **** 			{
 2939               		.loc 6 674 0
 2940 101c 8091 0000 		lds r24,appPanState
 2941 1020 882F      		mov r24,r24
 2942 1022 90E0      		ldi r25,0
 2943 1024 092E      		mov __tmp_reg__,r25
 2944 1026 000C      		lsl r0
 2945 1028 AA0B      		sbc r26,r26
 2946 102a BB0B      		sbc r27,r27
 2947 102c 40E0      		ldi r20,0
 2948 102e 50E0      		ldi r21,0
 2949 1030 2DE0      		ldi r18,lo8(13)
 2950 1032 30E0      		ldi r19,0
 2951 1034 841B      		sub r24,r20
 2952 1036 950B      		sbc r25,r21
 2953 1038 2817      		cp r18,r24
 2954 103a 3907      		cpc r19,r25
 2955 103c 00F4      		brsh .+2
 2956 103e 00C0      		rjmp .L113
 2957 1040 8050      		subi r24,lo8(-(gs(.L83)))
 2958 1042 9040      		sbci r25,hi8(-(gs(.L83)))
 2959 1044 FC01      		movw r30,r24
 2960 1046 0C94 0000 		jmp __tablejump2__
 2961               		.section	.progmem.gcc_sw_table,"a",@progbits
 2962               		.p2align	1
 2963               	.L83:
 2964 0000 0000      		.word gs(.L82)
 2965 0002 0000      		.word gs(.L84)
 2966 0004 0000      		.word gs(.L85)
 2967 0006 0000      		.word gs(.L86)
 2968 0008 0000      		.word gs(.L87)
 2969 000a 0000      		.word gs(.L88)
 2970 000c 0000      		.word gs(.L89)
 2971 000e 0000      		.word gs(.L90)
 2972 0010 0000      		.word gs(.L91)
 2973 0012 0000      		.word gs(.L92)
 2974 0014 0000      		.word gs(.L113)
 2975 0016 0000      		.word gs(.L113)
 2976 0018 0000      		.word gs(.L93)
 2977 001a 0000      		.word gs(.L94)
 2978               		.text
 2979               	.L84:
 679:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2980               		.loc 6 679 0
 2981 104a 0E94 0000 		call appPanReset
 680:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 2982               		.loc 6 680 0
 2983 104e 82E0      		ldi r24,lo8(2)
 2984 1050 8093 0000 		sts appPanState,r24
 681:ServerLLDN.c  **** 					cycles_counter = 0;
 2985               		.loc 6 681 0
 2986 1054 82E0      		ldi r24,lo8(2)
 2987 1056 8093 0000 		sts appState,r24
 682:ServerLLDN.c  **** 					break;
 2988               		.loc 6 682 0
 2989 105a 1092 0000 		sts cycles_counter,__zero_reg__
 683:ServerLLDN.c  **** 				}
 2990               		.loc 6 683 0
 2991 105e 00C0      		rjmp .L81
 2992               	.L85:
 692:ServerLLDN.c  **** 					{	
 2993               		.loc 6 692 0
 2994 1060 8091 0000 		lds r24,counter_associados
 2995 1064 9091 0000 		lds r25,counter_associados+1
 2996 1068 0C97      		sbiw r24,12
 2997 106a 01F0      		breq .L95
 692:ServerLLDN.c  **** 					{	
 2998               		.loc 6 692 0 is_stmt 0 discriminator 1
 2999 106c 8091 0000 		lds r24,cycles_counter
 3000 1070 8230      		cpi r24,lo8(2)
 3001 1072 00F4      		brsh .+2
 3002 1074 00C0      		rjmp .L96
 3003               	.L95:
 694:ServerLLDN.c  **** 						counter_associados = 0;
 3004               		.loc 6 694 0 is_stmt 1
 3005 1076 2091 0000 		lds r18,counter_associados
 3006 107a 3091 0000 		lds r19,counter_associados+1
 3007 107e 8091 0000 		lds r24,cycles_counter
 3008 1082 882F      		mov r24,r24
 3009 1084 90E0      		ldi r25,0
 3010 1086 432F      		mov r20,r19
 3011 1088 4F93      		push r20
 3012 108a 2F93      		push r18
 3013 108c 292F      		mov r18,r25
 3014 108e 2F93      		push r18
 3015 1090 8F93      		push r24
 3016 1092 80E0      		ldi r24,lo8(.LC7)
 3017 1094 90E0      		ldi r25,hi8(.LC7)
 3018 1096 892F      		mov r24,r25
 3019 1098 8F93      		push r24
 3020 109a 80E0      		ldi r24,lo8(.LC7)
 3021 109c 90E0      		ldi r25,hi8(.LC7)
 3022 109e 8F93      		push r24
 3023 10a0 0E94 0000 		call printf
 3024 10a4 0F90      		pop __tmp_reg__
 3025 10a6 0F90      		pop __tmp_reg__
 3026 10a8 0F90      		pop __tmp_reg__
 3027 10aa 0F90      		pop __tmp_reg__
 3028 10ac 0F90      		pop __tmp_reg__
 3029 10ae 0F90      		pop __tmp_reg__
 695:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3030               		.loc 6 695 0
 3031 10b0 1092 0000 		sts counter_associados+1,__zero_reg__
 3032 10b4 1092 0000 		sts counter_associados,__zero_reg__
 698:ServerLLDN.c  **** 						msgReq.options = 0;
 3033               		.loc 6 698 0
 3034 10b8 82E0      		ldi r24,lo8(2)
 3035 10ba 0E94 0000 		call macsc_disable_cmp_int
 699:ServerLLDN.c  **** 						
 3036               		.loc 6 699 0
 3037 10be 1092 0000 		sts msgReq+9+1,__zero_reg__
 3038 10c2 1092 0000 		sts msgReq+9,__zero_reg__
 701:ServerLLDN.c  **** 						macLLDNRetransmitTS = assTimeSlot;
 3039               		.loc 6 701 0
 3040 10c6 8091 0000 		lds r24,assTimeSlot
 3041 10ca 9091 0000 		lds r25,assTimeSlot+1
 3042 10ce 880F      		lsl r24
 3043 10d0 991F      		rol r25
 3044 10d2 0196      		adiw r24,1
 3045 10d4 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 3046 10d8 8093 0000 		sts macLLDNnumUplinkTS,r24
 702:ServerLLDN.c  **** 						macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;
 3047               		.loc 6 702 0
 3048 10dc 8091 0000 		lds r24,assTimeSlot
 3049 10e0 9091 0000 		lds r25,assTimeSlot+1
 3050 10e4 9093 0000 		sts macLLDNRetransmitTS+1,r25
 3051 10e8 8093 0000 		sts macLLDNRetransmitTS,r24
 703:ServerLLDN.c  **** 						
 3052               		.loc 6 703 0
 3053 10ec 8091 0000 		lds r24,macLLDNnumUplinkTS
 3054 10f0 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3055 10f4 0296      		adiw r24,2
 3056 10f6 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 3057 10fa 8093 0000 		sts macLLDNnumTimeSlots,r24
 3058               	.LBB12:
 705:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3059               		.loc 6 705 0
 3060 10fe 1A82      		std Y+2,__zero_reg__
 3061 1100 1982      		std Y+1,__zero_reg__
 3062 1102 00C0      		rjmp .L97
 3063               	.L98:
 706:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3064               		.loc 6 706 0 discriminator 3
 3065 1104 8981      		ldd r24,Y+1
 3066 1106 9A81      		ldd r25,Y+2
 3067 1108 8050      		subi r24,lo8(-(ACKFrame+1))
 3068 110a 9040      		sbci r25,hi8(-(ACKFrame+1))
 3069 110c FC01      		movw r30,r24
 3070 110e 1082      		st Z,__zero_reg__
 705:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3071               		.loc 6 705 0 discriminator 3
 3072 1110 8981      		ldd r24,Y+1
 3073 1112 9A81      		ldd r25,Y+2
 3074 1114 0196      		adiw r24,1
 3075 1116 9A83      		std Y+2,r25
 3076 1118 8983      		std Y+1,r24
 3077               	.L97:
 705:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3078               		.loc 6 705 0 is_stmt 0 discriminator 1
 3079 111a 8981      		ldd r24,Y+1
 3080 111c 9A81      		ldd r25,Y+2
 3081 111e 8097      		sbiw r24,32
 3082 1120 04F0      		brlt .L98
 3083               	.LBE12:
 707:ServerLLDN.c  **** 						
 3084               		.loc 6 707 0 is_stmt 1
 3085 1122 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3086 1126 1092 0000 		sts ACKFrame_size,__zero_reg__
 709:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3087               		.loc 6 709 0
 3088 112a 81E0      		ldi r24,lo8(1)
 3089 112c 8093 0000 		sts appState,r24
 710:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3090               		.loc 6 710 0
 3091 1130 89E0      		ldi r24,lo8(9)
 3092 1132 8093 0000 		sts appPanState,r24
 711:ServerLLDN.c  **** 					}
 3093               		.loc 6 711 0
 3094 1136 85E0      		ldi r24,lo8(5)
 3095 1138 8093 0000 		sts cycles_counter,r24
 721:ServerLLDN.c  **** 				}
 3096               		.loc 6 721 0
 3097 113c 00C0      		rjmp .L81
 3098               	.L96:
 717:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3099               		.loc 6 717 0
 3100 113e 0E94 0000 		call appPanDiscInit
 718:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3101               		.loc 6 718 0
 3102 1142 81E0      		ldi r24,lo8(1)
 3103 1144 8093 0000 		sts appState,r24
 719:ServerLLDN.c  **** 					}
 3104               		.loc 6 719 0
 3105 1148 83E0      		ldi r24,lo8(3)
 3106 114a 8093 0000 		sts appPanState,r24
 721:ServerLLDN.c  **** 				}
 3107               		.loc 6 721 0
 3108 114e 00C0      		rjmp .L81
 3109               	.L86:
 726:ServerLLDN.c  **** 					msgReq.data = NULL;
 3110               		.loc 6 726 0
 3111 1150 80E4      		ldi r24,lo8(64)
 3112 1152 99E0      		ldi r25,lo8(9)
 3113 1154 9093 0000 		sts msgReq+9+1,r25
 3114 1158 8093 0000 		sts msgReq+9,r24
 727:ServerLLDN.c  **** 					msgReq.size = 0;
 3115               		.loc 6 727 0
 3116 115c 1092 0000 		sts msgReq+13+1,__zero_reg__
 3117 1160 1092 0000 		sts msgReq+13,__zero_reg__
 728:ServerLLDN.c  **** 					
 3118               		.loc 6 728 0
 3119 1164 1092 0000 		sts msgReq+15,__zero_reg__
 730:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3120               		.loc 6 730 0
 3121 1168 84E0      		ldi r24,lo8(4)
 3122 116a 8093 0000 		sts appState,r24
 731:ServerLLDN.c  **** 					break;
 3123               		.loc 6 731 0
 3124 116e 84E0      		ldi r24,lo8(4)
 3125 1170 8093 0000 		sts appPanState,r24
 732:ServerLLDN.c  **** 				}
 3126               		.loc 6 732 0
 3127 1174 00C0      		rjmp .L81
 3128               	.L87:
 739:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 3129               		.loc 6 739 0
 3130 1176 0E94 0000 		call appPanPrepareACK
 740:ServerLLDN.c  **** 					
 3131               		.loc 6 740 0
 3132 117a 80E0      		ldi r24,lo8(tmrDelay)
 3133 117c 90E0      		ldi r25,hi8(tmrDelay)
 3134 117e 0E94 0000 		call SYS_TimerStart
 742:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3135               		.loc 6 742 0
 3136 1182 85E0      		ldi r24,lo8(5)
 3137 1184 8093 0000 		sts appPanState,r24
 743:ServerLLDN.c  **** 					break;
 3138               		.loc 6 743 0
 3139 1188 81E0      		ldi r24,lo8(1)
 3140 118a 8093 0000 		sts appState,r24
 744:ServerLLDN.c  **** 				}
 3141               		.loc 6 744 0
 3142 118e 00C0      		rjmp .L81
 3143               	.L88:
 749:ServerLLDN.c  **** 					msgReq.data = NULL;
 3144               		.loc 6 749 0
 3145 1190 80E4      		ldi r24,lo8(64)
 3146 1192 92E0      		ldi r25,lo8(2)
 3147 1194 9093 0000 		sts msgReq+9+1,r25
 3148 1198 8093 0000 		sts msgReq+9,r24
 750:ServerLLDN.c  **** 					msgReq.size = 0;
 3149               		.loc 6 750 0
 3150 119c 1092 0000 		sts msgReq+13+1,__zero_reg__
 3151 11a0 1092 0000 		sts msgReq+13,__zero_reg__
 751:ServerLLDN.c  **** 					
 3152               		.loc 6 751 0
 3153 11a4 1092 0000 		sts msgReq+15,__zero_reg__
 753:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3154               		.loc 6 753 0
 3155 11a8 81E0      		ldi r24,lo8(1)
 3156 11aa 8093 0000 		sts appState,r24
 754:ServerLLDN.c  **** 					break;
 3157               		.loc 6 754 0
 3158 11ae 87E0      		ldi r24,lo8(7)
 3159 11b0 8093 0000 		sts appPanState,r24
 755:ServerLLDN.c  **** 
 3160               		.loc 6 755 0
 3161 11b4 00C0      		rjmp .L81
 3162               	.L90:
 761:ServerLLDN.c  **** 					msgReq.data = NULL;
 3163               		.loc 6 761 0
 3164 11b6 80E4      		ldi r24,lo8(64)
 3165 11b8 9AE0      		ldi r25,lo8(10)
 3166 11ba 9093 0000 		sts msgReq+9+1,r25
 3167 11be 8093 0000 		sts msgReq+9,r24
 762:ServerLLDN.c  **** 					msgReq.size = 0;
 3168               		.loc 6 762 0
 3169 11c2 1092 0000 		sts msgReq+13+1,__zero_reg__
 3170 11c6 1092 0000 		sts msgReq+13,__zero_reg__
 763:ServerLLDN.c  **** 					
 3171               		.loc 6 763 0
 3172 11ca 1092 0000 		sts msgReq+15,__zero_reg__
 765:ServerLLDN.c  **** 					
 3173               		.loc 6 765 0
 3174 11ce 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3175 11d2 1092 0000 		sts counter_delay_msg,__zero_reg__
 767:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3176               		.loc 6 767 0
 3177 11d6 81E0      		ldi r24,lo8(1)
 3178 11d8 8093 0000 		sts appState,r24
 768:ServerLLDN.c  **** 					
 3179               		.loc 6 768 0
 3180 11dc 86E0      		ldi r24,lo8(6)
 3181 11de 8093 0000 		sts appPanState,r24
 770:ServerLLDN.c  **** 				}
 3182               		.loc 6 770 0
 3183 11e2 00C0      		rjmp .L81
 3184               	.L89:
 774:ServerLLDN.c  **** 					{
 3185               		.loc 6 774 0
 3186 11e4 8091 0000 		lds r24,conf_req_list
 3187 11e8 9091 0000 		lds r25,conf_req_list+1
 3188 11ec 892B      		or r24,r25
 3189 11ee 01F0      		breq .L100
 776:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 3190               		.loc 6 776 0
 3191 11f0 0E94 0000 		call CopyToConfigRequest
 777:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3192               		.loc 6 777 0
 3193 11f4 80E0      		ldi r24,0
 3194 11f6 90E8      		ldi r25,lo8(-128)
 3195 11f8 9093 0000 		sts msgReq+9+1,r25
 3196 11fc 8093 0000 		sts msgReq+9,r24
 778:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3197               		.loc 6 778 0
 3198 1200 80E0      		ldi r24,lo8(config_request_frame)
 3199 1202 90E0      		ldi r25,hi8(config_request_frame)
 3200 1204 9093 0000 		sts msgReq+13+1,r25
 3201 1208 8093 0000 		sts msgReq+13,r24
 779:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3202               		.loc 6 779 0
 3203 120c 86E0      		ldi r24,lo8(6)
 3204 120e 8093 0000 		sts msgReq+15,r24
 780:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3205               		.loc 6 780 0
 3206 1212 81E0      		ldi r24,lo8(1)
 3207 1214 8093 0000 		sts appState,r24
 781:ServerLLDN.c  **** 						
 3208               		.loc 6 781 0
 3209 1218 86E0      		ldi r24,lo8(6)
 3210 121a 8093 0000 		sts appPanState,r24
 784:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3211               		.loc 6 784 0
 3212 121e 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3213 1220 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3214 1222 0E94 0000 		call macsc_set_cmp1_int_cb
 785:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3215               		.loc 6 785 0
 3216 1226 81E0      		ldi r24,lo8(1)
 3217 1228 0E94 0000 		call macsc_disable_cmp_int
 786:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3218               		.loc 6 786 0
 3219 122c 0E94 0000 		call macsc_enable_manual_bts
 787:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3220               		.loc 6 787 0
 3221 1230 81E0      		ldi r24,lo8(1)
 3222 1232 0E94 0000 		call macsc_enable_cmp_int
 788:ServerLLDN.c  **** 						
 3223               		.loc 6 788 0
 3224 1236 21E0      		ldi r18,lo8(1)
 3225 1238 4BE4      		ldi r20,lo8(75)
 3226 123a 50E0      		ldi r21,0
 3227 123c 60E0      		ldi r22,0
 3228 123e 70E0      		ldi r23,0
 3229 1240 81E0      		ldi r24,lo8(1)
 3230 1242 0E94 0000 		call macsc_use_cmp
 790:ServerLLDN.c  **** 					}
 3231               		.loc 6 790 0
 3232 1246 8091 0000 		lds r24,counter_associados
 3233 124a 9091 0000 		lds r25,counter_associados+1
 3234 124e 0196      		adiw r24,1
 3235 1250 9093 0000 		sts counter_associados+1,r25
 3236 1254 8093 0000 		sts counter_associados,r24
 806:ServerLLDN.c  **** 				}
 3237               		.loc 6 806 0
 3238 1258 00C0      		rjmp .L81
 3239               	.L100:
 794:ServerLLDN.c  **** 						{
 3240               		.loc 6 794 0
 3241 125a 8091 0000 		lds r24,counter_delay_msg
 3242 125e 9091 0000 		lds r25,counter_delay_msg+1
 3243 1262 1816      		cp __zero_reg__,r24
 3244 1264 1906      		cpc __zero_reg__,r25
 3245 1266 04F4      		brge .L102
 796:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3246               		.loc 6 796 0
 3247 1268 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 3248 126a 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 3249 126c 0E94 0000 		call macsc_set_cmp1_int_cb
 797:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3250               		.loc 6 797 0
 3251 1270 81E0      		ldi r24,lo8(1)
 3252 1272 0E94 0000 		call macsc_disable_cmp_int
 798:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3253               		.loc 6 798 0
 3254 1276 0E94 0000 		call macsc_enable_manual_bts
 799:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 3255               		.loc 6 799 0
 3256 127a 81E0      		ldi r24,lo8(1)
 3257 127c 0E94 0000 		call macsc_enable_cmp_int
 800:ServerLLDN.c  **** 						}
 3258               		.loc 6 800 0
 3259 1280 C090 0000 		lds r12,beaconInterval_association
 3260 1284 D090 0000 		lds r13,beaconInterval_association+1
 3261 1288 E090 0000 		lds r14,beaconInterval_association+2
 3262 128c F090 0000 		lds r15,beaconInterval_association+3
 3263 1290 2091 0000 		lds r18,counter_delay_msg
 3264 1294 3091 0000 		lds r19,counter_delay_msg+1
 3265 1298 4BE4      		ldi r20,lo8(75)
 3266 129a 429F      		mul r20,r18
 3267 129c C001      		movw r24,r0
 3268 129e 439F      		mul r20,r19
 3269 12a0 900D      		add r25,r0
 3270 12a2 1124      		clr __zero_reg__
 3271 12a4 092E      		mov __tmp_reg__,r25
 3272 12a6 000C      		lsl r0
 3273 12a8 AA0B      		sbc r26,r26
 3274 12aa BB0B      		sbc r27,r27
 3275 12ac BC01      		movw r22,r24
 3276 12ae CD01      		movw r24,r26
 3277 12b0 0E94 0000 		call __floatsisf
 3278 12b4 DC01      		movw r26,r24
 3279 12b6 CB01      		movw r24,r22
 3280 12b8 9C01      		movw r18,r24
 3281 12ba AD01      		movw r20,r26
 3282 12bc C701      		movw r24,r14
 3283 12be B601      		movw r22,r12
 3284 12c0 0E94 0000 		call __subsf3
 3285 12c4 DC01      		movw r26,r24
 3286 12c6 CB01      		movw r24,r22
 3287 12c8 BC01      		movw r22,r24
 3288 12ca CD01      		movw r24,r26
 3289 12cc 0E94 0000 		call __fixunssfsi
 3290 12d0 DC01      		movw r26,r24
 3291 12d2 CB01      		movw r24,r22
 3292 12d4 21E0      		ldi r18,lo8(1)
 3293 12d6 AC01      		movw r20,r24
 3294 12d8 BD01      		movw r22,r26
 3295 12da 81E0      		ldi r24,lo8(1)
 3296 12dc 0E94 0000 		call macsc_use_cmp
 3297               	.L102:
 803:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 3298               		.loc 6 803 0
 3299 12e0 83E0      		ldi r24,lo8(3)
 3300 12e2 8093 0000 		sts appState,r24
 804:ServerLLDN.c  **** 					}
 3301               		.loc 6 804 0
 3302 12e6 88E0      		ldi r24,lo8(8)
 3303 12e8 8093 0000 		sts appPanState,r24
 806:ServerLLDN.c  **** 				}
 3304               		.loc 6 806 0
 3305 12ec 00C0      		rjmp .L81
 3306               	.L91:
 810:ServerLLDN.c  **** 					msgReq.data = NULL;
 3307               		.loc 6 810 0
 3308 12ee 80E4      		ldi r24,lo8(64)
 3309 12f0 92E1      		ldi r25,lo8(18)
 3310 12f2 9093 0000 		sts msgReq+9+1,r25
 3311 12f6 8093 0000 		sts msgReq+9,r24
 811:ServerLLDN.c  **** 					msgReq.size = 0;
 3312               		.loc 6 811 0
 3313 12fa 1092 0000 		sts msgReq+13+1,__zero_reg__
 3314 12fe 1092 0000 		sts msgReq+13,__zero_reg__
 812:ServerLLDN.c  **** 					
 3315               		.loc 6 812 0
 3316 1302 1092 0000 		sts msgReq+15,__zero_reg__
 814:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3317               		.loc 6 814 0
 3318 1306 81E0      		ldi r24,lo8(1)
 3319 1308 8093 0000 		sts appState,r24
 815:ServerLLDN.c  **** 					cycles_counter++;	
 3320               		.loc 6 815 0
 3321 130c 82E0      		ldi r24,lo8(2)
 3322 130e 8093 0000 		sts appPanState,r24
 816:ServerLLDN.c  **** 					
 3323               		.loc 6 816 0
 3324 1312 8091 0000 		lds r24,cycles_counter
 3325 1316 8F5F      		subi r24,lo8(-(1))
 3326 1318 8093 0000 		sts cycles_counter,r24
 818:ServerLLDN.c  **** 				}
 3327               		.loc 6 818 0
 3328 131c 00C0      		rjmp .L81
 3329               	.L92:
 822:ServerLLDN.c  **** 					{
 3330               		.loc 6 822 0
 3331 131e 8091 0000 		lds r24,cycles_counter
 3332 1322 8823      		tst r24
 3333 1324 01F4      		brne .+2
 3334 1326 00C0      		rjmp .L114
 824:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 3335               		.loc 6 824 0
 3336 1328 0E94 0000 		call appPanOnlineInit
 825:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP;
 3337               		.loc 6 825 0
 3338 132c 82E0      		ldi r24,lo8(2)
 3339 132e 8093 0000 		sts appState,r24
 826:ServerLLDN.c  **** 	
 3340               		.loc 6 826 0
 3341 1332 8DE0      		ldi r24,lo8(13)
 3342 1334 8093 0000 		sts appPanState,r24
 828:ServerLLDN.c  **** 					}
 3343               		.loc 6 828 0
 3344 1338 8091 0000 		lds r24,cycles_counter
 3345 133c 8150      		subi r24,lo8(-(-1))
 3346 133e 8093 0000 		sts cycles_counter,r24
 830:ServerLLDN.c  **** 				}
 3347               		.loc 6 830 0
 3348 1342 00C0      		rjmp .L114
 3349               	.L94:
 3350               	.LBB13:
 834:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3351               		.loc 6 834 0
 3352 1344 1C82      		std Y+4,__zero_reg__
 3353 1346 1B82      		std Y+3,__zero_reg__
 3354 1348 00C0      		rjmp .L104
 3355               	.L105:
 835:ServerLLDN.c  **** 					ACKFrame_size = 0;
 3356               		.loc 6 835 0 discriminator 3
 3357 134a 8B81      		ldd r24,Y+3
 3358 134c 9C81      		ldd r25,Y+4
 3359 134e 8050      		subi r24,lo8(-(ACKFrame+1))
 3360 1350 9040      		sbci r25,hi8(-(ACKFrame+1))
 3361 1352 FC01      		movw r30,r24
 3362 1354 1082      		st Z,__zero_reg__
 834:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3363               		.loc 6 834 0 discriminator 3
 3364 1356 8B81      		ldd r24,Y+3
 3365 1358 9C81      		ldd r25,Y+4
 3366 135a 0196      		adiw r24,1
 3367 135c 9C83      		std Y+4,r25
 3368 135e 8B83      		std Y+3,r24
 3369               	.L104:
 834:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3370               		.loc 6 834 0 is_stmt 0 discriminator 1
 3371 1360 8B81      		ldd r24,Y+3
 3372 1362 9C81      		ldd r25,Y+4
 3373 1364 8097      		sbiw r24,32
 3374 1366 04F0      		brlt .L105
 3375               	.LBE13:
 836:ServerLLDN.c  **** 					
 3376               		.loc 6 836 0 is_stmt 1
 3377 1368 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3378 136c 1092 0000 		sts ACKFrame_size,__zero_reg__
 838:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 3379               		.loc 6 838 0
 3380 1370 1092 0000 		sts msgReq+5+1,__zero_reg__
 3381 1374 1092 0000 		sts msgReq+5,__zero_reg__
 839:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 3382               		.loc 6 839 0
 3383 1378 1092 0000 		sts msgReq+7,__zero_reg__
 840:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 3384               		.loc 6 840 0
 3385 137c 1092 0000 		sts msgReq+8,__zero_reg__
 841:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 3386               		.loc 6 841 0
 3387 1380 80E0      		ldi r24,0
 3388 1382 90E4      		ldi r25,lo8(64)
 3389 1384 9093 0000 		sts msgReq+9+1,r25
 3390 1388 8093 0000 		sts msgReq+9,r24
 842:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 3391               		.loc 6 842 0
 3392 138c 80E0      		ldi r24,lo8(ACKFrame)
 3393 138e 90E0      		ldi r25,hi8(ACKFrame)
 3394 1390 9093 0000 		sts msgReq+13+1,r25
 3395 1394 8093 0000 		sts msgReq+13,r24
 843:ServerLLDN.c  **** 					
 3396               		.loc 6 843 0
 3397 1398 8091 0000 		lds r24,macLLDNRetransmitTS
 3398 139c 9091 0000 		lds r25,macLLDNRetransmitTS+1
 3399 13a0 8F5F      		subi r24,lo8(-(1))
 3400 13a2 8093 0000 		sts msgReq+15,r24
 845:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 3401               		.loc 6 845 0
 3402 13a6 81E0      		ldi r24,lo8(1)
 3403 13a8 8093 0000 		sts appState,r24
 846:ServerLLDN.c  **** 					break;
 3404               		.loc 6 846 0
 3405 13ac 8CE0      		ldi r24,lo8(12)
 3406 13ae 8093 0000 		sts appPanState,r24
 847:ServerLLDN.c  **** 				}				
 3407               		.loc 6 847 0
 3408 13b2 00C0      		rjmp .L81
 3409               	.L93:
 851:ServerLLDN.c  **** 					{
 3410               		.loc 6 851 0
 3411 13b4 8091 0000 		lds r24,timeslot_counter
 3412 13b8 282F      		mov r18,r24
 3413 13ba 30E0      		ldi r19,0
 3414 13bc 8091 0000 		lds r24,macLLDNnumUplinkTS
 3415 13c0 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3416 13c4 0296      		adiw r24,2
 3417 13c6 2817      		cp r18,r24
 3418 13c8 3907      		cpc r19,r25
 3419 13ca 04F4      		brge .+2
 3420 13cc 00C0      		rjmp .L106
 853:ServerLLDN.c  **** 						{
 3421               		.loc 6 853 0
 3422 13ce 9091 0000 		lds r25,association_request
 3423 13d2 81E0      		ldi r24,lo8(1)
 3424 13d4 8927      		eor r24,r25
 3425 13d6 8823      		tst r24
 3426 13d8 01F0      		breq .L107
 855:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3427               		.loc 6 855 0
 3428 13da 80E0      		ldi r24,lo8(gs(end_of_association_delay_handler))
 3429 13dc 90E0      		ldi r25,hi8(gs(end_of_association_delay_handler))
 3430 13de 0E94 0000 		call macsc_set_cmp1_int_cb
 856:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3431               		.loc 6 856 0
 3432 13e2 81E0      		ldi r24,lo8(1)
 3433 13e4 0E94 0000 		call macsc_disable_cmp_int
 857:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3434               		.loc 6 857 0
 3435 13e8 0E94 0000 		call macsc_enable_manual_bts
 858:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, 5 * beaconInterval_association, MACSC_CC1);
 3436               		.loc 6 858 0
 3437 13ec 81E0      		ldi r24,lo8(1)
 3438 13ee 0E94 0000 		call macsc_enable_cmp_int
 859:ServerLLDN.c  **** 						}
 3439               		.loc 6 859 0
 3440 13f2 8091 0000 		lds r24,beaconInterval_association
 3441 13f6 9091 0000 		lds r25,beaconInterval_association+1
 3442 13fa A091 0000 		lds r26,beaconInterval_association+2
 3443 13fe B091 0000 		lds r27,beaconInterval_association+3
 3444 1402 20E0      		ldi r18,0
 3445 1404 30E0      		ldi r19,0
 3446 1406 40EA      		ldi r20,lo8(-96)
 3447 1408 50E4      		ldi r21,lo8(64)
 3448 140a BC01      		movw r22,r24
 3449 140c CD01      		movw r24,r26
 3450 140e 0E94 0000 		call __mulsf3
 3451 1412 DC01      		movw r26,r24
 3452 1414 CB01      		movw r24,r22
 3453 1416 BC01      		movw r22,r24
 3454 1418 CD01      		movw r24,r26
 3455 141a 0E94 0000 		call __fixunssfsi
 3456 141e DC01      		movw r26,r24
 3457 1420 CB01      		movw r24,r22
 3458 1422 21E0      		ldi r18,lo8(1)
 3459 1424 AC01      		movw r20,r24
 3460 1426 BD01      		movw r22,r26
 3461 1428 81E0      		ldi r24,lo8(1)
 3462 142a 0E94 0000 		call macsc_use_cmp
 3463 142e 00C0      		rjmp .L108
 3464               	.L107:
 863:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3465               		.loc 6 863 0
 3466 1430 80E0      		ldi r24,lo8(.LC8)
 3467 1432 90E0      		ldi r25,hi8(.LC8)
 3468 1434 892F      		mov r24,r25
 3469 1436 8F93      		push r24
 3470 1438 80E0      		ldi r24,lo8(.LC8)
 3471 143a 90E0      		ldi r25,hi8(.LC8)
 3472 143c 8F93      		push r24
 3473 143e 0E94 0000 		call printf
 3474 1442 0F90      		pop __tmp_reg__
 3475 1444 0F90      		pop __tmp_reg__
 864:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC2);
 3476               		.loc 6 864 0
 3477 1446 81E0      		ldi r24,lo8(1)
 3478 1448 0E94 0000 		call macsc_disable_cmp_int
 865:ServerLLDN.c  **** 							
 3479               		.loc 6 865 0
 3480 144c 82E0      		ldi r24,lo8(2)
 3481 144e 0E94 0000 		call macsc_disable_cmp_int
 3482               	.L108:
 868:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3483               		.loc 6 868 0
 3484 1452 81E0      		ldi r24,lo8(1)
 3485 1454 8093 0000 		sts appState,r24
 869:ServerLLDN.c  **** 					}
 3486               		.loc 6 869 0
 3487 1458 1092 0000 		sts appPanState,__zero_reg__
 892:ServerLLDN.c  **** 				}
 3488               		.loc 6 892 0
 3489 145c 00C0      		rjmp .L81
 3490               	.L106:
 875:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 3491               		.loc 6 875 0
 3492 145e 8091 0000 		lds r24,timeslot_counter
 3493 1462 8230      		cpi r24,lo8(2)
 3494 1464 00F0      		brlo .L110
 875:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 3495               		.loc 6 875 0 is_stmt 0 discriminator 1
 3496 1466 9091 0000 		lds r25,data_received
 3497 146a 81E0      		ldi r24,lo8(1)
 3498 146c 8927      		eor r24,r25
 3499 146e 8823      		tst r24
 3500 1470 01F0      		breq .L110
 876:ServerLLDN.c  **** 						data_received = false;
 3501               		.loc 6 876 0 is_stmt 1
 3502 1472 8091 0000 		lds r24,timeslot_counter
 3503 1476 882F      		mov r24,r24
 3504 1478 90E0      		ldi r25,0
 3505 147a 0297      		sbiw r24,2
 3506 147c 4AE4      		ldi r20,lo8(74)
 3507 147e 489F      		mul r20,r24
 3508 1480 9001      		movw r18,r0
 3509 1482 499F      		mul r20,r25
 3510 1484 300D      		add r19,r0
 3511 1486 1124      		clr __zero_reg__
 3512 1488 2050      		subi r18,lo8(-(nodes_info_arr+71))
 3513 148a 3040      		sbci r19,hi8(-(nodes_info_arr+71))
 3514 148c F901      		movw r30,r18
 3515 148e 2081      		ld r18,Z
 3516 1490 3181      		ldd r19,Z+1
 3517 1492 2F5F      		subi r18,-1
 3518 1494 3F4F      		sbci r19,-1
 3519 1496 6AE4      		ldi r22,lo8(74)
 3520 1498 689F      		mul r22,r24
 3521 149a A001      		movw r20,r0
 3522 149c 699F      		mul r22,r25
 3523 149e 500D      		add r21,r0
 3524 14a0 1124      		clr __zero_reg__
 3525 14a2 CA01      		movw r24,r20
 3526 14a4 8050      		subi r24,lo8(-(nodes_info_arr+71))
 3527 14a6 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 3528 14a8 FC01      		movw r30,r24
 3529 14aa 3183      		std Z+1,r19
 3530 14ac 2083      		st Z,r18
 3531               	.L110:
 877:ServerLLDN.c  **** 						
 3532               		.loc 6 877 0
 3533 14ae 1092 0000 		sts data_received,__zero_reg__
 879:ServerLLDN.c  **** 						
 3534               		.loc 6 879 0
 3535 14b2 8091 0000 		lds r24,timeslot_counter
 3536 14b6 882F      		mov r24,r24
 3537 14b8 90E0      		ldi r25,0
 3538 14ba 292F      		mov r18,r25
 3539 14bc 2F93      		push r18
 3540 14be 8F93      		push r24
 3541 14c0 80E0      		ldi r24,lo8(.LC9)
 3542 14c2 90E0      		ldi r25,hi8(.LC9)
 3543 14c4 892F      		mov r24,r25
 3544 14c6 8F93      		push r24
 3545 14c8 80E0      		ldi r24,lo8(.LC9)
 3546 14ca 90E0      		ldi r25,hi8(.LC9)
 3547 14cc 8F93      		push r24
 3548 14ce 0E94 0000 		call printf
 3549 14d2 0F90      		pop __tmp_reg__
 3550 14d4 0F90      		pop __tmp_reg__
 3551 14d6 0F90      		pop __tmp_reg__
 3552 14d8 0F90      		pop __tmp_reg__
 881:ServerLLDN.c  **** 						{
 3553               		.loc 6 881 0
 3554 14da 8091 0000 		lds r24,timeslot_counter
 3555 14de 282F      		mov r18,r24
 3556 14e0 30E0      		ldi r19,0
 3557 14e2 8091 0000 		lds r24,macLLDNRetransmitTS
 3558 14e6 9091 0000 		lds r25,macLLDNRetransmitTS+1
 3559 14ea 0296      		adiw r24,2
 3560 14ec 2817      		cp r18,r24
 3561 14ee 3907      		cpc r19,r25
 3562 14f0 01F4      		brne .L111
 883:ServerLLDN.c  **** 							printf("\nack_frame %hhx", ACKFrame.ackFlags[0]);
 3563               		.loc 6 883 0
 3564 14f2 81E0      		ldi r24,lo8(1)
 3565 14f4 8093 0000 		sts data_received,r24
 884:ServerLLDN.c  **** 							appState = APP_STATE_SEND;
 3566               		.loc 6 884 0
 3567 14f8 8091 0000 		lds r24,ACKFrame+1
 3568 14fc 882F      		mov r24,r24
 3569 14fe 90E0      		ldi r25,0
 3570 1500 292F      		mov r18,r25
 3571 1502 2F93      		push r18
 3572 1504 8F93      		push r24
 3573 1506 80E0      		ldi r24,lo8(.LC10)
 3574 1508 90E0      		ldi r25,hi8(.LC10)
 3575 150a 892F      		mov r24,r25
 3576 150c 8F93      		push r24
 3577 150e 80E0      		ldi r24,lo8(.LC10)
 3578 1510 90E0      		ldi r25,hi8(.LC10)
 3579 1512 8F93      		push r24
 3580 1514 0E94 0000 		call printf
 3581 1518 0F90      		pop __tmp_reg__
 3582 151a 0F90      		pop __tmp_reg__
 3583 151c 0F90      		pop __tmp_reg__
 3584 151e 0F90      		pop __tmp_reg__
 885:ServerLLDN.c  **** 							appPanState = APP_PAN_STATE_IDLE;
 3585               		.loc 6 885 0
 3586 1520 82E0      		ldi r24,lo8(2)
 3587 1522 8093 0000 		sts appState,r24
 886:ServerLLDN.c  **** 						}
 3588               		.loc 6 886 0
 3589 1526 1092 0000 		sts appPanState,__zero_reg__
 3590 152a 00C0      		rjmp .L112
 3591               	.L111:
 889:ServerLLDN.c  **** 						timeslot_counter++;
 3592               		.loc 6 889 0
 3593 152c 81E0      		ldi r24,lo8(1)
 3594 152e 8093 0000 		sts appState,r24
 3595               	.L112:
 890:ServerLLDN.c  **** 					}
 3596               		.loc 6 890 0
 3597 1532 8091 0000 		lds r24,timeslot_counter
 3598 1536 8F5F      		subi r24,lo8(-(1))
 3599 1538 8093 0000 		sts timeslot_counter,r24
 892:ServerLLDN.c  **** 				}
 3600               		.loc 6 892 0
 3601 153c 00C0      		rjmp .L81
 3602               	.L82:
 896:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3603               		.loc 6 896 0
 3604 153e 1092 0000 		sts msgReq+9+1,__zero_reg__
 3605 1542 1092 0000 		sts msgReq+9,__zero_reg__
 897:ServerLLDN.c  **** 					break;
 3606               		.loc 6 897 0
 3607 1546 81E0      		ldi r24,lo8(1)
 3608 1548 8093 0000 		sts appState,r24
 898:ServerLLDN.c  **** 				}
 3609               		.loc 6 898 0
 3610 154c 00C0      		rjmp .L81
 3611               	.L114:
 830:ServerLLDN.c  **** 				}
 3612               		.loc 6 830 0
 3613 154e 0000      		nop
 3614               	.L81:
 3615               	.L113:
 901:ServerLLDN.c  **** 		}
 3616               		.loc 6 901 0
 3617 1550 0000      		nop
 3618               	.L80:
 971:ServerLLDN.c  **** 		}
 972:ServerLLDN.c  **** 	}
 973:ServerLLDN.c  **** }
 3619               		.loc 6 973 0
 3620 1552 0000      		nop
 3621               	/* epilogue start */
 3622 1554 0F90      		pop __tmp_reg__
 3623 1556 0F90      		pop __tmp_reg__
 3624 1558 0F90      		pop __tmp_reg__
 3625 155a 0F90      		pop __tmp_reg__
 3626 155c DF91      		pop r29
 3627 155e CF91      		pop r28
 3628 1560 FF90      		pop r15
 3629 1562 EF90      		pop r14
 3630 1564 DF90      		pop r13
 3631 1566 CF90      		pop r12
 3632 1568 0895      		ret
 3633               		.cfi_endproc
 3634               	.LFE147:
 3636               		.section	.rodata
 3637               	.LC0:
 3638 008d 00        		.byte	0
 3639 008e C2        		.byte	-62
 3640 008f 01        		.byte	1
 3641 0090 00        		.byte	0
 3642 0091 03        		.byte	3
 3643 0092 00        		.byte	0
 3644 0093 00        		.byte	0
 3645               		.text
 3646               	.global	main
 3648               	main:
 3649               	.LFB148:
 974:ServerLLDN.c  **** 
 975:ServerLLDN.c  **** 	/*****************************************************************************
 976:ServerLLDN.c  **** 	*****************************************************************************/
 977:ServerLLDN.c  **** 	int main(void)
 978:ServerLLDN.c  **** 	{
 3650               		.loc 6 978 0
 3651               		.cfi_startproc
 3652 156a 0F93      		push r16
 3653               	.LCFI109:
 3654               		.cfi_def_cfa_offset 3
 3655               		.cfi_offset 16, -2
 3656 156c 1F93      		push r17
 3657               	.LCFI110:
 3658               		.cfi_def_cfa_offset 4
 3659               		.cfi_offset 17, -3
 3660 156e CF93      		push r28
 3661               	.LCFI111:
 3662               		.cfi_def_cfa_offset 5
 3663               		.cfi_offset 28, -4
 3664 1570 DF93      		push r29
 3665               	.LCFI112:
 3666               		.cfi_def_cfa_offset 6
 3667               		.cfi_offset 29, -5
 3668 1572 CDB7      		in r28,__SP_L__
 3669 1574 DEB7      		in r29,__SP_H__
 3670               	.LCFI113:
 3671               		.cfi_def_cfa_register 28
 3672 1576 2797      		sbiw r28,7
 3673               	.LCFI114:
 3674               		.cfi_def_cfa_offset 13
 3675 1578 0FB6      		in __tmp_reg__,__SREG__
 3676 157a F894      		cli
 3677 157c DEBF      		out __SP_H__,r29
 3678 157e 0FBE      		out __SREG__,__tmp_reg__
 3679 1580 CDBF      		out __SP_L__,r28
 3680               	/* prologue: function */
 3681               	/* frame size = 7 */
 3682               	/* stack size = 11 */
 3683               	.L__stack_usage = 11
 979:ServerLLDN.c  **** 		sysclk_init();
 3684               		.loc 6 979 0
 3685 1582 0E94 0000 		call sysclk_init
 980:ServerLLDN.c  **** 		board_init();
 3686               		.loc 6 980 0
 3687 1586 0E94 0000 		call board_init
 981:ServerLLDN.c  **** 
 982:ServerLLDN.c  **** 		SYS_Init();
 3688               		.loc 6 982 0
 3689 158a 0E94 0000 		call SYS_Init
 983:ServerLLDN.c  **** 		/* Disable CSMA/CA
 984:ServerLLDN.c  **** 		 * Disable auto ACK
 985:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
 986:ServerLLDN.c  **** 		 */
 987:ServerLLDN.c  **** 
 988:ServerLLDN.c  **** 		sm_init();
 3690               		.loc 6 988 0
 3691 158e 0E94 0000 		call sm_init
 989:ServerLLDN.c  **** 
 990:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
 991:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 992:ServerLLDN.c  **** 		irq_initialize_vectors();
 993:ServerLLDN.c  **** 	#endif
 994:ServerLLDN.c  **** 		cpu_irq_enable();
 3692               		.loc 6 994 0
 3693               	/* #APP */
 3694               	 ;  994 "ServerLLDN.c" 1
 3695 1592 7894      		sei
 3696               	 ;  0 "" 2
 995:ServerLLDN.c  **** 
 996:ServerLLDN.c  **** 	#if 1
 997:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 998:ServerLLDN.c  **** 		stdio_usb_init();
 999:ServerLLDN.c  **** 	#else
1000:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 3697               		.loc 6 1000 0
 3698               	/* #NOAPP */
 3699 1594 27E0      		ldi r18,lo8(7)
 3700 1596 E0E0      		ldi r30,lo8(.LC0)
 3701 1598 F0E0      		ldi r31,hi8(.LC0)
 3702 159a CE01      		movw r24,r28
 3703 159c 0196      		adiw r24,1
 3704 159e DC01      		movw r26,r24
 3705               		0:
 3706 15a0 0190      		ld r0,Z+
 3707 15a2 0D92      		st X+,r0
 3708 15a4 2A95      		dec r18
 3709 15a6 01F4      		brne 0b
1001:ServerLLDN.c  **** 		{
1002:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1003:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1004:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1005:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1006:ServerLLDN.c  **** 		};
1007:ServerLLDN.c  **** 
1008:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 3710               		.loc 6 1008 0
 3711 15a8 CE01      		movw r24,r28
 3712 15aa 0196      		adiw r24,1
 3713 15ac BC01      		movw r22,r24
 3714 15ae 80EC      		ldi r24,lo8(-64)
 3715 15b0 90E0      		ldi r25,0
 3716 15b2 0E94 0000 		call stdio_serial_init
1009:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 3717               		.loc 6 1009 0
 3718 15b6 80EC      		ldi r24,lo8(-64)
 3719 15b8 90E0      		ldi r25,0
 3720 15ba 0E94 0000 		call usart_double_baud_enable
1010:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 3721               		.loc 6 1010 0
 3722 15be 0E94 0000 		call sysclk_get_source_clock_hz
 3723 15c2 DC01      		movw r26,r24
 3724 15c4 CB01      		movw r24,r22
 3725 15c6 8C01      		movw r16,r24
 3726 15c8 9D01      		movw r18,r26
 3727 15ca 40E0      		ldi r20,0
 3728 15cc 52EC      		ldi r21,lo8(-62)
 3729 15ce 61E0      		ldi r22,lo8(1)
 3730 15d0 70E0      		ldi r23,0
 3731 15d2 80EC      		ldi r24,lo8(-64)
 3732 15d4 90E0      		ldi r25,0
 3733 15d6 0E94 0000 		call usart_set_baudrate_precalculated
 3734               	.L116:
1011:ServerLLDN.c  **** 
1012:ServerLLDN.c  **** 	#endif
1013:ServerLLDN.c  **** 	#endif
1014:ServerLLDN.c  **** 		for(;;)
1015:ServerLLDN.c  **** 		{
1016:ServerLLDN.c  **** 			SYS_TaskHandler();
 3735               		.loc 6 1016 0 discriminator 1
 3736 15da 0E94 0000 		call SYS_TaskHandler
1017:ServerLLDN.c  **** 			APP_TaskHandler();
 3737               		.loc 6 1017 0 discriminator 1
 3738 15de 0E94 0000 		call APP_TaskHandler
1018:ServerLLDN.c  **** 		}
 3739               		.loc 6 1018 0 discriminator 1
 3740 15e2 00C0      		rjmp .L116
 3741               		.cfi_endproc
 3742               	.LFE148:
 3744               	.Letext0:
 3745               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 3746               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 3747               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 3748               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 3749               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 3750               		.file 12 "lldn.h"
 3751               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 3752               		.file 14 "config/config.h"
 3753               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:91     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:103    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:115    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:126    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:175    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:270    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:314    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:365    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:436    .text:0000019e macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:490    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:495    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:500    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:508    .text:000001d2 appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:570    .data.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:577    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:587    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000021 ACKFrame
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:594    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:600    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:606    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:611    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:617    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:623    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:629    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:635    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:641    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:648    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:654    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:660    .bss.succes_rate:00000000 succes_rate
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:666    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:673    .text:0000021e tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:724    .text:00000254 lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:761    .text:0000026e time_slot_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:828    .text:000002d2 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:874    .text:00000308 end_of_association_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:910    .text:00000324 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:1019   .text:000003c4 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:1253   .text:00000560 CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:1342   .text:000005e2 appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:1490   .text:000006bc check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:1604   .text:00000746 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2106   .text:00000aa4 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2158   .text:00000aea appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2365   .text:00000c2e appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2553   .text:00000d98 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2780   .text:00000f60 appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:2868   .text:00000fd6 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccMaAk0z.s:3648   .text:0000156a main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
NWK_DataReq
__divsf3
__fixunssfsi
macsc_use_cmp
malloc
free
__floatsisf
__floatunsisf
__mulsf3
__addsf3
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__subsf3
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
