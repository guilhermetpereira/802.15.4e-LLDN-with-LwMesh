   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  91               	baudctrl_1mhz:
  92 0000 3300      		.word	51
  93 0002 1900      		.word	25
  94 0004 0C00      		.word	12
  95 0006 0600      		.word	6
  96 0008 0300      		.word	3
  97 000a 0200      		.word	2
  98 000c 0100      		.word	1
  99 000e FF00      		.word	255
 100               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 103               	baudctrl_8mhz:
 104 0000 A001      		.word	416
 105 0002 CF00      		.word	207
 106 0004 6700      		.word	103
 107 0006 3300      		.word	51
 108 0008 1900      		.word	25
 109 000a 0C00      		.word	12
 110 000c 0700      		.word	7
 111 000e 0800      		.word	8
 112               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 115               	baudctrl_16mhz:
 116 0000 4003      		.word	832
 117 0002 A001      		.word	416
 118 0004 CF00      		.word	207
 119 0006 6700      		.word	103
 120 0008 3300      		.word	51
 121 000a 1900      		.word	25
 122 000c 1000      		.word	16
 123 000e 1000      		.word	16
 124               		.text
 126               	usart_double_baud_enable:
 127               	.LFB101:
 128               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 129               		.loc 2 515 0
 130               		.cfi_startproc
 131 0034 CF93      		push r28
 132               	.LCFI6:
 133               		.cfi_def_cfa_offset 3
 134               		.cfi_offset 28, -2
 135 0036 DF93      		push r29
 136               	.LCFI7:
 137               		.cfi_def_cfa_offset 4
 138               		.cfi_offset 29, -3
 139 0038 00D0      		rcall .
 140               	.LCFI8:
 141               		.cfi_def_cfa_offset 6
 142 003a CDB7      		in r28,__SP_L__
 143 003c DEB7      		in r29,__SP_H__
 144               	.LCFI9:
 145               		.cfi_def_cfa_register 28
 146               	/* prologue: function */
 147               	/* frame size = 2 */
 148               	/* stack size = 4 */
 149               	.L__stack_usage = 4
 150 003e 9A83      		std Y+2,r25
 151 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 152               		.loc 2 516 0
 153 0042 8981      		ldd r24,Y+1
 154 0044 9A81      		ldd r25,Y+2
 155 0046 FC01      		movw r30,r24
 156 0048 8081      		ld r24,Z
 157 004a 282F      		mov r18,r24
 158 004c 2260      		ori r18,lo8(2)
 159 004e 8981      		ldd r24,Y+1
 160 0050 9A81      		ldd r25,Y+2
 161 0052 FC01      		movw r30,r24
 162 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 163               		.loc 2 517 0
 164 0056 0000      		nop
 165               	/* epilogue start */
 166 0058 0F90      		pop __tmp_reg__
 167 005a 0F90      		pop __tmp_reg__
 168 005c DF91      		pop r29
 169 005e CF91      		pop r28
 170 0060 0895      		ret
 171               		.cfi_endproc
 172               	.LFE101:
 175               	usart_serial_init:
 176               	.LFB104:
 177               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 178               		.loc 3 77 0
 179               		.cfi_startproc
 180 0062 CF93      		push r28
 181               	.LCFI10:
 182               		.cfi_def_cfa_offset 3
 183               		.cfi_offset 28, -2
 184 0064 DF93      		push r29
 185               	.LCFI11:
 186               		.cfi_def_cfa_offset 4
 187               		.cfi_offset 29, -3
 188 0066 CDB7      		in r28,__SP_L__
 189 0068 DEB7      		in r29,__SP_H__
 190               	.LCFI12:
 191               		.cfi_def_cfa_register 28
 192 006a 2B97      		sbiw r28,11
 193               	.LCFI13:
 194               		.cfi_def_cfa_offset 15
 195 006c 0FB6      		in __tmp_reg__,__SREG__
 196 006e F894      		cli
 197 0070 DEBF      		out __SP_H__,r29
 198 0072 0FBE      		out __SREG__,__tmp_reg__
 199 0074 CDBF      		out __SP_L__,r28
 200               	/* prologue: function */
 201               	/* frame size = 11 */
 202               	/* stack size = 13 */
 203               	.L__stack_usage = 13
 204 0076 9987      		std Y+9,r25
 205 0078 8887      		std Y+8,r24
 206 007a 7B87      		std Y+11,r23
 207 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 208               		.loc 3 80 0
 209 007e 8A85      		ldd r24,Y+10
 210 0080 9B85      		ldd r25,Y+11
 211 0082 FC01      		movw r30,r24
 212 0084 8481      		ldd r24,Z+4
 213 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 214               		.loc 3 81 0
 215 0088 8A85      		ldd r24,Y+10
 216 008a 9B85      		ldd r25,Y+11
 217 008c FC01      		movw r30,r24
 218 008e 8581      		ldd r24,Z+5
 219 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 220               		.loc 3 82 0
 221 0092 8A85      		ldd r24,Y+10
 222 0094 9B85      		ldd r25,Y+11
 223 0096 FC01      		movw r30,r24
 224 0098 8681      		ldd r24,Z+6
 225 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 226               		.loc 3 83 0
 227 009c 8A85      		ldd r24,Y+10
 228 009e 9B85      		ldd r25,Y+11
 229 00a0 FC01      		movw r30,r24
 230 00a2 8081      		ld r24,Z
 231 00a4 9181      		ldd r25,Z+1
 232 00a6 A281      		ldd r26,Z+2
 233 00a8 B381      		ldd r27,Z+3
 234 00aa 8983      		std Y+1,r24
 235 00ac 9A83      		std Y+2,r25
 236 00ae AB83      		std Y+3,r26
 237 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 238               		.loc 3 85 0
 239 00b2 8885      		ldd r24,Y+8
 240 00b4 9985      		ldd r25,Y+9
 241 00b6 9E01      		movw r18,r28
 242 00b8 2F5F      		subi r18,-1
 243 00ba 3F4F      		sbci r19,-1
 244 00bc B901      		movw r22,r18
 245 00be 0E94 0000 		call usart_init_rs232
 246 00c2 8823      		tst r24
 247 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 248               		.loc 3 86 0
 249 00c6 81E0      		ldi r24,lo8(1)
 250 00c8 00C0      		rjmp .L9
 251               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 252               		.loc 3 88 0
 253 00ca 80E0      		ldi r24,0
 254               	.L9:
 255               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 256               		.loc 3 90 0 discriminator 1
 257 00cc 2B96      		adiw r28,11
 258 00ce 0FB6      		in __tmp_reg__,__SREG__
 259 00d0 F894      		cli
 260 00d2 DEBF      		out __SP_H__,r29
 261 00d4 0FBE      		out __SREG__,__tmp_reg__
 262 00d6 CDBF      		out __SP_L__,r28
 263 00d8 DF91      		pop r29
 264 00da CF91      		pop r28
 265 00dc 0895      		ret
 266               		.cfi_endproc
 267               	.LFE104:
 270               	usart_serial_putchar:
 271               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 272               		.loc 3 100 0
 273               		.cfi_startproc
 274 00de CF93      		push r28
 275               	.LCFI14:
 276               		.cfi_def_cfa_offset 3
 277               		.cfi_offset 28, -2
 278 00e0 DF93      		push r29
 279               	.LCFI15:
 280               		.cfi_def_cfa_offset 4
 281               		.cfi_offset 29, -3
 282 00e2 00D0      		rcall .
 283 00e4 1F92      		push __zero_reg__
 284               	.LCFI16:
 285               		.cfi_def_cfa_offset 7
 286 00e6 CDB7      		in r28,__SP_L__
 287 00e8 DEB7      		in r29,__SP_H__
 288               	.LCFI17:
 289               		.cfi_def_cfa_register 28
 290               	/* prologue: function */
 291               	/* frame size = 3 */
 292               	/* stack size = 5 */
 293               	.L__stack_usage = 5
 294 00ea 9A83      		std Y+2,r25
 295 00ec 8983      		std Y+1,r24
 296 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 297               		.loc 3 101 0
 298 00f0 8981      		ldd r24,Y+1
 299 00f2 9A81      		ldd r25,Y+2
 300 00f4 6B81      		ldd r22,Y+3
 301 00f6 0E94 0000 		call usart_putchar
 302               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 303               		.loc 3 102 0
 304 00fa 0F90      		pop __tmp_reg__
 305 00fc 0F90      		pop __tmp_reg__
 306 00fe 0F90      		pop __tmp_reg__
 307 0100 DF91      		pop r29
 308 0102 CF91      		pop r28
 309 0104 0895      		ret
 310               		.cfi_endproc
 311               	.LFE105:
 314               	usart_serial_getchar:
 315               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 316               		.loc 3 111 0
 317               		.cfi_startproc
 318 0106 CF93      		push r28
 319               	.LCFI18:
 320               		.cfi_def_cfa_offset 3
 321               		.cfi_offset 28, -2
 322 0108 DF93      		push r29
 323               	.LCFI19:
 324               		.cfi_def_cfa_offset 4
 325               		.cfi_offset 29, -3
 326 010a 00D0      		rcall .
 327 010c 00D0      		rcall .
 328               	.LCFI20:
 329               		.cfi_def_cfa_offset 8
 330 010e CDB7      		in r28,__SP_L__
 331 0110 DEB7      		in r29,__SP_H__
 332               	.LCFI21:
 333               		.cfi_def_cfa_register 28
 334               	/* prologue: function */
 335               	/* frame size = 4 */
 336               	/* stack size = 6 */
 337               	.L__stack_usage = 6
 338 0112 9A83      		std Y+2,r25
 339 0114 8983      		std Y+1,r24
 340 0116 7C83      		std Y+4,r23
 341 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 342               		.loc 3 112 0
 343 011a 8981      		ldd r24,Y+1
 344 011c 9A81      		ldd r25,Y+2
 345 011e 0E94 0000 		call usart_getchar
 346 0122 282F      		mov r18,r24
 347 0124 8B81      		ldd r24,Y+3
 348 0126 9C81      		ldd r25,Y+4
 349 0128 FC01      		movw r30,r24
 350 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 351               		.loc 3 113 0
 352 012c 0000      		nop
 353               	/* epilogue start */
 354 012e 0F90      		pop __tmp_reg__
 355 0130 0F90      		pop __tmp_reg__
 356 0132 0F90      		pop __tmp_reg__
 357 0134 0F90      		pop __tmp_reg__
 358 0136 DF91      		pop r29
 359 0138 CF91      		pop r28
 360 013a 0895      		ret
 361               		.cfi_endproc
 362               	.LFE106:
 365               	stdio_serial_init:
 366               	.LFB107:
 367               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 368               		.loc 4 90 0
 369               		.cfi_startproc
 370 013c CF93      		push r28
 371               	.LCFI22:
 372               		.cfi_def_cfa_offset 3
 373               		.cfi_offset 28, -2
 374 013e DF93      		push r29
 375               	.LCFI23:
 376               		.cfi_def_cfa_offset 4
 377               		.cfi_offset 29, -3
 378 0140 00D0      		rcall .
 379 0142 00D0      		rcall .
 380               	.LCFI24:
 381               		.cfi_def_cfa_offset 8
 382 0144 CDB7      		in r28,__SP_L__
 383 0146 DEB7      		in r29,__SP_H__
 384               	.LCFI25:
 385               		.cfi_def_cfa_register 28
 386               	/* prologue: function */
 387               	/* frame size = 4 */
 388               	/* stack size = 6 */
 389               	.L__stack_usage = 6
 390 0148 9A83      		std Y+2,r25
 391 014a 8983      		std Y+1,r24
 392 014c 7C83      		std Y+4,r23
 393 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 394               		.loc 4 91 0
 395 0150 8981      		ldd r24,Y+1
 396 0152 9A81      		ldd r25,Y+2
 397 0154 9093 0000 		sts stdio_base+1,r25
 398 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 399               		.loc 4 92 0
 400 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 401 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 402 0160 9093 0000 		sts ptr_put+1,r25
 403 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 404               		.loc 4 93 0
 405 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 406 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 407 016c 9093 0000 		sts ptr_get+1,r25
 408 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 409               		.loc 4 95 0
 410 0174 2B81      		ldd r18,Y+3
 411 0176 3C81      		ldd r19,Y+4
 412 0178 8981      		ldd r24,Y+1
 413 017a 9A81      		ldd r25,Y+2
 414 017c B901      		movw r22,r18
 415 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 416               		.loc 4 107 0
 417 0182 60E0      		ldi r22,lo8(gs(_read))
 418 0184 70E0      		ldi r23,hi8(gs(_read))
 419 0186 80E0      		ldi r24,lo8(gs(_write))
 420 0188 90E0      		ldi r25,hi8(gs(_write))
 421 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 422               		.loc 4 120 0
 423 018e 0000      		nop
 424               	/* epilogue start */
 425 0190 0F90      		pop __tmp_reg__
 426 0192 0F90      		pop __tmp_reg__
 427 0194 0F90      		pop __tmp_reg__
 428 0196 0F90      		pop __tmp_reg__
 429 0198 DF91      		pop r29
 430 019a CF91      		pop r28
 431 019c 0895      		ret
 432               		.cfi_endproc
 433               	.LFE107:
 436               	macsc_read32:
 437               	.LFB108:
 438               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 439               		.loc 5 120 0
 440               		.cfi_startproc
 441 019e CF93      		push r28
 442               	.LCFI26:
 443               		.cfi_def_cfa_offset 3
 444               		.cfi_offset 28, -2
 445 01a0 DF93      		push r29
 446               	.LCFI27:
 447               		.cfi_def_cfa_offset 4
 448               		.cfi_offset 29, -3
 449 01a2 CDB7      		in r28,__SP_L__
 450 01a4 DEB7      		in r29,__SP_H__
 451               	.LCFI28:
 452               		.cfi_def_cfa_register 28
 453 01a6 2C97      		sbiw r28,12
 454               	.LCFI29:
 455               		.cfi_def_cfa_offset 16
 456 01a8 0FB6      		in __tmp_reg__,__SREG__
 457 01aa F894      		cli
 458 01ac DEBF      		out __SP_H__,r29
 459 01ae 0FBE      		out __SREG__,__tmp_reg__
 460 01b0 CDBF      		out __SP_L__,r28
 461               	/* prologue: function */
 462               	/* frame size = 12 */
 463               	/* stack size = 14 */
 464               	.L__stack_usage = 14
 465 01b2 9E83      		std Y+6,r25
 466 01b4 8D83      		std Y+5,r24
 467 01b6 7887      		std Y+8,r23
 468 01b8 6F83      		std Y+7,r22
 469 01ba 5A87      		std Y+10,r21
 470 01bc 4987      		std Y+9,r20
 471 01be 3C87      		std Y+12,r19
 472 01c0 2B87      		std Y+11,r18
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 473               		.loc 5 127 0
 474 01c2 8B85      		ldd r24,Y+11
 475 01c4 9C85      		ldd r25,Y+12
 476 01c6 FC01      		movw r30,r24
 477 01c8 8081      		ld r24,Z
 478 01ca 8983      		std Y+1,r24
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 479               		.loc 5 128 0
 480 01cc 8985      		ldd r24,Y+9
 481 01ce 9A85      		ldd r25,Y+10
 482 01d0 FC01      		movw r30,r24
 483 01d2 8081      		ld r24,Z
 484 01d4 8A83      		std Y+2,r24
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 485               		.loc 5 129 0
 486 01d6 8F81      		ldd r24,Y+7
 487 01d8 9885      		ldd r25,Y+8
 488 01da FC01      		movw r30,r24
 489 01dc 8081      		ld r24,Z
 490 01de 8B83      		std Y+3,r24
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 491               		.loc 5 130 0
 492 01e0 8D81      		ldd r24,Y+5
 493 01e2 9E81      		ldd r25,Y+6
 494 01e4 FC01      		movw r30,r24
 495 01e6 8081      		ld r24,Z
 496 01e8 8C83      		std Y+4,r24
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 497               		.loc 5 132 0
 498 01ea 8981      		ldd r24,Y+1
 499 01ec 9A81      		ldd r25,Y+2
 500 01ee AB81      		ldd r26,Y+3
 501 01f0 BC81      		ldd r27,Y+4
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 502               		.loc 5 133 0
 503 01f2 BC01      		movw r22,r24
 504 01f4 CD01      		movw r24,r26
 505               	/* epilogue start */
 506 01f6 2C96      		adiw r28,12
 507 01f8 0FB6      		in __tmp_reg__,__SREG__
 508 01fa F894      		cli
 509 01fc DEBF      		out __SP_H__,r29
 510 01fe 0FBE      		out __SREG__,__tmp_reg__
 511 0200 CDBF      		out __SP_L__,r28
 512 0202 DF91      		pop r29
 513 0204 CF91      		pop r28
 514 0206 0895      		ret
 515               		.cfi_endproc
 516               	.LFE108:
 519               	macsc_write_count:
 520               	.LFB113:
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 521               		.loc 5 345 0
 522               		.cfi_startproc
 523 0208 CF93      		push r28
 524               	.LCFI30:
 525               		.cfi_def_cfa_offset 3
 526               		.cfi_offset 28, -2
 527 020a DF93      		push r29
 528               	.LCFI31:
 529               		.cfi_def_cfa_offset 4
 530               		.cfi_offset 29, -3
 531 020c CDB7      		in r28,__SP_L__
 532 020e DEB7      		in r29,__SP_H__
 533               	.LCFI32:
 534               		.cfi_def_cfa_register 28
 535 0210 2897      		sbiw r28,8
 536               	.LCFI33:
 537               		.cfi_def_cfa_offset 12
 538 0212 0FB6      		in __tmp_reg__,__SREG__
 539 0214 F894      		cli
 540 0216 DEBF      		out __SP_H__,r29
 541 0218 0FBE      		out __SREG__,__tmp_reg__
 542 021a CDBF      		out __SP_L__,r28
 543               	/* prologue: function */
 544               	/* frame size = 8 */
 545               	/* stack size = 10 */
 546               	.L__stack_usage = 10
 547 021c 6D83      		std Y+5,r22
 548 021e 7E83      		std Y+6,r23
 549 0220 8F83      		std Y+7,r24
 550 0222 9887      		std Y+8,r25
 551               	.LBB2:
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 552               		.loc 5 346 0
 553 0224 8D81      		ldd r24,Y+5
 554 0226 9E81      		ldd r25,Y+6
 555 0228 AF81      		ldd r26,Y+7
 556 022a B885      		ldd r27,Y+8
 557 022c 8983      		std Y+1,r24
 558 022e 9A83      		std Y+2,r25
 559 0230 AB83      		std Y+3,r26
 560 0232 BC83      		std Y+4,r27
 561 0234 84EE      		ldi r24,lo8(-28)
 562 0236 90E0      		ldi r25,0
 563 0238 2C81      		ldd r18,Y+4
 564 023a FC01      		movw r30,r24
 565 023c 2083      		st Z,r18
 566 023e 83EE      		ldi r24,lo8(-29)
 567 0240 90E0      		ldi r25,0
 568 0242 2B81      		ldd r18,Y+3
 569 0244 FC01      		movw r30,r24
 570 0246 2083      		st Z,r18
 571 0248 82EE      		ldi r24,lo8(-30)
 572 024a 90E0      		ldi r25,0
 573 024c 2A81      		ldd r18,Y+2
 574 024e FC01      		movw r30,r24
 575 0250 2083      		st Z,r18
 576 0252 81EE      		ldi r24,lo8(-31)
 577 0254 90E0      		ldi r25,0
 578 0256 2981      		ldd r18,Y+1
 579 0258 FC01      		movw r30,r24
 580 025a 2083      		st Z,r18
 581               	.LBE2:
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 582               		.loc 5 347 0
 583 025c 0000      		nop
 584               	/* epilogue start */
 585 025e 2896      		adiw r28,8
 586 0260 0FB6      		in __tmp_reg__,__SREG__
 587 0262 F894      		cli
 588 0264 DEBF      		out __SP_H__,r29
 589 0266 0FBE      		out __SREG__,__tmp_reg__
 590 0268 CDBF      		out __SP_L__,r28
 591 026a DF91      		pop r29
 592 026c CF91      		pop r28
 593 026e 0895      		ret
 594               		.cfi_endproc
 595               	.LFE113:
 598               	macsc_read_count:
 599               	.LFB114:
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 600               		.loc 5 355 0
 601               		.cfi_startproc
 602 0270 CF93      		push r28
 603               	.LCFI34:
 604               		.cfi_def_cfa_offset 3
 605               		.cfi_offset 28, -2
 606 0272 DF93      		push r29
 607               	.LCFI35:
 608               		.cfi_def_cfa_offset 4
 609               		.cfi_offset 29, -3
 610 0274 CDB7      		in r28,__SP_L__
 611 0276 DEB7      		in r29,__SP_H__
 612               	.LCFI36:
 613               		.cfi_def_cfa_register 28
 614               	/* prologue: function */
 615               	/* frame size = 0 */
 616               	/* stack size = 2 */
 617               	.L__stack_usage = 2
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 618               		.loc 5 356 0
 619 0278 21EE      		ldi r18,lo8(-31)
 620 027a 30E0      		ldi r19,0
 621 027c 42EE      		ldi r20,lo8(-30)
 622 027e 50E0      		ldi r21,0
 623 0280 63EE      		ldi r22,lo8(-29)
 624 0282 70E0      		ldi r23,0
 625 0284 84EE      		ldi r24,lo8(-28)
 626 0286 90E0      		ldi r25,0
 627 0288 0E94 0000 		call macsc_read32
 628 028c DC01      		movw r26,r24
 629 028e CB01      		movw r24,r22
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 630               		.loc 5 357 0
 631 0290 BC01      		movw r22,r24
 632 0292 CD01      		movw r24,r26
 633               	/* epilogue start */
 634 0294 DF91      		pop r29
 635 0296 CF91      		pop r28
 636 0298 0895      		ret
 637               		.cfi_endproc
 638               	.LFE114:
 641               	macsc_enable_manual_bts:
 642               	.LFB121:
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 643               		.loc 5 444 0
 644               		.cfi_startproc
 645 029a CF93      		push r28
 646               	.LCFI37:
 647               		.cfi_def_cfa_offset 3
 648               		.cfi_offset 28, -2
 649 029c DF93      		push r29
 650               	.LCFI38:
 651               		.cfi_def_cfa_offset 4
 652               		.cfi_offset 29, -3
 653 029e CDB7      		in r28,__SP_L__
 654 02a0 DEB7      		in r29,__SP_H__
 655               	.LCFI39:
 656               		.cfi_def_cfa_register 28
 657               	/* prologue: function */
 658               	/* frame size = 0 */
 659               	/* stack size = 2 */
 660               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 661               		.loc 5 445 0
 662 02a2 8CED      		ldi r24,lo8(-36)
 663 02a4 90E0      		ldi r25,0
 664 02a6 2CED      		ldi r18,lo8(-36)
 665 02a8 30E0      		ldi r19,0
 666 02aa F901      		movw r30,r18
 667 02ac 2081      		ld r18,Z
 668 02ae 2064      		ori r18,lo8(64)
 669 02b0 FC01      		movw r30,r24
 670 02b2 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 671               		.loc 5 446 0
 672 02b4 8CED      		ldi r24,lo8(-36)
 673 02b6 90E0      		ldi r25,0
 674 02b8 2CED      		ldi r18,lo8(-36)
 675 02ba 30E0      		ldi r19,0
 676 02bc F901      		movw r30,r18
 677 02be 2081      		ld r18,Z
 678 02c0 277F      		andi r18,lo8(-9)
 679 02c2 FC01      		movw r30,r24
 680 02c4 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 681               		.loc 5 447 0
 682 02c6 0000      		nop
 683               	/* epilogue start */
 684 02c8 DF91      		pop r29
 685 02ca CF91      		pop r28
 686 02cc 0895      		ret
 687               		.cfi_endproc
 688               	.LFE121:
 690               	.global	appState
 691               		.section	.bss.appState,"aw",@nobits
 694               	appState:
 695 0000 00        		.zero	1
 696               		.section	.bss.msgReq,"aw",@nobits
 699               	msgReq:
 700 0000 0000 0000 		.zero	20
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 700      0000 0000 
 701               		.section	.bss.PanId,"aw",@nobits
 704               	PanId:
 705 0000 00        		.zero	1
 706               		.text
 707               	.global	appSendData
 709               	appSendData:
 710               	.LFB130:
 711               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "sleep_mgr.h"
  28:ServerLLDN.c  **** #include "sleepmgr.h"
  29:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  30:ServerLLDN.c  **** 
  31:ServerLLDN.c  **** 
  32:ServerLLDN.c  **** #include "lldn.h"
  33:ServerLLDN.c  **** 
  34:ServerLLDN.c  **** #if 1
  35:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  36:ServerLLDN.c  **** /* Only ARM */
  37:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  38:ServerLLDN.c  **** #include "stdio_usb.h"
  39:ServerLLDN.c  **** #define MASTER_MACSC	0
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #include "conf_sio2host.h"
  43:ServerLLDN.c  **** #define MASTER_MACSC	1
  44:ServerLLDN.c  **** #endif
  45:ServerLLDN.c  **** #else
  46:ServerLLDN.c  **** /* Only megarf series */
  47:ServerLLDN.c  **** #define MASTER_MACSC		1
  48:ServerLLDN.c  **** #endif
  49:ServerLLDN.c  **** 
  50:ServerLLDN.c  **** #define HUMAM_READABLE			1
  51:ServerLLDN.c  **** 
  52:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  53:ServerLLDN.c  **** #include "macsc_megarf.h"
  54:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  55:ServerLLDN.c  **** #else
  56:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  57:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  58:ServerLLDN.c  **** #endif
  59:ServerLLDN.c  **** 
  60:ServerLLDN.c  **** #define PRINT 1
  61:ServerLLDN.c  **** 
  62:ServerLLDN.c  **** 	
  63:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  64:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  65:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  66:ServerLLDN.c  **** static uint8_t PanId;
  67:ServerLLDN.c  **** 
  68:ServerLLDN.c  ****  void appSendData(void)
  69:ServerLLDN.c  **** {
 712               		.loc 6 69 0
 713               		.cfi_startproc
 714 02ce CF93      		push r28
 715               	.LCFI40:
 716               		.cfi_def_cfa_offset 3
 717               		.cfi_offset 28, -2
 718 02d0 DF93      		push r29
 719               	.LCFI41:
 720               		.cfi_def_cfa_offset 4
 721               		.cfi_offset 29, -3
 722 02d2 CDB7      		in r28,__SP_L__
 723 02d4 DEB7      		in r29,__SP_H__
 724               	.LCFI42:
 725               		.cfi_def_cfa_register 28
 726               	/* prologue: function */
 727               	/* frame size = 0 */
 728               	/* stack size = 2 */
 729               	.L__stack_usage = 2
  70:ServerLLDN.c  **** 	if(msgReq.options != 0)
 730               		.loc 6 70 0
 731 02d6 8091 0000 		lds r24,msgReq+9
 732 02da 9091 0000 		lds r25,msgReq+9+1
 733 02de 892B      		or r24,r25
 734 02e0 01F0      		breq .L22
  71:ServerLLDN.c  **** 	{
  72:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 735               		.loc 6 72 0
 736 02e2 80E0      		ldi r24,lo8(msgReq)
 737 02e4 90E0      		ldi r25,hi8(msgReq)
 738 02e6 0E94 0000 		call NWK_DataReq
 739               	.L22:
  73:ServerLLDN.c  **** 		#if PRINT
  74:ServerLLDN.c  **** // 		if(msgReq.options & NWK_OPT_ONLINE_STATE)
  75:ServerLLDN.c  **** // 			printf("\n  BEACON ");
  76:ServerLLDN.c  **** 		//printf("\nREQ %d",msgReq.options);
  77:ServerLLDN.c  **** 		#endif
  78:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  79:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(0);
  80:ServerLLDN.c  **** 	#endif
  81:ServerLLDN.c  **** 	}
  82:ServerLLDN.c  **** }
 740               		.loc 6 82 0
 741 02ea 0000      		nop
 742               	/* epilogue start */
 743 02ec DF91      		pop r29
 744 02ee CF91      		pop r28
 745 02f0 0895      		ret
 746               		.cfi_endproc
 747               	.LFE130:
 749               	.global	accepting_requests
 750               		.section	.data.accepting_requests,"aw",@progbits
 753               	accepting_requests:
 754 0000 0100      		.word	1
 755               	.global	appPanState
 756               		.section	.bss.appPanState,"aw",@nobits
 759               	appPanState:
 760 0000 00        		.zero	1
 761               		.comm	nodes_info_arr,3700,1
 762               	.global	config_request_frame
 763               		.section	.data.config_request_frame,"aw",@progbits
 766               	config_request_frame:
 767 0000 0F        		.byte	15
 768 0001 00        		.byte	0
 769 0002 0F        		.byte	15
 770 0003 0000      		.zero	2
 771 0005 80        		.byte	128
 772               	.global	conf_req_list
 773               		.section	.bss.conf_req_list,"aw",@nobits
 776               	conf_req_list:
 777 0000 0000      		.zero	2
 778               		.comm	stack_conf_req,20,1
 779               		.comm	ACKFrame,33,1
 780               		.comm	ACKFrame_aux,33,1
 781               	.global	ACKFrame_size
 782               		.section	.bss.ACKFrame_size,"aw",@nobits
 785               	ACKFrame_size:
 786 0000 0000      		.zero	2
 787               	.global	beaconInterval
 788               		.section	.bss.beaconInterval,"aw",@nobits
 791               	beaconInterval:
 792 0000 0000 0000 		.zero	4
 793               	.global	beaconInterval_association
 794               		.section	.bss.beaconInterval_association,"aw",@nobits
 797               	beaconInterval_association:
 798 0000 0000 0000 		.zero	4
 799               	.global	assTimeSlot
 800               		.section	.bss.assTimeSlot,"aw",@nobits
 803               	assTimeSlot:
 804 0000 0000      		.zero	2
 805               	.global	counter_associados
 806               		.section	.bss.counter_associados,"aw",@nobits
 809               	counter_associados:
 810 0000 0000      		.zero	2
 811               	.global	cycles_counter
 812               		.section	.data.cycles_counter,"aw",@progbits
 815               	cycles_counter:
 816 0000 01        		.byte	1
 817               	.global	association_request
 818               		.section	.bss.association_request,"aw",@nobits
 821               	association_request:
 822 0000 00        		.zero	1
 823               		.comm	msg_info_array,6600,1
 824               	.global	size_msg_info
 825               		.section	.bss.size_msg_info,"aw",@nobits
 828               	size_msg_info:
 829 0000 0000      		.zero	2
 830               	.global	data_received
 831               		.section	.bss.data_received,"aw",@nobits
 834               	data_received:
 835 0000 00        		.zero	1
 836               	.global	PLR
 837               		.section	.bss.PLR,"aw",@nobits
 840               	PLR:
 841 0000 0000 0000 		.zero	4
 842               	.global	PER
 843               		.section	.bss.PER,"aw",@nobits
 846               	PER:
 847 0000 0000 0000 		.zero	4
 848               		.comm	retransmit_ts_array,32,1
 849               	.global	retransmit_ts_array_counter
 850               		.section	.bss.retransmit_ts_array_counter,"aw",@nobits
 853               	retransmit_ts_array_counter:
 854 0000 0000      		.zero	2
 855               	.global	counter_delay_msg
 856               		.section	.bss.counter_delay_msg,"aw",@nobits
 859               	counter_delay_msg:
 860 0000 0000      		.zero	2
 861               	.global	cmp_value_start_superframe
 862               		.section	.bss.cmp_value_start_superframe,"aw",@nobits
 865               	cmp_value_start_superframe:
 866 0000 0000 0000 		.zero	4
 867               	.global	count_up
 868               		.section	.bss.count_up,"aw",@nobits
 871               	count_up:
 872 0000 0000 0000 		.zero	4
 873               	.global	count_lost_superframe
 874               		.section	.bss.count_lost_superframe,"aw",@nobits
 877               	count_lost_superframe:
 878 0000 0000 0000 		.zero	4
 879               		.section	.data.msgReqGACK,"aw",@progbits
 882               	msgReqGACK:
 883 0000 0000 0000 		.zero	5
 883      00
 884 0005 0000      		.word	0
 885 0007 00        		.byte	0
 886 0008 00        		.byte	0
 887 0009 0040      		.word	16384
 888 000b 0000      		.zero	2
 889 000d 0000      		.word	ACKFrame
 890 000f 0000 0000 		.zero	5
 890      00
 891               		.text
 893               	lldn_server_beacon:
 894               	.LFB131:
  83:ServerLLDN.c  **** 
  84:ServerLLDN.c  **** #if APP_COORDINATOR
  85:ServerLLDN.c  **** 
  86:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  87:ServerLLDN.c  **** 	int accepting_requests = 1;
  88:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  89:ServerLLDN.c  **** 	
  90:ServerLLDN.c  **** 	/* Configuration Request Frames */
  91:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  92:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  93:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  94:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  95:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  96:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  97:ServerLLDN.c  **** 
  98:ServerLLDN.c  **** 
  99:ServerLLDN.c  **** 
 100:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
 101:ServerLLDN.c  **** 	uint8_t stack_conf_req[20];
 102:ServerLLDN.c  **** 	
 103:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
 104:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	
 105:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame_aux;
 106:ServerLLDN.c  **** 	
 107:ServerLLDN.c  **** 	int ACKFrame_size = 0;
 108:ServerLLDN.c  **** 	
 109:ServerLLDN.c  **** 
 110:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
 111:ServerLLDN.c  **** 	float beaconInterval_association = 0;
 112:ServerLLDN.c  **** 	
 113:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
 114:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
 115:ServerLLDN.c  **** 	 */
 116:ServerLLDN.c  **** 	// static SYS_Timer_t tmrDelay;	
 117:ServerLLDN.c  **** 	
 118:ServerLLDN.c  **** 	/*  Control variables for testing */	
 119:ServerLLDN.c  **** 	int assTimeSlot = 0;
 120:ServerLLDN.c  **** 
 121:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 122:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 123:ServerLLDN.c  **** 
 124:ServerLLDN.c  **** 	bool association_request = false;
 125:ServerLLDN.c  **** 
 126:ServerLLDN.c  **** 	/* data related variables */
 127:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 128:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 129:ServerLLDN.c  **** 	bool data_received = false;	
 130:ServerLLDN.c  **** 	float PLR = 0;
 131:ServerLLDN.c  **** 	float PER = 0;
 132:ServerLLDN.c  **** 	uint8_t retransmit_ts_array[32];
 133:ServerLLDN.c  **** 	int retransmit_ts_array_counter = 0;
 134:ServerLLDN.c  **** 	
 135:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 136:ServerLLDN.c  **** 	uint32_t cmp_value_start_superframe = 0;
 137:ServerLLDN.c  **** 	float count_up = 0;
 138:ServerLLDN.c  **** 	float count_lost_superframe = 0;
 139:ServerLLDN.c  **** 	
 140:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqGACK = { .dstAddr = 0,
 141:ServerLLDN.c  **** 										.dstEndpoint = APP_BEACON_ENDPOINT,
 142:ServerLLDN.c  **** 										.srcEndpoint = APP_BEACON_ENDPOINT,
 143:ServerLLDN.c  **** 										.options = NWK_OPT_LLDN_ACK,
 144:ServerLLDN.c  **** 										.data = (uint8_t*)&ACKFrame};
 145:ServerLLDN.c  **** 
 146:ServerLLDN.c  **** 	
 147:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 148:ServerLLDN.c  **** 	{
 895               		.loc 6 148 0
 896               		.cfi_startproc
 897 02f2 CF93      		push r28
 898               	.LCFI43:
 899               		.cfi_def_cfa_offset 3
 900               		.cfi_offset 28, -2
 901 02f4 DF93      		push r29
 902               	.LCFI44:
 903               		.cfi_def_cfa_offset 4
 904               		.cfi_offset 29, -3
 905 02f6 CDB7      		in r28,__SP_L__
 906 02f8 DEB7      		in r29,__SP_H__
 907               	.LCFI45:
 908               		.cfi_def_cfa_register 28
 909               	/* prologue: function */
 910               	/* frame size = 0 */
 911               	/* stack size = 2 */
 912               	.L__stack_usage = 2
 149:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 913               		.loc 6 149 0
 914 02fa 0E94 0000 		call macsc_enable_manual_bts
 150:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 915               		.loc 6 150 0
 916 02fe 82E0      		ldi r24,lo8(2)
 917 0300 8093 0000 		sts appState,r24
 151:ServerLLDN.c  **** 	}
 918               		.loc 6 151 0
 919 0304 0000      		nop
 920               	/* epilogue start */
 921 0306 DF91      		pop r29
 922 0308 CF91      		pop r28
 923 030a 0895      		ret
 924               		.cfi_endproc
 925               	.LFE131:
 928               	downlink_delay_handler:
 929               	.LFB132:
 152:ServerLLDN.c  **** 	
 153:ServerLLDN.c  **** 
 154:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 155:ServerLLDN.c  **** 	{
 930               		.loc 6 155 0
 931               		.cfi_startproc
 932 030c CF93      		push r28
 933               	.LCFI46:
 934               		.cfi_def_cfa_offset 3
 935               		.cfi_offset 28, -2
 936 030e DF93      		push r29
 937               	.LCFI47:
 938               		.cfi_def_cfa_offset 4
 939               		.cfi_offset 29, -3
 940 0310 CDB7      		in r28,__SP_L__
 941 0312 DEB7      		in r29,__SP_H__
 942               	.LCFI48:
 943               		.cfi_def_cfa_register 28
 944               	/* prologue: function */
 945               	/* frame size = 0 */
 946               	/* stack size = 2 */
 947               	.L__stack_usage = 2
 156:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 948               		.loc 6 156 0
 949 0314 8091 0000 		lds r24,msgReq+9
 950 0318 9091 0000 		lds r25,msgReq+9+1
 951 031c 8115      		cp r24,__zero_reg__
 952 031e 9048      		sbci r25,-128
 953 0320 01F4      		brne .L26
 157:ServerLLDN.c  **** 		{
 158:ServerLLDN.c  **** 			counter_delay_msg++;
 954               		.loc 6 158 0
 955 0322 8091 0000 		lds r24,counter_delay_msg
 956 0326 9091 0000 		lds r25,counter_delay_msg+1
 957 032a 0196      		adiw r24,1
 958 032c 9093 0000 		sts counter_delay_msg+1,r25
 959 0330 8093 0000 		sts counter_delay_msg,r24
 159:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 960               		.loc 6 159 0
 961 0334 82E0      		ldi r24,lo8(2)
 962 0336 8093 0000 		sts appState,r24
 963               	.L26:
 160:ServerLLDN.c  **** 		}
 161:ServerLLDN.c  **** 	}
 964               		.loc 6 161 0
 965 033a 0000      		nop
 966               	/* epilogue start */
 967 033c DF91      		pop r29
 968 033e CF91      		pop r28
 969 0340 0895      		ret
 970               		.cfi_endproc
 971               	.LFE132:
 974               	addToAckArray:
 975               	.LFB133:
 162:ServerLLDN.c  **** 
 163:ServerLLDN.c  **** 
 164:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 165:ServerLLDN.c  **** 	static void teste_handler(void)
 166:ServerLLDN.c  **** 	{
 167:ServerLLDN.c  **** 		if(msgReq.options)
 168:ServerLLDN.c  **** 			// printf("\n***TIMESLOT****");
 169:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 170:ServerLLDN.c  **** 	}
 171:ServerLLDN.c  **** 	#endif
 172:ServerLLDN.c  **** 	
 173:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 174:ServerLLDN.c  **** 	{	
 976               		.loc 6 174 0
 977               		.cfi_startproc
 978 0342 CF93      		push r28
 979               	.LCFI49:
 980               		.cfi_def_cfa_offset 3
 981               		.cfi_offset 28, -2
 982 0344 DF93      		push r29
 983               	.LCFI50:
 984               		.cfi_def_cfa_offset 4
 985               		.cfi_offset 29, -3
 986 0346 00D0      		rcall .
 987 0348 00D0      		rcall .
 988 034a 1F92      		push __zero_reg__
 989               	.LCFI51:
 990               		.cfi_def_cfa_offset 9
 991 034c CDB7      		in r28,__SP_L__
 992 034e DEB7      		in r29,__SP_H__
 993               	.LCFI52:
 994               		.cfi_def_cfa_register 28
 995               	/* prologue: function */
 996               	/* frame size = 5 */
 997               	/* stack size = 7 */
 998               	.L__stack_usage = 7
 999 0350 8D83      		std Y+5,r24
 175:ServerLLDN.c  **** 		int pos,bit_shift;
 176:ServerLLDN.c  **** 		if(addres == 8)
 1000               		.loc 6 176 0
 1001 0352 8D81      		ldd r24,Y+5
 1002 0354 8830      		cpi r24,lo8(8)
 1003 0356 01F4      		brne .L28
 177:ServerLLDN.c  **** 		{
 178:ServerLLDN.c  **** 			pos = 0;
 1004               		.loc 6 178 0
 1005 0358 1A82      		std Y+2,__zero_reg__
 1006 035a 1982      		std Y+1,__zero_reg__
 179:ServerLLDN.c  **** 			bit_shift = 0;
 1007               		.loc 6 179 0
 1008 035c 1C82      		std Y+4,__zero_reg__
 1009 035e 1B82      		std Y+3,__zero_reg__
 1010 0360 00C0      		rjmp .L29
 1011               	.L28:
 180:ServerLLDN.c  **** 		}
 181:ServerLLDN.c  **** 		else
 182:ServerLLDN.c  **** 		{
 183:ServerLLDN.c  **** 			pos =  addres / 8;
 1012               		.loc 6 183 0
 1013 0362 8D81      		ldd r24,Y+5
 1014 0364 8695      		lsr r24
 1015 0366 8695      		lsr r24
 1016 0368 8695      		lsr r24
 1017 036a 882F      		mov r24,r24
 1018 036c 90E0      		ldi r25,0
 1019 036e 9A83      		std Y+2,r25
 1020 0370 8983      		std Y+1,r24
 184:ServerLLDN.c  **** 			bit_shift = 8 - addres % 8;
 1021               		.loc 6 184 0
 1022 0372 8D81      		ldd r24,Y+5
 1023 0374 882F      		mov r24,r24
 1024 0376 90E0      		ldi r25,0
 1025 0378 8770      		andi r24,7
 1026 037a 9927      		clr r25
 1027 037c 28E0      		ldi r18,lo8(8)
 1028 037e 30E0      		ldi r19,0
 1029 0380 A901      		movw r20,r18
 1030 0382 481B      		sub r20,r24
 1031 0384 590B      		sbc r21,r25
 1032 0386 CA01      		movw r24,r20
 1033 0388 9C83      		std Y+4,r25
 1034 038a 8B83      		std Y+3,r24
 1035               	.L29:
 185:ServerLLDN.c  **** 		}
 186:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1036               		.loc 6 186 0
 1037 038c 8981      		ldd r24,Y+1
 1038 038e 9A81      		ldd r25,Y+2
 1039 0390 8050      		subi r24,lo8(-(ACKFrame+1))
 1040 0392 9040      		sbci r25,hi8(-(ACKFrame+1))
 1041 0394 FC01      		movw r30,r24
 1042 0396 8081      		ld r24,Z
 1043 0398 882F      		mov r24,r24
 1044 039a 90E0      		ldi r25,0
 1045 039c 0B80      		ldd r0,Y+3
 1046 039e 00C0      		rjmp 2f
 1047               		1:
 1048 03a0 9595      		asr r25
 1049 03a2 8795      		ror r24
 1050               		2:
 1051 03a4 0A94      		dec r0
 1052 03a6 02F4      		brpl 1b
 1053 03a8 8170      		andi r24,1
 1054 03aa 9927      		clr r25
 1055 03ac 892B      		or r24,r25
 1056 03ae 01F0      		breq .L30
 187:ServerLLDN.c  **** 		{
 188:ServerLLDN.c  **** 			// printf("\nAddr rep %d", addres);
 189:ServerLLDN.c  **** 			return false;
 1057               		.loc 6 189 0
 1058 03b0 80E0      		ldi r24,0
 1059 03b2 00C0      		rjmp .L31
 1060               	.L30:
 190:ServerLLDN.c  **** 		}
 191:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 1061               		.loc 6 191 0
 1062 03b4 8981      		ldd r24,Y+1
 1063 03b6 9A81      		ldd r25,Y+2
 1064 03b8 8050      		subi r24,lo8(-(ACKFrame+1))
 1065 03ba 9040      		sbci r25,hi8(-(ACKFrame+1))
 1066 03bc FC01      		movw r30,r24
 1067 03be 8081      		ld r24,Z
 1068 03c0 282F      		mov r18,r24
 1069 03c2 81E0      		ldi r24,lo8(1)
 1070 03c4 90E0      		ldi r25,0
 1071 03c6 0B80      		ldd r0,Y+3
 1072 03c8 00C0      		rjmp 2f
 1073               		1:
 1074 03ca 880F      		lsl r24
 1075 03cc 991F      		rol r25
 1076               		2:
 1077 03ce 0A94      		dec r0
 1078 03d0 02F4      		brpl 1b
 1079 03d2 822B      		or r24,r18
 1080 03d4 282F      		mov r18,r24
 1081 03d6 8981      		ldd r24,Y+1
 1082 03d8 9A81      		ldd r25,Y+2
 1083 03da 8050      		subi r24,lo8(-(ACKFrame+1))
 1084 03dc 9040      		sbci r25,hi8(-(ACKFrame+1))
 1085 03de FC01      		movw r30,r24
 1086 03e0 2083      		st Z,r18
 192:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 1087               		.loc 6 192 0
 1088 03e2 8981      		ldd r24,Y+1
 1089 03e4 9A81      		ldd r25,Y+2
 1090 03e6 9C01      		movw r18,r24
 1091 03e8 2F5F      		subi r18,-1
 1092 03ea 3F4F      		sbci r19,-1
 1093 03ec 8091 0000 		lds r24,ACKFrame_size
 1094 03f0 9091 0000 		lds r25,ACKFrame_size+1
 1095 03f4 8217      		cp r24,r18
 1096 03f6 9307      		cpc r25,r19
 1097 03f8 04F4      		brge .L32
 193:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 1098               		.loc 6 193 0
 1099 03fa 8981      		ldd r24,Y+1
 1100 03fc 9A81      		ldd r25,Y+2
 1101 03fe 0196      		adiw r24,1
 1102 0400 9093 0000 		sts ACKFrame_size+1,r25
 1103 0404 8093 0000 		sts ACKFrame_size,r24
 1104               	.L32:
 194:ServerLLDN.c  **** 		// printf("ACK, %hhx", ACKFrame.ackFlags[pos]);
 195:ServerLLDN.c  **** 		return true;
 1105               		.loc 6 195 0
 1106 0408 81E0      		ldi r24,lo8(1)
 1107               	.L31:
 1108               	/* epilogue start */
 196:ServerLLDN.c  **** 	}
 1109               		.loc 6 196 0
 1110 040a 0F90      		pop __tmp_reg__
 1111 040c 0F90      		pop __tmp_reg__
 1112 040e 0F90      		pop __tmp_reg__
 1113 0410 0F90      		pop __tmp_reg__
 1114 0412 0F90      		pop __tmp_reg__
 1115 0414 DF91      		pop r29
 1116 0416 CF91      		pop r28
 1117 0418 0895      		ret
 1118               		.cfi_endproc
 1119               	.LFE133:
 1122               	addConfRequestArray:
 1123               	.LFB134:
 197:ServerLLDN.c  **** 
 198:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 199:ServerLLDN.c  **** 	{
 1124               		.loc 6 199 0
 1125               		.cfi_startproc
 1126 041a CF93      		push r28
 1127               	.LCFI53:
 1128               		.cfi_def_cfa_offset 3
 1129               		.cfi_offset 28, -2
 1130 041c DF93      		push r29
 1131               	.LCFI54:
 1132               		.cfi_def_cfa_offset 4
 1133               		.cfi_offset 29, -3
 1134 041e CDB7      		in r28,__SP_L__
 1135 0420 DEB7      		in r29,__SP_H__
 1136               	.LCFI55:
 1137               		.cfi_def_cfa_register 28
 1138 0422 2797      		sbiw r28,7
 1139               	.LCFI56:
 1140               		.cfi_def_cfa_offset 11
 1141 0424 0FB6      		in __tmp_reg__,__SREG__
 1142 0426 F894      		cli
 1143 0428 DEBF      		out __SP_H__,r29
 1144 042a 0FBE      		out __SREG__,__tmp_reg__
 1145 042c CDBF      		out __SP_L__,r28
 1146               	/* prologue: function */
 1147               	/* frame size = 7 */
 1148               	/* stack size = 9 */
 1149               	.L__stack_usage = 9
 1150 042e 9F83      		std Y+7,r25
 1151 0430 8E83      		std Y+6,r24
 1152               	.LBB3:
 200:ServerLLDN.c  **** 
 201:ServerLLDN.c  **** 		uint8_t i;
 202:ServerLLDN.c  **** 		for (int j = 0; j <= assTimeSlot ; j++)
 1153               		.loc 6 202 0
 1154 0432 1B82      		std Y+3,__zero_reg__
 1155 0434 1A82      		std Y+2,__zero_reg__
 1156 0436 00C0      		rjmp .L34
 1157               	.L37:
 203:ServerLLDN.c  **** 		{
 204:ServerLLDN.c  **** 			if (nodes_info_arr[j].mac_addr == node->macAddr)
 1158               		.loc 6 204 0
 1159 0438 2A81      		ldd r18,Y+2
 1160 043a 3B81      		ldd r19,Y+3
 1161 043c 4AE4      		ldi r20,lo8(74)
 1162 043e 429F      		mul r20,r18
 1163 0440 C001      		movw r24,r0
 1164 0442 439F      		mul r20,r19
 1165 0444 900D      		add r25,r0
 1166 0446 1124      		clr __zero_reg__
 1167 0448 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1168 044a 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1169 044c FC01      		movw r30,r24
 1170 044e 2081      		ld r18,Z
 1171 0450 3181      		ldd r19,Z+1
 1172 0452 8E81      		ldd r24,Y+6
 1173 0454 9F81      		ldd r25,Y+7
 1174 0456 FC01      		movw r30,r24
 1175 0458 8381      		ldd r24,Z+3
 1176 045a 882F      		mov r24,r24
 1177 045c 90E0      		ldi r25,0
 1178 045e 2817      		cp r18,r24
 1179 0460 3907      		cpc r19,r25
 1180 0462 01F4      		brne .+2
 1181 0464 00C0      		rjmp .L43
 202:ServerLLDN.c  **** 		{
 1182               		.loc 6 202 0 discriminator 2
 1183 0466 8A81      		ldd r24,Y+2
 1184 0468 9B81      		ldd r25,Y+3
 1185 046a 0196      		adiw r24,1
 1186 046c 9B83      		std Y+3,r25
 1187 046e 8A83      		std Y+2,r24
 1188               	.L34:
 202:ServerLLDN.c  **** 		{
 1189               		.loc 6 202 0 is_stmt 0 discriminator 1
 1190 0470 8091 0000 		lds r24,assTimeSlot
 1191 0474 9091 0000 		lds r25,assTimeSlot+1
 1192 0478 2A81      		ldd r18,Y+2
 1193 047a 3B81      		ldd r19,Y+3
 1194 047c 8217      		cp r24,r18
 1195 047e 9307      		cpc r25,r19
 1196 0480 04F4      		brge .L37
 1197               	.LBE3:
 205:ServerLLDN.c  **** 			{	
 206:ServerLLDN.c  **** 				return;
 207:ServerLLDN.c  **** 			}
 208:ServerLLDN.c  **** 		}
 209:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1198               		.loc 6 209 0 is_stmt 1
 1199 0482 1982      		std Y+1,__zero_reg__
 1200 0484 00C0      		rjmp .L38
 1201               	.L39:
 1202               		.loc 6 209 0 is_stmt 0 discriminator 3
 1203 0486 8981      		ldd r24,Y+1
 1204 0488 8F5F      		subi r24,lo8(-(1))
 1205 048a 8983      		std Y+1,r24
 1206               	.L38:
 1207               		.loc 6 209 0 discriminator 1
 1208 048c 8981      		ldd r24,Y+1
 1209 048e 282F      		mov r18,r24
 1210 0490 30E0      		ldi r19,0
 1211 0492 4AE4      		ldi r20,lo8(74)
 1212 0494 429F      		mul r20,r18
 1213 0496 C001      		movw r24,r0
 1214 0498 439F      		mul r20,r19
 1215 049a 900D      		add r25,r0
 1216 049c 1124      		clr __zero_reg__
 1217 049e 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1218 04a0 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1219 04a2 FC01      		movw r30,r24
 1220 04a4 8081      		ld r24,Z
 1221 04a6 9181      		ldd r25,Z+1
 1222 04a8 892B      		or r24,r25
 1223 04aa 01F4      		brne .L39
 210:ServerLLDN.c  **** 		
 211:ServerLLDN.c  **** 		assTimeSlot++;
 1224               		.loc 6 211 0 is_stmt 1
 1225 04ac 8091 0000 		lds r24,assTimeSlot
 1226 04b0 9091 0000 		lds r25,assTimeSlot+1
 1227 04b4 0196      		adiw r24,1
 1228 04b6 9093 0000 		sts assTimeSlot+1,r25
 1229 04ba 8093 0000 		sts assTimeSlot,r24
 212:ServerLLDN.c  **** 	
 213:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1230               		.loc 6 213 0
 1231 04be 8E81      		ldd r24,Y+6
 1232 04c0 9F81      		ldd r25,Y+7
 1233 04c2 FC01      		movw r30,r24
 1234 04c4 8481      		ldd r24,Z+4
 1235 04c6 8F77      		andi r24,lo8(127)
 1236 04c8 282F      		mov r18,r24
 1237 04ca 30E0      		ldi r19,0
 1238 04cc 8091 0000 		lds r24,config_request_frame+5
 1239 04d0 8F77      		andi r24,lo8(127)
 1240 04d2 882F      		mov r24,r24
 1241 04d4 90E0      		ldi r25,0
 1242 04d6 8217      		cp r24,r18
 1243 04d8 9307      		cpc r25,r19
 1244 04da 04F4      		brge .L40
 214:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1245               		.loc 6 214 0
 1246 04dc 8E81      		ldd r24,Y+6
 1247 04de 9F81      		ldd r25,Y+7
 1248 04e0 FC01      		movw r30,r24
 1249 04e2 8481      		ldd r24,Z+4
 1250 04e4 8F77      		andi r24,lo8(127)
 1251 04e6 8F77      		andi r24,lo8(127)
 1252 04e8 9091 0000 		lds r25,config_request_frame+5
 1253 04ec 9078      		andi r25,lo8(-128)
 1254 04ee 892B      		or r24,r25
 1255 04f0 8093 0000 		sts config_request_frame+5,r24
 1256               	.L40:
 215:ServerLLDN.c  **** 		
 216:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1257               		.loc 6 216 0
 1258 04f4 8981      		ldd r24,Y+1
 1259 04f6 282F      		mov r18,r24
 1260 04f8 30E0      		ldi r19,0
 1261 04fa 8E81      		ldd r24,Y+6
 1262 04fc 9F81      		ldd r25,Y+7
 1263 04fe FC01      		movw r30,r24
 1264 0500 8481      		ldd r24,Z+4
 1265 0502 8F77      		andi r24,lo8(127)
 1266 0504 582F      		mov r21,r24
 1267 0506 4AE4      		ldi r20,lo8(74)
 1268 0508 429F      		mul r20,r18
 1269 050a C001      		movw r24,r0
 1270 050c 439F      		mul r20,r19
 1271 050e 900D      		add r25,r0
 1272 0510 1124      		clr __zero_reg__
 1273 0512 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1274 0514 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1275 0516 FC01      		movw r30,r24
 1276 0518 5083      		st Z,r21
 217:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1277               		.loc 6 217 0
 1278 051a 8981      		ldd r24,Y+1
 1279 051c 482F      		mov r20,r24
 1280 051e 50E0      		ldi r21,0
 1281 0520 8E81      		ldd r24,Y+6
 1282 0522 9F81      		ldd r25,Y+7
 1283 0524 FC01      		movw r30,r24
 1284 0526 8381      		ldd r24,Z+3
 1285 0528 282F      		mov r18,r24
 1286 052a 30E0      		ldi r19,0
 1287 052c 6AE4      		ldi r22,lo8(74)
 1288 052e 649F      		mul r22,r20
 1289 0530 C001      		movw r24,r0
 1290 0532 659F      		mul r22,r21
 1291 0534 900D      		add r25,r0
 1292 0536 1124      		clr __zero_reg__
 1293 0538 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1294 053a 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1295 053c FC01      		movw r30,r24
 1296 053e 3183      		std Z+1,r19
 1297 0540 2083      		st Z,r18
 218:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1298               		.loc 6 218 0
 1299 0542 8981      		ldd r24,Y+1
 1300 0544 282F      		mov r18,r24
 1301 0546 30E0      		ldi r19,0
 1302 0548 4AE4      		ldi r20,lo8(74)
 1303 054a 429F      		mul r20,r18
 1304 054c C001      		movw r24,r0
 1305 054e 439F      		mul r20,r19
 1306 0550 900D      		add r25,r0
 1307 0552 1124      		clr __zero_reg__
 1308 0554 8050      		subi r24,lo8(-(nodes_info_arr))
 1309 0556 9040      		sbci r25,hi8(-(nodes_info_arr))
 1310 0558 2981      		ldd r18,Y+1
 1311 055a FC01      		movw r30,r24
 1312 055c 2083      		st Z,r18
 219:ServerLLDN.c  **** 		
 220:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1313               		.loc 6 220 0
 1314 055e 8091 0000 		lds r24,conf_req_list
 1315 0562 9091 0000 		lds r25,conf_req_list+1
 1316 0566 892B      		or r24,r25
 1317 0568 01F0      		breq .L41
 1318               	.LBB4:
 221:ServerLLDN.c  **** 		{
 222:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1319               		.loc 6 222 0
 1320 056a 84E0      		ldi r24,lo8(4)
 1321 056c 90E0      		ldi r25,0
 1322 056e 0E94 0000 		call malloc
 1323 0572 9D83      		std Y+5,r25
 1324 0574 8C83      		std Y+4,r24
 223:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1325               		.loc 6 223 0
 1326 0576 8981      		ldd r24,Y+1
 1327 0578 282F      		mov r18,r24
 1328 057a 30E0      		ldi r19,0
 1329 057c 4AE4      		ldi r20,lo8(74)
 1330 057e 429F      		mul r20,r18
 1331 0580 C001      		movw r24,r0
 1332 0582 439F      		mul r20,r19
 1333 0584 900D      		add r25,r0
 1334 0586 1124      		clr __zero_reg__
 1335 0588 9C01      		movw r18,r24
 1336 058a 2050      		subi r18,lo8(-(nodes_info_arr))
 1337 058c 3040      		sbci r19,hi8(-(nodes_info_arr))
 1338 058e 8C81      		ldd r24,Y+4
 1339 0590 9D81      		ldd r25,Y+5
 1340 0592 FC01      		movw r30,r24
 1341 0594 3183      		std Z+1,r19
 1342 0596 2083      		st Z,r18
 224:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1343               		.loc 6 224 0
 1344 0598 2091 0000 		lds r18,conf_req_list
 1345 059c 3091 0000 		lds r19,conf_req_list+1
 1346 05a0 8C81      		ldd r24,Y+4
 1347 05a2 9D81      		ldd r25,Y+5
 1348 05a4 FC01      		movw r30,r24
 1349 05a6 3383      		std Z+3,r19
 1350 05a8 2283      		std Z+2,r18
 225:ServerLLDN.c  **** 			conf_req_list = tmp;
 1351               		.loc 6 225 0
 1352 05aa 8C81      		ldd r24,Y+4
 1353 05ac 9D81      		ldd r25,Y+5
 1354 05ae 9093 0000 		sts conf_req_list+1,r25
 1355 05b2 8093 0000 		sts conf_req_list,r24
 1356               	.LBE4:
 226:ServerLLDN.c  **** 		}
 227:ServerLLDN.c  **** 		else
 228:ServerLLDN.c  **** 		{
 229:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 230:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 231:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 232:ServerLLDN.c  **** 		}
 233:ServerLLDN.c  **** 		return;
 1357               		.loc 6 233 0
 1358 05b6 00C0      		rjmp .L33
 1359               	.L41:
 229:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1360               		.loc 6 229 0
 1361 05b8 84E0      		ldi r24,lo8(4)
 1362 05ba 90E0      		ldi r25,0
 1363 05bc 0E94 0000 		call malloc
 1364 05c0 9093 0000 		sts conf_req_list+1,r25
 1365 05c4 8093 0000 		sts conf_req_list,r24
 230:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1366               		.loc 6 230 0
 1367 05c8 8091 0000 		lds r24,conf_req_list
 1368 05cc 9091 0000 		lds r25,conf_req_list+1
 1369 05d0 2981      		ldd r18,Y+1
 1370 05d2 422F      		mov r20,r18
 1371 05d4 50E0      		ldi r21,0
 1372 05d6 6AE4      		ldi r22,lo8(74)
 1373 05d8 649F      		mul r22,r20
 1374 05da 9001      		movw r18,r0
 1375 05dc 659F      		mul r22,r21
 1376 05de 300D      		add r19,r0
 1377 05e0 1124      		clr __zero_reg__
 1378 05e2 2050      		subi r18,lo8(-(nodes_info_arr))
 1379 05e4 3040      		sbci r19,hi8(-(nodes_info_arr))
 1380 05e6 FC01      		movw r30,r24
 1381 05e8 3183      		std Z+1,r19
 1382 05ea 2083      		st Z,r18
 231:ServerLLDN.c  **** 		}
 1383               		.loc 6 231 0
 1384 05ec 8091 0000 		lds r24,conf_req_list
 1385 05f0 9091 0000 		lds r25,conf_req_list+1
 1386 05f4 FC01      		movw r30,r24
 1387 05f6 1382      		std Z+3,__zero_reg__
 1388 05f8 1282      		std Z+2,__zero_reg__
 1389               		.loc 6 233 0
 1390 05fa 0000      		nop
 1391 05fc 00C0      		rjmp .L33
 1392               	.L43:
 1393               	.LBB5:
 206:ServerLLDN.c  **** 			}
 1394               		.loc 6 206 0
 1395 05fe 0000      		nop
 1396               	.L33:
 1397               	/* epilogue start */
 1398               	.LBE5:
 234:ServerLLDN.c  **** 	}
 1399               		.loc 6 234 0
 1400 0600 2796      		adiw r28,7
 1401 0602 0FB6      		in __tmp_reg__,__SREG__
 1402 0604 F894      		cli
 1403 0606 DEBF      		out __SP_H__,r29
 1404 0608 0FBE      		out __SREG__,__tmp_reg__
 1405 060a CDBF      		out __SP_L__,r28
 1406 060c DF91      		pop r29
 1407 060e CF91      		pop r28
 1408 0610 0895      		ret
 1409               		.cfi_endproc
 1410               	.LFE134:
 1413               	CopyToConfigRequest:
 1414               	.LFB135:
 235:ServerLLDN.c  **** 
 236:ServerLLDN.c  **** 	static bool CopyToConfigRequest(void)
 237:ServerLLDN.c  **** 	{
 1415               		.loc 6 237 0
 1416               		.cfi_startproc
 1417 0612 CF93      		push r28
 1418               	.LCFI57:
 1419               		.cfi_def_cfa_offset 3
 1420               		.cfi_offset 28, -2
 1421 0614 DF93      		push r29
 1422               	.LCFI58:
 1423               		.cfi_def_cfa_offset 4
 1424               		.cfi_offset 29, -3
 1425 0616 00D0      		rcall .
 1426               	.LCFI59:
 1427               		.cfi_def_cfa_offset 6
 1428 0618 CDB7      		in r28,__SP_L__
 1429 061a DEB7      		in r29,__SP_H__
 1430               	.LCFI60:
 1431               		.cfi_def_cfa_register 28
 1432               	/* prologue: function */
 1433               	/* frame size = 2 */
 1434               	/* stack size = 4 */
 1435               	.L__stack_usage = 4
 238:ServerLLDN.c  **** 		if(conf_req_list->node == NULL)
 1436               		.loc 6 238 0
 1437 061c 8091 0000 		lds r24,conf_req_list
 1438 0620 9091 0000 		lds r25,conf_req_list+1
 1439 0624 FC01      		movw r30,r24
 1440 0626 8081      		ld r24,Z
 1441 0628 9181      		ldd r25,Z+1
 1442 062a 892B      		or r24,r25
 1443 062c 01F4      		brne .L45
 239:ServerLLDN.c  **** 			return false;
 1444               		.loc 6 239 0
 1445 062e 80E0      		ldi r24,0
 1446 0630 00C0      		rjmp .L46
 1447               	.L45:
 240:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1448               		.loc 6 240 0
 1449 0632 8091 0000 		lds r24,conf_req_list
 1450 0636 9091 0000 		lds r25,conf_req_list+1
 1451 063a FC01      		movw r30,r24
 1452 063c 8081      		ld r24,Z
 1453 063e 9181      		ldd r25,Z+1
 1454 0640 FC01      		movw r30,r24
 1455 0642 8081      		ld r24,Z
 1456 0644 8093 0000 		sts config_request_frame+3,r24
 241:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1457               		.loc 6 241 0
 1458 0648 8091 0000 		lds r24,conf_req_list
 1459 064c 9091 0000 		lds r25,conf_req_list+1
 1460 0650 FC01      		movw r30,r24
 1461 0652 8081      		ld r24,Z
 1462 0654 9181      		ldd r25,Z+1
 1463 0656 FC01      		movw r30,r24
 1464 0658 8181      		ldd r24,Z+1
 1465 065a 9281      		ldd r25,Z+2
 1466 065c 8093 0000 		sts config_request_frame+4,r24
 242:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1467               		.loc 6 242 0
 1468 0660 8091 0000 		lds r24,conf_req_list
 1469 0664 9091 0000 		lds r25,conf_req_list+1
 1470 0668 9A83      		std Y+2,r25
 1471 066a 8983      		std Y+1,r24
 243:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1472               		.loc 6 243 0
 1473 066c 8091 0000 		lds r24,conf_req_list
 1474 0670 9091 0000 		lds r25,conf_req_list+1
 1475 0674 FC01      		movw r30,r24
 1476 0676 8281      		ldd r24,Z+2
 1477 0678 9381      		ldd r25,Z+3
 1478 067a 9093 0000 		sts conf_req_list+1,r25
 1479 067e 8093 0000 		sts conf_req_list,r24
 244:ServerLLDN.c  **** 		tmp->node = NULL;
 1480               		.loc 6 244 0
 1481 0682 8981      		ldd r24,Y+1
 1482 0684 9A81      		ldd r25,Y+2
 1483 0686 FC01      		movw r30,r24
 1484 0688 1182      		std Z+1,__zero_reg__
 1485 068a 1082      		st Z,__zero_reg__
 245:ServerLLDN.c  **** 		tmp->next = NULL;
 1486               		.loc 6 245 0
 1487 068c 8981      		ldd r24,Y+1
 1488 068e 9A81      		ldd r25,Y+2
 1489 0690 FC01      		movw r30,r24
 1490 0692 1382      		std Z+3,__zero_reg__
 1491 0694 1282      		std Z+2,__zero_reg__
 246:ServerLLDN.c  **** 		free(tmp);
 1492               		.loc 6 246 0
 1493 0696 8981      		ldd r24,Y+1
 1494 0698 9A81      		ldd r25,Y+2
 1495 069a 0E94 0000 		call free
 247:ServerLLDN.c  **** 		return true;
 1496               		.loc 6 247 0
 1497 069e 81E0      		ldi r24,lo8(1)
 1498               	.L46:
 1499               	/* epilogue start */
 248:ServerLLDN.c  **** 	}
 1500               		.loc 6 248 0
 1501 06a0 0F90      		pop __tmp_reg__
 1502 06a2 0F90      		pop __tmp_reg__
 1503 06a4 DF91      		pop r29
 1504 06a6 CF91      		pop r28
 1505 06a8 0895      		ret
 1506               		.cfi_endproc
 1507               	.LFE135:
 1510               	appCommandInd:
 1511               	.LFB136:
 249:ServerLLDN.c  **** 
 250:ServerLLDN.c  **** 
 251:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 252:ServerLLDN.c  **** 	{
 1512               		.loc 6 252 0
 1513               		.cfi_startproc
 1514 06aa CF93      		push r28
 1515               	.LCFI61:
 1516               		.cfi_def_cfa_offset 3
 1517               		.cfi_offset 28, -2
 1518 06ac DF93      		push r29
 1519               	.LCFI62:
 1520               		.cfi_def_cfa_offset 4
 1521               		.cfi_offset 29, -3
 1522 06ae 00D0      		rcall .
 1523 06b0 00D0      		rcall .
 1524 06b2 00D0      		rcall .
 1525               	.LCFI63:
 1526               		.cfi_def_cfa_offset 10
 1527 06b4 CDB7      		in r28,__SP_L__
 1528 06b6 DEB7      		in r29,__SP_H__
 1529               	.LCFI64:
 1530               		.cfi_def_cfa_register 28
 1531               	/* prologue: function */
 1532               	/* frame size = 6 */
 1533               	/* stack size = 8 */
 1534               	.L__stack_usage = 8
 1535 06b8 9E83      		std Y+6,r25
 1536 06ba 8D83      		std Y+5,r24
 253:ServerLLDN.c  **** 		if(!accepting_requests) return false;
 1537               		.loc 6 253 0
 1538 06bc 8091 0000 		lds r24,accepting_requests
 1539 06c0 9091 0000 		lds r25,accepting_requests+1
 1540 06c4 892B      		or r24,r25
 1541 06c6 01F4      		brne .L48
 1542               		.loc 6 253 0 is_stmt 0 discriminator 1
 1543 06c8 80E0      		ldi r24,0
 1544 06ca 00C0      		rjmp .L49
 1545               	.L48:
 254:ServerLLDN.c  **** 		// if(n <127) return false;
 255:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1546               		.loc 6 255 0 is_stmt 1
 1547 06cc 8D81      		ldd r24,Y+5
 1548 06ce 9E81      		ldd r25,Y+6
 1549 06d0 FC01      		movw r30,r24
 1550 06d2 8085      		ldd r24,Z+8
 1551 06d4 9185      		ldd r25,Z+9
 1552 06d6 FC01      		movw r30,r24
 1553 06d8 8081      		ld r24,Z
 1554 06da 8D30      		cpi r24,lo8(13)
 1555 06dc 01F4      		brne .L50
 1556               	.LBB6:
 256:ServerLLDN.c  **** 		{
 257:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1557               		.loc 6 257 0
 1558 06de 8D81      		ldd r24,Y+5
 1559 06e0 9E81      		ldd r25,Y+6
 1560 06e2 FC01      		movw r30,r24
 1561 06e4 8085      		ldd r24,Z+8
 1562 06e6 9185      		ldd r25,Z+9
 1563 06e8 9A83      		std Y+2,r25
 1564 06ea 8983      		std Y+1,r24
 258:ServerLLDN.c  **** 			if(msg->macAddr > 0x0F)
 1565               		.loc 6 258 0
 1566 06ec 8981      		ldd r24,Y+1
 1567 06ee 9A81      		ldd r25,Y+2
 1568 06f0 FC01      		movw r30,r24
 1569 06f2 8181      		ldd r24,Z+1
 1570 06f4 8031      		cpi r24,lo8(16)
 1571 06f6 00F0      		brlo .L51
 259:ServerLLDN.c  **** 			return false;
 1572               		.loc 6 259 0
 1573 06f8 80E0      		ldi r24,0
 1574 06fa 00C0      		rjmp .L49
 1575               	.L51:
 260:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1576               		.loc 6 260 0
 1577 06fc 8981      		ldd r24,Y+1
 1578 06fe 9A81      		ldd r25,Y+2
 1579 0700 FC01      		movw r30,r24
 1580 0702 8181      		ldd r24,Z+1
 1581 0704 0E94 0000 		call addToAckArray
 1582               	.LBE6:
 1583 0708 00C0      		rjmp .L52
 1584               	.L50:
 261:ServerLLDN.c  **** 					
 262:ServerLLDN.c  **** 			#if PRINT
 263:ServerLLDN.c  **** 			//uint32_t tmp = macsc_read_count();
 264:ServerLLDN.c  **** // 			printf("\n%" PRIu32 " ", tmp);			
 265:ServerLLDN.c  ****  			// printf(" DISC %hhx", msg->macAddr);	
 266:ServerLLDN.c  **** 			#endif
 267:ServerLLDN.c  **** 		}
 268:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1585               		.loc 6 268 0
 1586 070a 8D81      		ldd r24,Y+5
 1587 070c 9E81      		ldd r25,Y+6
 1588 070e FC01      		movw r30,r24
 1589 0710 8085      		ldd r24,Z+8
 1590 0712 9185      		ldd r25,Z+9
 1591 0714 FC01      		movw r30,r24
 1592 0716 8081      		ld r24,Z
 1593 0718 8E30      		cpi r24,lo8(14)
 1594 071a 01F4      		brne .L53
 1595               	.LBB7:
 269:ServerLLDN.c  **** 		{
 270:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1596               		.loc 6 270 0
 1597 071c 8D81      		ldd r24,Y+5
 1598 071e 9E81      		ldd r25,Y+6
 1599 0720 FC01      		movw r30,r24
 1600 0722 8085      		ldd r24,Z+8
 1601 0724 9185      		ldd r25,Z+9
 1602 0726 9C83      		std Y+4,r25
 1603 0728 8B83      		std Y+3,r24
 271:ServerLLDN.c  **** 			if(msg->macAddr > 0x0F)
 1604               		.loc 6 271 0
 1605 072a 8B81      		ldd r24,Y+3
 1606 072c 9C81      		ldd r25,Y+4
 1607 072e FC01      		movw r30,r24
 1608 0730 8381      		ldd r24,Z+3
 1609 0732 8031      		cpi r24,lo8(16)
 1610 0734 00F0      		brlo .L54
 272:ServerLLDN.c  **** 			return false;
 1611               		.loc 6 272 0
 1612 0736 80E0      		ldi r24,0
 1613 0738 00C0      		rjmp .L49
 1614               	.L54:
 273:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1615               		.loc 6 273 0
 1616 073a 8B81      		ldd r24,Y+3
 1617 073c 9C81      		ldd r25,Y+4
 1618 073e 0E94 0000 		call addConfRequestArray
 1619               	.LBE7:
 1620 0742 00C0      		rjmp .L52
 1621               	.L53:
 274:ServerLLDN.c  **** 			#if PRINT
 275:ServerLLDN.c  **** 			// printf("\nCONF %d", msg->macAddr);	
 276:ServerLLDN.c  **** 			#endif
 277:ServerLLDN.c  **** 		}
 278:ServerLLDN.c  **** 		else return false;			
 1622               		.loc 6 278 0
 1623 0744 80E0      		ldi r24,0
 1624 0746 00C0      		rjmp .L49
 1625               	.L52:
 279:ServerLLDN.c  **** 		return true;
 1626               		.loc 6 279 0
 1627 0748 81E0      		ldi r24,lo8(1)
 1628               	.L49:
 1629               	/* epilogue start */
 280:ServerLLDN.c  **** 	}
 1630               		.loc 6 280 0
 1631 074a 2696      		adiw r28,6
 1632 074c 0FB6      		in __tmp_reg__,__SREG__
 1633 074e F894      		cli
 1634 0750 DEBF      		out __SP_H__,r29
 1635 0752 0FBE      		out __SREG__,__tmp_reg__
 1636 0754 CDBF      		out __SP_L__,r28
 1637 0756 DF91      		pop r29
 1638 0758 CF91      		pop r28
 1639 075a 0895      		ret
 1640               		.cfi_endproc
 1641               	.LFE136:
 1643               	.global	check_ack_pan
 1645               	check_ack_pan:
 1646               	.LFB137:
 281:ServerLLDN.c  **** 	
 282:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 283:ServerLLDN.c  **** 	{
 1647               		.loc 6 283 0
 1648               		.cfi_startproc
 1649 075c CF93      		push r28
 1650               	.LCFI65:
 1651               		.cfi_def_cfa_offset 3
 1652               		.cfi_offset 28, -2
 1653 075e DF93      		push r29
 1654               	.LCFI66:
 1655               		.cfi_def_cfa_offset 4
 1656               		.cfi_offset 29, -3
 1657 0760 00D0      		rcall .
 1658 0762 00D0      		rcall .
 1659 0764 00D0      		rcall .
 1660               	.LCFI67:
 1661               		.cfi_def_cfa_offset 10
 1662 0766 CDB7      		in r28,__SP_L__
 1663 0768 DEB7      		in r29,__SP_H__
 1664               	.LCFI68:
 1665               		.cfi_def_cfa_register 28
 1666               	/* prologue: function */
 1667               	/* frame size = 6 */
 1668               	/* stack size = 8 */
 1669               	.L__stack_usage = 8
 1670 076a 9E83      		std Y+6,r25
 1671 076c 8D83      		std Y+5,r24
 284:ServerLLDN.c  **** 		int pos,bit_shift;
 285:ServerLLDN.c  **** 		if(addr == 8)
 1672               		.loc 6 285 0
 1673 076e 8D81      		ldd r24,Y+5
 1674 0770 9E81      		ldd r25,Y+6
 1675 0772 0897      		sbiw r24,8
 1676 0774 01F4      		brne .L56
 286:ServerLLDN.c  **** 		{
 287:ServerLLDN.c  **** 			pos = 0;
 1677               		.loc 6 287 0
 1678 0776 1A82      		std Y+2,__zero_reg__
 1679 0778 1982      		std Y+1,__zero_reg__
 288:ServerLLDN.c  **** 			bit_shift = 0;
 1680               		.loc 6 288 0
 1681 077a 1C82      		std Y+4,__zero_reg__
 1682 077c 1B82      		std Y+3,__zero_reg__
 1683 077e 00C0      		rjmp .L57
 1684               	.L56:
 289:ServerLLDN.c  **** 		}
 290:ServerLLDN.c  **** 		else
 291:ServerLLDN.c  **** 		{
 292:ServerLLDN.c  **** 			pos =  addr / 8;
 1685               		.loc 6 292 0
 1686 0780 8D81      		ldd r24,Y+5
 1687 0782 9E81      		ldd r25,Y+6
 1688 0784 9923      		tst r25
 1689 0786 04F4      		brge .L58
 1690 0788 0796      		adiw r24,7
 1691               	.L58:
 1692 078a 9595      		asr r25
 1693 078c 8795      		ror r24
 1694 078e 9595      		asr r25
 1695 0790 8795      		ror r24
 1696 0792 9595      		asr r25
 1697 0794 8795      		ror r24
 1698 0796 9A83      		std Y+2,r25
 1699 0798 8983      		std Y+1,r24
 293:ServerLLDN.c  **** 			bit_shift = 8 - addr % 8;
 1700               		.loc 6 293 0
 1701 079a 8D81      		ldd r24,Y+5
 1702 079c 9E81      		ldd r25,Y+6
 1703 079e 8770      		andi r24,7
 1704 07a0 9078      		andi r25,128
 1705 07a2 9923      		tst r25
 1706 07a4 04F4      		brge .L59
 1707 07a6 0197      		sbiw r24,1
 1708 07a8 886F      		ori r24,248
 1709 07aa 9F6F      		ori r25,255
 1710 07ac 0196      		adiw r24,1
 1711               	.L59:
 1712 07ae 9C01      		movw r18,r24
 1713 07b0 88E0      		ldi r24,lo8(8)
 1714 07b2 90E0      		ldi r25,0
 1715 07b4 821B      		sub r24,r18
 1716 07b6 930B      		sbc r25,r19
 1717 07b8 9C83      		std Y+4,r25
 1718 07ba 8B83      		std Y+3,r24
 1719               	.L57:
 294:ServerLLDN.c  **** 		}
 295:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1720               		.loc 6 295 0
 1721 07bc 8981      		ldd r24,Y+1
 1722 07be 9A81      		ldd r25,Y+2
 1723 07c0 8050      		subi r24,lo8(-(ACKFrame+1))
 1724 07c2 9040      		sbci r25,hi8(-(ACKFrame+1))
 1725 07c4 FC01      		movw r30,r24
 1726 07c6 8081      		ld r24,Z
 1727 07c8 882F      		mov r24,r24
 1728 07ca 90E0      		ldi r25,0
 1729 07cc 0B80      		ldd r0,Y+3
 1730 07ce 00C0      		rjmp 2f
 1731               		1:
 1732 07d0 9595      		asr r25
 1733 07d2 8795      		ror r24
 1734               		2:
 1735 07d4 0A94      		dec r0
 1736 07d6 02F4      		brpl 1b
 1737 07d8 8170      		andi r24,1
 1738 07da 9927      		clr r25
 1739 07dc 892B      		or r24,r25
 1740 07de 01F0      		breq .L60
 296:ServerLLDN.c  **** 		{
 297:ServerLLDN.c  **** 			return true;
 1741               		.loc 6 297 0
 1742 07e0 81E0      		ldi r24,lo8(1)
 1743 07e2 00C0      		rjmp .L61
 1744               	.L60:
 298:ServerLLDN.c  **** 		}
 299:ServerLLDN.c  **** 		else
 300:ServerLLDN.c  **** 			return false;
 1745               		.loc 6 300 0
 1746 07e4 80E0      		ldi r24,0
 1747               	.L61:
 1748               	/* epilogue start */
 301:ServerLLDN.c  **** 	}
 1749               		.loc 6 301 0
 1750 07e6 2696      		adiw r28,6
 1751 07e8 0FB6      		in __tmp_reg__,__SREG__
 1752 07ea F894      		cli
 1753 07ec DEBF      		out __SP_H__,r29
 1754 07ee 0FBE      		out __SREG__,__tmp_reg__
 1755 07f0 CDBF      		out __SP_L__,r28
 1756 07f2 DF91      		pop r29
 1757 07f4 CF91      		pop r28
 1758 07f6 0895      		ret
 1759               		.cfi_endproc
 1760               	.LFE137:
 1762               	.global	check_ack_aux
 1764               	check_ack_aux:
 1765               	.LFB138:
 302:ServerLLDN.c  **** 	
 303:ServerLLDN.c  **** 	bool check_ack_aux(int addr)
 304:ServerLLDN.c  **** 	{
 1766               		.loc 6 304 0
 1767               		.cfi_startproc
 1768 07f8 CF93      		push r28
 1769               	.LCFI69:
 1770               		.cfi_def_cfa_offset 3
 1771               		.cfi_offset 28, -2
 1772 07fa DF93      		push r29
 1773               	.LCFI70:
 1774               		.cfi_def_cfa_offset 4
 1775               		.cfi_offset 29, -3
 1776 07fc 00D0      		rcall .
 1777 07fe 00D0      		rcall .
 1778 0800 00D0      		rcall .
 1779               	.LCFI71:
 1780               		.cfi_def_cfa_offset 10
 1781 0802 CDB7      		in r28,__SP_L__
 1782 0804 DEB7      		in r29,__SP_H__
 1783               	.LCFI72:
 1784               		.cfi_def_cfa_register 28
 1785               	/* prologue: function */
 1786               	/* frame size = 6 */
 1787               	/* stack size = 8 */
 1788               	.L__stack_usage = 8
 1789 0806 9E83      		std Y+6,r25
 1790 0808 8D83      		std Y+5,r24
 305:ServerLLDN.c  **** 		int pos,bit_shift;
 306:ServerLLDN.c  **** 		if(addr == 8)
 1791               		.loc 6 306 0
 1792 080a 8D81      		ldd r24,Y+5
 1793 080c 9E81      		ldd r25,Y+6
 1794 080e 0897      		sbiw r24,8
 1795 0810 01F4      		brne .L63
 307:ServerLLDN.c  **** 		{
 308:ServerLLDN.c  **** 			pos = 0;
 1796               		.loc 6 308 0
 1797 0812 1A82      		std Y+2,__zero_reg__
 1798 0814 1982      		std Y+1,__zero_reg__
 309:ServerLLDN.c  **** 			bit_shift = 0;
 1799               		.loc 6 309 0
 1800 0816 1C82      		std Y+4,__zero_reg__
 1801 0818 1B82      		std Y+3,__zero_reg__
 1802 081a 00C0      		rjmp .L64
 1803               	.L63:
 310:ServerLLDN.c  **** 		}
 311:ServerLLDN.c  **** 		else
 312:ServerLLDN.c  **** 		{
 313:ServerLLDN.c  **** 			pos =  addr / 8;
 1804               		.loc 6 313 0
 1805 081c 8D81      		ldd r24,Y+5
 1806 081e 9E81      		ldd r25,Y+6
 1807 0820 9923      		tst r25
 1808 0822 04F4      		brge .L65
 1809 0824 0796      		adiw r24,7
 1810               	.L65:
 1811 0826 9595      		asr r25
 1812 0828 8795      		ror r24
 1813 082a 9595      		asr r25
 1814 082c 8795      		ror r24
 1815 082e 9595      		asr r25
 1816 0830 8795      		ror r24
 1817 0832 9A83      		std Y+2,r25
 1818 0834 8983      		std Y+1,r24
 314:ServerLLDN.c  **** 			bit_shift = 8 - addr % 8;
 1819               		.loc 6 314 0
 1820 0836 8D81      		ldd r24,Y+5
 1821 0838 9E81      		ldd r25,Y+6
 1822 083a 8770      		andi r24,7
 1823 083c 9078      		andi r25,128
 1824 083e 9923      		tst r25
 1825 0840 04F4      		brge .L66
 1826 0842 0197      		sbiw r24,1
 1827 0844 886F      		ori r24,248
 1828 0846 9F6F      		ori r25,255
 1829 0848 0196      		adiw r24,1
 1830               	.L66:
 1831 084a 9C01      		movw r18,r24
 1832 084c 88E0      		ldi r24,lo8(8)
 1833 084e 90E0      		ldi r25,0
 1834 0850 821B      		sub r24,r18
 1835 0852 930B      		sbc r25,r19
 1836 0854 9C83      		std Y+4,r25
 1837 0856 8B83      		std Y+3,r24
 1838               	.L64:
 315:ServerLLDN.c  **** 		}
 316:ServerLLDN.c  **** 		if( ACKFrame_aux.ackFlags[pos] & 1 << bit_shift)
 1839               		.loc 6 316 0
 1840 0858 8981      		ldd r24,Y+1
 1841 085a 9A81      		ldd r25,Y+2
 1842 085c 8050      		subi r24,lo8(-(ACKFrame_aux+1))
 1843 085e 9040      		sbci r25,hi8(-(ACKFrame_aux+1))
 1844 0860 FC01      		movw r30,r24
 1845 0862 8081      		ld r24,Z
 1846 0864 882F      		mov r24,r24
 1847 0866 90E0      		ldi r25,0
 1848 0868 0B80      		ldd r0,Y+3
 1849 086a 00C0      		rjmp 2f
 1850               		1:
 1851 086c 9595      		asr r25
 1852 086e 8795      		ror r24
 1853               		2:
 1854 0870 0A94      		dec r0
 1855 0872 02F4      		brpl 1b
 1856 0874 8170      		andi r24,1
 1857 0876 9927      		clr r25
 1858 0878 892B      		or r24,r25
 1859 087a 01F0      		breq .L67
 317:ServerLLDN.c  **** 		{
 318:ServerLLDN.c  **** 			return true;
 1860               		.loc 6 318 0
 1861 087c 81E0      		ldi r24,lo8(1)
 1862 087e 00C0      		rjmp .L68
 1863               	.L67:
 319:ServerLLDN.c  **** 		}
 320:ServerLLDN.c  **** 		else
 321:ServerLLDN.c  **** 		return false;
 1864               		.loc 6 321 0
 1865 0880 80E0      		ldi r24,0
 1866               	.L68:
 1867               	/* epilogue start */
 322:ServerLLDN.c  **** 	}
 1868               		.loc 6 322 0
 1869 0882 2696      		adiw r28,6
 1870 0884 0FB6      		in __tmp_reg__,__SREG__
 1871 0886 F894      		cli
 1872 0888 DEBF      		out __SP_H__,r29
 1873 088a 0FBE      		out __SREG__,__tmp_reg__
 1874 088c CDBF      		out __SP_L__,r28
 1875 088e DF91      		pop r29
 1876 0890 CF91      		pop r28
 1877 0892 0895      		ret
 1878               		.cfi_endproc
 1879               	.LFE138:
 1881               	.global	__floatsisf
 1882               	.global	__divsf3
 1883               	.global	__subsf3
 1884               	.global	__fixsfsi
 1885               	.global	__floatunsisf
 1886               	.global	__mulsf3
 1887               	.global	__addsf3
 1889               	appDataInd:
 1890               	.LFB139:
 323:ServerLLDN.c  **** 	
 324:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 325:ServerLLDN.c  **** 	{
 1891               		.loc 6 325 0
 1892               		.cfi_startproc
 1893 0894 8F92      		push r8
 1894               	.LCFI73:
 1895               		.cfi_def_cfa_offset 3
 1896               		.cfi_offset 8, -2
 1897 0896 9F92      		push r9
 1898               	.LCFI74:
 1899               		.cfi_def_cfa_offset 4
 1900               		.cfi_offset 9, -3
 1901 0898 AF92      		push r10
 1902               	.LCFI75:
 1903               		.cfi_def_cfa_offset 5
 1904               		.cfi_offset 10, -4
 1905 089a BF92      		push r11
 1906               	.LCFI76:
 1907               		.cfi_def_cfa_offset 6
 1908               		.cfi_offset 11, -5
 1909 089c CF92      		push r12
 1910               	.LCFI77:
 1911               		.cfi_def_cfa_offset 7
 1912               		.cfi_offset 12, -6
 1913 089e DF92      		push r13
 1914               	.LCFI78:
 1915               		.cfi_def_cfa_offset 8
 1916               		.cfi_offset 13, -7
 1917 08a0 EF92      		push r14
 1918               	.LCFI79:
 1919               		.cfi_def_cfa_offset 9
 1920               		.cfi_offset 14, -8
 1921 08a2 FF92      		push r15
 1922               	.LCFI80:
 1923               		.cfi_def_cfa_offset 10
 1924               		.cfi_offset 15, -9
 1925 08a4 CF93      		push r28
 1926               	.LCFI81:
 1927               		.cfi_def_cfa_offset 11
 1928               		.cfi_offset 28, -10
 1929 08a6 DF93      		push r29
 1930               	.LCFI82:
 1931               		.cfi_def_cfa_offset 12
 1932               		.cfi_offset 29, -11
 1933 08a8 CDB7      		in r28,__SP_L__
 1934 08aa DEB7      		in r29,__SP_H__
 1935               	.LCFI83:
 1936               		.cfi_def_cfa_register 28
 1937 08ac 2E97      		sbiw r28,14
 1938               	.LCFI84:
 1939               		.cfi_def_cfa_offset 26
 1940 08ae 0FB6      		in __tmp_reg__,__SREG__
 1941 08b0 F894      		cli
 1942 08b2 DEBF      		out __SP_H__,r29
 1943 08b4 0FBE      		out __SREG__,__tmp_reg__
 1944 08b6 CDBF      		out __SP_L__,r28
 1945               	/* prologue: function */
 1946               	/* frame size = 14 */
 1947               	/* stack size = 24 */
 1948               	.L__stack_usage = 24
 1949 08b8 9E87      		std Y+14,r25
 1950 08ba 8D87      		std Y+13,r24
 326:ServerLLDN.c  **** 		uint32_t cmp_value = macsc_read_count();
 1951               		.loc 6 326 0
 1952 08bc 0E94 0000 		call macsc_read_count
 1953 08c0 DC01      		movw r26,r24
 1954 08c2 CB01      		movw r24,r22
 1955 08c4 8F83      		std Y+7,r24
 1956 08c6 9887      		std Y+8,r25
 1957 08c8 A987      		std Y+9,r26
 1958 08ca BA87      		std Y+10,r27
 327:ServerLLDN.c  **** 		int relative_cmp =  cmp_value - cmp_value_start_superframe - 40;
 1959               		.loc 6 327 0
 1960 08cc 2F81      		ldd r18,Y+7
 1961 08ce 3885      		ldd r19,Y+8
 1962 08d0 8091 0000 		lds r24,cmp_value_start_superframe
 1963 08d4 9091 0000 		lds r25,cmp_value_start_superframe+1
 1964 08d8 A091 0000 		lds r26,cmp_value_start_superframe+2
 1965 08dc B091 0000 		lds r27,cmp_value_start_superframe+3
 1966 08e0 A901      		movw r20,r18
 1967 08e2 481B      		sub r20,r24
 1968 08e4 590B      		sbc r21,r25
 1969 08e6 CA01      		movw r24,r20
 1970 08e8 8897      		sbiw r24,40
 1971 08ea 9C87      		std Y+12,r25
 1972 08ec 8B87      		std Y+11,r24
 328:ServerLLDN.c  **** 		
 329:ServerLLDN.c  **** 
 330:ServerLLDN.c  **** 		int curr_up_ts = (relative_cmp)/(tTS / (SYMBOL_TIME)) - 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_on
 1973               		.loc 6 330 0
 1974 08ee 8B85      		ldd r24,Y+11
 1975 08f0 9C85      		ldd r25,Y+12
 1976 08f2 092E      		mov __tmp_reg__,r25
 1977 08f4 000C      		lsl r0
 1978 08f6 AA0B      		sbc r26,r26
 1979 08f8 BB0B      		sbc r27,r27
 1980 08fa BC01      		movw r22,r24
 1981 08fc CD01      		movw r24,r26
 1982 08fe 0E94 0000 		call __floatsisf
 1983 0902 6B01      		movw r12,r22
 1984 0904 7C01      		movw r14,r24
 1985 0906 8091 0000 		lds r24,tTS
 1986 090a 9091 0000 		lds r25,tTS+1
 1987 090e A091 0000 		lds r26,tTS+2
 1988 0912 B091 0000 		lds r27,tTS+3
 1989 0916 2DEB      		ldi r18,lo8(-67)
 1990 0918 37E3      		ldi r19,lo8(55)
 1991 091a 46E8      		ldi r20,lo8(-122)
 1992 091c 57E3      		ldi r21,lo8(55)
 1993 091e BC01      		movw r22,r24
 1994 0920 CD01      		movw r24,r26
 1995 0922 0E94 0000 		call __divsf3
 1996 0926 DC01      		movw r26,r24
 1997 0928 CB01      		movw r24,r22
 1998 092a 9C01      		movw r18,r24
 1999 092c AD01      		movw r20,r26
 2000 092e C701      		movw r24,r14
 2001 0930 B601      		movw r22,r12
 2002 0932 0E94 0000 		call __divsf3
 2003 0936 DC01      		movw r26,r24
 2004 0938 CB01      		movw r24,r22
 2005 093a 20E0      		ldi r18,0
 2006 093c 30E0      		ldi r19,0
 2007 093e 40E8      		ldi r20,lo8(-128)
 2008 0940 50E4      		ldi r21,lo8(64)
 2009 0942 BC01      		movw r22,r24
 2010 0944 CD01      		movw r24,r26
 2011 0946 0E94 0000 		call __subsf3
 2012 094a DC01      		movw r26,r24
 2013 094c CB01      		movw r24,r22
 2014 094e BC01      		movw r22,r24
 2015 0950 CD01      		movw r24,r26
 2016 0952 0E94 0000 		call __fixsfsi
 2017 0956 DC01      		movw r26,r24
 2018 0958 CB01      		movw r24,r22
 2019 095a 9A83      		std Y+2,r25
 2020 095c 8983      		std Y+1,r24
 331:ServerLLDN.c  **** 		if(curr_up_ts > assTimeSlot)
 2021               		.loc 6 331 0
 2022 095e 8091 0000 		lds r24,assTimeSlot
 2023 0962 9091 0000 		lds r25,assTimeSlot+1
 2024 0966 2981      		ldd r18,Y+1
 2025 0968 3A81      		ldd r19,Y+2
 2026 096a 8217      		cp r24,r18
 2027 096c 9307      		cpc r25,r19
 2028 096e 04F0      		brlt .+2
 2029 0970 00C0      		rjmp .L70
 2030               	.LBB8:
 332:ServerLLDN.c  **** 		{
 333:ServerLLDN.c  **** 			
 334:ServerLLDN.c  **** 			int i;
 335:ServerLLDN.c  **** 			curr_up_ts -= assTimeSlot+1;
 2031               		.loc 6 335 0
 2032 0972 8091 0000 		lds r24,assTimeSlot
 2033 0976 9091 0000 		lds r25,assTimeSlot+1
 2034 097a 0196      		adiw r24,1
 2035 097c 2981      		ldd r18,Y+1
 2036 097e 3A81      		ldd r19,Y+2
 2037 0980 F901      		movw r30,r18
 2038 0982 E81B      		sub r30,r24
 2039 0984 F90B      		sbc r31,r25
 2040 0986 CF01      		movw r24,r30
 2041 0988 9A83      		std Y+2,r25
 2042 098a 8983      		std Y+1,r24
 336:ServerLLDN.c  **** 			for (i = 0; i < assTimeSlot && curr_up_ts > 0; ++i)
 2043               		.loc 6 336 0
 2044 098c 1C82      		std Y+4,__zero_reg__
 2045 098e 1B82      		std Y+3,__zero_reg__
 2046 0990 00C0      		rjmp .L71
 2047               	.L74:
 337:ServerLLDN.c  **** 			{
 338:ServerLLDN.c  **** 				if(!check_ack_aux(i+1))
 2048               		.loc 6 338 0
 2049 0992 8B81      		ldd r24,Y+3
 2050 0994 9C81      		ldd r25,Y+4
 2051 0996 0196      		adiw r24,1
 2052 0998 0E94 0000 		call check_ack_aux
 2053 099c 982F      		mov r25,r24
 2054 099e 81E0      		ldi r24,lo8(1)
 2055 09a0 8927      		eor r24,r25
 2056 09a2 8823      		tst r24
 2057 09a4 01F0      		breq .L72
 339:ServerLLDN.c  **** 				{
 340:ServerLLDN.c  **** 					curr_up_ts--;
 2058               		.loc 6 340 0
 2059 09a6 8981      		ldd r24,Y+1
 2060 09a8 9A81      		ldd r25,Y+2
 2061 09aa 0197      		sbiw r24,1
 2062 09ac 9A83      		std Y+2,r25
 2063 09ae 8983      		std Y+1,r24
 2064               	.L72:
 336:ServerLLDN.c  **** 			{
 2065               		.loc 6 336 0 discriminator 2
 2066 09b0 8B81      		ldd r24,Y+3
 2067 09b2 9C81      		ldd r25,Y+4
 2068 09b4 0196      		adiw r24,1
 2069 09b6 9C83      		std Y+4,r25
 2070 09b8 8B83      		std Y+3,r24
 2071               	.L71:
 336:ServerLLDN.c  **** 			{
 2072               		.loc 6 336 0 is_stmt 0 discriminator 1
 2073 09ba 8091 0000 		lds r24,assTimeSlot
 2074 09be 9091 0000 		lds r25,assTimeSlot+1
 2075 09c2 2B81      		ldd r18,Y+3
 2076 09c4 3C81      		ldd r19,Y+4
 2077 09c6 2817      		cp r18,r24
 2078 09c8 3907      		cpc r19,r25
 2079 09ca 04F4      		brge .L73
 336:ServerLLDN.c  **** 			{
 2080               		.loc 6 336 0 discriminator 3
 2081 09cc 8981      		ldd r24,Y+1
 2082 09ce 9A81      		ldd r25,Y+2
 2083 09d0 1816      		cp __zero_reg__,r24
 2084 09d2 1906      		cpc __zero_reg__,r25
 2085 09d4 04F0      		brlt .L74
 2086               	.L73:
 341:ServerLLDN.c  **** 				}
 342:ServerLLDN.c  **** 			}
 343:ServerLLDN.c  **** 			curr_up_ts = i-1*(i!=0);
 2087               		.loc 6 343 0 is_stmt 1
 2088 09d6 21E0      		ldi r18,lo8(1)
 2089 09d8 8B81      		ldd r24,Y+3
 2090 09da 9C81      		ldd r25,Y+4
 2091 09dc 892B      		or r24,r25
 2092 09de 01F4      		brne .L75
 2093 09e0 20E0      		ldi r18,0
 2094               	.L75:
 2095 09e2 822F      		mov r24,r18
 2096 09e4 90E0      		ldi r25,0
 2097 09e6 2B81      		ldd r18,Y+3
 2098 09e8 3C81      		ldd r19,Y+4
 2099 09ea A901      		movw r20,r18
 2100 09ec 481B      		sub r20,r24
 2101 09ee 590B      		sbc r21,r25
 2102 09f0 CA01      		movw r24,r20
 2103 09f2 9A83      		std Y+2,r25
 2104 09f4 8983      		std Y+1,r24
 2105               	.L70:
 2106               	.LBE8:
 344:ServerLLDN.c  **** 		}
 345:ServerLLDN.c  **** 	
 346:ServerLLDN.c  **** 		if(nodes_info_arr[curr_up_ts].mac_addr != ind->data[0])
 2107               		.loc 6 346 0
 2108 09f6 2981      		ldd r18,Y+1
 2109 09f8 3A81      		ldd r19,Y+2
 2110 09fa 4AE4      		ldi r20,lo8(74)
 2111 09fc 429F      		mul r20,r18
 2112 09fe C001      		movw r24,r0
 2113 0a00 439F      		mul r20,r19
 2114 0a02 900D      		add r25,r0
 2115 0a04 1124      		clr __zero_reg__
 2116 0a06 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2117 0a08 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2118 0a0a FC01      		movw r30,r24
 2119 0a0c 2081      		ld r18,Z
 2120 0a0e 3181      		ldd r19,Z+1
 2121 0a10 8D85      		ldd r24,Y+13
 2122 0a12 9E85      		ldd r25,Y+14
 2123 0a14 FC01      		movw r30,r24
 2124 0a16 8085      		ldd r24,Z+8
 2125 0a18 9185      		ldd r25,Z+9
 2126 0a1a FC01      		movw r30,r24
 2127 0a1c 8081      		ld r24,Z
 2128 0a1e 882F      		mov r24,r24
 2129 0a20 90E0      		ldi r25,0
 2130 0a22 2817      		cp r18,r24
 2131 0a24 3907      		cpc r19,r25
 2132 0a26 01F0      		breq .L76
 347:ServerLLDN.c  **** 			return false;
 2133               		.loc 6 347 0
 2134 0a28 80E0      		ldi r24,0
 2135 0a2a 00C0      		rjmp .L77
 2136               	.L76:
 348:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].rssi = ind->rssi;
 2137               		.loc 6 348 0
 2138 0a2c 8D85      		ldd r24,Y+13
 2139 0a2e 9E85      		ldd r25,Y+14
 2140 0a30 FC01      		movw r30,r24
 2141 0a32 8485      		ldd r24,Z+12
 2142 0a34 582F      		mov r21,r24
 2143 0a36 2981      		ldd r18,Y+1
 2144 0a38 3A81      		ldd r19,Y+2
 2145 0a3a 4AE4      		ldi r20,lo8(74)
 2146 0a3c 429F      		mul r20,r18
 2147 0a3e C001      		movw r24,r0
 2148 0a40 439F      		mul r20,r19
 2149 0a42 900D      		add r25,r0
 2150 0a44 1124      		clr __zero_reg__
 2151 0a46 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2152 0a48 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2153 0a4a FC01      		movw r30,r24
 2154 0a4c 5083      		st Z,r21
 349:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2155               		.loc 6 349 0
 2156 0a4e 2981      		ldd r18,Y+1
 2157 0a50 3A81      		ldd r19,Y+2
 2158 0a52 4AE4      		ldi r20,lo8(74)
 2159 0a54 429F      		mul r20,r18
 2160 0a56 C001      		movw r24,r0
 2161 0a58 439F      		mul r20,r19
 2162 0a5a 900D      		add r25,r0
 2163 0a5c 1124      		clr __zero_reg__
 2164 0a5e 8050      		subi r24,lo8(-(nodes_info_arr+4))
 2165 0a60 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 2166 0a62 FC01      		movw r30,r24
 2167 0a64 8081      		ld r24,Z
 2168 0a66 882F      		mov r24,r24
 2169 0a68 90E0      		ldi r25,0
 2170 0a6a 092E      		mov __tmp_reg__,r25
 2171 0a6c 000C      		lsl r0
 2172 0a6e AA0B      		sbc r26,r26
 2173 0a70 BB0B      		sbc r27,r27
 2174 0a72 BC01      		movw r22,r24
 2175 0a74 CD01      		movw r24,r26
 2176 0a76 0E94 0000 		call __floatsisf
 2177 0a7a 4B01      		movw r8,r22
 2178 0a7c 5C01      		movw r10,r24
 2179 0a7e 2981      		ldd r18,Y+1
 2180 0a80 3A81      		ldd r19,Y+2
 2181 0a82 4AE4      		ldi r20,lo8(74)
 2182 0a84 429F      		mul r20,r18
 2183 0a86 C001      		movw r24,r0
 2184 0a88 439F      		mul r20,r19
 2185 0a8a 900D      		add r25,r0
 2186 0a8c 1124      		clr __zero_reg__
 2187 0a8e 8050      		subi r24,lo8(-(nodes_info_arr+5))
 2188 0a90 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 2189 0a92 FC01      		movw r30,r24
 2190 0a94 C080      		ld r12,Z
 2191 0a96 D180      		ldd r13,Z+1
 2192 0a98 E280      		ldd r14,Z+2
 2193 0a9a F380      		ldd r15,Z+3
 2194 0a9c 2981      		ldd r18,Y+1
 2195 0a9e 3A81      		ldd r19,Y+2
 2196 0aa0 4AE4      		ldi r20,lo8(74)
 2197 0aa2 429F      		mul r20,r18
 2198 0aa4 C001      		movw r24,r0
 2199 0aa6 439F      		mul r20,r19
 2200 0aa8 900D      		add r25,r0
 2201 0aaa 1124      		clr __zero_reg__
 2202 0aac 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2203 0aae 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2204 0ab0 FC01      		movw r30,r24
 2205 0ab2 8081      		ld r24,Z
 2206 0ab4 9181      		ldd r25,Z+1
 2207 0ab6 CC01      		movw r24,r24
 2208 0ab8 A0E0      		ldi r26,0
 2209 0aba B0E0      		ldi r27,0
 2210 0abc BC01      		movw r22,r24
 2211 0abe CD01      		movw r24,r26
 2212 0ac0 0E94 0000 		call __floatunsisf
 2213 0ac4 DC01      		movw r26,r24
 2214 0ac6 CB01      		movw r24,r22
 2215 0ac8 9C01      		movw r18,r24
 2216 0aca AD01      		movw r20,r26
 2217 0acc C701      		movw r24,r14
 2218 0ace B601      		movw r22,r12
 2219 0ad0 0E94 0000 		call __mulsf3
 2220 0ad4 DC01      		movw r26,r24
 2221 0ad6 CB01      		movw r24,r22
 2222 0ad8 9C01      		movw r18,r24
 2223 0ada AD01      		movw r20,r26
 2224 0adc C501      		movw r24,r10
 2225 0ade B401      		movw r22,r8
 2226 0ae0 0E94 0000 		call __addsf3
 2227 0ae4 DC01      		movw r26,r24
 2228 0ae6 CB01      		movw r24,r22
 2229 0ae8 6C01      		movw r12,r24
 2230 0aea 7D01      		movw r14,r26
 350:ServerLLDN.c  **** 																				/(nodes_info_arr[curr_up_ts].msg_rec + 1);
 2231               		.loc 6 350 0
 2232 0aec 2981      		ldd r18,Y+1
 2233 0aee 3A81      		ldd r19,Y+2
 2234 0af0 4AE4      		ldi r20,lo8(74)
 2235 0af2 429F      		mul r20,r18
 2236 0af4 C001      		movw r24,r0
 2237 0af6 439F      		mul r20,r19
 2238 0af8 900D      		add r25,r0
 2239 0afa 1124      		clr __zero_reg__
 2240 0afc 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2241 0afe 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2242 0b00 FC01      		movw r30,r24
 2243 0b02 8081      		ld r24,Z
 2244 0b04 9181      		ldd r25,Z+1
 2245 0b06 0196      		adiw r24,1
 2246 0b08 CC01      		movw r24,r24
 2247 0b0a A0E0      		ldi r26,0
 2248 0b0c B0E0      		ldi r27,0
 2249 0b0e BC01      		movw r22,r24
 2250 0b10 CD01      		movw r24,r26
 2251 0b12 0E94 0000 		call __floatunsisf
 2252 0b16 DC01      		movw r26,r24
 2253 0b18 CB01      		movw r24,r22
 2254 0b1a 9C01      		movw r18,r24
 2255 0b1c AD01      		movw r20,r26
 2256 0b1e C701      		movw r24,r14
 2257 0b20 B601      		movw r22,r12
 2258 0b22 0E94 0000 		call __divsf3
 2259 0b26 DC01      		movw r26,r24
 2260 0b28 CB01      		movw r24,r22
 349:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].average_rssi = (nodes_info_arr[curr_up_ts].rssi + nodes_info_arr[curr_
 2261               		.loc 6 349 0
 2262 0b2a 4981      		ldd r20,Y+1
 2263 0b2c 5A81      		ldd r21,Y+2
 2264 0b2e 6AE4      		ldi r22,lo8(74)
 2265 0b30 649F      		mul r22,r20
 2266 0b32 9001      		movw r18,r0
 2267 0b34 659F      		mul r22,r21
 2268 0b36 300D      		add r19,r0
 2269 0b38 1124      		clr __zero_reg__
 2270 0b3a 2050      		subi r18,lo8(-(nodes_info_arr+5))
 2271 0b3c 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 2272 0b3e F901      		movw r30,r18
 2273 0b40 8083      		st Z,r24
 2274 0b42 9183      		std Z+1,r25
 2275 0b44 A283      		std Z+2,r26
 2276 0b46 B383      		std Z+3,r27
 351:ServerLLDN.c  **** 		nodes_info_arr[curr_up_ts].msg_rec++;
 2277               		.loc 6 351 0
 2278 0b48 2981      		ldd r18,Y+1
 2279 0b4a 3A81      		ldd r19,Y+2
 2280 0b4c 4AE4      		ldi r20,lo8(74)
 2281 0b4e 429F      		mul r20,r18
 2282 0b50 C001      		movw r24,r0
 2283 0b52 439F      		mul r20,r19
 2284 0b54 900D      		add r25,r0
 2285 0b56 1124      		clr __zero_reg__
 2286 0b58 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2287 0b5a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2288 0b5c FC01      		movw r30,r24
 2289 0b5e 8081      		ld r24,Z
 2290 0b60 9181      		ldd r25,Z+1
 2291 0b62 9C01      		movw r18,r24
 2292 0b64 2F5F      		subi r18,-1
 2293 0b66 3F4F      		sbci r19,-1
 2294 0b68 4981      		ldd r20,Y+1
 2295 0b6a 5A81      		ldd r21,Y+2
 2296 0b6c 6AE4      		ldi r22,lo8(74)
 2297 0b6e 649F      		mul r22,r20
 2298 0b70 C001      		movw r24,r0
 2299 0b72 659F      		mul r22,r21
 2300 0b74 900D      		add r25,r0
 2301 0b76 1124      		clr __zero_reg__
 2302 0b78 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2303 0b7a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2304 0b7c FC01      		movw r30,r24
 2305 0b7e 3183      		std Z+1,r19
 2306 0b80 2083      		st Z,r18
 352:ServerLLDN.c  **** 	count_up++;
 2307               		.loc 6 352 0
 2308 0b82 8091 0000 		lds r24,count_up
 2309 0b86 9091 0000 		lds r25,count_up+1
 2310 0b8a A091 0000 		lds r26,count_up+2
 2311 0b8e B091 0000 		lds r27,count_up+3
 2312 0b92 20E0      		ldi r18,0
 2313 0b94 30E0      		ldi r19,0
 2314 0b96 40E8      		ldi r20,lo8(-128)
 2315 0b98 5FE3      		ldi r21,lo8(63)
 2316 0b9a BC01      		movw r22,r24
 2317 0b9c CD01      		movw r24,r26
 2318 0b9e 0E94 0000 		call __addsf3
 2319 0ba2 DC01      		movw r26,r24
 2320 0ba4 CB01      		movw r24,r22
 2321 0ba6 8093 0000 		sts count_up,r24
 2322 0baa 9093 0000 		sts count_up+1,r25
 2323 0bae A093 0000 		sts count_up+2,r26
 2324 0bb2 B093 0000 		sts count_up+3,r27
 353:ServerLLDN.c  **** 		addToAckArray(curr_up_ts+1);
 2325               		.loc 6 353 0
 2326 0bb6 8981      		ldd r24,Y+1
 2327 0bb8 8F5F      		subi r24,lo8(-(1))
 2328 0bba 0E94 0000 		call addToAckArray
 2329               	.LBB9:
 354:ServerLLDN.c  **** 		#if PRINT
 355:ServerLLDN.c  **** //  		printf("\n[%d] Data: ", curr_up_ts);
 356:ServerLLDN.c  **** 		#endif
 357:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2330               		.loc 6 357 0
 2331 0bbe 1E82      		std Y+6,__zero_reg__
 2332 0bc0 1D82      		std Y+5,__zero_reg__
 2333 0bc2 00C0      		rjmp .L78
 2334               	.L79:
 358:ServerLLDN.c  **** 		{
 359:ServerLLDN.c  **** 			msg_info_array[curr_up_ts].data_payload[i] = ind->data[i];
 2335               		.loc 6 359 0 discriminator 3
 2336 0bc4 8D85      		ldd r24,Y+13
 2337 0bc6 9E85      		ldd r25,Y+14
 2338 0bc8 FC01      		movw r30,r24
 2339 0bca 2085      		ldd r18,Z+8
 2340 0bcc 3185      		ldd r19,Z+9
 2341 0bce 8D81      		ldd r24,Y+5
 2342 0bd0 9E81      		ldd r25,Y+6
 2343 0bd2 820F      		add r24,r18
 2344 0bd4 931F      		adc r25,r19
 2345 0bd6 FC01      		movw r30,r24
 2346 0bd8 4081      		ld r20,Z
 2347 0bda 8981      		ldd r24,Y+1
 2348 0bdc 9A81      		ldd r25,Y+2
 2349 0bde 54E8      		ldi r21,lo8(-124)
 2350 0be0 589F      		mul r21,r24
 2351 0be2 9001      		movw r18,r0
 2352 0be4 599F      		mul r21,r25
 2353 0be6 300D      		add r19,r0
 2354 0be8 1124      		clr __zero_reg__
 2355 0bea 8D81      		ldd r24,Y+5
 2356 0bec 9E81      		ldd r25,Y+6
 2357 0bee 820F      		add r24,r18
 2358 0bf0 931F      		adc r25,r19
 2359 0bf2 8050      		subi r24,lo8(-(msg_info_array+5))
 2360 0bf4 9040      		sbci r25,hi8(-(msg_info_array+5))
 2361 0bf6 FC01      		movw r30,r24
 2362 0bf8 4083      		st Z,r20
 357:ServerLLDN.c  **** 		{
 2363               		.loc 6 357 0 discriminator 3
 2364 0bfa 8D81      		ldd r24,Y+5
 2365 0bfc 9E81      		ldd r25,Y+6
 2366 0bfe 0196      		adiw r24,1
 2367 0c00 9E83      		std Y+6,r25
 2368 0c02 8D83      		std Y+5,r24
 2369               	.L78:
 357:ServerLLDN.c  **** 		{
 2370               		.loc 6 357 0 is_stmt 0 discriminator 1
 2371 0c04 8D85      		ldd r24,Y+13
 2372 0c06 9E85      		ldd r25,Y+14
 2373 0c08 FC01      		movw r30,r24
 2374 0c0a 8285      		ldd r24,Z+10
 2375 0c0c 282F      		mov r18,r24
 2376 0c0e 30E0      		ldi r19,0
 2377 0c10 8D81      		ldd r24,Y+5
 2378 0c12 9E81      		ldd r25,Y+6
 2379 0c14 8217      		cp r24,r18
 2380 0c16 9307      		cpc r25,r19
 2381 0c18 04F0      		brlt .L79
 2382               	.LBE9:
 360:ServerLLDN.c  **** 			#if PRINT
 361:ServerLLDN.c  **** //  			printf("%hhx", msg_info_array[curr_up_ts].data_payload[i]);
 362:ServerLLDN.c  **** 			#endif
 363:ServerLLDN.c  **** 		}		
 364:ServerLLDN.c  **** 		return true;
 2383               		.loc 6 364 0 is_stmt 1
 2384 0c1a 81E0      		ldi r24,lo8(1)
 2385               	.L77:
 2386               	/* epilogue start */
 365:ServerLLDN.c  **** // 		printf(" cmp %d", relative_cmp);
 366:ServerLLDN.c  **** 	}
 2387               		.loc 6 366 0
 2388 0c1c 2E96      		adiw r28,14
 2389 0c1e 0FB6      		in __tmp_reg__,__SREG__
 2390 0c20 F894      		cli
 2391 0c22 DEBF      		out __SP_H__,r29
 2392 0c24 0FBE      		out __SREG__,__tmp_reg__
 2393 0c26 CDBF      		out __SP_L__,r28
 2394 0c28 DF91      		pop r29
 2395 0c2a CF91      		pop r28
 2396 0c2c FF90      		pop r15
 2397 0c2e EF90      		pop r14
 2398 0c30 DF90      		pop r13
 2399 0c32 CF90      		pop r12
 2400 0c34 BF90      		pop r11
 2401 0c36 AF90      		pop r10
 2402 0c38 9F90      		pop r9
 2403 0c3a 8F90      		pop r8
 2404 0c3c 0895      		ret
 2405               		.cfi_endproc
 2406               	.LFE139:
 2409               	appPanPrepareACK:
 2410               	.LFB140:
 367:ServerLLDN.c  **** 	
 368:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 369:ServerLLDN.c  **** 	{
 2411               		.loc 6 369 0
 2412               		.cfi_startproc
 2413 0c3e CF93      		push r28
 2414               	.LCFI85:
 2415               		.cfi_def_cfa_offset 3
 2416               		.cfi_offset 28, -2
 2417 0c40 DF93      		push r29
 2418               	.LCFI86:
 2419               		.cfi_def_cfa_offset 4
 2420               		.cfi_offset 29, -3
 2421 0c42 CDB7      		in r28,__SP_L__
 2422 0c44 DEB7      		in r29,__SP_H__
 2423               	.LCFI87:
 2424               		.cfi_def_cfa_register 28
 2425               	/* prologue: function */
 2426               	/* frame size = 0 */
 2427               	/* stack size = 2 */
 2428               	.L__stack_usage = 2
 370:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2429               		.loc 6 370 0
 2430 0c46 1092 0000 		sts msgReq+5+1,__zero_reg__
 2431 0c4a 1092 0000 		sts msgReq+5,__zero_reg__
 371:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2432               		.loc 6 371 0
 2433 0c4e 1092 0000 		sts msgReq+7,__zero_reg__
 372:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2434               		.loc 6 372 0
 2435 0c52 1092 0000 		sts msgReq+8,__zero_reg__
 373:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2436               		.loc 6 373 0
 2437 0c56 80E0      		ldi r24,0
 2438 0c58 90E4      		ldi r25,lo8(64)
 2439 0c5a 9093 0000 		sts msgReq+9+1,r25
 2440 0c5e 8093 0000 		sts msgReq+9,r24
 374:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2441               		.loc 6 374 0
 2442 0c62 80E0      		ldi r24,lo8(ACKFrame)
 2443 0c64 90E0      		ldi r25,hi8(ACKFrame)
 2444 0c66 9093 0000 		sts msgReq+13+1,r25
 2445 0c6a 8093 0000 		sts msgReq+13,r24
 375:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2446               		.loc 6 375 0
 2447 0c6e 8091 0000 		lds r24,ACKFrame_size
 2448 0c72 9091 0000 		lds r25,ACKFrame_size+1
 2449 0c76 8F5F      		subi r24,lo8(-(1))
 2450 0c78 8093 0000 		sts msgReq+15,r24
 376:ServerLLDN.c  **** 
 377:ServerLLDN.c  **** 	}
 2451               		.loc 6 377 0
 2452 0c7c 0000      		nop
 2453               	/* epilogue start */
 2454 0c7e DF91      		pop r29
 2455 0c80 CF91      		pop r28
 2456 0c82 0895      		ret
 2457               		.cfi_endproc
 2458               	.LFE140:
 2461               	appPanReset:
 2462               	.LFB141:
 378:ServerLLDN.c  **** 
 379:ServerLLDN.c  **** 	static void appPanReset(void)
 380:ServerLLDN.c  **** 	{
 2463               		.loc 6 380 0
 2464               		.cfi_startproc
 2465 0c84 CF93      		push r28
 2466               	.LCFI88:
 2467               		.cfi_def_cfa_offset 3
 2468               		.cfi_offset 28, -2
 2469 0c86 DF93      		push r29
 2470               	.LCFI89:
 2471               		.cfi_def_cfa_offset 4
 2472               		.cfi_offset 29, -3
 2473 0c88 00D0      		rcall .
 2474 0c8a 00D0      		rcall .
 2475 0c8c 00D0      		rcall .
 2476               	.LCFI90:
 2477               		.cfi_def_cfa_offset 10
 2478 0c8e CDB7      		in r28,__SP_L__
 2479 0c90 DEB7      		in r29,__SP_H__
 2480               	.LCFI91:
 2481               		.cfi_def_cfa_register 28
 2482               	/* prologue: function */
 2483               	/* frame size = 6 */
 2484               	/* stack size = 8 */
 2485               	.L__stack_usage = 8
 381:ServerLLDN.c  **** 		// prepare beacon reset message
 382:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2486               		.loc 6 382 0
 2487 0c92 1092 0000 		sts msgReq+5+1,__zero_reg__
 2488 0c96 1092 0000 		sts msgReq+5,__zero_reg__
 383:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2489               		.loc 6 383 0
 2490 0c9a 1092 0000 		sts msgReq+7,__zero_reg__
 384:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2491               		.loc 6 384 0
 2492 0c9e 1092 0000 		sts msgReq+8,__zero_reg__
 385:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2493               		.loc 6 385 0
 2494 0ca2 80E4      		ldi r24,lo8(64)
 2495 0ca4 94E0      		ldi r25,lo8(4)
 2496 0ca6 9093 0000 		sts msgReq+9+1,r25
 2497 0caa 8093 0000 		sts msgReq+9,r24
 386:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2498               		.loc 6 386 0
 2499 0cae 1092 0000 		sts msgReq+13+1,__zero_reg__
 2500 0cb2 1092 0000 		sts msgReq+13,__zero_reg__
 387:ServerLLDN.c  **** 		msgReq.size			= 0;
 2501               		.loc 6 387 0
 2502 0cb6 1092 0000 		sts msgReq+15,__zero_reg__
 2503               	.LBB10:
 388:ServerLLDN.c  **** 
 389:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2504               		.loc 6 389 0
 2505 0cba 1A82      		std Y+2,__zero_reg__
 2506 0cbc 1982      		std Y+1,__zero_reg__
 2507 0cbe 00C0      		rjmp .L82
 2508               	.L83:
 390:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2509               		.loc 6 390 0 discriminator 3
 2510 0cc0 8981      		ldd r24,Y+1
 2511 0cc2 9A81      		ldd r25,Y+2
 2512 0cc4 8050      		subi r24,lo8(-(ACKFrame+1))
 2513 0cc6 9040      		sbci r25,hi8(-(ACKFrame+1))
 2514 0cc8 FC01      		movw r30,r24
 2515 0cca 1082      		st Z,__zero_reg__
 389:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2516               		.loc 6 389 0 discriminator 3
 2517 0ccc 8981      		ldd r24,Y+1
 2518 0cce 9A81      		ldd r25,Y+2
 2519 0cd0 0196      		adiw r24,1
 2520 0cd2 9A83      		std Y+2,r25
 2521 0cd4 8983      		std Y+1,r24
 2522               	.L82:
 389:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2523               		.loc 6 389 0 is_stmt 0 discriminator 1
 2524 0cd6 8981      		ldd r24,Y+1
 2525 0cd8 9A81      		ldd r25,Y+2
 2526 0cda 8097      		sbiw r24,32
 2527 0cdc 04F0      		brlt .L83
 2528               	.LBE10:
 2529               	.LBB11:
 391:ServerLLDN.c  **** 			
 392:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2530               		.loc 6 392 0 is_stmt 1
 2531 0cde 1C82      		std Y+4,__zero_reg__
 2532 0ce0 1B82      		std Y+3,__zero_reg__
 2533 0ce2 00C0      		rjmp .L84
 2534               	.L87:
 393:ServerLLDN.c  **** 		{
 394:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2535               		.loc 6 394 0
 2536 0ce4 2B81      		ldd r18,Y+3
 2537 0ce6 3C81      		ldd r19,Y+4
 2538 0ce8 4AE4      		ldi r20,lo8(74)
 2539 0cea 429F      		mul r20,r18
 2540 0cec C001      		movw r24,r0
 2541 0cee 439F      		mul r20,r19
 2542 0cf0 900D      		add r25,r0
 2543 0cf2 1124      		clr __zero_reg__
 2544 0cf4 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2545 0cf6 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2546 0cf8 FC01      		movw r30,r24
 2547 0cfa 1182      		std Z+1,__zero_reg__
 2548 0cfc 1082      		st Z,__zero_reg__
 395:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2549               		.loc 6 395 0
 2550 0cfe 2B81      		ldd r18,Y+3
 2551 0d00 3C81      		ldd r19,Y+4
 2552 0d02 4AE4      		ldi r20,lo8(74)
 2553 0d04 429F      		mul r20,r18
 2554 0d06 C001      		movw r24,r0
 2555 0d08 439F      		mul r20,r19
 2556 0d0a 900D      		add r25,r0
 2557 0d0c 1124      		clr __zero_reg__
 2558 0d0e 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2559 0d10 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2560 0d12 FC01      		movw r30,r24
 2561 0d14 1182      		std Z+1,__zero_reg__
 2562 0d16 1082      		st Z,__zero_reg__
 396:ServerLLDN.c  **** 
 397:ServerLLDN.c  **** 			
 398:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2563               		.loc 6 398 0
 2564 0d18 2B81      		ldd r18,Y+3
 2565 0d1a 3C81      		ldd r19,Y+4
 2566 0d1c 44E8      		ldi r20,lo8(-124)
 2567 0d1e 429F      		mul r20,r18
 2568 0d20 C001      		movw r24,r0
 2569 0d22 439F      		mul r20,r19
 2570 0d24 900D      		add r25,r0
 2571 0d26 1124      		clr __zero_reg__
 2572 0d28 8050      		subi r24,lo8(-(msg_info_array))
 2573 0d2a 9040      		sbci r25,hi8(-(msg_info_array))
 2574 0d2c FC01      		movw r30,r24
 2575 0d2e 1182      		std Z+1,__zero_reg__
 2576 0d30 1082      		st Z,__zero_reg__
 399:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2577               		.loc 6 399 0
 2578 0d32 2B81      		ldd r18,Y+3
 2579 0d34 3C81      		ldd r19,Y+4
 2580 0d36 44E8      		ldi r20,lo8(-124)
 2581 0d38 429F      		mul r20,r18
 2582 0d3a C001      		movw r24,r0
 2583 0d3c 439F      		mul r20,r19
 2584 0d3e 900D      		add r25,r0
 2585 0d40 1124      		clr __zero_reg__
 2586 0d42 8050      		subi r24,lo8(-(msg_info_array+2))
 2587 0d44 9040      		sbci r25,hi8(-(msg_info_array+2))
 2588 0d46 FC01      		movw r30,r24
 2589 0d48 1182      		std Z+1,__zero_reg__
 2590 0d4a 1082      		st Z,__zero_reg__
 2591               	.LBB12:
 400:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2592               		.loc 6 400 0
 2593 0d4c 1E82      		std Y+6,__zero_reg__
 2594 0d4e 1D82      		std Y+5,__zero_reg__
 2595 0d50 00C0      		rjmp .L85
 2596               	.L86:
 401:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2597               		.loc 6 401 0 discriminator 3
 2598 0d52 8B81      		ldd r24,Y+3
 2599 0d54 9C81      		ldd r25,Y+4
 2600 0d56 4AE4      		ldi r20,lo8(74)
 2601 0d58 489F      		mul r20,r24
 2602 0d5a 9001      		movw r18,r0
 2603 0d5c 499F      		mul r20,r25
 2604 0d5e 300D      		add r19,r0
 2605 0d60 1124      		clr __zero_reg__
 2606 0d62 8D81      		ldd r24,Y+5
 2607 0d64 9E81      		ldd r25,Y+6
 2608 0d66 820F      		add r24,r18
 2609 0d68 931F      		adc r25,r19
 2610 0d6a 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2611 0d6c 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2612 0d6e FC01      		movw r30,r24
 2613 0d70 1082      		st Z,__zero_reg__
 400:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2614               		.loc 6 400 0 discriminator 3
 2615 0d72 8D81      		ldd r24,Y+5
 2616 0d74 9E81      		ldd r25,Y+6
 2617 0d76 0196      		adiw r24,1
 2618 0d78 9E83      		std Y+6,r25
 2619 0d7a 8D83      		std Y+5,r24
 2620               	.L85:
 400:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2621               		.loc 6 400 0 is_stmt 0 discriminator 1
 2622 0d7c 8D81      		ldd r24,Y+5
 2623 0d7e 9E81      		ldd r25,Y+6
 2624 0d80 C297      		sbiw r24,50
 2625 0d82 04F0      		brlt .L86
 2626               	.LBE12:
 392:ServerLLDN.c  **** 		{
 2627               		.loc 6 392 0 is_stmt 1 discriminator 2
 2628 0d84 8B81      		ldd r24,Y+3
 2629 0d86 9C81      		ldd r25,Y+4
 2630 0d88 0196      		adiw r24,1
 2631 0d8a 9C83      		std Y+4,r25
 2632 0d8c 8B83      		std Y+3,r24
 2633               	.L84:
 392:ServerLLDN.c  **** 		{
 2634               		.loc 6 392 0 is_stmt 0 discriminator 1
 2635 0d8e 8B81      		ldd r24,Y+3
 2636 0d90 9C81      		ldd r25,Y+4
 2637 0d92 C297      		sbiw r24,50
 2638 0d94 04F4      		brge .+2
 2639 0d96 00C0      		rjmp .L87
 2640               	.LBE11:
 402:ServerLLDN.c  **** 		}
 403:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2641               		.loc 6 403 0 is_stmt 1
 2642 0d98 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2643 0d9c 1092 0000 		sts ACKFrame_size,__zero_reg__
 404:ServerLLDN.c  **** 		counter_associados = 0;
 2644               		.loc 6 404 0
 2645 0da0 1092 0000 		sts counter_associados+1,__zero_reg__
 2646 0da4 1092 0000 		sts counter_associados,__zero_reg__
 405:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2647               		.loc 6 405 0
 2648 0da8 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2649 0dac 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 406:ServerLLDN.c  **** 		n = 0;
 2650               		.loc 6 406 0
 2651 0db0 1092 0000 		sts n,__zero_reg__
 407:ServerLLDN.c  **** 	}
 2652               		.loc 6 407 0
 2653 0db4 0000      		nop
 2654               	/* epilogue start */
 2655 0db6 2696      		adiw r28,6
 2656 0db8 0FB6      		in __tmp_reg__,__SREG__
 2657 0dba F894      		cli
 2658 0dbc DEBF      		out __SP_H__,r29
 2659 0dbe 0FBE      		out __SREG__,__tmp_reg__
 2660 0dc0 CDBF      		out __SP_L__,r28
 2661 0dc2 DF91      		pop r29
 2662 0dc4 CF91      		pop r28
 2663 0dc6 0895      		ret
 2664               		.cfi_endproc
 2665               	.LFE141:
 2667               	.global	__fixunssfsi
 2669               	appPanDiscInit:
 2670               	.LFB142:
 408:ServerLLDN.c  **** 
 409:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 410:ServerLLDN.c  **** 	{	
 2671               		.loc 6 410 0
 2672               		.cfi_startproc
 2673 0dc8 CF93      		push r28
 2674               	.LCFI92:
 2675               		.cfi_def_cfa_offset 3
 2676               		.cfi_offset 28, -2
 2677 0dca DF93      		push r29
 2678               	.LCFI93:
 2679               		.cfi_def_cfa_offset 4
 2680               		.cfi_offset 29, -3
 2681 0dcc 00D0      		rcall .
 2682               	.LCFI94:
 2683               		.cfi_def_cfa_offset 6
 2684 0dce CDB7      		in r28,__SP_L__
 2685 0dd0 DEB7      		in r29,__SP_H__
 2686               	.LCFI95:
 2687               		.cfi_def_cfa_register 28
 2688               	/* prologue: function */
 2689               	/* frame size = 2 */
 2690               	/* stack size = 4 */
 2691               	.L__stack_usage = 4
 411:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 412:ServerLLDN.c  **** 
 413:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 414:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2692               		.loc 6 414 0
 2693 0dd2 1092 0000 		sts msgReq+5+1,__zero_reg__
 2694 0dd6 1092 0000 		sts msgReq+5,__zero_reg__
 415:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2695               		.loc 6 415 0
 2696 0dda 1092 0000 		sts msgReq+7,__zero_reg__
 416:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2697               		.loc 6 416 0
 2698 0dde 1092 0000 		sts msgReq+8,__zero_reg__
 417:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2699               		.loc 6 417 0
 2700 0de2 80E4      		ldi r24,lo8(64)
 2701 0de4 91E0      		ldi r25,lo8(1)
 2702 0de6 9093 0000 		sts msgReq+9+1,r25
 2703 0dea 8093 0000 		sts msgReq+9,r24
 418:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2704               		.loc 6 418 0
 2705 0dee 1092 0000 		sts msgReq+13+1,__zero_reg__
 2706 0df2 1092 0000 		sts msgReq+13,__zero_reg__
 419:ServerLLDN.c  **** 		msgReq.size					= 0;
 2707               		.loc 6 419 0
 2708 0df6 1092 0000 		sts msgReq+15,__zero_reg__
 420:ServerLLDN.c  **** 		
 421:ServerLLDN.c  **** 		macLLDNnumTimeSlots = 2;
 2709               		.loc 6 421 0
 2710 0dfa 82E0      		ldi r24,lo8(2)
 2711 0dfc 90E0      		ldi r25,0
 2712 0dfe 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 2713 0e02 8093 0000 		sts macLLDNnumTimeSlots,r24
 422:ServerLLDN.c  **** 		accepting_requests = 1;
 2714               		.loc 6 422 0
 2715 0e06 81E0      		ldi r24,lo8(1)
 2716 0e08 90E0      		ldi r25,0
 2717 0e0a 9093 0000 		sts accepting_requests+1,r25
 2718 0e0e 8093 0000 		sts accepting_requests,r24
 423:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 424:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2719               		.loc 6 424 0
 2720 0e12 8091 0000 		lds r24,cycles_counter
 2721 0e16 8823      		tst r24
 2722 0e18 01F0      		breq .+2
 2723 0e1a 00C0      		rjmp .L92
 2724               	.LBB13:
 425:ServerLLDN.c  **** 		{
 426:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2725               		.loc 6 426 0
 2726 0e1c 1A82      		std Y+2,__zero_reg__
 2727 0e1e 1982      		std Y+1,__zero_reg__
 2728 0e20 00C0      		rjmp .L90
 2729               	.L91:
 427:ServerLLDN.c  **** 		ACKFrame.ackFlags[i] = 0;
 2730               		.loc 6 427 0 discriminator 3
 2731 0e22 8981      		ldd r24,Y+1
 2732 0e24 9A81      		ldd r25,Y+2
 2733 0e26 8050      		subi r24,lo8(-(ACKFrame+1))
 2734 0e28 9040      		sbci r25,hi8(-(ACKFrame+1))
 2735 0e2a FC01      		movw r30,r24
 2736 0e2c 1082      		st Z,__zero_reg__
 426:ServerLLDN.c  **** 		ACKFrame.ackFlags[i] = 0;
 2737               		.loc 6 426 0 discriminator 3
 2738 0e2e 8981      		ldd r24,Y+1
 2739 0e30 9A81      		ldd r25,Y+2
 2740 0e32 0196      		adiw r24,1
 2741 0e34 9A83      		std Y+2,r25
 2742 0e36 8983      		std Y+1,r24
 2743               	.L90:
 426:ServerLLDN.c  **** 		ACKFrame.ackFlags[i] = 0;
 2744               		.loc 6 426 0 is_stmt 0 discriminator 1
 2745 0e38 8981      		ldd r24,Y+1
 2746 0e3a 9A81      		ldd r25,Y+2
 2747 0e3c 8097      		sbiw r24,32
 2748 0e3e 04F0      		brlt .L91
 2749               	.LBE13:
 428:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2750               		.loc 6 428 0 is_stmt 1
 2751 0e40 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2752 0e44 1092 0000 		sts ACKFrame_size,__zero_reg__
 429:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 430:ServerLLDN.c  **** 		n = 127; 
 2753               		.loc 6 430 0
 2754 0e48 8FE7      		ldi r24,lo8(127)
 2755 0e4a 8093 0000 		sts n,r24
 431:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2756               		.loc 6 431 0
 2757 0e4e 8091 0000 		lds r24,n
 2758 0e52 882F      		mov r24,r24
 2759 0e54 90E0      		ldi r25,0
 2760 0e56 0396      		adiw r24,3
 2761 0e58 880F      		lsl r24
 2762 0e5a 991F      		rol r25
 2763 0e5c 092E      		mov __tmp_reg__,r25
 2764 0e5e 000C      		lsl r0
 2765 0e60 AA0B      		sbc r26,r26
 2766 0e62 BB0B      		sbc r27,r27
 2767 0e64 BC01      		movw r22,r24
 2768 0e66 CD01      		movw r24,r26
 2769 0e68 0E94 0000 		call __floatsisf
 2770 0e6c DC01      		movw r26,r24
 2771 0e6e CB01      		movw r24,r22
 2772 0e70 20E0      		ldi r18,0
 2773 0e72 30E0      		ldi r19,0
 2774 0e74 40E4      		ldi r20,lo8(64)
 2775 0e76 51E4      		ldi r21,lo8(65)
 2776 0e78 BC01      		movw r22,r24
 2777 0e7a CD01      		movw r24,r26
 2778 0e7c 0E94 0000 		call __addsf3
 2779 0e80 DC01      		movw r26,r24
 2780 0e82 CB01      		movw r24,r22
 2781 0e84 20E0      		ldi r18,0
 2782 0e86 30E0      		ldi r19,0
 2783 0e88 40E2      		ldi r20,lo8(32)
 2784 0e8a 52E4      		ldi r21,lo8(66)
 2785 0e8c BC01      		movw r22,r24
 2786 0e8e CD01      		movw r24,r26
 2787 0e90 0E94 0000 		call __addsf3
 2788 0e94 DC01      		movw r26,r24
 2789 0e96 CB01      		movw r24,r22
 2790 0e98 20E0      		ldi r18,0
 2791 0e9a 34E2      		ldi r19,lo8(36)
 2792 0e9c 44E7      		ldi r20,lo8(116)
 2793 0e9e 57E4      		ldi r21,lo8(71)
 2794 0ea0 BC01      		movw r22,r24
 2795 0ea2 CD01      		movw r24,r26
 2796 0ea4 0E94 0000 		call __divsf3
 2797 0ea8 DC01      		movw r26,r24
 2798 0eaa CB01      		movw r24,r22
 2799 0eac 8093 0000 		sts tTS,r24
 2800 0eb0 9093 0000 		sts tTS+1,r25
 2801 0eb4 A093 0000 		sts tTS+2,r26
 2802 0eb8 B093 0000 		sts tTS+3,r27
 432:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 433:ServerLLDN.c  **** 		
 434:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2803               		.loc 6 434 0
 2804 0ebc 8091 0000 		lds r24,tTS
 2805 0ec0 9091 0000 		lds r25,tTS+1
 2806 0ec4 A091 0000 		lds r26,tTS+2
 2807 0ec8 B091 0000 		lds r27,tTS+3
 2808 0ecc 20E0      		ldi r18,0
 2809 0ece 30E0      		ldi r19,0
 2810 0ed0 40E8      		ldi r20,lo8(-128)
 2811 0ed2 50E4      		ldi r21,lo8(64)
 2812 0ed4 BC01      		movw r22,r24
 2813 0ed6 CD01      		movw r24,r26
 2814 0ed8 0E94 0000 		call __mulsf3
 2815 0edc DC01      		movw r26,r24
 2816 0ede CB01      		movw r24,r22
 2817 0ee0 2DEB      		ldi r18,lo8(-67)
 2818 0ee2 37E3      		ldi r19,lo8(55)
 2819 0ee4 46E8      		ldi r20,lo8(-122)
 2820 0ee6 57E3      		ldi r21,lo8(55)
 2821 0ee8 BC01      		movw r22,r24
 2822 0eea CD01      		movw r24,r26
 2823 0eec 0E94 0000 		call __divsf3
 2824 0ef0 DC01      		movw r26,r24
 2825 0ef2 CB01      		movw r24,r22
 2826 0ef4 8093 0000 		sts beaconInterval_association,r24
 2827 0ef8 9093 0000 		sts beaconInterval_association+1,r25
 2828 0efc A093 0000 		sts beaconInterval_association+2,r26
 2829 0f00 B093 0000 		sts beaconInterval_association+3,r27
 435:ServerLLDN.c  **** 			#if PRINT
 436:ServerLLDN.c  **** // 			printf("\n Beacon interval %f", beaconInterval_association);
 437:ServerLLDN.c  **** 			#endif
 438:ServerLLDN.c  **** 			/*
 439:ServerLLDN.c  **** 			* Configure interrupts callback functions
 440:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 441:ServerLLDN.c  **** 			*/
 442:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2830               		.loc 6 442 0
 2831 0f04 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2832 0f06 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2833 0f08 0E94 0000 		call macsc_set_cmp1_int_cb
 443:ServerLLDN.c  **** 			/*
 444:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 445:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 446:ServerLLDN.c  **** 			*/
 447:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2834               		.loc 6 447 0
 2835 0f0c 0E94 0000 		call macsc_enable_manual_bts
 448:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2836               		.loc 6 448 0
 2837 0f10 81E0      		ldi r24,lo8(1)
 2838 0f12 0E94 0000 		call macsc_enable_cmp_int
 449:ServerLLDN.c  **** 
 450:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2839               		.loc 6 450 0
 2840 0f16 8091 0000 		lds r24,beaconInterval_association
 2841 0f1a 9091 0000 		lds r25,beaconInterval_association+1
 2842 0f1e A091 0000 		lds r26,beaconInterval_association+2
 2843 0f22 B091 0000 		lds r27,beaconInterval_association+3
 2844 0f26 BC01      		movw r22,r24
 2845 0f28 CD01      		movw r24,r26
 2846 0f2a 0E94 0000 		call __fixunssfsi
 2847 0f2e DC01      		movw r26,r24
 2848 0f30 CB01      		movw r24,r22
 2849 0f32 21E0      		ldi r18,lo8(1)
 2850 0f34 AC01      		movw r20,r24
 2851 0f36 BD01      		movw r22,r26
 2852 0f38 81E0      		ldi r24,lo8(1)
 2853 0f3a 0E94 0000 		call macsc_use_cmp
 2854               	.L92:
 451:ServerLLDN.c  **** 			
 452:ServerLLDN.c  **** 			/* Timer used in testing */
 453:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 454:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 455:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 456:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 457:ServerLLDN.c  **** 			#endif
 458:ServerLLDN.c  **** 			
 459:ServerLLDN.c  **** 		#endif
 460:ServerLLDN.c  **** 		}
 461:ServerLLDN.c  **** 	}
 2855               		.loc 6 461 0
 2856 0f3e 0000      		nop
 2857               	/* epilogue start */
 2858 0f40 0F90      		pop __tmp_reg__
 2859 0f42 0F90      		pop __tmp_reg__
 2860 0f44 DF91      		pop r29
 2861 0f46 CF91      		pop r28
 2862 0f48 0895      		ret
 2863               		.cfi_endproc
 2864               	.LFE142:
 2867               	end_of_superframe_Online:
 2868               	.LFB143:
 462:ServerLLDN.c  **** 	
 463:ServerLLDN.c  **** 	static void end_of_superframe_Online(void)
 464:ServerLLDN.c  **** 	{
 2869               		.loc 6 464 0
 2870               		.cfi_startproc
 2871 0f4a CF93      		push r28
 2872               	.LCFI96:
 2873               		.cfi_def_cfa_offset 3
 2874               		.cfi_offset 28, -2
 2875 0f4c DF93      		push r29
 2876               	.LCFI97:
 2877               		.cfi_def_cfa_offset 4
 2878               		.cfi_offset 29, -3
 2879 0f4e CDB7      		in r28,__SP_L__
 2880 0f50 DEB7      		in r29,__SP_H__
 2881               	.LCFI98:
 2882               		.cfi_def_cfa_register 28
 2883               	/* prologue: function */
 2884               	/* frame size = 0 */
 2885               	/* stack size = 2 */
 2886               	.L__stack_usage = 2
 465:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 2887               		.loc 6 465 0
 2888 0f52 88E0      		ldi r24,lo8(8)
 2889 0f54 8093 0000 		sts appPanState,r24
 466:ServerLLDN.c  **** 		if(cycles_counter>0)
 2890               		.loc 6 466 0
 2891 0f58 8091 0000 		lds r24,cycles_counter
 2892 0f5c 8823      		tst r24
 2893 0f5e 01F0      		breq .L94
 467:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 2894               		.loc 6 467 0
 2895 0f60 82E0      		ldi r24,lo8(2)
 2896 0f62 8093 0000 		sts appState,r24
 468:ServerLLDN.c  **** 		else
 469:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 470:ServerLLDN.c  **** 
 471:ServerLLDN.c  **** 	}
 2897               		.loc 6 471 0
 2898 0f66 00C0      		rjmp .L96
 2899               	.L94:
 469:ServerLLDN.c  **** 
 2900               		.loc 6 469 0
 2901 0f68 83E0      		ldi r24,lo8(3)
 2902 0f6a 8093 0000 		sts appState,r24
 2903               	.L96:
 2904               		.loc 6 471 0
 2905 0f6e 0000      		nop
 2906               	/* epilogue start */
 2907 0f70 DF91      		pop r29
 2908 0f72 CF91      		pop r28
 2909 0f74 0895      		ret
 2910               		.cfi_endproc
 2911               	.LFE143:
 2914               	send_gack:
 2915               	.LFB144:
 472:ServerLLDN.c  **** 	
 473:ServerLLDN.c  **** 	static void send_gack(void)
 474:ServerLLDN.c  **** 	{
 2916               		.loc 6 474 0
 2917               		.cfi_startproc
 2918 0f76 CF93      		push r28
 2919               	.LCFI99:
 2920               		.cfi_def_cfa_offset 3
 2921               		.cfi_offset 28, -2
 2922 0f78 DF93      		push r29
 2923               	.LCFI100:
 2924               		.cfi_def_cfa_offset 4
 2925               		.cfi_offset 29, -3
 2926 0f7a 00D0      		rcall .
 2927               	.LCFI101:
 2928               		.cfi_def_cfa_offset 6
 2929 0f7c CDB7      		in r28,__SP_L__
 2930 0f7e DEB7      		in r29,__SP_H__
 2931               	.LCFI102:
 2932               		.cfi_def_cfa_register 28
 2933               	/* prologue: function */
 2934               	/* frame size = 2 */
 2935               	/* stack size = 4 */
 2936               	.L__stack_usage = 4
 475:ServerLLDN.c  **** 		msgReqGACK.size = sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 2937               		.loc 6 475 0
 2938 0f80 8091 0000 		lds r24,macLLDNRetransmitTS
 2939 0f84 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2940 0f88 8F5F      		subi r24,lo8(-(1))
 2941 0f8a 8093 0000 		sts msgReqGACK+15,r24
 476:ServerLLDN.c  **** 		NWK_DataReq(&msgReqGACK);
 2942               		.loc 6 476 0
 2943 0f8e 80E0      		ldi r24,lo8(msgReqGACK)
 2944 0f90 90E0      		ldi r25,hi8(msgReqGACK)
 2945 0f92 0E94 0000 		call NWK_DataReq
 477:ServerLLDN.c  **** 		ACKFrame_aux = ACKFrame;
 2946               		.loc 6 477 0
 2947 0f96 81E2      		ldi r24,lo8(33)
 2948 0f98 E0E0      		ldi r30,lo8(ACKFrame)
 2949 0f9a F0E0      		ldi r31,hi8(ACKFrame)
 2950 0f9c A0E0      		ldi r26,lo8(ACKFrame_aux)
 2951 0f9e B0E0      		ldi r27,hi8(ACKFrame_aux)
 2952               		0:
 2953 0fa0 0190      		ld r0,Z+
 2954 0fa2 0D92      		st X+,r0
 2955 0fa4 8A95      		dec r24
 2956 0fa6 01F4      		brne 0b
 478:ServerLLDN.c  **** 		#if PRINT
 479:ServerLLDN.c  **** // 		printf("\n%hhx ", ACKFrame.ackFlags[0]);
 480:ServerLLDN.c  **** 		#endif
 481:ServerLLDN.c  **** 		if(cycles_counter<NUMERO_CICLOS_ONLINE-1)
 2957               		.loc 6 481 0
 2958 0fa8 8091 0000 		lds r24,cycles_counter
 2959 0fac 8C33      		cpi r24,lo8(60)
 2960 0fae 00F0      		brlo .+2
 2961 0fb0 00C0      		rjmp .L102
 2962               	.LBB14:
 482:ServerLLDN.c  **** 		{
 483:ServerLLDN.c  **** 			for (int i  = 0; i < assTimeSlot;i++)
 2963               		.loc 6 483 0
 2964 0fb2 1A82      		std Y+2,__zero_reg__
 2965 0fb4 1982      		std Y+1,__zero_reg__
 2966 0fb6 00C0      		rjmp .L99
 2967               	.L101:
 484:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 2968               		.loc 6 484 0
 2969 0fb8 8981      		ldd r24,Y+1
 2970 0fba 9A81      		ldd r25,Y+2
 2971 0fbc 0196      		adiw r24,1
 2972 0fbe 0E94 0000 		call check_ack_pan
 2973 0fc2 982F      		mov r25,r24
 2974 0fc4 81E0      		ldi r24,lo8(1)
 2975 0fc6 8927      		eor r24,r25
 2976 0fc8 8823      		tst r24
 2977 0fca 01F0      		breq .L100
 485:ServerLLDN.c  **** 				{
 486:ServerLLDN.c  **** 					nodes_info_arr[i].msg_not_rec++;
 2978               		.loc 6 486 0
 2979 0fcc 2981      		ldd r18,Y+1
 2980 0fce 3A81      		ldd r19,Y+2
 2981 0fd0 4AE4      		ldi r20,lo8(74)
 2982 0fd2 429F      		mul r20,r18
 2983 0fd4 C001      		movw r24,r0
 2984 0fd6 439F      		mul r20,r19
 2985 0fd8 900D      		add r25,r0
 2986 0fda 1124      		clr __zero_reg__
 2987 0fdc 8050      		subi r24,lo8(-(nodes_info_arr+71))
 2988 0fde 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 2989 0fe0 FC01      		movw r30,r24
 2990 0fe2 8081      		ld r24,Z
 2991 0fe4 9181      		ldd r25,Z+1
 2992 0fe6 9C01      		movw r18,r24
 2993 0fe8 2F5F      		subi r18,-1
 2994 0fea 3F4F      		sbci r19,-1
 2995 0fec 4981      		ldd r20,Y+1
 2996 0fee 5A81      		ldd r21,Y+2
 2997 0ff0 6AE4      		ldi r22,lo8(74)
 2998 0ff2 649F      		mul r22,r20
 2999 0ff4 C001      		movw r24,r0
 3000 0ff6 659F      		mul r22,r21
 3001 0ff8 900D      		add r25,r0
 3002 0ffa 1124      		clr __zero_reg__
 3003 0ffc 8050      		subi r24,lo8(-(nodes_info_arr+71))
 3004 0ffe 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 3005 1000 FC01      		movw r30,r24
 3006 1002 3183      		std Z+1,r19
 3007 1004 2083      		st Z,r18
 487:ServerLLDN.c  **** 					count_lost_superframe++;
 3008               		.loc 6 487 0
 3009 1006 8091 0000 		lds r24,count_lost_superframe
 3010 100a 9091 0000 		lds r25,count_lost_superframe+1
 3011 100e A091 0000 		lds r26,count_lost_superframe+2
 3012 1012 B091 0000 		lds r27,count_lost_superframe+3
 3013 1016 20E0      		ldi r18,0
 3014 1018 30E0      		ldi r19,0
 3015 101a 40E8      		ldi r20,lo8(-128)
 3016 101c 5FE3      		ldi r21,lo8(63)
 3017 101e BC01      		movw r22,r24
 3018 1020 CD01      		movw r24,r26
 3019 1022 0E94 0000 		call __addsf3
 3020 1026 DC01      		movw r26,r24
 3021 1028 CB01      		movw r24,r22
 3022 102a 8093 0000 		sts count_lost_superframe,r24
 3023 102e 9093 0000 		sts count_lost_superframe+1,r25
 3024 1032 A093 0000 		sts count_lost_superframe+2,r26
 3025 1036 B093 0000 		sts count_lost_superframe+3,r27
 3026               	.L100:
 483:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 3027               		.loc 6 483 0 discriminator 2
 3028 103a 8981      		ldd r24,Y+1
 3029 103c 9A81      		ldd r25,Y+2
 3030 103e 0196      		adiw r24,1
 3031 1040 9A83      		std Y+2,r25
 3032 1042 8983      		std Y+1,r24
 3033               	.L99:
 483:ServerLLDN.c  **** 				if(!check_ack_pan(i+1))
 3034               		.loc 6 483 0 is_stmt 0 discriminator 1
 3035 1044 8091 0000 		lds r24,assTimeSlot
 3036 1048 9091 0000 		lds r25,assTimeSlot+1
 3037 104c 2981      		ldd r18,Y+1
 3038 104e 3A81      		ldd r19,Y+2
 3039 1050 2817      		cp r18,r24
 3040 1052 3907      		cpc r19,r25
 3041 1054 04F4      		brge .+2
 3042 1056 00C0      		rjmp .L101
 3043               	.L102:
 3044               	.LBE14:
 488:ServerLLDN.c  **** 			}
 489:ServerLLDN.c  **** 		}
 490:ServerLLDN.c  **** 	}
 3045               		.loc 6 490 0 is_stmt 1
 3046 1058 0000      		nop
 3047               	/* epilogue start */
 3048 105a 0F90      		pop __tmp_reg__
 3049 105c 0F90      		pop __tmp_reg__
 3050 105e DF91      		pop r29
 3051 1060 CF91      		pop r28
 3052 1062 0895      		ret
 3053               		.cfi_endproc
 3054               	.LFE144:
 3056               		.section	.rodata
 3057               	.LC1:
 3058 0000 0A25 2E33 		.string	"\n%.3f %.3f"
 3058      6620 252E 
 3058      3366 00
 3059               		.text
 3061               	appPanOnlineInit:
 3062               	.LFB145:
 491:ServerLLDN.c  **** 
 492:ServerLLDN.c  **** 	static void appPanOnlineInit()
 493:ServerLLDN.c  **** 	{
 3063               		.loc 6 493 0
 3064               		.cfi_startproc
 3065 1064 8F92      		push r8
 3066               	.LCFI103:
 3067               		.cfi_def_cfa_offset 3
 3068               		.cfi_offset 8, -2
 3069 1066 9F92      		push r9
 3070               	.LCFI104:
 3071               		.cfi_def_cfa_offset 4
 3072               		.cfi_offset 9, -3
 3073 1068 AF92      		push r10
 3074               	.LCFI105:
 3075               		.cfi_def_cfa_offset 5
 3076               		.cfi_offset 10, -4
 3077 106a BF92      		push r11
 3078               	.LCFI106:
 3079               		.cfi_def_cfa_offset 6
 3080               		.cfi_offset 11, -5
 3081 106c CF92      		push r12
 3082               	.LCFI107:
 3083               		.cfi_def_cfa_offset 7
 3084               		.cfi_offset 12, -6
 3085 106e DF92      		push r13
 3086               	.LCFI108:
 3087               		.cfi_def_cfa_offset 8
 3088               		.cfi_offset 13, -7
 3089 1070 EF92      		push r14
 3090               	.LCFI109:
 3091               		.cfi_def_cfa_offset 9
 3092               		.cfi_offset 14, -8
 3093 1072 FF92      		push r15
 3094               	.LCFI110:
 3095               		.cfi_def_cfa_offset 10
 3096               		.cfi_offset 15, -9
 3097 1074 0F93      		push r16
 3098               	.LCFI111:
 3099               		.cfi_def_cfa_offset 11
 3100               		.cfi_offset 16, -10
 3101 1076 1F93      		push r17
 3102               	.LCFI112:
 3103               		.cfi_def_cfa_offset 12
 3104               		.cfi_offset 17, -11
 3105 1078 CF93      		push r28
 3106               	.LCFI113:
 3107               		.cfi_def_cfa_offset 13
 3108               		.cfi_offset 28, -12
 3109 107a DF93      		push r29
 3110               	.LCFI114:
 3111               		.cfi_def_cfa_offset 14
 3112               		.cfi_offset 29, -13
 3113 107c 00D0      		rcall .
 3114 107e 00D0      		rcall .
 3115 1080 00D0      		rcall .
 3116               	.LCFI115:
 3117               		.cfi_def_cfa_offset 20
 3118 1082 CDB7      		in r28,__SP_L__
 3119 1084 DEB7      		in r29,__SP_H__
 3120               	.LCFI116:
 3121               		.cfi_def_cfa_register 28
 3122               	/* prologue: function */
 3123               	/* frame size = 6 */
 3124               	/* stack size = 18 */
 3125               	.L__stack_usage = 18
 494:ServerLLDN.c  **** 			
 495:ServerLLDN.c  **** 			macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 3126               		.loc 6 495 0
 3127 1086 8091 0000 		lds r24,assTimeSlot
 3128 108a 9091 0000 		lds r25,assTimeSlot+1
 3129 108e 880F      		lsl r24
 3130 1090 991F      		rol r25
 3131 1092 0196      		adiw r24,1
 3132 1094 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 3133 1098 8093 0000 		sts macLLDNnumUplinkTS,r24
 496:ServerLLDN.c  **** 			macLLDNRetransmitTS = assTimeSlot;
 3134               		.loc 6 496 0
 3135 109c 8091 0000 		lds r24,assTimeSlot
 3136 10a0 9091 0000 		lds r25,assTimeSlot+1
 3137 10a4 9093 0000 		sts macLLDNRetransmitTS+1,r25
 3138 10a8 8093 0000 		sts macLLDNRetransmitTS,r24
 497:ServerLLDN.c  **** 			macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;			
 3139               		.loc 6 497 0
 3140 10ac 8091 0000 		lds r24,macLLDNnumUplinkTS
 3141 10b0 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3142 10b4 0296      		adiw r24,2
 3143 10b6 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 3144 10ba 8093 0000 		sts macLLDNnumTimeSlots,r24
 498:ServerLLDN.c  **** 			
 499:ServerLLDN.c  **** // 			printf("\nmacLLDNnumUplinkTS : %d\nmacLLDNRetransmitTS : %d\nmacLLDNnumTimeSlots : %d",macLLD
 500:ServerLLDN.c  **** 			
 501:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration = 75;
 3145               		.loc 6 501 0
 3146 10be 8091 0000 		lds r24,config_request_frame+5
 3147 10c2 8078      		andi r24,lo8(-128)
 3148 10c4 8B64      		ori r24,lo8(75)
 3149 10c6 8093 0000 		sts config_request_frame+5,r24
 502:ServerLLDN.c  **** 
 503:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 3150               		.loc 6 503 0
 3151 10ca 8091 0000 		lds r24,config_request_frame+5
 3152 10ce 8F77      		andi r24,lo8(127)
 3153 10d0 882F      		mov r24,r24
 3154 10d2 90E0      		ldi r25,0
 3155 10d4 0396      		adiw r24,3
 3156 10d6 880F      		lsl r24
 3157 10d8 991F      		rol r25
 3158 10da 092E      		mov __tmp_reg__,r25
 3159 10dc 000C      		lsl r0
 3160 10de AA0B      		sbc r26,r26
 3161 10e0 BB0B      		sbc r27,r27
 3162 10e2 BC01      		movw r22,r24
 3163 10e4 CD01      		movw r24,r26
 3164 10e6 0E94 0000 		call __floatsisf
 3165 10ea DC01      		movw r26,r24
 3166 10ec CB01      		movw r24,r22
 3167 10ee 20E0      		ldi r18,0
 3168 10f0 30E0      		ldi r19,0
 3169 10f2 40E4      		ldi r20,lo8(64)
 3170 10f4 51E4      		ldi r21,lo8(65)
 3171 10f6 BC01      		movw r22,r24
 3172 10f8 CD01      		movw r24,r26
 3173 10fa 0E94 0000 		call __addsf3
 3174 10fe DC01      		movw r26,r24
 3175 1100 CB01      		movw r24,r22
 3176 1102 20E0      		ldi r18,0
 3177 1104 30E0      		ldi r19,0
 3178 1106 40E2      		ldi r20,lo8(32)
 3179 1108 52E4      		ldi r21,lo8(66)
 3180 110a BC01      		movw r22,r24
 3181 110c CD01      		movw r24,r26
 3182 110e 0E94 0000 		call __addsf3
 3183 1112 DC01      		movw r26,r24
 3184 1114 CB01      		movw r24,r22
 3185 1116 20E0      		ldi r18,0
 3186 1118 34E2      		ldi r19,lo8(36)
 3187 111a 44E7      		ldi r20,lo8(116)
 3188 111c 57E4      		ldi r21,lo8(71)
 3189 111e BC01      		movw r22,r24
 3190 1120 CD01      		movw r24,r26
 3191 1122 0E94 0000 		call __divsf3
 3192 1126 DC01      		movw r26,r24
 3193 1128 CB01      		movw r24,r22
 3194 112a 8093 0000 		sts tTS,r24
 3195 112e 9093 0000 		sts tTS+1,r25
 3196 1132 A093 0000 		sts tTS+2,r26
 3197 1136 B093 0000 		sts tTS+3,r27
 504:ServerLLDN.c  **** 				
 505:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 3198               		.loc 6 505 0
 3199 113a 8091 0000 		lds r24,config_request_frame+5
 3200 113e 8F77      		andi r24,lo8(127)
 3201 1140 8093 0000 		sts n,r24
 506:ServerLLDN.c  **** 			
 507:ServerLLDN.c  **** 
 508:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 3202               		.loc 6 508 0
 3203 1144 1092 0000 		sts msgReq+5+1,__zero_reg__
 3204 1148 1092 0000 		sts msgReq+5,__zero_reg__
 509:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 3205               		.loc 6 509 0
 3206 114c 1092 0000 		sts msgReq+7,__zero_reg__
 510:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 3207               		.loc 6 510 0
 3208 1150 1092 0000 		sts msgReq+8,__zero_reg__
 511:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 3209               		.loc 6 511 0
 3210 1154 80EC      		ldi r24,lo8(-64)
 3211 1156 90E0      		ldi r25,0
 3212 1158 9093 0000 		sts msgReq+9+1,r25
 3213 115c 8093 0000 		sts msgReq+9,r24
 512:ServerLLDN.c  **** 			msgReq.data					= NULL;
 3214               		.loc 6 512 0
 3215 1160 1092 0000 		sts msgReq+13+1,__zero_reg__
 3216 1164 1092 0000 		sts msgReq+13,__zero_reg__
 513:ServerLLDN.c  **** 			msgReq.size					= 0;
 3217               		.loc 6 513 0
 3218 1168 1092 0000 		sts msgReq+15,__zero_reg__
 514:ServerLLDN.c  **** 			
 515:ServerLLDN.c  **** 			beaconInterval= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3219               		.loc 6 515 0
 3220 116c 8091 0000 		lds r24,macLLDNnumUplinkTS
 3221 1170 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3222 1174 0496      		adiw r24,4
 3223 1176 092E      		mov __tmp_reg__,r25
 3224 1178 000C      		lsl r0
 3225 117a AA0B      		sbc r26,r26
 3226 117c BB0B      		sbc r27,r27
 3227 117e BC01      		movw r22,r24
 3228 1180 CD01      		movw r24,r26
 3229 1182 0E94 0000 		call __floatsisf
 3230 1186 7B01      		movw r14,r22
 3231 1188 8C01      		movw r16,r24
 3232 118a 8091 0000 		lds r24,tTS
 3233 118e 9091 0000 		lds r25,tTS+1
 3234 1192 A091 0000 		lds r26,tTS+2
 3235 1196 B091 0000 		lds r27,tTS+3
 3236 119a 9C01      		movw r18,r24
 3237 119c AD01      		movw r20,r26
 3238 119e C801      		movw r24,r16
 3239 11a0 B701      		movw r22,r14
 3240 11a2 0E94 0000 		call __mulsf3
 3241 11a6 DC01      		movw r26,r24
 3242 11a8 CB01      		movw r24,r22
 3243 11aa 2DEB      		ldi r18,lo8(-67)
 3244 11ac 37E3      		ldi r19,lo8(55)
 3245 11ae 46E8      		ldi r20,lo8(-122)
 3246 11b0 57E3      		ldi r21,lo8(55)
 3247 11b2 BC01      		movw r22,r24
 3248 11b4 CD01      		movw r24,r26
 3249 11b6 0E94 0000 		call __divsf3
 3250 11ba DC01      		movw r26,r24
 3251 11bc CB01      		movw r24,r22
 3252 11be 8093 0000 		sts beaconInterval,r24
 3253 11c2 9093 0000 		sts beaconInterval+1,r25
 3254 11c6 A093 0000 		sts beaconInterval+2,r26
 3255 11ca B093 0000 		sts beaconInterval+3,r27
 516:ServerLLDN.c  **** 			float GACK_tTS = (assTimeSlot + 0.2 + 2*MacLLDNMgmtTS*numBaseTimeSlotperMgmt_online) * tTS / (SY
 3256               		.loc 6 516 0
 3257 11ce 8091 0000 		lds r24,assTimeSlot
 3258 11d2 9091 0000 		lds r25,assTimeSlot+1
 3259 11d6 092E      		mov __tmp_reg__,r25
 3260 11d8 000C      		lsl r0
 3261 11da AA0B      		sbc r26,r26
 3262 11dc BB0B      		sbc r27,r27
 3263 11de BC01      		movw r22,r24
 3264 11e0 CD01      		movw r24,r26
 3265 11e2 0E94 0000 		call __floatsisf
 3266 11e6 DC01      		movw r26,r24
 3267 11e8 CB01      		movw r24,r22
 3268 11ea 2DEC      		ldi r18,lo8(-51)
 3269 11ec 3CEC      		ldi r19,lo8(-52)
 3270 11ee 4CE4      		ldi r20,lo8(76)
 3271 11f0 5EE3      		ldi r21,lo8(62)
 3272 11f2 BC01      		movw r22,r24
 3273 11f4 CD01      		movw r24,r26
 3274 11f6 0E94 0000 		call __addsf3
 3275 11fa DC01      		movw r26,r24
 3276 11fc CB01      		movw r24,r22
 3277 11fe 20E0      		ldi r18,0
 3278 1200 30E0      		ldi r19,0
 3279 1202 40E8      		ldi r20,lo8(-128)
 3280 1204 50E4      		ldi r21,lo8(64)
 3281 1206 BC01      		movw r22,r24
 3282 1208 CD01      		movw r24,r26
 3283 120a 0E94 0000 		call __addsf3
 3284 120e DC01      		movw r26,r24
 3285 1210 CB01      		movw r24,r22
 3286 1212 7C01      		movw r14,r24
 3287 1214 8D01      		movw r16,r26
 3288 1216 8091 0000 		lds r24,tTS
 3289 121a 9091 0000 		lds r25,tTS+1
 3290 121e A091 0000 		lds r26,tTS+2
 3291 1222 B091 0000 		lds r27,tTS+3
 3292 1226 9C01      		movw r18,r24
 3293 1228 AD01      		movw r20,r26
 3294 122a C801      		movw r24,r16
 3295 122c B701      		movw r22,r14
 3296 122e 0E94 0000 		call __mulsf3
 3297 1232 DC01      		movw r26,r24
 3298 1234 CB01      		movw r24,r22
 3299 1236 2DEB      		ldi r18,lo8(-67)
 3300 1238 37E3      		ldi r19,lo8(55)
 3301 123a 46E8      		ldi r20,lo8(-122)
 3302 123c 57E3      		ldi r21,lo8(55)
 3303 123e BC01      		movw r22,r24
 3304 1240 CD01      		movw r24,r26
 3305 1242 0E94 0000 		call __divsf3
 3306 1246 DC01      		movw r26,r24
 3307 1248 CB01      		movw r24,r22
 3308 124a 8B83      		std Y+3,r24
 3309 124c 9C83      		std Y+4,r25
 3310 124e AD83      		std Y+5,r26
 3311 1250 BE83      		std Y+6,r27
 517:ServerLLDN.c  **** 			macsc_write_count(0);
 3312               		.loc 6 517 0
 3313 1252 60E0      		ldi r22,0
 3314 1254 70E0      		ldi r23,0
 3315 1256 CB01      		movw r24,r22
 3316 1258 0E94 0000 		call macsc_write_count
 518:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(end_of_superframe_Online);
 3317               		.loc 6 518 0
 3318 125c 80E0      		ldi r24,lo8(gs(end_of_superframe_Online))
 3319 125e 90E0      		ldi r25,hi8(gs(end_of_superframe_Online))
 3320 1260 0E94 0000 		call macsc_set_cmp1_int_cb
 519:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 3321               		.loc 6 519 0
 3322 1264 81E0      		ldi r24,lo8(1)
 3323 1266 0E94 0000 		call macsc_enable_cmp_int
 520:ServerLLDN.c  **** 
 521:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(send_gack);
 3324               		.loc 6 521 0
 3325 126a 80E0      		ldi r24,lo8(gs(send_gack))
 3326 126c 90E0      		ldi r25,hi8(gs(send_gack))
 3327 126e 0E94 0000 		call macsc_set_cmp2_int_cb
 522:ServerLLDN.c  **** 			if(cycles_counter != NUMERO_CICLOS_ONLINE)
 3328               		.loc 6 522 0
 3329 1272 8091 0000 		lds r24,cycles_counter
 3330 1276 8D33      		cpi r24,lo8(61)
 3331 1278 01F0      		breq .L104
 523:ServerLLDN.c  **** 				macsc_enable_cmp_int(MACSC_CC2);
 3332               		.loc 6 523 0
 3333 127a 82E0      		ldi r24,lo8(2)
 3334 127c 0E94 0000 		call macsc_enable_cmp_int
 3335               	.L104:
 524:ServerLLDN.c  **** 
 525:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval, MACSC_CC1);
 3336               		.loc 6 525 0
 3337 1280 8091 0000 		lds r24,beaconInterval
 3338 1284 9091 0000 		lds r25,beaconInterval+1
 3339 1288 A091 0000 		lds r26,beaconInterval+2
 3340 128c B091 0000 		lds r27,beaconInterval+3
 3341 1290 BC01      		movw r22,r24
 3342 1292 CD01      		movw r24,r26
 3343 1294 0E94 0000 		call __fixunssfsi
 3344 1298 DC01      		movw r26,r24
 3345 129a CB01      		movw r24,r22
 3346 129c 21E0      		ldi r18,lo8(1)
 3347 129e AC01      		movw r20,r24
 3348 12a0 BD01      		movw r22,r26
 3349 12a2 81E0      		ldi r24,lo8(1)
 3350 12a4 0E94 0000 		call macsc_use_cmp
 526:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, GACK_tTS, MACSC_CC2);
 3351               		.loc 6 526 0
 3352 12a8 6B81      		ldd r22,Y+3
 3353 12aa 7C81      		ldd r23,Y+4
 3354 12ac 8D81      		ldd r24,Y+5
 3355 12ae 9E81      		ldd r25,Y+6
 3356 12b0 0E94 0000 		call __fixunssfsi
 3357 12b4 DC01      		movw r26,r24
 3358 12b6 CB01      		movw r24,r22
 3359 12b8 22E0      		ldi r18,lo8(2)
 3360 12ba AC01      		movw r20,r24
 3361 12bc BD01      		movw r22,r26
 3362 12be 81E0      		ldi r24,lo8(1)
 3363 12c0 0E94 0000 		call macsc_use_cmp
 527:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 3364               		.loc 6 527 0
 3365 12c4 0E94 0000 		call macsc_enable_manual_bts
 528:ServerLLDN.c  **** 			
 529:ServerLLDN.c  **** 			cmp_value_start_superframe = macsc_read_count();
 3366               		.loc 6 529 0
 3367 12c8 0E94 0000 		call macsc_read_count
 3368 12cc DC01      		movw r26,r24
 3369 12ce CB01      		movw r24,r22
 3370 12d0 8093 0000 		sts cmp_value_start_superframe,r24
 3371 12d4 9093 0000 		sts cmp_value_start_superframe+1,r25
 3372 12d8 A093 0000 		sts cmp_value_start_superframe+2,r26
 3373 12dc B093 0000 		sts cmp_value_start_superframe+3,r27
 3374               	.LBB15:
 530:ServerLLDN.c  **** 
 531:ServerLLDN.c  **** 
 532:ServerLLDN.c  **** 			for(int i = 0; i < 32; i++)
 3375               		.loc 6 532 0
 3376 12e0 1A82      		std Y+2,__zero_reg__
 3377 12e2 1982      		std Y+1,__zero_reg__
 3378 12e4 00C0      		rjmp .L105
 3379               	.L106:
 533:ServerLLDN.c  **** 			{
 534:ServerLLDN.c  **** 				ACKFrame.ackFlags[i] = 0;
 3380               		.loc 6 534 0 discriminator 3
 3381 12e6 8981      		ldd r24,Y+1
 3382 12e8 9A81      		ldd r25,Y+2
 3383 12ea 8050      		subi r24,lo8(-(ACKFrame+1))
 3384 12ec 9040      		sbci r25,hi8(-(ACKFrame+1))
 3385 12ee FC01      		movw r30,r24
 3386 12f0 1082      		st Z,__zero_reg__
 535:ServerLLDN.c  **** 				retransmit_ts_array[i] = 0;
 3387               		.loc 6 535 0 discriminator 3
 3388 12f2 8981      		ldd r24,Y+1
 3389 12f4 9A81      		ldd r25,Y+2
 3390 12f6 8050      		subi r24,lo8(-(retransmit_ts_array))
 3391 12f8 9040      		sbci r25,hi8(-(retransmit_ts_array))
 3392 12fa FC01      		movw r30,r24
 3393 12fc 1082      		st Z,__zero_reg__
 532:ServerLLDN.c  **** 			{
 3394               		.loc 6 532 0 discriminator 3
 3395 12fe 8981      		ldd r24,Y+1
 3396 1300 9A81      		ldd r25,Y+2
 3397 1302 0196      		adiw r24,1
 3398 1304 9A83      		std Y+2,r25
 3399 1306 8983      		std Y+1,r24
 3400               	.L105:
 532:ServerLLDN.c  **** 			{
 3401               		.loc 6 532 0 is_stmt 0 discriminator 1
 3402 1308 8981      		ldd r24,Y+1
 3403 130a 9A81      		ldd r25,Y+2
 3404 130c 8097      		sbiw r24,32
 3405 130e 04F0      		brlt .L106
 3406               	.LBE15:
 536:ServerLLDN.c  **** 			}
 537:ServerLLDN.c  **** 			retransmit_ts_array_counter = 0;
 3407               		.loc 6 537 0 is_stmt 1
 3408 1310 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 3409 1314 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
 538:ServerLLDN.c  **** 			ACKFrame_size = 0;
 3410               		.loc 6 538 0
 3411 1318 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3412 131c 1092 0000 		sts ACKFrame_size,__zero_reg__
 539:ServerLLDN.c  **** 			if (cycles_counter < NUMERO_CICLOS_ONLINE-1)
 3413               		.loc 6 539 0
 3414 1320 8091 0000 		lds r24,cycles_counter
 3415 1324 8C33      		cpi r24,lo8(60)
 3416 1326 00F0      		brlo .+2
 3417 1328 00C0      		rjmp .L107
 540:ServerLLDN.c  **** 			{
 541:ServerLLDN.c  **** 				printf("\n%.3f %.3f",/*PER*/ count_lost_superframe/assTimeSlot , /*PLR*/1 - count_up/assTimeSlo
 3418               		.loc 6 541 0
 3419 132a C090 0000 		lds r12,count_up
 3420 132e D090 0000 		lds r13,count_up+1
 3421 1332 E090 0000 		lds r14,count_up+2
 3422 1336 F090 0000 		lds r15,count_up+3
 3423 133a 8091 0000 		lds r24,assTimeSlot
 3424 133e 9091 0000 		lds r25,assTimeSlot+1
 3425 1342 092E      		mov __tmp_reg__,r25
 3426 1344 000C      		lsl r0
 3427 1346 AA0B      		sbc r26,r26
 3428 1348 BB0B      		sbc r27,r27
 3429 134a BC01      		movw r22,r24
 3430 134c CD01      		movw r24,r26
 3431 134e 0E94 0000 		call __floatsisf
 3432 1352 DC01      		movw r26,r24
 3433 1354 CB01      		movw r24,r22
 3434 1356 9C01      		movw r18,r24
 3435 1358 AD01      		movw r20,r26
 3436 135a C701      		movw r24,r14
 3437 135c B601      		movw r22,r12
 3438 135e 0E94 0000 		call __divsf3
 3439 1362 DC01      		movw r26,r24
 3440 1364 CB01      		movw r24,r22
 3441 1366 9C01      		movw r18,r24
 3442 1368 AD01      		movw r20,r26
 3443 136a 60E0      		ldi r22,0
 3444 136c 70E0      		ldi r23,0
 3445 136e 80E8      		ldi r24,lo8(-128)
 3446 1370 9FE3      		ldi r25,lo8(63)
 3447 1372 0E94 0000 		call __subsf3
 3448 1376 DC01      		movw r26,r24
 3449 1378 CB01      		movw r24,r22
 3450 137a 4C01      		movw r8,r24
 3451 137c 5D01      		movw r10,r26
 3452 137e C090 0000 		lds r12,count_lost_superframe
 3453 1382 D090 0000 		lds r13,count_lost_superframe+1
 3454 1386 E090 0000 		lds r14,count_lost_superframe+2
 3455 138a F090 0000 		lds r15,count_lost_superframe+3
 3456 138e 8091 0000 		lds r24,assTimeSlot
 3457 1392 9091 0000 		lds r25,assTimeSlot+1
 3458 1396 092E      		mov __tmp_reg__,r25
 3459 1398 000C      		lsl r0
 3460 139a AA0B      		sbc r26,r26
 3461 139c BB0B      		sbc r27,r27
 3462 139e BC01      		movw r22,r24
 3463 13a0 CD01      		movw r24,r26
 3464 13a2 0E94 0000 		call __floatsisf
 3465 13a6 DC01      		movw r26,r24
 3466 13a8 CB01      		movw r24,r22
 3467 13aa 9C01      		movw r18,r24
 3468 13ac AD01      		movw r20,r26
 3469 13ae C701      		movw r24,r14
 3470 13b0 B601      		movw r22,r12
 3471 13b2 0E94 0000 		call __divsf3
 3472 13b6 DC01      		movw r26,r24
 3473 13b8 CB01      		movw r24,r22
 3474 13ba 2B2D      		mov r18,r11
 3475 13bc 2F93      		push r18
 3476 13be 2A2D      		mov r18,r10
 3477 13c0 2F93      		push r18
 3478 13c2 292D      		mov r18,r9
 3479 13c4 2F93      		push r18
 3480 13c6 282D      		mov r18,r8
 3481 13c8 2F93      		push r18
 3482 13ca 2B2F      		mov r18,r27
 3483 13cc 2F93      		push r18
 3484 13ce 2A2F      		mov r18,r26
 3485 13d0 2F93      		push r18
 3486 13d2 292F      		mov r18,r25
 3487 13d4 2F93      		push r18
 3488 13d6 8F93      		push r24
 3489 13d8 80E0      		ldi r24,lo8(.LC1)
 3490 13da 90E0      		ldi r25,hi8(.LC1)
 3491 13dc 892F      		mov r24,r25
 3492 13de 8F93      		push r24
 3493 13e0 80E0      		ldi r24,lo8(.LC1)
 3494 13e2 90E0      		ldi r25,hi8(.LC1)
 3495 13e4 8F93      		push r24
 3496 13e6 0E94 0000 		call printf
 3497 13ea 8DB7      		in r24,__SP_L__
 3498 13ec 9EB7      		in r25,__SP_H__
 3499 13ee 0A96      		adiw r24,10
 3500 13f0 0FB6      		in __tmp_reg__,__SREG__
 3501 13f2 F894      		cli
 3502 13f4 DEBF      		out __SP_H__,r29
 3503 13f6 0FBE      		out __SREG__,__tmp_reg__
 3504 13f8 CDBF      		out __SP_L__,r28
 542:ServerLLDN.c  **** 				count_up = 0;
 3505               		.loc 6 542 0
 3506 13fa 1092 0000 		sts count_up,__zero_reg__
 3507 13fe 1092 0000 		sts count_up+1,__zero_reg__
 3508 1402 1092 0000 		sts count_up+2,__zero_reg__
 3509 1406 1092 0000 		sts count_up+3,__zero_reg__
 543:ServerLLDN.c  **** 				count_lost_superframe = 0;
 3510               		.loc 6 543 0
 3511 140a 1092 0000 		sts count_lost_superframe,__zero_reg__
 3512 140e 1092 0000 		sts count_lost_superframe+1,__zero_reg__
 3513 1412 1092 0000 		sts count_lost_superframe+2,__zero_reg__
 3514 1416 1092 0000 		sts count_lost_superframe+3,__zero_reg__
 3515               	.L107:
 544:ServerLLDN.c  **** 			}
 545:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 3516               		.loc 6 545 0
 3517 141a 60E0      		ldi r22,lo8(gs(appDataInd))
 3518 141c 70E0      		ldi r23,hi8(gs(appDataInd))
 3519 141e 81E0      		ldi r24,lo8(1)
 3520 1420 0E94 0000 		call NWK_OpenEndpoint
 546:ServerLLDN.c  **** 	}
 3521               		.loc 6 546 0
 3522 1424 0000      		nop
 3523               	/* epilogue start */
 3524 1426 2696      		adiw r28,6
 3525 1428 0FB6      		in __tmp_reg__,__SREG__
 3526 142a F894      		cli
 3527 142c DEBF      		out __SP_H__,r29
 3528 142e 0FBE      		out __SREG__,__tmp_reg__
 3529 1430 CDBF      		out __SP_L__,r28
 3530 1432 DF91      		pop r29
 3531 1434 CF91      		pop r28
 3532 1436 1F91      		pop r17
 3533 1438 0F91      		pop r16
 3534 143a FF90      		pop r15
 3535 143c EF90      		pop r14
 3536 143e DF90      		pop r13
 3537 1440 CF90      		pop r12
 3538 1442 BF90      		pop r11
 3539 1444 AF90      		pop r10
 3540 1446 9F90      		pop r9
 3541 1448 8F90      		pop r8
 3542 144a 0895      		ret
 3543               		.cfi_endproc
 3544               	.LFE145:
 3547               	appInit:
 3548               	.LFB146:
 547:ServerLLDN.c  **** 
 548:ServerLLDN.c  **** #else 
 549:ServerLLDN.c  **** 	uint8_t payloadSize = 50;
 550:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 551:ServerLLDN.c  **** 	uint8_t n = 0;
 552:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 553:ServerLLDN.c  **** 
 554:ServerLLDN.c  **** 
 555:ServerLLDN.c  **** 	
 556:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t rec_beacon;
 557:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 558:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 559:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 560:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 50,
 561:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 562:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 563:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 564:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 565:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 50,
 566:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 567:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 568:ServerLLDN.c  **** 												 
 569:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqDiscResponse = { .dstAddr = 0,
 570:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 571:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 572:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 573:ServerLLDN.c  **** 									.data = (uint8_t*)&msgDiscResponse,
 574:ServerLLDN.c  **** 									.size = sizeof(msgDiscResponse)};
 575:ServerLLDN.c  **** 	
 576:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqConfigStatus = { .dstAddr =0,
 577:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 578:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 579:ServerLLDN.c  **** 									.options = NWK_OPT_MAC_COMMAND,
 580:ServerLLDN.c  **** 									.data = (uint8_t*)&msgConfigStatus,
 581:ServerLLDN.c  **** 									.size = sizeof(msgConfigStatus)};
 582:ServerLLDN.c  **** 		
 583:ServerLLDN.c  **** 	static NWK_DataReq_t msgReqData = { .dstAddr =0,
 584:ServerLLDN.c  **** 									.dstEndpoint = APP_COMMAND_ENDPOINT,
 585:ServerLLDN.c  **** 									.srcEndpoint = APP_COMMAND_ENDPOINT,
 586:ServerLLDN.c  **** 									.options = NWK_OPT_LLDN_DATA,
 587:ServerLLDN.c  **** 									.data = (uint8_t*)&data_payload,
 588:ServerLLDN.c  **** 									.size = sizeof(data_payload)};
 589:ServerLLDN.c  **** 
 590:ServerLLDN.c  **** 	static bool ack_received = false;
 591:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 592:ServerLLDN.c  **** 	bool associated = 0;
 593:ServerLLDN.c  **** 	int ts_time;
 594:ServerLLDN.c  **** 	uint8_t STATE = DISC_MODE;
 595:ServerLLDN.c  **** 	int tmr_error = 0;
 596:ServerLLDN.c  **** 	float delta_error = 0;
 597:ServerLLDN.c  **** 	bool beacon_tmr = false;
 598:ServerLLDN.c  **** 	uint32_t be_read = 0;
 599:ServerLLDN.c  **** 	uint32_t tmr_read= 0;
 600:ServerLLDN.c  **** 	int msg_wait_time;
 601:ServerLLDN.c  **** 	int ok_seq = -1;
 602:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 603:ServerLLDN.c  **** 	{
 604:ServerLLDN.c  **** 		appSendData();
 605:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 606:ServerLLDN.c  **** 			timer_stop();
 607:ServerLLDN.c  **** 		#else 
 608:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC1);
 609:ServerLLDN.c  **** 		#endif
 610:ServerLLDN.c  **** 	
 611:ServerLLDN.c  **** 	}
 612:ServerLLDN.c  **** 
 613:ServerLLDN.c  **** 	static void node_time_handler(void)
 614:ServerLLDN.c  **** 	{
 615:ServerLLDN.c  **** 		beacon_tmr = true;
 616:ServerLLDN.c  **** 		tmr_read = macsc_read_count();
 617:ServerLLDN.c  **** 		return;
 618:ServerLLDN.c  **** 	}
 619:ServerLLDN.c  **** 	
 620:ServerLLDN.c  **** 	
 621:ServerLLDN.c  **** 	static void disc_time_hndlr(void)
 622:ServerLLDN.c  **** 	{
 623:ServerLLDN.c  **** 		printf("\nDisc");
 624:ServerLLDN.c  **** 			NWK_DataReq(&msgReqDiscResponse);
 625:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 626:ServerLLDN.c  **** 		
 627:ServerLLDN.c  **** 	}
 628:ServerLLDN.c  **** 	
 629:ServerLLDN.c  **** 	static void config_time_hndlr(void)
 630:ServerLLDN.c  **** 	{
 631:ServerLLDN.c  **** 		if(ack_received)
 632:ServerLLDN.c  **** 		{
 633:ServerLLDN.c  **** 			NWK_DataReq(&msgReqConfigStatus);
 634:ServerLLDN.c  **** 			ack_received = false;
 635:ServerLLDN.c  **** 		}
 636:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);
 637:ServerLLDN.c  **** 		
 638:ServerLLDN.c  **** 	}
 639:ServerLLDN.c  **** 	
 640:ServerLLDN.c  **** 		
 641:ServerLLDN.c  **** 	static void online_time_hndlr(void)
 642:ServerLLDN.c  **** 	{
 643:ServerLLDN.c  **** 		printf("\ndata_msg");
 644:ServerLLDN.c  **** 		NWK_DataReq(&msgReqData);
 645:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(0);		
 646:ServerLLDN.c  **** 	}
 647:ServerLLDN.c  **** 	
 648:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 649:ServerLLDN.c  **** 	{
 650:ServerLLDN.c  **** 		NwkFrameBeaconHeaderLLDN_t *tmp_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 651:ServerLLDN.c  **** 		rec_beacon = *tmp_beacon;
 652:ServerLLDN.c  **** 		PanId = tmp_beacon->PanId;
 653:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+ tmp_beacon->TimeSlotSize )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME)
 654:ServerLLDN.c  **** 		printf("\nBE %f", tTS);
 655:ServerLLDN.c  **** 		if(rec_beacon.Flags.txState == STATE && rec_beacon.confSeqNumber == 0)
 656:ServerLLDN.c  **** 		{
 657:ServerLLDN.c  **** 			if(STATE == DISC_MODE) 
 658:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(disc_time_hndlr);
 659:ServerLLDN.c  **** 			else if(STATE == CONFIG_MODE)
 660:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(config_time_hndlr);
 661:ServerLLDN.c  **** 			else if(STATE == ONLINE_MODE)
 662:ServerLLDN.c  **** 				macsc_set_cmp1_int_cb(online_time_hndlr);
 663:ServerLLDN.c  **** 					
 664:ServerLLDN.c  **** 			
 665:ServerLLDN.c  **** 			
 666:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 667:ServerLLDN.c  **** 			{
 668:ServerLLDN.c  **** 				msg_wait_time = (2*rec_beacon.Flags.numBaseMgmtTimeslots + assTimeSlot) * tTS /*+ 80 + 45*assTi
 669:ServerLLDN.c  **** 				printf("msg_wait %d", msg_wait_time);
 670:ServerLLDN.c  **** 			}
 671:ServerLLDN.c  **** 			else	
 672:ServerLLDN.c  **** 				msg_wait_time = tTS * rec_beacon.Flags.numBaseMgmtTimeslots; 
 673:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 674:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, msg_wait_time - 150, MACSC_CC1);
 675:ServerLLDN.c  ****  			macsc_enable_manual_bts();
 676:ServerLLDN.c  **** 			
 677:ServerLLDN.c  **** 		}
 678:ServerLLDN.c  **** 
 679:ServerLLDN.c  **** 		else if (rec_beacon.Flags.txState == RESET_MODE)
 680:ServerLLDN.c  **** 		{
 681:ServerLLDN.c  **** 			PHY_SetTdmaMode(false);
 682:ServerLLDN.c  **** 			ack_received = 0;
 683:ServerLLDN.c  **** 			STATE = DISC_MODE;
 684:ServerLLDN.c  **** 		}
 685:ServerLLDN.c  **** 		return true;
 686:ServerLLDN.c  **** 	}
 687:ServerLLDN.c  **** 	
 688:ServerLLDN.c  **** 	bool check_ack(int addr)
 689:ServerLLDN.c  **** 	{
 690:ServerLLDN.c  **** 		int pos,bit_shift;
 691:ServerLLDN.c  **** 		if(addr == 8)
 692:ServerLLDN.c  **** 		{
 693:ServerLLDN.c  **** 			pos = 0;
 694:ServerLLDN.c  **** 			bit_shift = 0;
 695:ServerLLDN.c  **** 		}
 696:ServerLLDN.c  **** 		else
 697:ServerLLDN.c  **** 		{
 698:ServerLLDN.c  **** 			pos =  addr / 8;
 699:ServerLLDN.c  **** 			bit_shift = 8 - addr % 8;
 700:ServerLLDN.c  **** 		}
 701:ServerLLDN.c  **** 		printf("\n ack rec %hhx ", ackframe->ackFlags[pos]);
 702:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 703:ServerLLDN.c  **** 		{
 704:ServerLLDN.c  **** 			return true;
 705:ServerLLDN.c  **** 		}
 706:ServerLLDN.c  **** 		else
 707:ServerLLDN.c  **** 			return false;
 708:ServerLLDN.c  **** 	}
 709:ServerLLDN.c  **** 	
 710:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 711:ServerLLDN.c  **** 	{
 712:ServerLLDN.c  **** 		#if !MASTER_MACSC
 713:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 714:ServerLLDN.c  **** 		#endif
 715:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 716:ServerLLDN.c  **** 
 717:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 718:ServerLLDN.c  **** 		{
 719:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE && rec_beacon.Flags.txState == ONLINE_MODE)
 720:ServerLLDN.c  **** 			{
 721:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 722:ServerLLDN.c  **** 				if(!ack_received)
 723:ServerLLDN.c  **** 				{
 724:ServerLLDN.c  **** 				
 725:ServerLLDN.c  **** 					int retransmition_slot = 0;
 726:ServerLLDN.c  **** 					
 727:ServerLLDN.c  **** 
 728:ServerLLDN.c  **** 					for(int i = 0; i < assTimeSlot && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 729:ServerLLDN.c  **** 						if( !check_ack(i+1) )
 730:ServerLLDN.c  **** 							retransmition_slot++;
 731:ServerLLDN.c  **** 					
 732:ServerLLDN.c  **** 					
 733:ServerLLDN.c  **** // 					if( retransmition_slot > (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2 - 1)
 734:ServerLLDN.c  **** // 						return false;
 735:ServerLLDN.c  **** 										
 736:ServerLLDN.c  **** 					
 737:ServerLLDN.c  **** 					if(retransmition_slot == 0)
 738:ServerLLDN.c  **** 					{
 739:ServerLLDN.c  **** 						NWK_DataReq(&msgReqData);
 740:ServerLLDN.c  **** 					}
 741:ServerLLDN.c  **** 					else
 742:ServerLLDN.c  **** 					{
 743:ServerLLDN.c  **** 						#if MASTER_MACSC
 744:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 745:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(online_time_hndlr);
 746:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 747:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, tTS * retransmition_slot - 40, MACSC_CC1);
 748:ServerLLDN.c  **** 						#endif
 749:ServerLLDN.c  **** 					}					
 750:ServerLLDN.c  **** 					printf("\nretransmition_slot %d , %f", retransmition_slot, tTS);
 751:ServerLLDN.c  **** 
 752:ServerLLDN.c  **** 				}				
 753:ServerLLDN.c  **** 			}
 754:ServerLLDN.c  **** 			else
 755:ServerLLDN.c  **** 			{
 756:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 757:ServerLLDN.c  **** 				if(STATE == DISC_MODE && ack_received)
 758:ServerLLDN.c  **** 					STATE = CONFIG_MODE;
 759:ServerLLDN.c  **** 			}
 760:ServerLLDN.c  **** 		}
 761:ServerLLDN.c  **** 		return true;
 762:ServerLLDN.c  **** 	}
 763:ServerLLDN.c  **** 	
 764:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 765:ServerLLDN.c  **** 	{
 766:ServerLLDN.c  **** 		#if !MASTER_MACSC
 767:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 768:ServerLLDN.c  **** 		#endif
 769:ServerLLDN.c  **** 		
 770:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 771:ServerLLDN.c  **** 		{
 772:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 773:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 774:ServerLLDN.c  **** 			{
 775:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 776:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 777:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 778:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 779:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 780:ServerLLDN.c  **** 				associated = 1;
 781:ServerLLDN.c  **** 				STATE = ONLINE_MODE;
 782:ServerLLDN.c  **** 				PHY_SetTdmaMode(true);
 783:ServerLLDN.c  **** 				printf("\n asstimeslot %d, tsDuration %hhx", assTimeSlot, n);
 784:ServerLLDN.c  **** 			}
 785:ServerLLDN.c  **** 		}
 786:ServerLLDN.c  **** 		return true;
 787:ServerLLDN.c  **** 	}
 788:ServerLLDN.c  **** 
 789:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 790:ServerLLDN.c  **** 	{
 791:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 792:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 793:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 794:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 795:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 796:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 797:ServerLLDN.c  **** 	}
 798:ServerLLDN.c  **** 	
 799:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 800:ServerLLDN.c  **** 	{		
 801:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 802:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 803:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 804:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 805:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 806:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 807:ServerLLDN.c  **** 	}
 808:ServerLLDN.c  **** 	
 809:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 810:ServerLLDN.c  **** 	{
 811:ServerLLDN.c  **** 		
 812:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 813:ServerLLDN.c  **** 
 814:ServerLLDN.c  **** 	
 815:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 816:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 817:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 818:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 819:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 820:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 821:ServerLLDN.c  **** 	}
 822:ServerLLDN.c  **** 	
 823:ServerLLDN.c  **** 	
 824:ServerLLDN.c  **** #endif // APP_COORDINATOR
 825:ServerLLDN.c  **** 
 826:ServerLLDN.c  **** static void appInit(void)
 827:ServerLLDN.c  **** {
 3549               		.loc 6 827 0
 3550               		.cfi_startproc
 3551 144c CF93      		push r28
 3552               	.LCFI117:
 3553               		.cfi_def_cfa_offset 3
 3554               		.cfi_offset 28, -2
 3555 144e DF93      		push r29
 3556               	.LCFI118:
 3557               		.cfi_def_cfa_offset 4
 3558               		.cfi_offset 29, -3
 3559 1450 CDB7      		in r28,__SP_L__
 3560 1452 DEB7      		in r29,__SP_H__
 3561               	.LCFI119:
 3562               		.cfi_def_cfa_register 28
 3563               	/* prologue: function */
 3564               	/* frame size = 0 */
 3565               	/* stack size = 2 */
 3566               	.L__stack_usage = 2
 828:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 3567               		.loc 6 828 0
 3568 1454 80E0      		ldi r24,0
 3569 1456 90E0      		ldi r25,0
 3570 1458 0E94 0000 		call NWK_SetAddr
 829:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 3571               		.loc 6 829 0
 3572 145c 8FE0      		ldi r24,lo8(15)
 3573 145e 0E94 0000 		call PHY_SetChannel
 830:ServerLLDN.c  **** 	PHY_SetRxState(true);
 3574               		.loc 6 830 0
 3575 1462 81E0      		ldi r24,lo8(1)
 3576 1464 0E94 0000 		call PHY_SetRxState
 831:ServerLLDN.c  **** 		
 832:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 833:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 834:ServerLLDN.c  **** // 		tmrDelay.interval = 1;
 835:ServerLLDN.c  **** // 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 836:ServerLLDN.c  **** // 		tmrDelay.handler = tmrDelayHandler;
 837:ServerLLDN.c  **** // 	  
 838:ServerLLDN.c  **** 		/* 
 839:ServerLLDN.c  **** 		* Disable CSMA/CA
 840:ServerLLDN.c  **** 		* Disable auto ACK
 841:ServerLLDN.c  **** 		*/
 842:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 3577               		.loc 6 842 0
 3578 1468 8EEF      		ldi r24,lo8(-2)
 3579 146a 9AEC      		ldi r25,lo8(-54)
 3580 146c 0E94 0000 		call NWK_SetPanId
 843:ServerLLDN.c  **** 		PanId = APP_PANID;
 3581               		.loc 6 843 0
 3582 1470 8EEF      		ldi r24,lo8(-2)
 3583 1472 8093 0000 		sts PanId,r24
 844:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 3584               		.loc 6 844 0
 3585 1476 8EEF      		ldi r24,lo8(-2)
 3586 1478 8093 0000 		sts ACKFrame,r24
 845:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 3587               		.loc 6 845 0
 3588 147c 81E0      		ldi r24,lo8(1)
 3589 147e 0E94 0000 		call PHY_SetTdmaMode
 846:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 3590               		.loc 6 846 0
 3591 1482 60E0      		ldi r22,lo8(gs(appCommandInd))
 3592 1484 70E0      		ldi r23,hi8(gs(appCommandInd))
 3593 1486 83E0      		ldi r24,lo8(3)
 3594 1488 0E94 0000 		call NWK_OpenEndpoint
 847:ServerLLDN.c  **** 	#else
 848:ServerLLDN.c  **** 		appPrepareDiscoverResponse();	
 849:ServerLLDN.c  **** 		/*
 850:ServerLLDN.c  **** 		 * Enable CSMA/CA
 851:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 852:ServerLLDN.c  **** 		 */
 853:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 854:ServerLLDN.c  **** 		PHY_SetOptimizedCSMAValues();
 855:ServerLLDN.c  **** 		
 856:ServerLLDN.c  **** 		
 857:ServerLLDN.c  **** 		
 858:ServerLLDN.c  **** 		payloadSize = 127;
 859:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 860:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 861:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 862:ServerLLDN.c  **** 		/*
 863:ServerLLDN.c  **** 		* Configure interrupts callback functions
 864:ServerLLDN.c  **** 		*/
 865:ServerLLDN.c  **** 		
 866:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 867:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 3595               		.loc 6 867 0
 3596 148c 81E0      		ldi r24,lo8(1)
 3597 148e 0E94 0000 		call PHY_SetPromiscuousMode
 868:ServerLLDN.c  **** 
 869:ServerLLDN.c  **** }
 3598               		.loc 6 869 0
 3599 1492 0000      		nop
 3600               	/* epilogue start */
 3601 1494 DF91      		pop r29
 3602 1496 CF91      		pop r28
 3603 1498 0895      		ret
 3604               		.cfi_endproc
 3605               	.LFE146:
 3607               		.section	.rodata
 3608               	.LC2:
 3609 000b 0A25 642C 		.string	"\n%d, %d"
 3609      2025 6400 
 3610               	.LC3:
 3611 0013 0A0A 204D 		.string	"\n\n M\351tricas (%d Ciclos):\n"
 3611      E974 7269 
 3611      6361 7320 
 3611      2825 6420 
 3611      4369 636C 
 3612               	.LC4:
 3613 002d 0A41 6464 		.string	"\nAddrs , %hhx"
 3613      7273 202C 
 3613      2025 6868 
 3613      7800 
 3614               	.LC5:
 3615 003b 0A50 4C52 		.string	"\nPLR ,  %.3f"
 3615      202C 2020 
 3615      252E 3366 
 3615      00
 3616               	.LC6:
 3617 0048 0A50 4552 		.string	"\nPER ,  %.3f"
 3617      202C 2020 
 3617      252E 3366 
 3617      00
 3618               	.LC7:
 3619 0055 0A52 7373 		.string	"\nRssi M\351dio , %f\n"
 3619      6920 4DE9 
 3619      6469 6F20 
 3619      2C20 2566 
 3619      0A00 
 3620               	.LC8:
 3621 0067 0A50 4C52 		.string	"\nPLR , %.3f\nPER , %.3f, nodos associados %d"
 3621      202C 2025 
 3621      2E33 660A 
 3621      5045 5220 
 3621      2C20 252E 
 3622               		.text
 3624               	APP_TaskHandler:
 3625               	.LFB147:
 870:ServerLLDN.c  **** 
 871:ServerLLDN.c  **** static void APP_TaskHandler(void)
 872:ServerLLDN.c  **** {
 3626               		.loc 6 872 0
 3627               		.cfi_startproc
 3628 149a CF92      		push r12
 3629               	.LCFI120:
 3630               		.cfi_def_cfa_offset 3
 3631               		.cfi_offset 12, -2
 3632 149c DF92      		push r13
 3633               	.LCFI121:
 3634               		.cfi_def_cfa_offset 4
 3635               		.cfi_offset 13, -3
 3636 149e EF92      		push r14
 3637               	.LCFI122:
 3638               		.cfi_def_cfa_offset 5
 3639               		.cfi_offset 14, -4
 3640 14a0 FF92      		push r15
 3641               	.LCFI123:
 3642               		.cfi_def_cfa_offset 6
 3643               		.cfi_offset 15, -5
 3644 14a2 CF93      		push r28
 3645               	.LCFI124:
 3646               		.cfi_def_cfa_offset 7
 3647               		.cfi_offset 28, -6
 3648 14a4 DF93      		push r29
 3649               	.LCFI125:
 3650               		.cfi_def_cfa_offset 8
 3651               		.cfi_offset 29, -7
 3652 14a6 CDB7      		in r28,__SP_L__
 3653 14a8 DEB7      		in r29,__SP_H__
 3654               	.LCFI126:
 3655               		.cfi_def_cfa_register 28
 3656 14aa 6097      		sbiw r28,16
 3657               	.LCFI127:
 3658               		.cfi_def_cfa_offset 24
 3659 14ac 0FB6      		in __tmp_reg__,__SREG__
 3660 14ae F894      		cli
 3661 14b0 DEBF      		out __SP_H__,r29
 3662 14b2 0FBE      		out __SREG__,__tmp_reg__
 3663 14b4 CDBF      		out __SP_L__,r28
 3664               	/* prologue: function */
 3665               	/* frame size = 16 */
 3666               	/* stack size = 22 */
 3667               	.L__stack_usage = 22
 873:ServerLLDN.c  **** 	switch (appState){
 3668               		.loc 6 873 0
 3669 14b6 8091 0000 		lds r24,appState
 3670 14ba 882F      		mov r24,r24
 3671 14bc 90E0      		ldi r25,0
 3672 14be 8230      		cpi r24,2
 3673 14c0 9105      		cpc r25,__zero_reg__
 3674 14c2 01F0      		breq .L111
 3675 14c4 8330      		cpi r24,3
 3676 14c6 9105      		cpc r25,__zero_reg__
 3677 14c8 01F0      		breq .L112
 3678 14ca 892B      		or r24,r25
 3679 14cc 01F0      		breq .L113
 874:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 875:ServerLLDN.c  **** 		{
 876:ServerLLDN.c  **** 			appInit();
 877:ServerLLDN.c  **** 			#if APP_COORDINATOR
 878:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 879:ServerLLDN.c  **** 			#else
 880:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 881:ServerLLDN.c  **** 			#endif
 882:ServerLLDN.c  **** 			break;
 883:ServerLLDN.c  **** 		}
 884:ServerLLDN.c  **** 		case APP_STATE_SEND:
 885:ServerLLDN.c  **** 		{
 886:ServerLLDN.c  **** 			appSendData();
 887:ServerLLDN.c  **** 			#if APP_COORDINATOR
 888:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 889:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 890:ServerLLDN.c  **** 			#else
 891:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 892:ServerLLDN.c  **** 			#endif
 893:ServerLLDN.c  **** 			break;
 894:ServerLLDN.c  **** 		}
 895:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 896:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 897:ServerLLDN.c  **** 		{
 898:ServerLLDN.c  **** 			switch(appPanState)
 899:ServerLLDN.c  **** 			{
 900:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 901:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 902:ServerLLDN.c  **** 				{
 903:ServerLLDN.c  **** 					appPanReset();
 904:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 905:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 906:ServerLLDN.c  **** 					cycles_counter = 0;
 907:ServerLLDN.c  **** 					break;
 908:ServerLLDN.c  **** 				}
 909:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 910:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 911:ServerLLDN.c  **** 				{
 912:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 913:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 914:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 915:ServerLLDN.c  **** 					 */
 916:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 10)
 917:ServerLLDN.c  **** 					{	
 918:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 919:ServerLLDN.c  **** 						counter_associados = 0;
 920:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 921:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 922:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 923:ServerLLDN.c  **** 						msgReq.options = 0;
 924:ServerLLDN.c  **** 						
 925:ServerLLDN.c  **** 						/* reseting ack bitmap */
 926:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 927:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 928:ServerLLDN.c  **** 						ACKFrame_size = 0;
 929:ServerLLDN.c  **** 						accepting_requests = 0;
 930:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 931:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 932:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 933:ServerLLDN.c  **** 					}
 934:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 935:ServerLLDN.c  **** 					else 
 936:ServerLLDN.c  **** 					{
 937:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 938:ServerLLDN.c  **** 						appPanDiscInit();
 939:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 940:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 941:ServerLLDN.c  **** 					}
 942:ServerLLDN.c  **** 					break;
 943:ServerLLDN.c  **** 				}
 944:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 945:ServerLLDN.c  **** 				{
 946:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 947:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 948:ServerLLDN.c  **** 					msgReq.data = NULL;
 949:ServerLLDN.c  **** 					msgReq.size = 0;
 950:ServerLLDN.c  **** 					
 951:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 952:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 953:ServerLLDN.c  **** 					break;
 954:ServerLLDN.c  **** 				}
 955:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 956:ServerLLDN.c  **** 				{
 957:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 958:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 959:ServerLLDN.c  **** 					 */
 960:ServerLLDN.c  **** 					appPanPrepareACK();
 961:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 962:ServerLLDN.c  **** 					// SYS_TimerStart(&tmrDelay);
 963:ServerLLDN.c  **** 					
 964:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 965:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 966:ServerLLDN.c  **** 					break;
 967:ServerLLDN.c  **** 				}
 968:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 969:ServerLLDN.c  **** 				{
 970:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 971:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 972:ServerLLDN.c  **** 					msgReq.data = NULL;
 973:ServerLLDN.c  **** 					msgReq.size = 0;
 974:ServerLLDN.c  **** 					
 975:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 976:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 977:ServerLLDN.c  **** 					break;
 978:ServerLLDN.c  **** 
 979:ServerLLDN.c  **** 				}
 980:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 981:ServerLLDN.c  **** 				{
 982:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 983:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 984:ServerLLDN.c  **** 					msgReq.data = NULL;
 985:ServerLLDN.c  **** 					msgReq.size = 0;
 986:ServerLLDN.c  **** 					
 987:ServerLLDN.c  **** 					counter_delay_msg = 0;
 988:ServerLLDN.c  **** 					
 989:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 990:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 991:ServerLLDN.c  **** 					
 992:ServerLLDN.c  **** 					break;
 993:ServerLLDN.c  **** 				}
 994:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 995:ServerLLDN.c  **** 				{
 996:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 997:ServerLLDN.c  **** 					{
 998:ServerLLDN.c  **** 						if(CopyToConfigRequest())
 999:ServerLLDN.c  **** 						{
1000:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
1001:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
1002:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
1003:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
1004:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
1005:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
1006:ServerLLDN.c  **** 						// Delay between messages
1007:ServerLLDN.c  **** 						}
1008:ServerLLDN.c  **** 						else
1009:ServerLLDN.c  **** 						{
1010:ServerLLDN.c  **** 							msgReq.options = 0;
1011:ServerLLDN.c  **** 						}
1012:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
1013:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
1014:ServerLLDN.c  **** 						macsc_enable_manual_bts();
1015:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
1016:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
1017:ServerLLDN.c  **** 						
1018:ServerLLDN.c  **** 						counter_associados++;
1019:ServerLLDN.c  **** 					}
1020:ServerLLDN.c  **** 					else
1021:ServerLLDN.c  **** 					{
1022:ServerLLDN.c  **** 						msgReq.options = 0;
1023:ServerLLDN.c  **** 
1024:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
1025:ServerLLDN.c  **** 						{
1026:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
1027:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
1028:ServerLLDN.c  **** 							macsc_enable_manual_bts();
1029:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
1030:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
1031:ServerLLDN.c  **** 						}
1032:ServerLLDN.c  **** 						
1033:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
1034:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
1035:ServerLLDN.c  **** 					}
1036:ServerLLDN.c  **** 					break;
1037:ServerLLDN.c  **** 				}
1038:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
1039:ServerLLDN.c  **** 				{
1040:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
1041:ServerLLDN.c  **** 					msgReq.data = NULL;
1042:ServerLLDN.c  **** 					msgReq.size = 0;
1043:ServerLLDN.c  **** 					
1044:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
1045:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
1046:ServerLLDN.c  **** 					cycles_counter++;	
1047:ServerLLDN.c  **** 					
1048:ServerLLDN.c  **** 					break;
1049:ServerLLDN.c  **** 				}
1050:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
1051:ServerLLDN.c  **** 				{
1052:ServerLLDN.c  **** 
1053:ServerLLDN.c  **** 					if(cycles_counter != 0)
1054:ServerLLDN.c  **** 					{
1055:ServerLLDN.c  **** 						appPanOnlineInit();
1056:ServerLLDN.c  **** 						
1057:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1058:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1059:ServerLLDN.c  **** 						
1060:ServerLLDN.c  **** 						cycles_counter--;
1061:ServerLLDN.c  **** 					}
1062:ServerLLDN.c  **** 					else
1063:ServerLLDN.c  **** 					{
1064:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
1065:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
1066:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
1067:ServerLLDN.c  **** 						
1068:ServerLLDN.c  **** 						printf("\n\n Mtricas (%d Ciclos):\n", NUMERO_CICLOS_ONLINE -1);
1069:ServerLLDN.c  **** 						int total_msg = 0;
1070:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
1071:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
1072:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
1073:ServerLLDN.c  **** 						{
1074:ServerLLDN.c  **** 							printf("\nAddrs , %hhx", nodes_info_arr[i].mac_addr);
1075:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1076:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
1077:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
1078:ServerLLDN.c  **** 							
1079:ServerLLDN.c  **** 							total_msg = total_msg + nodes_info_arr[i].msg_rec;
1080:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
1081:ServerLLDN.c  **** 						}
1082:ServerLLDN.c  **** 						if(assTimeSlot > 0 && total_msg > 0)
1083:ServerLLDN.c  **** 						{
1084:ServerLLDN.c  **** 							PLR = 1 - total_msg / expected_messages;
1085:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
1086:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f, nodos associados %d", PLR, PER, assTimeSlot);
1087:ServerLLDN.c  **** 							
1088:ServerLLDN.c  **** 						}
1089:ServerLLDN.c  **** 					}
1090:ServerLLDN.c  **** 					break;
1091:ServerLLDN.c  **** 				}
1092:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
1093:ServerLLDN.c  **** 				{
1094:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
1095:ServerLLDN.c  **** 					{
1096:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
1097:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
1098:ServerLLDN.c  **** 					}
1099:ServerLLDN.c  **** 					retransmit_ts_array_counter = 0;
1100:ServerLLDN.c  **** 					ACKFrame_size = 0;
1101:ServerLLDN.c  **** 					
1102:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
1103:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
1104:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
1105:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
1106:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
1107:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
1108:ServerLLDN.c  **** 
1109:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1110:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
1111:ServerLLDN.c  **** 					break;
1112:ServerLLDN.c  **** 				}				
1113:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
1114:ServerLLDN.c  **** 				{
1115:ServerLLDN.c  **** 
1116:ServerLLDN.c  **** 					msgReq.options = 0;
1117:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
1118:ServerLLDN.c  **** 					break;
1119:ServerLLDN.c  **** 				}
1120:ServerLLDN.c  **** 			}
1121:ServerLLDN.c  **** 			break;	
1122:ServerLLDN.c  **** 		}
1123:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
1124:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
1125:ServerLLDN.c  **** 		{
1126:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
1127:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
1128:ServerLLDN.c  **** 			break;
1129:ServerLLDN.c  **** 		}
1130:ServerLLDN.c  **** 		
1131:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
1132:ServerLLDN.c  **** 		{
1133:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
1134:ServerLLDN.c  **** 			if(ack_received && rec_beacon.confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
1135:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
1136:ServerLLDN.c  **** 			}
1137:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
1138:ServerLLDN.c  **** 			else {
1139:ServerLLDN.c  **** 				#if MASTER_MACSC
1140:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
1141:ServerLLDN.c  **** 				#else
1142:ServerLLDN.c  **** 				timer_stop();
1143:ServerLLDN.c  **** 				#endif
1144:ServerLLDN.c  **** 			}
1145:ServerLLDN.c  **** 			ack_received = 0;
1146:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1147:ServerLLDN.c  **** 			break;
1148:ServerLLDN.c  **** 		}
1149:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
1150:ServerLLDN.c  **** 		{
1151:ServerLLDN.c  **** 			appPrepareDataFrame();
1152:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
1153:ServerLLDN.c  **** 			break;
1154:ServerLLDN.c  **** 		}
1155:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
1156:ServerLLDN.c  **** 		{
1157:ServerLLDN.c  **** 			if(!ack_received)
1158:ServerLLDN.c  **** 			{
1159:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1160:ServerLLDN.c  **** 				
1161:ServerLLDN.c  **** 				int retransmition_slot = 0;
1162:ServerLLDN.c  **** 				
1163:ServerLLDN.c  **** 				
1164:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot - 1 && i < (rec_beacon.NumberOfBaseTimeslotsinSuperframe - 3)/2;
1165:ServerLLDN.c  **** 					if( !check_ack(i) )
1166:ServerLLDN.c  **** 						retransmition_slot++;
1167:ServerLLDN.c  **** 					
1168:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
1169:ServerLLDN.c  **** 				
1170:ServerLLDN.c  **** 				if(retransmition_slot == 0)
1171:ServerLLDN.c  **** 				{
1172:ServerLLDN.c  **** 					appSendData();
1173:ServerLLDN.c  **** 					// appState = APP_STATE_SEND;			
1174:ServerLLDN.c  **** 				}
1175:ServerLLDN.c  **** 				else
1176:ServerLLDN.c  **** 				{
1177:ServerLLDN.c  **** 					#if MASTER_MACSC
1178:ServerLLDN.c  **** 					macsc_enable_manual_bts();
1179:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
1180:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
1181:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
1182:ServerLLDN.c  **** 					#endif
1183:ServerLLDN.c  **** 				}
1184:ServerLLDN.c  **** 				
1185:ServerLLDN.c  **** 			}
1186:ServerLLDN.c  **** 			else
1187:ServerLLDN.c  **** 			{
1188:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1189:ServerLLDN.c  **** 			}
1190:ServerLLDN.c  **** 			
1191:ServerLLDN.c  **** 			break;
1192:ServerLLDN.c  **** 		}
1193:ServerLLDN.c  **** 		#endif
1194:ServerLLDN.c  **** 		default:
1195:ServerLLDN.c  **** 		{
1196:ServerLLDN.c  **** 			break;
 3680               		.loc 6 1196 0
 3681 14ce 00C0      		rjmp .L114
 3682               	.L113:
 876:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3683               		.loc 6 876 0
 3684 14d0 0E94 0000 		call appInit
 878:ServerLLDN.c  **** 			#else
 3685               		.loc 6 878 0
 3686 14d4 83E0      		ldi r24,lo8(3)
 3687 14d6 8093 0000 		sts appState,r24
 882:ServerLLDN.c  **** 		}
 3688               		.loc 6 882 0
 3689 14da 00C0      		rjmp .L114
 3690               	.L111:
 886:ServerLLDN.c  **** 			#if APP_COORDINATOR
 3691               		.loc 6 886 0
 3692 14dc 0E94 0000 		call appSendData
 889:ServerLLDN.c  **** 			#else
 3693               		.loc 6 889 0
 3694 14e0 83E0      		ldi r24,lo8(3)
 3695 14e2 8093 0000 		sts appState,r24
 893:ServerLLDN.c  **** 		}
 3696               		.loc 6 893 0
 3697 14e6 00C0      		rjmp .L114
 3698               	.L112:
 898:ServerLLDN.c  **** 			{
 3699               		.loc 6 898 0
 3700 14e8 8091 0000 		lds r24,appPanState
 3701 14ec 882F      		mov r24,r24
 3702 14ee 90E0      		ldi r25,0
 3703 14f0 092E      		mov __tmp_reg__,r25
 3704 14f2 000C      		lsl r0
 3705 14f4 AA0B      		sbc r26,r26
 3706 14f6 BB0B      		sbc r27,r27
 3707 14f8 40E0      		ldi r20,0
 3708 14fa 50E0      		ldi r21,0
 3709 14fc 2DE0      		ldi r18,lo8(13)
 3710 14fe 30E0      		ldi r19,0
 3711 1500 841B      		sub r24,r20
 3712 1502 950B      		sbc r25,r21
 3713 1504 2817      		cp r18,r24
 3714 1506 3907      		cpc r19,r25
 3715 1508 00F4      		brsh .+2
 3716 150a 00C0      		rjmp .L145
 3717 150c 8050      		subi r24,lo8(-(gs(.L117)))
 3718 150e 9040      		sbci r25,hi8(-(gs(.L117)))
 3719 1510 FC01      		movw r30,r24
 3720 1512 0C94 0000 		jmp __tablejump2__
 3721               		.section	.progmem.gcc_sw_table,"a",@progbits
 3722               		.p2align	1
 3723               	.L117:
 3724 0000 0000      		.word gs(.L116)
 3725 0002 0000      		.word gs(.L118)
 3726 0004 0000      		.word gs(.L119)
 3727 0006 0000      		.word gs(.L120)
 3728 0008 0000      		.word gs(.L121)
 3729 000a 0000      		.word gs(.L122)
 3730 000c 0000      		.word gs(.L123)
 3731 000e 0000      		.word gs(.L124)
 3732 0010 0000      		.word gs(.L125)
 3733 0012 0000      		.word gs(.L145)
 3734 0014 0000      		.word gs(.L145)
 3735 0016 0000      		.word gs(.L145)
 3736 0018 0000      		.word gs(.L126)
 3737 001a 0000      		.word gs(.L127)
 3738               		.text
 3739               	.L116:
 903:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3740               		.loc 6 903 0
 3741 1516 0E94 0000 		call appPanReset
 904:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 3742               		.loc 6 904 0
 3743 151a 81E0      		ldi r24,lo8(1)
 3744 151c 8093 0000 		sts appPanState,r24
 905:ServerLLDN.c  **** 					cycles_counter = 0;
 3745               		.loc 6 905 0
 3746 1520 82E0      		ldi r24,lo8(2)
 3747 1522 8093 0000 		sts appState,r24
 906:ServerLLDN.c  **** 					break;
 3748               		.loc 6 906 0
 3749 1526 1092 0000 		sts cycles_counter,__zero_reg__
 907:ServerLLDN.c  **** 				}
 3750               		.loc 6 907 0
 3751 152a 00C0      		rjmp .L115
 3752               	.L118:
 916:ServerLLDN.c  **** 					{	
 3753               		.loc 6 916 0
 3754 152c 8091 0000 		lds r24,counter_associados
 3755 1530 9091 0000 		lds r25,counter_associados+1
 3756 1534 0C97      		sbiw r24,12
 3757 1536 01F0      		breq .L128
 916:ServerLLDN.c  **** 					{	
 3758               		.loc 6 916 0 is_stmt 0 discriminator 1
 3759 1538 8091 0000 		lds r24,cycles_counter
 3760 153c 8A30      		cpi r24,lo8(10)
 3761 153e 00F4      		brsh .+2
 3762 1540 00C0      		rjmp .L129
 3763               	.L128:
 918:ServerLLDN.c  **** 						counter_associados = 0;
 3764               		.loc 6 918 0 is_stmt 1
 3765 1542 2091 0000 		lds r18,counter_associados
 3766 1546 3091 0000 		lds r19,counter_associados+1
 3767 154a 8091 0000 		lds r24,cycles_counter
 3768 154e 882F      		mov r24,r24
 3769 1550 90E0      		ldi r25,0
 3770 1552 432F      		mov r20,r19
 3771 1554 4F93      		push r20
 3772 1556 2F93      		push r18
 3773 1558 292F      		mov r18,r25
 3774 155a 2F93      		push r18
 3775 155c 8F93      		push r24
 3776 155e 80E0      		ldi r24,lo8(.LC2)
 3777 1560 90E0      		ldi r25,hi8(.LC2)
 3778 1562 892F      		mov r24,r25
 3779 1564 8F93      		push r24
 3780 1566 80E0      		ldi r24,lo8(.LC2)
 3781 1568 90E0      		ldi r25,hi8(.LC2)
 3782 156a 8F93      		push r24
 3783 156c 0E94 0000 		call printf
 3784 1570 0F90      		pop __tmp_reg__
 3785 1572 0F90      		pop __tmp_reg__
 3786 1574 0F90      		pop __tmp_reg__
 3787 1576 0F90      		pop __tmp_reg__
 3788 1578 0F90      		pop __tmp_reg__
 3789 157a 0F90      		pop __tmp_reg__
 919:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3790               		.loc 6 919 0
 3791 157c 1092 0000 		sts counter_associados+1,__zero_reg__
 3792 1580 1092 0000 		sts counter_associados,__zero_reg__
 921:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 3793               		.loc 6 921 0
 3794 1584 81E0      		ldi r24,lo8(1)
 3795 1586 0E94 0000 		call macsc_disable_cmp_int
 922:ServerLLDN.c  **** 						msgReq.options = 0;
 3796               		.loc 6 922 0
 3797 158a 82E0      		ldi r24,lo8(2)
 3798 158c 0E94 0000 		call macsc_disable_cmp_int
 923:ServerLLDN.c  **** 						
 3799               		.loc 6 923 0
 3800 1590 1092 0000 		sts msgReq+9+1,__zero_reg__
 3801 1594 1092 0000 		sts msgReq+9,__zero_reg__
 3802               	.LBB16:
 926:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3803               		.loc 6 926 0
 3804 1598 1A82      		std Y+2,__zero_reg__
 3805 159a 1982      		std Y+1,__zero_reg__
 3806 159c 00C0      		rjmp .L130
 3807               	.L131:
 927:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3808               		.loc 6 927 0 discriminator 3
 3809 159e 8981      		ldd r24,Y+1
 3810 15a0 9A81      		ldd r25,Y+2
 3811 15a2 8050      		subi r24,lo8(-(ACKFrame+1))
 3812 15a4 9040      		sbci r25,hi8(-(ACKFrame+1))
 3813 15a6 FC01      		movw r30,r24
 3814 15a8 1082      		st Z,__zero_reg__
 926:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3815               		.loc 6 926 0 discriminator 3
 3816 15aa 8981      		ldd r24,Y+1
 3817 15ac 9A81      		ldd r25,Y+2
 3818 15ae 0196      		adiw r24,1
 3819 15b0 9A83      		std Y+2,r25
 3820 15b2 8983      		std Y+1,r24
 3821               	.L130:
 926:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3822               		.loc 6 926 0 is_stmt 0 discriminator 1
 3823 15b4 8981      		ldd r24,Y+1
 3824 15b6 9A81      		ldd r25,Y+2
 3825 15b8 8097      		sbiw r24,32
 3826 15ba 04F0      		brlt .L131
 3827               	.LBE16:
 928:ServerLLDN.c  **** 						accepting_requests = 0;
 3828               		.loc 6 928 0 is_stmt 1
 3829 15bc 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3830 15c0 1092 0000 		sts ACKFrame_size,__zero_reg__
 929:ServerLLDN.c  **** 						appState = APP_STATE_ATT_PAN_STATE;
 3831               		.loc 6 929 0
 3832 15c4 1092 0000 		sts accepting_requests+1,__zero_reg__
 3833 15c8 1092 0000 		sts accepting_requests,__zero_reg__
 930:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3834               		.loc 6 930 0
 3835 15cc 83E0      		ldi r24,lo8(3)
 3836 15ce 8093 0000 		sts appState,r24
 931:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3837               		.loc 6 931 0
 3838 15d2 88E0      		ldi r24,lo8(8)
 3839 15d4 8093 0000 		sts appPanState,r24
 932:ServerLLDN.c  **** 					}
 3840               		.loc 6 932 0
 3841 15d8 8DE3      		ldi r24,lo8(61)
 3842 15da 8093 0000 		sts cycles_counter,r24
 942:ServerLLDN.c  **** 				}
 3843               		.loc 6 942 0
 3844 15de 00C0      		rjmp .L115
 3845               	.L129:
 938:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3846               		.loc 6 938 0
 3847 15e0 0E94 0000 		call appPanDiscInit
 939:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3848               		.loc 6 939 0
 3849 15e4 81E0      		ldi r24,lo8(1)
 3850 15e6 8093 0000 		sts appState,r24
 940:ServerLLDN.c  **** 					}
 3851               		.loc 6 940 0
 3852 15ea 82E0      		ldi r24,lo8(2)
 3853 15ec 8093 0000 		sts appPanState,r24
 942:ServerLLDN.c  **** 				}
 3854               		.loc 6 942 0
 3855 15f0 00C0      		rjmp .L115
 3856               	.L119:
 947:ServerLLDN.c  **** 					msgReq.data = NULL;
 3857               		.loc 6 947 0
 3858 15f2 80E4      		ldi r24,lo8(64)
 3859 15f4 99E0      		ldi r25,lo8(9)
 3860 15f6 9093 0000 		sts msgReq+9+1,r25
 3861 15fa 8093 0000 		sts msgReq+9,r24
 948:ServerLLDN.c  **** 					msgReq.size = 0;
 3862               		.loc 6 948 0
 3863 15fe 1092 0000 		sts msgReq+13+1,__zero_reg__
 3864 1602 1092 0000 		sts msgReq+13,__zero_reg__
 949:ServerLLDN.c  **** 					
 3865               		.loc 6 949 0
 3866 1606 1092 0000 		sts msgReq+15,__zero_reg__
 951:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3867               		.loc 6 951 0
 3868 160a 81E0      		ldi r24,lo8(1)
 3869 160c 8093 0000 		sts appState,r24
 952:ServerLLDN.c  **** 					break;
 3870               		.loc 6 952 0
 3871 1610 83E0      		ldi r24,lo8(3)
 3872 1612 8093 0000 		sts appPanState,r24
 953:ServerLLDN.c  **** 				}
 3873               		.loc 6 953 0
 3874 1616 00C0      		rjmp .L115
 3875               	.L120:
 960:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 3876               		.loc 6 960 0
 3877 1618 0E94 0000 		call appPanPrepareACK
 961:ServerLLDN.c  **** 					// SYS_TimerStart(&tmrDelay);
 3878               		.loc 6 961 0
 3879 161c 82E0      		ldi r24,lo8(2)
 3880 161e 8093 0000 		sts appState,r24
 964:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3881               		.loc 6 964 0
 3882 1622 84E0      		ldi r24,lo8(4)
 3883 1624 8093 0000 		sts appPanState,r24
 965:ServerLLDN.c  **** 					break;
 3884               		.loc 6 965 0
 3885 1628 81E0      		ldi r24,lo8(1)
 3886 162a 8093 0000 		sts appState,r24
 966:ServerLLDN.c  **** 				}
 3887               		.loc 6 966 0
 3888 162e 00C0      		rjmp .L115
 3889               	.L121:
 971:ServerLLDN.c  **** 					msgReq.data = NULL;
 3890               		.loc 6 971 0
 3891 1630 80E4      		ldi r24,lo8(64)
 3892 1632 92E0      		ldi r25,lo8(2)
 3893 1634 9093 0000 		sts msgReq+9+1,r25
 3894 1638 8093 0000 		sts msgReq+9,r24
 972:ServerLLDN.c  **** 					msgReq.size = 0;
 3895               		.loc 6 972 0
 3896 163c 1092 0000 		sts msgReq+13+1,__zero_reg__
 3897 1640 1092 0000 		sts msgReq+13,__zero_reg__
 973:ServerLLDN.c  **** 					
 3898               		.loc 6 973 0
 3899 1644 1092 0000 		sts msgReq+15,__zero_reg__
 975:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3900               		.loc 6 975 0
 3901 1648 81E0      		ldi r24,lo8(1)
 3902 164a 8093 0000 		sts appState,r24
 976:ServerLLDN.c  **** 					break;
 3903               		.loc 6 976 0
 3904 164e 86E0      		ldi r24,lo8(6)
 3905 1650 8093 0000 		sts appPanState,r24
 977:ServerLLDN.c  **** 
 3906               		.loc 6 977 0
 3907 1654 00C0      		rjmp .L115
 3908               	.L123:
 983:ServerLLDN.c  **** 					msgReq.data = NULL;
 3909               		.loc 6 983 0
 3910 1656 80E4      		ldi r24,lo8(64)
 3911 1658 9AE0      		ldi r25,lo8(10)
 3912 165a 9093 0000 		sts msgReq+9+1,r25
 3913 165e 8093 0000 		sts msgReq+9,r24
 984:ServerLLDN.c  **** 					msgReq.size = 0;
 3914               		.loc 6 984 0
 3915 1662 1092 0000 		sts msgReq+13+1,__zero_reg__
 3916 1666 1092 0000 		sts msgReq+13,__zero_reg__
 985:ServerLLDN.c  **** 					
 3917               		.loc 6 985 0
 3918 166a 1092 0000 		sts msgReq+15,__zero_reg__
 987:ServerLLDN.c  **** 					
 3919               		.loc 6 987 0
 3920 166e 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3921 1672 1092 0000 		sts counter_delay_msg,__zero_reg__
 989:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3922               		.loc 6 989 0
 3923 1676 81E0      		ldi r24,lo8(1)
 3924 1678 8093 0000 		sts appState,r24
 990:ServerLLDN.c  **** 					
 3925               		.loc 6 990 0
 3926 167c 85E0      		ldi r24,lo8(5)
 3927 167e 8093 0000 		sts appPanState,r24
 992:ServerLLDN.c  **** 				}
 3928               		.loc 6 992 0
 3929 1682 00C0      		rjmp .L115
 3930               	.L122:
 996:ServerLLDN.c  **** 					{
 3931               		.loc 6 996 0
 3932 1684 8091 0000 		lds r24,conf_req_list
 3933 1688 9091 0000 		lds r25,conf_req_list+1
 3934 168c 892B      		or r24,r25
 3935 168e 01F0      		breq .L133
 998:ServerLLDN.c  **** 						{
 3936               		.loc 6 998 0
 3937 1690 0E94 0000 		call CopyToConfigRequest
 3938 1694 8823      		tst r24
 3939 1696 01F0      		breq .L134
1000:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3940               		.loc 6 1000 0
 3941 1698 80E0      		ldi r24,0
 3942 169a 90E8      		ldi r25,lo8(-128)
 3943 169c 9093 0000 		sts msgReq+9+1,r25
 3944 16a0 8093 0000 		sts msgReq+9,r24
1001:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3945               		.loc 6 1001 0
 3946 16a4 80E0      		ldi r24,lo8(config_request_frame)
 3947 16a6 90E0      		ldi r25,hi8(config_request_frame)
 3948 16a8 9093 0000 		sts msgReq+13+1,r25
 3949 16ac 8093 0000 		sts msgReq+13,r24
1002:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3950               		.loc 6 1002 0
 3951 16b0 86E0      		ldi r24,lo8(6)
 3952 16b2 8093 0000 		sts msgReq+15,r24
1003:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3953               		.loc 6 1003 0
 3954 16b6 81E0      		ldi r24,lo8(1)
 3955 16b8 8093 0000 		sts appState,r24
1004:ServerLLDN.c  **** // 						printf("  assts %d %hhx",config_request_frame.assTimeSlot,  config_request_frame.macAddr);
 3956               		.loc 6 1004 0
 3957 16bc 85E0      		ldi r24,lo8(5)
 3958 16be 8093 0000 		sts appPanState,r24
 3959 16c2 00C0      		rjmp .L135
 3960               	.L134:
1010:ServerLLDN.c  **** 						}
 3961               		.loc 6 1010 0
 3962 16c4 1092 0000 		sts msgReq+9+1,__zero_reg__
 3963 16c8 1092 0000 		sts msgReq+9,__zero_reg__
 3964               	.L135:
1012:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3965               		.loc 6 1012 0
 3966 16cc 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3967 16ce 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3968 16d0 0E94 0000 		call macsc_set_cmp1_int_cb
1013:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3969               		.loc 6 1013 0
 3970 16d4 81E0      		ldi r24,lo8(1)
 3971 16d6 0E94 0000 		call macsc_disable_cmp_int
1014:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3972               		.loc 6 1014 0
 3973 16da 0E94 0000 		call macsc_enable_manual_bts
1015:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3974               		.loc 6 1015 0
 3975 16de 81E0      		ldi r24,lo8(1)
 3976 16e0 0E94 0000 		call macsc_enable_cmp_int
1016:ServerLLDN.c  **** 						
 3977               		.loc 6 1016 0
 3978 16e4 21E0      		ldi r18,lo8(1)
 3979 16e6 4BE4      		ldi r20,lo8(75)
 3980 16e8 50E0      		ldi r21,0
 3981 16ea 60E0      		ldi r22,0
 3982 16ec 70E0      		ldi r23,0
 3983 16ee 81E0      		ldi r24,lo8(1)
 3984 16f0 0E94 0000 		call macsc_use_cmp
1018:ServerLLDN.c  **** 					}
 3985               		.loc 6 1018 0
 3986 16f4 8091 0000 		lds r24,counter_associados
 3987 16f8 9091 0000 		lds r25,counter_associados+1
 3988 16fc 0196      		adiw r24,1
 3989 16fe 9093 0000 		sts counter_associados+1,r25
 3990 1702 8093 0000 		sts counter_associados,r24
1036:ServerLLDN.c  **** 				}
 3991               		.loc 6 1036 0
 3992 1706 00C0      		rjmp .L115
 3993               	.L133:
1022:ServerLLDN.c  **** 
 3994               		.loc 6 1022 0
 3995 1708 1092 0000 		sts msgReq+9+1,__zero_reg__
 3996 170c 1092 0000 		sts msgReq+9,__zero_reg__
1024:ServerLLDN.c  **** 						{
 3997               		.loc 6 1024 0
 3998 1710 8091 0000 		lds r24,counter_delay_msg
 3999 1714 9091 0000 		lds r25,counter_delay_msg+1
 4000 1718 1816      		cp __zero_reg__,r24
 4001 171a 1906      		cpc __zero_reg__,r25
 4002 171c 04F4      		brge .L137
1026:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 4003               		.loc 6 1026 0
 4004 171e 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 4005 1720 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 4006 1722 0E94 0000 		call macsc_set_cmp1_int_cb
1027:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 4007               		.loc 6 1027 0
 4008 1726 81E0      		ldi r24,lo8(1)
 4009 1728 0E94 0000 		call macsc_disable_cmp_int
1028:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 4010               		.loc 6 1028 0
 4011 172c 0E94 0000 		call macsc_enable_manual_bts
1029:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 4012               		.loc 6 1029 0
 4013 1730 81E0      		ldi r24,lo8(1)
 4014 1732 0E94 0000 		call macsc_enable_cmp_int
1030:ServerLLDN.c  **** 						}
 4015               		.loc 6 1030 0
 4016 1736 C090 0000 		lds r12,beaconInterval_association
 4017 173a D090 0000 		lds r13,beaconInterval_association+1
 4018 173e E090 0000 		lds r14,beaconInterval_association+2
 4019 1742 F090 0000 		lds r15,beaconInterval_association+3
 4020 1746 2091 0000 		lds r18,counter_delay_msg
 4021 174a 3091 0000 		lds r19,counter_delay_msg+1
 4022 174e 4BE4      		ldi r20,lo8(75)
 4023 1750 429F      		mul r20,r18
 4024 1752 C001      		movw r24,r0
 4025 1754 439F      		mul r20,r19
 4026 1756 900D      		add r25,r0
 4027 1758 1124      		clr __zero_reg__
 4028 175a 092E      		mov __tmp_reg__,r25
 4029 175c 000C      		lsl r0
 4030 175e AA0B      		sbc r26,r26
 4031 1760 BB0B      		sbc r27,r27
 4032 1762 BC01      		movw r22,r24
 4033 1764 CD01      		movw r24,r26
 4034 1766 0E94 0000 		call __floatsisf
 4035 176a DC01      		movw r26,r24
 4036 176c CB01      		movw r24,r22
 4037 176e 9C01      		movw r18,r24
 4038 1770 AD01      		movw r20,r26
 4039 1772 C701      		movw r24,r14
 4040 1774 B601      		movw r22,r12
 4041 1776 0E94 0000 		call __subsf3
 4042 177a DC01      		movw r26,r24
 4043 177c CB01      		movw r24,r22
 4044 177e BC01      		movw r22,r24
 4045 1780 CD01      		movw r24,r26
 4046 1782 0E94 0000 		call __fixunssfsi
 4047 1786 DC01      		movw r26,r24
 4048 1788 CB01      		movw r24,r22
 4049 178a 21E0      		ldi r18,lo8(1)
 4050 178c AC01      		movw r20,r24
 4051 178e BD01      		movw r22,r26
 4052 1790 81E0      		ldi r24,lo8(1)
 4053 1792 0E94 0000 		call macsc_use_cmp
 4054               	.L137:
1033:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 4055               		.loc 6 1033 0
 4056 1796 83E0      		ldi r24,lo8(3)
 4057 1798 8093 0000 		sts appState,r24
1034:ServerLLDN.c  **** 					}
 4058               		.loc 6 1034 0
 4059 179c 87E0      		ldi r24,lo8(7)
 4060 179e 8093 0000 		sts appPanState,r24
1036:ServerLLDN.c  **** 				}
 4061               		.loc 6 1036 0
 4062 17a2 00C0      		rjmp .L115
 4063               	.L124:
1040:ServerLLDN.c  **** 					msgReq.data = NULL;
 4064               		.loc 6 1040 0
 4065 17a4 80E4      		ldi r24,lo8(64)
 4066 17a6 92E1      		ldi r25,lo8(18)
 4067 17a8 9093 0000 		sts msgReq+9+1,r25
 4068 17ac 8093 0000 		sts msgReq+9,r24
1041:ServerLLDN.c  **** 					msgReq.size = 0;
 4069               		.loc 6 1041 0
 4070 17b0 1092 0000 		sts msgReq+13+1,__zero_reg__
 4071 17b4 1092 0000 		sts msgReq+13,__zero_reg__
1042:ServerLLDN.c  **** 					
 4072               		.loc 6 1042 0
 4073 17b8 1092 0000 		sts msgReq+15,__zero_reg__
1044:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 4074               		.loc 6 1044 0
 4075 17bc 81E0      		ldi r24,lo8(1)
 4076 17be 8093 0000 		sts appState,r24
1045:ServerLLDN.c  **** 					cycles_counter++;	
 4077               		.loc 6 1045 0
 4078 17c2 81E0      		ldi r24,lo8(1)
 4079 17c4 8093 0000 		sts appPanState,r24
1046:ServerLLDN.c  **** 					
 4080               		.loc 6 1046 0
 4081 17c8 8091 0000 		lds r24,cycles_counter
 4082 17cc 8F5F      		subi r24,lo8(-(1))
 4083 17ce 8093 0000 		sts cycles_counter,r24
1048:ServerLLDN.c  **** 				}
 4084               		.loc 6 1048 0
 4085 17d2 00C0      		rjmp .L115
 4086               	.L125:
1053:ServerLLDN.c  **** 					{
 4087               		.loc 6 1053 0
 4088 17d4 8091 0000 		lds r24,cycles_counter
 4089 17d8 8823      		tst r24
 4090 17da 01F0      		breq .L138
1055:ServerLLDN.c  **** 						
 4091               		.loc 6 1055 0
 4092 17dc 0E94 0000 		call appPanOnlineInit
1057:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 4093               		.loc 6 1057 0
 4094 17e0 81E0      		ldi r24,lo8(1)
 4095 17e2 8093 0000 		sts appState,r24
1058:ServerLLDN.c  **** 						
 4096               		.loc 6 1058 0
 4097 17e6 8DE0      		ldi r24,lo8(13)
 4098 17e8 8093 0000 		sts appPanState,r24
1060:ServerLLDN.c  **** 					}
 4099               		.loc 6 1060 0
 4100 17ec 8091 0000 		lds r24,cycles_counter
 4101 17f0 8150      		subi r24,lo8(-(-1))
 4102 17f2 8093 0000 		sts cycles_counter,r24
1090:ServerLLDN.c  **** 				}
 4103               		.loc 6 1090 0
 4104 17f6 00C0      		rjmp .L146
 4105               	.L138:
 4106               	.LBB17:
1064:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 4107               		.loc 6 1064 0
 4108 17f8 81E0      		ldi r24,lo8(1)
 4109 17fa 8093 0000 		sts appState,r24
1065:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 4110               		.loc 6 1065 0
 4111 17fe 8DE0      		ldi r24,lo8(13)
 4112 1800 8093 0000 		sts appPanState,r24
1066:ServerLLDN.c  **** 						
 4113               		.loc 6 1066 0
 4114 1804 81E0      		ldi r24,lo8(1)
 4115 1806 0E94 0000 		call macsc_disable_cmp_int
1068:ServerLLDN.c  **** 						int total_msg = 0;
 4116               		.loc 6 1068 0
 4117 180a 1F92      		push __zero_reg__
 4118 180c 8CE3      		ldi r24,lo8(60)
 4119 180e 8F93      		push r24
 4120 1810 80E0      		ldi r24,lo8(.LC3)
 4121 1812 90E0      		ldi r25,hi8(.LC3)
 4122 1814 892F      		mov r24,r25
 4123 1816 8F93      		push r24
 4124 1818 80E0      		ldi r24,lo8(.LC3)
 4125 181a 90E0      		ldi r25,hi8(.LC3)
 4126 181c 8F93      		push r24
 4127 181e 0E94 0000 		call printf
 4128 1822 0F90      		pop __tmp_reg__
 4129 1824 0F90      		pop __tmp_reg__
 4130 1826 0F90      		pop __tmp_reg__
 4131 1828 0F90      		pop __tmp_reg__
1069:ServerLLDN.c  **** 						float uplink_lost_packets = 0;
 4132               		.loc 6 1069 0
 4133 182a 1C82      		std Y+4,__zero_reg__
 4134 182c 1B82      		std Y+3,__zero_reg__
1070:ServerLLDN.c  **** 						float expected_messages = assTimeSlot * (float)(NUMERO_CICLOS_ONLINE - 1);
 4135               		.loc 6 1070 0
 4136 182e 1D82      		std Y+5,__zero_reg__
 4137 1830 1E82      		std Y+6,__zero_reg__
 4138 1832 1F82      		std Y+7,__zero_reg__
 4139 1834 1886      		std Y+8,__zero_reg__
1071:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 4140               		.loc 6 1071 0
 4141 1836 8091 0000 		lds r24,assTimeSlot
 4142 183a 9091 0000 		lds r25,assTimeSlot+1
 4143 183e 092E      		mov __tmp_reg__,r25
 4144 1840 000C      		lsl r0
 4145 1842 AA0B      		sbc r26,r26
 4146 1844 BB0B      		sbc r27,r27
 4147 1846 BC01      		movw r22,r24
 4148 1848 CD01      		movw r24,r26
 4149 184a 0E94 0000 		call __floatsisf
 4150 184e DC01      		movw r26,r24
 4151 1850 CB01      		movw r24,r22
 4152 1852 20E0      		ldi r18,0
 4153 1854 30E0      		ldi r19,0
 4154 1856 40E7      		ldi r20,lo8(112)
 4155 1858 52E4      		ldi r21,lo8(66)
 4156 185a BC01      		movw r22,r24
 4157 185c CD01      		movw r24,r26
 4158 185e 0E94 0000 		call __mulsf3
 4159 1862 DC01      		movw r26,r24
 4160 1864 CB01      		movw r24,r22
 4161 1866 8D87      		std Y+13,r24
 4162 1868 9E87      		std Y+14,r25
 4163 186a AF87      		std Y+15,r26
 4164 186c B88B      		std Y+16,r27
 4165               	.LBB18:
1072:ServerLLDN.c  **** 						{
 4166               		.loc 6 1072 0
 4167 186e 1A86      		std Y+10,__zero_reg__
 4168 1870 1986      		std Y+9,__zero_reg__
 4169 1872 00C0      		rjmp .L140
 4170               	.L142:
1074:ServerLLDN.c  **** 							printf("\nPLR ,  %.3f", 1 - nodes_info_arr[i].msg_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 4171               		.loc 6 1074 0 discriminator 4
 4172 1874 2985      		ldd r18,Y+9
 4173 1876 3A85      		ldd r19,Y+10
 4174 1878 4AE4      		ldi r20,lo8(74)
 4175 187a 429F      		mul r20,r18
 4176 187c C001      		movw r24,r0
 4177 187e 439F      		mul r20,r19
 4178 1880 900D      		add r25,r0
 4179 1882 1124      		clr __zero_reg__
 4180 1884 8050      		subi r24,lo8(-(nodes_info_arr+1))
 4181 1886 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 4182 1888 FC01      		movw r30,r24
 4183 188a 8081      		ld r24,Z
 4184 188c 9181      		ldd r25,Z+1
 4185 188e 292F      		mov r18,r25
 4186 1890 2F93      		push r18
 4187 1892 8F93      		push r24
 4188 1894 80E0      		ldi r24,lo8(.LC4)
 4189 1896 90E0      		ldi r25,hi8(.LC4)
 4190 1898 892F      		mov r24,r25
 4191 189a 8F93      		push r24
 4192 189c 80E0      		ldi r24,lo8(.LC4)
 4193 189e 90E0      		ldi r25,hi8(.LC4)
 4194 18a0 8F93      		push r24
 4195 18a2 0E94 0000 		call printf
 4196 18a6 0F90      		pop __tmp_reg__
 4197 18a8 0F90      		pop __tmp_reg__
 4198 18aa 0F90      		pop __tmp_reg__
 4199 18ac 0F90      		pop __tmp_reg__
1075:ServerLLDN.c  **** 							printf("\nPER ,  %.3f", nodes_info_arr[i].msg_not_rec / (float)(NUMERO_CICLOS_ONLINE - 1));
 4200               		.loc 6 1075 0 discriminator 4
 4201 18ae 2985      		ldd r18,Y+9
 4202 18b0 3A85      		ldd r19,Y+10
 4203 18b2 4AE4      		ldi r20,lo8(74)
 4204 18b4 429F      		mul r20,r18
 4205 18b6 C001      		movw r24,r0
 4206 18b8 439F      		mul r20,r19
 4207 18ba 900D      		add r25,r0
 4208 18bc 1124      		clr __zero_reg__
 4209 18be 8050      		subi r24,lo8(-(nodes_info_arr+69))
 4210 18c0 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 4211 18c2 FC01      		movw r30,r24
 4212 18c4 8081      		ld r24,Z
 4213 18c6 9181      		ldd r25,Z+1
 4214 18c8 CC01      		movw r24,r24
 4215 18ca A0E0      		ldi r26,0
 4216 18cc B0E0      		ldi r27,0
 4217 18ce BC01      		movw r22,r24
 4218 18d0 CD01      		movw r24,r26
 4219 18d2 0E94 0000 		call __floatunsisf
 4220 18d6 DC01      		movw r26,r24
 4221 18d8 CB01      		movw r24,r22
 4222 18da 20E0      		ldi r18,0
 4223 18dc 30E0      		ldi r19,0
 4224 18de 40E7      		ldi r20,lo8(112)
 4225 18e0 52E4      		ldi r21,lo8(66)
 4226 18e2 BC01      		movw r22,r24
 4227 18e4 CD01      		movw r24,r26
 4228 18e6 0E94 0000 		call __divsf3
 4229 18ea DC01      		movw r26,r24
 4230 18ec CB01      		movw r24,r22
 4231 18ee 9C01      		movw r18,r24
 4232 18f0 AD01      		movw r20,r26
 4233 18f2 60E0      		ldi r22,0
 4234 18f4 70E0      		ldi r23,0
 4235 18f6 80E8      		ldi r24,lo8(-128)
 4236 18f8 9FE3      		ldi r25,lo8(63)
 4237 18fa 0E94 0000 		call __subsf3
 4238 18fe DC01      		movw r26,r24
 4239 1900 CB01      		movw r24,r22
 4240 1902 2B2F      		mov r18,r27
 4241 1904 2F93      		push r18
 4242 1906 2A2F      		mov r18,r26
 4243 1908 2F93      		push r18
 4244 190a 292F      		mov r18,r25
 4245 190c 2F93      		push r18
 4246 190e 8F93      		push r24
 4247 1910 80E0      		ldi r24,lo8(.LC5)
 4248 1912 90E0      		ldi r25,hi8(.LC5)
 4249 1914 892F      		mov r24,r25
 4250 1916 8F93      		push r24
 4251 1918 80E0      		ldi r24,lo8(.LC5)
 4252 191a 90E0      		ldi r25,hi8(.LC5)
 4253 191c 8F93      		push r24
 4254 191e 0E94 0000 		call printf
 4255 1922 0F90      		pop __tmp_reg__
 4256 1924 0F90      		pop __tmp_reg__
 4257 1926 0F90      		pop __tmp_reg__
 4258 1928 0F90      		pop __tmp_reg__
 4259 192a 0F90      		pop __tmp_reg__
 4260 192c 0F90      		pop __tmp_reg__
1076:ServerLLDN.c  **** 							printf("\nRssi Mdio , %f\n", nodes_info_arr[i].average_rssi);
 4261               		.loc 6 1076 0 discriminator 4
 4262 192e 2985      		ldd r18,Y+9
 4263 1930 3A85      		ldd r19,Y+10
 4264 1932 4AE4      		ldi r20,lo8(74)
 4265 1934 429F      		mul r20,r18
 4266 1936 C001      		movw r24,r0
 4267 1938 439F      		mul r20,r19
 4268 193a 900D      		add r25,r0
 4269 193c 1124      		clr __zero_reg__
 4270 193e 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4271 1940 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4272 1942 FC01      		movw r30,r24
 4273 1944 8081      		ld r24,Z
 4274 1946 9181      		ldd r25,Z+1
 4275 1948 CC01      		movw r24,r24
 4276 194a A0E0      		ldi r26,0
 4277 194c B0E0      		ldi r27,0
 4278 194e BC01      		movw r22,r24
 4279 1950 CD01      		movw r24,r26
 4280 1952 0E94 0000 		call __floatunsisf
 4281 1956 DC01      		movw r26,r24
 4282 1958 CB01      		movw r24,r22
 4283 195a 20E0      		ldi r18,0
 4284 195c 30E0      		ldi r19,0
 4285 195e 40E7      		ldi r20,lo8(112)
 4286 1960 52E4      		ldi r21,lo8(66)
 4287 1962 BC01      		movw r22,r24
 4288 1964 CD01      		movw r24,r26
 4289 1966 0E94 0000 		call __divsf3
 4290 196a DC01      		movw r26,r24
 4291 196c CB01      		movw r24,r22
 4292 196e 2B2F      		mov r18,r27
 4293 1970 2F93      		push r18
 4294 1972 2A2F      		mov r18,r26
 4295 1974 2F93      		push r18
 4296 1976 292F      		mov r18,r25
 4297 1978 2F93      		push r18
 4298 197a 8F93      		push r24
 4299 197c 80E0      		ldi r24,lo8(.LC6)
 4300 197e 90E0      		ldi r25,hi8(.LC6)
 4301 1980 892F      		mov r24,r25
 4302 1982 8F93      		push r24
 4303 1984 80E0      		ldi r24,lo8(.LC6)
 4304 1986 90E0      		ldi r25,hi8(.LC6)
 4305 1988 8F93      		push r24
 4306 198a 0E94 0000 		call printf
 4307 198e 0F90      		pop __tmp_reg__
 4308 1990 0F90      		pop __tmp_reg__
 4309 1992 0F90      		pop __tmp_reg__
 4310 1994 0F90      		pop __tmp_reg__
 4311 1996 0F90      		pop __tmp_reg__
 4312 1998 0F90      		pop __tmp_reg__
1077:ServerLLDN.c  **** 							
 4313               		.loc 6 1077 0 discriminator 4
 4314 199a 2985      		ldd r18,Y+9
 4315 199c 3A85      		ldd r19,Y+10
 4316 199e 4AE4      		ldi r20,lo8(74)
 4317 19a0 429F      		mul r20,r18
 4318 19a2 C001      		movw r24,r0
 4319 19a4 439F      		mul r20,r19
 4320 19a6 900D      		add r25,r0
 4321 19a8 1124      		clr __zero_reg__
 4322 19aa 8050      		subi r24,lo8(-(nodes_info_arr+5))
 4323 19ac 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 4324 19ae FC01      		movw r30,r24
 4325 19b0 8081      		ld r24,Z
 4326 19b2 9181      		ldd r25,Z+1
 4327 19b4 A281      		ldd r26,Z+2
 4328 19b6 B381      		ldd r27,Z+3
 4329 19b8 2B2F      		mov r18,r27
 4330 19ba 2F93      		push r18
 4331 19bc 2A2F      		mov r18,r26
 4332 19be 2F93      		push r18
 4333 19c0 292F      		mov r18,r25
 4334 19c2 2F93      		push r18
 4335 19c4 8F93      		push r24
 4336 19c6 80E0      		ldi r24,lo8(.LC7)
 4337 19c8 90E0      		ldi r25,hi8(.LC7)
 4338 19ca 892F      		mov r24,r25
 4339 19cc 8F93      		push r24
 4340 19ce 80E0      		ldi r24,lo8(.LC7)
 4341 19d0 90E0      		ldi r25,hi8(.LC7)
 4342 19d2 8F93      		push r24
 4343 19d4 0E94 0000 		call printf
 4344 19d8 0F90      		pop __tmp_reg__
 4345 19da 0F90      		pop __tmp_reg__
 4346 19dc 0F90      		pop __tmp_reg__
 4347 19de 0F90      		pop __tmp_reg__
 4348 19e0 0F90      		pop __tmp_reg__
 4349 19e2 0F90      		pop __tmp_reg__
1079:ServerLLDN.c  **** 							uplink_lost_packets += nodes_info_arr[i].msg_not_rec;
 4350               		.loc 6 1079 0 discriminator 4
 4351 19e4 2985      		ldd r18,Y+9
 4352 19e6 3A85      		ldd r19,Y+10
 4353 19e8 4AE4      		ldi r20,lo8(74)
 4354 19ea 429F      		mul r20,r18
 4355 19ec C001      		movw r24,r0
 4356 19ee 439F      		mul r20,r19
 4357 19f0 900D      		add r25,r0
 4358 19f2 1124      		clr __zero_reg__
 4359 19f4 8050      		subi r24,lo8(-(nodes_info_arr+69))
 4360 19f6 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 4361 19f8 FC01      		movw r30,r24
 4362 19fa 2081      		ld r18,Z
 4363 19fc 3181      		ldd r19,Z+1
 4364 19fe 8B81      		ldd r24,Y+3
 4365 1a00 9C81      		ldd r25,Y+4
 4366 1a02 820F      		add r24,r18
 4367 1a04 931F      		adc r25,r19
 4368 1a06 9C83      		std Y+4,r25
 4369 1a08 8B83      		std Y+3,r24
1080:ServerLLDN.c  **** 						}
 4370               		.loc 6 1080 0 discriminator 4
 4371 1a0a 2985      		ldd r18,Y+9
 4372 1a0c 3A85      		ldd r19,Y+10
 4373 1a0e 4AE4      		ldi r20,lo8(74)
 4374 1a10 429F      		mul r20,r18
 4375 1a12 C001      		movw r24,r0
 4376 1a14 439F      		mul r20,r19
 4377 1a16 900D      		add r25,r0
 4378 1a18 1124      		clr __zero_reg__
 4379 1a1a 8050      		subi r24,lo8(-(nodes_info_arr+71))
 4380 1a1c 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 4381 1a1e FC01      		movw r30,r24
 4382 1a20 8081      		ld r24,Z
 4383 1a22 9181      		ldd r25,Z+1
 4384 1a24 CC01      		movw r24,r24
 4385 1a26 A0E0      		ldi r26,0
 4386 1a28 B0E0      		ldi r27,0
 4387 1a2a BC01      		movw r22,r24
 4388 1a2c CD01      		movw r24,r26
 4389 1a2e 0E94 0000 		call __floatunsisf
 4390 1a32 DC01      		movw r26,r24
 4391 1a34 CB01      		movw r24,r22
 4392 1a36 9C01      		movw r18,r24
 4393 1a38 AD01      		movw r20,r26
 4394 1a3a 6D81      		ldd r22,Y+5
 4395 1a3c 7E81      		ldd r23,Y+6
 4396 1a3e 8F81      		ldd r24,Y+7
 4397 1a40 9885      		ldd r25,Y+8
 4398 1a42 0E94 0000 		call __addsf3
 4399 1a46 DC01      		movw r26,r24
 4400 1a48 CB01      		movw r24,r22
 4401 1a4a 8D83      		std Y+5,r24
 4402 1a4c 9E83      		std Y+6,r25
 4403 1a4e AF83      		std Y+7,r26
 4404 1a50 B887      		std Y+8,r27
1072:ServerLLDN.c  **** 						{
 4405               		.loc 6 1072 0 discriminator 4
 4406 1a52 8985      		ldd r24,Y+9
 4407 1a54 9A85      		ldd r25,Y+10
 4408 1a56 0196      		adiw r24,1
 4409 1a58 9A87      		std Y+10,r25
 4410 1a5a 8987      		std Y+9,r24
 4411               	.L140:
1072:ServerLLDN.c  **** 						{
 4412               		.loc 6 1072 0 is_stmt 0 discriminator 1
 4413 1a5c 2985      		ldd r18,Y+9
 4414 1a5e 3A85      		ldd r19,Y+10
 4415 1a60 4AE4      		ldi r20,lo8(74)
 4416 1a62 429F      		mul r20,r18
 4417 1a64 C001      		movw r24,r0
 4418 1a66 439F      		mul r20,r19
 4419 1a68 900D      		add r25,r0
 4420 1a6a 1124      		clr __zero_reg__
 4421 1a6c 8050      		subi r24,lo8(-(nodes_info_arr+1))
 4422 1a6e 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 4423 1a70 FC01      		movw r30,r24
 4424 1a72 8081      		ld r24,Z
 4425 1a74 9181      		ldd r25,Z+1
 4426 1a76 892B      		or r24,r25
 4427 1a78 01F0      		breq .L141
1072:ServerLLDN.c  **** 						{
 4428               		.loc 6 1072 0 discriminator 3
 4429 1a7a 2091 0000 		lds r18,assTimeSlot
 4430 1a7e 3091 0000 		lds r19,assTimeSlot+1
 4431 1a82 8985      		ldd r24,Y+9
 4432 1a84 9A85      		ldd r25,Y+10
 4433 1a86 8217      		cp r24,r18
 4434 1a88 9307      		cpc r25,r19
 4435 1a8a 04F4      		brge .+2
 4436 1a8c 00C0      		rjmp .L142
 4437               	.L141:
 4438               	.LBE18:
1082:ServerLLDN.c  **** 						{
 4439               		.loc 6 1082 0 is_stmt 1
 4440 1a8e 8091 0000 		lds r24,assTimeSlot
 4441 1a92 9091 0000 		lds r25,assTimeSlot+1
 4442 1a96 1816      		cp __zero_reg__,r24
 4443 1a98 1906      		cpc __zero_reg__,r25
 4444 1a9a 04F0      		brlt .+2
 4445 1a9c 00C0      		rjmp .L146
1082:ServerLLDN.c  **** 						{
 4446               		.loc 6 1082 0 is_stmt 0 discriminator 1
 4447 1a9e 8B81      		ldd r24,Y+3
 4448 1aa0 9C81      		ldd r25,Y+4
 4449 1aa2 1816      		cp __zero_reg__,r24
 4450 1aa4 1906      		cpc __zero_reg__,r25
 4451 1aa6 04F0      		brlt .+2
 4452 1aa8 00C0      		rjmp .L146
1084:ServerLLDN.c  **** 							PER = uplink_lost_packets / expected_messages;
 4453               		.loc 6 1084 0 is_stmt 1
 4454 1aaa 8B81      		ldd r24,Y+3
 4455 1aac 9C81      		ldd r25,Y+4
 4456 1aae 092E      		mov __tmp_reg__,r25
 4457 1ab0 000C      		lsl r0
 4458 1ab2 AA0B      		sbc r26,r26
 4459 1ab4 BB0B      		sbc r27,r27
 4460 1ab6 BC01      		movw r22,r24
 4461 1ab8 CD01      		movw r24,r26
 4462 1aba 0E94 0000 		call __floatsisf
 4463 1abe DC01      		movw r26,r24
 4464 1ac0 CB01      		movw r24,r22
 4465 1ac2 2D85      		ldd r18,Y+13
 4466 1ac4 3E85      		ldd r19,Y+14
 4467 1ac6 4F85      		ldd r20,Y+15
 4468 1ac8 5889      		ldd r21,Y+16
 4469 1aca BC01      		movw r22,r24
 4470 1acc CD01      		movw r24,r26
 4471 1ace 0E94 0000 		call __divsf3
 4472 1ad2 DC01      		movw r26,r24
 4473 1ad4 CB01      		movw r24,r22
 4474 1ad6 9C01      		movw r18,r24
 4475 1ad8 AD01      		movw r20,r26
 4476 1ada 60E0      		ldi r22,0
 4477 1adc 70E0      		ldi r23,0
 4478 1ade 80E8      		ldi r24,lo8(-128)
 4479 1ae0 9FE3      		ldi r25,lo8(63)
 4480 1ae2 0E94 0000 		call __subsf3
 4481 1ae6 DC01      		movw r26,r24
 4482 1ae8 CB01      		movw r24,r22
 4483 1aea 8093 0000 		sts PLR,r24
 4484 1aee 9093 0000 		sts PLR+1,r25
 4485 1af2 A093 0000 		sts PLR+2,r26
 4486 1af6 B093 0000 		sts PLR+3,r27
1085:ServerLLDN.c  **** 							printf("\nPLR , %.3f\nPER , %.3f, nodos associados %d", PLR, PER, assTimeSlot);
 4487               		.loc 6 1085 0
 4488 1afa 2D85      		ldd r18,Y+13
 4489 1afc 3E85      		ldd r19,Y+14
 4490 1afe 4F85      		ldd r20,Y+15
 4491 1b00 5889      		ldd r21,Y+16
 4492 1b02 6D81      		ldd r22,Y+5
 4493 1b04 7E81      		ldd r23,Y+6
 4494 1b06 8F81      		ldd r24,Y+7
 4495 1b08 9885      		ldd r25,Y+8
 4496 1b0a 0E94 0000 		call __divsf3
 4497 1b0e DC01      		movw r26,r24
 4498 1b10 CB01      		movw r24,r22
 4499 1b12 8093 0000 		sts PER,r24
 4500 1b16 9093 0000 		sts PER+1,r25
 4501 1b1a A093 0000 		sts PER+2,r26
 4502 1b1e B093 0000 		sts PER+3,r27
1086:ServerLLDN.c  **** 							
 4503               		.loc 6 1086 0
 4504 1b22 6091 0000 		lds r22,assTimeSlot
 4505 1b26 7091 0000 		lds r23,assTimeSlot+1
 4506 1b2a 2091 0000 		lds r18,PER
 4507 1b2e 3091 0000 		lds r19,PER+1
 4508 1b32 4091 0000 		lds r20,PER+2
 4509 1b36 5091 0000 		lds r21,PER+3
 4510 1b3a 8091 0000 		lds r24,PLR
 4511 1b3e 9091 0000 		lds r25,PLR+1
 4512 1b42 A091 0000 		lds r26,PLR+2
 4513 1b46 B091 0000 		lds r27,PLR+3
 4514 1b4a E72F      		mov r30,r23
 4515 1b4c EF93      		push r30
 4516 1b4e 6F93      		push r22
 4517 1b50 652F      		mov r22,r21
 4518 1b52 6F93      		push r22
 4519 1b54 642F      		mov r22,r20
 4520 1b56 6F93      		push r22
 4521 1b58 632F      		mov r22,r19
 4522 1b5a 6F93      		push r22
 4523 1b5c 2F93      		push r18
 4524 1b5e 2B2F      		mov r18,r27
 4525 1b60 2F93      		push r18
 4526 1b62 2A2F      		mov r18,r26
 4527 1b64 2F93      		push r18
 4528 1b66 292F      		mov r18,r25
 4529 1b68 2F93      		push r18
 4530 1b6a 8F93      		push r24
 4531 1b6c 80E0      		ldi r24,lo8(.LC8)
 4532 1b6e 90E0      		ldi r25,hi8(.LC8)
 4533 1b70 892F      		mov r24,r25
 4534 1b72 8F93      		push r24
 4535 1b74 80E0      		ldi r24,lo8(.LC8)
 4536 1b76 90E0      		ldi r25,hi8(.LC8)
 4537 1b78 8F93      		push r24
 4538 1b7a 0E94 0000 		call printf
 4539 1b7e 8DB7      		in r24,__SP_L__
 4540 1b80 9EB7      		in r25,__SP_H__
 4541 1b82 0C96      		adiw r24,12
 4542 1b84 0FB6      		in __tmp_reg__,__SREG__
 4543 1b86 F894      		cli
 4544 1b88 DEBF      		out __SP_H__,r29
 4545 1b8a 0FBE      		out __SREG__,__tmp_reg__
 4546 1b8c CDBF      		out __SP_L__,r28
 4547               	.LBE17:
1090:ServerLLDN.c  **** 				}
 4548               		.loc 6 1090 0
 4549 1b8e 00C0      		rjmp .L146
 4550               	.L126:
 4551               	.LBB19:
1094:ServerLLDN.c  **** 					{
 4552               		.loc 6 1094 0
 4553 1b90 1C86      		std Y+12,__zero_reg__
 4554 1b92 1B86      		std Y+11,__zero_reg__
 4555 1b94 00C0      		rjmp .L143
 4556               	.L144:
1096:ServerLLDN.c  **** 						retransmit_ts_array[i] = 0;
 4557               		.loc 6 1096 0 discriminator 3
 4558 1b96 8B85      		ldd r24,Y+11
 4559 1b98 9C85      		ldd r25,Y+12
 4560 1b9a 8050      		subi r24,lo8(-(ACKFrame+1))
 4561 1b9c 9040      		sbci r25,hi8(-(ACKFrame+1))
 4562 1b9e FC01      		movw r30,r24
 4563 1ba0 1082      		st Z,__zero_reg__
1097:ServerLLDN.c  **** 					}
 4564               		.loc 6 1097 0 discriminator 3
 4565 1ba2 8B85      		ldd r24,Y+11
 4566 1ba4 9C85      		ldd r25,Y+12
 4567 1ba6 8050      		subi r24,lo8(-(retransmit_ts_array))
 4568 1ba8 9040      		sbci r25,hi8(-(retransmit_ts_array))
 4569 1baa FC01      		movw r30,r24
 4570 1bac 1082      		st Z,__zero_reg__
1094:ServerLLDN.c  **** 					{
 4571               		.loc 6 1094 0 discriminator 3
 4572 1bae 8B85      		ldd r24,Y+11
 4573 1bb0 9C85      		ldd r25,Y+12
 4574 1bb2 0196      		adiw r24,1
 4575 1bb4 9C87      		std Y+12,r25
 4576 1bb6 8B87      		std Y+11,r24
 4577               	.L143:
1094:ServerLLDN.c  **** 					{
 4578               		.loc 6 1094 0 is_stmt 0 discriminator 1
 4579 1bb8 8B85      		ldd r24,Y+11
 4580 1bba 9C85      		ldd r25,Y+12
 4581 1bbc 8097      		sbiw r24,32
 4582 1bbe 04F0      		brlt .L144
 4583               	.LBE19:
1099:ServerLLDN.c  **** 					ACKFrame_size = 0;
 4584               		.loc 6 1099 0 is_stmt 1
 4585 1bc0 1092 0000 		sts retransmit_ts_array_counter+1,__zero_reg__
 4586 1bc4 1092 0000 		sts retransmit_ts_array_counter,__zero_reg__
1100:ServerLLDN.c  **** 					
 4587               		.loc 6 1100 0
 4588 1bc8 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 4589 1bcc 1092 0000 		sts ACKFrame_size,__zero_reg__
1102:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 4590               		.loc 6 1102 0
 4591 1bd0 1092 0000 		sts msgReq+5+1,__zero_reg__
 4592 1bd4 1092 0000 		sts msgReq+5,__zero_reg__
1103:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 4593               		.loc 6 1103 0
 4594 1bd8 1092 0000 		sts msgReq+7,__zero_reg__
1104:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 4595               		.loc 6 1104 0
 4596 1bdc 1092 0000 		sts msgReq+8,__zero_reg__
1105:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 4597               		.loc 6 1105 0
 4598 1be0 80E0      		ldi r24,0
 4599 1be2 90E4      		ldi r25,lo8(64)
 4600 1be4 9093 0000 		sts msgReq+9+1,r25
 4601 1be8 8093 0000 		sts msgReq+9,r24
1106:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 4602               		.loc 6 1106 0
 4603 1bec 80E0      		ldi r24,lo8(ACKFrame)
 4604 1bee 90E0      		ldi r25,hi8(ACKFrame)
 4605 1bf0 9093 0000 		sts msgReq+13+1,r25
 4606 1bf4 8093 0000 		sts msgReq+13,r24
1107:ServerLLDN.c  **** 
 4607               		.loc 6 1107 0
 4608 1bf8 8091 0000 		lds r24,macLLDNRetransmitTS
 4609 1bfc 9091 0000 		lds r25,macLLDNRetransmitTS+1
 4610 1c00 8F5F      		subi r24,lo8(-(1))
 4611 1c02 8093 0000 		sts msgReq+15,r24
1109:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_IDLE;
 4612               		.loc 6 1109 0
 4613 1c06 81E0      		ldi r24,lo8(1)
 4614 1c08 8093 0000 		sts appState,r24
1110:ServerLLDN.c  **** 					break;
 4615               		.loc 6 1110 0
 4616 1c0c 8DE0      		ldi r24,lo8(13)
 4617 1c0e 8093 0000 		sts appPanState,r24
1111:ServerLLDN.c  **** 				}				
 4618               		.loc 6 1111 0
 4619 1c12 00C0      		rjmp .L115
 4620               	.L127:
1116:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 4621               		.loc 6 1116 0
 4622 1c14 1092 0000 		sts msgReq+9+1,__zero_reg__
 4623 1c18 1092 0000 		sts msgReq+9,__zero_reg__
1117:ServerLLDN.c  **** 					break;
 4624               		.loc 6 1117 0
 4625 1c1c 81E0      		ldi r24,lo8(1)
 4626 1c1e 8093 0000 		sts appState,r24
1118:ServerLLDN.c  **** 				}
 4627               		.loc 6 1118 0
 4628 1c22 00C0      		rjmp .L115
 4629               	.L146:
1090:ServerLLDN.c  **** 				}
 4630               		.loc 6 1090 0
 4631 1c24 0000      		nop
 4632               	.L115:
 4633               	.L145:
1121:ServerLLDN.c  **** 		}
 4634               		.loc 6 1121 0
 4635 1c26 0000      		nop
 4636               	.L114:
1197:ServerLLDN.c  **** 		}
1198:ServerLLDN.c  **** 	}
1199:ServerLLDN.c  **** }
 4637               		.loc 6 1199 0
 4638 1c28 0000      		nop
 4639               	/* epilogue start */
 4640 1c2a 6096      		adiw r28,16
 4641 1c2c 0FB6      		in __tmp_reg__,__SREG__
 4642 1c2e F894      		cli
 4643 1c30 DEBF      		out __SP_H__,r29
 4644 1c32 0FBE      		out __SREG__,__tmp_reg__
 4645 1c34 CDBF      		out __SP_L__,r28
 4646 1c36 DF91      		pop r29
 4647 1c38 CF91      		pop r28
 4648 1c3a FF90      		pop r15
 4649 1c3c EF90      		pop r14
 4650 1c3e DF90      		pop r13
 4651 1c40 CF90      		pop r12
 4652 1c42 0895      		ret
 4653               		.cfi_endproc
 4654               	.LFE147:
 4656               		.section	.rodata
 4657               	.LC0:
 4658 0093 00        		.byte	0
 4659 0094 C2        		.byte	-62
 4660 0095 01        		.byte	1
 4661 0096 00        		.byte	0
 4662 0097 03        		.byte	3
 4663 0098 00        		.byte	0
 4664 0099 01        		.byte	1
 4665               		.text
 4666               	.global	main
 4668               	main:
 4669               	.LFB148:
1200:ServerLLDN.c  **** 
1201:ServerLLDN.c  **** 	/*****************************************************************************
1202:ServerLLDN.c  **** 	*****************************************************************************/
1203:ServerLLDN.c  **** 	int main(void)
1204:ServerLLDN.c  **** 	{
 4670               		.loc 6 1204 0
 4671               		.cfi_startproc
 4672 1c44 0F93      		push r16
 4673               	.LCFI128:
 4674               		.cfi_def_cfa_offset 3
 4675               		.cfi_offset 16, -2
 4676 1c46 1F93      		push r17
 4677               	.LCFI129:
 4678               		.cfi_def_cfa_offset 4
 4679               		.cfi_offset 17, -3
 4680 1c48 CF93      		push r28
 4681               	.LCFI130:
 4682               		.cfi_def_cfa_offset 5
 4683               		.cfi_offset 28, -4
 4684 1c4a DF93      		push r29
 4685               	.LCFI131:
 4686               		.cfi_def_cfa_offset 6
 4687               		.cfi_offset 29, -5
 4688 1c4c CDB7      		in r28,__SP_L__
 4689 1c4e DEB7      		in r29,__SP_H__
 4690               	.LCFI132:
 4691               		.cfi_def_cfa_register 28
 4692 1c50 2797      		sbiw r28,7
 4693               	.LCFI133:
 4694               		.cfi_def_cfa_offset 13
 4695 1c52 0FB6      		in __tmp_reg__,__SREG__
 4696 1c54 F894      		cli
 4697 1c56 DEBF      		out __SP_H__,r29
 4698 1c58 0FBE      		out __SREG__,__tmp_reg__
 4699 1c5a CDBF      		out __SP_L__,r28
 4700               	/* prologue: function */
 4701               	/* frame size = 7 */
 4702               	/* stack size = 11 */
 4703               	.L__stack_usage = 11
1205:ServerLLDN.c  **** 		sysclk_init();
 4704               		.loc 6 1205 0
 4705 1c5c 0E94 0000 		call sysclk_init
1206:ServerLLDN.c  **** 		board_init();
 4706               		.loc 6 1206 0
 4707 1c60 0E94 0000 		call board_init
1207:ServerLLDN.c  **** 
1208:ServerLLDN.c  **** 		SYS_Init();
 4708               		.loc 6 1208 0
 4709 1c64 0E94 0000 		call SYS_Init
1209:ServerLLDN.c  **** 		/* Disable CSMA/CA
1210:ServerLLDN.c  **** 		 * Disable auto ACK
1211:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
1212:ServerLLDN.c  **** 		 */
1213:ServerLLDN.c  **** 
1214:ServerLLDN.c  **** 		sm_init();
 4710               		.loc 6 1214 0
 4711 1c68 0E94 0000 		call sm_init
1215:ServerLLDN.c  **** 
1216:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
1217:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1218:ServerLLDN.c  **** 		irq_initialize_vectors();
1219:ServerLLDN.c  **** 	#endif
1220:ServerLLDN.c  **** 		cpu_irq_enable();
 4712               		.loc 6 1220 0
 4713               	/* #APP */
 4714               	 ;  1220 "ServerLLDN.c" 1
 4715 1c6c 7894      		sei
 4716               	 ;  0 "" 2
1221:ServerLLDN.c  **** 
1222:ServerLLDN.c  **** 	#if 1
1223:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1224:ServerLLDN.c  **** 		stdio_usb_init();
1225:ServerLLDN.c  **** 	#else
1226:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 4717               		.loc 6 1226 0
 4718               	/* #NOAPP */
 4719 1c6e 27E0      		ldi r18,lo8(7)
 4720 1c70 E0E0      		ldi r30,lo8(.LC0)
 4721 1c72 F0E0      		ldi r31,hi8(.LC0)
 4722 1c74 CE01      		movw r24,r28
 4723 1c76 0196      		adiw r24,1
 4724 1c78 DC01      		movw r26,r24
 4725               		0:
 4726 1c7a 0190      		ld r0,Z+
 4727 1c7c 0D92      		st X+,r0
 4728 1c7e 2A95      		dec r18
 4729 1c80 01F4      		brne 0b
1227:ServerLLDN.c  **** 		{
1228:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1229:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1230:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1231:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1232:ServerLLDN.c  **** 		};
1233:ServerLLDN.c  **** 
1234:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 4730               		.loc 6 1234 0
 4731 1c82 CE01      		movw r24,r28
 4732 1c84 0196      		adiw r24,1
 4733 1c86 BC01      		movw r22,r24
 4734 1c88 80EC      		ldi r24,lo8(-64)
 4735 1c8a 90E0      		ldi r25,0
 4736 1c8c 0E94 0000 		call stdio_serial_init
1235:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 4737               		.loc 6 1235 0
 4738 1c90 80EC      		ldi r24,lo8(-64)
 4739 1c92 90E0      		ldi r25,0
 4740 1c94 0E94 0000 		call usart_double_baud_enable
1236:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 4741               		.loc 6 1236 0
 4742 1c98 0E94 0000 		call sysclk_get_source_clock_hz
 4743 1c9c DC01      		movw r26,r24
 4744 1c9e CB01      		movw r24,r22
 4745 1ca0 8C01      		movw r16,r24
 4746 1ca2 9D01      		movw r18,r26
 4747 1ca4 40E0      		ldi r20,0
 4748 1ca6 52EC      		ldi r21,lo8(-62)
 4749 1ca8 61E0      		ldi r22,lo8(1)
 4750 1caa 70E0      		ldi r23,0
 4751 1cac 80EC      		ldi r24,lo8(-64)
 4752 1cae 90E0      		ldi r25,0
 4753 1cb0 0E94 0000 		call usart_set_baudrate_precalculated
 4754               	.L148:
1237:ServerLLDN.c  **** 
1238:ServerLLDN.c  **** 	#endif
1239:ServerLLDN.c  **** 	#endif
1240:ServerLLDN.c  **** 		for(;;)
1241:ServerLLDN.c  **** 		{
1242:ServerLLDN.c  **** 			SYS_TaskHandler();
 4755               		.loc 6 1242 0 discriminator 1
 4756 1cb4 0E94 0000 		call SYS_TaskHandler
1243:ServerLLDN.c  **** 			APP_TaskHandler();
 4757               		.loc 6 1243 0 discriminator 1
 4758 1cb8 0E94 0000 		call APP_TaskHandler
1244:ServerLLDN.c  **** 		}
 4759               		.loc 6 1244 0 discriminator 1
 4760 1cbc 00C0      		rjmp .L148
 4761               		.cfi_endproc
 4762               	.LFE148:
 4764               	.Letext0:
 4765               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 4766               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 4767               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 4768               		.file 10 "lldn.h"
 4769               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 4770               		.file 12 "../../../platform/mega_rf/utils/status_codes.h"
 4771               		.file 13 "config/config.h"
 4772               		.file 14 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:91     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:103    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:115    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:126    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:175    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:270    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:314    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:365    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:436    .text:0000019e macsc_read32
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:519    .text:00000208 macsc_write_count
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:598    .text:00000270 macsc_read_count
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:641    .text:0000029a macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:694    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:699    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:704    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:709    .text:000002ce appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:753    .data.accepting_requests:00000000 accepting_requests
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:759    .bss.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:766    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:776    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000014 stack_conf_req
                            *COM*:00000021 ACKFrame
                            *COM*:00000021 ACKFrame_aux
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:785    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:791    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:797    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:803    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:809    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:815    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:821    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:828    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:834    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:840    .bss.PLR:00000000 PLR
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:846    .bss.PER:00000000 PER
                            *COM*:00000020 retransmit_ts_array
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:853    .bss.retransmit_ts_array_counter:00000000 retransmit_ts_array_counter
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:859    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:865    .bss.cmp_value_start_superframe:00000000 cmp_value_start_superframe
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:871    .bss.count_up:00000000 count_up
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:877    .bss.count_lost_superframe:00000000 count_lost_superframe
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:882    .data.msgReqGACK:00000000 msgReqGACK
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:893    .text:000002f2 lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:928    .text:0000030c downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:974    .text:00000342 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1122   .text:0000041a addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1413   .text:00000612 CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1510   .text:000006aa appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1645   .text:0000075c check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1764   .text:000007f8 check_ack_aux
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:1889   .text:00000894 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2409   .text:00000c3e appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2461   .text:00000c84 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2669   .text:00000dc8 appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2867   .text:00000f4a end_of_superframe_Online
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:2914   .text:00000f76 send_gack
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:3061   .text:00001064 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:3547   .text:0000144c appInit
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:3624   .text:0000149a APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\cckJKBE7.s:4668   .text:00001c44 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
NWK_DataReq
malloc
free
__floatsisf
__divsf3
__subsf3
__fixsfsi
__floatunsisf
__mulsf3
__addsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
macsc_set_cmp2_int_cb
printf
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
macsc_disable_cmp_int
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
