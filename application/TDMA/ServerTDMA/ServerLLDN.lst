   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  14               	sysclk_get_main_hz:
  15               	.LFB67:
  16               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  17               		.loc 1 175 0
  18               		.cfi_startproc
  19 0000 CF93      		push r28
  20               	.LCFI0:
  21               		.cfi_def_cfa_offset 3
  22               		.cfi_offset 28, -2
  23 0002 DF93      		push r29
  24               	.LCFI1:
  25               		.cfi_def_cfa_offset 4
  26               		.cfi_offset 29, -3
  27 0004 CDB7      		in r28,__SP_L__
  28 0006 DEB7      		in r29,__SP_H__
  29               	.LCFI2:
  30               		.cfi_def_cfa_register 28
  31               	/* prologue: function */
  32               	/* frame size = 0 */
  33               	/* stack size = 2 */
  34               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  35               		.loc 1 185 0
  36 0008 80E0      		ldi r24,0
  37 000a 94E2      		ldi r25,lo8(36)
  38 000c A4EF      		ldi r26,lo8(-12)
  39 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  40               		.loc 1 195 0
  41 0010 BC01      		movw r22,r24
  42 0012 CD01      		movw r24,r26
  43               	/* epilogue start */
  44 0014 DF91      		pop r29
  45 0016 CF91      		pop r28
  46 0018 0895      		ret
  47               		.cfi_endproc
  48               	.LFE67:
  51               	sysclk_get_source_clock_hz:
  52               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  53               		.loc 1 206 0
  54               		.cfi_startproc
  55 001a CF93      		push r28
  56               	.LCFI3:
  57               		.cfi_def_cfa_offset 3
  58               		.cfi_offset 28, -2
  59 001c DF93      		push r29
  60               	.LCFI4:
  61               		.cfi_def_cfa_offset 4
  62               		.cfi_offset 29, -3
  63 001e CDB7      		in r28,__SP_L__
  64 0020 DEB7      		in r29,__SP_H__
  65               	.LCFI5:
  66               		.cfi_def_cfa_register 28
  67               	/* prologue: function */
  68               	/* frame size = 0 */
  69               	/* stack size = 2 */
  70               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  71               		.loc 1 213 0
  72 0022 0E94 0000 		call sysclk_get_main_hz
  73 0026 DC01      		movw r26,r24
  74 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  75               		.loc 1 284 0
  76 002a BC01      		movw r22,r24
  77 002c CD01      		movw r24,r26
  78               	/* epilogue start */
  79 002e DF91      		pop r29
  80 0030 CF91      		pop r28
  81 0032 0895      		ret
  82               		.cfi_endproc
  83               	.LFE68:
  85               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  88               	baudctrl_1mhz:
  89 0000 3300      		.word	51
  90 0002 1900      		.word	25
  91 0004 0C00      		.word	12
  92 0006 0600      		.word	6
  93 0008 0300      		.word	3
  94 000a 0200      		.word	2
  95 000c 0100      		.word	1
  96 000e FF00      		.word	255
  97               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 100               	baudctrl_8mhz:
 101 0000 A001      		.word	416
 102 0002 CF00      		.word	207
 103 0004 6700      		.word	103
 104 0006 3300      		.word	51
 105 0008 1900      		.word	25
 106 000a 0C00      		.word	12
 107 000c 0700      		.word	7
 108 000e 0800      		.word	8
 109               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 112               	baudctrl_16mhz:
 113 0000 4003      		.word	832
 114 0002 A001      		.word	416
 115 0004 CF00      		.word	207
 116 0006 6700      		.word	103
 117 0008 3300      		.word	51
 118 000a 1900      		.word	25
 119 000c 1000      		.word	16
 120 000e 1000      		.word	16
 121               		.text
 123               	usart_double_baud_enable:
 124               	.LFB101:
 125               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 126               		.loc 2 515 0
 127               		.cfi_startproc
 128 0034 CF93      		push r28
 129               	.LCFI6:
 130               		.cfi_def_cfa_offset 3
 131               		.cfi_offset 28, -2
 132 0036 DF93      		push r29
 133               	.LCFI7:
 134               		.cfi_def_cfa_offset 4
 135               		.cfi_offset 29, -3
 136 0038 00D0      		rcall .
 137               	.LCFI8:
 138               		.cfi_def_cfa_offset 6
 139 003a CDB7      		in r28,__SP_L__
 140 003c DEB7      		in r29,__SP_H__
 141               	.LCFI9:
 142               		.cfi_def_cfa_register 28
 143               	/* prologue: function */
 144               	/* frame size = 2 */
 145               	/* stack size = 4 */
 146               	.L__stack_usage = 4
 147 003e 9A83      		std Y+2,r25
 148 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 149               		.loc 2 516 0
 150 0042 8981      		ldd r24,Y+1
 151 0044 9A81      		ldd r25,Y+2
 152 0046 FC01      		movw r30,r24
 153 0048 8081      		ld r24,Z
 154 004a 282F      		mov r18,r24
 155 004c 2260      		ori r18,lo8(2)
 156 004e 8981      		ldd r24,Y+1
 157 0050 9A81      		ldd r25,Y+2
 158 0052 FC01      		movw r30,r24
 159 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 160               		.loc 2 517 0
 161 0056 0000      		nop
 162               	/* epilogue start */
 163 0058 0F90      		pop __tmp_reg__
 164 005a 0F90      		pop __tmp_reg__
 165 005c DF91      		pop r29
 166 005e CF91      		pop r28
 167 0060 0895      		ret
 168               		.cfi_endproc
 169               	.LFE101:
 172               	usart_serial_init:
 173               	.LFB104:
 174               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 175               		.loc 3 77 0
 176               		.cfi_startproc
 177 0062 CF93      		push r28
 178               	.LCFI10:
 179               		.cfi_def_cfa_offset 3
 180               		.cfi_offset 28, -2
 181 0064 DF93      		push r29
 182               	.LCFI11:
 183               		.cfi_def_cfa_offset 4
 184               		.cfi_offset 29, -3
 185 0066 CDB7      		in r28,__SP_L__
 186 0068 DEB7      		in r29,__SP_H__
 187               	.LCFI12:
 188               		.cfi_def_cfa_register 28
 189 006a 2B97      		sbiw r28,11
 190               	.LCFI13:
 191               		.cfi_def_cfa_offset 15
 192 006c 0FB6      		in __tmp_reg__,__SREG__
 193 006e F894      		cli
 194 0070 DEBF      		out __SP_H__,r29
 195 0072 0FBE      		out __SREG__,__tmp_reg__
 196 0074 CDBF      		out __SP_L__,r28
 197               	/* prologue: function */
 198               	/* frame size = 11 */
 199               	/* stack size = 13 */
 200               	.L__stack_usage = 13
 201 0076 9987      		std Y+9,r25
 202 0078 8887      		std Y+8,r24
 203 007a 7B87      		std Y+11,r23
 204 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 205               		.loc 3 80 0
 206 007e 8A85      		ldd r24,Y+10
 207 0080 9B85      		ldd r25,Y+11
 208 0082 FC01      		movw r30,r24
 209 0084 8481      		ldd r24,Z+4
 210 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 211               		.loc 3 81 0
 212 0088 8A85      		ldd r24,Y+10
 213 008a 9B85      		ldd r25,Y+11
 214 008c FC01      		movw r30,r24
 215 008e 8581      		ldd r24,Z+5
 216 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 217               		.loc 3 82 0
 218 0092 8A85      		ldd r24,Y+10
 219 0094 9B85      		ldd r25,Y+11
 220 0096 FC01      		movw r30,r24
 221 0098 8681      		ldd r24,Z+6
 222 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 223               		.loc 3 83 0
 224 009c 8A85      		ldd r24,Y+10
 225 009e 9B85      		ldd r25,Y+11
 226 00a0 FC01      		movw r30,r24
 227 00a2 8081      		ld r24,Z
 228 00a4 9181      		ldd r25,Z+1
 229 00a6 A281      		ldd r26,Z+2
 230 00a8 B381      		ldd r27,Z+3
 231 00aa 8983      		std Y+1,r24
 232 00ac 9A83      		std Y+2,r25
 233 00ae AB83      		std Y+3,r26
 234 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 235               		.loc 3 85 0
 236 00b2 8885      		ldd r24,Y+8
 237 00b4 9985      		ldd r25,Y+9
 238 00b6 9E01      		movw r18,r28
 239 00b8 2F5F      		subi r18,-1
 240 00ba 3F4F      		sbci r19,-1
 241 00bc B901      		movw r22,r18
 242 00be 0E94 0000 		call usart_init_rs232
 243 00c2 8823      		tst r24
 244 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 245               		.loc 3 86 0
 246 00c6 81E0      		ldi r24,lo8(1)
 247 00c8 00C0      		rjmp .L9
 248               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 249               		.loc 3 88 0
 250 00ca 80E0      		ldi r24,0
 251               	.L9:
 252               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 253               		.loc 3 90 0 discriminator 1
 254 00cc 2B96      		adiw r28,11
 255 00ce 0FB6      		in __tmp_reg__,__SREG__
 256 00d0 F894      		cli
 257 00d2 DEBF      		out __SP_H__,r29
 258 00d4 0FBE      		out __SREG__,__tmp_reg__
 259 00d6 CDBF      		out __SP_L__,r28
 260 00d8 DF91      		pop r29
 261 00da CF91      		pop r28
 262 00dc 0895      		ret
 263               		.cfi_endproc
 264               	.LFE104:
 267               	usart_serial_putchar:
 268               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 269               		.loc 3 100 0
 270               		.cfi_startproc
 271 00de CF93      		push r28
 272               	.LCFI14:
 273               		.cfi_def_cfa_offset 3
 274               		.cfi_offset 28, -2
 275 00e0 DF93      		push r29
 276               	.LCFI15:
 277               		.cfi_def_cfa_offset 4
 278               		.cfi_offset 29, -3
 279 00e2 00D0      		rcall .
 280 00e4 1F92      		push __zero_reg__
 281               	.LCFI16:
 282               		.cfi_def_cfa_offset 7
 283 00e6 CDB7      		in r28,__SP_L__
 284 00e8 DEB7      		in r29,__SP_H__
 285               	.LCFI17:
 286               		.cfi_def_cfa_register 28
 287               	/* prologue: function */
 288               	/* frame size = 3 */
 289               	/* stack size = 5 */
 290               	.L__stack_usage = 5
 291 00ea 9A83      		std Y+2,r25
 292 00ec 8983      		std Y+1,r24
 293 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 294               		.loc 3 101 0
 295 00f0 8981      		ldd r24,Y+1
 296 00f2 9A81      		ldd r25,Y+2
 297 00f4 6B81      		ldd r22,Y+3
 298 00f6 0E94 0000 		call usart_putchar
 299               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 300               		.loc 3 102 0
 301 00fa 0F90      		pop __tmp_reg__
 302 00fc 0F90      		pop __tmp_reg__
 303 00fe 0F90      		pop __tmp_reg__
 304 0100 DF91      		pop r29
 305 0102 CF91      		pop r28
 306 0104 0895      		ret
 307               		.cfi_endproc
 308               	.LFE105:
 311               	usart_serial_getchar:
 312               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 313               		.loc 3 111 0
 314               		.cfi_startproc
 315 0106 CF93      		push r28
 316               	.LCFI18:
 317               		.cfi_def_cfa_offset 3
 318               		.cfi_offset 28, -2
 319 0108 DF93      		push r29
 320               	.LCFI19:
 321               		.cfi_def_cfa_offset 4
 322               		.cfi_offset 29, -3
 323 010a 00D0      		rcall .
 324 010c 00D0      		rcall .
 325               	.LCFI20:
 326               		.cfi_def_cfa_offset 8
 327 010e CDB7      		in r28,__SP_L__
 328 0110 DEB7      		in r29,__SP_H__
 329               	.LCFI21:
 330               		.cfi_def_cfa_register 28
 331               	/* prologue: function */
 332               	/* frame size = 4 */
 333               	/* stack size = 6 */
 334               	.L__stack_usage = 6
 335 0112 9A83      		std Y+2,r25
 336 0114 8983      		std Y+1,r24
 337 0116 7C83      		std Y+4,r23
 338 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 339               		.loc 3 112 0
 340 011a 8981      		ldd r24,Y+1
 341 011c 9A81      		ldd r25,Y+2
 342 011e 0E94 0000 		call usart_getchar
 343 0122 282F      		mov r18,r24
 344 0124 8B81      		ldd r24,Y+3
 345 0126 9C81      		ldd r25,Y+4
 346 0128 FC01      		movw r30,r24
 347 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 348               		.loc 3 113 0
 349 012c 0000      		nop
 350               	/* epilogue start */
 351 012e 0F90      		pop __tmp_reg__
 352 0130 0F90      		pop __tmp_reg__
 353 0132 0F90      		pop __tmp_reg__
 354 0134 0F90      		pop __tmp_reg__
 355 0136 DF91      		pop r29
 356 0138 CF91      		pop r28
 357 013a 0895      		ret
 358               		.cfi_endproc
 359               	.LFE106:
 362               	stdio_serial_init:
 363               	.LFB107:
 364               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 365               		.loc 4 90 0
 366               		.cfi_startproc
 367 013c CF93      		push r28
 368               	.LCFI22:
 369               		.cfi_def_cfa_offset 3
 370               		.cfi_offset 28, -2
 371 013e DF93      		push r29
 372               	.LCFI23:
 373               		.cfi_def_cfa_offset 4
 374               		.cfi_offset 29, -3
 375 0140 00D0      		rcall .
 376 0142 00D0      		rcall .
 377               	.LCFI24:
 378               		.cfi_def_cfa_offset 8
 379 0144 CDB7      		in r28,__SP_L__
 380 0146 DEB7      		in r29,__SP_H__
 381               	.LCFI25:
 382               		.cfi_def_cfa_register 28
 383               	/* prologue: function */
 384               	/* frame size = 4 */
 385               	/* stack size = 6 */
 386               	.L__stack_usage = 6
 387 0148 9A83      		std Y+2,r25
 388 014a 8983      		std Y+1,r24
 389 014c 7C83      		std Y+4,r23
 390 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 391               		.loc 4 91 0
 392 0150 8981      		ldd r24,Y+1
 393 0152 9A81      		ldd r25,Y+2
 394 0154 9093 0000 		sts stdio_base+1,r25
 395 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 396               		.loc 4 92 0
 397 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 398 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 399 0160 9093 0000 		sts ptr_put+1,r25
 400 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 401               		.loc 4 93 0
 402 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 403 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 404 016c 9093 0000 		sts ptr_get+1,r25
 405 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 406               		.loc 4 95 0
 407 0174 2B81      		ldd r18,Y+3
 408 0176 3C81      		ldd r19,Y+4
 409 0178 8981      		ldd r24,Y+1
 410 017a 9A81      		ldd r25,Y+2
 411 017c B901      		movw r22,r18
 412 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 413               		.loc 4 107 0
 414 0182 60E0      		ldi r22,lo8(gs(_read))
 415 0184 70E0      		ldi r23,hi8(gs(_read))
 416 0186 80E0      		ldi r24,lo8(gs(_write))
 417 0188 90E0      		ldi r25,hi8(gs(_write))
 418 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 419               		.loc 4 120 0
 420 018e 0000      		nop
 421               	/* epilogue start */
 422 0190 0F90      		pop __tmp_reg__
 423 0192 0F90      		pop __tmp_reg__
 424 0194 0F90      		pop __tmp_reg__
 425 0196 0F90      		pop __tmp_reg__
 426 0198 DF91      		pop r29
 427 019a CF91      		pop r28
 428 019c 0895      		ret
 429               		.cfi_endproc
 430               	.LFE107:
 433               	macsc_enable_manual_bts:
 434               	.LFB121:
 435               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 436               		.loc 5 444 0
 437               		.cfi_startproc
 438 019e CF93      		push r28
 439               	.LCFI26:
 440               		.cfi_def_cfa_offset 3
 441               		.cfi_offset 28, -2
 442 01a0 DF93      		push r29
 443               	.LCFI27:
 444               		.cfi_def_cfa_offset 4
 445               		.cfi_offset 29, -3
 446 01a2 CDB7      		in r28,__SP_L__
 447 01a4 DEB7      		in r29,__SP_H__
 448               	.LCFI28:
 449               		.cfi_def_cfa_register 28
 450               	/* prologue: function */
 451               	/* frame size = 0 */
 452               	/* stack size = 2 */
 453               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 454               		.loc 5 445 0
 455 01a6 8CED      		ldi r24,lo8(-36)
 456 01a8 90E0      		ldi r25,0
 457 01aa 2CED      		ldi r18,lo8(-36)
 458 01ac 30E0      		ldi r19,0
 459 01ae F901      		movw r30,r18
 460 01b0 2081      		ld r18,Z
 461 01b2 2064      		ori r18,lo8(64)
 462 01b4 FC01      		movw r30,r24
 463 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 464               		.loc 5 446 0
 465 01b8 8CED      		ldi r24,lo8(-36)
 466 01ba 90E0      		ldi r25,0
 467 01bc 2CED      		ldi r18,lo8(-36)
 468 01be 30E0      		ldi r19,0
 469 01c0 F901      		movw r30,r18
 470 01c2 2081      		ld r18,Z
 471 01c4 277F      		andi r18,lo8(-9)
 472 01c6 FC01      		movw r30,r24
 473 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 474               		.loc 5 447 0
 475 01ca 0000      		nop
 476               	/* epilogue start */
 477 01cc DF91      		pop r29
 478 01ce CF91      		pop r28
 479 01d0 0895      		ret
 480               		.cfi_endproc
 481               	.LFE121:
 483               	.global	appState
 484               		.section	.bss.appState,"aw",@nobits
 487               	appState:
 488 0000 00        		.zero	1
 489               		.section	.bss.msgReq,"aw",@nobits
 492               	msgReq:
 493 0000 0000 0000 		.zero	20
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 493      0000 0000 
 494               		.section	.bss.PanId,"aw",@nobits
 497               	PanId:
 498 0000 00        		.zero	1
 499               		.section	.rodata
 500               	.LC1:
 501 0000 0A4D 5347 		.string	"\nMSG REQ SENT %d"
 501      2052 4551 
 501      2053 454E 
 501      5420 2564 
 501      00
 502               		.text
 503               	.global	appSendData
 505               	appSendData:
 506               	.LFB130:
 507               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 508               		.loc 6 64 0
 509               		.cfi_startproc
 510 01d2 CF93      		push r28
 511               	.LCFI29:
 512               		.cfi_def_cfa_offset 3
 513               		.cfi_offset 28, -2
 514 01d4 DF93      		push r29
 515               	.LCFI30:
 516               		.cfi_def_cfa_offset 4
 517               		.cfi_offset 29, -3
 518 01d6 CDB7      		in r28,__SP_L__
 519 01d8 DEB7      		in r29,__SP_H__
 520               	.LCFI31:
 521               		.cfi_def_cfa_register 28
 522               	/* prologue: function */
 523               	/* frame size = 0 */
 524               	/* stack size = 2 */
 525               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 526               		.loc 6 65 0
 527 01da 8091 0000 		lds r24,msgReq+9
 528 01de 9091 0000 		lds r25,msgReq+9+1
 529 01e2 892B      		or r24,r25
 530 01e4 01F0      		breq .L17
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		printf("\nMSG REQ SENT %d",msgReq.options);
 531               		.loc 6 67 0
 532 01e6 8091 0000 		lds r24,msgReq+9
 533 01ea 9091 0000 		lds r25,msgReq+9+1
 534 01ee 292F      		mov r18,r25
 535 01f0 2F93      		push r18
 536 01f2 8F93      		push r24
 537 01f4 80E0      		ldi r24,lo8(.LC1)
 538 01f6 90E0      		ldi r25,hi8(.LC1)
 539 01f8 892F      		mov r24,r25
 540 01fa 8F93      		push r24
 541 01fc 80E0      		ldi r24,lo8(.LC1)
 542 01fe 90E0      		ldi r25,hi8(.LC1)
 543 0200 8F93      		push r24
 544 0202 0E94 0000 		call printf
 545 0206 0F90      		pop __tmp_reg__
 546 0208 0F90      		pop __tmp_reg__
 547 020a 0F90      		pop __tmp_reg__
 548 020c 0F90      		pop __tmp_reg__
  68:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 549               		.loc 6 68 0
 550 020e 80E0      		ldi r24,lo8(msgReq)
 551 0210 90E0      		ldi r25,hi8(msgReq)
 552 0212 0E94 0000 		call NWK_DataReq
 553               	.L17:
  69:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  70:ServerLLDN.c  **** 	#endif
  71:ServerLLDN.c  **** 	}
  72:ServerLLDN.c  **** }
 554               		.loc 6 72 0
 555 0216 0000      		nop
 556               	/* epilogue start */
 557 0218 DF91      		pop r29
 558 021a CF91      		pop r28
 559 021c 0895      		ret
 560               		.cfi_endproc
 561               	.LFE130:
 563               	.global	appPanState
 564               		.section	.data.appPanState,"aw",@progbits
 567               	appPanState:
 568 0000 01        		.byte	1
 569               		.comm	nodes_info_arr,3500,1
 570               	.global	config_request_frame
 571               		.section	.data.config_request_frame,"aw",@progbits
 574               	config_request_frame:
 575 0000 0F        		.byte	15
 576 0001 00        		.byte	0
 577 0002 0F        		.byte	15
 578 0003 0000      		.zero	2
 579 0005 80        		.byte	128
 580               	.global	conf_req_list
 581               		.section	.bss.conf_req_list,"aw",@nobits
 584               	conf_req_list:
 585 0000 0000      		.zero	2
 586               		.comm	ACKFrame,33,1
 587               	.global	ACKFrame_size
 588               		.section	.bss.ACKFrame_size,"aw",@nobits
 591               	ACKFrame_size:
 592 0000 0000      		.zero	2
 593               	.global	beaconInterval
 594               		.section	.bss.beaconInterval,"aw",@nobits
 597               	beaconInterval:
 598 0000 0000 0000 		.zero	4
 599               	.global	macLLDNnumUplinkTS
 600               		.section	.bss.macLLDNnumUplinkTS,"aw",@nobits
 603               	macLLDNnumUplinkTS:
 604 0000 0000      		.zero	2
 605               		.section	.bss.tmrDelay,"aw",@nobits
 608               	tmrDelay:
 609 0000 0000 0000 		.zero	13
 609      0000 0000 
 609      0000 0000 
 609      00
 610               	.global	assTimeSlot
 611               		.section	.bss.assTimeSlot,"aw",@nobits
 614               	assTimeSlot:
 615 0000 0000      		.zero	2
 616               	.global	timeslot_counter
 617               		.section	.bss.timeslot_counter,"aw",@nobits
 620               	timeslot_counter:
 621 0000 00        		.zero	1
 622               	.global	counter_associados
 623               		.section	.bss.counter_associados,"aw",@nobits
 626               	counter_associados:
 627 0000 0000      		.zero	2
 628               	.global	cycles_counter
 629               		.section	.data.cycles_counter,"aw",@progbits
 632               	cycles_counter:
 633 0000 01        		.byte	1
 634               		.comm	msg_info_array,6550,1
 635               	.global	size_msg_info
 636               		.section	.bss.size_msg_info,"aw",@nobits
 639               	size_msg_info:
 640 0000 0000      		.zero	2
 641               	.global	data_received
 642               		.section	.bss.data_received,"aw",@nobits
 645               	data_received:
 646 0000 00        		.zero	1
 647               	.global	succes_rate
 648               		.section	.bss.succes_rate,"aw",@nobits
 651               	succes_rate:
 652 0000 0000 0000 		.zero	4
 653               		.text
 655               	tmrDelayHandler:
 656               	.LFB131:
  73:ServerLLDN.c  **** 
  74:ServerLLDN.c  **** #if APP_COORDINATOR
  75:ServerLLDN.c  **** 
  76:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  77:ServerLLDN.c  **** 	
  78:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  79:ServerLLDN.c  **** 	
  80:ServerLLDN.c  **** 	/* Configuration Request Frames */
  81:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  82:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  83:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  84:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  85:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  86:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  87:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  88:ServerLLDN.c  **** 
  89:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  90:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	// ACK Frame Payload used in Discovery State
  91:ServerLLDN.c  **** 	int ACKFrame_size = 0;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
  94:ServerLLDN.c  **** 	
  95:ServerLLDN.c  **** 	int macLLDNnumUplinkTS = 0;		// Number of uplink timeslots, is also the control of associated node
  96:ServerLLDN.c  **** 	
  97:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
  98:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
  99:ServerLLDN.c  **** 	 */
 100:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 101:ServerLLDN.c  **** 	
 102:ServerLLDN.c  **** 	/*  Control variables for testing */	
 103:ServerLLDN.c  **** 	int assTimeSlot = 0;
 104:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 105:ServerLLDN.c  **** 
 106:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 107:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 108:ServerLLDN.c  **** 
 109:ServerLLDN.c  **** 	/* data related variables */
 110:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 111:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 112:ServerLLDN.c  **** 	bool data_received = false;
 113:ServerLLDN.c  **** 	float succes_rate = 0;
 114:ServerLLDN.c  **** 	
 115:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 116:ServerLLDN.c  **** 	{
 657               		.loc 6 116 0
 658               		.cfi_startproc
 659 021e CF93      		push r28
 660               	.LCFI32:
 661               		.cfi_def_cfa_offset 3
 662               		.cfi_offset 28, -2
 663 0220 DF93      		push r29
 664               	.LCFI33:
 665               		.cfi_def_cfa_offset 4
 666               		.cfi_offset 29, -3
 667 0222 00D0      		rcall .
 668               	.LCFI34:
 669               		.cfi_def_cfa_offset 6
 670 0224 CDB7      		in r28,__SP_L__
 671 0226 DEB7      		in r29,__SP_H__
 672               	.LCFI35:
 673               		.cfi_def_cfa_register 28
 674               	/* prologue: function */
 675               	/* frame size = 2 */
 676               	/* stack size = 4 */
 677               	.L__stack_usage = 4
 678 0228 9A83      		std Y+2,r25
 679 022a 8983      		std Y+1,r24
 117:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 680               		.loc 6 117 0
 681 022c 82E0      		ldi r24,lo8(2)
 682 022e 8093 0000 		sts appState,r24
 118:ServerLLDN.c  **** 	}
 683               		.loc 6 118 0
 684 0232 0000      		nop
 685               	/* epilogue start */
 686 0234 0F90      		pop __tmp_reg__
 687 0236 0F90      		pop __tmp_reg__
 688 0238 DF91      		pop r29
 689 023a CF91      		pop r28
 690 023c 0895      		ret
 691               		.cfi_endproc
 692               	.LFE131:
 695               	lldn_server_beacon:
 696               	.LFB132:
 119:ServerLLDN.c  **** 	
 120:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 121:ServerLLDN.c  **** 	{
 697               		.loc 6 121 0
 698               		.cfi_startproc
 699 023e CF93      		push r28
 700               	.LCFI36:
 701               		.cfi_def_cfa_offset 3
 702               		.cfi_offset 28, -2
 703 0240 DF93      		push r29
 704               	.LCFI37:
 705               		.cfi_def_cfa_offset 4
 706               		.cfi_offset 29, -3
 707 0242 CDB7      		in r28,__SP_L__
 708 0244 DEB7      		in r29,__SP_H__
 709               	.LCFI38:
 710               		.cfi_def_cfa_register 28
 711               	/* prologue: function */
 712               	/* frame size = 0 */
 713               	/* stack size = 2 */
 714               	.L__stack_usage = 2
 122:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 715               		.loc 6 122 0
 716 0246 0E94 0000 		call macsc_enable_manual_bts
 123:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 717               		.loc 6 123 0
 718 024a 82E0      		ldi r24,lo8(2)
 719 024c 8093 0000 		sts appState,r24
 124:ServerLLDN.c  **** 	}
 720               		.loc 6 124 0
 721 0250 0000      		nop
 722               	/* epilogue start */
 723 0252 DF91      		pop r29
 724 0254 CF91      		pop r28
 725 0256 0895      		ret
 726               		.cfi_endproc
 727               	.LFE132:
 730               	time_slot_handler:
 731               	.LFB133:
 125:ServerLLDN.c  **** 	
 126:ServerLLDN.c  **** 	static void time_slot_handler(void)
 127:ServerLLDN.c  **** 	{
 732               		.loc 6 127 0
 733               		.cfi_startproc
 734 0258 CF93      		push r28
 735               	.LCFI39:
 736               		.cfi_def_cfa_offset 3
 737               		.cfi_offset 28, -2
 738 025a DF93      		push r29
 739               	.LCFI40:
 740               		.cfi_def_cfa_offset 4
 741               		.cfi_offset 29, -3
 742 025c CDB7      		in r28,__SP_L__
 743 025e DEB7      		in r29,__SP_H__
 744               	.LCFI41:
 745               		.cfi_def_cfa_register 28
 746               	/* prologue: function */
 747               	/* frame size = 0 */
 748               	/* stack size = 2 */
 749               	.L__stack_usage = 2
 128:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 750               		.loc 6 128 0
 751 0260 0E94 0000 		call macsc_enable_manual_bts
 129:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 752               		.loc 6 129 0
 753 0264 83E0      		ldi r24,lo8(3)
 754 0266 8093 0000 		sts appState,r24
 130:ServerLLDN.c  **** 	}
 755               		.loc 6 130 0
 756 026a 0000      		nop
 757               	/* epilogue start */
 758 026c DF91      		pop r29
 759 026e CF91      		pop r28
 760 0270 0895      		ret
 761               		.cfi_endproc
 762               	.LFE133:
 765               	downlink_delay_handler:
 766               	.LFB134:
 131:ServerLLDN.c  **** 	
 132:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 133:ServerLLDN.c  **** 	{
 767               		.loc 6 133 0
 768               		.cfi_startproc
 769 0272 CF93      		push r28
 770               	.LCFI42:
 771               		.cfi_def_cfa_offset 3
 772               		.cfi_offset 28, -2
 773 0274 DF93      		push r29
 774               	.LCFI43:
 775               		.cfi_def_cfa_offset 4
 776               		.cfi_offset 29, -3
 777 0276 CDB7      		in r28,__SP_L__
 778 0278 DEB7      		in r29,__SP_H__
 779               	.LCFI44:
 780               		.cfi_def_cfa_register 28
 781               	/* prologue: function */
 782               	/* frame size = 0 */
 783               	/* stack size = 2 */
 784               	.L__stack_usage = 2
 134:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_LLDN_ACK)
 785               		.loc 6 134 0
 786 027a 8091 0000 		lds r24,msgReq+9
 787 027e 9091 0000 		lds r25,msgReq+9+1
 788 0282 8115      		cp r24,__zero_reg__
 789 0284 9044      		sbci r25,64
 790 0286 01F4      		brne .L23
 135:ServerLLDN.c  **** 		{
 136:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 791               		.loc 6 136 0
 792 0288 82E0      		ldi r24,lo8(2)
 793 028a 8093 0000 		sts appState,r24
 794               	.L23:
 137:ServerLLDN.c  **** 		}
 138:ServerLLDN.c  **** 	}
 795               		.loc 6 138 0
 796 028e 0000      		nop
 797               	/* epilogue start */
 798 0290 DF91      		pop r29
 799 0292 CF91      		pop r28
 800 0294 0895      		ret
 801               		.cfi_endproc
 802               	.LFE134:
 805               	end_of_online_handler:
 806               	.LFB135:
 139:ServerLLDN.c  **** 
 140:ServerLLDN.c  **** 	static void end_of_online_handler(void)
 141:ServerLLDN.c  **** 	{
 807               		.loc 6 141 0
 808               		.cfi_startproc
 809 0296 CF93      		push r28
 810               	.LCFI45:
 811               		.cfi_def_cfa_offset 3
 812               		.cfi_offset 28, -2
 813 0298 DF93      		push r29
 814               	.LCFI46:
 815               		.cfi_def_cfa_offset 4
 816               		.cfi_offset 29, -3
 817 029a CDB7      		in r28,__SP_L__
 818 029c DEB7      		in r29,__SP_H__
 819               	.LCFI47:
 820               		.cfi_def_cfa_register 28
 821               	/* prologue: function */
 822               	/* frame size = 0 */
 823               	/* stack size = 2 */
 824               	.L__stack_usage = 2
 142:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 825               		.loc 6 142 0
 826 029e 83E0      		ldi r24,lo8(3)
 827 02a0 8093 0000 		sts appState,r24
 143:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_END_BE;
 828               		.loc 6 143 0
 829 02a4 8AE0      		ldi r24,lo8(10)
 830 02a6 8093 0000 		sts appPanState,r24
 144:ServerLLDN.c  **** 	}
 831               		.loc 6 144 0
 832 02aa 0000      		nop
 833               	/* epilogue start */
 834 02ac DF91      		pop r29
 835 02ae CF91      		pop r28
 836 02b0 0895      		ret
 837               		.cfi_endproc
 838               	.LFE135:
 840               		.section	.rodata
 841               	.LC2:
 842 0011 0A41 6464 		.string	"\nAddr rep %d"
 842      7220 7265 
 842      7020 2564 
 842      00
 843               		.text
 845               	addToAckArray:
 846               	.LFB136:
 145:ServerLLDN.c  **** 	
 146:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 147:ServerLLDN.c  **** 	static void teste_handler(void)
 148:ServerLLDN.c  **** 	{
 149:ServerLLDN.c  **** 		if(msgReq.options)
 150:ServerLLDN.c  **** 			printf("\n***TIMESLOT****");
 151:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 152:ServerLLDN.c  **** 	}
 153:ServerLLDN.c  **** 	#endif
 154:ServerLLDN.c  **** 	
 155:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 156:ServerLLDN.c  **** 	{	
 847               		.loc 6 156 0
 848               		.cfi_startproc
 849 02b2 CF93      		push r28
 850               	.LCFI48:
 851               		.cfi_def_cfa_offset 3
 852               		.cfi_offset 28, -2
 853 02b4 DF93      		push r29
 854               	.LCFI49:
 855               		.cfi_def_cfa_offset 4
 856               		.cfi_offset 29, -3
 857 02b6 00D0      		rcall .
 858 02b8 00D0      		rcall .
 859 02ba 1F92      		push __zero_reg__
 860               	.LCFI50:
 861               		.cfi_def_cfa_offset 9
 862 02bc CDB7      		in r28,__SP_L__
 863 02be DEB7      		in r29,__SP_H__
 864               	.LCFI51:
 865               		.cfi_def_cfa_register 28
 866               	/* prologue: function */
 867               	/* frame size = 5 */
 868               	/* stack size = 7 */
 869               	.L__stack_usage = 7
 870 02c0 8D83      		std Y+5,r24
 157:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 871               		.loc 6 157 0
 872 02c2 8D81      		ldd r24,Y+5
 873 02c4 8695      		lsr r24
 874 02c6 8695      		lsr r24
 875 02c8 8695      		lsr r24
 876 02ca 882F      		mov r24,r24
 877 02cc 90E0      		ldi r25,0
 878 02ce 9A83      		std Y+2,r25
 879 02d0 8983      		std Y+1,r24
 158:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 880               		.loc 6 158 0
 881 02d2 8D81      		ldd r24,Y+5
 882 02d4 882F      		mov r24,r24
 883 02d6 90E0      		ldi r25,0
 884 02d8 8770      		andi r24,7
 885 02da 9927      		clr r25
 886 02dc 28E0      		ldi r18,lo8(8)
 887 02de 30E0      		ldi r19,0
 888 02e0 A901      		movw r20,r18
 889 02e2 481B      		sub r20,r24
 890 02e4 590B      		sbc r21,r25
 891 02e6 CA01      		movw r24,r20
 892 02e8 9C83      		std Y+4,r25
 893 02ea 8B83      		std Y+3,r24
 159:ServerLLDN.c  **** 		
 160:ServerLLDN.c  **** 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 894               		.loc 6 160 0
 895 02ec 8981      		ldd r24,Y+1
 896 02ee 9A81      		ldd r25,Y+2
 897 02f0 8050      		subi r24,lo8(-(ACKFrame+1))
 898 02f2 9040      		sbci r25,hi8(-(ACKFrame+1))
 899 02f4 FC01      		movw r30,r24
 900 02f6 8081      		ld r24,Z
 901 02f8 882F      		mov r24,r24
 902 02fa 90E0      		ldi r25,0
 903 02fc 0B80      		ldd r0,Y+3
 904 02fe 00C0      		rjmp 2f
 905               		1:
 906 0300 9595      		asr r25
 907 0302 8795      		ror r24
 908               		2:
 909 0304 0A94      		dec r0
 910 0306 02F4      		brpl 1b
 911 0308 8170      		andi r24,1
 912 030a 9927      		clr r25
 913 030c 892B      		or r24,r25
 914 030e 01F0      		breq .L26
 161:ServerLLDN.c  **** 		{
 162:ServerLLDN.c  **** 			printf("\nAddr rep %d", addres);
 915               		.loc 6 162 0
 916 0310 8D81      		ldd r24,Y+5
 917 0312 882F      		mov r24,r24
 918 0314 90E0      		ldi r25,0
 919 0316 292F      		mov r18,r25
 920 0318 2F93      		push r18
 921 031a 8F93      		push r24
 922 031c 80E0      		ldi r24,lo8(.LC2)
 923 031e 90E0      		ldi r25,hi8(.LC2)
 924 0320 892F      		mov r24,r25
 925 0322 8F93      		push r24
 926 0324 80E0      		ldi r24,lo8(.LC2)
 927 0326 90E0      		ldi r25,hi8(.LC2)
 928 0328 8F93      		push r24
 929 032a 0E94 0000 		call printf
 930 032e 0F90      		pop __tmp_reg__
 931 0330 0F90      		pop __tmp_reg__
 932 0332 0F90      		pop __tmp_reg__
 933 0334 0F90      		pop __tmp_reg__
 163:ServerLLDN.c  **** 			return false;
 934               		.loc 6 163 0
 935 0336 80E0      		ldi r24,0
 936 0338 00C0      		rjmp .L27
 937               	.L26:
 164:ServerLLDN.c  **** 		}
 165:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] = 1 << bit_shift;
 938               		.loc 6 165 0
 939 033a 81E0      		ldi r24,lo8(1)
 940 033c 90E0      		ldi r25,0
 941 033e 0B80      		ldd r0,Y+3
 942 0340 00C0      		rjmp 2f
 943               		1:
 944 0342 880F      		lsl r24
 945 0344 991F      		rol r25
 946               		2:
 947 0346 0A94      		dec r0
 948 0348 02F4      		brpl 1b
 949 034a 282F      		mov r18,r24
 950 034c 8981      		ldd r24,Y+1
 951 034e 9A81      		ldd r25,Y+2
 952 0350 8050      		subi r24,lo8(-(ACKFrame+1))
 953 0352 9040      		sbci r25,hi8(-(ACKFrame+1))
 954 0354 FC01      		movw r30,r24
 955 0356 2083      		st Z,r18
 166:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 956               		.loc 6 166 0
 957 0358 8981      		ldd r24,Y+1
 958 035a 9A81      		ldd r25,Y+2
 959 035c 9C01      		movw r18,r24
 960 035e 2F5F      		subi r18,-1
 961 0360 3F4F      		sbci r19,-1
 962 0362 8091 0000 		lds r24,ACKFrame_size
 963 0366 9091 0000 		lds r25,ACKFrame_size+1
 964 036a 8217      		cp r24,r18
 965 036c 9307      		cpc r25,r19
 966 036e 04F4      		brge .L28
 167:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 967               		.loc 6 167 0
 968 0370 8981      		ldd r24,Y+1
 969 0372 9A81      		ldd r25,Y+2
 970 0374 0196      		adiw r24,1
 971 0376 9093 0000 		sts ACKFrame_size+1,r25
 972 037a 8093 0000 		sts ACKFrame_size,r24
 973               	.L28:
 168:ServerLLDN.c  **** 		
 169:ServerLLDN.c  **** 		return true;
 974               		.loc 6 169 0
 975 037e 81E0      		ldi r24,lo8(1)
 976               	.L27:
 977               	/* epilogue start */
 170:ServerLLDN.c  **** 	}
 978               		.loc 6 170 0
 979 0380 0F90      		pop __tmp_reg__
 980 0382 0F90      		pop __tmp_reg__
 981 0384 0F90      		pop __tmp_reg__
 982 0386 0F90      		pop __tmp_reg__
 983 0388 0F90      		pop __tmp_reg__
 984 038a DF91      		pop r29
 985 038c CF91      		pop r28
 986 038e 0895      		ret
 987               		.cfi_endproc
 988               	.LFE136:
 991               	addConfRequestArray:
 992               	.LFB137:
 171:ServerLLDN.c  **** 
 172:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 173:ServerLLDN.c  **** 	{
 993               		.loc 6 173 0
 994               		.cfi_startproc
 995 0390 CF93      		push r28
 996               	.LCFI52:
 997               		.cfi_def_cfa_offset 3
 998               		.cfi_offset 28, -2
 999 0392 DF93      		push r29
 1000               	.LCFI53:
 1001               		.cfi_def_cfa_offset 4
 1002               		.cfi_offset 29, -3
 1003 0394 00D0      		rcall .
 1004 0396 00D0      		rcall .
 1005 0398 1F92      		push __zero_reg__
 1006               	.LCFI54:
 1007               		.cfi_def_cfa_offset 9
 1008 039a CDB7      		in r28,__SP_L__
 1009 039c DEB7      		in r29,__SP_H__
 1010               	.LCFI55:
 1011               		.cfi_def_cfa_register 28
 1012               	/* prologue: function */
 1013               	/* frame size = 5 */
 1014               	/* stack size = 7 */
 1015               	.L__stack_usage = 7
 1016 039e 9D83      		std Y+5,r25
 1017 03a0 8C83      		std Y+4,r24
 174:ServerLLDN.c  **** 
 175:ServerLLDN.c  **** 		uint8_t i;
 176:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1018               		.loc 6 176 0
 1019 03a2 1982      		std Y+1,__zero_reg__
 1020 03a4 00C0      		rjmp .L30
 1021               	.L31:
 1022               		.loc 6 176 0 is_stmt 0 discriminator 3
 1023 03a6 8981      		ldd r24,Y+1
 1024 03a8 8F5F      		subi r24,lo8(-(1))
 1025 03aa 8983      		std Y+1,r24
 1026               	.L30:
 1027               		.loc 6 176 0 discriminator 1
 1028 03ac 8981      		ldd r24,Y+1
 1029 03ae 282F      		mov r18,r24
 1030 03b0 30E0      		ldi r19,0
 1031 03b2 46E4      		ldi r20,lo8(70)
 1032 03b4 429F      		mul r20,r18
 1033 03b6 C001      		movw r24,r0
 1034 03b8 439F      		mul r20,r19
 1035 03ba 900D      		add r25,r0
 1036 03bc 1124      		clr __zero_reg__
 1037 03be 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1038 03c0 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1039 03c2 FC01      		movw r30,r24
 1040 03c4 8081      		ld r24,Z
 1041 03c6 9181      		ldd r25,Z+1
 1042 03c8 892B      		or r24,r25
 1043 03ca 01F4      		brne .L31
 177:ServerLLDN.c  **** 		
 178:ServerLLDN.c  **** 		assTimeSlot++;
 1044               		.loc 6 178 0 is_stmt 1
 1045 03cc 8091 0000 		lds r24,assTimeSlot
 1046 03d0 9091 0000 		lds r25,assTimeSlot+1
 1047 03d4 0196      		adiw r24,1
 1048 03d6 9093 0000 		sts assTimeSlot+1,r25
 1049 03da 8093 0000 		sts assTimeSlot,r24
 179:ServerLLDN.c  **** 	
 180:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1050               		.loc 6 180 0
 1051 03de 8C81      		ldd r24,Y+4
 1052 03e0 9D81      		ldd r25,Y+5
 1053 03e2 FC01      		movw r30,r24
 1054 03e4 8481      		ldd r24,Z+4
 1055 03e6 8F77      		andi r24,lo8(127)
 1056 03e8 282F      		mov r18,r24
 1057 03ea 30E0      		ldi r19,0
 1058 03ec 8091 0000 		lds r24,config_request_frame+5
 1059 03f0 8F77      		andi r24,lo8(127)
 1060 03f2 882F      		mov r24,r24
 1061 03f4 90E0      		ldi r25,0
 1062 03f6 8217      		cp r24,r18
 1063 03f8 9307      		cpc r25,r19
 1064 03fa 04F4      		brge .L32
 181:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1065               		.loc 6 181 0
 1066 03fc 8C81      		ldd r24,Y+4
 1067 03fe 9D81      		ldd r25,Y+5
 1068 0400 FC01      		movw r30,r24
 1069 0402 8481      		ldd r24,Z+4
 1070 0404 8F77      		andi r24,lo8(127)
 1071 0406 8F77      		andi r24,lo8(127)
 1072 0408 9091 0000 		lds r25,config_request_frame+5
 1073 040c 9078      		andi r25,lo8(-128)
 1074 040e 892B      		or r24,r25
 1075 0410 8093 0000 		sts config_request_frame+5,r24
 1076               	.L32:
 182:ServerLLDN.c  **** 		
 183:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1077               		.loc 6 183 0
 1078 0414 8981      		ldd r24,Y+1
 1079 0416 282F      		mov r18,r24
 1080 0418 30E0      		ldi r19,0
 1081 041a 8C81      		ldd r24,Y+4
 1082 041c 9D81      		ldd r25,Y+5
 1083 041e FC01      		movw r30,r24
 1084 0420 8481      		ldd r24,Z+4
 1085 0422 8F77      		andi r24,lo8(127)
 1086 0424 582F      		mov r21,r24
 1087 0426 46E4      		ldi r20,lo8(70)
 1088 0428 429F      		mul r20,r18
 1089 042a C001      		movw r24,r0
 1090 042c 439F      		mul r20,r19
 1091 042e 900D      		add r25,r0
 1092 0430 1124      		clr __zero_reg__
 1093 0432 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1094 0434 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1095 0436 FC01      		movw r30,r24
 1096 0438 5083      		st Z,r21
 184:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1097               		.loc 6 184 0
 1098 043a 8981      		ldd r24,Y+1
 1099 043c 482F      		mov r20,r24
 1100 043e 50E0      		ldi r21,0
 1101 0440 8C81      		ldd r24,Y+4
 1102 0442 9D81      		ldd r25,Y+5
 1103 0444 FC01      		movw r30,r24
 1104 0446 8381      		ldd r24,Z+3
 1105 0448 282F      		mov r18,r24
 1106 044a 30E0      		ldi r19,0
 1107 044c 66E4      		ldi r22,lo8(70)
 1108 044e 649F      		mul r22,r20
 1109 0450 C001      		movw r24,r0
 1110 0452 659F      		mul r22,r21
 1111 0454 900D      		add r25,r0
 1112 0456 1124      		clr __zero_reg__
 1113 0458 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1114 045a 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1115 045c FC01      		movw r30,r24
 1116 045e 3183      		std Z+1,r19
 1117 0460 2083      		st Z,r18
 185:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1118               		.loc 6 185 0
 1119 0462 8981      		ldd r24,Y+1
 1120 0464 282F      		mov r18,r24
 1121 0466 30E0      		ldi r19,0
 1122 0468 46E4      		ldi r20,lo8(70)
 1123 046a 429F      		mul r20,r18
 1124 046c C001      		movw r24,r0
 1125 046e 439F      		mul r20,r19
 1126 0470 900D      		add r25,r0
 1127 0472 1124      		clr __zero_reg__
 1128 0474 8050      		subi r24,lo8(-(nodes_info_arr))
 1129 0476 9040      		sbci r25,hi8(-(nodes_info_arr))
 1130 0478 2981      		ldd r18,Y+1
 1131 047a FC01      		movw r30,r24
 1132 047c 2083      		st Z,r18
 186:ServerLLDN.c  **** 		
 187:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1133               		.loc 6 187 0
 1134 047e 8091 0000 		lds r24,conf_req_list
 1135 0482 9091 0000 		lds r25,conf_req_list+1
 1136 0486 892B      		or r24,r25
 1137 0488 01F0      		breq .L33
 1138               	.LBB2:
 188:ServerLLDN.c  **** 		{
 189:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1139               		.loc 6 189 0
 1140 048a 84E0      		ldi r24,lo8(4)
 1141 048c 90E0      		ldi r25,0
 1142 048e 0E94 0000 		call malloc
 1143 0492 9B83      		std Y+3,r25
 1144 0494 8A83      		std Y+2,r24
 190:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1145               		.loc 6 190 0
 1146 0496 8981      		ldd r24,Y+1
 1147 0498 282F      		mov r18,r24
 1148 049a 30E0      		ldi r19,0
 1149 049c 46E4      		ldi r20,lo8(70)
 1150 049e 429F      		mul r20,r18
 1151 04a0 C001      		movw r24,r0
 1152 04a2 439F      		mul r20,r19
 1153 04a4 900D      		add r25,r0
 1154 04a6 1124      		clr __zero_reg__
 1155 04a8 9C01      		movw r18,r24
 1156 04aa 2050      		subi r18,lo8(-(nodes_info_arr))
 1157 04ac 3040      		sbci r19,hi8(-(nodes_info_arr))
 1158 04ae 8A81      		ldd r24,Y+2
 1159 04b0 9B81      		ldd r25,Y+3
 1160 04b2 FC01      		movw r30,r24
 1161 04b4 3183      		std Z+1,r19
 1162 04b6 2083      		st Z,r18
 191:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1163               		.loc 6 191 0
 1164 04b8 2091 0000 		lds r18,conf_req_list
 1165 04bc 3091 0000 		lds r19,conf_req_list+1
 1166 04c0 8A81      		ldd r24,Y+2
 1167 04c2 9B81      		ldd r25,Y+3
 1168 04c4 FC01      		movw r30,r24
 1169 04c6 3383      		std Z+3,r19
 1170 04c8 2283      		std Z+2,r18
 192:ServerLLDN.c  **** 			conf_req_list = tmp;
 1171               		.loc 6 192 0
 1172 04ca 8A81      		ldd r24,Y+2
 1173 04cc 9B81      		ldd r25,Y+3
 1174 04ce 9093 0000 		sts conf_req_list+1,r25
 1175 04d2 8093 0000 		sts conf_req_list,r24
 1176               	.LBE2:
 193:ServerLLDN.c  **** 		}
 194:ServerLLDN.c  **** 		else
 195:ServerLLDN.c  **** 		{
 196:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 197:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 198:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 199:ServerLLDN.c  **** 		}
 200:ServerLLDN.c  **** 	}
 1177               		.loc 6 200 0
 1178 04d6 00C0      		rjmp .L35
 1179               	.L33:
 196:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1180               		.loc 6 196 0
 1181 04d8 84E0      		ldi r24,lo8(4)
 1182 04da 90E0      		ldi r25,0
 1183 04dc 0E94 0000 		call malloc
 1184 04e0 9093 0000 		sts conf_req_list+1,r25
 1185 04e4 8093 0000 		sts conf_req_list,r24
 197:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1186               		.loc 6 197 0
 1187 04e8 8091 0000 		lds r24,conf_req_list
 1188 04ec 9091 0000 		lds r25,conf_req_list+1
 1189 04f0 2981      		ldd r18,Y+1
 1190 04f2 422F      		mov r20,r18
 1191 04f4 50E0      		ldi r21,0
 1192 04f6 66E4      		ldi r22,lo8(70)
 1193 04f8 649F      		mul r22,r20
 1194 04fa 9001      		movw r18,r0
 1195 04fc 659F      		mul r22,r21
 1196 04fe 300D      		add r19,r0
 1197 0500 1124      		clr __zero_reg__
 1198 0502 2050      		subi r18,lo8(-(nodes_info_arr))
 1199 0504 3040      		sbci r19,hi8(-(nodes_info_arr))
 1200 0506 FC01      		movw r30,r24
 1201 0508 3183      		std Z+1,r19
 1202 050a 2083      		st Z,r18
 198:ServerLLDN.c  **** 		}
 1203               		.loc 6 198 0
 1204 050c 8091 0000 		lds r24,conf_req_list
 1205 0510 9091 0000 		lds r25,conf_req_list+1
 1206 0514 FC01      		movw r30,r24
 1207 0516 1382      		std Z+3,__zero_reg__
 1208 0518 1282      		std Z+2,__zero_reg__
 1209               	.L35:
 1210               		.loc 6 200 0
 1211 051a 0000      		nop
 1212               	/* epilogue start */
 1213 051c 0F90      		pop __tmp_reg__
 1214 051e 0F90      		pop __tmp_reg__
 1215 0520 0F90      		pop __tmp_reg__
 1216 0522 0F90      		pop __tmp_reg__
 1217 0524 0F90      		pop __tmp_reg__
 1218 0526 DF91      		pop r29
 1219 0528 CF91      		pop r28
 1220 052a 0895      		ret
 1221               		.cfi_endproc
 1222               	.LFE137:
 1225               	CopyToConfigRequest:
 1226               	.LFB138:
 201:ServerLLDN.c  **** 
 202:ServerLLDN.c  **** 	static void CopyToConfigRequest()
 203:ServerLLDN.c  **** 	{
 1227               		.loc 6 203 0
 1228               		.cfi_startproc
 1229 052c CF93      		push r28
 1230               	.LCFI56:
 1231               		.cfi_def_cfa_offset 3
 1232               		.cfi_offset 28, -2
 1233 052e DF93      		push r29
 1234               	.LCFI57:
 1235               		.cfi_def_cfa_offset 4
 1236               		.cfi_offset 29, -3
 1237 0530 00D0      		rcall .
 1238               	.LCFI58:
 1239               		.cfi_def_cfa_offset 6
 1240 0532 CDB7      		in r28,__SP_L__
 1241 0534 DEB7      		in r29,__SP_H__
 1242               	.LCFI59:
 1243               		.cfi_def_cfa_register 28
 1244               	/* prologue: function */
 1245               	/* frame size = 2 */
 1246               	/* stack size = 4 */
 1247               	.L__stack_usage = 4
 204:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1248               		.loc 6 204 0
 1249 0536 8091 0000 		lds r24,conf_req_list
 1250 053a 9091 0000 		lds r25,conf_req_list+1
 1251 053e FC01      		movw r30,r24
 1252 0540 8081      		ld r24,Z
 1253 0542 9181      		ldd r25,Z+1
 1254 0544 FC01      		movw r30,r24
 1255 0546 8081      		ld r24,Z
 1256 0548 8093 0000 		sts config_request_frame+3,r24
 205:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1257               		.loc 6 205 0
 1258 054c 8091 0000 		lds r24,conf_req_list
 1259 0550 9091 0000 		lds r25,conf_req_list+1
 1260 0554 FC01      		movw r30,r24
 1261 0556 8081      		ld r24,Z
 1262 0558 9181      		ldd r25,Z+1
 1263 055a FC01      		movw r30,r24
 1264 055c 8181      		ldd r24,Z+1
 1265 055e 9281      		ldd r25,Z+2
 1266 0560 8093 0000 		sts config_request_frame+4,r24
 206:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1267               		.loc 6 206 0
 1268 0564 8091 0000 		lds r24,conf_req_list
 1269 0568 9091 0000 		lds r25,conf_req_list+1
 1270 056c 9A83      		std Y+2,r25
 1271 056e 8983      		std Y+1,r24
 207:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1272               		.loc 6 207 0
 1273 0570 8091 0000 		lds r24,conf_req_list
 1274 0574 9091 0000 		lds r25,conf_req_list+1
 1275 0578 FC01      		movw r30,r24
 1276 057a 8281      		ldd r24,Z+2
 1277 057c 9381      		ldd r25,Z+3
 1278 057e 9093 0000 		sts conf_req_list+1,r25
 1279 0582 8093 0000 		sts conf_req_list,r24
 208:ServerLLDN.c  **** 		tmp->node = NULL;
 1280               		.loc 6 208 0
 1281 0586 8981      		ldd r24,Y+1
 1282 0588 9A81      		ldd r25,Y+2
 1283 058a FC01      		movw r30,r24
 1284 058c 1182      		std Z+1,__zero_reg__
 1285 058e 1082      		st Z,__zero_reg__
 209:ServerLLDN.c  **** 		tmp->next = NULL;
 1286               		.loc 6 209 0
 1287 0590 8981      		ldd r24,Y+1
 1288 0592 9A81      		ldd r25,Y+2
 1289 0594 FC01      		movw r30,r24
 1290 0596 1382      		std Z+3,__zero_reg__
 1291 0598 1282      		std Z+2,__zero_reg__
 210:ServerLLDN.c  **** 		free(tmp);
 1292               		.loc 6 210 0
 1293 059a 8981      		ldd r24,Y+1
 1294 059c 9A81      		ldd r25,Y+2
 1295 059e 0E94 0000 		call free
 211:ServerLLDN.c  **** 	}
 1296               		.loc 6 211 0
 1297 05a2 0000      		nop
 1298               	/* epilogue start */
 1299 05a4 0F90      		pop __tmp_reg__
 1300 05a6 0F90      		pop __tmp_reg__
 1301 05a8 DF91      		pop r29
 1302 05aa CF91      		pop r28
 1303 05ac 0895      		ret
 1304               		.cfi_endproc
 1305               	.LFE138:
 1307               		.section	.rodata
 1308               	.LC3:
 1309 001e 0A44 4953 		.string	"\nDISC %hhx"
 1309      4320 2568 
 1309      6878 00
 1310               	.LC4:
 1311 0029 0A43 4F4E 		.string	"\nCONF %d"
 1311      4620 2564 
 1311      00
 1312               		.text
 1314               	appCommandInd:
 1315               	.LFB139:
 212:ServerLLDN.c  **** 
 213:ServerLLDN.c  **** 
 214:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 215:ServerLLDN.c  **** 	{
 1316               		.loc 6 215 0
 1317               		.cfi_startproc
 1318 05ae CF93      		push r28
 1319               	.LCFI60:
 1320               		.cfi_def_cfa_offset 3
 1321               		.cfi_offset 28, -2
 1322 05b0 DF93      		push r29
 1323               	.LCFI61:
 1324               		.cfi_def_cfa_offset 4
 1325               		.cfi_offset 29, -3
 1326 05b2 00D0      		rcall .
 1327 05b4 00D0      		rcall .
 1328 05b6 00D0      		rcall .
 1329               	.LCFI62:
 1330               		.cfi_def_cfa_offset 10
 1331 05b8 CDB7      		in r28,__SP_L__
 1332 05ba DEB7      		in r29,__SP_H__
 1333               	.LCFI63:
 1334               		.cfi_def_cfa_register 28
 1335               	/* prologue: function */
 1336               	/* frame size = 6 */
 1337               	/* stack size = 8 */
 1338               	.L__stack_usage = 8
 1339 05bc 9E83      		std Y+6,r25
 1340 05be 8D83      		std Y+5,r24
 216:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1341               		.loc 6 216 0
 1342 05c0 8D81      		ldd r24,Y+5
 1343 05c2 9E81      		ldd r25,Y+6
 1344 05c4 FC01      		movw r30,r24
 1345 05c6 8085      		ldd r24,Z+8
 1346 05c8 9185      		ldd r25,Z+9
 1347 05ca FC01      		movw r30,r24
 1348 05cc 8081      		ld r24,Z
 1349 05ce 8D30      		cpi r24,lo8(13)
 1350 05d0 01F4      		brne .L38
 1351               	.LBB3:
 217:ServerLLDN.c  **** 		{
 218:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1352               		.loc 6 218 0
 1353 05d2 8D81      		ldd r24,Y+5
 1354 05d4 9E81      		ldd r25,Y+6
 1355 05d6 FC01      		movw r30,r24
 1356 05d8 8085      		ldd r24,Z+8
 1357 05da 9185      		ldd r25,Z+9
 1358 05dc 9C83      		std Y+4,r25
 1359 05de 8B83      		std Y+3,r24
 219:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1360               		.loc 6 219 0
 1361 05e0 8B81      		ldd r24,Y+3
 1362 05e2 9C81      		ldd r25,Y+4
 1363 05e4 FC01      		movw r30,r24
 1364 05e6 8181      		ldd r24,Z+1
 1365 05e8 0E94 0000 		call addToAckArray
 220:ServerLLDN.c  **** 					
 221:ServerLLDN.c  **** 			#if PRINT
 222:ServerLLDN.c  **** 			printf("\nDISC %hhx", msg->macAddr);	
 1366               		.loc 6 222 0
 1367 05ec 8B81      		ldd r24,Y+3
 1368 05ee 9C81      		ldd r25,Y+4
 1369 05f0 FC01      		movw r30,r24
 1370 05f2 8181      		ldd r24,Z+1
 1371 05f4 882F      		mov r24,r24
 1372 05f6 90E0      		ldi r25,0
 1373 05f8 292F      		mov r18,r25
 1374 05fa 2F93      		push r18
 1375 05fc 8F93      		push r24
 1376 05fe 80E0      		ldi r24,lo8(.LC3)
 1377 0600 90E0      		ldi r25,hi8(.LC3)
 1378 0602 892F      		mov r24,r25
 1379 0604 8F93      		push r24
 1380 0606 80E0      		ldi r24,lo8(.LC3)
 1381 0608 90E0      		ldi r25,hi8(.LC3)
 1382 060a 8F93      		push r24
 1383 060c 0E94 0000 		call printf
 1384 0610 0F90      		pop __tmp_reg__
 1385 0612 0F90      		pop __tmp_reg__
 1386 0614 0F90      		pop __tmp_reg__
 1387 0616 0F90      		pop __tmp_reg__
 1388               	.LBE3:
 1389 0618 00C0      		rjmp .L39
 1390               	.L38:
 223:ServerLLDN.c  **** 			#endif
 224:ServerLLDN.c  **** 		}
 225:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1391               		.loc 6 225 0
 1392 061a 8D81      		ldd r24,Y+5
 1393 061c 9E81      		ldd r25,Y+6
 1394 061e FC01      		movw r30,r24
 1395 0620 8085      		ldd r24,Z+8
 1396 0622 9185      		ldd r25,Z+9
 1397 0624 FC01      		movw r30,r24
 1398 0626 8081      		ld r24,Z
 1399 0628 8E30      		cpi r24,lo8(14)
 1400 062a 01F4      		brne .L40
 1401               	.LBB4:
 226:ServerLLDN.c  **** 		{
 227:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1402               		.loc 6 227 0
 1403 062c 8D81      		ldd r24,Y+5
 1404 062e 9E81      		ldd r25,Y+6
 1405 0630 FC01      		movw r30,r24
 1406 0632 8085      		ldd r24,Z+8
 1407 0634 9185      		ldd r25,Z+9
 1408 0636 9A83      		std Y+2,r25
 1409 0638 8983      		std Y+1,r24
 228:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1410               		.loc 6 228 0
 1411 063a 8981      		ldd r24,Y+1
 1412 063c 9A81      		ldd r25,Y+2
 1413 063e 0E94 0000 		call addConfRequestArray
 229:ServerLLDN.c  **** 			#if PRINT
 230:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 1414               		.loc 6 230 0
 1415 0642 8981      		ldd r24,Y+1
 1416 0644 9A81      		ldd r25,Y+2
 1417 0646 FC01      		movw r30,r24
 1418 0648 8381      		ldd r24,Z+3
 1419 064a 882F      		mov r24,r24
 1420 064c 90E0      		ldi r25,0
 1421 064e 292F      		mov r18,r25
 1422 0650 2F93      		push r18
 1423 0652 8F93      		push r24
 1424 0654 80E0      		ldi r24,lo8(.LC4)
 1425 0656 90E0      		ldi r25,hi8(.LC4)
 1426 0658 892F      		mov r24,r25
 1427 065a 8F93      		push r24
 1428 065c 80E0      		ldi r24,lo8(.LC4)
 1429 065e 90E0      		ldi r25,hi8(.LC4)
 1430 0660 8F93      		push r24
 1431 0662 0E94 0000 		call printf
 1432 0666 0F90      		pop __tmp_reg__
 1433 0668 0F90      		pop __tmp_reg__
 1434 066a 0F90      		pop __tmp_reg__
 1435 066c 0F90      		pop __tmp_reg__
 1436               	.LBE4:
 1437 066e 00C0      		rjmp .L39
 1438               	.L40:
 231:ServerLLDN.c  **** 			#endif
 232:ServerLLDN.c  **** 		}
 233:ServerLLDN.c  **** 		else return false;			
 1439               		.loc 6 233 0
 1440 0670 80E0      		ldi r24,0
 1441 0672 00C0      		rjmp .L41
 1442               	.L39:
 234:ServerLLDN.c  **** 		return true;
 1443               		.loc 6 234 0
 1444 0674 81E0      		ldi r24,lo8(1)
 1445               	.L41:
 1446               	/* epilogue start */
 235:ServerLLDN.c  **** 	}
 1447               		.loc 6 235 0
 1448 0676 2696      		adiw r28,6
 1449 0678 0FB6      		in __tmp_reg__,__SREG__
 1450 067a F894      		cli
 1451 067c DEBF      		out __SP_H__,r29
 1452 067e 0FBE      		out __SREG__,__tmp_reg__
 1453 0680 CDBF      		out __SP_L__,r28
 1454 0682 DF91      		pop r29
 1455 0684 CF91      		pop r28
 1456 0686 0895      		ret
 1457               		.cfi_endproc
 1458               	.LFE139:
 1460               		.section	.rodata
 1461               	.LC5:
 1462 0032 0A20 2564 		.string	"\n %d payload: "
 1462      2070 6179 
 1462      6C6F 6164 
 1462      3A20 00
 1463               	.LC6:
 1464 0041 2568 6878 		.string	"%hhx"
 1464      00
 1465               		.text
 1467               	appDataInd:
 1468               	.LFB140:
 236:ServerLLDN.c  **** 	
 237:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 238:ServerLLDN.c  **** 	{
 1469               		.loc 6 238 0
 1470               		.cfi_startproc
 1471 0688 CF93      		push r28
 1472               	.LCFI64:
 1473               		.cfi_def_cfa_offset 3
 1474               		.cfi_offset 28, -2
 1475 068a DF93      		push r29
 1476               	.LCFI65:
 1477               		.cfi_def_cfa_offset 4
 1478               		.cfi_offset 29, -3
 1479 068c 00D0      		rcall .
 1480 068e 00D0      		rcall .
 1481 0690 00D0      		rcall .
 1482               	.LCFI66:
 1483               		.cfi_def_cfa_offset 10
 1484 0692 CDB7      		in r28,__SP_L__
 1485 0694 DEB7      		in r29,__SP_H__
 1486               	.LCFI67:
 1487               		.cfi_def_cfa_register 28
 1488               	/* prologue: function */
 1489               	/* frame size = 6 */
 1490               	/* stack size = 8 */
 1491               	.L__stack_usage = 8
 1492 0696 9E83      		std Y+6,r25
 1493 0698 8D83      		std Y+5,r24
 239:ServerLLDN.c  **** 		
 240:ServerLLDN.c  **** 		int curr_ts = timeslot_counter - 2*MacLLDNMgmtTS;
 1494               		.loc 6 240 0
 1495 069a 8091 0000 		lds r24,timeslot_counter
 1496 069e 882F      		mov r24,r24
 1497 06a0 90E0      		ldi r25,0
 1498 06a2 0297      		sbiw r24,2
 1499 06a4 9C83      		std Y+4,r25
 1500 06a6 8B83      		std Y+3,r24
 241:ServerLLDN.c  **** 		
 242:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].rssi = ind->rssi;
 1501               		.loc 6 242 0
 1502 06a8 8D81      		ldd r24,Y+5
 1503 06aa 9E81      		ldd r25,Y+6
 1504 06ac FC01      		movw r30,r24
 1505 06ae 8485      		ldd r24,Z+12
 1506 06b0 582F      		mov r21,r24
 1507 06b2 2B81      		ldd r18,Y+3
 1508 06b4 3C81      		ldd r19,Y+4
 1509 06b6 46E4      		ldi r20,lo8(70)
 1510 06b8 429F      		mul r20,r18
 1511 06ba C001      		movw r24,r0
 1512 06bc 439F      		mul r20,r19
 1513 06be 900D      		add r25,r0
 1514 06c0 1124      		clr __zero_reg__
 1515 06c2 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1516 06c4 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1517 06c6 FC01      		movw r30,r24
 1518 06c8 5083      		st Z,r21
 243:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].msg_rec++;
 1519               		.loc 6 243 0
 1520 06ca 2B81      		ldd r18,Y+3
 1521 06cc 3C81      		ldd r19,Y+4
 1522 06ce 46E4      		ldi r20,lo8(70)
 1523 06d0 429F      		mul r20,r18
 1524 06d2 C001      		movw r24,r0
 1525 06d4 439F      		mul r20,r19
 1526 06d6 900D      		add r25,r0
 1527 06d8 1124      		clr __zero_reg__
 1528 06da 8050      		subi r24,lo8(-(nodes_info_arr+65))
 1529 06dc 9040      		sbci r25,hi8(-(nodes_info_arr+65))
 1530 06de FC01      		movw r30,r24
 1531 06e0 8081      		ld r24,Z
 1532 06e2 9181      		ldd r25,Z+1
 1533 06e4 9C01      		movw r18,r24
 1534 06e6 2F5F      		subi r18,-1
 1535 06e8 3F4F      		sbci r19,-1
 1536 06ea 4B81      		ldd r20,Y+3
 1537 06ec 5C81      		ldd r21,Y+4
 1538 06ee 66E4      		ldi r22,lo8(70)
 1539 06f0 649F      		mul r22,r20
 1540 06f2 C001      		movw r24,r0
 1541 06f4 659F      		mul r22,r21
 1542 06f6 900D      		add r25,r0
 1543 06f8 1124      		clr __zero_reg__
 1544 06fa 8050      		subi r24,lo8(-(nodes_info_arr+65))
 1545 06fc 9040      		sbci r25,hi8(-(nodes_info_arr+65))
 1546 06fe FC01      		movw r30,r24
 1547 0700 3183      		std Z+1,r19
 1548 0702 2083      		st Z,r18
 244:ServerLLDN.c  **** 		
 245:ServerLLDN.c  **** 		printf("\n %d payload: ", curr_ts);
 1549               		.loc 6 245 0
 1550 0704 8C81      		ldd r24,Y+4
 1551 0706 8F93      		push r24
 1552 0708 8B81      		ldd r24,Y+3
 1553 070a 8F93      		push r24
 1554 070c 80E0      		ldi r24,lo8(.LC5)
 1555 070e 90E0      		ldi r25,hi8(.LC5)
 1556 0710 892F      		mov r24,r25
 1557 0712 8F93      		push r24
 1558 0714 80E0      		ldi r24,lo8(.LC5)
 1559 0716 90E0      		ldi r25,hi8(.LC5)
 1560 0718 8F93      		push r24
 1561 071a 0E94 0000 		call printf
 1562 071e 0F90      		pop __tmp_reg__
 1563 0720 0F90      		pop __tmp_reg__
 1564 0722 0F90      		pop __tmp_reg__
 1565 0724 0F90      		pop __tmp_reg__
 1566               	.LBB5:
 246:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1567               		.loc 6 246 0
 1568 0726 1A82      		std Y+2,__zero_reg__
 1569 0728 1982      		std Y+1,__zero_reg__
 1570 072a 00C0      		rjmp .L43
 1571               	.L44:
 247:ServerLLDN.c  **** 			printf("%hhx", ind->data[i]);
 1572               		.loc 6 247 0 discriminator 3
 1573 072c 8D81      		ldd r24,Y+5
 1574 072e 9E81      		ldd r25,Y+6
 1575 0730 FC01      		movw r30,r24
 1576 0732 2085      		ldd r18,Z+8
 1577 0734 3185      		ldd r19,Z+9
 1578 0736 8981      		ldd r24,Y+1
 1579 0738 9A81      		ldd r25,Y+2
 1580 073a 820F      		add r24,r18
 1581 073c 931F      		adc r25,r19
 1582 073e FC01      		movw r30,r24
 1583 0740 8081      		ld r24,Z
 1584 0742 882F      		mov r24,r24
 1585 0744 90E0      		ldi r25,0
 1586 0746 292F      		mov r18,r25
 1587 0748 2F93      		push r18
 1588 074a 8F93      		push r24
 1589 074c 80E0      		ldi r24,lo8(.LC6)
 1590 074e 90E0      		ldi r25,hi8(.LC6)
 1591 0750 892F      		mov r24,r25
 1592 0752 8F93      		push r24
 1593 0754 80E0      		ldi r24,lo8(.LC6)
 1594 0756 90E0      		ldi r25,hi8(.LC6)
 1595 0758 8F93      		push r24
 1596 075a 0E94 0000 		call printf
 1597 075e 0F90      		pop __tmp_reg__
 1598 0760 0F90      		pop __tmp_reg__
 1599 0762 0F90      		pop __tmp_reg__
 1600 0764 0F90      		pop __tmp_reg__
 246:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1601               		.loc 6 246 0 discriminator 3
 1602 0766 8981      		ldd r24,Y+1
 1603 0768 9A81      		ldd r25,Y+2
 1604 076a 0196      		adiw r24,1
 1605 076c 9A83      		std Y+2,r25
 1606 076e 8983      		std Y+1,r24
 1607               	.L43:
 246:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1608               		.loc 6 246 0 is_stmt 0 discriminator 1
 1609 0770 8D81      		ldd r24,Y+5
 1610 0772 9E81      		ldd r25,Y+6
 1611 0774 FC01      		movw r30,r24
 1612 0776 8285      		ldd r24,Z+10
 1613 0778 282F      		mov r18,r24
 1614 077a 30E0      		ldi r19,0
 1615 077c 8981      		ldd r24,Y+1
 1616 077e 9A81      		ldd r25,Y+2
 1617 0780 8217      		cp r24,r18
 1618 0782 9307      		cpc r25,r19
 1619 0784 04F0      		brlt .L44
 1620               	.LBE5:
 248:ServerLLDN.c  **** 			
 249:ServerLLDN.c  **** 	}
 1621               		.loc 6 249 0 is_stmt 1
 1622 0786 0000      		nop
 1623               	/* epilogue start */
 1624 0788 2696      		adiw r28,6
 1625 078a 0FB6      		in __tmp_reg__,__SREG__
 1626 078c F894      		cli
 1627 078e DEBF      		out __SP_H__,r29
 1628 0790 0FBE      		out __SREG__,__tmp_reg__
 1629 0792 CDBF      		out __SP_L__,r28
 1630 0794 DF91      		pop r29
 1631 0796 CF91      		pop r28
 1632 0798 0895      		ret
 1633               		.cfi_endproc
 1634               	.LFE140:
 1637               	appPanPrepareACK:
 1638               	.LFB141:
 250:ServerLLDN.c  **** 	
 251:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 252:ServerLLDN.c  **** 	{
 1639               		.loc 6 252 0
 1640               		.cfi_startproc
 1641 079a CF93      		push r28
 1642               	.LCFI68:
 1643               		.cfi_def_cfa_offset 3
 1644               		.cfi_offset 28, -2
 1645 079c DF93      		push r29
 1646               	.LCFI69:
 1647               		.cfi_def_cfa_offset 4
 1648               		.cfi_offset 29, -3
 1649 079e CDB7      		in r28,__SP_L__
 1650 07a0 DEB7      		in r29,__SP_H__
 1651               	.LCFI70:
 1652               		.cfi_def_cfa_register 28
 1653               	/* prologue: function */
 1654               	/* frame size = 0 */
 1655               	/* stack size = 2 */
 1656               	.L__stack_usage = 2
 253:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1657               		.loc 6 253 0
 1658 07a2 1092 0000 		sts msgReq+5+1,__zero_reg__
 1659 07a6 1092 0000 		sts msgReq+5,__zero_reg__
 254:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1660               		.loc 6 254 0
 1661 07aa 1092 0000 		sts msgReq+7,__zero_reg__
 255:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1662               		.loc 6 255 0
 1663 07ae 1092 0000 		sts msgReq+8,__zero_reg__
 256:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 1664               		.loc 6 256 0
 1665 07b2 80E0      		ldi r24,0
 1666 07b4 90E4      		ldi r25,lo8(64)
 1667 07b6 9093 0000 		sts msgReq+9+1,r25
 1668 07ba 8093 0000 		sts msgReq+9,r24
 257:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 1669               		.loc 6 257 0
 1670 07be 80E0      		ldi r24,lo8(ACKFrame)
 1671 07c0 90E0      		ldi r25,hi8(ACKFrame)
 1672 07c2 9093 0000 		sts msgReq+13+1,r25
 1673 07c6 8093 0000 		sts msgReq+13,r24
 258:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 1674               		.loc 6 258 0
 1675 07ca 8091 0000 		lds r24,ACKFrame_size
 1676 07ce 9091 0000 		lds r25,ACKFrame_size+1
 1677 07d2 8F5F      		subi r24,lo8(-(1))
 1678 07d4 8093 0000 		sts msgReq+15,r24
 259:ServerLLDN.c  **** 
 260:ServerLLDN.c  **** 	}
 1679               		.loc 6 260 0
 1680 07d8 0000      		nop
 1681               	/* epilogue start */
 1682 07da DF91      		pop r29
 1683 07dc CF91      		pop r28
 1684 07de 0895      		ret
 1685               		.cfi_endproc
 1686               	.LFE141:
 1689               	appPanReset:
 1690               	.LFB142:
 261:ServerLLDN.c  **** 
 262:ServerLLDN.c  **** 	static void appPanReset(void)
 263:ServerLLDN.c  **** 	{
 1691               		.loc 6 263 0
 1692               		.cfi_startproc
 1693 07e0 CF93      		push r28
 1694               	.LCFI71:
 1695               		.cfi_def_cfa_offset 3
 1696               		.cfi_offset 28, -2
 1697 07e2 DF93      		push r29
 1698               	.LCFI72:
 1699               		.cfi_def_cfa_offset 4
 1700               		.cfi_offset 29, -3
 1701 07e4 00D0      		rcall .
 1702 07e6 00D0      		rcall .
 1703 07e8 00D0      		rcall .
 1704               	.LCFI73:
 1705               		.cfi_def_cfa_offset 10
 1706 07ea CDB7      		in r28,__SP_L__
 1707 07ec DEB7      		in r29,__SP_H__
 1708               	.LCFI74:
 1709               		.cfi_def_cfa_register 28
 1710               	/* prologue: function */
 1711               	/* frame size = 6 */
 1712               	/* stack size = 8 */
 1713               	.L__stack_usage = 8
 264:ServerLLDN.c  **** 		// prepare beacon reset message
 265:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 1714               		.loc 6 265 0
 1715 07ee 1092 0000 		sts msgReq+5+1,__zero_reg__
 1716 07f2 1092 0000 		sts msgReq+5,__zero_reg__
 266:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 1717               		.loc 6 266 0
 1718 07f6 1092 0000 		sts msgReq+7,__zero_reg__
 267:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 1719               		.loc 6 267 0
 1720 07fa 1092 0000 		sts msgReq+8,__zero_reg__
 268:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 1721               		.loc 6 268 0
 1722 07fe 80E4      		ldi r24,lo8(64)
 1723 0800 94E0      		ldi r25,lo8(4)
 1724 0802 9093 0000 		sts msgReq+9+1,r25
 1725 0806 8093 0000 		sts msgReq+9,r24
 269:ServerLLDN.c  **** 		msgReq.data			= NULL;
 1726               		.loc 6 269 0
 1727 080a 1092 0000 		sts msgReq+13+1,__zero_reg__
 1728 080e 1092 0000 		sts msgReq+13,__zero_reg__
 270:ServerLLDN.c  **** 		msgReq.size			= 0;
 1729               		.loc 6 270 0
 1730 0812 1092 0000 		sts msgReq+15,__zero_reg__
 1731               	.LBB6:
 271:ServerLLDN.c  **** 
 272:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1732               		.loc 6 272 0
 1733 0816 1A82      		std Y+2,__zero_reg__
 1734 0818 1982      		std Y+1,__zero_reg__
 1735 081a 00C0      		rjmp .L47
 1736               	.L48:
 273:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1737               		.loc 6 273 0 discriminator 3
 1738 081c 8981      		ldd r24,Y+1
 1739 081e 9A81      		ldd r25,Y+2
 1740 0820 8050      		subi r24,lo8(-(ACKFrame+1))
 1741 0822 9040      		sbci r25,hi8(-(ACKFrame+1))
 1742 0824 FC01      		movw r30,r24
 1743 0826 1082      		st Z,__zero_reg__
 272:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1744               		.loc 6 272 0 discriminator 3
 1745 0828 8981      		ldd r24,Y+1
 1746 082a 9A81      		ldd r25,Y+2
 1747 082c 0196      		adiw r24,1
 1748 082e 9A83      		std Y+2,r25
 1749 0830 8983      		std Y+1,r24
 1750               	.L47:
 272:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1751               		.loc 6 272 0 is_stmt 0 discriminator 1
 1752 0832 8981      		ldd r24,Y+1
 1753 0834 9A81      		ldd r25,Y+2
 1754 0836 8097      		sbiw r24,32
 1755 0838 04F0      		brlt .L48
 1756               	.LBE6:
 1757               	.LBB7:
 274:ServerLLDN.c  **** 			
 275:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 1758               		.loc 6 275 0 is_stmt 1
 1759 083a 1C82      		std Y+4,__zero_reg__
 1760 083c 1B82      		std Y+3,__zero_reg__
 1761 083e 00C0      		rjmp .L49
 1762               	.L52:
 276:ServerLLDN.c  **** 		{
 277:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 1763               		.loc 6 277 0
 1764 0840 2B81      		ldd r18,Y+3
 1765 0842 3C81      		ldd r19,Y+4
 1766 0844 46E4      		ldi r20,lo8(70)
 1767 0846 429F      		mul r20,r18
 1768 0848 C001      		movw r24,r0
 1769 084a 439F      		mul r20,r19
 1770 084c 900D      		add r25,r0
 1771 084e 1124      		clr __zero_reg__
 1772 0850 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1773 0852 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1774 0854 FC01      		movw r30,r24
 1775 0856 1182      		std Z+1,__zero_reg__
 1776 0858 1082      		st Z,__zero_reg__
 278:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 1777               		.loc 6 278 0
 1778 085a 2B81      		ldd r18,Y+3
 1779 085c 3C81      		ldd r19,Y+4
 1780 085e 43E8      		ldi r20,lo8(-125)
 1781 0860 429F      		mul r20,r18
 1782 0862 C001      		movw r24,r0
 1783 0864 439F      		mul r20,r19
 1784 0866 900D      		add r25,r0
 1785 0868 1124      		clr __zero_reg__
 1786 086a 8050      		subi r24,lo8(-(msg_info_array))
 1787 086c 9040      		sbci r25,hi8(-(msg_info_array))
 1788 086e FC01      		movw r30,r24
 1789 0870 1182      		std Z+1,__zero_reg__
 1790 0872 1082      		st Z,__zero_reg__
 279:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 1791               		.loc 6 279 0
 1792 0874 2B81      		ldd r18,Y+3
 1793 0876 3C81      		ldd r19,Y+4
 1794 0878 43E8      		ldi r20,lo8(-125)
 1795 087a 429F      		mul r20,r18
 1796 087c C001      		movw r24,r0
 1797 087e 439F      		mul r20,r19
 1798 0880 900D      		add r25,r0
 1799 0882 1124      		clr __zero_reg__
 1800 0884 8050      		subi r24,lo8(-(msg_info_array+2))
 1801 0886 9040      		sbci r25,hi8(-(msg_info_array+2))
 1802 0888 FC01      		movw r30,r24
 1803 088a 1182      		std Z+1,__zero_reg__
 1804 088c 1082      		st Z,__zero_reg__
 1805               	.LBB8:
 280:ServerLLDN.c  **** 			
 281:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 1806               		.loc 6 281 0
 1807 088e 1E82      		std Y+6,__zero_reg__
 1808 0890 1D82      		std Y+5,__zero_reg__
 1809 0892 00C0      		rjmp .L50
 1810               	.L51:
 282:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 1811               		.loc 6 282 0 discriminator 3
 1812 0894 8B81      		ldd r24,Y+3
 1813 0896 9C81      		ldd r25,Y+4
 1814 0898 46E4      		ldi r20,lo8(70)
 1815 089a 489F      		mul r20,r24
 1816 089c 9001      		movw r18,r0
 1817 089e 499F      		mul r20,r25
 1818 08a0 300D      		add r19,r0
 1819 08a2 1124      		clr __zero_reg__
 1820 08a4 8D81      		ldd r24,Y+5
 1821 08a6 9E81      		ldd r25,Y+6
 1822 08a8 820F      		add r24,r18
 1823 08aa 931F      		adc r25,r19
 1824 08ac 8050      		subi r24,lo8(-(nodes_info_arr+5))
 1825 08ae 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 1826 08b0 FC01      		movw r30,r24
 1827 08b2 1082      		st Z,__zero_reg__
 281:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 1828               		.loc 6 281 0 discriminator 3
 1829 08b4 8D81      		ldd r24,Y+5
 1830 08b6 9E81      		ldd r25,Y+6
 1831 08b8 0196      		adiw r24,1
 1832 08ba 9E83      		std Y+6,r25
 1833 08bc 8D83      		std Y+5,r24
 1834               	.L50:
 281:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 1835               		.loc 6 281 0 is_stmt 0 discriminator 1
 1836 08be 8D81      		ldd r24,Y+5
 1837 08c0 9E81      		ldd r25,Y+6
 1838 08c2 C297      		sbiw r24,50
 1839 08c4 04F0      		brlt .L51
 1840               	.LBE8:
 275:ServerLLDN.c  **** 		{
 1841               		.loc 6 275 0 is_stmt 1 discriminator 2
 1842 08c6 8B81      		ldd r24,Y+3
 1843 08c8 9C81      		ldd r25,Y+4
 1844 08ca 0196      		adiw r24,1
 1845 08cc 9C83      		std Y+4,r25
 1846 08ce 8B83      		std Y+3,r24
 1847               	.L49:
 275:ServerLLDN.c  **** 		{
 1848               		.loc 6 275 0 is_stmt 0 discriminator 1
 1849 08d0 8B81      		ldd r24,Y+3
 1850 08d2 9C81      		ldd r25,Y+4
 1851 08d4 C297      		sbiw r24,50
 1852 08d6 04F4      		brge .+2
 1853 08d8 00C0      		rjmp .L52
 1854               	.LBE7:
 283:ServerLLDN.c  **** 		}
 284:ServerLLDN.c  **** 		assTimeSlot = MacLLDNMgmtTS * 2;	
 1855               		.loc 6 284 0 is_stmt 1
 1856 08da 82E0      		ldi r24,lo8(2)
 1857 08dc 90E0      		ldi r25,0
 1858 08de 9093 0000 		sts assTimeSlot+1,r25
 1859 08e2 8093 0000 		sts assTimeSlot,r24
 285:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1860               		.loc 6 285 0
 1861 08e6 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1862 08ea 1092 0000 		sts ACKFrame_size,__zero_reg__
 286:ServerLLDN.c  **** 		counter_associados = 0;
 1863               		.loc 6 286 0
 1864 08ee 1092 0000 		sts counter_associados+1,__zero_reg__
 1865 08f2 1092 0000 		sts counter_associados,__zero_reg__
 287:ServerLLDN.c  **** 		n = 0;
 1866               		.loc 6 287 0
 1867 08f6 1092 0000 		sts n,__zero_reg__
 288:ServerLLDN.c  **** 	}
 1868               		.loc 6 288 0
 1869 08fa 0000      		nop
 1870               	/* epilogue start */
 1871 08fc 2696      		adiw r28,6
 1872 08fe 0FB6      		in __tmp_reg__,__SREG__
 1873 0900 F894      		cli
 1874 0902 DEBF      		out __SP_H__,r29
 1875 0904 0FBE      		out __SREG__,__tmp_reg__
 1876 0906 CDBF      		out __SP_L__,r28
 1877 0908 DF91      		pop r29
 1878 090a CF91      		pop r28
 1879 090c 0895      		ret
 1880               		.cfi_endproc
 1881               	.LFE142:
 1883               	.global	__floatsisf
 1884               	.global	__addsf3
 1885               	.global	__divsf3
 1886               	.global	__mulsf3
 1887               	.global	__fixunssfsi
 1889               	appPanDiscInit:
 1890               	.LFB143:
 289:ServerLLDN.c  **** 
 290:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 291:ServerLLDN.c  **** 	{	
 1891               		.loc 6 291 0
 1892               		.cfi_startproc
 1893 090e CF93      		push r28
 1894               	.LCFI75:
 1895               		.cfi_def_cfa_offset 3
 1896               		.cfi_offset 28, -2
 1897 0910 DF93      		push r29
 1898               	.LCFI76:
 1899               		.cfi_def_cfa_offset 4
 1900               		.cfi_offset 29, -3
 1901 0912 00D0      		rcall .
 1902               	.LCFI77:
 1903               		.cfi_def_cfa_offset 6
 1904 0914 CDB7      		in r28,__SP_L__
 1905 0916 DEB7      		in r29,__SP_H__
 1906               	.LCFI78:
 1907               		.cfi_def_cfa_register 28
 1908               	/* prologue: function */
 1909               	/* frame size = 2 */
 1910               	/* stack size = 4 */
 1911               	.L__stack_usage = 4
 1912               	.LBB9:
 292:ServerLLDN.c  **** 		/* clear Ack array of previous discovery state */
 293:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 1913               		.loc 6 293 0
 1914 0918 1A82      		std Y+2,__zero_reg__
 1915 091a 1982      		std Y+1,__zero_reg__
 1916 091c 00C0      		rjmp .L54
 1917               	.L55:
 294:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1918               		.loc 6 294 0 discriminator 3
 1919 091e 8981      		ldd r24,Y+1
 1920 0920 9A81      		ldd r25,Y+2
 1921 0922 8050      		subi r24,lo8(-(ACKFrame+1))
 1922 0924 9040      		sbci r25,hi8(-(ACKFrame+1))
 1923 0926 FC01      		movw r30,r24
 1924 0928 1082      		st Z,__zero_reg__
 293:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1925               		.loc 6 293 0 discriminator 3
 1926 092a 8981      		ldd r24,Y+1
 1927 092c 9A81      		ldd r25,Y+2
 1928 092e 0196      		adiw r24,1
 1929 0930 9A83      		std Y+2,r25
 1930 0932 8983      		std Y+1,r24
 1931               	.L54:
 293:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 1932               		.loc 6 293 0 is_stmt 0 discriminator 1
 1933 0934 8981      		ldd r24,Y+1
 1934 0936 9A81      		ldd r25,Y+2
 1935 0938 8097      		sbiw r24,32
 1936 093a 04F0      		brlt .L55
 1937               	.LBE9:
 295:ServerLLDN.c  **** 		ACKFrame_size = 0;
 1938               		.loc 6 295 0 is_stmt 1
 1939 093c 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 1940 0940 1092 0000 		sts ACKFrame_size,__zero_reg__
 296:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 297:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 1941               		.loc 6 297 0
 1942 0944 1092 0000 		sts msgReq+5+1,__zero_reg__
 1943 0948 1092 0000 		sts msgReq+5,__zero_reg__
 298:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 1944               		.loc 6 298 0
 1945 094c 1092 0000 		sts msgReq+7,__zero_reg__
 299:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 1946               		.loc 6 299 0
 1947 0950 1092 0000 		sts msgReq+8,__zero_reg__
 300:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 1948               		.loc 6 300 0
 1949 0954 80E4      		ldi r24,lo8(64)
 1950 0956 91E0      		ldi r25,lo8(1)
 1951 0958 9093 0000 		sts msgReq+9+1,r25
 1952 095c 8093 0000 		sts msgReq+9,r24
 301:ServerLLDN.c  **** 		msgReq.data					= NULL;
 1953               		.loc 6 301 0
 1954 0960 1092 0000 		sts msgReq+13+1,__zero_reg__
 1955 0964 1092 0000 		sts msgReq+13,__zero_reg__
 302:ServerLLDN.c  **** 		msgReq.size					= 0;
 1956               		.loc 6 302 0
 1957 0968 1092 0000 		sts msgReq+15,__zero_reg__
 303:ServerLLDN.c  **** 		
 304:ServerLLDN.c  **** 		
 305:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 306:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 1958               		.loc 6 306 0
 1959 096c 8091 0000 		lds r24,cycles_counter
 1960 0970 8823      		tst r24
 1961 0972 01F0      		breq .+2
 1962 0974 00C0      		rjmp .L57
 307:ServerLLDN.c  **** 		{
 308:ServerLLDN.c  **** 			
 309:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 310:ServerLLDN.c  **** 		n = 127; 
 1963               		.loc 6 310 0
 1964 0976 8FE7      		ldi r24,lo8(127)
 1965 0978 8093 0000 		sts n,r24
 311:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 1966               		.loc 6 311 0
 1967 097c 8091 0000 		lds r24,n
 1968 0980 882F      		mov r24,r24
 1969 0982 90E0      		ldi r25,0
 1970 0984 0396      		adiw r24,3
 1971 0986 880F      		lsl r24
 1972 0988 991F      		rol r25
 1973 098a 092E      		mov __tmp_reg__,r25
 1974 098c 000C      		lsl r0
 1975 098e AA0B      		sbc r26,r26
 1976 0990 BB0B      		sbc r27,r27
 1977 0992 BC01      		movw r22,r24
 1978 0994 CD01      		movw r24,r26
 1979 0996 0E94 0000 		call __floatsisf
 1980 099a DC01      		movw r26,r24
 1981 099c CB01      		movw r24,r22
 1982 099e 20E0      		ldi r18,0
 1983 09a0 30E0      		ldi r19,0
 1984 09a2 40E4      		ldi r20,lo8(64)
 1985 09a4 51E4      		ldi r21,lo8(65)
 1986 09a6 BC01      		movw r22,r24
 1987 09a8 CD01      		movw r24,r26
 1988 09aa 0E94 0000 		call __addsf3
 1989 09ae DC01      		movw r26,r24
 1990 09b0 CB01      		movw r24,r22
 1991 09b2 20E0      		ldi r18,0
 1992 09b4 30E0      		ldi r19,0
 1993 09b6 40E2      		ldi r20,lo8(32)
 1994 09b8 52E4      		ldi r21,lo8(66)
 1995 09ba BC01      		movw r22,r24
 1996 09bc CD01      		movw r24,r26
 1997 09be 0E94 0000 		call __addsf3
 1998 09c2 DC01      		movw r26,r24
 1999 09c4 CB01      		movw r24,r22
 2000 09c6 20E0      		ldi r18,0
 2001 09c8 34E2      		ldi r19,lo8(36)
 2002 09ca 44E7      		ldi r20,lo8(116)
 2003 09cc 57E4      		ldi r21,lo8(71)
 2004 09ce BC01      		movw r22,r24
 2005 09d0 CD01      		movw r24,r26
 2006 09d2 0E94 0000 		call __divsf3
 2007 09d6 DC01      		movw r26,r24
 2008 09d8 CB01      		movw r24,r22
 2009 09da 8093 0000 		sts tTS,r24
 2010 09de 9093 0000 		sts tTS+1,r25
 2011 09e2 A093 0000 		sts tTS+2,r26
 2012 09e6 B093 0000 		sts tTS+3,r27
 312:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 313:ServerLLDN.c  **** 		
 314:ServerLLDN.c  **** 			beaconInterval = 2 * numBaseTimeSlotperMgmt * (tTS) / (SYMBOL_TIME);
 2013               		.loc 6 314 0
 2014 09ea 8091 0000 		lds r24,tTS
 2015 09ee 9091 0000 		lds r25,tTS+1
 2016 09f2 A091 0000 		lds r26,tTS+2
 2017 09f6 B091 0000 		lds r27,tTS+3
 2018 09fa 20E0      		ldi r18,0
 2019 09fc 30E0      		ldi r19,0
 2020 09fe 40E8      		ldi r20,lo8(-128)
 2021 0a00 50E4      		ldi r21,lo8(64)
 2022 0a02 BC01      		movw r22,r24
 2023 0a04 CD01      		movw r24,r26
 2024 0a06 0E94 0000 		call __mulsf3
 2025 0a0a DC01      		movw r26,r24
 2026 0a0c CB01      		movw r24,r22
 2027 0a0e 2DEB      		ldi r18,lo8(-67)
 2028 0a10 37E3      		ldi r19,lo8(55)
 2029 0a12 46E8      		ldi r20,lo8(-122)
 2030 0a14 57E3      		ldi r21,lo8(55)
 2031 0a16 BC01      		movw r22,r24
 2032 0a18 CD01      		movw r24,r26
 2033 0a1a 0E94 0000 		call __divsf3
 2034 0a1e DC01      		movw r26,r24
 2035 0a20 CB01      		movw r24,r22
 2036 0a22 8093 0000 		sts beaconInterval,r24
 2037 0a26 9093 0000 		sts beaconInterval+1,r25
 2038 0a2a A093 0000 		sts beaconInterval+2,r26
 2039 0a2e B093 0000 		sts beaconInterval+3,r27
 315:ServerLLDN.c  **** 			/*
 316:ServerLLDN.c  **** 			* Configure interrupts callback functions
 317:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 318:ServerLLDN.c  **** 			*/
 319:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2040               		.loc 6 319 0
 2041 0a32 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2042 0a34 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2043 0a36 0E94 0000 		call macsc_set_cmp1_int_cb
 320:ServerLLDN.c  **** 			/*
 321:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 322:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 323:ServerLLDN.c  **** 			*/
 324:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2044               		.loc 6 324 0
 2045 0a3a 0E94 0000 		call macsc_enable_manual_bts
 325:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2046               		.loc 6 325 0
 2047 0a3e 81E0      		ldi r24,lo8(1)
 2048 0a40 0E94 0000 		call macsc_enable_cmp_int
 326:ServerLLDN.c  **** 
 327:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval , MACSC_CC1);
 2049               		.loc 6 327 0
 2050 0a44 8091 0000 		lds r24,beaconInterval
 2051 0a48 9091 0000 		lds r25,beaconInterval+1
 2052 0a4c A091 0000 		lds r26,beaconInterval+2
 2053 0a50 B091 0000 		lds r27,beaconInterval+3
 2054 0a54 BC01      		movw r22,r24
 2055 0a56 CD01      		movw r24,r26
 2056 0a58 0E94 0000 		call __fixunssfsi
 2057 0a5c DC01      		movw r26,r24
 2058 0a5e CB01      		movw r24,r22
 2059 0a60 21E0      		ldi r18,lo8(1)
 2060 0a62 AC01      		movw r20,r24
 2061 0a64 BD01      		movw r22,r26
 2062 0a66 81E0      		ldi r24,lo8(1)
 2063 0a68 0E94 0000 		call macsc_use_cmp
 2064               	.L57:
 328:ServerLLDN.c  **** 			
 329:ServerLLDN.c  **** 			/* Timer used in testing */
 330:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 331:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 332:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 333:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval / 2, MACSC_CC2);
 334:ServerLLDN.c  **** 			#endif
 335:ServerLLDN.c  **** 			
 336:ServerLLDN.c  **** 		#endif
 337:ServerLLDN.c  **** 		}
 338:ServerLLDN.c  **** 	}
 2065               		.loc 6 338 0
 2066 0a6c 0000      		nop
 2067               	/* epilogue start */
 2068 0a6e 0F90      		pop __tmp_reg__
 2069 0a70 0F90      		pop __tmp_reg__
 2070 0a72 DF91      		pop r29
 2071 0a74 CF91      		pop r28
 2072 0a76 0895      		ret
 2073               		.cfi_endproc
 2074               	.LFE143:
 2077               	appPanOnlineInit:
 2078               	.LFB144:
 339:ServerLLDN.c  **** 
 340:ServerLLDN.c  **** 	static void appPanOnlineInit()
 341:ServerLLDN.c  **** 	{
 2079               		.loc 6 341 0
 2080               		.cfi_startproc
 2081 0a78 EF92      		push r14
 2082               	.LCFI79:
 2083               		.cfi_def_cfa_offset 3
 2084               		.cfi_offset 14, -2
 2085 0a7a FF92      		push r15
 2086               	.LCFI80:
 2087               		.cfi_def_cfa_offset 4
 2088               		.cfi_offset 15, -3
 2089 0a7c 0F93      		push r16
 2090               	.LCFI81:
 2091               		.cfi_def_cfa_offset 5
 2092               		.cfi_offset 16, -4
 2093 0a7e 1F93      		push r17
 2094               	.LCFI82:
 2095               		.cfi_def_cfa_offset 6
 2096               		.cfi_offset 17, -5
 2097 0a80 CF93      		push r28
 2098               	.LCFI83:
 2099               		.cfi_def_cfa_offset 7
 2100               		.cfi_offset 28, -6
 2101 0a82 DF93      		push r29
 2102               	.LCFI84:
 2103               		.cfi_def_cfa_offset 8
 2104               		.cfi_offset 29, -7
 2105 0a84 CDB7      		in r28,__SP_L__
 2106 0a86 DEB7      		in r29,__SP_H__
 2107               	.LCFI85:
 2108               		.cfi_def_cfa_register 28
 2109               	/* prologue: function */
 2110               	/* frame size = 0 */
 2111               	/* stack size = 6 */
 2112               	.L__stack_usage = 6
 342:ServerLLDN.c  **** 			timeslot_counter = 0;
 2113               		.loc 6 342 0
 2114 0a88 1092 0000 		sts timeslot_counter,__zero_reg__
 343:ServerLLDN.c  **** 			
 344:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ /*config_request_frame.conf.tsDuration */ 127 )*sm + macMinLIFSPeriod)/v
 2115               		.loc 6 344 0
 2116 0a8c 8EEE      		ldi r24,lo8(-18)
 2117 0a8e 93E9      		ldi r25,lo8(-109)
 2118 0a90 A3EA      		ldi r26,lo8(-93)
 2119 0a92 BBE3      		ldi r27,lo8(59)
 2120 0a94 8093 0000 		sts tTS,r24
 2121 0a98 9093 0000 		sts tTS+1,r25
 2122 0a9c A093 0000 		sts tTS+2,r26
 2123 0aa0 B093 0000 		sts tTS+3,r27
 345:ServerLLDN.c  **** 			
 346:ServerLLDN.c  **** 			n = /*config_request_frame.conf.tsDuration */ 127;
 2124               		.loc 6 346 0
 2125 0aa4 8FE7      		ldi r24,lo8(127)
 2126 0aa6 8093 0000 		sts n,r24
 347:ServerLLDN.c  **** 			
 348:ServerLLDN.c  **** 			msgReq.dstAddr				= 0;
 2127               		.loc 6 348 0
 2128 0aaa 1092 0000 		sts msgReq+5+1,__zero_reg__
 2129 0aae 1092 0000 		sts msgReq+5,__zero_reg__
 349:ServerLLDN.c  **** 			msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2130               		.loc 6 349 0
 2131 0ab2 1092 0000 		sts msgReq+7,__zero_reg__
 350:ServerLLDN.c  **** 			msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2132               		.loc 6 350 0
 2133 0ab6 1092 0000 		sts msgReq+8,__zero_reg__
 351:ServerLLDN.c  **** 			msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 2134               		.loc 6 351 0
 2135 0aba 80EC      		ldi r24,lo8(-64)
 2136 0abc 90E0      		ldi r25,0
 2137 0abe 9093 0000 		sts msgReq+9+1,r25
 2138 0ac2 8093 0000 		sts msgReq+9,r24
 352:ServerLLDN.c  **** 			msgReq.data					= NULL;
 2139               		.loc 6 352 0
 2140 0ac6 1092 0000 		sts msgReq+13+1,__zero_reg__
 2141 0aca 1092 0000 		sts msgReq+13,__zero_reg__
 353:ServerLLDN.c  **** 			msgReq.size					= 0;
 2142               		.loc 6 353 0
 2143 0ace 1092 0000 		sts msgReq+15,__zero_reg__
 354:ServerLLDN.c  **** 			
 355:ServerLLDN.c  **** 			// (number of time slots x mgmt time solts) x base timelosts
 356:ServerLLDN.c  **** 			beaconInterval = (assTimeSlot + 2*MacLLDNMgmtTS) * tTS / (SYMBOL_TIME);
 2144               		.loc 6 356 0
 2145 0ad2 8091 0000 		lds r24,assTimeSlot
 2146 0ad6 9091 0000 		lds r25,assTimeSlot+1
 2147 0ada 0296      		adiw r24,2
 2148 0adc 092E      		mov __tmp_reg__,r25
 2149 0ade 000C      		lsl r0
 2150 0ae0 AA0B      		sbc r26,r26
 2151 0ae2 BB0B      		sbc r27,r27
 2152 0ae4 BC01      		movw r22,r24
 2153 0ae6 CD01      		movw r24,r26
 2154 0ae8 0E94 0000 		call __floatsisf
 2155 0aec 7B01      		movw r14,r22
 2156 0aee 8C01      		movw r16,r24
 2157 0af0 8091 0000 		lds r24,tTS
 2158 0af4 9091 0000 		lds r25,tTS+1
 2159 0af8 A091 0000 		lds r26,tTS+2
 2160 0afc B091 0000 		lds r27,tTS+3
 2161 0b00 9C01      		movw r18,r24
 2162 0b02 AD01      		movw r20,r26
 2163 0b04 C801      		movw r24,r16
 2164 0b06 B701      		movw r22,r14
 2165 0b08 0E94 0000 		call __mulsf3
 2166 0b0c DC01      		movw r26,r24
 2167 0b0e CB01      		movw r24,r22
 2168 0b10 2DEB      		ldi r18,lo8(-67)
 2169 0b12 37E3      		ldi r19,lo8(55)
 2170 0b14 46E8      		ldi r20,lo8(-122)
 2171 0b16 57E3      		ldi r21,lo8(55)
 2172 0b18 BC01      		movw r22,r24
 2173 0b1a CD01      		movw r24,r26
 2174 0b1c 0E94 0000 		call __divsf3
 2175 0b20 DC01      		movw r26,r24
 2176 0b22 CB01      		movw r24,r22
 2177 0b24 8093 0000 		sts beaconInterval,r24
 2178 0b28 9093 0000 		sts beaconInterval+1,r25
 2179 0b2c A093 0000 		sts beaconInterval+2,r26
 2180 0b30 B093 0000 		sts beaconInterval+3,r27
 357:ServerLLDN.c  **** 			
 358:ServerLLDN.c  **** 			// Configure Timers
 359:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(time_slot_handler);
 2181               		.loc 6 359 0
 2182 0b34 80E0      		ldi r24,lo8(gs(time_slot_handler))
 2183 0b36 90E0      		ldi r25,hi8(gs(time_slot_handler))
 2184 0b38 0E94 0000 		call macsc_set_cmp1_int_cb
 360:ServerLLDN.c  **** 			
 361:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2185               		.loc 6 361 0
 2186 0b3c 0E94 0000 		call macsc_enable_manual_bts
 362:ServerLLDN.c  **** 			
 363:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2187               		.loc 6 363 0
 2188 0b40 81E0      		ldi r24,lo8(1)
 2189 0b42 0E94 0000 		call macsc_enable_cmp_int
 364:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 2190               		.loc 6 364 0
 2191 0b46 8091 0000 		lds r24,tTS
 2192 0b4a 9091 0000 		lds r25,tTS+1
 2193 0b4e A091 0000 		lds r26,tTS+2
 2194 0b52 B091 0000 		lds r27,tTS+3
 2195 0b56 2DEB      		ldi r18,lo8(-67)
 2196 0b58 37E3      		ldi r19,lo8(55)
 2197 0b5a 46E8      		ldi r20,lo8(-122)
 2198 0b5c 57E3      		ldi r21,lo8(55)
 2199 0b5e BC01      		movw r22,r24
 2200 0b60 CD01      		movw r24,r26
 2201 0b62 0E94 0000 		call __divsf3
 2202 0b66 DC01      		movw r26,r24
 2203 0b68 CB01      		movw r24,r22
 2204 0b6a BC01      		movw r22,r24
 2205 0b6c CD01      		movw r24,r26
 2206 0b6e 0E94 0000 		call __fixunssfsi
 2207 0b72 DC01      		movw r26,r24
 2208 0b74 CB01      		movw r24,r22
 2209 0b76 21E0      		ldi r18,lo8(1)
 2210 0b78 AC01      		movw r20,r24
 2211 0b7a BD01      		movw r22,r26
 2212 0b7c 81E0      		ldi r24,lo8(1)
 2213 0b7e 0E94 0000 		call macsc_use_cmp
 365:ServerLLDN.c  **** 			
 366:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 2214               		.loc 6 366 0
 2215 0b82 60E0      		ldi r22,lo8(gs(appDataInd))
 2216 0b84 70E0      		ldi r23,hi8(gs(appDataInd))
 2217 0b86 81E0      		ldi r24,lo8(1)
 2218 0b88 0E94 0000 		call NWK_OpenEndpoint
 367:ServerLLDN.c  **** 
 368:ServerLLDN.c  **** 			
 369:ServerLLDN.c  **** 	}
 2219               		.loc 6 369 0
 2220 0b8c 0000      		nop
 2221               	/* epilogue start */
 2222 0b8e DF91      		pop r29
 2223 0b90 CF91      		pop r28
 2224 0b92 1F91      		pop r17
 2225 0b94 0F91      		pop r16
 2226 0b96 FF90      		pop r15
 2227 0b98 EF90      		pop r14
 2228 0b9a 0895      		ret
 2229               		.cfi_endproc
 2230               	.LFE144:
 2233               	appInit:
 2234               	.LFB145:
 370:ServerLLDN.c  **** 
 371:ServerLLDN.c  **** 
 372:ServerLLDN.c  **** #else 
 373:ServerLLDN.c  **** 	uint8_t payloadSize = 127;
 374:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 375:ServerLLDN.c  **** 	uint8_t n = 0;
 376:ServerLLDN.c  **** 	
 377:ServerLLDN.c  **** 	static NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 378:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 379:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 380:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 127,
 381:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 382:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 383:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 384:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 385:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 127,
 386:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 387:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 388:ServerLLDN.c  **** 	uint8_t data_payload = 0xFA;
 389:ServerLLDN.c  **** 	static bool ack_received;
 390:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 391:ServerLLDN.c  **** 	bool associated = 0;
 392:ServerLLDN.c  **** 	
 393:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 394:ServerLLDN.c  **** 	{
 395:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 396:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 397:ServerLLDN.c  **** 			timer_stop();
 398:ServerLLDN.c  **** 		#endif
 399:ServerLLDN.c  **** 	}
 400:ServerLLDN.c  **** 
 401:ServerLLDN.c  **** 	static void start_timer(int delay)
 402:ServerLLDN.c  **** 	{
 403:ServerLLDN.c  **** 		#if MASTER_MACSC
 404:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 405:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(send_message_timeHandler);
 406:ServerLLDN.c  **** 		macsc_enable_cmp_int(MACSC_CC1);
 407:ServerLLDN.c  **** 		macsc_use_cmp(MACSC_RELATIVE_CMP, delay - 250, MACSC_CC1);
 408:ServerLLDN.c  **** 		#else
 409:ServerLLDN.c  **** 		timer_init();
 410:ServerLLDN.c  **** 		timer_delay(delay/2);
 411:ServerLLDN.c  **** 		hw_timer_setup_handler(send_message_timeHandler);
 412:ServerLLDN.c  **** 		timer_start();
 413:ServerLLDN.c  **** 		#endif
 414:ServerLLDN.c  **** 	}
 415:ServerLLDN.c  **** 	
 416:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 417:ServerLLDN.c  **** 	{
 418:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 419:ServerLLDN.c  **** 		PanId = rec_beacon->PanId;
 420:ServerLLDN.c  **** 		//  bom implementar rotinas pra se o nodo estiver associado a um coordeandor e se no estiver
 421:ServerLLDN.c  **** 		if( ((rec_beacon->Flags.txState == DISC_MODE && !ack_received && rec_beacon->confSeqNumber == 0x0
 422:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received)) && associated == 0)
 423:ServerLLDN.c  **** 		{
 424:ServerLLDN.c  **** 	
 425:ServerLLDN.c  **** 			int ts_time =  ((p_var*sp + (m+ rec_beacon->TimeSlotSize  )*sm + macMinLIFSPeriod)/v_var)  / (SY
 426:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize * 2; // sy
 427:ServerLLDN.c  **** 			
 428:ServerLLDN.c  **** 			start_timer(msg_wait_time);
 429:ServerLLDN.c  **** 			
 430:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 431:ServerLLDN.c  **** 		}
 432:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == ONLINE_MODE && assTimeSlot != 0xFF && associated == 1)
 433:ServerLLDN.c  **** 		{
 434:ServerLLDN.c  **** 			int ts_time = ((p_var*sp + (m+ n)*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME);
 435:ServerLLDN.c  **** 			int msg_wait_time = (2*rec_beacon->Flags.numBaseMgmtTimeslots + assTimeSlot) * n;
 436:ServerLLDN.c  **** 			start_timer(msg_wait_time);
 437:ServerLLDN.c  **** 			appState = APP_STATE_PREP_DATA_FRAME;
 438:ServerLLDN.c  **** 		}
 439:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 440:ServerLLDN.c  **** 		{
 441:ServerLLDN.c  **** 			printf("\n Reset beacon");
 442:ServerLLDN.c  **** 			ack_received = 0;
 443:ServerLLDN.c  **** 			associated = 0;
 444:ServerLLDN.c  **** 		}
 445:ServerLLDN.c  **** 		return true;
 446:ServerLLDN.c  **** 	}
 447:ServerLLDN.c  **** 	
 448:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 449:ServerLLDN.c  **** 	{
 450:ServerLLDN.c  **** 		#if !MASTER_MACSC
 451:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 452:ServerLLDN.c  **** 		#endif
 453:ServerLLDN.c  **** 		NWK_ACKFormat_t *ackframe = (NWK_ACKFormat_t*)ind->data;
 454:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 455:ServerLLDN.c  **** 		{
 456:ServerLLDN.c  **** 			int pos = (int) APP_ADDR / 8;
 457:ServerLLDN.c  **** 			int bit_shift = 8 - APP_ADDR % 8;
 458:ServerLLDN.c  **** 			if( ackframe->ackFlags[pos] & 1 << bit_shift)	
 459:ServerLLDN.c  **** 			{
 460:ServerLLDN.c  **** 				printf("\n ack true");
 461:ServerLLDN.c  **** 				ack_received = true;
 462:ServerLLDN.c  **** 			}
 463:ServerLLDN.c  **** 		}
 464:ServerLLDN.c  **** 		return true;
 465:ServerLLDN.c  **** 	}
 466:ServerLLDN.c  **** 	
 467:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 468:ServerLLDN.c  **** 	{
 469:ServerLLDN.c  **** 		#if !MASTER_MACSC
 470:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 471:ServerLLDN.c  **** 		#endif
 472:ServerLLDN.c  **** 		
 473:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 474:ServerLLDN.c  **** 		{
 475:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 476:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 477:ServerLLDN.c  **** 			{
 478:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 479:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 480:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 481:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 482:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 483:ServerLLDN.c  **** 				associated = 1;
 484:ServerLLDN.c  **** 				printf("\nAssociado!");
 485:ServerLLDN.c  **** 			}
 486:ServerLLDN.c  **** 		}
 487:ServerLLDN.c  **** 		return true;
 488:ServerLLDN.c  **** 	}
 489:ServerLLDN.c  **** 
 490:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 491:ServerLLDN.c  **** 	{
 492:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 493:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 494:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 495:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 496:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 497:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 498:ServerLLDN.c  **** 	}
 499:ServerLLDN.c  **** 	
 500:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 501:ServerLLDN.c  **** 	{		
 502:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 503:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 504:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 505:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 506:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 507:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 508:ServerLLDN.c  **** 	}
 509:ServerLLDN.c  **** 	
 510:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 511:ServerLLDN.c  **** 	{
 512:ServerLLDN.c  **** 		
 513:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 514:ServerLLDN.c  **** 
 515:ServerLLDN.c  **** 	
 516:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 517:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 518:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 519:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 520:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 521:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 522:ServerLLDN.c  **** 	}
 523:ServerLLDN.c  **** 	
 524:ServerLLDN.c  **** 	
 525:ServerLLDN.c  **** #endif // APP_COORDINATOR
 526:ServerLLDN.c  **** 
 527:ServerLLDN.c  **** static void appInit(void)
 528:ServerLLDN.c  **** {
 2235               		.loc 6 528 0
 2236               		.cfi_startproc
 2237 0b9c CF93      		push r28
 2238               	.LCFI86:
 2239               		.cfi_def_cfa_offset 3
 2240               		.cfi_offset 28, -2
 2241 0b9e DF93      		push r29
 2242               	.LCFI87:
 2243               		.cfi_def_cfa_offset 4
 2244               		.cfi_offset 29, -3
 2245 0ba0 CDB7      		in r28,__SP_L__
 2246 0ba2 DEB7      		in r29,__SP_H__
 2247               	.LCFI88:
 2248               		.cfi_def_cfa_register 28
 2249               	/* prologue: function */
 2250               	/* frame size = 0 */
 2251               	/* stack size = 2 */
 2252               	.L__stack_usage = 2
 529:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 2253               		.loc 6 529 0
 2254 0ba4 80E0      		ldi r24,0
 2255 0ba6 90E0      		ldi r25,0
 2256 0ba8 0E94 0000 		call NWK_SetAddr
 530:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 2257               		.loc 6 530 0
 2258 0bac 8FE0      		ldi r24,lo8(15)
 2259 0bae 0E94 0000 		call PHY_SetChannel
 531:ServerLLDN.c  **** 	PHY_SetRxState(true);
 2260               		.loc 6 531 0
 2261 0bb2 81E0      		ldi r24,lo8(1)
 2262 0bb4 0E94 0000 		call PHY_SetRxState
 532:ServerLLDN.c  **** 		
 533:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 534:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 535:ServerLLDN.c  **** 		tmrDelay.interval = 2;
 2263               		.loc 6 535 0
 2264 0bb8 82E0      		ldi r24,lo8(2)
 2265 0bba 90E0      		ldi r25,0
 2266 0bbc A0E0      		ldi r26,0
 2267 0bbe B0E0      		ldi r27,0
 2268 0bc0 8093 0000 		sts tmrDelay+6,r24
 2269 0bc4 9093 0000 		sts tmrDelay+6+1,r25
 2270 0bc8 A093 0000 		sts tmrDelay+6+2,r26
 2271 0bcc B093 0000 		sts tmrDelay+6+3,r27
 536:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 2272               		.loc 6 536 0
 2273 0bd0 1092 0000 		sts tmrDelay+10,__zero_reg__
 537:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 2274               		.loc 6 537 0
 2275 0bd4 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 2276 0bd6 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 2277 0bd8 9093 0000 		sts tmrDelay+11+1,r25
 2278 0bdc 8093 0000 		sts tmrDelay+11,r24
 538:ServerLLDN.c  **** 	  
 539:ServerLLDN.c  **** 		/* 
 540:ServerLLDN.c  **** 		* Disable CSMA/CA
 541:ServerLLDN.c  **** 		* Disable auto ACK
 542:ServerLLDN.c  **** 		*/
 543:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 2279               		.loc 6 543 0
 2280 0be0 8EEF      		ldi r24,lo8(-2)
 2281 0be2 9AEC      		ldi r25,lo8(-54)
 2282 0be4 0E94 0000 		call NWK_SetPanId
 544:ServerLLDN.c  **** 		PanId = APP_PANID;
 2283               		.loc 6 544 0
 2284 0be8 8EEF      		ldi r24,lo8(-2)
 2285 0bea 8093 0000 		sts PanId,r24
 545:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 2286               		.loc 6 545 0
 2287 0bee 8EEF      		ldi r24,lo8(-2)
 2288 0bf0 8093 0000 		sts ACKFrame,r24
 546:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 2289               		.loc 6 546 0
 2290 0bf4 81E0      		ldi r24,lo8(1)
 2291 0bf6 0E94 0000 		call PHY_SetTdmaMode
 547:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 2292               		.loc 6 547 0
 2293 0bfa 60E0      		ldi r22,lo8(gs(appCommandInd))
 2294 0bfc 70E0      		ldi r23,hi8(gs(appCommandInd))
 2295 0bfe 83E0      		ldi r24,lo8(3)
 2296 0c00 0E94 0000 		call NWK_OpenEndpoint
 548:ServerLLDN.c  **** 	#else
 549:ServerLLDN.c  **** 		/*
 550:ServerLLDN.c  **** 		 * Enable CSMA/CA
 551:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 552:ServerLLDN.c  **** 		 */
 553:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 554:ServerLLDN.c  **** 		// PHY_SetOptimizedCSMAValues();
 555:ServerLLDN.c  **** 		
 556:ServerLLDN.c  **** 		payloadSize = 127;
 557:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 558:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 559:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 560:ServerLLDN.c  **** 		/*
 561:ServerLLDN.c  **** 		* Configure interrupts callback functions
 562:ServerLLDN.c  **** 		*/
 563:ServerLLDN.c  **** 		
 564:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 565:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 2297               		.loc 6 565 0
 2298 0c04 81E0      		ldi r24,lo8(1)
 2299 0c06 0E94 0000 		call PHY_SetPromiscuousMode
 566:ServerLLDN.c  **** 
 567:ServerLLDN.c  **** }
 2300               		.loc 6 567 0
 2301 0c0a 0000      		nop
 2302               	/* epilogue start */
 2303 0c0c DF91      		pop r29
 2304 0c0e CF91      		pop r28
 2305 0c10 0895      		ret
 2306               		.cfi_endproc
 2307               	.LFE145:
 2309               		.section	.rodata
 2310               	.LC7:
 2311 0046 0A25 642C 		.string	"\n%d, %d"
 2311      2025 6400 
 2312               	.LC8:
 2313 004e 0A46 696D 		.string	"\nFim de um Per\355odo"
 2313      2064 6520 
 2313      756D 2050 
 2313      6572 ED6F 
 2313      646F 00
 2314               	.LC9:
 2315 0061 0A2D 2D2D 		.string	"\n------- slot %d --------"
 2315      2D2D 2D2D 
 2315      2073 6C6F 
 2315      7420 2564 
 2315      202D 2D2D 
 2316               		.text
 2318               	APP_TaskHandler:
 2319               	.LFB146:
 568:ServerLLDN.c  **** 
 569:ServerLLDN.c  **** static void APP_TaskHandler(void)
 570:ServerLLDN.c  **** {
 2320               		.loc 6 570 0
 2321               		.cfi_startproc
 2322 0c12 CF93      		push r28
 2323               	.LCFI89:
 2324               		.cfi_def_cfa_offset 3
 2325               		.cfi_offset 28, -2
 2326 0c14 DF93      		push r29
 2327               	.LCFI90:
 2328               		.cfi_def_cfa_offset 4
 2329               		.cfi_offset 29, -3
 2330 0c16 CDB7      		in r28,__SP_L__
 2331 0c18 DEB7      		in r29,__SP_H__
 2332               	.LCFI91:
 2333               		.cfi_def_cfa_register 28
 2334               	/* prologue: function */
 2335               	/* frame size = 0 */
 2336               	/* stack size = 2 */
 2337               	.L__stack_usage = 2
 571:ServerLLDN.c  **** 	switch (appState){
 2338               		.loc 6 571 0
 2339 0c1a 8091 0000 		lds r24,appState
 2340 0c1e 882F      		mov r24,r24
 2341 0c20 90E0      		ldi r25,0
 2342 0c22 8230      		cpi r24,2
 2343 0c24 9105      		cpc r25,__zero_reg__
 2344 0c26 01F0      		breq .L62
 2345 0c28 8330      		cpi r24,3
 2346 0c2a 9105      		cpc r25,__zero_reg__
 2347 0c2c 01F0      		breq .L63
 2348 0c2e 892B      		or r24,r25
 2349 0c30 01F0      		breq .L64
 572:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 573:ServerLLDN.c  **** 		{
 574:ServerLLDN.c  **** 			appInit();
 575:ServerLLDN.c  **** 			#if APP_COORDINATOR
 576:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 577:ServerLLDN.c  **** 			#else
 578:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 579:ServerLLDN.c  **** 			#endif
 580:ServerLLDN.c  **** 			break;
 581:ServerLLDN.c  **** 		}
 582:ServerLLDN.c  **** 		case APP_STATE_SEND:
 583:ServerLLDN.c  **** 		{
 584:ServerLLDN.c  **** 			appSendData();
 585:ServerLLDN.c  **** 			#if APP_COORDINATOR
 586:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 587:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 588:ServerLLDN.c  **** 			#else
 589:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 590:ServerLLDN.c  **** 			#endif
 591:ServerLLDN.c  **** 			break;
 592:ServerLLDN.c  **** 		}
 593:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 594:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 595:ServerLLDN.c  **** 		{
 596:ServerLLDN.c  **** 			switch(appPanState)
 597:ServerLLDN.c  **** 			{
 598:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 599:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 600:ServerLLDN.c  **** 				{
 601:ServerLLDN.c  **** 					appPanReset();
 602:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 603:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 604:ServerLLDN.c  **** 					cycles_counter = 0;
 605:ServerLLDN.c  **** 					break;
 606:ServerLLDN.c  **** 				}
 607:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 608:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 609:ServerLLDN.c  **** 				{
 610:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 611:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 612:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 613:ServerLLDN.c  **** 					 */
 614:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 2)
 615:ServerLLDN.c  **** 					{	
 616:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 617:ServerLLDN.c  **** 						counter_associados = 0;
 618:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 619:ServerLLDN.c  **** 						// macsc_disable_cmp_int(MACSC_CC1);
 620:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 621:ServerLLDN.c  **** 						msgReq.options = 0;
 622:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 623:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 624:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 625:ServerLLDN.c  **** 						
 626:ServerLLDN.c  **** 					}
 627:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 628:ServerLLDN.c  **** 					else 
 629:ServerLLDN.c  **** 					{
 630:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 631:ServerLLDN.c  **** 						appPanDiscInit();
 632:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 633:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 634:ServerLLDN.c  **** 					}
 635:ServerLLDN.c  **** 					break;
 636:ServerLLDN.c  **** 				}
 637:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 638:ServerLLDN.c  **** 				{
 639:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 640:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 641:ServerLLDN.c  **** 					msgReq.data = NULL;
 642:ServerLLDN.c  **** 					msgReq.size = 0;
 643:ServerLLDN.c  **** 					
 644:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 645:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 646:ServerLLDN.c  **** 					break;
 647:ServerLLDN.c  **** 				}
 648:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 649:ServerLLDN.c  **** 				{
 650:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 651:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 652:ServerLLDN.c  **** 					 */
 653:ServerLLDN.c  **** 					appPanPrepareACK();
 654:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 655:ServerLLDN.c  **** 					
 656:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL; 
 657:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 658:ServerLLDN.c  **** 					break;
 659:ServerLLDN.c  **** 				}
 660:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 661:ServerLLDN.c  **** 				{
 662:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 663:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 664:ServerLLDN.c  **** 					msgReq.data = NULL;
 665:ServerLLDN.c  **** 					msgReq.size = 0;
 666:ServerLLDN.c  **** 					
 667:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 668:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 669:ServerLLDN.c  **** 					break;
 670:ServerLLDN.c  **** 
 671:ServerLLDN.c  **** 				}
 672:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 673:ServerLLDN.c  **** 				{
 674:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 675:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 676:ServerLLDN.c  **** 					msgReq.data = NULL;
 677:ServerLLDN.c  **** 					msgReq.size = 0;
 678:ServerLLDN.c  **** 					
 679:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 680:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 681:ServerLLDN.c  **** 					break;
 682:ServerLLDN.c  **** 				}
 683:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 684:ServerLLDN.c  **** 				{
 685:ServerLLDN.c  **** 
 686:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 687:ServerLLDN.c  **** 					{
 688:ServerLLDN.c  **** 						CopyToConfigRequest();
 689:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 690:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 691:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 692:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 693:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 694:ServerLLDN.c  **** 						
 695:ServerLLDN.c  **** 						counter_associados++;
 696:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 697:ServerLLDN.c  **** 					}
 698:ServerLLDN.c  **** 					else
 699:ServerLLDN.c  **** 					{
 700:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 701:ServerLLDN.c  **** 					}
 702:ServerLLDN.c  **** 					break;
 703:ServerLLDN.c  **** 				}
 704:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 705:ServerLLDN.c  **** 				{
 706:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 707:ServerLLDN.c  **** 					msgReq.data = NULL;
 708:ServerLLDN.c  **** 					msgReq.size = 0;
 709:ServerLLDN.c  **** 					
 710:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 711:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 712:ServerLLDN.c  **** 					cycles_counter++;	
 713:ServerLLDN.c  **** 					
 714:ServerLLDN.c  **** 					break;
 715:ServerLLDN.c  **** 				}
 716:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 717:ServerLLDN.c  **** 				{
 718:ServerLLDN.c  **** 					appPanOnlineInit();
 719:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 720:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 721:ServerLLDN.c  **** 
 722:ServerLLDN.c  **** 					break;
 723:ServerLLDN.c  **** 				}
 724:ServerLLDN.c  **** 				case APP_PAN_STATE_CHECK_TS:
 725:ServerLLDN.c  **** 				{
 726:ServerLLDN.c  **** 					if(timeslot_counter >= assTimeSlot)
 727:ServerLLDN.c  **** 					{
 728:ServerLLDN.c  **** 						printf("\nFim de um Perodo");
 729:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 730:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 731:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 732:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 733:ServerLLDN.c  **** 					}
 734:ServerLLDN.c  **** 					else
 735:ServerLLDN.c  **** 					{
 736:ServerLLDN.c  **** 						/* check if coordinator received any message in last time slot, used to calculate success rat
 737:ServerLLDN.c  **** 						if(timeslot_counter >= 2*MacLLDNMgmtTS && !data_received)
 738:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 739:ServerLLDN.c  **** 						data_received = false;
 740:ServerLLDN.c  **** 						
 741:ServerLLDN.c  **** 						printf("\n------- slot %d --------", timeslot_counter);
 742:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 743:ServerLLDN.c  **** 						timeslot_counter++;
 744:ServerLLDN.c  **** 					}
 745:ServerLLDN.c  **** 					break;
 746:ServerLLDN.c  **** 				}
 747:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_END_BE:
 748:ServerLLDN.c  **** 				{
 749:ServerLLDN.c  **** 					if(0)
 750:ServerLLDN.c  **** 					{
 751:ServerLLDN.c  **** 						// implementar as condies para entrar no processo de associao
 752:ServerLLDN.c  **** 					}
 753:ServerLLDN.c  **** 					else
 754:ServerLLDN.c  **** 					{
 755:ServerLLDN.c  **** 						// posso calcular esse valor no onlineinit, o tTS precisa ser recalculado, o seu valor muda n
 756:ServerLLDN.c  **** 						// pode voltar pro state_online_initial porque precisa reconfigurar os timers
 757:ServerLLDN.c  **** 						// precisa revisar o macsc_enable_manual_bts()
 758:ServerLLDN.c  **** 						/*
 759:ServerLLDN.c  **** 						int idle_time =  2 * numBaseTimeSlotperMgmt * (tTS) * 5 / (SYMBOL_TIME); // 5 is the total of
 760:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(lldn_server_beacon); // esta funo pode s mandar o beacon do online, 
 761:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 762:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 763:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, idle_time, MACSC_CC1);
 764:ServerLLDN.c  **** 						*/
 765:ServerLLDN.c  **** 					}
 766:ServerLLDN.c  **** 					break;
 767:ServerLLDN.c  **** 				}
 768:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 769:ServerLLDN.c  **** 				{
 770:ServerLLDN.c  **** 					msgReq.options = 0;
 771:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 772:ServerLLDN.c  **** 					break;
 773:ServerLLDN.c  **** 				}
 774:ServerLLDN.c  **** 			}
 775:ServerLLDN.c  **** 			break;	
 776:ServerLLDN.c  **** 		}
 777:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 778:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 779:ServerLLDN.c  **** 		{
 780:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
 781:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 782:ServerLLDN.c  **** 			break;
 783:ServerLLDN.c  **** 		}
 784:ServerLLDN.c  **** 		
 785:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 786:ServerLLDN.c  **** 		{
 787:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 788:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0) {
 789:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 790:ServerLLDN.c  **** 			}
 791:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 792:ServerLLDN.c  **** 			else {
 793:ServerLLDN.c  **** 				#if MASTER_MACSC
 794:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 795:ServerLLDN.c  **** 				#else
 796:ServerLLDN.c  **** 				timer_stop();
 797:ServerLLDN.c  **** 				#endif
 798:ServerLLDN.c  **** 			}
 799:ServerLLDN.c  **** 			ack_received = 0;
 800:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 801:ServerLLDN.c  **** 			break;
 802:ServerLLDN.c  **** 		}
 803:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
 804:ServerLLDN.c  **** 		{
 805:ServerLLDN.c  **** 			appPrepareDataFrame();
 806:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 807:ServerLLDN.c  **** 		}
 808:ServerLLDN.c  **** 		#endif
 809:ServerLLDN.c  **** 		default:
 810:ServerLLDN.c  **** 		{
 811:ServerLLDN.c  **** 			break;
 2350               		.loc 6 811 0
 2351 0c32 00C0      		rjmp .L65
 2352               	.L64:
 574:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2353               		.loc 6 574 0
 2354 0c34 0E94 0000 		call appInit
 576:ServerLLDN.c  **** 			#else
 2355               		.loc 6 576 0
 2356 0c38 83E0      		ldi r24,lo8(3)
 2357 0c3a 8093 0000 		sts appState,r24
 580:ServerLLDN.c  **** 		}
 2358               		.loc 6 580 0
 2359 0c3e 00C0      		rjmp .L65
 2360               	.L62:
 584:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2361               		.loc 6 584 0
 2362 0c40 0E94 0000 		call appSendData
 587:ServerLLDN.c  **** 			#else
 2363               		.loc 6 587 0
 2364 0c44 83E0      		ldi r24,lo8(3)
 2365 0c46 8093 0000 		sts appState,r24
 591:ServerLLDN.c  **** 		}
 2366               		.loc 6 591 0
 2367 0c4a 00C0      		rjmp .L65
 2368               	.L63:
 596:ServerLLDN.c  **** 			{
 2369               		.loc 6 596 0
 2370 0c4c 8091 0000 		lds r24,appPanState
 2371 0c50 882F      		mov r24,r24
 2372 0c52 90E0      		ldi r25,0
 2373 0c54 092E      		mov __tmp_reg__,r25
 2374 0c56 000C      		lsl r0
 2375 0c58 AA0B      		sbc r26,r26
 2376 0c5a BB0B      		sbc r27,r27
 2377 0c5c 40E0      		ldi r20,0
 2378 0c5e 50E0      		ldi r21,0
 2379 0c60 2BE0      		ldi r18,lo8(11)
 2380 0c62 30E0      		ldi r19,0
 2381 0c64 841B      		sub r24,r20
 2382 0c66 950B      		sbc r25,r21
 2383 0c68 2817      		cp r18,r24
 2384 0c6a 3907      		cpc r19,r25
 2385 0c6c 00F4      		brsh .+2
 2386 0c6e 00C0      		rjmp .L88
 2387 0c70 8050      		subi r24,lo8(-(gs(.L68)))
 2388 0c72 9040      		sbci r25,hi8(-(gs(.L68)))
 2389 0c74 FC01      		movw r30,r24
 2390 0c76 0C94 0000 		jmp __tablejump2__
 2391               		.section	.progmem.gcc_sw_table,"a",@progbits
 2392               		.p2align	1
 2393               	.L68:
 2394 0000 0000      		.word gs(.L67)
 2395 0002 0000      		.word gs(.L69)
 2396 0004 0000      		.word gs(.L70)
 2397 0006 0000      		.word gs(.L71)
 2398 0008 0000      		.word gs(.L72)
 2399 000a 0000      		.word gs(.L73)
 2400 000c 0000      		.word gs(.L74)
 2401 000e 0000      		.word gs(.L75)
 2402 0010 0000      		.word gs(.L76)
 2403 0012 0000      		.word gs(.L77)
 2404 0014 0000      		.word gs(.L89)
 2405 0016 0000      		.word gs(.L79)
 2406               		.text
 2407               	.L69:
 601:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2408               		.loc 6 601 0
 2409 0c7a 0E94 0000 		call appPanReset
 602:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 2410               		.loc 6 602 0
 2411 0c7e 82E0      		ldi r24,lo8(2)
 2412 0c80 8093 0000 		sts appPanState,r24
 603:ServerLLDN.c  **** 					cycles_counter = 0;
 2413               		.loc 6 603 0
 2414 0c84 82E0      		ldi r24,lo8(2)
 2415 0c86 8093 0000 		sts appState,r24
 604:ServerLLDN.c  **** 					break;
 2416               		.loc 6 604 0
 2417 0c8a 1092 0000 		sts cycles_counter,__zero_reg__
 605:ServerLLDN.c  **** 				}
 2418               		.loc 6 605 0
 2419 0c8e 00C0      		rjmp .L66
 2420               	.L70:
 614:ServerLLDN.c  **** 					{	
 2421               		.loc 6 614 0
 2422 0c90 8091 0000 		lds r24,counter_associados
 2423 0c94 9091 0000 		lds r25,counter_associados+1
 2424 0c98 0C97      		sbiw r24,12
 2425 0c9a 01F0      		breq .L80
 614:ServerLLDN.c  **** 					{	
 2426               		.loc 6 614 0 is_stmt 0 discriminator 1
 2427 0c9c 8091 0000 		lds r24,cycles_counter
 2428 0ca0 8230      		cpi r24,lo8(2)
 2429 0ca2 00F0      		brlo .L81
 2430               	.L80:
 616:ServerLLDN.c  **** 						counter_associados = 0;
 2431               		.loc 6 616 0 is_stmt 1
 2432 0ca4 2091 0000 		lds r18,counter_associados
 2433 0ca8 3091 0000 		lds r19,counter_associados+1
 2434 0cac 8091 0000 		lds r24,cycles_counter
 2435 0cb0 882F      		mov r24,r24
 2436 0cb2 90E0      		ldi r25,0
 2437 0cb4 432F      		mov r20,r19
 2438 0cb6 4F93      		push r20
 2439 0cb8 2F93      		push r18
 2440 0cba 292F      		mov r18,r25
 2441 0cbc 2F93      		push r18
 2442 0cbe 8F93      		push r24
 2443 0cc0 80E0      		ldi r24,lo8(.LC7)
 2444 0cc2 90E0      		ldi r25,hi8(.LC7)
 2445 0cc4 892F      		mov r24,r25
 2446 0cc6 8F93      		push r24
 2447 0cc8 80E0      		ldi r24,lo8(.LC7)
 2448 0cca 90E0      		ldi r25,hi8(.LC7)
 2449 0ccc 8F93      		push r24
 2450 0cce 0E94 0000 		call printf
 2451 0cd2 0F90      		pop __tmp_reg__
 2452 0cd4 0F90      		pop __tmp_reg__
 2453 0cd6 0F90      		pop __tmp_reg__
 2454 0cd8 0F90      		pop __tmp_reg__
 2455 0cda 0F90      		pop __tmp_reg__
 2456 0cdc 0F90      		pop __tmp_reg__
 617:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 2457               		.loc 6 617 0
 2458 0cde 1092 0000 		sts counter_associados+1,__zero_reg__
 2459 0ce2 1092 0000 		sts counter_associados,__zero_reg__
 620:ServerLLDN.c  **** 						msgReq.options = 0;
 2460               		.loc 6 620 0
 2461 0ce6 82E0      		ldi r24,lo8(2)
 2462 0ce8 0E94 0000 		call macsc_disable_cmp_int
 621:ServerLLDN.c  **** 						/* set coordinator node to idle further implementation of online state must be done */
 2463               		.loc 6 621 0
 2464 0cec 1092 0000 		sts msgReq+9+1,__zero_reg__
 2465 0cf0 1092 0000 		sts msgReq+9,__zero_reg__
 623:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 2466               		.loc 6 623 0
 2467 0cf4 81E0      		ldi r24,lo8(1)
 2468 0cf6 8093 0000 		sts appState,r24
 624:ServerLLDN.c  **** 						
 2469               		.loc 6 624 0
 2470 0cfa 89E0      		ldi r24,lo8(9)
 2471 0cfc 8093 0000 		sts appPanState,r24
 635:ServerLLDN.c  **** 				}
 2472               		.loc 6 635 0
 2473 0d00 00C0      		rjmp .L66
 2474               	.L81:
 631:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2475               		.loc 6 631 0
 2476 0d02 0E94 0000 		call appPanDiscInit
 632:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 2477               		.loc 6 632 0
 2478 0d06 81E0      		ldi r24,lo8(1)
 2479 0d08 8093 0000 		sts appState,r24
 633:ServerLLDN.c  **** 					}
 2480               		.loc 6 633 0
 2481 0d0c 83E0      		ldi r24,lo8(3)
 2482 0d0e 8093 0000 		sts appPanState,r24
 635:ServerLLDN.c  **** 				}
 2483               		.loc 6 635 0
 2484 0d12 00C0      		rjmp .L66
 2485               	.L71:
 640:ServerLLDN.c  **** 					msgReq.data = NULL;
 2486               		.loc 6 640 0
 2487 0d14 80E4      		ldi r24,lo8(64)
 2488 0d16 99E0      		ldi r25,lo8(9)
 2489 0d18 9093 0000 		sts msgReq+9+1,r25
 2490 0d1c 8093 0000 		sts msgReq+9,r24
 641:ServerLLDN.c  **** 					msgReq.size = 0;
 2491               		.loc 6 641 0
 2492 0d20 1092 0000 		sts msgReq+13+1,__zero_reg__
 2493 0d24 1092 0000 		sts msgReq+13,__zero_reg__
 642:ServerLLDN.c  **** 					
 2494               		.loc 6 642 0
 2495 0d28 1092 0000 		sts msgReq+15,__zero_reg__
 644:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 2496               		.loc 6 644 0
 2497 0d2c 84E0      		ldi r24,lo8(4)
 2498 0d2e 8093 0000 		sts appState,r24
 645:ServerLLDN.c  **** 					break;
 2499               		.loc 6 645 0
 2500 0d32 84E0      		ldi r24,lo8(4)
 2501 0d34 8093 0000 		sts appPanState,r24
 646:ServerLLDN.c  **** 				}
 2502               		.loc 6 646 0
 2503 0d38 00C0      		rjmp .L66
 2504               	.L72:
 653:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 2505               		.loc 6 653 0
 2506 0d3a 0E94 0000 		call appPanPrepareACK
 654:ServerLLDN.c  **** 					
 2507               		.loc 6 654 0
 2508 0d3e 80E0      		ldi r24,lo8(tmrDelay)
 2509 0d40 90E0      		ldi r25,hi8(tmrDelay)
 2510 0d42 0E94 0000 		call SYS_TimerStart
 656:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2511               		.loc 6 656 0
 2512 0d46 85E0      		ldi r24,lo8(5)
 2513 0d48 8093 0000 		sts appPanState,r24
 657:ServerLLDN.c  **** 					break;
 2514               		.loc 6 657 0
 2515 0d4c 81E0      		ldi r24,lo8(1)
 2516 0d4e 8093 0000 		sts appState,r24
 658:ServerLLDN.c  **** 				}
 2517               		.loc 6 658 0
 2518 0d52 00C0      		rjmp .L66
 2519               	.L73:
 663:ServerLLDN.c  **** 					msgReq.data = NULL;
 2520               		.loc 6 663 0
 2521 0d54 80E4      		ldi r24,lo8(64)
 2522 0d56 92E0      		ldi r25,lo8(2)
 2523 0d58 9093 0000 		sts msgReq+9+1,r25
 2524 0d5c 8093 0000 		sts msgReq+9,r24
 664:ServerLLDN.c  **** 					msgReq.size = 0;
 2525               		.loc 6 664 0
 2526 0d60 1092 0000 		sts msgReq+13+1,__zero_reg__
 2527 0d64 1092 0000 		sts msgReq+13,__zero_reg__
 665:ServerLLDN.c  **** 					
 2528               		.loc 6 665 0
 2529 0d68 1092 0000 		sts msgReq+15,__zero_reg__
 667:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 2530               		.loc 6 667 0
 2531 0d6c 81E0      		ldi r24,lo8(1)
 2532 0d6e 8093 0000 		sts appState,r24
 668:ServerLLDN.c  **** 					break;
 2533               		.loc 6 668 0
 2534 0d72 87E0      		ldi r24,lo8(7)
 2535 0d74 8093 0000 		sts appPanState,r24
 669:ServerLLDN.c  **** 
 2536               		.loc 6 669 0
 2537 0d78 00C0      		rjmp .L66
 2538               	.L75:
 675:ServerLLDN.c  **** 					msgReq.data = NULL;
 2539               		.loc 6 675 0
 2540 0d7a 80E4      		ldi r24,lo8(64)
 2541 0d7c 9AE0      		ldi r25,lo8(10)
 2542 0d7e 9093 0000 		sts msgReq+9+1,r25
 2543 0d82 8093 0000 		sts msgReq+9,r24
 676:ServerLLDN.c  **** 					msgReq.size = 0;
 2544               		.loc 6 676 0
 2545 0d86 1092 0000 		sts msgReq+13+1,__zero_reg__
 2546 0d8a 1092 0000 		sts msgReq+13,__zero_reg__
 677:ServerLLDN.c  **** 					
 2547               		.loc 6 677 0
 2548 0d8e 1092 0000 		sts msgReq+15,__zero_reg__
 679:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2549               		.loc 6 679 0
 2550 0d92 81E0      		ldi r24,lo8(1)
 2551 0d94 8093 0000 		sts appState,r24
 680:ServerLLDN.c  **** 					break;
 2552               		.loc 6 680 0
 2553 0d98 86E0      		ldi r24,lo8(6)
 2554 0d9a 8093 0000 		sts appPanState,r24
 681:ServerLLDN.c  **** 				}
 2555               		.loc 6 681 0
 2556 0d9e 00C0      		rjmp .L66
 2557               	.L74:
 686:ServerLLDN.c  **** 					{
 2558               		.loc 6 686 0
 2559 0da0 8091 0000 		lds r24,conf_req_list
 2560 0da4 9091 0000 		lds r25,conf_req_list+1
 2561 0da8 892B      		or r24,r25
 2562 0daa 01F0      		breq .L83
 688:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 2563               		.loc 6 688 0
 2564 0dac 0E94 0000 		call CopyToConfigRequest
 689:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 2565               		.loc 6 689 0
 2566 0db0 80E0      		ldi r24,0
 2567 0db2 90E8      		ldi r25,lo8(-128)
 2568 0db4 9093 0000 		sts msgReq+9+1,r25
 2569 0db8 8093 0000 		sts msgReq+9,r24
 690:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 2570               		.loc 6 690 0
 2571 0dbc 80E0      		ldi r24,lo8(config_request_frame)
 2572 0dbe 90E0      		ldi r25,hi8(config_request_frame)
 2573 0dc0 9093 0000 		sts msgReq+13+1,r25
 2574 0dc4 8093 0000 		sts msgReq+13,r24
 691:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 2575               		.loc 6 691 0
 2576 0dc8 86E0      		ldi r24,lo8(6)
 2577 0dca 8093 0000 		sts msgReq+15,r24
 692:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 2578               		.loc 6 692 0
 2579 0dce 81E0      		ldi r24,lo8(1)
 2580 0dd0 8093 0000 		sts appState,r24
 693:ServerLLDN.c  **** 						
 2581               		.loc 6 693 0
 2582 0dd4 86E0      		ldi r24,lo8(6)
 2583 0dd6 8093 0000 		sts appPanState,r24
 695:ServerLLDN.c  **** 						SYS_TimerStart(&tmrDelay);
 2584               		.loc 6 695 0
 2585 0dda 8091 0000 		lds r24,counter_associados
 2586 0dde 9091 0000 		lds r25,counter_associados+1
 2587 0de2 0196      		adiw r24,1
 2588 0de4 9093 0000 		sts counter_associados+1,r25
 2589 0de8 8093 0000 		sts counter_associados,r24
 696:ServerLLDN.c  **** 					}
 2590               		.loc 6 696 0
 2591 0dec 80E0      		ldi r24,lo8(tmrDelay)
 2592 0dee 90E0      		ldi r25,hi8(tmrDelay)
 2593 0df0 0E94 0000 		call SYS_TimerStart
 702:ServerLLDN.c  **** 				}
 2594               		.loc 6 702 0
 2595 0df4 00C0      		rjmp .L66
 2596               	.L83:
 700:ServerLLDN.c  **** 					}
 2597               		.loc 6 700 0
 2598 0df6 88E0      		ldi r24,lo8(8)
 2599 0df8 8093 0000 		sts appPanState,r24
 702:ServerLLDN.c  **** 				}
 2600               		.loc 6 702 0
 2601 0dfc 00C0      		rjmp .L66
 2602               	.L76:
 706:ServerLLDN.c  **** 					msgReq.data = NULL;
 2603               		.loc 6 706 0
 2604 0dfe 80E4      		ldi r24,lo8(64)
 2605 0e00 92E1      		ldi r25,lo8(18)
 2606 0e02 9093 0000 		sts msgReq+9+1,r25
 2607 0e06 8093 0000 		sts msgReq+9,r24
 707:ServerLLDN.c  **** 					msgReq.size = 0;
 2608               		.loc 6 707 0
 2609 0e0a 1092 0000 		sts msgReq+13+1,__zero_reg__
 2610 0e0e 1092 0000 		sts msgReq+13,__zero_reg__
 708:ServerLLDN.c  **** 					
 2611               		.loc 6 708 0
 2612 0e12 1092 0000 		sts msgReq+15,__zero_reg__
 710:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2613               		.loc 6 710 0
 2614 0e16 81E0      		ldi r24,lo8(1)
 2615 0e18 8093 0000 		sts appState,r24
 711:ServerLLDN.c  **** 					cycles_counter++;	
 2616               		.loc 6 711 0
 2617 0e1c 82E0      		ldi r24,lo8(2)
 2618 0e1e 8093 0000 		sts appPanState,r24
 712:ServerLLDN.c  **** 					
 2619               		.loc 6 712 0
 2620 0e22 8091 0000 		lds r24,cycles_counter
 2621 0e26 8F5F      		subi r24,lo8(-(1))
 2622 0e28 8093 0000 		sts cycles_counter,r24
 714:ServerLLDN.c  **** 				}
 2623               		.loc 6 714 0
 2624 0e2c 00C0      		rjmp .L66
 2625               	.L77:
 718:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 2626               		.loc 6 718 0
 2627 0e2e 0E94 0000 		call appPanOnlineInit
 719:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 2628               		.loc 6 719 0
 2629 0e32 82E0      		ldi r24,lo8(2)
 2630 0e34 8093 0000 		sts appState,r24
 720:ServerLLDN.c  **** 
 2631               		.loc 6 720 0
 2632 0e38 8BE0      		ldi r24,lo8(11)
 2633 0e3a 8093 0000 		sts appPanState,r24
 722:ServerLLDN.c  **** 				}
 2634               		.loc 6 722 0
 2635 0e3e 00C0      		rjmp .L66
 2636               	.L79:
 726:ServerLLDN.c  **** 					{
 2637               		.loc 6 726 0
 2638 0e40 8091 0000 		lds r24,timeslot_counter
 2639 0e44 282F      		mov r18,r24
 2640 0e46 30E0      		ldi r19,0
 2641 0e48 8091 0000 		lds r24,assTimeSlot
 2642 0e4c 9091 0000 		lds r25,assTimeSlot+1
 2643 0e50 2817      		cp r18,r24
 2644 0e52 3907      		cpc r19,r25
 2645 0e54 04F0      		brlt .L85
 728:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 2646               		.loc 6 728 0
 2647 0e56 80E0      		ldi r24,lo8(.LC8)
 2648 0e58 90E0      		ldi r25,hi8(.LC8)
 2649 0e5a 892F      		mov r24,r25
 2650 0e5c 8F93      		push r24
 2651 0e5e 80E0      		ldi r24,lo8(.LC8)
 2652 0e60 90E0      		ldi r25,hi8(.LC8)
 2653 0e62 8F93      		push r24
 2654 0e64 0E94 0000 		call printf
 2655 0e68 0F90      		pop __tmp_reg__
 2656 0e6a 0F90      		pop __tmp_reg__
 729:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 2657               		.loc 6 729 0
 2658 0e6c 81E0      		ldi r24,lo8(1)
 2659 0e6e 0E94 0000 		call macsc_disable_cmp_int
 730:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2660               		.loc 6 730 0
 2661 0e72 82E0      		ldi r24,lo8(2)
 2662 0e74 0E94 0000 		call macsc_disable_cmp_int
 731:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 2663               		.loc 6 731 0
 2664 0e78 81E0      		ldi r24,lo8(1)
 2665 0e7a 8093 0000 		sts appState,r24
 732:ServerLLDN.c  **** 					}
 2666               		.loc 6 732 0
 2667 0e7e 1092 0000 		sts appPanState,__zero_reg__
 745:ServerLLDN.c  **** 				}
 2668               		.loc 6 745 0
 2669 0e82 00C0      		rjmp .L66
 2670               	.L85:
 737:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 2671               		.loc 6 737 0
 2672 0e84 8091 0000 		lds r24,timeslot_counter
 2673 0e88 8230      		cpi r24,lo8(2)
 2674 0e8a 00F0      		brlo .L87
 737:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 2675               		.loc 6 737 0 is_stmt 0 discriminator 1
 2676 0e8c 9091 0000 		lds r25,data_received
 2677 0e90 81E0      		ldi r24,lo8(1)
 2678 0e92 8927      		eor r24,r25
 2679 0e94 8823      		tst r24
 2680 0e96 01F0      		breq .L87
 738:ServerLLDN.c  **** 						data_received = false;
 2681               		.loc 6 738 0 is_stmt 1
 2682 0e98 8091 0000 		lds r24,timeslot_counter
 2683 0e9c 882F      		mov r24,r24
 2684 0e9e 90E0      		ldi r25,0
 2685 0ea0 0297      		sbiw r24,2
 2686 0ea2 46E4      		ldi r20,lo8(70)
 2687 0ea4 489F      		mul r20,r24
 2688 0ea6 9001      		movw r18,r0
 2689 0ea8 499F      		mul r20,r25
 2690 0eaa 300D      		add r19,r0
 2691 0eac 1124      		clr __zero_reg__
 2692 0eae 2050      		subi r18,lo8(-(nodes_info_arr+67))
 2693 0eb0 3040      		sbci r19,hi8(-(nodes_info_arr+67))
 2694 0eb2 F901      		movw r30,r18
 2695 0eb4 2081      		ld r18,Z
 2696 0eb6 3181      		ldd r19,Z+1
 2697 0eb8 2F5F      		subi r18,-1
 2698 0eba 3F4F      		sbci r19,-1
 2699 0ebc 66E4      		ldi r22,lo8(70)
 2700 0ebe 689F      		mul r22,r24
 2701 0ec0 A001      		movw r20,r0
 2702 0ec2 699F      		mul r22,r25
 2703 0ec4 500D      		add r21,r0
 2704 0ec6 1124      		clr __zero_reg__
 2705 0ec8 CA01      		movw r24,r20
 2706 0eca 8050      		subi r24,lo8(-(nodes_info_arr+67))
 2707 0ecc 9040      		sbci r25,hi8(-(nodes_info_arr+67))
 2708 0ece FC01      		movw r30,r24
 2709 0ed0 3183      		std Z+1,r19
 2710 0ed2 2083      		st Z,r18
 2711               	.L87:
 739:ServerLLDN.c  **** 						
 2712               		.loc 6 739 0
 2713 0ed4 1092 0000 		sts data_received,__zero_reg__
 741:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 2714               		.loc 6 741 0
 2715 0ed8 8091 0000 		lds r24,timeslot_counter
 2716 0edc 882F      		mov r24,r24
 2717 0ede 90E0      		ldi r25,0
 2718 0ee0 292F      		mov r18,r25
 2719 0ee2 2F93      		push r18
 2720 0ee4 8F93      		push r24
 2721 0ee6 80E0      		ldi r24,lo8(.LC9)
 2722 0ee8 90E0      		ldi r25,hi8(.LC9)
 2723 0eea 892F      		mov r24,r25
 2724 0eec 8F93      		push r24
 2725 0eee 80E0      		ldi r24,lo8(.LC9)
 2726 0ef0 90E0      		ldi r25,hi8(.LC9)
 2727 0ef2 8F93      		push r24
 2728 0ef4 0E94 0000 		call printf
 2729 0ef8 0F90      		pop __tmp_reg__
 2730 0efa 0F90      		pop __tmp_reg__
 2731 0efc 0F90      		pop __tmp_reg__
 2732 0efe 0F90      		pop __tmp_reg__
 742:ServerLLDN.c  **** 						timeslot_counter++;
 2733               		.loc 6 742 0
 2734 0f00 81E0      		ldi r24,lo8(1)
 2735 0f02 8093 0000 		sts appState,r24
 743:ServerLLDN.c  **** 					}
 2736               		.loc 6 743 0
 2737 0f06 8091 0000 		lds r24,timeslot_counter
 2738 0f0a 8F5F      		subi r24,lo8(-(1))
 2739 0f0c 8093 0000 		sts timeslot_counter,r24
 745:ServerLLDN.c  **** 				}
 2740               		.loc 6 745 0
 2741 0f10 00C0      		rjmp .L66
 2742               	.L67:
 770:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 2743               		.loc 6 770 0
 2744 0f12 1092 0000 		sts msgReq+9+1,__zero_reg__
 2745 0f16 1092 0000 		sts msgReq+9,__zero_reg__
 771:ServerLLDN.c  **** 					break;
 2746               		.loc 6 771 0
 2747 0f1a 81E0      		ldi r24,lo8(1)
 2748 0f1c 8093 0000 		sts appState,r24
 772:ServerLLDN.c  **** 				}
 2749               		.loc 6 772 0
 2750 0f20 00C0      		rjmp .L66
 2751               	.L89:
 766:ServerLLDN.c  **** 				}
 2752               		.loc 6 766 0
 2753 0f22 0000      		nop
 2754               	.L66:
 2755               	.L88:
 775:ServerLLDN.c  **** 		}
 2756               		.loc 6 775 0
 2757 0f24 0000      		nop
 2758               	.L65:
 812:ServerLLDN.c  **** 		}
 813:ServerLLDN.c  **** 	}
 814:ServerLLDN.c  **** }
 2759               		.loc 6 814 0
 2760 0f26 0000      		nop
 2761               	/* epilogue start */
 2762 0f28 DF91      		pop r29
 2763 0f2a CF91      		pop r28
 2764 0f2c 0895      		ret
 2765               		.cfi_endproc
 2766               	.LFE146:
 2768               		.section	.rodata
 2769               	.LC0:
 2770 007b 00        		.byte	0
 2771 007c C2        		.byte	-62
 2772 007d 01        		.byte	1
 2773 007e 00        		.byte	0
 2774 007f 03        		.byte	3
 2775 0080 00        		.byte	0
 2776 0081 00        		.byte	0
 2777               		.text
 2778               	.global	main
 2780               	main:
 2781               	.LFB147:
 815:ServerLLDN.c  **** 
 816:ServerLLDN.c  **** 	/*****************************************************************************
 817:ServerLLDN.c  **** 	*****************************************************************************/
 818:ServerLLDN.c  **** 	int main(void)
 819:ServerLLDN.c  **** 	{
 2782               		.loc 6 819 0
 2783               		.cfi_startproc
 2784 0f2e 0F93      		push r16
 2785               	.LCFI92:
 2786               		.cfi_def_cfa_offset 3
 2787               		.cfi_offset 16, -2
 2788 0f30 1F93      		push r17
 2789               	.LCFI93:
 2790               		.cfi_def_cfa_offset 4
 2791               		.cfi_offset 17, -3
 2792 0f32 CF93      		push r28
 2793               	.LCFI94:
 2794               		.cfi_def_cfa_offset 5
 2795               		.cfi_offset 28, -4
 2796 0f34 DF93      		push r29
 2797               	.LCFI95:
 2798               		.cfi_def_cfa_offset 6
 2799               		.cfi_offset 29, -5
 2800 0f36 CDB7      		in r28,__SP_L__
 2801 0f38 DEB7      		in r29,__SP_H__
 2802               	.LCFI96:
 2803               		.cfi_def_cfa_register 28
 2804 0f3a 2797      		sbiw r28,7
 2805               	.LCFI97:
 2806               		.cfi_def_cfa_offset 13
 2807 0f3c 0FB6      		in __tmp_reg__,__SREG__
 2808 0f3e F894      		cli
 2809 0f40 DEBF      		out __SP_H__,r29
 2810 0f42 0FBE      		out __SREG__,__tmp_reg__
 2811 0f44 CDBF      		out __SP_L__,r28
 2812               	/* prologue: function */
 2813               	/* frame size = 7 */
 2814               	/* stack size = 11 */
 2815               	.L__stack_usage = 11
 820:ServerLLDN.c  **** 		sysclk_init();
 2816               		.loc 6 820 0
 2817 0f46 0E94 0000 		call sysclk_init
 821:ServerLLDN.c  **** 		board_init();
 2818               		.loc 6 821 0
 2819 0f4a 0E94 0000 		call board_init
 822:ServerLLDN.c  **** 
 823:ServerLLDN.c  **** 		SYS_Init();
 2820               		.loc 6 823 0
 2821 0f4e 0E94 0000 		call SYS_Init
 824:ServerLLDN.c  **** 		/* Disable CSMA/CA
 825:ServerLLDN.c  **** 		 * Disable auto ACK
 826:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
 827:ServerLLDN.c  **** 		 */
 828:ServerLLDN.c  **** 
 829:ServerLLDN.c  **** 		sm_init();
 2822               		.loc 6 829 0
 2823 0f52 0E94 0000 		call sm_init
 830:ServerLLDN.c  **** 
 831:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
 832:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 833:ServerLLDN.c  **** 		irq_initialize_vectors();
 834:ServerLLDN.c  **** 	#endif
 835:ServerLLDN.c  **** 		cpu_irq_enable();
 2824               		.loc 6 835 0
 2825               	/* #APP */
 2826               	 ;  835 "ServerLLDN.c" 1
 2827 0f56 7894      		sei
 2828               	 ;  0 "" 2
 836:ServerLLDN.c  **** 
 837:ServerLLDN.c  **** 	#if 1
 838:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
 839:ServerLLDN.c  **** 		stdio_usb_init();
 840:ServerLLDN.c  **** 	#else
 841:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 2829               		.loc 6 841 0
 2830               	/* #NOAPP */
 2831 0f58 27E0      		ldi r18,lo8(7)
 2832 0f5a E0E0      		ldi r30,lo8(.LC0)
 2833 0f5c F0E0      		ldi r31,hi8(.LC0)
 2834 0f5e CE01      		movw r24,r28
 2835 0f60 0196      		adiw r24,1
 2836 0f62 DC01      		movw r26,r24
 2837               		0:
 2838 0f64 0190      		ld r0,Z+
 2839 0f66 0D92      		st X+,r0
 2840 0f68 2A95      		dec r18
 2841 0f6a 01F4      		brne 0b
 842:ServerLLDN.c  **** 		{
 843:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
 844:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
 845:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
 846:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
 847:ServerLLDN.c  **** 		};
 848:ServerLLDN.c  **** 
 849:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 2842               		.loc 6 849 0
 2843 0f6c CE01      		movw r24,r28
 2844 0f6e 0196      		adiw r24,1
 2845 0f70 BC01      		movw r22,r24
 2846 0f72 80EC      		ldi r24,lo8(-64)
 2847 0f74 90E0      		ldi r25,0
 2848 0f76 0E94 0000 		call stdio_serial_init
 850:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 2849               		.loc 6 850 0
 2850 0f7a 80EC      		ldi r24,lo8(-64)
 2851 0f7c 90E0      		ldi r25,0
 2852 0f7e 0E94 0000 		call usart_double_baud_enable
 851:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 2853               		.loc 6 851 0
 2854 0f82 0E94 0000 		call sysclk_get_source_clock_hz
 2855 0f86 DC01      		movw r26,r24
 2856 0f88 CB01      		movw r24,r22
 2857 0f8a 8C01      		movw r16,r24
 2858 0f8c 9D01      		movw r18,r26
 2859 0f8e 40E0      		ldi r20,0
 2860 0f90 52EC      		ldi r21,lo8(-62)
 2861 0f92 61E0      		ldi r22,lo8(1)
 2862 0f94 70E0      		ldi r23,0
 2863 0f96 80EC      		ldi r24,lo8(-64)
 2864 0f98 90E0      		ldi r25,0
 2865 0f9a 0E94 0000 		call usart_set_baudrate_precalculated
 2866               	.L91:
 852:ServerLLDN.c  **** 
 853:ServerLLDN.c  **** 	#endif
 854:ServerLLDN.c  **** 	#endif
 855:ServerLLDN.c  **** 		for(;;)
 856:ServerLLDN.c  **** 		{
 857:ServerLLDN.c  **** 			SYS_TaskHandler();
 2867               		.loc 6 857 0 discriminator 1
 2868 0f9e 0E94 0000 		call SYS_TaskHandler
 858:ServerLLDN.c  **** 			APP_TaskHandler();
 2869               		.loc 6 858 0 discriminator 1
 2870 0fa2 0E94 0000 		call APP_TaskHandler
 859:ServerLLDN.c  **** 		}
 2871               		.loc 6 859 0 discriminator 1
 2872 0fa6 00C0      		rjmp .L91
 2873               		.cfi_endproc
 2874               	.LFE147:
 2876               	.Letext0:
 2877               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 2878               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 2879               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 2880               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 2881               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 2882               		.file 12 "lldn.h"
 2883               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 2884               		.file 14 "config/config.h"
 2885               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:14     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:51     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:88     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:100    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:112    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:123    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:172    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:267    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:311    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:362    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:433    .text:0000019e macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:487    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:492    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:497    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:505    .text:000001d2 appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:567    .data.appPanState:00000000 appPanState
                            *COM*:00000dac nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:574    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:584    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000021 ACKFrame
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:591    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:597    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:603    .bss.macLLDNnumUplinkTS:00000000 macLLDNnumUplinkTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:608    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:614    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:620    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:626    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:632    .data.cycles_counter:00000000 cycles_counter
                            *COM*:00001996 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:639    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:645    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:651    .bss.succes_rate:00000000 succes_rate
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:655    .text:0000021e tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:695    .text:0000023e lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:730    .text:00000258 time_slot_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:765    .text:00000272 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:805    .text:00000296 end_of_online_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:845    .text:000002b2 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:991    .text:00000390 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1225   .text:0000052c CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1314   .text:000005ae appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1467   .text:00000688 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1637   .text:0000079a appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1689   .text:000007e0 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:1889   .text:0000090e appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:2077   .text:00000a78 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:2233   .text:00000b9c appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:2318   .text:00000c12 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccrijmja.s:2780   .text:00000f2e main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
NWK_DataReq
malloc
free
__floatsisf
__addsf3
__divsf3
__mulsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
