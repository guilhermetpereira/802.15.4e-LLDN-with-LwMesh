   1               		.file	"ServerLLDN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.comm	n,1,1
  12               		.comm	tTS,4,1
  13               		.comm	macLLDNnumTimeSlots,2,1
  14               		.comm	macLLDNnumUplinkTS,2,1
  15               		.comm	macLLDNRetransmitTS,2,1
  17               	sysclk_get_main_hz:
  18               	.LFB67:
  19               		.file 1 "../../../platform/common/services/clock/mega/sysclk.h"
   1:../../../platform/common/services/clock/mega/sysclk.h **** /**
   2:../../../platform/common/services/clock/mega/sysclk.h ****  * \file
   3:../../../platform/common/services/clock/mega/sysclk.h ****  *
   4:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Chip-specific system clock management functions
   5:../../../platform/common/services/clock/mega/sysclk.h ****  *
   6:../../../platform/common/services/clock/mega/sysclk.h ****  * Copyright (c) 2012 Atmel Corporation. All rights reserved.
   7:../../../platform/common/services/clock/mega/sysclk.h ****  *
   8:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_start
   9:../../../platform/common/services/clock/mega/sysclk.h ****  *
  10:../../../platform/common/services/clock/mega/sysclk.h ****  * \page License
  11:../../../platform/common/services/clock/mega/sysclk.h ****  *
  12:../../../platform/common/services/clock/mega/sysclk.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/common/services/clock/mega/sysclk.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/common/services/clock/mega/sysclk.h ****  *
  15:../../../platform/common/services/clock/mega/sysclk.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/common/services/clock/mega/sysclk.h ****  *
  18:../../../platform/common/services/clock/mega/sysclk.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/common/services/clock/mega/sysclk.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/common/services/clock/mega/sysclk.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/common/services/clock/mega/sysclk.h ****  *
  22:../../../platform/common/services/clock/mega/sysclk.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/common/services/clock/mega/sysclk.h ****  *    from this software without specific prior written permission.
  24:../../../platform/common/services/clock/mega/sysclk.h ****  *
  25:../../../platform/common/services/clock/mega/sysclk.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/common/services/clock/mega/sysclk.h ****  *    Atmel microcontroller product.
  27:../../../platform/common/services/clock/mega/sysclk.h ****  *
  28:../../../platform/common/services/clock/mega/sysclk.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/common/services/clock/mega/sysclk.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/common/services/clock/mega/sysclk.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/common/services/clock/mega/sysclk.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/common/services/clock/mega/sysclk.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/common/services/clock/mega/sysclk.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/common/services/clock/mega/sysclk.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/common/services/clock/mega/sysclk.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/common/services/clock/mega/sysclk.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/common/services/clock/mega/sysclk.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/common/services/clock/mega/sysclk.h ****  *
  40:../../../platform/common/services/clock/mega/sysclk.h ****  * \asf_license_stop
  41:../../../platform/common/services/clock/mega/sysclk.h ****  *
  42:../../../platform/common/services/clock/mega/sysclk.h ****  */
  43:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef MEGA_SYSCLK_H_INCLUDED
  44:../../../platform/common/services/clock/mega/sysclk.h **** #define MEGA_SYSCLK_H_INCLUDED
  45:../../../platform/common/services/clock/mega/sysclk.h **** 
  46:../../../platform/common/services/clock/mega/sysclk.h **** #include <board.h>
  47:../../../platform/common/services/clock/mega/sysclk.h **** #include <compiler.h>
  48:../../../platform/common/services/clock/mega/sysclk.h **** #include <parts.h>
  49:../../../platform/common/services/clock/mega/sysclk.h **** 
  50:../../../platform/common/services/clock/mega/sysclk.h **** /* Include clock configuration for the project. */
  51:../../../platform/common/services/clock/mega/sysclk.h **** #include <conf_clock.h>
  52:../../../platform/common/services/clock/mega/sysclk.h **** 
  53:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef __cplusplus
  54:../../../platform/common/services/clock/mega/sysclk.h **** extern "C" {
  55:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  56:../../../platform/common/services/clock/mega/sysclk.h **** #define ASM __asm__
  57:../../../platform/common/services/clock/mega/sysclk.h **** 
  58:../../../platform/common/services/clock/mega/sysclk.h **** /* CONFIG_SYSCLK_PSDIV  to use default if not defined*/
  59:../../../platform/common/services/clock/mega/sysclk.h **** #ifndef CONFIG_SYSCLK_PSDIV
  60:../../../platform/common/services/clock/mega/sysclk.h **** # define CONFIG_SYSCLK_PSDIV    SYSCLK_PSDIV_8
  61:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  62:../../../platform/common/services/clock/mega/sysclk.h **** 
  63:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Prescaler Setting (relative to CLKsys) */
  64:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
  65:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_1      0   /* !< Do not prescale */
  66:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_2      1   /* !< Prescale CLKper4 by 2 */
  67:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_4      2   /* !< Prescale CLKper4 by 4 */
  68:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_8      3   /* !< Prescale CLKper4 by 8 */
  69:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_16     4   /* !< Prescale CLKper4 by 16 */
  70:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_32     5   /* !< Prescale CLKper4 by 32 */
  71:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_64     6   /* !< Prescale CLKper4 by 64 */
  72:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_128    7   /* !< Prescale CLKper4 by 128 */
  73:../../../platform/common/services/clock/mega/sysclk.h **** #define SYSCLK_PSDIV_256    8   /* !< Prescale CLKper4 by 256 */
  74:../../../platform/common/services/clock/mega/sysclk.h **** 
  75:../../../platform/common/services/clock/mega/sysclk.h **** /* @} */
  76:../../../platform/common/services/clock/mega/sysclk.h **** 
  77:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX0_1 || MEGA_XX4 || MEGA_XX4_A
  78:../../../platform/common/services/clock/mega/sysclk.h **** 
  79:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       2
  80:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  81:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR0
  82:../../../platform/common/services/clock/mega/sysclk.h **** 
  83:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
  84:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
  85:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR0 */
  86:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX4 || !MEGA_XX4_A || MEGA_XX0_1
  87:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG1,     /* !< Devices on PRR1 */
  88:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  89:../../../platform/common/services/clock/mega/sysclk.h **** };
  90:../../../platform/common/services/clock/mega/sysclk.h **** #endif
  91:../../../platform/common/services/clock/mega/sysclk.h **** 
  92:../../../platform/common/services/clock/mega/sysclk.h **** /****************************************************
  93:../../../platform/common/services/clock/mega/sysclk.h ****  * Given a dummy type but not used for these groups
  94:../../../platform/common/services/clock/mega/sysclk.h ****  * to support for otherthen megaRF device.
  95:../../../platform/common/services/clock/mega/sysclk.h ****  **************************************************/
  96:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX8 || MEGA_XX8_A || MEGA_UNSPECIFIED
  97:../../../platform/common/services/clock/mega/sysclk.h **** #define NUMBER_OF_POWER_REG       1
  98:../../../platform/common/services/clock/mega/sysclk.h **** /*Starting Address for power reduction*/
  99:../../../platform/common/services/clock/mega/sysclk.h **** #define POWER_REG_ADD             PRR
 100:../../../platform/common/services/clock/mega/sysclk.h **** 
 101:../../../platform/common/services/clock/mega/sysclk.h **** /* ! \name Power Reduction  Clock Port Numbers */
 102:../../../platform/common/services/clock/mega/sysclk.h **** enum power_red_id {
 103:../../../platform/common/services/clock/mega/sysclk.h **** 	POWER_RED_REG0,     /* !< Devices on PRR */
 104:../../../platform/common/services/clock/mega/sysclk.h **** };
 105:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 106:../../../platform/common/services/clock/mega/sysclk.h **** 
 107:../../../platform/common/services/clock/mega/sysclk.h **** /* Bit mask for the power reduction register based on */
 108:../../../platform/common/services/clock/mega/sysclk.h **** /*   MCU ARCH.                                        */
 109:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 110:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for PRR2 */
 111:../../../platform/common/services/clock/mega/sysclk.h **** 
 112:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM0_bm                       1 << PRRAM0
 113:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM1_bm                       1 << PRRAM1
 114:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM2_bm                       1 << PRRAM2
 115:../../../platform/common/services/clock/mega/sysclk.h **** #define PRRAM3_bm                       1 << PRRAM3
 116:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 117:../../../platform/common/services/clock/mega/sysclk.h **** 
 118:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for the power reduction 0 or PRR*/
 119:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_XX_UN0 && !MEGA_XX_UN0
 120:../../../platform/common/services/clock/mega/sysclk.h **** #define PRADC_bm                        1 << PRADC
 121:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART0_bm                     1 << PRUSART0
 122:../../../platform/common/services/clock/mega/sysclk.h **** #define PRSPI_bm                        1 << PRSPI
 123:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM1_bm                       1 << PRTIM1
 124:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 125:../../../platform/common/services/clock/mega/sysclk.h **** 
 126:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 127:../../../platform/common/services/clock/mega/sysclk.h **** #define PRPGA_bm                        1 << PRPGA
 128:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 129:../../../platform/common/services/clock/mega/sysclk.h **** 
 130:../../../platform/common/services/clock/mega/sysclk.h **** #if !MEGA_UNSPECIFIED
 131:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM0_bm                       1 << PRTIM0
 132:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM2_bm                       1 << PRTIM2
 133:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTWI_bm                        1 << PRTWI
 134:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 135:../../../platform/common/services/clock/mega/sysclk.h **** 
 136:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_XX_UN2
 137:../../../platform/common/services/clock/mega/sysclk.h **** #define PRLCD_bm                        1 << PRLCD
 138:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 139:../../../platform/common/services/clock/mega/sysclk.h **** 
 140:../../../platform/common/services/clock/mega/sysclk.h **** /*Bit mask for  PRR1  */
 141:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef PRR1
 142:../../../platform/common/services/clock/mega/sysclk.h **** #if (MEGA_XX4 || MEGA_XX4_A)
 143:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 144:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 145:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 146:../../../platform/common/services/clock/mega/sysclk.h **** 
 147:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF || MEGA_XX4 || MEGA_XX4_A
 148:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART1_bm                     1 << PRUSART1
 149:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART2_bm                     1 << PRUSART2
 150:../../../platform/common/services/clock/mega/sysclk.h **** #define PRUSART3_bm                     1 << PRUSART3
 151:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM3_bm                       1 << PRTIM3
 152:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM4_bm                       1 << PRTIM4
 153:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTIM5_bm                       1 << PRTIM5
 154:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 155:../../../platform/common/services/clock/mega/sysclk.h **** 
 156:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 157:../../../platform/common/services/clock/mega/sysclk.h **** #define PRTRX24_bm                      1 << PRTRX24
 158:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 159:../../../platform/common/services/clock/mega/sysclk.h **** 
 160:../../../platform/common/services/clock/mega/sysclk.h **** /**
 161:../../../platform/common/services/clock/mega/sysclk.h ****  * \name Querying the system clock and its derived clocks
 162:../../../platform/common/services/clock/mega/sysclk.h ****  */
 163:../../../platform/common/services/clock/mega/sysclk.h **** /* @{ */
 164:../../../platform/common/services/clock/mega/sysclk.h **** 
 165:../../../platform/common/services/clock/mega/sysclk.h **** /**
 166:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of the main system clock
 167:../../../platform/common/services/clock/mega/sysclk.h ****  * To know the clock value at what frequency the main clock is running
 168:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the main system clock, in Hz.
 169:../../../platform/common/services/clock/mega/sysclk.h ****  * \todo : please initialize the SYSCLK_SOURCE in conf_clock.h file for
 170:../../../platform/common/services/clock/mega/sysclk.h ****  * configured source clock using fuses.
 171:../../../platform/common/services/clock/mega/sysclk.h ****  * \eg. #define SYSCLK_SOURCE SYSCLK_SRC_RC16MHZ to use internal RC
 172:../../../platform/common/services/clock/mega/sysclk.h ****  * oscillator for clock source.
 173:../../../platform/common/services/clock/mega/sysclk.h ****  */
 174:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_main_hz(void)
 175:../../../platform/common/services/clock/mega/sysclk.h **** {
  20               		.loc 1 175 0
  21               		.cfi_startproc
  22 0000 CF93      		push r28
  23               	.LCFI0:
  24               		.cfi_def_cfa_offset 3
  25               		.cfi_offset 28, -2
  26 0002 DF93      		push r29
  27               	.LCFI1:
  28               		.cfi_def_cfa_offset 4
  29               		.cfi_offset 29, -3
  30 0004 CDB7      		in r28,__SP_L__
  31 0006 DEB7      		in r29,__SP_H__
  32               	.LCFI2:
  33               		.cfi_def_cfa_register 28
  34               	/* prologue: function */
  35               	/* frame size = 0 */
  36               	/* stack size = 2 */
  37               	.L__stack_usage = 2
 176:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (SYSCLK_SOURCE) {
 177:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC16MHZ:
 178:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
 179:../../../platform/common/services/clock/mega/sysclk.h **** 
 180:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_RC128KHZ:
 181:../../../platform/common/services/clock/mega/sysclk.h **** 		return 128000UL;
 182:../../../platform/common/services/clock/mega/sysclk.h **** 
 183:../../../platform/common/services/clock/mega/sysclk.h **** #if MEGA_RF
 184:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_TRS16MHZ:
 185:../../../platform/common/services/clock/mega/sysclk.h **** 		return 16000000UL;
  38               		.loc 1 185 0
  39 0008 80E0      		ldi r24,0
  40 000a 94E2      		ldi r25,lo8(36)
  41 000c A4EF      		ldi r26,lo8(-12)
  42 000e B0E0      		ldi r27,0
 186:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 187:../../../platform/common/services/clock/mega/sysclk.h **** #ifdef BOARD_EXTERNAL_CLK
 188:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_SRC_EXTERNAL:
 189:../../../platform/common/services/clock/mega/sysclk.h **** 		return BOARD_EXTERNAL_CLK;
 190:../../../platform/common/services/clock/mega/sysclk.h **** #endif
 191:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 192:../../../platform/common/services/clock/mega/sysclk.h **** 
 193:../../../platform/common/services/clock/mega/sysclk.h **** 		return 1000000UL;
 194:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 195:../../../platform/common/services/clock/mega/sysclk.h **** }
  43               		.loc 1 195 0
  44 0010 BC01      		movw r22,r24
  45 0012 CD01      		movw r24,r26
  46               	/* epilogue start */
  47 0014 DF91      		pop r29
  48 0016 CF91      		pop r28
  49 0018 0895      		ret
  50               		.cfi_endproc
  51               	.LFE67:
  54               	sysclk_get_source_clock_hz:
  55               	.LFB68:
 196:../../../platform/common/services/clock/mega/sysclk.h **** 
 197:../../../platform/common/services/clock/mega/sysclk.h **** /**
 198:../../../platform/common/services/clock/mega/sysclk.h ****  * \brief Return the current rate in Hz of source clock in Hz.
 199:../../../platform/common/services/clock/mega/sysclk.h ****  *
 200:../../../platform/common/services/clock/mega/sysclk.h ****  * This clock always runs at the same rate as the CPU clock unless the divider
 201:../../../platform/common/services/clock/mega/sysclk.h ****  * is set.
 202:../../../platform/common/services/clock/mega/sysclk.h ****  *
 203:../../../platform/common/services/clock/mega/sysclk.h ****  * \return Frequency of the system clock, in Hz.
 204:../../../platform/common/services/clock/mega/sysclk.h ****  */
 205:../../../platform/common/services/clock/mega/sysclk.h **** static inline uint32_t sysclk_get_source_clock_hz(void)
 206:../../../platform/common/services/clock/mega/sysclk.h **** {
  56               		.loc 1 206 0
  57               		.cfi_startproc
  58 001a CF93      		push r28
  59               	.LCFI3:
  60               		.cfi_def_cfa_offset 3
  61               		.cfi_offset 28, -2
  62 001c DF93      		push r29
  63               	.LCFI4:
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 001e CDB7      		in r28,__SP_L__
  67 0020 DEB7      		in r29,__SP_H__
  68               	.LCFI5:
  69               		.cfi_def_cfa_register 28
  70               	/* prologue: function */
  71               	/* frame size = 0 */
  72               	/* stack size = 2 */
  73               	.L__stack_usage = 2
 207:../../../platform/common/services/clock/mega/sysclk.h **** 	switch (CONFIG_SYSCLK_PSDIV) {
 208:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_1: /* Fall through */
 209:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 210:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 211:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 212:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 213:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz();
  74               		.loc 1 213 0
  75 0022 0E94 0000 		call sysclk_get_main_hz
  76 0026 DC01      		movw r26,r24
  77 0028 CB01      		movw r24,r22
 214:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 215:../../../platform/common/services/clock/mega/sysclk.h **** 
 216:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_2:
 217:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 218:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 219:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 220:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 221:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 2;
 222:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 223:../../../platform/common/services/clock/mega/sysclk.h **** 
 224:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_4:
 225:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 226:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 227:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 228:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 229:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 4;
 230:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 231:../../../platform/common/services/clock/mega/sysclk.h **** 
 232:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_8:
 233:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 234:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 235:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 236:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 237:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 8;
 238:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 239:../../../platform/common/services/clock/mega/sysclk.h **** 
 240:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_16:
 241:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 242:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 243:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 244:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 245:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 16;
 246:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 247:../../../platform/common/services/clock/mega/sysclk.h **** 
 248:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_32:
 249:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 250:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 251:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 252:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 253:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 32;
 254:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 255:../../../platform/common/services/clock/mega/sysclk.h **** 
 256:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_64:
 257:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 258:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 259:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 260:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 261:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 64;
 262:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 263:../../../platform/common/services/clock/mega/sysclk.h **** 
 264:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_128:
 265:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 266:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 267:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 268:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 269:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 128;
 270:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 271:../../../platform/common/services/clock/mega/sysclk.h **** 
 272:../../../platform/common/services/clock/mega/sysclk.h **** 	case SYSCLK_PSDIV_256:
 273:../../../platform/common/services/clock/mega/sysclk.h **** 		if (SYSCLK_SOURCE == SYSCLK_SRC_RC16MHZ ||
 274:../../../platform/common/services/clock/mega/sysclk.h **** 				SYSCLK_SOURCE == SYSCLK_SRC_RC128KHZ) {
 275:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 512;
 276:../../../platform/common/services/clock/mega/sysclk.h **** 		} else {
 277:../../../platform/common/services/clock/mega/sysclk.h **** 			return sysclk_get_main_hz() / 256;
 278:../../../platform/common/services/clock/mega/sysclk.h **** 		}
 279:../../../platform/common/services/clock/mega/sysclk.h **** 
 280:../../../platform/common/services/clock/mega/sysclk.h **** 	default:
 281:../../../platform/common/services/clock/mega/sysclk.h **** 		/*Invalide case*/
 282:../../../platform/common/services/clock/mega/sysclk.h **** 		return 0;
 283:../../../platform/common/services/clock/mega/sysclk.h **** 	}
 284:../../../platform/common/services/clock/mega/sysclk.h **** }
  78               		.loc 1 284 0
  79 002a BC01      		movw r22,r24
  80 002c CD01      		movw r24,r26
  81               	/* epilogue start */
  82 002e DF91      		pop r29
  83 0030 CF91      		pop r28
  84 0032 0895      		ret
  85               		.cfi_endproc
  86               	.LFE68:
  88               		.section	.progmem.data.baudctrl_1mhz,"a",@progbits
  91               	baudctrl_1mhz:
  92 0000 3300      		.word	51
  93 0002 1900      		.word	25
  94 0004 0C00      		.word	12
  95 0006 0600      		.word	6
  96 0008 0300      		.word	3
  97 000a 0200      		.word	2
  98 000c 0100      		.word	1
  99 000e FF00      		.word	255
 100               		.section	.progmem.data.baudctrl_8mhz,"a",@progbits
 103               	baudctrl_8mhz:
 104 0000 A001      		.word	416
 105 0002 CF00      		.word	207
 106 0004 6700      		.word	103
 107 0006 3300      		.word	51
 108 0008 1900      		.word	25
 109 000a 0C00      		.word	12
 110 000c 0700      		.word	7
 111 000e 0800      		.word	8
 112               		.section	.progmem.data.baudctrl_16mhz,"a",@progbits
 115               	baudctrl_16mhz:
 116 0000 4003      		.word	832
 117 0002 A001      		.word	416
 118 0004 CF00      		.word	207
 119 0006 6700      		.word	103
 120 0008 3300      		.word	51
 121 000a 1900      		.word	25
 122 000c 1000      		.word	16
 123 000e 1000      		.word	16
 124               		.text
 126               	usart_double_baud_enable:
 127               	.LFB101:
 128               		.file 2 "../../../platform/mega_rf/drivers/usart/usart_megarf.h"
   1:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief USART driver for AVR MEGARF.
   5:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This file contains basic functions for the AVR MEGA USART, with support for
   7:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * all modes, settings and clock speeds.
   8:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
   9:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Copyright (c) 2013-2015 Atmel Corporation. All rights reserved.
  10:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  11:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_start
  12:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  13:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \page License
  14:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  16:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  17:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  19:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer.
  20:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  21:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  23:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    and/or other materials provided with the distribution.
  24:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  26:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    from this software without specific prior written permission.
  27:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  29:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *    Atmel microcontroller product.
  30:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  31:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  32:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  33:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  34:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  35:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  36:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  37:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  38:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  39:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  40:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  41:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  42:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  43:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \asf_license_stop
  44:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  45:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  46:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifndef _USART_MEGARF_H_
  47:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define _USART_MEGARF_H_
  48:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  49:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #ifdef __cplusplus
  50:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** extern "C" {
  51:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #endif
  52:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  53:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "compiler.h"
  54:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #include "status_codes.h"
  55:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  56:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
  57:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \defgroup megarf_usart_group USART module (USART)
  58:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * See \ref megarf_usart_quickstart.
  60:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  61:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * This is a driver for configuring, enabling, disabling and use of the on-chip
  62:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART.
  63:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  64:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \section dependencies Dependencies
  65:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  66:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * The USART module depends on the following modules:
  67:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref sysclk_group for peripheral clock control.
  68:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  - \ref port_driver_group for peripheral io port control.
  69:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
  70:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * @{
  71:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
  72:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  73:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 1200 */
  74:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_1200      0x00
  75:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 2400 */
  76:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_2400      0x01
  77:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 4800 */
  78:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_4800      0x02
  79:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 9600 */
  80:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_9600      0x03
  81:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 19200 */
  82:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_19200     0x04
  83:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 38400 */
  84:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_38400     0x05
  85:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 57600 */
  86:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_57600     0x06
  87:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Offset in lookup table for baudrate 115200 */
  88:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_115200    0x07
  89:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Baudrate not in lookup table */
  90:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_BAUD_UNDEFINED 0xFF
  91:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
  92:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint8_t register8_t;
  93:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef volatile uint16_t register16_t;
  94:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Universal Synchronous/Asynchronous Receiver/Transmitter */
  95:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct USART_struct {
  96:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnA;  /* Control Register A */
  97:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnB;  /* Control Register B */
  98:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UCSRnC;  /* Control Register C */
  99:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t reserved;
 100:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register16_t UBRR;  /* Baud Rate Register Value */
 101:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	register8_t UDR;  /* I/O Data Register */
 102:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_t;
 103:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 104:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA0    (*(USART_t *)0xC0)   /* Universal Asynchronous
 105:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A0 */
 106:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USARTA1    (*(USART_t *)0XC8)   /* Universal Asynchronous
 107:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                 * Receiver-Transmitter A1 */
 108:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 109:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxA  bit masks and bit positions */
 110:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bm  0x80 /* RX complete bit mask.*/
 111:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXC_bp  7 /* RX complete bit position.*/
 112:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 113:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bm  0x40 /* TX complete bit mask.*/
 114:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXC_bp  6 /* TX complete bit position.*/
 115:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 116:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bm  0x20 /* DATA Register Empty Bit mask.*/
 117:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRE_bp  5 /*  DATA Register Empty bit position.*/
 118:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 119:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bm   0x10 /* Frame Error bit mask.*/
 120:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_FE_bp   4 /*Frame error bit position.*/
 121:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 122:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bm  0x08 /* Data Over Run bit mask.*/
 123:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DOR_bp  3 /* Data Over Run bit position.*/
 124:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 125:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bm  0x04 /* Parity error bit mask.*/
 126:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UPE_bp  2 /* Parity error bit position.*/
 127:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 128:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bm  0x02 /* Double TX speed bit mask.*/
 129:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_U2X_bp  1 /* Double TX speed bit position.*/
 130:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 131:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPCM_bm  0x01 /* Multi Processor bit mask.*/
 132:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_MPMC_bp  0 /* Multi processor bit position.*/
 133:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 134:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxB  bit masks and bit positions */
 135:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bm  0x80 /* RX complete interrupt Enable bit mask.*/
 136:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXCIE_bp  7 /* RX complete interrupt Enable bit position.*/
 137:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 138:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bm  0x40 /* TX complete interrupt Enable bit mask.*/
 139:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXCIE_bp  6 /* TX complete interrupt Enable bit position.*/
 140:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 141:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bm  0x20 /* Data register empty interrupt Enable bit mask.*/
 142:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DRIE_bp  5 /* Data register empty interrupt Enable bit position.*/
 143:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 144:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bm  0x10  /* Receiver Enable bit mask. */
 145:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXEN_bp  4  /* Receiver Enable bit position. */
 146:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 147:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bm  0x08  /* Transmitter Enable bit mask. */
 148:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXEN_bp  3  /* Transmitter Enable bit position. */
 149:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 150:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bm  0x04  /* Character Size bit mask. */
 151:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE2_bp  2 /* Character Size bit position. */
 152:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 153:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bm  0x02  /* Transmit bit 8 bit mask. */
 154:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_RXB8_bp  1  /* Transmit bit 8 bit position. */
 155:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 156:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bm  0x01  /* Transmit bit 8 bit mask. */
 157:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_TXB8_bp  0  /* Transmit bit 8 bit position. */
 158:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 159:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* USART.UCSRxC  bit masks and bit positions */
 160:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gm  0xC0 /* USART Mode Select 01 grp mask.*/
 161:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_gp  6 /* USART Mode Select 01 grp position.*/
 162:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 163:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bm  0x80 /* USART Mode Select 01 bit mask.*/
 164:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL01_bp  7 /* USART Mode Select 01 bit position.*/
 165:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 166:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bm  0x40 /* USART Mode Select 00 bit mask.*/
 167:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UMSEL00_bp  6 /* USART Mode Select 00 bit position.*/
 168:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 169:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gm  0x30 /* USART Parity Mode Select grp mask.*/
 170:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE_gp  4 /* USART Parity Mode Select grp position.*/
 171:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 172:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bm  0x20 /* USART Parity Mode Select 01 bit mask.*/
 173:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE01_bp  5 /* USART Parity Mode Select 01 bit position.*/
 174:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 175:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bm  0x10 /* USART Parity Mode Select 00 bit mask.*/
 176:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_PMODE00_bp  4 /* USART Parity Mode Select 00 bit position.*/
 177:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 178:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bm  0x08 /* USART stop bit mask.*/
 179:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_STOPB_bp  3 /* USART stop bit Position.*/
 180:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 181:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gm  0x06  /* Character Size 10 bit 1 mask. */
 182:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01C_gp  1 /* Character Size 10 bit position. */
 183:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 184:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bm  0x04  /* Character Size 10 bit 1 mask. */
 185:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE01_bp  2 /* Character Size 10 bit position. */
 186:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 187:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bm  0x02  /* Character Size 00 bit 1 mask. */
 188:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_CHSIZE00_bp  1 /* Character Size bit 00 position. */
 189:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 190:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bm  0x01  /* Sync mode Pol bit 1 mask. */
 191:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPOL_bp  0 /*Sync mode Pol bit 0 position */
 192:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 193:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bm 0x02 /* Clock Phase bit mask. */
 194:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_UCPHA_bp 1 /* Clock Phase bit position. */
 195:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 196:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bm 0x04 /* Data order bit mask. */
 197:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** #define USART_DORD_bp 2 /* Data order bit position. */
 198:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 199:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Character Size */
 200:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CHSIZE_enum {
 201:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_5BIT_gc = (0x00),  /* Character size: 5 bit */
 202:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_6BIT_gc = (0x01),  /* Character size: 6 bit */
 203:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_7BIT_gc = (0x02),  /* Character size: 7 bit */
 204:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_8BIT_gc = (0x03),  /* Character size: 8 bit */
 205:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_9BIT_gc = (0x07),  /* Character size: 9 bit */
 206:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CHSIZE_t;
 207:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 208:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Communication Mode */
 209:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_CMODE_enum {
 210:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_ASYNCHRONOUS_gc = (0x00 << USART_UMSEL01_gp),  /*
 211:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 212:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *
 213:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            *Asynchronous
 214:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                            * Mode */
 215:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_SYNCHRONOUS_gc = (0x01 << USART_UMSEL01_gp),  /* Synchronous
 216:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	                                                           * Mode */
 217:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_IRDA_gc = (0x02 << USART_UMSEL01_gp),  /* IrDA Mode */
 218:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CMODE_MSPI_gc = (0x03 << USART_UMSEL01_gp),  /* Master SPI Mode */
 219:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_CMODE_t;
 220:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 221:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* Parity Mode */
 222:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef enum USART_PMODE_enum {
 223:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_DISABLED_gc = (0x00 << USART_PMODE_gp),  /* No Parity */
 224:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_EVEN_gc = (0x02 << USART_PMODE_gp),  /* Even Parity */
 225:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_ODD_gc = (0x03 << USART_PMODE_gp),  /* Odd Parity */
 226:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } USART_PMODE_t;
 227:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 228:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 1 Mhz */
 229:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_1mhz[]) = {
 230:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 1200 */
 231:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 2400 */
 232:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 4800 */
 233:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0006, /* Baud: 9600 */
 234:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0003, /* Baud: 19200 */
 235:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0002, /* Baud: 38400 */
 236:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0001, /* Baud: 57600 */
 237:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_BAUD_UNDEFINED, /* Baud: 115200 */
 238:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 239:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 240:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 8 Mhz */
 241:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_8mhz[]) = {
 242:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 1200 */
 243:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 2400 */
 244:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 4800 */
 245:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 9600 */
 246:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 19200 */
 247:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x000C, /* Baud: 38400 */
 248:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0007, /* Baud: 57600 */
 249:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0008, /* Baud: 115200 */
 250:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 251:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 252:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Lookup table containing baudctrl values for CPU frequency 16 Mhz */
 253:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static PROGMEM_DECLARE(uint16_t, baudctrl_16mhz[]) = {
 254:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0340, /* Baud: 1200 */
 255:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x01A0, /* Baud: 2400 */
 256:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x00CF, /* Baud: 4800 */
 257:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0067, /* Baud: 9600 */
 258:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0033, /* Baud: 19200 */
 259:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0019, /* Baud: 38400 */
 260:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 57600 */
 261:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	0x0010, /* Baud: 115200 */
 262:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** };
 263:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 264:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 265:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing RS232 and similar modes. */
 266:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_rs232_options {
 267:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART (unused in slave modes). */
 268:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 269:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 270:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of bits to transmit as a character (5 to 9). */
 271:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_CHSIZE_t charlength;
 272:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 273:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Parity type: USART_PMODE_DISABLED_gc, USART_PMODE_EVEN_gc, */
 274:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! USART_PMODE_ODD_gc. */
 275:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	USART_PMODE_t paritytype;
 276:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 277:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Number of stop bits between two characters: */
 278:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! true: 2 stop bits */
 279:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! false: 1 stop bit */
 280:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	bool stopbits;
 281:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_rs232_options_t;
 282:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 283:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /* ! Input parameters when initializing SPI master mode. */
 284:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** typedef struct usart_spi_options {
 285:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! Set baud rate of the USART in SPI mode. */
 286:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint32_t baudrate;
 287:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 288:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	/* ! SPI transmission mode. */
 289:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t spimode;
 290:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 291:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	uint8_t data_order;
 292:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** } usart_spi_options_t;
 293:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 294:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 295:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 296:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receiver.
 297:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 298:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module
 299:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 300:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_enable(USART_t *usart)
 301:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 302:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXEN_bm;
 303:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 304:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 305:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 306:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receiver.
 307:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 308:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 309:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 310:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_disable(USART_t *usart)
 311:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 312:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXEN_bm;
 313:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 314:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 315:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 316:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Configure the USART frame format.
 317:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 318:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  Sets the frame format, Frame Size, parity mode and number of stop bits.
 319:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 320:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param usart Pointer to the USART module
 321:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param charSize The character size. Use USART_CHSIZE_t type.
 322:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param parityMode The parity Mode. Use USART_PMODE_t type.
 323:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *  \param twoStopBits Enable two stop bit mode. Use bool type.
 324:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 325:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_format_set(USART_t *usart, USART_CHSIZE_t charSize,
 326:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		USART_PMODE_t parityMode, bool twoStopBits)
 327:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 328:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC
 329:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnC &
 330:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE01C_gm)) | ((charSize & 0x03)
 331:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE01C_gp);
 332:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB
 333:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 		= ((usart)->UCSRnB &
 334:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			(~USART_CHSIZE2_bm)) | ((charSize & 0x04)
 335:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_CHSIZE2_bp);
 336:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 337:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_PMODE_gm)) | parityMode;
 338:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 339:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_STOPB_bm)) | (twoStopBits
 340:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 			<< USART_STOPB_bp);
 341:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 342:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 343:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 344:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmitter.
 345:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 346:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 347:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 348:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_enable(USART_t *usart)
 349:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 350:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXEN_bm;
 351:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 352:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 353:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 354:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmitter.
 355:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 356:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 357:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 358:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_disable(USART_t *usart)
 359:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 360:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXEN_bm;
 361:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 362:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 363:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 364:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART transmit complete interrupt.
 365:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 366:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 367:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 368:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_enable(USART_t *usart)
 369:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 370:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_TXC_bm;
 371:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 372:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 373:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 374:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART receive complete interrupt.
 375:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 376:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 377:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 378:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_enable(USART_t *usart)
 379:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 380:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_RXC_bm;
 381:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 382:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 383:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 384:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Enable USART data register empty interrupt.
 385:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 386:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 387:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 388:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_enable(USART_t *usart)
 389:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 390:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB |= USART_DRIE_bm;
 391:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 392:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 393:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 394:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART transmit complete interrupt.
 395:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 396:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 397:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 398:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_tx_complete_interrupt_disable(USART_t *usart)
 399:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 400:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_TXC_bm;
 401:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 402:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 403:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 404:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART receive complete interrupt.
 405:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 406:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 407:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 408:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_rx_complete_interrupt_disable(USART_t *usart)
 409:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 410:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_RXC_bm;
 411:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 412:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 413:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 414:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Disable USART data register empty interrupt.
 415:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 416:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module.
 417:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 418:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_data_empty_interrupt_disable(USART_t *usart)
 419:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 420:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnB &= ~USART_DRIE_bm;
 421:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 422:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 423:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 424:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Set the mode the USART run in.
 425:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 426:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Set the mode the USART run in. The default mode is asynchronous mode.
 427:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 428:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart Pointer to the USART module register section.
 429:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usartmode Selects the USART mode. Use USART_CMODE_t type.
 430:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 431:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * USART modes:
 432:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x0        : Asynchronous mode.
 433:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x1        : Synchronous mode.
 434:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x2        : IrDA mode.
 435:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * - 0x3        : Master SPI mode.
 436:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 437:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_set_mode(USART_t *usart, USART_CMODE_t usartmode)
 438:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 439:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UCSRnC = ((usart)->UCSRnC & (~USART_UMSEL01_gm)) | usartmode;
 440:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 441:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 442:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 443:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Check if data register empty flag is set.
 444:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 445:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 446:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 447:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_data_register_is_empty(USART_t *usart)
 448:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 449:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_DRE_bm;
 450:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 451:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 452:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 453:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the RX complete interrupt flag is set.
 454:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 455:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the RX complete interrupt flag is set.
 456:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 457:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 458:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 459:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_rx_is_complete(USART_t *usart)
 460:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 461:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_RXC_bm;
 462:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 463:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 464:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 465:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Checks if the TX complete interrupt flag is set.
 466:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 467:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * Checks if the TX complete interrupt flag is set.
 468:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 469:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 470:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 471:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline bool usart_tx_is_complete(USART_t *usart)
 472:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 473:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UCSRnA & USART_TXC_bm;
 474:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 475:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 476:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 477:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Clear TX complete interrupt flag.
 478:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * TX flag is clear after complete transmission, automatically.
 479:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 480:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 481:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_clear_tx_complete(USART_t *usart)
 482:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 483:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****          usart->UCSRnA |=  USART_TXC_bm;
 484:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 485:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 486:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 487:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Write a data to the USART data register.
 488:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 489:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 490:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param txdata The data to be transmitted.
 491:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 492:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_put(USART_t *usart, uint8_t txdata)
 493:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 494:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	(usart)->UDR = txdata;
 495:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 496:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 497:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 498:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief  Read a data to the USART data register.
 499:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 500:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 501:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 502:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \return The received data
 503:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 504:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline uint8_t usart_get(USART_t *usart)
 505:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 506:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	return (usart)->UDR;
 507:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 508:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 
 509:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** /**
 510:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \brief Double the USART transmission speed.
 511:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  *
 512:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  * \param usart The USART module.
 513:../../../platform/mega_rf/drivers/usart/usart_megarf.h ****  */
 514:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** static inline void usart_double_baud_enable(USART_t *usart)
 515:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** {
 129               		.loc 2 515 0
 130               		.cfi_startproc
 131 0034 CF93      		push r28
 132               	.LCFI6:
 133               		.cfi_def_cfa_offset 3
 134               		.cfi_offset 28, -2
 135 0036 DF93      		push r29
 136               	.LCFI7:
 137               		.cfi_def_cfa_offset 4
 138               		.cfi_offset 29, -3
 139 0038 00D0      		rcall .
 140               	.LCFI8:
 141               		.cfi_def_cfa_offset 6
 142 003a CDB7      		in r28,__SP_L__
 143 003c DEB7      		in r29,__SP_H__
 144               	.LCFI9:
 145               		.cfi_def_cfa_register 28
 146               	/* prologue: function */
 147               	/* frame size = 2 */
 148               	/* stack size = 4 */
 149               	.L__stack_usage = 4
 150 003e 9A83      		std Y+2,r25
 151 0040 8983      		std Y+1,r24
 516:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** 	usart->UCSRnA |=  USART_U2X_bm;
 152               		.loc 2 516 0
 153 0042 8981      		ldd r24,Y+1
 154 0044 9A81      		ldd r25,Y+2
 155 0046 FC01      		movw r30,r24
 156 0048 8081      		ld r24,Z
 157 004a 282F      		mov r18,r24
 158 004c 2260      		ori r18,lo8(2)
 159 004e 8981      		ldd r24,Y+1
 160 0050 9A81      		ldd r25,Y+2
 161 0052 FC01      		movw r30,r24
 162 0054 2083      		st Z,r18
 517:../../../platform/mega_rf/drivers/usart/usart_megarf.h **** }
 163               		.loc 2 517 0
 164 0056 0000      		nop
 165               	/* epilogue start */
 166 0058 0F90      		pop __tmp_reg__
 167 005a 0F90      		pop __tmp_reg__
 168 005c DF91      		pop r29
 169 005e CF91      		pop r28
 170 0060 0895      		ret
 171               		.cfi_endproc
 172               	.LFE101:
 175               	usart_serial_init:
 176               	.LFB104:
 177               		.file 3 "../../../platform/common/services/serial/megarf_usart/usart_serial.h"
   1:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /**
   2:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \file
   3:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   4:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \brief This file defines a useful set of functions for the Serial interface on 
   5:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * AVR MEGARF devices.
   6:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   7:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   8:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
   9:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_start
  10:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  11:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \page License
  12:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  13:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * Redistribution and use in source and binary forms, with or without
  14:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * modification, are permitted provided that the following conditions are met:
  15:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  16:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer.
  18:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  19:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  20:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  21:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    and/or other materials provided with the distribution.
  22:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  23:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  24:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    from this software without specific prior written permission.
  25:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  26:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  27:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *    Atmel microcontroller product.
  28:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  29:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  30:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  31:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  32:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  33:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  34:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  35:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  36:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  37:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  38:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  39:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  40:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  41:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \asf_license_stop
  42:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  43:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  44:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifndef _USART_SERIAL_H_
  45:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #define _USART_SERIAL_H_
  46:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  47:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #ifdef __cplusplus
  48:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** extern "C" {
  49:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #endif
  50:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  51:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "compiler.h"
  52:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "sysclk.h"
  53:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "status_codes.h"
  54:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "usart_megarf.h"
  55:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  56:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \name Serial Management Configuration
  57:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  58:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @{ */
  59:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** #include "conf_usart_serial.h"
  60:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /* ! @} */
  61:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  62:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef usart_rs232_options_t usart_serial_options_t;
  63:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  64:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** typedef USART_t *usart_if;
  65:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  66:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Initializes the Usart in master mode.
  67:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  68:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart       Base address of the USART instance.
  69:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param options     Options needed to set up RS232 communication (see \ref
  70:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * usart_serial_options_t).
  71:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  72:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval true if the initialization was successful
  73:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \retval false if initialization failed (error in baud rate calculation)
  74:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  75:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline bool usart_serial_init(usart_if usart, const
  76:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		usart_serial_options_t *options)
  77:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 178               		.loc 3 77 0
 179               		.cfi_startproc
 180 0062 CF93      		push r28
 181               	.LCFI10:
 182               		.cfi_def_cfa_offset 3
 183               		.cfi_offset 28, -2
 184 0064 DF93      		push r29
 185               	.LCFI11:
 186               		.cfi_def_cfa_offset 4
 187               		.cfi_offset 29, -3
 188 0066 CDB7      		in r28,__SP_L__
 189 0068 DEB7      		in r29,__SP_H__
 190               	.LCFI12:
 191               		.cfi_def_cfa_register 28
 192 006a 2B97      		sbiw r28,11
 193               	.LCFI13:
 194               		.cfi_def_cfa_offset 15
 195 006c 0FB6      		in __tmp_reg__,__SREG__
 196 006e F894      		cli
 197 0070 DEBF      		out __SP_H__,r29
 198 0072 0FBE      		out __SREG__,__tmp_reg__
 199 0074 CDBF      		out __SP_L__,r28
 200               	/* prologue: function */
 201               	/* frame size = 11 */
 202               	/* stack size = 13 */
 203               	.L__stack_usage = 13
 204 0076 9987      		std Y+9,r25
 205 0078 8887      		std Y+8,r24
 206 007a 7B87      		std Y+11,r23
 207 007c 6A87      		std Y+10,r22
  78:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	/* USART options. */
  79:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options_t usart_rs232_options;
  80:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.charlength   = options->charlength;
 208               		.loc 3 80 0
 209 007e 8A85      		ldd r24,Y+10
 210 0080 9B85      		ldd r25,Y+11
 211 0082 FC01      		movw r30,r24
 212 0084 8481      		ldd r24,Z+4
 213 0086 8D83      		std Y+5,r24
  81:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.paritytype   = options->paritytype;
 214               		.loc 3 81 0
 215 0088 8A85      		ldd r24,Y+10
 216 008a 9B85      		ldd r25,Y+11
 217 008c FC01      		movw r30,r24
 218 008e 8581      		ldd r24,Z+5
 219 0090 8E83      		std Y+6,r24
  82:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.stopbits     = options->stopbits;
 220               		.loc 3 82 0
 221 0092 8A85      		ldd r24,Y+10
 222 0094 9B85      		ldd r25,Y+11
 223 0096 FC01      		movw r30,r24
 224 0098 8681      		ldd r24,Z+6
 225 009a 8F83      		std Y+7,r24
  83:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	usart_rs232_options.baudrate     = options->baudrate;
 226               		.loc 3 83 0
 227 009c 8A85      		ldd r24,Y+10
 228 009e 9B85      		ldd r25,Y+11
 229 00a0 FC01      		movw r30,r24
 230 00a2 8081      		ld r24,Z
 231 00a4 9181      		ldd r25,Z+1
 232 00a6 A281      		ldd r26,Z+2
 233 00a8 B381      		ldd r27,Z+3
 234 00aa 8983      		std Y+1,r24
 235 00ac 9A83      		std Y+2,r25
 236 00ae AB83      		std Y+3,r26
 237 00b0 BC83      		std Y+4,r27
  84:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  85:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	if (usart_init_rs232(usart, &usart_rs232_options)) {
 238               		.loc 3 85 0
 239 00b2 8885      		ldd r24,Y+8
 240 00b4 9985      		ldd r25,Y+9
 241 00b6 9E01      		movw r18,r28
 242 00b8 2F5F      		subi r18,-1
 243 00ba 3F4F      		sbci r19,-1
 244 00bc B901      		movw r22,r18
 245 00be 0E94 0000 		call usart_init_rs232
 246 00c2 8823      		tst r24
 247 00c4 01F0      		breq .L7
  86:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return true;
 248               		.loc 3 86 0
 249 00c6 81E0      		ldi r24,lo8(1)
 250 00c8 00C0      		rjmp .L9
 251               	.L7:
  87:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	} else {
  88:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 		return false;
 252               		.loc 3 88 0
 253 00ca 80E0      		ldi r24,0
 254               	.L9:
 255               	/* epilogue start */
  89:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	}
  90:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 256               		.loc 3 90 0 discriminator 1
 257 00cc 2B96      		adiw r28,11
 258 00ce 0FB6      		in __tmp_reg__,__SREG__
 259 00d0 F894      		cli
 260 00d2 DEBF      		out __SP_H__,r29
 261 00d4 0FBE      		out __SREG__,__tmp_reg__
 262 00d6 CDBF      		out __SP_L__,r28
 263 00d8 DF91      		pop r29
 264 00da CF91      		pop r28
 265 00dc 0895      		ret
 266               		.cfi_endproc
 267               	.LFE104:
 270               	usart_serial_putchar:
 271               	.LFB105:
  91:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
  92:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Sends a character with the USART.
  93:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  94:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
  95:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param c       Character to write.
  96:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
  97:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \return Status code
  98:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
  99:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline status_code_t usart_serial_putchar(usart_if usart, uint8_t c)
 100:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 272               		.loc 3 100 0
 273               		.cfi_startproc
 274 00de CF93      		push r28
 275               	.LCFI14:
 276               		.cfi_def_cfa_offset 3
 277               		.cfi_offset 28, -2
 278 00e0 DF93      		push r29
 279               	.LCFI15:
 280               		.cfi_def_cfa_offset 4
 281               		.cfi_offset 29, -3
 282 00e2 00D0      		rcall .
 283 00e4 1F92      		push __zero_reg__
 284               	.LCFI16:
 285               		.cfi_def_cfa_offset 7
 286 00e6 CDB7      		in r28,__SP_L__
 287 00e8 DEB7      		in r29,__SP_H__
 288               	.LCFI17:
 289               		.cfi_def_cfa_register 28
 290               	/* prologue: function */
 291               	/* frame size = 3 */
 292               	/* stack size = 5 */
 293               	.L__stack_usage = 5
 294 00ea 9A83      		std Y+2,r25
 295 00ec 8983      		std Y+1,r24
 296 00ee 6B83      		std Y+3,r22
 101:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	return usart_putchar(usart, c);
 297               		.loc 3 101 0
 298 00f0 8981      		ldd r24,Y+1
 299 00f2 9A81      		ldd r25,Y+2
 300 00f4 6B81      		ldd r22,Y+3
 301 00f6 0E94 0000 		call usart_putchar
 302               	/* epilogue start */
 102:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 303               		.loc 3 102 0
 304 00fa 0F90      		pop __tmp_reg__
 305 00fc 0F90      		pop __tmp_reg__
 306 00fe 0F90      		pop __tmp_reg__
 307 0100 DF91      		pop r29
 308 0102 CF91      		pop r28
 309 0104 0895      		ret
 310               		.cfi_endproc
 311               	.LFE105:
 314               	usart_serial_getchar:
 315               	.LFB106:
 103:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 
 104:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** /*! \brief Waits until a character is received, and returns it.
 105:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 106:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param usart   Base address of the USART instance.
 107:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  * \param data   Data to read
 108:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  *
 109:../../../platform/common/services/serial/megarf_usart/usart_serial.h ****  */
 110:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** static inline void usart_serial_getchar(usart_if usart, uint8_t *data)
 111:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** {
 316               		.loc 3 111 0
 317               		.cfi_startproc
 318 0106 CF93      		push r28
 319               	.LCFI18:
 320               		.cfi_def_cfa_offset 3
 321               		.cfi_offset 28, -2
 322 0108 DF93      		push r29
 323               	.LCFI19:
 324               		.cfi_def_cfa_offset 4
 325               		.cfi_offset 29, -3
 326 010a 00D0      		rcall .
 327 010c 00D0      		rcall .
 328               	.LCFI20:
 329               		.cfi_def_cfa_offset 8
 330 010e CDB7      		in r28,__SP_L__
 331 0110 DEB7      		in r29,__SP_H__
 332               	.LCFI21:
 333               		.cfi_def_cfa_register 28
 334               	/* prologue: function */
 335               	/* frame size = 4 */
 336               	/* stack size = 6 */
 337               	.L__stack_usage = 6
 338 0112 9A83      		std Y+2,r25
 339 0114 8983      		std Y+1,r24
 340 0116 7C83      		std Y+4,r23
 341 0118 6B83      		std Y+3,r22
 112:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** 	*data = usart_getchar(usart);
 342               		.loc 3 112 0
 343 011a 8981      		ldd r24,Y+1
 344 011c 9A81      		ldd r25,Y+2
 345 011e 0E94 0000 		call usart_getchar
 346 0122 282F      		mov r18,r24
 347 0124 8B81      		ldd r24,Y+3
 348 0126 9C81      		ldd r25,Y+4
 349 0128 FC01      		movw r30,r24
 350 012a 2083      		st Z,r18
 113:../../../platform/common/services/serial/megarf_usart/usart_serial.h **** }
 351               		.loc 3 113 0
 352 012c 0000      		nop
 353               	/* epilogue start */
 354 012e 0F90      		pop __tmp_reg__
 355 0130 0F90      		pop __tmp_reg__
 356 0132 0F90      		pop __tmp_reg__
 357 0134 0F90      		pop __tmp_reg__
 358 0136 DF91      		pop r29
 359 0138 CF91      		pop r28
 360 013a 0895      		ret
 361               		.cfi_endproc
 362               	.LFE106:
 365               	stdio_serial_init:
 366               	.LFB107:
 367               		.file 4 "../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h"
   1:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
   2:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   3:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \file
   4:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   5:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \brief Common Standard I/O Serial Management.
   6:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
   7:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * This file defines a useful set of functions for the Stdio Serial interface on AVR
   8:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * and SAM devices.
   9:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  10:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Copyright (c) 2009-2013 Atmel Corporation. All rights reserved.
  11:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  12:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_start
  13:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  14:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \page License
  15:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  16:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Redistribution and use in source and binary forms, with or without
  17:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * modification, are permitted provided that the following conditions are met:
  18:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  19:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  20:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer.
  21:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  22:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    this list of conditions and the following disclaimer in the documentation
  24:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    and/or other materials provided with the distribution.
  25:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  26:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  27:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    from this software without specific prior written permission.
  28:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  29:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * 4. This software may only be redistributed and used in connection with an
  30:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *    Atmel microcontroller product.
  31:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  32:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  33:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  34:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  35:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  36:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  37:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  38:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  39:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  40:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  41:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  42:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * POSSIBILITY OF SUCH DAMAGE.
  43:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  44:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \asf_license_stop
  45:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  46:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  ******************************************************************************/
  47:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  48:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  49:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef _STDIO_SERIAL_H_
  50:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #define _STDIO_SERIAL_H_
  51:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  52:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /**
  53:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \defgroup group_common_utils_stdio_stdio_serial Standard serial I/O (stdio)
  54:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \ingroup group_common_utils_stdio
  55:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  56:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * Common standard serial I/O management driver that
  57:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * implements a stdio serial interface on AVR and SAM devices.
  58:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  59:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \{
  60:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  61:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  62:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include <stdio.h>
  63:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "compiler.h"
  64:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #ifndef SAMD20
  65:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # include "sysclk.h"
  66:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  67:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #include "serial.h"
  68:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  69:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #if (XMEGA || MEGA_RF) && defined(__GNUC__)
  70:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _write (char c, int *f);
  71:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	extern int _read (int *f);
  72:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #endif
  73:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  74:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  75:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the base of the USART module instance to use for stdio.
  76:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern volatile void *volatile stdio_base;
  77:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level write function.
  78:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern int (*ptr_put)(void volatile*, char);
  79:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  80:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** //! Pointer to the external low level read function.
  81:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** extern void (*ptr_get)(void volatile*, char*);
  82:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
  83:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** /*! \brief Initializes the stdio in Serial Mode.
  84:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  85:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param usart       Base address of the USART instance.
  86:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  * \param opt         Options needed to set up RS232 communication (see \ref usart_options_t).
  87:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  *
  88:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h ****  */
  89:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** static inline void stdio_serial_init(volatile void *usart, const usart_serial_options_t *opt)
  90:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** {
 368               		.loc 4 90 0
 369               		.cfi_startproc
 370 013c CF93      		push r28
 371               	.LCFI22:
 372               		.cfi_def_cfa_offset 3
 373               		.cfi_offset 28, -2
 374 013e DF93      		push r29
 375               	.LCFI23:
 376               		.cfi_def_cfa_offset 4
 377               		.cfi_offset 29, -3
 378 0140 00D0      		rcall .
 379 0142 00D0      		rcall .
 380               	.LCFI24:
 381               		.cfi_def_cfa_offset 8
 382 0144 CDB7      		in r28,__SP_L__
 383 0146 DEB7      		in r29,__SP_H__
 384               	.LCFI25:
 385               		.cfi_def_cfa_register 28
 386               	/* prologue: function */
 387               	/* frame size = 4 */
 388               	/* stack size = 6 */
 389               	.L__stack_usage = 6
 390 0148 9A83      		std Y+2,r25
 391 014a 8983      		std Y+1,r24
 392 014c 7C83      		std Y+4,r23
 393 014e 6B83      		std Y+3,r22
  91:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	stdio_base = (void *)usart;
 394               		.loc 4 91 0
 395 0150 8981      		ldd r24,Y+1
 396 0152 9A81      		ldd r25,Y+2
 397 0154 9093 0000 		sts stdio_base+1,r25
 398 0158 8093 0000 		sts stdio_base,r24
  92:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_put = (int (*)(void volatile*,char))&usart_serial_putchar;
 399               		.loc 4 92 0
 400 015c 80E0      		ldi r24,lo8(gs(usart_serial_putchar))
 401 015e 90E0      		ldi r25,hi8(gs(usart_serial_putchar))
 402 0160 9093 0000 		sts ptr_put+1,r25
 403 0164 8093 0000 		sts ptr_put,r24
  93:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	ptr_get = (void (*)(void volatile*,char*))&usart_serial_getchar;
 404               		.loc 4 93 0
 405 0168 80E0      		ldi r24,lo8(gs(usart_serial_getchar))
 406 016a 90E0      		ldi r25,hi8(gs(usart_serial_getchar))
 407 016c 9093 0000 		sts ptr_get+1,r25
 408 0170 8093 0000 		sts ptr_get,r24
  94:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if (XMEGA || MEGA_RF)
  95:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((USART_t *)usart,opt);
 409               		.loc 4 95 0
 410 0174 2B81      		ldd r18,Y+3
 411 0176 3C81      		ldd r19,Y+4
 412 0178 8981      		ldd r24,Y+1
 413 017a 9A81      		ldd r25,Y+2
 414 017c B901      		movw r22,r18
 415 017e 0E94 0000 		call usart_serial_init
  96:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif UC3
  97:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init(usart,(usart_serial_options_t *)opt);
  98:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # elif SAM
  99:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	usart_serial_init((Usart *)usart,(usart_serial_options_t *)opt);
 100:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # else
 101:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  error Unsupported chip type
 102:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 103:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 
 104:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # if defined(__GNUC__)
 105:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if (XMEGA || MEGA_RF)
 106:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR GCC libc print redirection uses fdevopen.
 107:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	fdevopen((int (*)(char, FILE*))(_write),(int (*)(FILE*))(_read));
 416               		.loc 4 107 0
 417 0182 60E0      		ldi r22,lo8(gs(_read))
 418 0184 70E0      		ldi r23,hi8(gs(_read))
 419 0186 80E0      		ldi r24,lo8(gs(_write))
 420 0188 90E0      		ldi r25,hi8(gs(_write))
 421 018a 0E94 0000 		call fdevopen
 108:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 109:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  if UC3 || SAM
 110:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// For AVR32 and SAM GCC
 111:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Specify that stdout and stdin should not be buffered.
 112:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdout, NULL);
 113:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	setbuf(stdin, NULL);
 114:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// Note: Already the case in IAR's Normal DLIB default configuration
 115:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// and AVR GCC library:
 116:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - printf() emits one character at a time.
 117:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** 	// - getchar() requests only 1 byte to exit.
 118:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** #  endif
 119:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** # endif
 120:../../../platform/common/utils/stdio/stdio_serial/stdio_serial.h **** }
 422               		.loc 4 120 0
 423 018e 0000      		nop
 424               	/* epilogue start */
 425 0190 0F90      		pop __tmp_reg__
 426 0192 0F90      		pop __tmp_reg__
 427 0194 0F90      		pop __tmp_reg__
 428 0196 0F90      		pop __tmp_reg__
 429 0198 DF91      		pop r29
 430 019a CF91      		pop r28
 431 019c 0895      		ret
 432               		.cfi_endproc
 433               	.LFE107:
 436               	macsc_enable_manual_bts:
 437               	.LFB121:
 438               		.file 5 "../../../platform/mega_rf/drivers/macsc/macsc_megarf.h"
   1:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
   2:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \file
   3:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   4:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief AVR MEGARF MAC Symbol Counter Driver Definitions
   5:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   6:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Copyright (c) 2013 Atmel Corporation. All rights reserved.
   7:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
   8:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_start
   9:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  10:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \page License
  11:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  12:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Redistribution and use in source and binary forms, with or without
  13:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * modification, are permitted provided that the following conditions are met:
  14:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  15:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer.
  17:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  18:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    this list of conditions and the following disclaimer in the documentation
  20:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    and/or other materials provided with the distribution.
  21:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  22:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    from this software without specific prior written permission.
  24:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  25:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * 4. This software may only be redistributed and used in connection with an
  26:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *    Atmel microcontroller product.
  27:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  28:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * POSSIBILITY OF SUCH DAMAGE.
  39:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  40:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \asf_license_stop
  41:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  42:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  43:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifndef MACSC_MEGARF_H
  44:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_MEGARF_H
  45:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  46:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <compiler.h>
  47:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include <parts.h>
  48:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #include "status_codes.h"
  49:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  50:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #ifdef __cplusplus
  51:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** extern "C" {
  52:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #endif
  53:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  54:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  55:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_group MAC Symbol Counter Driver(MACSC)
  56:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  57:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * See \ref megarf_macsc_quickstart
  58:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  59:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This is a driver for the AVR MEGARF MAC Symbol Counter Driver(MACSC).
  60:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * It provides functions for enabling, disabling and configuring the module.
  61:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  62:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \section dependencies Dependencies
  63:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This driver depends on the following modules:
  64:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * - \ref interrupt_group for ISR definition and disabling interrupts during
  65:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * critical code sections.
  66:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
  67:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  68:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  69:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  70:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Interrupt event callback function type
  71:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  72:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The interrupt handler can be configured to do a function callback,
  73:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * the callback function must match the macsc_callback_t type.
  74:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  75:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  76:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** typedef void (*macsc_callback_t)(void);
  77:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
  78:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! MAC symbol counter compare Channel index */
  79:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_cc_channel {
  80:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 1 */
  81:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC1 = 1,
  82:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 2 */
  83:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC2 = 2,
  84:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! Channel 3 */
  85:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_CC3 = 3,
  86:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
  87:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
  88:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief MAC SC clock source select
  89:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  90:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * uses the SCCKSEL bit in SSCR register to select macsc clk src
  91:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
  92:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If the bit is one,the RTC clock from TOSC1 is selected, otherwise the symbol
  93:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * counter operates with the clock from XTAL1.
  94:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * During transceiver sleep modes the clock falls back to the RTC clock source,
  95:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * regardless of the selected clock. After wakeup, it switches back to the
  96:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * previosly
  97:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * selected clock source.
  98:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
  99:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 100:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** enum macsc_xtal {
 101:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	/* ! 16MHz as macsc clock */
 102:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_16MHz = 0,
 103:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_32KHz = 1,
 104:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** };
 105:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 106:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 107:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @brief Reads the 32-bit timer register in the required order of bytes
 108:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 109:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hh hh octet of 32-bit register
 110:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param hl hl octet of 32-bit register
 111:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param lh lh octet of 32-bit register
 112:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @param ll ll octet of 32-bit register
 113:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 114:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @returns uint32_t Value of timer register
 115:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 116:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read32(volatile uint8_t *hh,
 117:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *hl,
 118:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *lh,
 119:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		volatile uint8_t *ll)
 120:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 121:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	union {
 122:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint8_t a[4];
 123:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		uint32_t rv;
 124:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 125:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x;
 126:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 127:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[0] = *ll;
 128:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[1] = *lh;
 129:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[2] = *hl;
 130:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	x.a[3] = *hh;
 131:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 132:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return x.rv;
 133:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 134:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 135:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* ! compare modes */
 136:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_ABSOLUTE_CMP 0
 137:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_RELATIVE_CMP 1
 138:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 139:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** String concatenation by preprocessor used to create proper register names.
 140:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  **/
 141:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define CONCAT(a, b) a ## b
 142:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 143:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /** Creates proper subregister names and reads the corresponding values. */
 144:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_READ32(reg)                  macsc_read32(&CONCAT(reg, HH), \
 145:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, HL), \
 146:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LH), \
 147:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		&CONCAT(reg, LL))
 148:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 149:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** #define MACSC_WRITE32(reg, val)	\
 150:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	do { \
 151:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		union { uint8_t a[4]; uint32_t v; } \
 152:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x; \
 153:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		x.v = val; \
 154:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HH) = x.a[3]; \
 155:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, HL) = x.a[2]; \
 156:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LH) = x.a[1]; \
 157:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		CONCAT(reg, LL) = x.a[0]; \
 158:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} \
 159:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	while (0)
 160:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 161:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 162:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable MAC SC
 163:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 164:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Enables the SC
 165:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 166:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param clk_src selection of clk source,avalable options in macsc_xtal,fixed
 167:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *  prescalar
 168:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param sleep_enable enable RTC as clock source during sleep
 169:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param auto_ts enable automatic timestamping
 170:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 171:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 172:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable(void);
 173:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 174:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 175:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if MACSC is enabled
 176:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 177:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the MACSC is enabled.
 178:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 179:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 180:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 181:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 182:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_enable(void);
 183:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 184:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 185:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable MAC SC
 186:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 187:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * Disables the MAC SC
 188:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 189:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 190:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 191:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 192:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_disable(void);
 193:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 194:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 195:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Check if back-off slot counter is enabled
 196:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 197:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * check if the back-off slot counter is enabled.
 198:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 199:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 200:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 201:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 202:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** bool is_macsc_backoff_enable(void);
 203:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 204:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 205:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enables compare interrupts of the MACSC
 206:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 207:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 208:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 209:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_enable_cmp_int(enum macsc_cc_channel channel);
 210:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 211:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 212:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disables compare interrupts of the MACSC
 213:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 214:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 215:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */void macsc_disable_cmp_int(enum macsc_cc_channel channel);
 216:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 217:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 218:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Usage of Absolute compare mode of the MACSC
 219:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 220:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param abs_rel  0 for absoulte cmp;1 for relative cmp
 221:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cmp compare value for SCOCRx register
 222:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param channel Compare channel
 223:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 224:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_use_cmp(bool abs_rel, uint32_t cmp,enum macsc_cc_channel channel);
 225:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 226:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 227:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \ingroup macsc_group
 228:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \defgroup macsc_interrupt_group MAC Symbol Counter (MACSC) interrupt
 229:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * management
 230:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This group provides functions to configure MACSC module interrupts
 231:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 232:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * @{
 233:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 234:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 235:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 236:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC overflow interrupt callback function
 237:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 238:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 239:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 240:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 241:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 242:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 243:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 244:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_ovf_int_cb(macsc_callback_t callback);
 245:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 246:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 247:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 1 interrupt callback function
 248:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 249:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 250:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 251:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 252:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 253:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 254:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 255:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp1_int_cb(macsc_callback_t callback);
 256:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 257:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 258:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 2 interrupt callback function
 259:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 260:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 261:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 262:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 263:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 264:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 265:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 266:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp2_int_cb(macsc_callback_t callback);
 267:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 268:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 269:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC Compare Channel 3 interrupt callback function
 270:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 271:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 272:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 273:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 274:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 275:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 276:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 277:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_cmp3_int_cb(macsc_callback_t callback);
 278:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 279:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 280:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Set MACSC backoff slot counter interrupt callback function
 281:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 282:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * This function allows the caller to set and change the interrupt callback
 283:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * function. Without setting a callback function the interrupt handler in the
 284:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * driver will only clear the interrupt flags.
 285:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 286:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param callback Reference to a callback function
 287:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 288:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** void macsc_set_backoff_slot_cntr_int_cb(macsc_callback_t callback);
 289:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** //@}
 290:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 291:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 292:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Enable 32.768KHz clk using timer 2 async register
 293:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 294:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 295:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 296:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 297:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_enable(void)
 298:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 299:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR |= (1 << AS2);
 300:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 301:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 302:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 303:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable 32.768KHz clk using timer 2 async register
 304:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 305:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 306:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 307:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_sleep_clk_disable(void)
 308:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 309:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	ASSR &= ~(1 << AS2);
 310:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 311:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 312:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /* @} */
 313:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 314:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 315:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Configure MAC Symbol Counter Clock Source
 316:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 317:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param macsc macsc clk src
 318:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 319:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_clock_source(enum macsc_xtal source)
 320:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 321:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (source == MACSC_16MHz) {
 322:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 |= (source << SCCKSEL);
 323:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	} else if (source == MACSC_32KHz) {
 324:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR0 &= ~(1 << SCCKSEL);
 325:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 326:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 327:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 328:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 329:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Read MAC SC Clock Source
 330:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 331:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 332:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return macsc_xtal enum Clock source selection
 333:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 334:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline enum macsc_xtal macsc_read_clock_source(void)
 335:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 336:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (enum macsc_xtal)(SCCR0 & (1 << SCCKSEL));
 337:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 338:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 339:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 340:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Counter value of the MAC Symbol counter
 341:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 342:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param cnt_value Counter value
 343:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 344:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_write_count(uint32_t cnt_value)
 345:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 346:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	MACSC_WRITE32(SCCNT, cnt_value);
 347:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 348:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 349:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 350:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Counter value of the MAC Symbol counter
 351:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 352:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note Output the Counter value
 353:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 354:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_count(void)
 355:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 356:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCCNT));
 357:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 358:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 359:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 360:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief enable back-off slot counter
 361:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 362:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 363:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  Enables interrupt as well	.
 364:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 365:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 366:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 367:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_backoff_slot_cnt_enable(void)
 368:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 369:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	if (!(PRR1 & (1 << PRTRX24))) {
 370:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCCR1 = (1 << SCENBO);
 371:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQS |= (1 << IRQSBO);
 372:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		SCIRQM |= (1 << IRQMBO);
 373:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 		return true;
 374:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	}
 375:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	else return false;
 376:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 377:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 378:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 379:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Disable back-off slot counter
 380:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 381:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \param none
 382:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note    Disables interrupt as well	.
 383:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note This counter works only if transceiver clock is running.So check Trx
 384:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * state in app before using this function in IEEE802.15.4 applications.
 385:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 386:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_backoff_slot_cnt_disable(void)
 387:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 388:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR1 &= ~(1 << SCENBO);
 389:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQM &= ~(1 << IRQMBO);
 390:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 391:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 392:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 393:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Tests if the Backoff slot cntr interrupt flag is set
 394:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 395:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return  backoff slot cntr interrupt has occurred or not : IRQSBO
 396:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 397:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline bool macsc_is_slot_cntr_interrupt_flag_set(void)
 398:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 399:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (SCIRQS & (1 << IRQSBO));
 400:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 401:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 402:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 403:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Clears the Backoff Slot cntr interrupt flag
 404:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 405:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \note  IRQSBO is cleared
 406:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 407:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_clear_slot_cntr_interrupt_flag(void)
 408:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 409:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCIRQS |= (1 << IRQSBO);
 410:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 411:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 412:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 413:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the SFD Timestamp register
 414:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 415:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received frame :SCTSR(read-only register)
 416:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 417:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_ts(void)
 418:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 419:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCTSR));
 420:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 421:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 422:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 423:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Reads the Beacon Timestamp register
 424:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 425:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \return Timestamp of last received beacon frame :SCBTSR
 426:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 427:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline uint32_t macsc_read_bts(void)
 428:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 429:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	return (MACSC_READ32(SCBTSR));
 430:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 431:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 
 432:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** /**
 433:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * \brief Write the Beacon Timestamp register of the MAC Symbol counter
 434:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The manual beacon timestamping can be used in conjunction with the
 435:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * relative compare mode of the three compare units to generate compare match
 436:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * interrupts without having a beacon frame received
 437:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 438:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * If set to 1, the current symbol counter value is stored into the beacon
 439:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * timestamp register.
 440:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  * The bit is cleared afterwards.
 441:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  *
 442:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h ****  */
 443:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** static inline void macsc_enable_manual_bts(void)
 444:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** {
 439               		.loc 5 444 0
 440               		.cfi_startproc
 441 019e CF93      		push r28
 442               	.LCFI26:
 443               		.cfi_def_cfa_offset 3
 444               		.cfi_offset 28, -2
 445 01a0 DF93      		push r29
 446               	.LCFI27:
 447               		.cfi_def_cfa_offset 4
 448               		.cfi_offset 29, -3
 449 01a2 CDB7      		in r28,__SP_L__
 450 01a4 DEB7      		in r29,__SP_H__
 451               	.LCFI28:
 452               		.cfi_def_cfa_register 28
 453               	/* prologue: function */
 454               	/* frame size = 0 */
 455               	/* stack size = 2 */
 456               	.L__stack_usage = 2
 445:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 |= (1 << SCMBTS);
 457               		.loc 5 445 0
 458 01a6 8CED      		ldi r24,lo8(-36)
 459 01a8 90E0      		ldi r25,0
 460 01aa 2CED      		ldi r18,lo8(-36)
 461 01ac 30E0      		ldi r19,0
 462 01ae F901      		movw r30,r18
 463 01b0 2081      		ld r18,Z
 464 01b2 2064      		ori r18,lo8(64)
 465 01b4 FC01      		movw r30,r24
 466 01b6 2083      		st Z,r18
 446:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** 	SCCR0 &= ~(1 << SCTSE);
 467               		.loc 5 446 0
 468 01b8 8CED      		ldi r24,lo8(-36)
 469 01ba 90E0      		ldi r25,0
 470 01bc 2CED      		ldi r18,lo8(-36)
 471 01be 30E0      		ldi r19,0
 472 01c0 F901      		movw r30,r18
 473 01c2 2081      		ld r18,Z
 474 01c4 277F      		andi r18,lo8(-9)
 475 01c6 FC01      		movw r30,r24
 476 01c8 2083      		st Z,r18
 447:../../../platform/mega_rf/drivers/macsc/macsc_megarf.h **** }
 477               		.loc 5 447 0
 478 01ca 0000      		nop
 479               	/* epilogue start */
 480 01cc DF91      		pop r29
 481 01ce CF91      		pop r28
 482 01d0 0895      		ret
 483               		.cfi_endproc
 484               	.LFE121:
 486               	.global	appState
 487               		.section	.bss.appState,"aw",@nobits
 490               	appState:
 491 0000 00        		.zero	1
 492               		.section	.bss.msgReq,"aw",@nobits
 495               	msgReq:
 496 0000 0000 0000 		.zero	20
 496      0000 0000 
 496      0000 0000 
 496      0000 0000 
 496      0000 0000 
 497               		.section	.bss.PanId,"aw",@nobits
 500               	PanId:
 501 0000 00        		.zero	1
 502               		.section	.rodata
 503               	.LC1:
 504 0000 0A4D 5347 		.string	"\nMSG REQ SENT %d"
 504      2052 4551 
 504      2053 454E 
 504      5420 2564 
 504      00
 505               		.text
 506               	.global	appSendData
 508               	appSendData:
 509               	.LFB130:
 510               		.file 6 "ServerLLDN.c"
   1:ServerLLDN.c  **** /*
   2:ServerLLDN.c  **** 	* ServerLLDN.c
   3:ServerLLDN.c  **** 	*
   4:ServerLLDN.c  **** 	* Created: 10/18/2019 5:15:37 PM
   5:ServerLLDN.c  **** 	*  Author: guilherme
   6:ServerLLDN.c  **** 	*/ 
   7:ServerLLDN.c  **** 
   8:ServerLLDN.c  **** #include <stdlib.h>
   9:ServerLLDN.c  **** #include <stdio.h>
  10:ServerLLDN.c  **** #include <string.h>
  11:ServerLLDN.c  **** #include <inttypes.h>
  12:ServerLLDN.c  **** #include "config.h"
  13:ServerLLDN.c  **** #include "sys.h"
  14:ServerLLDN.c  **** #include "phy.h"
  15:ServerLLDN.c  **** #include "sys.h"
  16:ServerLLDN.c  **** #include "nwk.h"
  17:ServerLLDN.c  **** #include "sysclk.h"
  18:ServerLLDN.c  **** #include "sysTimer.h"
  19:ServerLLDN.c  **** #include "sleep_mgr.h"
  20:ServerLLDN.c  **** #include "sleepmgr.h"
  21:ServerLLDN.c  **** #include "led.h"
  22:ServerLLDN.c  **** #include "ioport.h"
  23:ServerLLDN.c  **** #include "conf_sleepmgr.h"
  24:ServerLLDN.c  **** #include "board.h"
  25:ServerLLDN.c  **** #include "platform.h"
  26:ServerLLDN.c  **** 
  27:ServerLLDN.c  **** #include "lldn.h"
  28:ServerLLDN.c  **** 
  29:ServerLLDN.c  **** #if 1
  30:ServerLLDN.c  **** #if (SIO2HOST_CHANNEL == SIO_USB)
  31:ServerLLDN.c  **** /* Only ARM */
  32:ServerLLDN.c  **** #include "hw_timer_lldn.h"
  33:ServerLLDN.c  **** #include "stdio_usb.h"
  34:ServerLLDN.c  **** #define MASTER_MACSC	0
  35:ServerLLDN.c  **** #else
  36:ServerLLDN.c  **** /* Only megarf series */
  37:ServerLLDN.c  **** #include "conf_sio2host.h"
  38:ServerLLDN.c  **** #define MASTER_MACSC	1
  39:ServerLLDN.c  **** #endif
  40:ServerLLDN.c  **** #else
  41:ServerLLDN.c  **** /* Only megarf series */
  42:ServerLLDN.c  **** #define MASTER_MACSC		1
  43:ServerLLDN.c  **** #endif
  44:ServerLLDN.c  **** 
  45:ServerLLDN.c  **** #define HUMAM_READABLE			1
  46:ServerLLDN.c  **** 
  47:ServerLLDN.c  **** #if (MASTER_MACSC == 1)
  48:ServerLLDN.c  **** #include "macsc_megarf.h"
  49:ServerLLDN.c  **** #define TIMESLOT_TIMER 0
  50:ServerLLDN.c  **** #else
  51:ServerLLDN.c  **** static SYS_Timer_t				tmrBeaconInterval;			// Beacon
  52:ServerLLDN.c  **** static SYS_Timer_t				tmrComputeData;				// Compute data
  53:ServerLLDN.c  **** #endif
  54:ServerLLDN.c  **** 
  55:ServerLLDN.c  **** #define PRINT 1
  56:ServerLLDN.c  **** 
  57:ServerLLDN.c  **** 	
  58:ServerLLDN.c  **** // equation for tTS gives time in seconds, the division by SYMBOL_TIME changes to symbols for count
  59:ServerLLDN.c  **** AppState_t	appState = APP_STATE_INITIAL;
  60:ServerLLDN.c  **** static NWK_DataReq_t msgReq;
  61:ServerLLDN.c  **** static uint8_t PanId;
  62:ServerLLDN.c  **** 
  63:ServerLLDN.c  ****  void appSendData(void)
  64:ServerLLDN.c  **** {
 511               		.loc 6 64 0
 512               		.cfi_startproc
 513 01d2 CF93      		push r28
 514               	.LCFI29:
 515               		.cfi_def_cfa_offset 3
 516               		.cfi_offset 28, -2
 517 01d4 DF93      		push r29
 518               	.LCFI30:
 519               		.cfi_def_cfa_offset 4
 520               		.cfi_offset 29, -3
 521 01d6 CDB7      		in r28,__SP_L__
 522 01d8 DEB7      		in r29,__SP_H__
 523               	.LCFI31:
 524               		.cfi_def_cfa_register 28
 525               	/* prologue: function */
 526               	/* frame size = 0 */
 527               	/* stack size = 2 */
 528               	.L__stack_usage = 2
  65:ServerLLDN.c  **** 	if(msgReq.options != 0)
 529               		.loc 6 65 0
 530 01da 8091 0000 		lds r24,msgReq+9
 531 01de 9091 0000 		lds r25,msgReq+9+1
 532 01e2 892B      		or r24,r25
 533 01e4 01F0      		breq .L17
  66:ServerLLDN.c  **** 	{
  67:ServerLLDN.c  **** 		printf("\nMSG REQ SENT %d",msgReq.options);
 534               		.loc 6 67 0
 535 01e6 8091 0000 		lds r24,msgReq+9
 536 01ea 9091 0000 		lds r25,msgReq+9+1
 537 01ee 292F      		mov r18,r25
 538 01f0 2F93      		push r18
 539 01f2 8F93      		push r24
 540 01f4 80E0      		ldi r24,lo8(.LC1)
 541 01f6 90E0      		ldi r25,hi8(.LC1)
 542 01f8 892F      		mov r24,r25
 543 01fa 8F93      		push r24
 544 01fc 80E0      		ldi r24,lo8(.LC1)
 545 01fe 90E0      		ldi r25,hi8(.LC1)
 546 0200 8F93      		push r24
 547 0202 0E94 0000 		call printf
 548 0206 0F90      		pop __tmp_reg__
 549 0208 0F90      		pop __tmp_reg__
 550 020a 0F90      		pop __tmp_reg__
 551 020c 0F90      		pop __tmp_reg__
  68:ServerLLDN.c  **** 		NWK_DataReq(&msgReq);
 552               		.loc 6 68 0
 553 020e 80E0      		ldi r24,lo8(msgReq)
 554 0210 90E0      		ldi r25,hi8(msgReq)
 555 0212 0E94 0000 		call NWK_DataReq
 556               	.L17:
  69:ServerLLDN.c  **** 	#if !APP_COORDINATOR
  70:ServerLLDN.c  **** 	#endif
  71:ServerLLDN.c  **** 	}
  72:ServerLLDN.c  **** }
 557               		.loc 6 72 0
 558 0216 0000      		nop
 559               	/* epilogue start */
 560 0218 DF91      		pop r29
 561 021a CF91      		pop r28
 562 021c 0895      		ret
 563               		.cfi_endproc
 564               	.LFE130:
 566               	.global	appPanState
 567               		.section	.data.appPanState,"aw",@progbits
 570               	appPanState:
 571 0000 01        		.byte	1
 572               		.comm	nodes_info_arr,3700,1
 573               	.global	config_request_frame
 574               		.section	.data.config_request_frame,"aw",@progbits
 577               	config_request_frame:
 578 0000 0F        		.byte	15
 579 0001 00        		.byte	0
 580 0002 0F        		.byte	15
 581 0003 0000      		.zero	2
 582 0005 80        		.byte	128
 583               	.global	conf_req_list
 584               		.section	.bss.conf_req_list,"aw",@nobits
 587               	conf_req_list:
 588 0000 0000      		.zero	2
 589               		.comm	ACKFrame,33,1
 590               	.global	ACKFrame_size
 591               		.section	.bss.ACKFrame_size,"aw",@nobits
 594               	ACKFrame_size:
 595 0000 0000      		.zero	2
 596               	.global	beaconInterval
 597               		.section	.bss.beaconInterval,"aw",@nobits
 600               	beaconInterval:
 601 0000 0000 0000 		.zero	4
 602               	.global	beaconInterval_association
 603               		.section	.bss.beaconInterval_association,"aw",@nobits
 606               	beaconInterval_association:
 607 0000 0000 0000 		.zero	4
 608               		.section	.bss.tmrDelay,"aw",@nobits
 611               	tmrDelay:
 612 0000 0000 0000 		.zero	13
 612      0000 0000 
 612      0000 0000 
 612      00
 613               	.global	assTimeSlot
 614               		.section	.bss.assTimeSlot,"aw",@nobits
 617               	assTimeSlot:
 618 0000 0000      		.zero	2
 619               	.global	timeslot_counter
 620               		.section	.bss.timeslot_counter,"aw",@nobits
 623               	timeslot_counter:
 624 0000 00        		.zero	1
 625               	.global	counter_associados
 626               		.section	.bss.counter_associados,"aw",@nobits
 629               	counter_associados:
 630 0000 0000      		.zero	2
 631               	.global	cycles_counter
 632               		.section	.data.cycles_counter,"aw",@progbits
 635               	cycles_counter:
 636 0000 01        		.byte	1
 637               	.global	association_request
 638               		.section	.bss.association_request,"aw",@nobits
 641               	association_request:
 642 0000 00        		.zero	1
 643               		.comm	msg_info_array,6600,1
 644               	.global	size_msg_info
 645               		.section	.bss.size_msg_info,"aw",@nobits
 648               	size_msg_info:
 649 0000 0000      		.zero	2
 650               	.global	data_received
 651               		.section	.bss.data_received,"aw",@nobits
 654               	data_received:
 655 0000 00        		.zero	1
 656               	.global	succes_rate
 657               		.section	.bss.succes_rate,"aw",@nobits
 660               	succes_rate:
 661 0000 0000 0000 		.zero	4
 662               	.global	counter_delay_msg
 663               		.section	.bss.counter_delay_msg,"aw",@nobits
 666               	counter_delay_msg:
 667 0000 0000      		.zero	2
 668               		.section	.rodata
 669               	.LC2:
 670 0011 0A64 656C 		.string	"\ndelay handler"
 670      6179 2068 
 670      616E 646C 
 670      6572 00
 671               		.text
 673               	tmrDelayHandler:
 674               	.LFB131:
  73:ServerLLDN.c  **** 
  74:ServerLLDN.c  **** #if APP_COORDINATOR
  75:ServerLLDN.c  **** 
  76:ServerLLDN.c  **** 	#define NODOS_ASSOCIADOS_ESPERADOS 12
  77:ServerLLDN.c  **** 	
  78:ServerLLDN.c  **** 	AppPanState_t appPanState = APP_PAN_STATE_RESET; // Initial state of PAN node
  79:ServerLLDN.c  **** 	
  80:ServerLLDN.c  **** 	/* Configuration Request Frames */
  81:ServerLLDN.c  **** 	/* Da pra mudar o envio do confrequest pra ja usar essa array com as informas dos nodos */	
  82:ServerLLDN.c  **** 	nodes_info_t nodes_info_arr[50]; // Array for Configure Request messages, one position per node, 2
  83:ServerLLDN.c  **** 	NWK_ConfigRequest_t config_request_frame = { .id = LL_CONFIGURATION_REQUEST,
  84:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
  85:ServerLLDN.c  **** 												 .tx_channel = APP_CHANNEL,
  86:ServerLLDN.c  **** 												 .conf.macLLDNmgmtTS = MacLLDNMgmtTS };
  87:ServerLLDN.c  **** 	nodes_info_list_t *conf_req_list = NULL;
  88:ServerLLDN.c  **** 
  89:ServerLLDN.c  **** 	/* Acknowledge Frame and Array */
  90:ServerLLDN.c  **** 	NWK_ACKFormat_t ACKFrame;	// ACK Frame Payload used in Discovery State
  91:ServerLLDN.c  **** 	int ACKFrame_size = 0;
  92:ServerLLDN.c  **** 
  93:ServerLLDN.c  **** 	float beaconInterval = 0; // no precisa ser global
  94:ServerLLDN.c  **** 	float beaconInterval_association = 0;
  95:ServerLLDN.c  **** 	
  96:ServerLLDN.c  **** 	/* This timer implements a delay between messages, 
  97:ServerLLDN.c  **** 	 * if not used the nodes are not able to receive the message
  98:ServerLLDN.c  **** 	 */
  99:ServerLLDN.c  **** 	static SYS_Timer_t tmrDelay;	
 100:ServerLLDN.c  **** 	
 101:ServerLLDN.c  **** 	/*  Control variables for testing */	
 102:ServerLLDN.c  **** 	int assTimeSlot = 0;
 103:ServerLLDN.c  **** 	uint8_t timeslot_counter = 0;
 104:ServerLLDN.c  **** 
 105:ServerLLDN.c  **** 	int counter_associados = 0;		// Associated nodes counter
 106:ServerLLDN.c  **** 	uint8_t cycles_counter = macLLDNdiscoveryModeTimeout;
 107:ServerLLDN.c  **** 
 108:ServerLLDN.c  **** 	bool association_request = false;
 109:ServerLLDN.c  **** 
 110:ServerLLDN.c  **** 	/* data related variables */
 111:ServerLLDN.c  **** 	msg_info_t msg_info_array[50]; // size of array limited by hardware
 112:ServerLLDN.c  **** 	unsigned int size_msg_info = 0;
 113:ServerLLDN.c  **** 	bool data_received = false;	
 114:ServerLLDN.c  **** 	float succes_rate = 0;
 115:ServerLLDN.c  **** 	
 116:ServerLLDN.c  **** 	int counter_delay_msg = 0;
 117:ServerLLDN.c  **** 	
 118:ServerLLDN.c  **** 	static void tmrDelayHandler(SYS_Timer_t *timer)
 119:ServerLLDN.c  **** 	{
 675               		.loc 6 119 0
 676               		.cfi_startproc
 677 021e CF93      		push r28
 678               	.LCFI32:
 679               		.cfi_def_cfa_offset 3
 680               		.cfi_offset 28, -2
 681 0220 DF93      		push r29
 682               	.LCFI33:
 683               		.cfi_def_cfa_offset 4
 684               		.cfi_offset 29, -3
 685 0222 00D0      		rcall .
 686               	.LCFI34:
 687               		.cfi_def_cfa_offset 6
 688 0224 CDB7      		in r28,__SP_L__
 689 0226 DEB7      		in r29,__SP_H__
 690               	.LCFI35:
 691               		.cfi_def_cfa_register 28
 692               	/* prologue: function */
 693               	/* frame size = 2 */
 694               	/* stack size = 4 */
 695               	.L__stack_usage = 4
 696 0228 9A83      		std Y+2,r25
 697 022a 8983      		std Y+1,r24
 120:ServerLLDN.c  **** 		printf("\ndelay handler");
 698               		.loc 6 120 0
 699 022c 80E0      		ldi r24,lo8(.LC2)
 700 022e 90E0      		ldi r25,hi8(.LC2)
 701 0230 892F      		mov r24,r25
 702 0232 8F93      		push r24
 703 0234 80E0      		ldi r24,lo8(.LC2)
 704 0236 90E0      		ldi r25,hi8(.LC2)
 705 0238 8F93      		push r24
 706 023a 0E94 0000 		call printf
 707 023e 0F90      		pop __tmp_reg__
 708 0240 0F90      		pop __tmp_reg__
 121:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 709               		.loc 6 121 0
 710 0242 82E0      		ldi r24,lo8(2)
 711 0244 8093 0000 		sts appState,r24
 122:ServerLLDN.c  **** 	}
 712               		.loc 6 122 0
 713 0248 0000      		nop
 714               	/* epilogue start */
 715 024a 0F90      		pop __tmp_reg__
 716 024c 0F90      		pop __tmp_reg__
 717 024e DF91      		pop r29
 718 0250 CF91      		pop r28
 719 0252 0895      		ret
 720               		.cfi_endproc
 721               	.LFE131:
 724               	lldn_server_beacon:
 725               	.LFB132:
 123:ServerLLDN.c  **** 	
 124:ServerLLDN.c  **** 	static void lldn_server_beacon(void)
 125:ServerLLDN.c  **** 	{
 726               		.loc 6 125 0
 727               		.cfi_startproc
 728 0254 CF93      		push r28
 729               	.LCFI36:
 730               		.cfi_def_cfa_offset 3
 731               		.cfi_offset 28, -2
 732 0256 DF93      		push r29
 733               	.LCFI37:
 734               		.cfi_def_cfa_offset 4
 735               		.cfi_offset 29, -3
 736 0258 CDB7      		in r28,__SP_L__
 737 025a DEB7      		in r29,__SP_H__
 738               	.LCFI38:
 739               		.cfi_def_cfa_register 28
 740               	/* prologue: function */
 741               	/* frame size = 0 */
 742               	/* stack size = 2 */
 743               	.L__stack_usage = 2
 126:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 744               		.loc 6 126 0
 745 025c 0E94 0000 		call macsc_enable_manual_bts
 127:ServerLLDN.c  **** 		appState = APP_STATE_SEND;
 746               		.loc 6 127 0
 747 0260 82E0      		ldi r24,lo8(2)
 748 0262 8093 0000 		sts appState,r24
 128:ServerLLDN.c  **** 	}
 749               		.loc 6 128 0
 750 0266 0000      		nop
 751               	/* epilogue start */
 752 0268 DF91      		pop r29
 753 026a CF91      		pop r28
 754 026c 0895      		ret
 755               		.cfi_endproc
 756               	.LFE132:
 758               		.section	.rodata
 759               	.LC3:
 760 0020 0A74 6D72 		.string	"\ntmr_slot_hndlr"
 760      5F73 6C6F 
 760      745F 686E 
 760      646C 7200 
 761               		.text
 763               	time_slot_handler:
 764               	.LFB133:
 129:ServerLLDN.c  **** 	
 130:ServerLLDN.c  **** 	
 131:ServerLLDN.c  **** 	static void time_slot_handler(void)
 132:ServerLLDN.c  **** 	{
 765               		.loc 6 132 0
 766               		.cfi_startproc
 767 026e CF93      		push r28
 768               	.LCFI39:
 769               		.cfi_def_cfa_offset 3
 770               		.cfi_offset 28, -2
 771 0270 DF93      		push r29
 772               	.LCFI40:
 773               		.cfi_def_cfa_offset 4
 774               		.cfi_offset 29, -3
 775 0272 CDB7      		in r28,__SP_L__
 776 0274 DEB7      		in r29,__SP_H__
 777               	.LCFI41:
 778               		.cfi_def_cfa_register 28
 779               	/* prologue: function */
 780               	/* frame size = 0 */
 781               	/* stack size = 2 */
 782               	.L__stack_usage = 2
 133:ServerLLDN.c  **** 		/*
 134:ServerLLDN.c  **** 		if (timeslot_counter == 1)
 135:ServerLLDN.c  **** 		{
 136:ServerLLDN.c  **** 			macsc_disable_cmp_int(MACSC_CC1);
 137:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 138:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 139:ServerLLDN.c  **** 		} 
 140:ServerLLDN.c  **** 		*/
 141:ServerLLDN.c  **** 		// macsc_enable_manual_bts();
 142:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 783               		.loc 6 142 0
 784 0276 83E0      		ldi r24,lo8(3)
 785 0278 8093 0000 		sts appState,r24
 143:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_CHECK_TS;
 786               		.loc 6 143 0
 787 027c 8CE0      		ldi r24,lo8(12)
 788 027e 8093 0000 		sts appPanState,r24
 144:ServerLLDN.c  **** 		printf("\ntmr_slot_hndlr");		
 789               		.loc 6 144 0
 790 0282 80E0      		ldi r24,lo8(.LC3)
 791 0284 90E0      		ldi r25,hi8(.LC3)
 792 0286 892F      		mov r24,r25
 793 0288 8F93      		push r24
 794 028a 80E0      		ldi r24,lo8(.LC3)
 795 028c 90E0      		ldi r25,hi8(.LC3)
 796 028e 8F93      		push r24
 797 0290 0E94 0000 		call printf
 798 0294 0F90      		pop __tmp_reg__
 799 0296 0F90      		pop __tmp_reg__
 145:ServerLLDN.c  **** 	}
 800               		.loc 6 145 0
 801 0298 0000      		nop
 802               	/* epilogue start */
 803 029a DF91      		pop r29
 804 029c CF91      		pop r28
 805 029e 0895      		ret
 806               		.cfi_endproc
 807               	.LFE133:
 810               	downlink_delay_handler:
 811               	.LFB134:
 146:ServerLLDN.c  **** 	
 147:ServerLLDN.c  **** 	static void downlink_delay_handler(void)
 148:ServerLLDN.c  **** 	{
 812               		.loc 6 148 0
 813               		.cfi_startproc
 814 02a0 CF93      		push r28
 815               	.LCFI42:
 816               		.cfi_def_cfa_offset 3
 817               		.cfi_offset 28, -2
 818 02a2 DF93      		push r29
 819               	.LCFI43:
 820               		.cfi_def_cfa_offset 4
 821               		.cfi_offset 29, -3
 822 02a4 CDB7      		in r28,__SP_L__
 823 02a6 DEB7      		in r29,__SP_H__
 824               	.LCFI44:
 825               		.cfi_def_cfa_register 28
 826               	/* prologue: function */
 827               	/* frame size = 0 */
 828               	/* stack size = 2 */
 829               	.L__stack_usage = 2
 149:ServerLLDN.c  **** 		if(msgReq.options == NWK_OPT_MAC_COMMAND)
 830               		.loc 6 149 0
 831 02a8 8091 0000 		lds r24,msgReq+9
 832 02ac 9091 0000 		lds r25,msgReq+9+1
 833 02b0 8115      		cp r24,__zero_reg__
 834 02b2 9048      		sbci r25,-128
 835 02b4 01F4      		brne .L23
 150:ServerLLDN.c  **** 		{
 151:ServerLLDN.c  **** 			counter_delay_msg++;
 836               		.loc 6 151 0
 837 02b6 8091 0000 		lds r24,counter_delay_msg
 838 02ba 9091 0000 		lds r25,counter_delay_msg+1
 839 02be 0196      		adiw r24,1
 840 02c0 9093 0000 		sts counter_delay_msg+1,r25
 841 02c4 8093 0000 		sts counter_delay_msg,r24
 152:ServerLLDN.c  **** 			appState = APP_STATE_SEND;
 842               		.loc 6 152 0
 843 02c8 82E0      		ldi r24,lo8(2)
 844 02ca 8093 0000 		sts appState,r24
 845               	.L23:
 153:ServerLLDN.c  **** 		}
 154:ServerLLDN.c  **** 	}
 846               		.loc 6 154 0
 847 02ce 0000      		nop
 848               	/* epilogue start */
 849 02d0 DF91      		pop r29
 850 02d2 CF91      		pop r28
 851 02d4 0895      		ret
 852               		.cfi_endproc
 853               	.LFE134:
 856               	end_of_association_delay_handler:
 857               	.LFB135:
 155:ServerLLDN.c  **** 
 156:ServerLLDN.c  **** 	static void end_of_association_delay_handler(void)
 157:ServerLLDN.c  **** 	{
 858               		.loc 6 157 0
 859               		.cfi_startproc
 860 02d6 CF93      		push r28
 861               	.LCFI45:
 862               		.cfi_def_cfa_offset 3
 863               		.cfi_offset 28, -2
 864 02d8 DF93      		push r29
 865               	.LCFI46:
 866               		.cfi_def_cfa_offset 4
 867               		.cfi_offset 29, -3
 868 02da CDB7      		in r28,__SP_L__
 869 02dc DEB7      		in r29,__SP_H__
 870               	.LCFI47:
 871               		.cfi_def_cfa_register 28
 872               	/* prologue: function */
 873               	/* frame size = 0 */
 874               	/* stack size = 2 */
 875               	.L__stack_usage = 2
 158:ServerLLDN.c  **** 		appState = APP_STATE_ATT_PAN_STATE;
 876               		.loc 6 158 0
 877 02de 83E0      		ldi r24,lo8(3)
 878 02e0 8093 0000 		sts appState,r24
 159:ServerLLDN.c  **** 		appPanState = APP_PAN_STATE_ONLINE_INITIAL;
 879               		.loc 6 159 0
 880 02e4 89E0      		ldi r24,lo8(9)
 881 02e6 8093 0000 		sts appPanState,r24
 160:ServerLLDN.c  **** 	}
 882               		.loc 6 160 0
 883 02ea 0000      		nop
 884               	/* epilogue start */
 885 02ec DF91      		pop r29
 886 02ee CF91      		pop r28
 887 02f0 0895      		ret
 888               		.cfi_endproc
 889               	.LFE135:
 892               	addToAckArray:
 893               	.LFB136:
 161:ServerLLDN.c  **** 	
 162:ServerLLDN.c  **** 	#if TIMESLOT_TIMER
 163:ServerLLDN.c  **** 	static void teste_handler(void)
 164:ServerLLDN.c  **** 	{
 165:ServerLLDN.c  **** 		if(msgReq.options)
 166:ServerLLDN.c  **** 			printf("\n***TIMESLOT****");
 167:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC3);
 168:ServerLLDN.c  **** 	}
 169:ServerLLDN.c  **** 	#endif
 170:ServerLLDN.c  **** 	
 171:ServerLLDN.c  **** 	static bool addToAckArray(uint8_t addres)
 172:ServerLLDN.c  **** 	{	
 894               		.loc 6 172 0
 895               		.cfi_startproc
 896 02f2 CF93      		push r28
 897               	.LCFI48:
 898               		.cfi_def_cfa_offset 3
 899               		.cfi_offset 28, -2
 900 02f4 DF93      		push r29
 901               	.LCFI49:
 902               		.cfi_def_cfa_offset 4
 903               		.cfi_offset 29, -3
 904 02f6 00D0      		rcall .
 905 02f8 00D0      		rcall .
 906 02fa 1F92      		push __zero_reg__
 907               	.LCFI50:
 908               		.cfi_def_cfa_offset 9
 909 02fc CDB7      		in r28,__SP_L__
 910 02fe DEB7      		in r29,__SP_H__
 911               	.LCFI51:
 912               		.cfi_def_cfa_register 28
 913               	/* prologue: function */
 914               	/* frame size = 5 */
 915               	/* stack size = 7 */
 916               	.L__stack_usage = 7
 917 0300 8D83      		std Y+5,r24
 173:ServerLLDN.c  **** 		int pos =(int) addres / 8;
 918               		.loc 6 173 0
 919 0302 8D81      		ldd r24,Y+5
 920 0304 8695      		lsr r24
 921 0306 8695      		lsr r24
 922 0308 8695      		lsr r24
 923 030a 882F      		mov r24,r24
 924 030c 90E0      		ldi r25,0
 925 030e 9A83      		std Y+2,r25
 926 0310 8983      		std Y+1,r24
 174:ServerLLDN.c  **** 		int bit_shift = 8 - (addres % 8);
 927               		.loc 6 174 0
 928 0312 8D81      		ldd r24,Y+5
 929 0314 882F      		mov r24,r24
 930 0316 90E0      		ldi r25,0
 931 0318 8770      		andi r24,7
 932 031a 9927      		clr r25
 933 031c 28E0      		ldi r18,lo8(8)
 934 031e 30E0      		ldi r19,0
 935 0320 A901      		movw r20,r18
 936 0322 481B      		sub r20,r24
 937 0324 590B      		sbc r21,r25
 938 0326 CA01      		movw r24,r20
 939 0328 9C83      		std Y+4,r25
 940 032a 8B83      		std Y+3,r24
 175:ServerLLDN.c  **** 		
 176:ServerLLDN.c  **** // 		if(ACKFrame.ackFlags[pos] & 1 << bit_shift)
 177:ServerLLDN.c  **** // 		{
 178:ServerLLDN.c  **** // 			printf("\nAddr rep %d", addres);
 179:ServerLLDN.c  **** // 			return false;
 180:ServerLLDN.c  **** // 		}
 181:ServerLLDN.c  **** 		ACKFrame.ackFlags[pos] |= 1 << bit_shift;
 941               		.loc 6 181 0
 942 032c 8981      		ldd r24,Y+1
 943 032e 9A81      		ldd r25,Y+2
 944 0330 8050      		subi r24,lo8(-(ACKFrame+1))
 945 0332 9040      		sbci r25,hi8(-(ACKFrame+1))
 946 0334 FC01      		movw r30,r24
 947 0336 8081      		ld r24,Z
 948 0338 282F      		mov r18,r24
 949 033a 81E0      		ldi r24,lo8(1)
 950 033c 90E0      		ldi r25,0
 951 033e 0B80      		ldd r0,Y+3
 952 0340 00C0      		rjmp 2f
 953               		1:
 954 0342 880F      		lsl r24
 955 0344 991F      		rol r25
 956               		2:
 957 0346 0A94      		dec r0
 958 0348 02F4      		brpl 1b
 959 034a 822B      		or r24,r18
 960 034c 282F      		mov r18,r24
 961 034e 8981      		ldd r24,Y+1
 962 0350 9A81      		ldd r25,Y+2
 963 0352 8050      		subi r24,lo8(-(ACKFrame+1))
 964 0354 9040      		sbci r25,hi8(-(ACKFrame+1))
 965 0356 FC01      		movw r30,r24
 966 0358 2083      		st Z,r18
 182:ServerLLDN.c  **** 		if (pos + 1 > ACKFrame_size)
 967               		.loc 6 182 0
 968 035a 8981      		ldd r24,Y+1
 969 035c 9A81      		ldd r25,Y+2
 970 035e 9C01      		movw r18,r24
 971 0360 2F5F      		subi r18,-1
 972 0362 3F4F      		sbci r19,-1
 973 0364 8091 0000 		lds r24,ACKFrame_size
 974 0368 9091 0000 		lds r25,ACKFrame_size+1
 975 036c 8217      		cp r24,r18
 976 036e 9307      		cpc r25,r19
 977 0370 04F4      		brge .L26
 183:ServerLLDN.c  **** 			ACKFrame_size = pos + 1;
 978               		.loc 6 183 0
 979 0372 8981      		ldd r24,Y+1
 980 0374 9A81      		ldd r25,Y+2
 981 0376 0196      		adiw r24,1
 982 0378 9093 0000 		sts ACKFrame_size+1,r25
 983 037c 8093 0000 		sts ACKFrame_size,r24
 984               	.L26:
 184:ServerLLDN.c  **** 		
 185:ServerLLDN.c  **** 		return true;
 985               		.loc 6 185 0
 986 0380 81E0      		ldi r24,lo8(1)
 987               	/* epilogue start */
 186:ServerLLDN.c  **** 	}
 988               		.loc 6 186 0
 989 0382 0F90      		pop __tmp_reg__
 990 0384 0F90      		pop __tmp_reg__
 991 0386 0F90      		pop __tmp_reg__
 992 0388 0F90      		pop __tmp_reg__
 993 038a 0F90      		pop __tmp_reg__
 994 038c DF91      		pop r29
 995 038e CF91      		pop r28
 996 0390 0895      		ret
 997               		.cfi_endproc
 998               	.LFE136:
 1001               	addConfRequestArray:
 1002               	.LFB137:
 187:ServerLLDN.c  **** 
 188:ServerLLDN.c  **** 	static void addConfRequestArray(NWK_ConfigStatus_t *node)
 189:ServerLLDN.c  **** 	{
 1003               		.loc 6 189 0
 1004               		.cfi_startproc
 1005 0392 CF93      		push r28
 1006               	.LCFI52:
 1007               		.cfi_def_cfa_offset 3
 1008               		.cfi_offset 28, -2
 1009 0394 DF93      		push r29
 1010               	.LCFI53:
 1011               		.cfi_def_cfa_offset 4
 1012               		.cfi_offset 29, -3
 1013 0396 00D0      		rcall .
 1014 0398 00D0      		rcall .
 1015 039a 1F92      		push __zero_reg__
 1016               	.LCFI54:
 1017               		.cfi_def_cfa_offset 9
 1018 039c CDB7      		in r28,__SP_L__
 1019 039e DEB7      		in r29,__SP_H__
 1020               	.LCFI55:
 1021               		.cfi_def_cfa_register 28
 1022               	/* prologue: function */
 1023               	/* frame size = 5 */
 1024               	/* stack size = 7 */
 1025               	.L__stack_usage = 7
 1026 03a0 9D83      		std Y+5,r25
 1027 03a2 8C83      		std Y+4,r24
 190:ServerLLDN.c  **** 
 191:ServerLLDN.c  **** 		uint8_t i;
 192:ServerLLDN.c  **** 		for (i= 0;i < 256 && nodes_info_arr[i].mac_addr != 0; i++);
 1028               		.loc 6 192 0
 1029 03a4 1982      		std Y+1,__zero_reg__
 1030 03a6 00C0      		rjmp .L29
 1031               	.L30:
 1032               		.loc 6 192 0 is_stmt 0 discriminator 3
 1033 03a8 8981      		ldd r24,Y+1
 1034 03aa 8F5F      		subi r24,lo8(-(1))
 1035 03ac 8983      		std Y+1,r24
 1036               	.L29:
 1037               		.loc 6 192 0 discriminator 1
 1038 03ae 8981      		ldd r24,Y+1
 1039 03b0 282F      		mov r18,r24
 1040 03b2 30E0      		ldi r19,0
 1041 03b4 4AE4      		ldi r20,lo8(74)
 1042 03b6 429F      		mul r20,r18
 1043 03b8 C001      		movw r24,r0
 1044 03ba 439F      		mul r20,r19
 1045 03bc 900D      		add r25,r0
 1046 03be 1124      		clr __zero_reg__
 1047 03c0 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1048 03c2 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1049 03c4 FC01      		movw r30,r24
 1050 03c6 8081      		ld r24,Z
 1051 03c8 9181      		ldd r25,Z+1
 1052 03ca 892B      		or r24,r25
 1053 03cc 01F4      		brne .L30
 193:ServerLLDN.c  **** 		
 194:ServerLLDN.c  **** 		assTimeSlot++;
 1054               		.loc 6 194 0 is_stmt 1
 1055 03ce 8091 0000 		lds r24,assTimeSlot
 1056 03d2 9091 0000 		lds r25,assTimeSlot+1
 1057 03d6 0196      		adiw r24,1
 1058 03d8 9093 0000 		sts assTimeSlot+1,r25
 1059 03dc 8093 0000 		sts assTimeSlot,r24
 195:ServerLLDN.c  **** 	
 196:ServerLLDN.c  **** 		if(node->ts_dir.tsDuration > config_request_frame.conf.tsDuration)
 1060               		.loc 6 196 0
 1061 03e0 8C81      		ldd r24,Y+4
 1062 03e2 9D81      		ldd r25,Y+5
 1063 03e4 FC01      		movw r30,r24
 1064 03e6 8481      		ldd r24,Z+4
 1065 03e8 8F77      		andi r24,lo8(127)
 1066 03ea 282F      		mov r18,r24
 1067 03ec 30E0      		ldi r19,0
 1068 03ee 8091 0000 		lds r24,config_request_frame+5
 1069 03f2 8F77      		andi r24,lo8(127)
 1070 03f4 882F      		mov r24,r24
 1071 03f6 90E0      		ldi r25,0
 1072 03f8 8217      		cp r24,r18
 1073 03fa 9307      		cpc r25,r19
 1074 03fc 04F4      		brge .L31
 197:ServerLLDN.c  **** 			config_request_frame.conf.tsDuration =  node->ts_dir.tsDuration;
 1075               		.loc 6 197 0
 1076 03fe 8C81      		ldd r24,Y+4
 1077 0400 9D81      		ldd r25,Y+5
 1078 0402 FC01      		movw r30,r24
 1079 0404 8481      		ldd r24,Z+4
 1080 0406 8F77      		andi r24,lo8(127)
 1081 0408 8F77      		andi r24,lo8(127)
 1082 040a 9091 0000 		lds r25,config_request_frame+5
 1083 040e 9078      		andi r25,lo8(-128)
 1084 0410 892B      		or r24,r25
 1085 0412 8093 0000 		sts config_request_frame+5,r24
 1086               	.L31:
 198:ServerLLDN.c  **** 		
 199:ServerLLDN.c  **** 		nodes_info_arr[i].req_timeslot_duration = node->ts_dir.tsDuration;
 1087               		.loc 6 199 0
 1088 0416 8981      		ldd r24,Y+1
 1089 0418 282F      		mov r18,r24
 1090 041a 30E0      		ldi r19,0
 1091 041c 8C81      		ldd r24,Y+4
 1092 041e 9D81      		ldd r25,Y+5
 1093 0420 FC01      		movw r30,r24
 1094 0422 8481      		ldd r24,Z+4
 1095 0424 8F77      		andi r24,lo8(127)
 1096 0426 582F      		mov r21,r24
 1097 0428 4AE4      		ldi r20,lo8(74)
 1098 042a 429F      		mul r20,r18
 1099 042c C001      		movw r24,r0
 1100 042e 439F      		mul r20,r19
 1101 0430 900D      		add r25,r0
 1102 0432 1124      		clr __zero_reg__
 1103 0434 8050      		subi r24,lo8(-(nodes_info_arr+3))
 1104 0436 9040      		sbci r25,hi8(-(nodes_info_arr+3))
 1105 0438 FC01      		movw r30,r24
 1106 043a 5083      		st Z,r21
 200:ServerLLDN.c  **** 		nodes_info_arr[i].mac_addr = node->macAddr;
 1107               		.loc 6 200 0
 1108 043c 8981      		ldd r24,Y+1
 1109 043e 482F      		mov r20,r24
 1110 0440 50E0      		ldi r21,0
 1111 0442 8C81      		ldd r24,Y+4
 1112 0444 9D81      		ldd r25,Y+5
 1113 0446 FC01      		movw r30,r24
 1114 0448 8381      		ldd r24,Z+3
 1115 044a 282F      		mov r18,r24
 1116 044c 30E0      		ldi r19,0
 1117 044e 6AE4      		ldi r22,lo8(74)
 1118 0450 649F      		mul r22,r20
 1119 0452 C001      		movw r24,r0
 1120 0454 659F      		mul r22,r21
 1121 0456 900D      		add r25,r0
 1122 0458 1124      		clr __zero_reg__
 1123 045a 8050      		subi r24,lo8(-(nodes_info_arr+1))
 1124 045c 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 1125 045e FC01      		movw r30,r24
 1126 0460 3183      		std Z+1,r19
 1127 0462 2083      		st Z,r18
 201:ServerLLDN.c  **** 		nodes_info_arr[i].assigned_time_slot = (uint8_t)i;
 1128               		.loc 6 201 0
 1129 0464 8981      		ldd r24,Y+1
 1130 0466 282F      		mov r18,r24
 1131 0468 30E0      		ldi r19,0
 1132 046a 4AE4      		ldi r20,lo8(74)
 1133 046c 429F      		mul r20,r18
 1134 046e C001      		movw r24,r0
 1135 0470 439F      		mul r20,r19
 1136 0472 900D      		add r25,r0
 1137 0474 1124      		clr __zero_reg__
 1138 0476 8050      		subi r24,lo8(-(nodes_info_arr))
 1139 0478 9040      		sbci r25,hi8(-(nodes_info_arr))
 1140 047a 2981      		ldd r18,Y+1
 1141 047c FC01      		movw r30,r24
 1142 047e 2083      		st Z,r18
 202:ServerLLDN.c  **** 		
 203:ServerLLDN.c  **** 		if(conf_req_list != NULL)
 1143               		.loc 6 203 0
 1144 0480 8091 0000 		lds r24,conf_req_list
 1145 0484 9091 0000 		lds r25,conf_req_list+1
 1146 0488 892B      		or r24,r25
 1147 048a 01F0      		breq .L32
 1148               	.LBB2:
 204:ServerLLDN.c  **** 		{
 205:ServerLLDN.c  **** 			nodes_info_list_t *tmp = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 1149               		.loc 6 205 0
 1150 048c 84E0      		ldi r24,lo8(4)
 1151 048e 90E0      		ldi r25,0
 1152 0490 0E94 0000 		call malloc
 1153 0494 9B83      		std Y+3,r25
 1154 0496 8A83      		std Y+2,r24
 206:ServerLLDN.c  **** 			tmp->node = &nodes_info_arr[i];
 1155               		.loc 6 206 0
 1156 0498 8981      		ldd r24,Y+1
 1157 049a 282F      		mov r18,r24
 1158 049c 30E0      		ldi r19,0
 1159 049e 4AE4      		ldi r20,lo8(74)
 1160 04a0 429F      		mul r20,r18
 1161 04a2 C001      		movw r24,r0
 1162 04a4 439F      		mul r20,r19
 1163 04a6 900D      		add r25,r0
 1164 04a8 1124      		clr __zero_reg__
 1165 04aa 9C01      		movw r18,r24
 1166 04ac 2050      		subi r18,lo8(-(nodes_info_arr))
 1167 04ae 3040      		sbci r19,hi8(-(nodes_info_arr))
 1168 04b0 8A81      		ldd r24,Y+2
 1169 04b2 9B81      		ldd r25,Y+3
 1170 04b4 FC01      		movw r30,r24
 1171 04b6 3183      		std Z+1,r19
 1172 04b8 2083      		st Z,r18
 207:ServerLLDN.c  **** 			tmp->next = conf_req_list;
 1173               		.loc 6 207 0
 1174 04ba 2091 0000 		lds r18,conf_req_list
 1175 04be 3091 0000 		lds r19,conf_req_list+1
 1176 04c2 8A81      		ldd r24,Y+2
 1177 04c4 9B81      		ldd r25,Y+3
 1178 04c6 FC01      		movw r30,r24
 1179 04c8 3383      		std Z+3,r19
 1180 04ca 2283      		std Z+2,r18
 208:ServerLLDN.c  **** 			conf_req_list = tmp;
 1181               		.loc 6 208 0
 1182 04cc 8A81      		ldd r24,Y+2
 1183 04ce 9B81      		ldd r25,Y+3
 1184 04d0 9093 0000 		sts conf_req_list+1,r25
 1185 04d4 8093 0000 		sts conf_req_list,r24
 1186               	.LBE2:
 209:ServerLLDN.c  **** 		}
 210:ServerLLDN.c  **** 		else
 211:ServerLLDN.c  **** 		{
 212:ServerLLDN.c  **** 			conf_req_list = (nodes_info_list_t*)malloc(sizeof(nodes_info_list_t));
 213:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 214:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 215:ServerLLDN.c  **** 		}
 216:ServerLLDN.c  **** 	}
 1187               		.loc 6 216 0
 1188 04d8 00C0      		rjmp .L34
 1189               	.L32:
 212:ServerLLDN.c  **** 			conf_req_list->node = &nodes_info_arr[i];
 1190               		.loc 6 212 0
 1191 04da 84E0      		ldi r24,lo8(4)
 1192 04dc 90E0      		ldi r25,0
 1193 04de 0E94 0000 		call malloc
 1194 04e2 9093 0000 		sts conf_req_list+1,r25
 1195 04e6 8093 0000 		sts conf_req_list,r24
 213:ServerLLDN.c  **** 			conf_req_list->next = NULL;
 1196               		.loc 6 213 0
 1197 04ea 8091 0000 		lds r24,conf_req_list
 1198 04ee 9091 0000 		lds r25,conf_req_list+1
 1199 04f2 2981      		ldd r18,Y+1
 1200 04f4 422F      		mov r20,r18
 1201 04f6 50E0      		ldi r21,0
 1202 04f8 6AE4      		ldi r22,lo8(74)
 1203 04fa 649F      		mul r22,r20
 1204 04fc 9001      		movw r18,r0
 1205 04fe 659F      		mul r22,r21
 1206 0500 300D      		add r19,r0
 1207 0502 1124      		clr __zero_reg__
 1208 0504 2050      		subi r18,lo8(-(nodes_info_arr))
 1209 0506 3040      		sbci r19,hi8(-(nodes_info_arr))
 1210 0508 FC01      		movw r30,r24
 1211 050a 3183      		std Z+1,r19
 1212 050c 2083      		st Z,r18
 214:ServerLLDN.c  **** 		}
 1213               		.loc 6 214 0
 1214 050e 8091 0000 		lds r24,conf_req_list
 1215 0512 9091 0000 		lds r25,conf_req_list+1
 1216 0516 FC01      		movw r30,r24
 1217 0518 1382      		std Z+3,__zero_reg__
 1218 051a 1282      		std Z+2,__zero_reg__
 1219               	.L34:
 1220               		.loc 6 216 0
 1221 051c 0000      		nop
 1222               	/* epilogue start */
 1223 051e 0F90      		pop __tmp_reg__
 1224 0520 0F90      		pop __tmp_reg__
 1225 0522 0F90      		pop __tmp_reg__
 1226 0524 0F90      		pop __tmp_reg__
 1227 0526 0F90      		pop __tmp_reg__
 1228 0528 DF91      		pop r29
 1229 052a CF91      		pop r28
 1230 052c 0895      		ret
 1231               		.cfi_endproc
 1232               	.LFE137:
 1235               	CopyToConfigRequest:
 1236               	.LFB138:
 217:ServerLLDN.c  **** 
 218:ServerLLDN.c  **** 	static void CopyToConfigRequest()
 219:ServerLLDN.c  **** 	{
 1237               		.loc 6 219 0
 1238               		.cfi_startproc
 1239 052e CF93      		push r28
 1240               	.LCFI56:
 1241               		.cfi_def_cfa_offset 3
 1242               		.cfi_offset 28, -2
 1243 0530 DF93      		push r29
 1244               	.LCFI57:
 1245               		.cfi_def_cfa_offset 4
 1246               		.cfi_offset 29, -3
 1247 0532 00D0      		rcall .
 1248               	.LCFI58:
 1249               		.cfi_def_cfa_offset 6
 1250 0534 CDB7      		in r28,__SP_L__
 1251 0536 DEB7      		in r29,__SP_H__
 1252               	.LCFI59:
 1253               		.cfi_def_cfa_register 28
 1254               	/* prologue: function */
 1255               	/* frame size = 2 */
 1256               	/* stack size = 4 */
 1257               	.L__stack_usage = 4
 220:ServerLLDN.c  **** 		config_request_frame.assTimeSlot = conf_req_list->node->assigned_time_slot;
 1258               		.loc 6 220 0
 1259 0538 8091 0000 		lds r24,conf_req_list
 1260 053c 9091 0000 		lds r25,conf_req_list+1
 1261 0540 FC01      		movw r30,r24
 1262 0542 8081      		ld r24,Z
 1263 0544 9181      		ldd r25,Z+1
 1264 0546 FC01      		movw r30,r24
 1265 0548 8081      		ld r24,Z
 1266 054a 8093 0000 		sts config_request_frame+3,r24
 221:ServerLLDN.c  **** 		config_request_frame.macAddr = conf_req_list->node->mac_addr;
 1267               		.loc 6 221 0
 1268 054e 8091 0000 		lds r24,conf_req_list
 1269 0552 9091 0000 		lds r25,conf_req_list+1
 1270 0556 FC01      		movw r30,r24
 1271 0558 8081      		ld r24,Z
 1272 055a 9181      		ldd r25,Z+1
 1273 055c FC01      		movw r30,r24
 1274 055e 8181      		ldd r24,Z+1
 1275 0560 9281      		ldd r25,Z+2
 1276 0562 8093 0000 		sts config_request_frame+4,r24
 222:ServerLLDN.c  **** 		nodes_info_list_t *tmp = conf_req_list;
 1277               		.loc 6 222 0
 1278 0566 8091 0000 		lds r24,conf_req_list
 1279 056a 9091 0000 		lds r25,conf_req_list+1
 1280 056e 9A83      		std Y+2,r25
 1281 0570 8983      		std Y+1,r24
 223:ServerLLDN.c  **** 		conf_req_list = conf_req_list->next;
 1282               		.loc 6 223 0
 1283 0572 8091 0000 		lds r24,conf_req_list
 1284 0576 9091 0000 		lds r25,conf_req_list+1
 1285 057a FC01      		movw r30,r24
 1286 057c 8281      		ldd r24,Z+2
 1287 057e 9381      		ldd r25,Z+3
 1288 0580 9093 0000 		sts conf_req_list+1,r25
 1289 0584 8093 0000 		sts conf_req_list,r24
 224:ServerLLDN.c  **** 		tmp->node = NULL;
 1290               		.loc 6 224 0
 1291 0588 8981      		ldd r24,Y+1
 1292 058a 9A81      		ldd r25,Y+2
 1293 058c FC01      		movw r30,r24
 1294 058e 1182      		std Z+1,__zero_reg__
 1295 0590 1082      		st Z,__zero_reg__
 225:ServerLLDN.c  **** 		tmp->next = NULL;
 1296               		.loc 6 225 0
 1297 0592 8981      		ldd r24,Y+1
 1298 0594 9A81      		ldd r25,Y+2
 1299 0596 FC01      		movw r30,r24
 1300 0598 1382      		std Z+3,__zero_reg__
 1301 059a 1282      		std Z+2,__zero_reg__
 226:ServerLLDN.c  **** 		free(tmp);
 1302               		.loc 6 226 0
 1303 059c 8981      		ldd r24,Y+1
 1304 059e 9A81      		ldd r25,Y+2
 1305 05a0 0E94 0000 		call free
 227:ServerLLDN.c  **** 	}
 1306               		.loc 6 227 0
 1307 05a4 0000      		nop
 1308               	/* epilogue start */
 1309 05a6 0F90      		pop __tmp_reg__
 1310 05a8 0F90      		pop __tmp_reg__
 1311 05aa DF91      		pop r29
 1312 05ac CF91      		pop r28
 1313 05ae 0895      		ret
 1314               		.cfi_endproc
 1315               	.LFE138:
 1317               		.section	.rodata
 1318               	.LC4:
 1319 0030 0A44 4953 		.string	"\nDISC %hhx"
 1319      4320 2568 
 1319      6878 00
 1320               	.LC5:
 1321 003b 0A43 4F4E 		.string	"\nCONF %d"
 1321      4620 2564 
 1321      00
 1322               		.text
 1324               	appCommandInd:
 1325               	.LFB139:
 228:ServerLLDN.c  **** 
 229:ServerLLDN.c  **** 
 230:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 231:ServerLLDN.c  **** 	{
 1326               		.loc 6 231 0
 1327               		.cfi_startproc
 1328 05b0 CF93      		push r28
 1329               	.LCFI60:
 1330               		.cfi_def_cfa_offset 3
 1331               		.cfi_offset 28, -2
 1332 05b2 DF93      		push r29
 1333               	.LCFI61:
 1334               		.cfi_def_cfa_offset 4
 1335               		.cfi_offset 29, -3
 1336 05b4 00D0      		rcall .
 1337 05b6 00D0      		rcall .
 1338 05b8 00D0      		rcall .
 1339               	.LCFI62:
 1340               		.cfi_def_cfa_offset 10
 1341 05ba CDB7      		in r28,__SP_L__
 1342 05bc DEB7      		in r29,__SP_H__
 1343               	.LCFI63:
 1344               		.cfi_def_cfa_register 28
 1345               	/* prologue: function */
 1346               	/* frame size = 6 */
 1347               	/* stack size = 8 */
 1348               	.L__stack_usage = 8
 1349 05be 9E83      		std Y+6,r25
 1350 05c0 8D83      		std Y+5,r24
 232:ServerLLDN.c  **** 		if(ind->data[0] == LL_DISCOVER_RESPONSE)
 1351               		.loc 6 232 0
 1352 05c2 8D81      		ldd r24,Y+5
 1353 05c4 9E81      		ldd r25,Y+6
 1354 05c6 FC01      		movw r30,r24
 1355 05c8 8085      		ldd r24,Z+8
 1356 05ca 9185      		ldd r25,Z+9
 1357 05cc FC01      		movw r30,r24
 1358 05ce 8081      		ld r24,Z
 1359 05d0 8D30      		cpi r24,lo8(13)
 1360 05d2 01F4      		brne .L37
 1361               	.LBB3:
 233:ServerLLDN.c  **** 		{
 234:ServerLLDN.c  **** 			NWK_DiscoverResponse_t *msg = (NWK_DiscoverResponse_t*)ind->data;
 1362               		.loc 6 234 0
 1363 05d4 8D81      		ldd r24,Y+5
 1364 05d6 9E81      		ldd r25,Y+6
 1365 05d8 FC01      		movw r30,r24
 1366 05da 8085      		ldd r24,Z+8
 1367 05dc 9185      		ldd r25,Z+9
 1368 05de 9C83      		std Y+4,r25
 1369 05e0 8B83      		std Y+3,r24
 235:ServerLLDN.c  **** 			addToAckArray(msg->macAddr);	
 1370               		.loc 6 235 0
 1371 05e2 8B81      		ldd r24,Y+3
 1372 05e4 9C81      		ldd r25,Y+4
 1373 05e6 FC01      		movw r30,r24
 1374 05e8 8181      		ldd r24,Z+1
 1375 05ea 0E94 0000 		call addToAckArray
 236:ServerLLDN.c  **** 					
 237:ServerLLDN.c  **** 			#if PRINT
 238:ServerLLDN.c  **** 			printf("\nDISC %hhx", msg->macAddr);	
 1376               		.loc 6 238 0
 1377 05ee 8B81      		ldd r24,Y+3
 1378 05f0 9C81      		ldd r25,Y+4
 1379 05f2 FC01      		movw r30,r24
 1380 05f4 8181      		ldd r24,Z+1
 1381 05f6 882F      		mov r24,r24
 1382 05f8 90E0      		ldi r25,0
 1383 05fa 292F      		mov r18,r25
 1384 05fc 2F93      		push r18
 1385 05fe 8F93      		push r24
 1386 0600 80E0      		ldi r24,lo8(.LC4)
 1387 0602 90E0      		ldi r25,hi8(.LC4)
 1388 0604 892F      		mov r24,r25
 1389 0606 8F93      		push r24
 1390 0608 80E0      		ldi r24,lo8(.LC4)
 1391 060a 90E0      		ldi r25,hi8(.LC4)
 1392 060c 8F93      		push r24
 1393 060e 0E94 0000 		call printf
 1394 0612 0F90      		pop __tmp_reg__
 1395 0614 0F90      		pop __tmp_reg__
 1396 0616 0F90      		pop __tmp_reg__
 1397 0618 0F90      		pop __tmp_reg__
 1398               	.LBE3:
 1399 061a 00C0      		rjmp .L38
 1400               	.L37:
 239:ServerLLDN.c  **** 			#endif
 240:ServerLLDN.c  **** 		}
 241:ServerLLDN.c  **** 		else if(ind->data[0] == LL_CONFIGURATION_STATUS)
 1401               		.loc 6 241 0
 1402 061c 8D81      		ldd r24,Y+5
 1403 061e 9E81      		ldd r25,Y+6
 1404 0620 FC01      		movw r30,r24
 1405 0622 8085      		ldd r24,Z+8
 1406 0624 9185      		ldd r25,Z+9
 1407 0626 FC01      		movw r30,r24
 1408 0628 8081      		ld r24,Z
 1409 062a 8E30      		cpi r24,lo8(14)
 1410 062c 01F4      		brne .L39
 1411               	.LBB4:
 242:ServerLLDN.c  **** 		{
 243:ServerLLDN.c  **** 			NWK_ConfigStatus_t *msg = (NWK_ConfigStatus_t*)ind->data;
 1412               		.loc 6 243 0
 1413 062e 8D81      		ldd r24,Y+5
 1414 0630 9E81      		ldd r25,Y+6
 1415 0632 FC01      		movw r30,r24
 1416 0634 8085      		ldd r24,Z+8
 1417 0636 9185      		ldd r25,Z+9
 1418 0638 9A83      		std Y+2,r25
 1419 063a 8983      		std Y+1,r24
 244:ServerLLDN.c  **** 			addConfRequestArray(msg);
 1420               		.loc 6 244 0
 1421 063c 8981      		ldd r24,Y+1
 1422 063e 9A81      		ldd r25,Y+2
 1423 0640 0E94 0000 		call addConfRequestArray
 245:ServerLLDN.c  **** 			#if PRINT
 246:ServerLLDN.c  **** 			printf("\nCONF %d", msg->macAddr);	
 1424               		.loc 6 246 0
 1425 0644 8981      		ldd r24,Y+1
 1426 0646 9A81      		ldd r25,Y+2
 1427 0648 FC01      		movw r30,r24
 1428 064a 8381      		ldd r24,Z+3
 1429 064c 882F      		mov r24,r24
 1430 064e 90E0      		ldi r25,0
 1431 0650 292F      		mov r18,r25
 1432 0652 2F93      		push r18
 1433 0654 8F93      		push r24
 1434 0656 80E0      		ldi r24,lo8(.LC5)
 1435 0658 90E0      		ldi r25,hi8(.LC5)
 1436 065a 892F      		mov r24,r25
 1437 065c 8F93      		push r24
 1438 065e 80E0      		ldi r24,lo8(.LC5)
 1439 0660 90E0      		ldi r25,hi8(.LC5)
 1440 0662 8F93      		push r24
 1441 0664 0E94 0000 		call printf
 1442 0668 0F90      		pop __tmp_reg__
 1443 066a 0F90      		pop __tmp_reg__
 1444 066c 0F90      		pop __tmp_reg__
 1445 066e 0F90      		pop __tmp_reg__
 1446               	.LBE4:
 1447 0670 00C0      		rjmp .L38
 1448               	.L39:
 247:ServerLLDN.c  **** 			#endif
 248:ServerLLDN.c  **** 		}
 249:ServerLLDN.c  **** 		else return false;			
 1449               		.loc 6 249 0
 1450 0672 80E0      		ldi r24,0
 1451 0674 00C0      		rjmp .L40
 1452               	.L38:
 250:ServerLLDN.c  **** 		return true;
 1453               		.loc 6 250 0
 1454 0676 81E0      		ldi r24,lo8(1)
 1455               	.L40:
 1456               	/* epilogue start */
 251:ServerLLDN.c  **** 	}
 1457               		.loc 6 251 0
 1458 0678 2696      		adiw r28,6
 1459 067a 0FB6      		in __tmp_reg__,__SREG__
 1460 067c F894      		cli
 1461 067e DEBF      		out __SP_H__,r29
 1462 0680 0FBE      		out __SREG__,__tmp_reg__
 1463 0682 CDBF      		out __SP_L__,r28
 1464 0684 DF91      		pop r29
 1465 0686 CF91      		pop r28
 1466 0688 0895      		ret
 1467               		.cfi_endproc
 1468               	.LFE139:
 1470               	.global	check_ack_pan
 1472               	check_ack_pan:
 1473               	.LFB140:
 252:ServerLLDN.c  **** 	
 253:ServerLLDN.c  **** 	bool check_ack_pan(int addr)
 254:ServerLLDN.c  **** 	{
 1474               		.loc 6 254 0
 1475               		.cfi_startproc
 1476 068a CF93      		push r28
 1477               	.LCFI64:
 1478               		.cfi_def_cfa_offset 3
 1479               		.cfi_offset 28, -2
 1480 068c DF93      		push r29
 1481               	.LCFI65:
 1482               		.cfi_def_cfa_offset 4
 1483               		.cfi_offset 29, -3
 1484 068e 00D0      		rcall .
 1485 0690 00D0      		rcall .
 1486 0692 00D0      		rcall .
 1487               	.LCFI66:
 1488               		.cfi_def_cfa_offset 10
 1489 0694 CDB7      		in r28,__SP_L__
 1490 0696 DEB7      		in r29,__SP_H__
 1491               	.LCFI67:
 1492               		.cfi_def_cfa_register 28
 1493               	/* prologue: function */
 1494               	/* frame size = 6 */
 1495               	/* stack size = 8 */
 1496               	.L__stack_usage = 8
 1497 0698 9E83      		std Y+6,r25
 1498 069a 8D83      		std Y+5,r24
 255:ServerLLDN.c  **** 		int pos =  addr / 8;
 1499               		.loc 6 255 0
 1500 069c 8D81      		ldd r24,Y+5
 1501 069e 9E81      		ldd r25,Y+6
 1502 06a0 9923      		tst r25
 1503 06a2 04F4      		brge .L42
 1504 06a4 0796      		adiw r24,7
 1505               	.L42:
 1506 06a6 9595      		asr r25
 1507 06a8 8795      		ror r24
 1508 06aa 9595      		asr r25
 1509 06ac 8795      		ror r24
 1510 06ae 9595      		asr r25
 1511 06b0 8795      		ror r24
 1512 06b2 9A83      		std Y+2,r25
 1513 06b4 8983      		std Y+1,r24
 256:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 1514               		.loc 6 256 0
 1515 06b6 8D81      		ldd r24,Y+5
 1516 06b8 9E81      		ldd r25,Y+6
 1517 06ba 8770      		andi r24,7
 1518 06bc 9078      		andi r25,128
 1519 06be 9923      		tst r25
 1520 06c0 04F4      		brge .L43
 1521 06c2 0197      		sbiw r24,1
 1522 06c4 886F      		ori r24,248
 1523 06c6 9F6F      		ori r25,255
 1524 06c8 0196      		adiw r24,1
 1525               	.L43:
 1526 06ca 9C01      		movw r18,r24
 1527 06cc 88E0      		ldi r24,lo8(8)
 1528 06ce 90E0      		ldi r25,0
 1529 06d0 821B      		sub r24,r18
 1530 06d2 930B      		sbc r25,r19
 1531 06d4 9C83      		std Y+4,r25
 1532 06d6 8B83      		std Y+3,r24
 257:ServerLLDN.c  **** 		
 258:ServerLLDN.c  **** 		if( ACKFrame.ackFlags[pos] & 1 << bit_shift)
 1533               		.loc 6 258 0
 1534 06d8 8981      		ldd r24,Y+1
 1535 06da 9A81      		ldd r25,Y+2
 1536 06dc 8050      		subi r24,lo8(-(ACKFrame+1))
 1537 06de 9040      		sbci r25,hi8(-(ACKFrame+1))
 1538 06e0 FC01      		movw r30,r24
 1539 06e2 8081      		ld r24,Z
 1540 06e4 882F      		mov r24,r24
 1541 06e6 90E0      		ldi r25,0
 1542 06e8 0B80      		ldd r0,Y+3
 1543 06ea 00C0      		rjmp 2f
 1544               		1:
 1545 06ec 9595      		asr r25
 1546 06ee 8795      		ror r24
 1547               		2:
 1548 06f0 0A94      		dec r0
 1549 06f2 02F4      		brpl 1b
 1550 06f4 8170      		andi r24,1
 1551 06f6 9927      		clr r25
 1552 06f8 892B      		or r24,r25
 1553 06fa 01F0      		breq .L44
 259:ServerLLDN.c  **** 		{
 260:ServerLLDN.c  **** 			return true;
 1554               		.loc 6 260 0
 1555 06fc 81E0      		ldi r24,lo8(1)
 1556 06fe 00C0      		rjmp .L45
 1557               	.L44:
 261:ServerLLDN.c  **** 		}
 262:ServerLLDN.c  **** 		else
 263:ServerLLDN.c  **** 			return false;
 1558               		.loc 6 263 0
 1559 0700 80E0      		ldi r24,0
 1560               	.L45:
 1561               	/* epilogue start */
 264:ServerLLDN.c  **** 	}
 1562               		.loc 6 264 0
 1563 0702 2696      		adiw r28,6
 1564 0704 0FB6      		in __tmp_reg__,__SREG__
 1565 0706 F894      		cli
 1566 0708 DEBF      		out __SP_H__,r29
 1567 070a 0FBE      		out __SREG__,__tmp_reg__
 1568 070c CDBF      		out __SP_L__,r28
 1569 070e DF91      		pop r29
 1570 0710 CF91      		pop r28
 1571 0712 0895      		ret
 1572               		.cfi_endproc
 1573               	.LFE140:
 1575               	.global	__floatsisf
 1576               	.global	__floatunsisf
 1577               	.global	__mulsf3
 1578               	.global	__addsf3
 1579               	.global	__divsf3
 1580               		.section	.rodata
 1581               	.LC6:
 1582 0044 0A20 2564 		.string	"\n %d payload: "
 1582      2070 6179 
 1582      6C6F 6164 
 1582      3A20 00
 1583               	.LC7:
 1584 0053 2568 6878 		.string	"%hhx"
 1584      00
 1585               		.text
 1587               	appDataInd:
 1588               	.LFB141:
 265:ServerLLDN.c  **** 	
 266:ServerLLDN.c  **** 	static bool appDataInd(NWK_DataInd_t *ind)
 267:ServerLLDN.c  **** 	{
 1589               		.loc 6 267 0
 1590               		.cfi_startproc
 1591 0714 8F92      		push r8
 1592               	.LCFI68:
 1593               		.cfi_def_cfa_offset 3
 1594               		.cfi_offset 8, -2
 1595 0716 9F92      		push r9
 1596               	.LCFI69:
 1597               		.cfi_def_cfa_offset 4
 1598               		.cfi_offset 9, -3
 1599 0718 AF92      		push r10
 1600               	.LCFI70:
 1601               		.cfi_def_cfa_offset 5
 1602               		.cfi_offset 10, -4
 1603 071a BF92      		push r11
 1604               	.LCFI71:
 1605               		.cfi_def_cfa_offset 6
 1606               		.cfi_offset 11, -5
 1607 071c CF92      		push r12
 1608               	.LCFI72:
 1609               		.cfi_def_cfa_offset 7
 1610               		.cfi_offset 12, -6
 1611 071e DF92      		push r13
 1612               	.LCFI73:
 1613               		.cfi_def_cfa_offset 8
 1614               		.cfi_offset 13, -7
 1615 0720 EF92      		push r14
 1616               	.LCFI74:
 1617               		.cfi_def_cfa_offset 9
 1618               		.cfi_offset 14, -8
 1619 0722 FF92      		push r15
 1620               	.LCFI75:
 1621               		.cfi_def_cfa_offset 10
 1622               		.cfi_offset 15, -9
 1623 0724 CF93      		push r28
 1624               	.LCFI76:
 1625               		.cfi_def_cfa_offset 11
 1626               		.cfi_offset 28, -10
 1627 0726 DF93      		push r29
 1628               	.LCFI77:
 1629               		.cfi_def_cfa_offset 12
 1630               		.cfi_offset 29, -11
 1631 0728 CDB7      		in r28,__SP_L__
 1632 072a DEB7      		in r29,__SP_H__
 1633               	.LCFI78:
 1634               		.cfi_def_cfa_register 28
 1635 072c 2A97      		sbiw r28,10
 1636               	.LCFI79:
 1637               		.cfi_def_cfa_offset 22
 1638 072e 0FB6      		in __tmp_reg__,__SREG__
 1639 0730 F894      		cli
 1640 0732 DEBF      		out __SP_H__,r29
 1641 0734 0FBE      		out __SREG__,__tmp_reg__
 1642 0736 CDBF      		out __SP_L__,r28
 1643               	/* prologue: function */
 1644               	/* frame size = 10 */
 1645               	/* stack size = 20 */
 1646               	.L__stack_usage = 20
 1647 0738 9A87      		std Y+10,r25
 1648 073a 8987      		std Y+9,r24
 268:ServerLLDN.c  **** 		if(!data_received && timeslot_counter > 1)
 1649               		.loc 6 268 0
 1650 073c 9091 0000 		lds r25,data_received
 1651 0740 81E0      		ldi r24,lo8(1)
 1652 0742 8927      		eor r24,r25
 1653 0744 8823      		tst r24
 1654 0746 01F4      		brne .+2
 1655 0748 00C0      		rjmp .L47
 1656               		.loc 6 268 0 is_stmt 0 discriminator 1
 1657 074a 8091 0000 		lds r24,timeslot_counter
 1658 074e 8230      		cpi r24,lo8(2)
 1659 0750 00F4      		brsh .+2
 1660 0752 00C0      		rjmp .L47
 1661               	.LBB5:
 269:ServerLLDN.c  **** 		{
 270:ServerLLDN.c  **** 		int curr_ts = timeslot_counter - 2*MacLLDNMgmtTS - 1;
 1662               		.loc 6 270 0 is_stmt 1
 1663 0754 8091 0000 		lds r24,timeslot_counter
 1664 0758 882F      		mov r24,r24
 1665 075a 90E0      		ldi r25,0
 1666 075c 0397      		sbiw r24,3
 1667 075e 9A83      		std Y+2,r25
 1668 0760 8983      		std Y+1,r24
 271:ServerLLDN.c  **** 		if(curr_ts > macLLDNRetransmitTS)
 1669               		.loc 6 271 0
 1670 0762 8091 0000 		lds r24,macLLDNRetransmitTS
 1671 0766 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1672 076a 2981      		ldd r18,Y+1
 1673 076c 3A81      		ldd r19,Y+2
 1674 076e 8217      		cp r24,r18
 1675 0770 9307      		cpc r25,r19
 1676 0772 04F0      		brlt .+2
 1677 0774 00C0      		rjmp .L48
 1678               	.LBB6:
 272:ServerLLDN.c  **** 		{
 273:ServerLLDN.c  **** 			int retransmition_slot = 0;
 1679               		.loc 6 273 0
 1680 0776 1C82      		std Y+4,__zero_reg__
 1681 0778 1B82      		std Y+3,__zero_reg__
 274:ServerLLDN.c  **** 			int i;
 275:ServerLLDN.c  **** 			curr_ts = curr_ts - macLLDNRetransmitTS;
 1682               		.loc 6 275 0
 1683 077a 8091 0000 		lds r24,macLLDNRetransmitTS
 1684 077e 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1685 0782 2981      		ldd r18,Y+1
 1686 0784 3A81      		ldd r19,Y+2
 1687 0786 A901      		movw r20,r18
 1688 0788 481B      		sub r20,r24
 1689 078a 590B      		sbc r21,r25
 1690 078c CA01      		movw r24,r20
 1691 078e 9A83      		std Y+2,r25
 1692 0790 8983      		std Y+1,r24
 276:ServerLLDN.c  **** 			for(i = 1; retransmition_slot > curr_ts && i <= macLLDNRetransmitTS; i++) 
 1693               		.loc 6 276 0
 1694 0792 81E0      		ldi r24,lo8(1)
 1695 0794 90E0      		ldi r25,0
 1696 0796 9E83      		std Y+6,r25
 1697 0798 8D83      		std Y+5,r24
 1698 079a 00C0      		rjmp .L49
 1699               	.L52:
 277:ServerLLDN.c  **** 				if( !check_ack_pan(i) )
 1700               		.loc 6 277 0
 1701 079c 8D81      		ldd r24,Y+5
 1702 079e 9E81      		ldd r25,Y+6
 1703 07a0 0E94 0000 		call check_ack_pan
 1704 07a4 982F      		mov r25,r24
 1705 07a6 81E0      		ldi r24,lo8(1)
 1706 07a8 8927      		eor r24,r25
 1707 07aa 8823      		tst r24
 1708 07ac 01F0      		breq .L50
 278:ServerLLDN.c  **** 					retransmition_slot++;
 1709               		.loc 6 278 0
 1710 07ae 8B81      		ldd r24,Y+3
 1711 07b0 9C81      		ldd r25,Y+4
 1712 07b2 0196      		adiw r24,1
 1713 07b4 9C83      		std Y+4,r25
 1714 07b6 8B83      		std Y+3,r24
 1715               	.L50:
 276:ServerLLDN.c  **** 			for(i = 1; retransmition_slot > curr_ts && i <= macLLDNRetransmitTS; i++) 
 1716               		.loc 6 276 0 discriminator 2
 1717 07b8 8D81      		ldd r24,Y+5
 1718 07ba 9E81      		ldd r25,Y+6
 1719 07bc 0196      		adiw r24,1
 1720 07be 9E83      		std Y+6,r25
 1721 07c0 8D83      		std Y+5,r24
 1722               	.L49:
 276:ServerLLDN.c  **** 			for(i = 1; retransmition_slot > curr_ts && i <= macLLDNRetransmitTS; i++) 
 1723               		.loc 6 276 0 is_stmt 0 discriminator 1
 1724 07c2 2B81      		ldd r18,Y+3
 1725 07c4 3C81      		ldd r19,Y+4
 1726 07c6 8981      		ldd r24,Y+1
 1727 07c8 9A81      		ldd r25,Y+2
 1728 07ca 8217      		cp r24,r18
 1729 07cc 9307      		cpc r25,r19
 1730 07ce 04F4      		brge .L51
 276:ServerLLDN.c  **** 			for(i = 1; retransmition_slot > curr_ts && i <= macLLDNRetransmitTS; i++) 
 1731               		.loc 6 276 0 discriminator 3
 1732 07d0 8091 0000 		lds r24,macLLDNRetransmitTS
 1733 07d4 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1734 07d8 2D81      		ldd r18,Y+5
 1735 07da 3E81      		ldd r19,Y+6
 1736 07dc 8217      		cp r24,r18
 1737 07de 9307      		cpc r25,r19
 1738 07e0 04F4      		brge .L52
 1739               	.L51:
 279:ServerLLDN.c  **** 			
 280:ServerLLDN.c  **** 			if(i == macLLDNRetransmitTS + 1)
 1740               		.loc 6 280 0 is_stmt 1
 1741 07e2 8091 0000 		lds r24,macLLDNRetransmitTS
 1742 07e6 9091 0000 		lds r25,macLLDNRetransmitTS+1
 1743 07ea 9C01      		movw r18,r24
 1744 07ec 2F5F      		subi r18,-1
 1745 07ee 3F4F      		sbci r19,-1
 1746 07f0 8D81      		ldd r24,Y+5
 1747 07f2 9E81      		ldd r25,Y+6
 1748 07f4 2817      		cp r18,r24
 1749 07f6 3907      		cpc r19,r25
 1750 07f8 01F4      		brne .L53
 281:ServerLLDN.c  **** 				return false;
 1751               		.loc 6 281 0
 1752 07fa 80E0      		ldi r24,0
 1753 07fc 00C0      		rjmp .L46
 1754               	.L53:
 282:ServerLLDN.c  **** 			
 283:ServerLLDN.c  **** 			curr_ts = i;
 1755               		.loc 6 283 0
 1756 07fe 8D81      		ldd r24,Y+5
 1757 0800 9E81      		ldd r25,Y+6
 1758 0802 9A83      		std Y+2,r25
 1759 0804 8983      		std Y+1,r24
 1760               	.L48:
 1761               	.LBE6:
 284:ServerLLDN.c  **** 			
 285:ServerLLDN.c  **** 		}
 286:ServerLLDN.c  **** 		data_received = true;
 1762               		.loc 6 286 0
 1763 0806 81E0      		ldi r24,lo8(1)
 1764 0808 8093 0000 		sts data_received,r24
 287:ServerLLDN.c  **** 		
 288:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].rssi = ind->rssi;
 1765               		.loc 6 288 0
 1766 080c 8985      		ldd r24,Y+9
 1767 080e 9A85      		ldd r25,Y+10
 1768 0810 FC01      		movw r30,r24
 1769 0812 8485      		ldd r24,Z+12
 1770 0814 582F      		mov r21,r24
 1771 0816 2981      		ldd r18,Y+1
 1772 0818 3A81      		ldd r19,Y+2
 1773 081a 4AE4      		ldi r20,lo8(74)
 1774 081c 429F      		mul r20,r18
 1775 081e C001      		movw r24,r0
 1776 0820 439F      		mul r20,r19
 1777 0822 900D      		add r25,r0
 1778 0824 1124      		clr __zero_reg__
 1779 0826 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1780 0828 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1781 082a FC01      		movw r30,r24
 1782 082c 5083      		st Z,r21
 289:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].average_rssi = (nodes_info_arr[curr_ts].rssi + nodes_info_arr[curr_ts].av
 1783               		.loc 6 289 0
 1784 082e 2981      		ldd r18,Y+1
 1785 0830 3A81      		ldd r19,Y+2
 1786 0832 4AE4      		ldi r20,lo8(74)
 1787 0834 429F      		mul r20,r18
 1788 0836 C001      		movw r24,r0
 1789 0838 439F      		mul r20,r19
 1790 083a 900D      		add r25,r0
 1791 083c 1124      		clr __zero_reg__
 1792 083e 8050      		subi r24,lo8(-(nodes_info_arr+4))
 1793 0840 9040      		sbci r25,hi8(-(nodes_info_arr+4))
 1794 0842 FC01      		movw r30,r24
 1795 0844 8081      		ld r24,Z
 1796 0846 882F      		mov r24,r24
 1797 0848 90E0      		ldi r25,0
 1798 084a 092E      		mov __tmp_reg__,r25
 1799 084c 000C      		lsl r0
 1800 084e AA0B      		sbc r26,r26
 1801 0850 BB0B      		sbc r27,r27
 1802 0852 BC01      		movw r22,r24
 1803 0854 CD01      		movw r24,r26
 1804 0856 0E94 0000 		call __floatsisf
 1805 085a 4B01      		movw r8,r22
 1806 085c 5C01      		movw r10,r24
 1807 085e 2981      		ldd r18,Y+1
 1808 0860 3A81      		ldd r19,Y+2
 1809 0862 4AE4      		ldi r20,lo8(74)
 1810 0864 429F      		mul r20,r18
 1811 0866 C001      		movw r24,r0
 1812 0868 439F      		mul r20,r19
 1813 086a 900D      		add r25,r0
 1814 086c 1124      		clr __zero_reg__
 1815 086e 8050      		subi r24,lo8(-(nodes_info_arr+5))
 1816 0870 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 1817 0872 FC01      		movw r30,r24
 1818 0874 C080      		ld r12,Z
 1819 0876 D180      		ldd r13,Z+1
 1820 0878 E280      		ldd r14,Z+2
 1821 087a F380      		ldd r15,Z+3
 1822 087c 2981      		ldd r18,Y+1
 1823 087e 3A81      		ldd r19,Y+2
 1824 0880 4AE4      		ldi r20,lo8(74)
 1825 0882 429F      		mul r20,r18
 1826 0884 C001      		movw r24,r0
 1827 0886 439F      		mul r20,r19
 1828 0888 900D      		add r25,r0
 1829 088a 1124      		clr __zero_reg__
 1830 088c 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1831 088e 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1832 0890 FC01      		movw r30,r24
 1833 0892 8081      		ld r24,Z
 1834 0894 9181      		ldd r25,Z+1
 1835 0896 CC01      		movw r24,r24
 1836 0898 A0E0      		ldi r26,0
 1837 089a B0E0      		ldi r27,0
 1838 089c BC01      		movw r22,r24
 1839 089e CD01      		movw r24,r26
 1840 08a0 0E94 0000 		call __floatunsisf
 1841 08a4 DC01      		movw r26,r24
 1842 08a6 CB01      		movw r24,r22
 1843 08a8 9C01      		movw r18,r24
 1844 08aa AD01      		movw r20,r26
 1845 08ac C701      		movw r24,r14
 1846 08ae B601      		movw r22,r12
 1847 08b0 0E94 0000 		call __mulsf3
 1848 08b4 DC01      		movw r26,r24
 1849 08b6 CB01      		movw r24,r22
 1850 08b8 9C01      		movw r18,r24
 1851 08ba AD01      		movw r20,r26
 1852 08bc C501      		movw r24,r10
 1853 08be B401      		movw r22,r8
 1854 08c0 0E94 0000 		call __addsf3
 1855 08c4 DC01      		movw r26,r24
 1856 08c6 CB01      		movw r24,r22
 1857 08c8 6C01      		movw r12,r24
 1858 08ca 7D01      		movw r14,r26
 290:ServerLLDN.c  **** 															/(nodes_info_arr[curr_ts].msg_rec + 1);
 1859               		.loc 6 290 0
 1860 08cc 2981      		ldd r18,Y+1
 1861 08ce 3A81      		ldd r19,Y+2
 1862 08d0 4AE4      		ldi r20,lo8(74)
 1863 08d2 429F      		mul r20,r18
 1864 08d4 C001      		movw r24,r0
 1865 08d6 439F      		mul r20,r19
 1866 08d8 900D      		add r25,r0
 1867 08da 1124      		clr __zero_reg__
 1868 08dc 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1869 08de 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1870 08e0 FC01      		movw r30,r24
 1871 08e2 8081      		ld r24,Z
 1872 08e4 9181      		ldd r25,Z+1
 1873 08e6 0196      		adiw r24,1
 1874 08e8 CC01      		movw r24,r24
 1875 08ea A0E0      		ldi r26,0
 1876 08ec B0E0      		ldi r27,0
 1877 08ee BC01      		movw r22,r24
 1878 08f0 CD01      		movw r24,r26
 1879 08f2 0E94 0000 		call __floatunsisf
 1880 08f6 DC01      		movw r26,r24
 1881 08f8 CB01      		movw r24,r22
 1882 08fa 9C01      		movw r18,r24
 1883 08fc AD01      		movw r20,r26
 1884 08fe C701      		movw r24,r14
 1885 0900 B601      		movw r22,r12
 1886 0902 0E94 0000 		call __divsf3
 1887 0906 DC01      		movw r26,r24
 1888 0908 CB01      		movw r24,r22
 289:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].average_rssi = (nodes_info_arr[curr_ts].rssi + nodes_info_arr[curr_ts].av
 1889               		.loc 6 289 0
 1890 090a 4981      		ldd r20,Y+1
 1891 090c 5A81      		ldd r21,Y+2
 1892 090e 6AE4      		ldi r22,lo8(74)
 1893 0910 649F      		mul r22,r20
 1894 0912 9001      		movw r18,r0
 1895 0914 659F      		mul r22,r21
 1896 0916 300D      		add r19,r0
 1897 0918 1124      		clr __zero_reg__
 1898 091a 2050      		subi r18,lo8(-(nodes_info_arr+5))
 1899 091c 3040      		sbci r19,hi8(-(nodes_info_arr+5))
 1900 091e F901      		movw r30,r18
 1901 0920 8083      		st Z,r24
 1902 0922 9183      		std Z+1,r25
 1903 0924 A283      		std Z+2,r26
 1904 0926 B383      		std Z+3,r27
 291:ServerLLDN.c  **** 		nodes_info_arr[curr_ts].msg_rec++;
 1905               		.loc 6 291 0
 1906 0928 2981      		ldd r18,Y+1
 1907 092a 3A81      		ldd r19,Y+2
 1908 092c 4AE4      		ldi r20,lo8(74)
 1909 092e 429F      		mul r20,r18
 1910 0930 C001      		movw r24,r0
 1911 0932 439F      		mul r20,r19
 1912 0934 900D      		add r25,r0
 1913 0936 1124      		clr __zero_reg__
 1914 0938 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1915 093a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1916 093c FC01      		movw r30,r24
 1917 093e 8081      		ld r24,Z
 1918 0940 9181      		ldd r25,Z+1
 1919 0942 9C01      		movw r18,r24
 1920 0944 2F5F      		subi r18,-1
 1921 0946 3F4F      		sbci r19,-1
 1922 0948 4981      		ldd r20,Y+1
 1923 094a 5A81      		ldd r21,Y+2
 1924 094c 6AE4      		ldi r22,lo8(74)
 1925 094e 649F      		mul r22,r20
 1926 0950 C001      		movw r24,r0
 1927 0952 659F      		mul r22,r21
 1928 0954 900D      		add r25,r0
 1929 0956 1124      		clr __zero_reg__
 1930 0958 8050      		subi r24,lo8(-(nodes_info_arr+69))
 1931 095a 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 1932 095c FC01      		movw r30,r24
 1933 095e 3183      		std Z+1,r19
 1934 0960 2083      		st Z,r18
 292:ServerLLDN.c  **** 
 293:ServerLLDN.c  **** 		// printf("\n addrs %hhx, msg_rec %d, curr_ts %d", nodes_info_arr[curr_ts].mac_addr, nodes_info_a
 294:ServerLLDN.c  **** 
 295:ServerLLDN.c  **** 		addToAckArray(curr_ts+1);
 1935               		.loc 6 295 0
 1936 0962 8981      		ldd r24,Y+1
 1937 0964 8F5F      		subi r24,lo8(-(1))
 1938 0966 0E94 0000 		call addToAckArray
 296:ServerLLDN.c  **** 		
 297:ServerLLDN.c  **** 		printf("\n %d payload: ", curr_ts);
 1939               		.loc 6 297 0
 1940 096a 8A81      		ldd r24,Y+2
 1941 096c 8F93      		push r24
 1942 096e 8981      		ldd r24,Y+1
 1943 0970 8F93      		push r24
 1944 0972 80E0      		ldi r24,lo8(.LC6)
 1945 0974 90E0      		ldi r25,hi8(.LC6)
 1946 0976 892F      		mov r24,r25
 1947 0978 8F93      		push r24
 1948 097a 80E0      		ldi r24,lo8(.LC6)
 1949 097c 90E0      		ldi r25,hi8(.LC6)
 1950 097e 8F93      		push r24
 1951 0980 0E94 0000 		call printf
 1952 0984 0F90      		pop __tmp_reg__
 1953 0986 0F90      		pop __tmp_reg__
 1954 0988 0F90      		pop __tmp_reg__
 1955 098a 0F90      		pop __tmp_reg__
 298:ServerLLDN.c  **** 		
 299:ServerLLDN.c  **** 		msg_info_array[curr_ts].size = ind->size;		
 1956               		.loc 6 299 0
 1957 098c 8985      		ldd r24,Y+9
 1958 098e 9A85      		ldd r25,Y+10
 1959 0990 FC01      		movw r30,r24
 1960 0992 4285      		ldd r20,Z+10
 1961 0994 2981      		ldd r18,Y+1
 1962 0996 3A81      		ldd r19,Y+2
 1963 0998 54E8      		ldi r21,lo8(-124)
 1964 099a 529F      		mul r21,r18
 1965 099c C001      		movw r24,r0
 1966 099e 539F      		mul r21,r19
 1967 09a0 900D      		add r25,r0
 1968 09a2 1124      		clr __zero_reg__
 1969 09a4 8050      		subi r24,lo8(-(msg_info_array+4))
 1970 09a6 9040      		sbci r25,hi8(-(msg_info_array+4))
 1971 09a8 FC01      		movw r30,r24
 1972 09aa 4083      		st Z,r20
 1973               	.LBB7:
 300:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 1974               		.loc 6 300 0
 1975 09ac 1886      		std Y+8,__zero_reg__
 1976 09ae 1F82      		std Y+7,__zero_reg__
 1977 09b0 00C0      		rjmp .L55
 1978               	.L56:
 301:ServerLLDN.c  **** 			{
 302:ServerLLDN.c  **** 			msg_info_array[curr_ts].data_payload[i] = ind->data[i];
 1979               		.loc 6 302 0 discriminator 3
 1980 09b2 8985      		ldd r24,Y+9
 1981 09b4 9A85      		ldd r25,Y+10
 1982 09b6 FC01      		movw r30,r24
 1983 09b8 2085      		ldd r18,Z+8
 1984 09ba 3185      		ldd r19,Z+9
 1985 09bc 8F81      		ldd r24,Y+7
 1986 09be 9885      		ldd r25,Y+8
 1987 09c0 820F      		add r24,r18
 1988 09c2 931F      		adc r25,r19
 1989 09c4 FC01      		movw r30,r24
 1990 09c6 4081      		ld r20,Z
 1991 09c8 8981      		ldd r24,Y+1
 1992 09ca 9A81      		ldd r25,Y+2
 1993 09cc 54E8      		ldi r21,lo8(-124)
 1994 09ce 589F      		mul r21,r24
 1995 09d0 9001      		movw r18,r0
 1996 09d2 599F      		mul r21,r25
 1997 09d4 300D      		add r19,r0
 1998 09d6 1124      		clr __zero_reg__
 1999 09d8 8F81      		ldd r24,Y+7
 2000 09da 9885      		ldd r25,Y+8
 2001 09dc 820F      		add r24,r18
 2002 09de 931F      		adc r25,r19
 2003 09e0 8050      		subi r24,lo8(-(msg_info_array+5))
 2004 09e2 9040      		sbci r25,hi8(-(msg_info_array+5))
 2005 09e4 FC01      		movw r30,r24
 2006 09e6 4083      		st Z,r20
 303:ServerLLDN.c  **** 			printf("%hhx", msg_info_array[curr_ts].data_payload[i]);
 2007               		.loc 6 303 0 discriminator 3
 2008 09e8 8981      		ldd r24,Y+1
 2009 09ea 9A81      		ldd r25,Y+2
 2010 09ec 44E8      		ldi r20,lo8(-124)
 2011 09ee 489F      		mul r20,r24
 2012 09f0 9001      		movw r18,r0
 2013 09f2 499F      		mul r20,r25
 2014 09f4 300D      		add r19,r0
 2015 09f6 1124      		clr __zero_reg__
 2016 09f8 8F81      		ldd r24,Y+7
 2017 09fa 9885      		ldd r25,Y+8
 2018 09fc 820F      		add r24,r18
 2019 09fe 931F      		adc r25,r19
 2020 0a00 8050      		subi r24,lo8(-(msg_info_array+5))
 2021 0a02 9040      		sbci r25,hi8(-(msg_info_array+5))
 2022 0a04 FC01      		movw r30,r24
 2023 0a06 8081      		ld r24,Z
 2024 0a08 882F      		mov r24,r24
 2025 0a0a 90E0      		ldi r25,0
 2026 0a0c 292F      		mov r18,r25
 2027 0a0e 2F93      		push r18
 2028 0a10 8F93      		push r24
 2029 0a12 80E0      		ldi r24,lo8(.LC7)
 2030 0a14 90E0      		ldi r25,hi8(.LC7)
 2031 0a16 892F      		mov r24,r25
 2032 0a18 8F93      		push r24
 2033 0a1a 80E0      		ldi r24,lo8(.LC7)
 2034 0a1c 90E0      		ldi r25,hi8(.LC7)
 2035 0a1e 8F93      		push r24
 2036 0a20 0E94 0000 		call printf
 2037 0a24 0F90      		pop __tmp_reg__
 2038 0a26 0F90      		pop __tmp_reg__
 2039 0a28 0F90      		pop __tmp_reg__
 2040 0a2a 0F90      		pop __tmp_reg__
 300:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2041               		.loc 6 300 0 discriminator 3
 2042 0a2c 8F81      		ldd r24,Y+7
 2043 0a2e 9885      		ldd r25,Y+8
 2044 0a30 0196      		adiw r24,1
 2045 0a32 9887      		std Y+8,r25
 2046 0a34 8F83      		std Y+7,r24
 2047               	.L55:
 300:ServerLLDN.c  **** 		for (int i = 0; i < ind->size; i++)
 2048               		.loc 6 300 0 is_stmt 0 discriminator 1
 2049 0a36 8985      		ldd r24,Y+9
 2050 0a38 9A85      		ldd r25,Y+10
 2051 0a3a FC01      		movw r30,r24
 2052 0a3c 8285      		ldd r24,Z+10
 2053 0a3e 282F      		mov r18,r24
 2054 0a40 30E0      		ldi r19,0
 2055 0a42 8F81      		ldd r24,Y+7
 2056 0a44 9885      		ldd r25,Y+8
 2057 0a46 8217      		cp r24,r18
 2058 0a48 9307      		cpc r25,r19
 2059 0a4a 04F4      		brge .+2
 2060 0a4c 00C0      		rjmp .L56
 2061               	.L47:
 2062               	.L46:
 2063               	/* epilogue start */
 2064               	.LBE7:
 2065               	.LBE5:
 304:ServerLLDN.c  **** 			}
 305:ServerLLDN.c  **** 		}
 306:ServerLLDN.c  **** 	}
 2066               		.loc 6 306 0 is_stmt 1
 2067 0a4e 2A96      		adiw r28,10
 2068 0a50 0FB6      		in __tmp_reg__,__SREG__
 2069 0a52 F894      		cli
 2070 0a54 DEBF      		out __SP_H__,r29
 2071 0a56 0FBE      		out __SREG__,__tmp_reg__
 2072 0a58 CDBF      		out __SP_L__,r28
 2073 0a5a DF91      		pop r29
 2074 0a5c CF91      		pop r28
 2075 0a5e FF90      		pop r15
 2076 0a60 EF90      		pop r14
 2077 0a62 DF90      		pop r13
 2078 0a64 CF90      		pop r12
 2079 0a66 BF90      		pop r11
 2080 0a68 AF90      		pop r10
 2081 0a6a 9F90      		pop r9
 2082 0a6c 8F90      		pop r8
 2083 0a6e 0895      		ret
 2084               		.cfi_endproc
 2085               	.LFE141:
 2088               	appPanPrepareACK:
 2089               	.LFB142:
 307:ServerLLDN.c  **** 	
 308:ServerLLDN.c  **** 	static void appPanPrepareACK(void)
 309:ServerLLDN.c  **** 	{
 2090               		.loc 6 309 0
 2091               		.cfi_startproc
 2092 0a70 CF93      		push r28
 2093               	.LCFI80:
 2094               		.cfi_def_cfa_offset 3
 2095               		.cfi_offset 28, -2
 2096 0a72 DF93      		push r29
 2097               	.LCFI81:
 2098               		.cfi_def_cfa_offset 4
 2099               		.cfi_offset 29, -3
 2100 0a74 CDB7      		in r28,__SP_L__
 2101 0a76 DEB7      		in r29,__SP_H__
 2102               	.LCFI82:
 2103               		.cfi_def_cfa_register 28
 2104               	/* prologue: function */
 2105               	/* frame size = 0 */
 2106               	/* stack size = 2 */
 2107               	.L__stack_usage = 2
 310:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2108               		.loc 6 310 0
 2109 0a78 1092 0000 		sts msgReq+5+1,__zero_reg__
 2110 0a7c 1092 0000 		sts msgReq+5,__zero_reg__
 311:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2111               		.loc 6 311 0
 2112 0a80 1092 0000 		sts msgReq+7,__zero_reg__
 312:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2113               		.loc 6 312 0
 2114 0a84 1092 0000 		sts msgReq+8,__zero_reg__
 313:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_ACK;
 2115               		.loc 6 313 0
 2116 0a88 80E0      		ldi r24,0
 2117 0a8a 90E4      		ldi r25,lo8(64)
 2118 0a8c 9093 0000 		sts msgReq+9+1,r25
 2119 0a90 8093 0000 		sts msgReq+9,r24
 314:ServerLLDN.c  **** 		msgReq.data	= (uint8_t *)&ACKFrame;
 2120               		.loc 6 314 0
 2121 0a94 80E0      		ldi r24,lo8(ACKFrame)
 2122 0a96 90E0      		ldi r25,hi8(ACKFrame)
 2123 0a98 9093 0000 		sts msgReq+13+1,r25
 2124 0a9c 8093 0000 		sts msgReq+13,r24
 315:ServerLLDN.c  **** 		msgReq.size	= sizeof(uint8_t)*(ACKFrame_size + 1);
 2125               		.loc 6 315 0
 2126 0aa0 8091 0000 		lds r24,ACKFrame_size
 2127 0aa4 9091 0000 		lds r25,ACKFrame_size+1
 2128 0aa8 8F5F      		subi r24,lo8(-(1))
 2129 0aaa 8093 0000 		sts msgReq+15,r24
 316:ServerLLDN.c  **** 
 317:ServerLLDN.c  **** 	}
 2130               		.loc 6 317 0
 2131 0aae 0000      		nop
 2132               	/* epilogue start */
 2133 0ab0 DF91      		pop r29
 2134 0ab2 CF91      		pop r28
 2135 0ab4 0895      		ret
 2136               		.cfi_endproc
 2137               	.LFE142:
 2140               	appPanReset:
 2141               	.LFB143:
 318:ServerLLDN.c  **** 
 319:ServerLLDN.c  **** 	static void appPanReset(void)
 320:ServerLLDN.c  **** 	{
 2142               		.loc 6 320 0
 2143               		.cfi_startproc
 2144 0ab6 CF93      		push r28
 2145               	.LCFI83:
 2146               		.cfi_def_cfa_offset 3
 2147               		.cfi_offset 28, -2
 2148 0ab8 DF93      		push r29
 2149               	.LCFI84:
 2150               		.cfi_def_cfa_offset 4
 2151               		.cfi_offset 29, -3
 2152 0aba 00D0      		rcall .
 2153 0abc 00D0      		rcall .
 2154 0abe 00D0      		rcall .
 2155               	.LCFI85:
 2156               		.cfi_def_cfa_offset 10
 2157 0ac0 CDB7      		in r28,__SP_L__
 2158 0ac2 DEB7      		in r29,__SP_H__
 2159               	.LCFI86:
 2160               		.cfi_def_cfa_register 28
 2161               	/* prologue: function */
 2162               	/* frame size = 6 */
 2163               	/* stack size = 8 */
 2164               	.L__stack_usage = 8
 321:ServerLLDN.c  **** 		// prepare beacon reset message
 322:ServerLLDN.c  **** 		msgReq.dstAddr		= 0;
 2165               		.loc 6 322 0
 2166 0ac4 1092 0000 		sts msgReq+5+1,__zero_reg__
 2167 0ac8 1092 0000 		sts msgReq+5,__zero_reg__
 323:ServerLLDN.c  **** 		msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2168               		.loc 6 323 0
 2169 0acc 1092 0000 		sts msgReq+7,__zero_reg__
 324:ServerLLDN.c  **** 		msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2170               		.loc 6 324 0
 2171 0ad0 1092 0000 		sts msgReq+8,__zero_reg__
 325:ServerLLDN.c  **** 		msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_RESET_STATE;
 2172               		.loc 6 325 0
 2173 0ad4 80E4      		ldi r24,lo8(64)
 2174 0ad6 94E0      		ldi r25,lo8(4)
 2175 0ad8 9093 0000 		sts msgReq+9+1,r25
 2176 0adc 8093 0000 		sts msgReq+9,r24
 326:ServerLLDN.c  **** 		msgReq.data			= NULL;
 2177               		.loc 6 326 0
 2178 0ae0 1092 0000 		sts msgReq+13+1,__zero_reg__
 2179 0ae4 1092 0000 		sts msgReq+13,__zero_reg__
 327:ServerLLDN.c  **** 		msgReq.size			= 0;
 2180               		.loc 6 327 0
 2181 0ae8 1092 0000 		sts msgReq+15,__zero_reg__
 2182               	.LBB8:
 328:ServerLLDN.c  **** 
 329:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2183               		.loc 6 329 0
 2184 0aec 1A82      		std Y+2,__zero_reg__
 2185 0aee 1982      		std Y+1,__zero_reg__
 2186 0af0 00C0      		rjmp .L59
 2187               	.L60:
 330:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2188               		.loc 6 330 0 discriminator 3
 2189 0af2 8981      		ldd r24,Y+1
 2190 0af4 9A81      		ldd r25,Y+2
 2191 0af6 8050      		subi r24,lo8(-(ACKFrame+1))
 2192 0af8 9040      		sbci r25,hi8(-(ACKFrame+1))
 2193 0afa FC01      		movw r30,r24
 2194 0afc 1082      		st Z,__zero_reg__
 329:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2195               		.loc 6 329 0 discriminator 3
 2196 0afe 8981      		ldd r24,Y+1
 2197 0b00 9A81      		ldd r25,Y+2
 2198 0b02 0196      		adiw r24,1
 2199 0b04 9A83      		std Y+2,r25
 2200 0b06 8983      		std Y+1,r24
 2201               	.L59:
 329:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2202               		.loc 6 329 0 is_stmt 0 discriminator 1
 2203 0b08 8981      		ldd r24,Y+1
 2204 0b0a 9A81      		ldd r25,Y+2
 2205 0b0c 8097      		sbiw r24,32
 2206 0b0e 04F0      		brlt .L60
 2207               	.LBE8:
 2208               	.LBB9:
 331:ServerLLDN.c  **** 			
 332:ServerLLDN.c  **** 		for (int i = 0; i < 50; i++)
 2209               		.loc 6 332 0 is_stmt 1
 2210 0b10 1C82      		std Y+4,__zero_reg__
 2211 0b12 1B82      		std Y+3,__zero_reg__
 2212 0b14 00C0      		rjmp .L61
 2213               	.L64:
 333:ServerLLDN.c  **** 		{
 334:ServerLLDN.c  **** 			nodes_info_arr[i].mac_addr = 0;
 2214               		.loc 6 334 0
 2215 0b16 2B81      		ldd r18,Y+3
 2216 0b18 3C81      		ldd r19,Y+4
 2217 0b1a 4AE4      		ldi r20,lo8(74)
 2218 0b1c 429F      		mul r20,r18
 2219 0b1e C001      		movw r24,r0
 2220 0b20 439F      		mul r20,r19
 2221 0b22 900D      		add r25,r0
 2222 0b24 1124      		clr __zero_reg__
 2223 0b26 8050      		subi r24,lo8(-(nodes_info_arr+1))
 2224 0b28 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 2225 0b2a FC01      		movw r30,r24
 2226 0b2c 1182      		std Z+1,__zero_reg__
 2227 0b2e 1082      		st Z,__zero_reg__
 335:ServerLLDN.c  **** 			nodes_info_arr[i].msg_rec = 0;
 2228               		.loc 6 335 0
 2229 0b30 2B81      		ldd r18,Y+3
 2230 0b32 3C81      		ldd r19,Y+4
 2231 0b34 4AE4      		ldi r20,lo8(74)
 2232 0b36 429F      		mul r20,r18
 2233 0b38 C001      		movw r24,r0
 2234 0b3a 439F      		mul r20,r19
 2235 0b3c 900D      		add r25,r0
 2236 0b3e 1124      		clr __zero_reg__
 2237 0b40 8050      		subi r24,lo8(-(nodes_info_arr+69))
 2238 0b42 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 2239 0b44 FC01      		movw r30,r24
 2240 0b46 1182      		std Z+1,__zero_reg__
 2241 0b48 1082      		st Z,__zero_reg__
 336:ServerLLDN.c  **** 
 337:ServerLLDN.c  **** 			
 338:ServerLLDN.c  **** 			msg_info_array[i].mac_addr = 0;
 2242               		.loc 6 338 0
 2243 0b4a 2B81      		ldd r18,Y+3
 2244 0b4c 3C81      		ldd r19,Y+4
 2245 0b4e 44E8      		ldi r20,lo8(-124)
 2246 0b50 429F      		mul r20,r18
 2247 0b52 C001      		movw r24,r0
 2248 0b54 439F      		mul r20,r19
 2249 0b56 900D      		add r25,r0
 2250 0b58 1124      		clr __zero_reg__
 2251 0b5a 8050      		subi r24,lo8(-(msg_info_array))
 2252 0b5c 9040      		sbci r25,hi8(-(msg_info_array))
 2253 0b5e FC01      		movw r30,r24
 2254 0b60 1182      		std Z+1,__zero_reg__
 2255 0b62 1082      		st Z,__zero_reg__
 339:ServerLLDN.c  **** 			msg_info_array[i].coop_addr = 0;
 2256               		.loc 6 339 0
 2257 0b64 2B81      		ldd r18,Y+3
 2258 0b66 3C81      		ldd r19,Y+4
 2259 0b68 44E8      		ldi r20,lo8(-124)
 2260 0b6a 429F      		mul r20,r18
 2261 0b6c C001      		movw r24,r0
 2262 0b6e 439F      		mul r20,r19
 2263 0b70 900D      		add r25,r0
 2264 0b72 1124      		clr __zero_reg__
 2265 0b74 8050      		subi r24,lo8(-(msg_info_array+2))
 2266 0b76 9040      		sbci r25,hi8(-(msg_info_array+2))
 2267 0b78 FC01      		movw r30,r24
 2268 0b7a 1182      		std Z+1,__zero_reg__
 2269 0b7c 1082      		st Z,__zero_reg__
 2270               	.LBB10:
 340:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2271               		.loc 6 340 0
 2272 0b7e 1E82      		std Y+6,__zero_reg__
 2273 0b80 1D82      		std Y+5,__zero_reg__
 2274 0b82 00C0      		rjmp .L62
 2275               	.L63:
 341:ServerLLDN.c  **** 				nodes_info_arr[i].neighbors[j] = 0;
 2276               		.loc 6 341 0 discriminator 3
 2277 0b84 8B81      		ldd r24,Y+3
 2278 0b86 9C81      		ldd r25,Y+4
 2279 0b88 4AE4      		ldi r20,lo8(74)
 2280 0b8a 489F      		mul r20,r24
 2281 0b8c 9001      		movw r18,r0
 2282 0b8e 499F      		mul r20,r25
 2283 0b90 300D      		add r19,r0
 2284 0b92 1124      		clr __zero_reg__
 2285 0b94 8D81      		ldd r24,Y+5
 2286 0b96 9E81      		ldd r25,Y+6
 2287 0b98 820F      		add r24,r18
 2288 0b9a 931F      		adc r25,r19
 2289 0b9c 8050      		subi r24,lo8(-(nodes_info_arr+9))
 2290 0b9e 9040      		sbci r25,hi8(-(nodes_info_arr+9))
 2291 0ba0 FC01      		movw r30,r24
 2292 0ba2 1082      		st Z,__zero_reg__
 340:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2293               		.loc 6 340 0 discriminator 3
 2294 0ba4 8D81      		ldd r24,Y+5
 2295 0ba6 9E81      		ldd r25,Y+6
 2296 0ba8 0196      		adiw r24,1
 2297 0baa 9E83      		std Y+6,r25
 2298 0bac 8D83      		std Y+5,r24
 2299               	.L62:
 340:ServerLLDN.c  **** 			for (int j = 0; j < 50; j++)
 2300               		.loc 6 340 0 is_stmt 0 discriminator 1
 2301 0bae 8D81      		ldd r24,Y+5
 2302 0bb0 9E81      		ldd r25,Y+6
 2303 0bb2 C297      		sbiw r24,50
 2304 0bb4 04F0      		brlt .L63
 2305               	.LBE10:
 332:ServerLLDN.c  **** 		{
 2306               		.loc 6 332 0 is_stmt 1 discriminator 2
 2307 0bb6 8B81      		ldd r24,Y+3
 2308 0bb8 9C81      		ldd r25,Y+4
 2309 0bba 0196      		adiw r24,1
 2310 0bbc 9C83      		std Y+4,r25
 2311 0bbe 8B83      		std Y+3,r24
 2312               	.L61:
 332:ServerLLDN.c  **** 		{
 2313               		.loc 6 332 0 is_stmt 0 discriminator 1
 2314 0bc0 8B81      		ldd r24,Y+3
 2315 0bc2 9C81      		ldd r25,Y+4
 2316 0bc4 C297      		sbiw r24,50
 2317 0bc6 04F4      		brge .+2
 2318 0bc8 00C0      		rjmp .L64
 2319               	.LBE9:
 342:ServerLLDN.c  **** 		}
 343:ServerLLDN.c  **** 		// assTimeSlot = MacLLDNMgmtTS * 2;	
 344:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2320               		.loc 6 344 0 is_stmt 1
 2321 0bca 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2322 0bce 1092 0000 		sts ACKFrame_size,__zero_reg__
 345:ServerLLDN.c  **** 		counter_associados = 0;
 2323               		.loc 6 345 0
 2324 0bd2 1092 0000 		sts counter_associados+1,__zero_reg__
 2325 0bd6 1092 0000 		sts counter_associados,__zero_reg__
 346:ServerLLDN.c  **** 		macLLDNnumUplinkTS = 0;
 2326               		.loc 6 346 0
 2327 0bda 1092 0000 		sts macLLDNnumUplinkTS+1,__zero_reg__
 2328 0bde 1092 0000 		sts macLLDNnumUplinkTS,__zero_reg__
 347:ServerLLDN.c  **** 		n = 0;
 2329               		.loc 6 347 0
 2330 0be2 1092 0000 		sts n,__zero_reg__
 348:ServerLLDN.c  **** 	}
 2331               		.loc 6 348 0
 2332 0be6 0000      		nop
 2333               	/* epilogue start */
 2334 0be8 2696      		adiw r28,6
 2335 0bea 0FB6      		in __tmp_reg__,__SREG__
 2336 0bec F894      		cli
 2337 0bee DEBF      		out __SP_H__,r29
 2338 0bf0 0FBE      		out __SREG__,__tmp_reg__
 2339 0bf2 CDBF      		out __SP_L__,r28
 2340 0bf4 DF91      		pop r29
 2341 0bf6 CF91      		pop r28
 2342 0bf8 0895      		ret
 2343               		.cfi_endproc
 2344               	.LFE143:
 2346               	.global	__fixunssfsi
 2348               	appPanDiscInit:
 2349               	.LFB144:
 349:ServerLLDN.c  **** 
 350:ServerLLDN.c  **** 	static void appPanDiscInit(void)
 351:ServerLLDN.c  **** 	{	
 2350               		.loc 6 351 0
 2351               		.cfi_startproc
 2352 0bfa CF93      		push r28
 2353               	.LCFI87:
 2354               		.cfi_def_cfa_offset 3
 2355               		.cfi_offset 28, -2
 2356 0bfc DF93      		push r29
 2357               	.LCFI88:
 2358               		.cfi_def_cfa_offset 4
 2359               		.cfi_offset 29, -3
 2360 0bfe 00D0      		rcall .
 2361               	.LCFI89:
 2362               		.cfi_def_cfa_offset 6
 2363 0c00 CDB7      		in r28,__SP_L__
 2364 0c02 DEB7      		in r29,__SP_H__
 2365               	.LCFI90:
 2366               		.cfi_def_cfa_register 28
 2367               	/* prologue: function */
 2368               	/* frame size = 2 */
 2369               	/* stack size = 4 */
 2370               	.L__stack_usage = 4
 2371               	.LBB11:
 352:ServerLLDN.c  **** 		/* clearray of previous discovery state */
 353:ServerLLDN.c  **** 		for(int i = 0; i < 32; i++)
 2372               		.loc 6 353 0
 2373 0c04 1A82      		std Y+2,__zero_reg__
 2374 0c06 1982      		std Y+1,__zero_reg__
 2375 0c08 00C0      		rjmp .L66
 2376               	.L67:
 354:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2377               		.loc 6 354 0 discriminator 3
 2378 0c0a 8981      		ldd r24,Y+1
 2379 0c0c 9A81      		ldd r25,Y+2
 2380 0c0e 8050      		subi r24,lo8(-(ACKFrame+1))
 2381 0c10 9040      		sbci r25,hi8(-(ACKFrame+1))
 2382 0c12 FC01      		movw r30,r24
 2383 0c14 1082      		st Z,__zero_reg__
 353:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2384               		.loc 6 353 0 discriminator 3
 2385 0c16 8981      		ldd r24,Y+1
 2386 0c18 9A81      		ldd r25,Y+2
 2387 0c1a 0196      		adiw r24,1
 2388 0c1c 9A83      		std Y+2,r25
 2389 0c1e 8983      		std Y+1,r24
 2390               	.L66:
 353:ServerLLDN.c  **** 			ACKFrame.ackFlags[i] = 0;
 2391               		.loc 6 353 0 is_stmt 0 discriminator 1
 2392 0c20 8981      		ldd r24,Y+1
 2393 0c22 9A81      		ldd r25,Y+2
 2394 0c24 8097      		sbiw r24,32
 2395 0c26 04F0      		brlt .L67
 2396               	.LBE11:
 355:ServerLLDN.c  **** 		ACKFrame_size = 0;
 2397               		.loc 6 355 0 is_stmt 1
 2398 0c28 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 2399 0c2c 1092 0000 		sts ACKFrame_size,__zero_reg__
 356:ServerLLDN.c  **** 		/* Prepare Beacon Message as first beacon in discovery state */		
 357:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 2400               		.loc 6 357 0
 2401 0c30 1092 0000 		sts msgReq+5+1,__zero_reg__
 2402 0c34 1092 0000 		sts msgReq+5,__zero_reg__
 358:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_BEACON_ENDPOINT;
 2403               		.loc 6 358 0
 2404 0c38 1092 0000 		sts msgReq+7,__zero_reg__
 359:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_BEACON_ENDPOINT;
 2405               		.loc 6 359 0
 2406 0c3c 1092 0000 		sts msgReq+8,__zero_reg__
 360:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE;
 2407               		.loc 6 360 0
 2408 0c40 80E4      		ldi r24,lo8(64)
 2409 0c42 91E0      		ldi r25,lo8(1)
 2410 0c44 9093 0000 		sts msgReq+9+1,r25
 2411 0c48 8093 0000 		sts msgReq+9,r24
 361:ServerLLDN.c  **** 		msgReq.data					= NULL;
 2412               		.loc 6 361 0
 2413 0c4c 1092 0000 		sts msgReq+13+1,__zero_reg__
 2414 0c50 1092 0000 		sts msgReq+13,__zero_reg__
 362:ServerLLDN.c  **** 		msgReq.size					= 0;
 2415               		.loc 6 362 0
 2416 0c54 1092 0000 		sts msgReq+15,__zero_reg__
 363:ServerLLDN.c  **** 		
 364:ServerLLDN.c  **** 		
 365:ServerLLDN.c  **** 		/* Only start timers if it is the first association process */
 366:ServerLLDN.c  **** 		if(cycles_counter == 0) 
 2417               		.loc 6 366 0
 2418 0c58 8091 0000 		lds r24,cycles_counter
 2419 0c5c 8823      		tst r24
 2420 0c5e 01F0      		breq .+2
 2421 0c60 00C0      		rjmp .L69
 367:ServerLLDN.c  **** 		{
 368:ServerLLDN.c  **** 			
 369:ServerLLDN.c  **** 		/* Calculates Beacon Intervals according to 802.15.4e - 2012 p. 70 */
 370:ServerLLDN.c  **** 		n = 127; 
 2422               		.loc 6 370 0
 2423 0c62 8FE7      		ldi r24,lo8(127)
 2424 0c64 8093 0000 		sts n,r24
 371:ServerLLDN.c  **** 		tTS =  ((p_var*sp + (m+n)*sm + macMinLIFSPeriod)/v_var);
 2425               		.loc 6 371 0
 2426 0c68 8091 0000 		lds r24,n
 2427 0c6c 882F      		mov r24,r24
 2428 0c6e 90E0      		ldi r25,0
 2429 0c70 0396      		adiw r24,3
 2430 0c72 880F      		lsl r24
 2431 0c74 991F      		rol r25
 2432 0c76 092E      		mov __tmp_reg__,r25
 2433 0c78 000C      		lsl r0
 2434 0c7a AA0B      		sbc r26,r26
 2435 0c7c BB0B      		sbc r27,r27
 2436 0c7e BC01      		movw r22,r24
 2437 0c80 CD01      		movw r24,r26
 2438 0c82 0E94 0000 		call __floatsisf
 2439 0c86 DC01      		movw r26,r24
 2440 0c88 CB01      		movw r24,r22
 2441 0c8a 20E0      		ldi r18,0
 2442 0c8c 30E0      		ldi r19,0
 2443 0c8e 40E4      		ldi r20,lo8(64)
 2444 0c90 51E4      		ldi r21,lo8(65)
 2445 0c92 BC01      		movw r22,r24
 2446 0c94 CD01      		movw r24,r26
 2447 0c96 0E94 0000 		call __addsf3
 2448 0c9a DC01      		movw r26,r24
 2449 0c9c CB01      		movw r24,r22
 2450 0c9e 20E0      		ldi r18,0
 2451 0ca0 30E0      		ldi r19,0
 2452 0ca2 40E2      		ldi r20,lo8(32)
 2453 0ca4 52E4      		ldi r21,lo8(66)
 2454 0ca6 BC01      		movw r22,r24
 2455 0ca8 CD01      		movw r24,r26
 2456 0caa 0E94 0000 		call __addsf3
 2457 0cae DC01      		movw r26,r24
 2458 0cb0 CB01      		movw r24,r22
 2459 0cb2 20E0      		ldi r18,0
 2460 0cb4 34E2      		ldi r19,lo8(36)
 2461 0cb6 44E7      		ldi r20,lo8(116)
 2462 0cb8 57E4      		ldi r21,lo8(71)
 2463 0cba BC01      		movw r22,r24
 2464 0cbc CD01      		movw r24,r26
 2465 0cbe 0E94 0000 		call __divsf3
 2466 0cc2 DC01      		movw r26,r24
 2467 0cc4 CB01      		movw r24,r22
 2468 0cc6 8093 0000 		sts tTS,r24
 2469 0cca 9093 0000 		sts tTS+1,r25
 2470 0cce A093 0000 		sts tTS+2,r26
 2471 0cd2 B093 0000 		sts tTS+3,r27
 372:ServerLLDN.c  **** 		#if (MASTER_MACSC == 1)
 373:ServerLLDN.c  **** 		
 374:ServerLLDN.c  **** 			beaconInterval_association = 2 * numBaseTimeSlotperMgmt_association * (tTS) / (SYMBOL_TIME);
 2472               		.loc 6 374 0
 2473 0cd6 8091 0000 		lds r24,tTS
 2474 0cda 9091 0000 		lds r25,tTS+1
 2475 0cde A091 0000 		lds r26,tTS+2
 2476 0ce2 B091 0000 		lds r27,tTS+3
 2477 0ce6 20E0      		ldi r18,0
 2478 0ce8 30E0      		ldi r19,0
 2479 0cea 40E8      		ldi r20,lo8(-128)
 2480 0cec 50E4      		ldi r21,lo8(64)
 2481 0cee BC01      		movw r22,r24
 2482 0cf0 CD01      		movw r24,r26
 2483 0cf2 0E94 0000 		call __mulsf3
 2484 0cf6 DC01      		movw r26,r24
 2485 0cf8 CB01      		movw r24,r22
 2486 0cfa 2DEB      		ldi r18,lo8(-67)
 2487 0cfc 37E3      		ldi r19,lo8(55)
 2488 0cfe 46E8      		ldi r20,lo8(-122)
 2489 0d00 57E3      		ldi r21,lo8(55)
 2490 0d02 BC01      		movw r22,r24
 2491 0d04 CD01      		movw r24,r26
 2492 0d06 0E94 0000 		call __divsf3
 2493 0d0a DC01      		movw r26,r24
 2494 0d0c CB01      		movw r24,r22
 2495 0d0e 8093 0000 		sts beaconInterval_association,r24
 2496 0d12 9093 0000 		sts beaconInterval_association+1,r25
 2497 0d16 A093 0000 		sts beaconInterval_association+2,r26
 2498 0d1a B093 0000 		sts beaconInterval_association+3,r27
 375:ServerLLDN.c  **** 			/*
 376:ServerLLDN.c  **** 			* Configure interrupts callback functions
 377:ServerLLDN.c  **** 			* overflow interrupt, compare 1,2,3 interrupts
 378:ServerLLDN.c  **** 			*/
 379:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(lldn_server_beacon);
 2499               		.loc 6 379 0
 2500 0d1e 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 2501 0d20 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 2502 0d22 0E94 0000 		call macsc_set_cmp1_int_cb
 380:ServerLLDN.c  **** 			/*
 381:ServerLLDN.c  **** 			* Configure MACSC to generate compare interrupts from channels 1,2,3
 382:ServerLLDN.c  **** 			* Set compare mode to absolute, set compare value.
 383:ServerLLDN.c  **** 			*/
 384:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2503               		.loc 6 384 0
 2504 0d26 0E94 0000 		call macsc_enable_manual_bts
 385:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2505               		.loc 6 385 0
 2506 0d2a 81E0      		ldi r24,lo8(1)
 2507 0d2c 0E94 0000 		call macsc_enable_cmp_int
 386:ServerLLDN.c  **** 
 387:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association , MACSC_CC1);
 2508               		.loc 6 387 0
 2509 0d30 8091 0000 		lds r24,beaconInterval_association
 2510 0d34 9091 0000 		lds r25,beaconInterval_association+1
 2511 0d38 A091 0000 		lds r26,beaconInterval_association+2
 2512 0d3c B091 0000 		lds r27,beaconInterval_association+3
 2513 0d40 BC01      		movw r22,r24
 2514 0d42 CD01      		movw r24,r26
 2515 0d44 0E94 0000 		call __fixunssfsi
 2516 0d48 DC01      		movw r26,r24
 2517 0d4a CB01      		movw r24,r22
 2518 0d4c 21E0      		ldi r18,lo8(1)
 2519 0d4e AC01      		movw r20,r24
 2520 0d50 BD01      		movw r22,r26
 2521 0d52 81E0      		ldi r24,lo8(1)
 2522 0d54 0E94 0000 		call macsc_use_cmp
 2523               	.L69:
 388:ServerLLDN.c  **** 			
 389:ServerLLDN.c  **** 			/* Timer used in testing */
 390:ServerLLDN.c  **** 			#if TIMESLOT_TIMER
 391:ServerLLDN.c  **** 			macsc_set_cmp2_int_cb(teste_handler);	
 392:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC2);
 393:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, beaconInterval_association / 2, MACSC_CC2);
 394:ServerLLDN.c  **** 			#endif
 395:ServerLLDN.c  **** 			
 396:ServerLLDN.c  **** 		#endif
 397:ServerLLDN.c  **** 		}
 398:ServerLLDN.c  **** 	}
 2524               		.loc 6 398 0
 2525 0d58 0000      		nop
 2526               	/* epilogue start */
 2527 0d5a 0F90      		pop __tmp_reg__
 2528 0d5c 0F90      		pop __tmp_reg__
 2529 0d5e DF91      		pop r29
 2530 0d60 CF91      		pop r28
 2531 0d62 0895      		ret
 2532               		.cfi_endproc
 2533               	.LFE144:
 2536               	appPanOnlineInit:
 2537               	.LFB145:
 399:ServerLLDN.c  **** 
 400:ServerLLDN.c  **** 	static void appPanOnlineInit()
 401:ServerLLDN.c  **** 	{
 2538               		.loc 6 401 0
 2539               		.cfi_startproc
 2540 0d64 EF92      		push r14
 2541               	.LCFI91:
 2542               		.cfi_def_cfa_offset 3
 2543               		.cfi_offset 14, -2
 2544 0d66 FF92      		push r15
 2545               	.LCFI92:
 2546               		.cfi_def_cfa_offset 4
 2547               		.cfi_offset 15, -3
 2548 0d68 0F93      		push r16
 2549               	.LCFI93:
 2550               		.cfi_def_cfa_offset 5
 2551               		.cfi_offset 16, -4
 2552 0d6a 1F93      		push r17
 2553               	.LCFI94:
 2554               		.cfi_def_cfa_offset 6
 2555               		.cfi_offset 17, -5
 2556 0d6c CF93      		push r28
 2557               	.LCFI95:
 2558               		.cfi_def_cfa_offset 7
 2559               		.cfi_offset 28, -6
 2560 0d6e DF93      		push r29
 2561               	.LCFI96:
 2562               		.cfi_def_cfa_offset 8
 2563               		.cfi_offset 29, -7
 2564 0d70 CDB7      		in r28,__SP_L__
 2565 0d72 DEB7      		in r29,__SP_H__
 2566               	.LCFI97:
 2567               		.cfi_def_cfa_register 28
 2568               	/* prologue: function */
 2569               	/* frame size = 0 */
 2570               	/* stack size = 6 */
 2571               	.L__stack_usage = 6
 402:ServerLLDN.c  **** 			timeslot_counter = 0;
 2572               		.loc 6 402 0
 2573 0d74 1092 0000 		sts timeslot_counter,__zero_reg__
 403:ServerLLDN.c  **** 			
 404:ServerLLDN.c  **** 			tTS =  ((p_var*sp + (m+ config_request_frame.conf.tsDuration )*sm + macMinLIFSPeriod)/v_var);
 2574               		.loc 6 404 0
 2575 0d78 8091 0000 		lds r24,config_request_frame+5
 2576 0d7c 8F77      		andi r24,lo8(127)
 2577 0d7e 882F      		mov r24,r24
 2578 0d80 90E0      		ldi r25,0
 2579 0d82 0396      		adiw r24,3
 2580 0d84 880F      		lsl r24
 2581 0d86 991F      		rol r25
 2582 0d88 092E      		mov __tmp_reg__,r25
 2583 0d8a 000C      		lsl r0
 2584 0d8c AA0B      		sbc r26,r26
 2585 0d8e BB0B      		sbc r27,r27
 2586 0d90 BC01      		movw r22,r24
 2587 0d92 CD01      		movw r24,r26
 2588 0d94 0E94 0000 		call __floatsisf
 2589 0d98 DC01      		movw r26,r24
 2590 0d9a CB01      		movw r24,r22
 2591 0d9c 20E0      		ldi r18,0
 2592 0d9e 30E0      		ldi r19,0
 2593 0da0 40E4      		ldi r20,lo8(64)
 2594 0da2 51E4      		ldi r21,lo8(65)
 2595 0da4 BC01      		movw r22,r24
 2596 0da6 CD01      		movw r24,r26
 2597 0da8 0E94 0000 		call __addsf3
 2598 0dac DC01      		movw r26,r24
 2599 0dae CB01      		movw r24,r22
 2600 0db0 20E0      		ldi r18,0
 2601 0db2 30E0      		ldi r19,0
 2602 0db4 40E2      		ldi r20,lo8(32)
 2603 0db6 52E4      		ldi r21,lo8(66)
 2604 0db8 BC01      		movw r22,r24
 2605 0dba CD01      		movw r24,r26
 2606 0dbc 0E94 0000 		call __addsf3
 2607 0dc0 DC01      		movw r26,r24
 2608 0dc2 CB01      		movw r24,r22
 2609 0dc4 20E0      		ldi r18,0
 2610 0dc6 34E2      		ldi r19,lo8(36)
 2611 0dc8 44E7      		ldi r20,lo8(116)
 2612 0dca 57E4      		ldi r21,lo8(71)
 2613 0dcc BC01      		movw r22,r24
 2614 0dce CD01      		movw r24,r26
 2615 0dd0 0E94 0000 		call __divsf3
 2616 0dd4 DC01      		movw r26,r24
 2617 0dd6 CB01      		movw r24,r22
 2618 0dd8 8093 0000 		sts tTS,r24
 2619 0ddc 9093 0000 		sts tTS+1,r25
 2620 0de0 A093 0000 		sts tTS+2,r26
 2621 0de4 B093 0000 		sts tTS+3,r27
 405:ServerLLDN.c  **** 			
 406:ServerLLDN.c  **** 			n = config_request_frame.conf.tsDuration;
 2622               		.loc 6 406 0
 2623 0de8 8091 0000 		lds r24,config_request_frame+5
 2624 0dec 8F77      		andi r24,lo8(127)
 2625 0dee 8093 0000 		sts n,r24
 407:ServerLLDN.c  **** 			
 408:ServerLLDN.c  **** 			msgReq.dstAddr		= 0;
 2626               		.loc 6 408 0
 2627 0df2 1092 0000 		sts msgReq+5+1,__zero_reg__
 2628 0df6 1092 0000 		sts msgReq+5,__zero_reg__
 409:ServerLLDN.c  **** 			msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 2629               		.loc 6 409 0
 2630 0dfa 1092 0000 		sts msgReq+7,__zero_reg__
 410:ServerLLDN.c  **** 			msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 2631               		.loc 6 410 0
 2632 0dfe 1092 0000 		sts msgReq+8,__zero_reg__
 411:ServerLLDN.c  **** 			msgReq.options		= NWK_OPT_LLDN_BEACON | NWK_OPT_ONLINE_STATE;
 2633               		.loc 6 411 0
 2634 0e02 80EC      		ldi r24,lo8(-64)
 2635 0e04 90E0      		ldi r25,0
 2636 0e06 9093 0000 		sts msgReq+9+1,r25
 2637 0e0a 8093 0000 		sts msgReq+9,r24
 412:ServerLLDN.c  **** 			
 413:ServerLLDN.c  **** 			if(macLLDNRetransmitTS > 0)
 2638               		.loc 6 413 0
 2639 0e0e 8091 0000 		lds r24,macLLDNRetransmitTS
 2640 0e12 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2641 0e16 1816      		cp __zero_reg__,r24
 2642 0e18 1906      		cpc __zero_reg__,r25
 2643 0e1a 04F4      		brge .L71
 414:ServerLLDN.c  **** 			{
 415:ServerLLDN.c  **** 				// precisa repensar isto
 416:ServerLLDN.c  **** 				msgReq.data		= &ACKFrame.ackFlags[macLLDNRetransmitTS + 1];
 2644               		.loc 6 416 0
 2645 0e1c 8091 0000 		lds r24,macLLDNRetransmitTS
 2646 0e20 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2647 0e24 0196      		adiw r24,1
 2648 0e26 0196      		adiw r24,1
 2649 0e28 8050      		subi r24,lo8(-(ACKFrame))
 2650 0e2a 9040      		sbci r25,hi8(-(ACKFrame))
 2651 0e2c 9093 0000 		sts msgReq+13+1,r25
 2652 0e30 8093 0000 		sts msgReq+13,r24
 417:ServerLLDN.c  **** 				msgReq.size		= macLLDNRetransmitTS;
 2653               		.loc 6 417 0
 2654 0e34 8091 0000 		lds r24,macLLDNRetransmitTS
 2655 0e38 9091 0000 		lds r25,macLLDNRetransmitTS+1
 2656 0e3c 8093 0000 		sts msgReq+15,r24
 2657 0e40 00C0      		rjmp .L72
 2658               	.L71:
 418:ServerLLDN.c  **** 			}
 419:ServerLLDN.c  **** 			else
 420:ServerLLDN.c  **** 			{
 421:ServerLLDN.c  **** 				msgReq.data					= NULL;
 2659               		.loc 6 421 0
 2660 0e42 1092 0000 		sts msgReq+13+1,__zero_reg__
 2661 0e46 1092 0000 		sts msgReq+13,__zero_reg__
 422:ServerLLDN.c  **** 				msgReq.size					= 0;	
 2662               		.loc 6 422 0
 2663 0e4a 1092 0000 		sts msgReq+15,__zero_reg__
 2664               	.L72:
 423:ServerLLDN.c  **** 			}
 424:ServerLLDN.c  **** 			
 425:ServerLLDN.c  **** 			// (number of time slots x mgmt time solts) x base timelosts
 426:ServerLLDN.c  **** 			beaconInterval = (assTimeSlot * 2 + 1 + 2*MacLLDNMgmtTS) * tTS / (SYMBOL_TIME);
 2665               		.loc 6 426 0
 2666 0e4e 8091 0000 		lds r24,assTimeSlot
 2667 0e52 9091 0000 		lds r25,assTimeSlot+1
 2668 0e56 880F      		lsl r24
 2669 0e58 991F      		rol r25
 2670 0e5a 0396      		adiw r24,3
 2671 0e5c 092E      		mov __tmp_reg__,r25
 2672 0e5e 000C      		lsl r0
 2673 0e60 AA0B      		sbc r26,r26
 2674 0e62 BB0B      		sbc r27,r27
 2675 0e64 BC01      		movw r22,r24
 2676 0e66 CD01      		movw r24,r26
 2677 0e68 0E94 0000 		call __floatsisf
 2678 0e6c 7B01      		movw r14,r22
 2679 0e6e 8C01      		movw r16,r24
 2680 0e70 8091 0000 		lds r24,tTS
 2681 0e74 9091 0000 		lds r25,tTS+1
 2682 0e78 A091 0000 		lds r26,tTS+2
 2683 0e7c B091 0000 		lds r27,tTS+3
 2684 0e80 9C01      		movw r18,r24
 2685 0e82 AD01      		movw r20,r26
 2686 0e84 C801      		movw r24,r16
 2687 0e86 B701      		movw r22,r14
 2688 0e88 0E94 0000 		call __mulsf3
 2689 0e8c DC01      		movw r26,r24
 2690 0e8e CB01      		movw r24,r22
 2691 0e90 2DEB      		ldi r18,lo8(-67)
 2692 0e92 37E3      		ldi r19,lo8(55)
 2693 0e94 46E8      		ldi r20,lo8(-122)
 2694 0e96 57E3      		ldi r21,lo8(55)
 2695 0e98 BC01      		movw r22,r24
 2696 0e9a CD01      		movw r24,r26
 2697 0e9c 0E94 0000 		call __divsf3
 2698 0ea0 DC01      		movw r26,r24
 2699 0ea2 CB01      		movw r24,r22
 2700 0ea4 8093 0000 		sts beaconInterval,r24
 2701 0ea8 9093 0000 		sts beaconInterval+1,r25
 2702 0eac A093 0000 		sts beaconInterval+2,r26
 2703 0eb0 B093 0000 		sts beaconInterval+3,r27
 427:ServerLLDN.c  **** 			
 428:ServerLLDN.c  **** 			// Configure Timers
 429:ServerLLDN.c  **** 			macsc_set_cmp1_int_cb(time_slot_handler);
 2704               		.loc 6 429 0
 2705 0eb4 80E0      		ldi r24,lo8(gs(time_slot_handler))
 2706 0eb6 90E0      		ldi r25,hi8(gs(time_slot_handler))
 2707 0eb8 0E94 0000 		call macsc_set_cmp1_int_cb
 430:ServerLLDN.c  **** 			
 431:ServerLLDN.c  **** 			macsc_enable_manual_bts();
 2708               		.loc 6 431 0
 2709 0ebc 0E94 0000 		call macsc_enable_manual_bts
 432:ServerLLDN.c  **** 			
 433:ServerLLDN.c  **** 			macsc_enable_cmp_int(MACSC_CC1);
 2710               		.loc 6 433 0
 2711 0ec0 81E0      		ldi r24,lo8(1)
 2712 0ec2 0E94 0000 		call macsc_enable_cmp_int
 434:ServerLLDN.c  **** 			macsc_use_cmp(MACSC_RELATIVE_CMP, numBaseTimeSlotperMgmt_online * tTS / (SYMBOL_TIME), MACSC_CC1
 2713               		.loc 6 434 0
 2714 0ec6 8091 0000 		lds r24,tTS
 2715 0eca 9091 0000 		lds r25,tTS+1
 2716 0ece A091 0000 		lds r26,tTS+2
 2717 0ed2 B091 0000 		lds r27,tTS+3
 2718 0ed6 9C01      		movw r18,r24
 2719 0ed8 AD01      		movw r20,r26
 2720 0eda BC01      		movw r22,r24
 2721 0edc CD01      		movw r24,r26
 2722 0ede 0E94 0000 		call __addsf3
 2723 0ee2 DC01      		movw r26,r24
 2724 0ee4 CB01      		movw r24,r22
 2725 0ee6 2DEB      		ldi r18,lo8(-67)
 2726 0ee8 37E3      		ldi r19,lo8(55)
 2727 0eea 46E8      		ldi r20,lo8(-122)
 2728 0eec 57E3      		ldi r21,lo8(55)
 2729 0eee BC01      		movw r22,r24
 2730 0ef0 CD01      		movw r24,r26
 2731 0ef2 0E94 0000 		call __divsf3
 2732 0ef6 DC01      		movw r26,r24
 2733 0ef8 CB01      		movw r24,r22
 2734 0efa BC01      		movw r22,r24
 2735 0efc CD01      		movw r24,r26
 2736 0efe 0E94 0000 		call __fixunssfsi
 2737 0f02 DC01      		movw r26,r24
 2738 0f04 CB01      		movw r24,r22
 2739 0f06 21E0      		ldi r18,lo8(1)
 2740 0f08 AC01      		movw r20,r24
 2741 0f0a BD01      		movw r22,r26
 2742 0f0c 81E0      		ldi r24,lo8(1)
 2743 0f0e 0E94 0000 		call macsc_use_cmp
 435:ServerLLDN.c  **** 			
 436:ServerLLDN.c  **** 			NWK_OpenEndpoint(APP_DATA_ENDPOINT, appDataInd);
 2744               		.loc 6 436 0
 2745 0f12 60E0      		ldi r22,lo8(gs(appDataInd))
 2746 0f14 70E0      		ldi r23,hi8(gs(appDataInd))
 2747 0f16 81E0      		ldi r24,lo8(1)
 2748 0f18 0E94 0000 		call NWK_OpenEndpoint
 437:ServerLLDN.c  **** 	}
 2749               		.loc 6 437 0
 2750 0f1c 0000      		nop
 2751               	/* epilogue start */
 2752 0f1e DF91      		pop r29
 2753 0f20 CF91      		pop r28
 2754 0f22 1F91      		pop r17
 2755 0f24 0F91      		pop r16
 2756 0f26 FF90      		pop r15
 2757 0f28 EF90      		pop r14
 2758 0f2a 0895      		ret
 2759               		.cfi_endproc
 2760               	.LFE145:
 2763               	appInit:
 2764               	.LFB146:
 438:ServerLLDN.c  **** 
 439:ServerLLDN.c  **** #else 
 440:ServerLLDN.c  **** 	uint8_t payloadSize = 22;
 441:ServerLLDN.c  **** 	uint8_t assTimeSlot = 0xFF;
 442:ServerLLDN.c  **** 	uint8_t n = 0;
 443:ServerLLDN.c  **** 	
 444:ServerLLDN.c  **** 	NwkFrameBeaconHeaderLLDN_t *rec_beacon;
 445:ServerLLDN.c  **** 	NWK_ACKFormat_t *ackframe;
 446:ServerLLDN.c  **** 	static NWK_DiscoverResponse_t msgDiscResponse = { .id = LL_DISCOVER_RESPONSE,
 447:ServerLLDN.c  **** 													 .macAddr = APP_ADDR,
 448:ServerLLDN.c  **** 													 .ts_dir.tsDuration = 22,
 449:ServerLLDN.c  **** 													 .ts_dir.dirIndicator = 0b1 };
 450:ServerLLDN.c  **** 	static NWK_ConfigStatus_t msgConfigStatus = { .id = LL_CONFIGURATION_STATUS,
 451:ServerLLDN.c  **** 												 .macAddr = APP_ADDR,
 452:ServerLLDN.c  **** 												 .s_macAddr = APP_ADDR,
 453:ServerLLDN.c  **** 												 .ts_dir.tsDuration = 22,
 454:ServerLLDN.c  **** 												 .ts_dir.dirIndicator = 1,
 455:ServerLLDN.c  **** 												 .assTimeSlot = 0xff };
 456:ServerLLDN.c  **** 	uint8_t data_payload = APP_ADDR;
 457:ServerLLDN.c  **** 	static bool ack_received;
 458:ServerLLDN.c  **** 	bool MacLLDNMgmtTS = 0; 
 459:ServerLLDN.c  **** 	bool associated = 0;
 460:ServerLLDN.c  **** 	int ts_time;
 461:ServerLLDN.c  **** 	uint8_t STATE = 10;
 462:ServerLLDN.c  **** 	
 463:ServerLLDN.c  **** 	static void send_message_timeHandler(void)
 464:ServerLLDN.c  **** 	{
 465:ServerLLDN.c  **** 		appState = APP_STATE_SEND;	
 466:ServerLLDN.c  **** 		#if MASTER_MACSC == 0
 467:ServerLLDN.c  **** 			timer_stop();
 468:ServerLLDN.c  **** 		#else 
 469:ServerLLDN.c  **** 		macsc_disable_cmp_int(MACSC_CC1);
 470:ServerLLDN.c  **** 		#endif
 471:ServerLLDN.c  **** 	
 472:ServerLLDN.c  **** 	}
 473:ServerLLDN.c  **** 
 474:ServerLLDN.c  **** 	static void start_timer(int delay)
 475:ServerLLDN.c  **** 	{
 476:ServerLLDN.c  **** 		#if MASTER_MACSC
 477:ServerLLDN.c  **** 		macsc_enable_manual_bts();
 478:ServerLLDN.c  **** 		macsc_set_cmp1_int_cb(send_message_timeHandler);
 479:ServerLLDN.c  **** 		macsc_enable_cmp_int(MACSC_CC1);
 480:ServerLLDN.c  **** 		macsc_use_cmp(MACSC_RELATIVE_CMP, delay - 125, MACSC_CC1);
 481:ServerLLDN.c  **** 		#else
 482:ServerLLDN.c  **** 		timer_init();
 483:ServerLLDN.c  **** 		timer_delay(delay/2);
 484:ServerLLDN.c  **** 		hw_timer_setup_handler(send_message_timeHandler);
 485:ServerLLDN.c  **** 		timer_start();
 486:ServerLLDN.c  **** 		#endif
 487:ServerLLDN.c  **** 	}
 488:ServerLLDN.c  **** 	
 489:ServerLLDN.c  **** 	static bool appBeaconInd(NWK_DataInd_t *ind)
 490:ServerLLDN.c  **** 	{
 491:ServerLLDN.c  **** 		rec_beacon = (NwkFrameBeaconHeaderLLDN_t*)ind->data;
 492:ServerLLDN.c  **** 		STATE = rec_beacon->Flags.txState;
 493:ServerLLDN.c  **** 		PanId = rec_beacon->PanId;
 494:ServerLLDN.c  **** 		//  bom implementar rotinas pra se o nodo estiver associado a um coordeandor e se no estiver
 495:ServerLLDN.c  **** 		if( ((rec_beacon->Flags.txState == DISC_MODE && !ack_received && rec_beacon->confSeqNumber == 0x0
 496:ServerLLDN.c  **** 			(rec_beacon->Flags.txState == CONFIG_MODE && ack_received)) && associated == 0)
 497:ServerLLDN.c  **** 		{
 498:ServerLLDN.c  **** 	
 499:ServerLLDN.c  **** 			ts_time =  ((p_var*sp + (m+ rec_beacon->TimeSlotSize  )*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL
 500:ServerLLDN.c  **** 			int msg_wait_time = rec_beacon->Flags.numBaseMgmtTimeslots * rec_beacon->TimeSlotSize * 2; // sy
 501:ServerLLDN.c  **** 			
 502:ServerLLDN.c  **** 			start_timer(msg_wait_time);
 503:ServerLLDN.c  **** 			
 504:ServerLLDN.c  **** 			appState = (rec_beacon->Flags.txState == DISC_MODE) ? APP_STATE_PREP_DISC_REPONSE : APP_STATE_PR
 505:ServerLLDN.c  **** 		}
 506:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == ONLINE_MODE && assTimeSlot != 0xFF && associated == 1)
 507:ServerLLDN.c  **** 		{
 508:ServerLLDN.c  **** 			ts_time = ((p_var*sp + (m+ n)*sm + macMinLIFSPeriod)/v_var)  / (SYMBOL_TIME);
 509:ServerLLDN.c  **** 			int msg_wait_time = (2*rec_beacon->Flags.numBaseMgmtTimeslots + assTimeSlot) * ts_time;
 510:ServerLLDN.c  **** 			start_timer(msg_wait_time+30);
 511:ServerLLDN.c  **** 			ack_received = false;
 512:ServerLLDN.c  **** 			appState = APP_STATE_PREP_DATA_FRAME;
 513:ServerLLDN.c  **** 		}
 514:ServerLLDN.c  **** 		else if (rec_beacon->Flags.txState == RESET_MODE)
 515:ServerLLDN.c  **** 		{
 516:ServerLLDN.c  **** 			printf("\n Reset beacon");
 517:ServerLLDN.c  **** 			ack_received = 0;
 518:ServerLLDN.c  **** 			associated = 0;
 519:ServerLLDN.c  **** 		}
 520:ServerLLDN.c  **** 		return true;
 521:ServerLLDN.c  **** 	}
 522:ServerLLDN.c  **** 	
 523:ServerLLDN.c  **** 	bool check_ack(int addr)
 524:ServerLLDN.c  **** 	{
 525:ServerLLDN.c  **** 		int pos =  addr / 8;
 526:ServerLLDN.c  **** 		int bit_shift = 8 - addr % 8;
 527:ServerLLDN.c  **** 		printf("\n %hhx ", ackframe->ackFlags[pos]);
 528:ServerLLDN.c  **** 		if( ackframe->ackFlags[pos] & 1 << bit_shift)
 529:ServerLLDN.c  **** 		{
 530:ServerLLDN.c  **** 			printf("ACK TRUE");
 531:ServerLLDN.c  **** 			return true;
 532:ServerLLDN.c  **** 		}
 533:ServerLLDN.c  **** 		else
 534:ServerLLDN.c  **** 			return false;
 535:ServerLLDN.c  **** 	}
 536:ServerLLDN.c  **** 	
 537:ServerLLDN.c  **** 	static bool appAckInd(NWK_DataInd_t *ind)
 538:ServerLLDN.c  **** 	{
 539:ServerLLDN.c  **** 		#if !MASTER_MACSC
 540:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 541:ServerLLDN.c  **** 		#endif
 542:ServerLLDN.c  **** 		ackframe = (NWK_ACKFormat_t*)ind->data;
 543:ServerLLDN.c  **** 
 544:ServerLLDN.c  **** 		if(PanId == ackframe->sourceId)
 545:ServerLLDN.c  **** 		{
 546:ServerLLDN.c  **** 			if(STATE == ONLINE_MODE)
 547:ServerLLDN.c  **** 			{
 548:ServerLLDN.c  **** 				ack_received = check_ack(assTimeSlot + 1);
 549:ServerLLDN.c  **** 				appState = APP_STATE_RETRANSMIT_DATA;
 550:ServerLLDN.c  **** 			}
 551:ServerLLDN.c  **** 			else
 552:ServerLLDN.c  **** 				ack_received = check_ack(APP_ADDR);								
 553:ServerLLDN.c  **** 		}
 554:ServerLLDN.c  **** 		return true;
 555:ServerLLDN.c  **** 	}
 556:ServerLLDN.c  **** 	
 557:ServerLLDN.c  **** 	static bool appCommandInd(NWK_DataInd_t *ind)
 558:ServerLLDN.c  **** 	{
 559:ServerLLDN.c  **** 		#if !MASTER_MACSC
 560:ServerLLDN.c  **** 		ind->data = ind->data - (uint8_t) 1;
 561:ServerLLDN.c  **** 		#endif
 562:ServerLLDN.c  **** 		
 563:ServerLLDN.c  **** 		if(ind->data[0] == LL_CONFIGURATION_REQUEST)
 564:ServerLLDN.c  **** 		{
 565:ServerLLDN.c  **** 			NWK_ConfigRequest_t *msg = (NWK_ConfigRequest_t*)ind->data;
 566:ServerLLDN.c  **** 			if(msg->macAddr == APP_ADDR)
 567:ServerLLDN.c  **** 			{
 568:ServerLLDN.c  **** 				PHY_SetChannel(msg->tx_channel);
 569:ServerLLDN.c  **** 				NWK_SetPanId(msg->s_macAddr);
 570:ServerLLDN.c  **** 				PanId = msg->s_macAddr;
 571:ServerLLDN.c  **** 				assTimeSlot = msg->assTimeSlot;
 572:ServerLLDN.c  **** 				n = msg->conf.tsDuration;
 573:ServerLLDN.c  **** 				associated = 1;
 574:ServerLLDN.c  **** 				printf("\nAssociado!");
 575:ServerLLDN.c  **** 			}
 576:ServerLLDN.c  **** 		}
 577:ServerLLDN.c  **** 		return true;
 578:ServerLLDN.c  **** 	}
 579:ServerLLDN.c  **** 
 580:ServerLLDN.c  **** 	void appPrepareDiscoverResponse()
 581:ServerLLDN.c  **** 	{
 582:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 583:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 584:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 585:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 586:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgDiscResponse;
 587:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgDiscResponse);
 588:ServerLLDN.c  **** 	}
 589:ServerLLDN.c  **** 	
 590:ServerLLDN.c  **** 	void appPrepareConfigurationStatus()
 591:ServerLLDN.c  **** 	{		
 592:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 593:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 594:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 595:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_MAC_COMMAND;
 596:ServerLLDN.c  **** 		msgReq.data					= (uint8_t*)&msgConfigStatus;
 597:ServerLLDN.c  **** 		msgReq.size					= sizeof(msgConfigStatus);
 598:ServerLLDN.c  **** 	}
 599:ServerLLDN.c  **** 	
 600:ServerLLDN.c  **** 	void appPrepareDataFrame(void)
 601:ServerLLDN.c  **** 	{
 602:ServerLLDN.c  **** 		
 603:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 604:ServerLLDN.c  **** 
 605:ServerLLDN.c  **** 	
 606:ServerLLDN.c  **** 		msgReq.dstAddr				= 0;
 607:ServerLLDN.c  **** 		msgReq.dstEndpoint			= APP_COMMAND_ENDPOINT;
 608:ServerLLDN.c  **** 		msgReq.srcEndpoint			= APP_COMMAND_ENDPOINT;
 609:ServerLLDN.c  **** 		msgReq.options				= NWK_OPT_LLDN_DATA;
 610:ServerLLDN.c  **** 		msgReq.data					= (uint8_t *)&data_payload;
 611:ServerLLDN.c  **** 		msgReq.size					= sizeof(data_payload);
 612:ServerLLDN.c  **** 	}
 613:ServerLLDN.c  **** 	
 614:ServerLLDN.c  **** 	
 615:ServerLLDN.c  **** #endif // APP_COORDINATOR
 616:ServerLLDN.c  **** 
 617:ServerLLDN.c  **** static void appInit(void)
 618:ServerLLDN.c  **** {
 2765               		.loc 6 618 0
 2766               		.cfi_startproc
 2767 0f2c CF93      		push r28
 2768               	.LCFI98:
 2769               		.cfi_def_cfa_offset 3
 2770               		.cfi_offset 28, -2
 2771 0f2e DF93      		push r29
 2772               	.LCFI99:
 2773               		.cfi_def_cfa_offset 4
 2774               		.cfi_offset 29, -3
 2775 0f30 CDB7      		in r28,__SP_L__
 2776 0f32 DEB7      		in r29,__SP_H__
 2777               	.LCFI100:
 2778               		.cfi_def_cfa_register 28
 2779               	/* prologue: function */
 2780               	/* frame size = 0 */
 2781               	/* stack size = 2 */
 2782               	.L__stack_usage = 2
 619:ServerLLDN.c  **** 	NWK_SetAddr(APP_ADDR);
 2783               		.loc 6 619 0
 2784 0f34 80E0      		ldi r24,0
 2785 0f36 90E0      		ldi r25,0
 2786 0f38 0E94 0000 		call NWK_SetAddr
 620:ServerLLDN.c  **** 	PHY_SetChannel(APP_CHANNEL);
 2787               		.loc 6 620 0
 2788 0f3c 8FE0      		ldi r24,lo8(15)
 2789 0f3e 0E94 0000 		call PHY_SetChannel
 621:ServerLLDN.c  **** 	PHY_SetRxState(true);
 2790               		.loc 6 621 0
 2791 0f42 81E0      		ldi r24,lo8(1)
 2792 0f44 0E94 0000 		call PHY_SetRxState
 622:ServerLLDN.c  **** 		
 623:ServerLLDN.c  **** 	#if APP_COORDINATOR	 
 624:ServerLLDN.c  **** 		/* Timer used for delay between messages */
 625:ServerLLDN.c  **** 		tmrDelay.interval = 1;
 2793               		.loc 6 625 0
 2794 0f48 81E0      		ldi r24,lo8(1)
 2795 0f4a 90E0      		ldi r25,0
 2796 0f4c A0E0      		ldi r26,0
 2797 0f4e B0E0      		ldi r27,0
 2798 0f50 8093 0000 		sts tmrDelay+6,r24
 2799 0f54 9093 0000 		sts tmrDelay+6+1,r25
 2800 0f58 A093 0000 		sts tmrDelay+6+2,r26
 2801 0f5c B093 0000 		sts tmrDelay+6+3,r27
 626:ServerLLDN.c  **** 		tmrDelay.mode = SYS_TIMER_INTERVAL_MODE;
 2802               		.loc 6 626 0
 2803 0f60 1092 0000 		sts tmrDelay+10,__zero_reg__
 627:ServerLLDN.c  **** 		tmrDelay.handler = tmrDelayHandler;
 2804               		.loc 6 627 0
 2805 0f64 80E0      		ldi r24,lo8(gs(tmrDelayHandler))
 2806 0f66 90E0      		ldi r25,hi8(gs(tmrDelayHandler))
 2807 0f68 9093 0000 		sts tmrDelay+11+1,r25
 2808 0f6c 8093 0000 		sts tmrDelay+11,r24
 628:ServerLLDN.c  **** 	  
 629:ServerLLDN.c  **** 		/* 
 630:ServerLLDN.c  **** 		* Disable CSMA/CA
 631:ServerLLDN.c  **** 		* Disable auto ACK
 632:ServerLLDN.c  **** 		*/
 633:ServerLLDN.c  **** 		NWK_SetPanId(APP_PANID);
 2809               		.loc 6 633 0
 2810 0f70 8EEF      		ldi r24,lo8(-2)
 2811 0f72 9AEC      		ldi r25,lo8(-54)
 2812 0f74 0E94 0000 		call NWK_SetPanId
 634:ServerLLDN.c  **** 		PanId = APP_PANID;
 2813               		.loc 6 634 0
 2814 0f78 8EEF      		ldi r24,lo8(-2)
 2815 0f7a 8093 0000 		sts PanId,r24
 635:ServerLLDN.c  **** 		ACKFrame.sourceId = APP_PANID;
 2816               		.loc 6 635 0
 2817 0f7e 8EEF      		ldi r24,lo8(-2)
 2818 0f80 8093 0000 		sts ACKFrame,r24
 636:ServerLLDN.c  **** 		PHY_SetTdmaMode(true);
 2819               		.loc 6 636 0
 2820 0f84 81E0      		ldi r24,lo8(1)
 2821 0f86 0E94 0000 		call PHY_SetTdmaMode
 637:ServerLLDN.c  **** 	NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 2822               		.loc 6 637 0
 2823 0f8a 60E0      		ldi r22,lo8(gs(appCommandInd))
 2824 0f8c 70E0      		ldi r23,hi8(gs(appCommandInd))
 2825 0f8e 83E0      		ldi r24,lo8(3)
 2826 0f90 0E94 0000 		call NWK_OpenEndpoint
 638:ServerLLDN.c  **** 	#else
 639:ServerLLDN.c  **** 		/*
 640:ServerLLDN.c  **** 		 * Enable CSMA/CA
 641:ServerLLDN.c  **** 		 * Enable Random CSMA seed generator
 642:ServerLLDN.c  **** 		 */
 643:ServerLLDN.c  **** 		PHY_SetTdmaMode(false);
 644:ServerLLDN.c  **** 		// PHY_SetOptimizedCSMAValues();
 645:ServerLLDN.c  **** 		
 646:ServerLLDN.c  **** 		payloadSize = 127;
 647:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_BEACON_ENDPOINT, appBeaconInd);
 648:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_ACK_ENDPOINT, appAckInd);
 649:ServerLLDN.c  **** 		NWK_OpenEndpoint(APP_COMMAND_ENDPOINT, appCommandInd);
 650:ServerLLDN.c  **** 		/*
 651:ServerLLDN.c  **** 		* Configure interrupts callback functions
 652:ServerLLDN.c  **** 		*/
 653:ServerLLDN.c  **** 		
 654:ServerLLDN.c  **** 	#endif // APP_COORDENATOR
 655:ServerLLDN.c  **** 	PHY_SetPromiscuousMode(true);
 2827               		.loc 6 655 0
 2828 0f94 81E0      		ldi r24,lo8(1)
 2829 0f96 0E94 0000 		call PHY_SetPromiscuousMode
 656:ServerLLDN.c  **** 
 657:ServerLLDN.c  **** }
 2830               		.loc 6 657 0
 2831 0f9a 0000      		nop
 2832               	/* epilogue start */
 2833 0f9c DF91      		pop r29
 2834 0f9e CF91      		pop r28
 2835 0fa0 0895      		ret
 2836               		.cfi_endproc
 2837               	.LFE146:
 2839               		.section	.rodata
 2840               	.LC8:
 2841 0058 0A25 642C 		.string	"\n%d, %d"
 2841      2025 6400 
 2842               	.global	__subsf3
 2843               	.LC9:
 2844 0060 0A0A 204D 		.string	"\n\n M\351tricas:"
 2844      E974 7269 
 2844      6361 733A 
 2844      00
 2845               	.LC10:
 2846 006d 0A41 6464 		.string	"\nAddrs %hhx"
 2846      7273 2025 
 2846      6868 7800 
 2847               	.LC11:
 2848 0079 0A4D 656E 		.string	"\nMensagens Recebidas  %d"
 2848      7361 6765 
 2848      6E73 2052 
 2848      6563 6562 
 2848      6964 6173 
 2849               	.LC12:
 2850 0092 0A52 7373 		.string	"\nRssi M\351dio %f\n"
 2850      6920 4DE9 
 2850      6469 6F20 
 2850      2566 0A00 
 2851               	.LC13:
 2852 00a2 5461 7861 		.string	"Taxa de Sucesso : %.2f"
 2852      2064 6520 
 2852      5375 6365 
 2852      7373 6F20 
 2852      3A20 252E 
 2853               	.LC14:
 2854 00b9 0A46 696D 		.string	"\nFim de um Per\355odo"
 2854      2064 6520 
 2854      756D 2050 
 2854      6572 ED6F 
 2854      646F 00
 2855               	.LC15:
 2856 00cc 0A2D 2D2D 		.string	"\n------- slot %d --------"
 2856      2D2D 2D2D 
 2856      2073 6C6F 
 2856      7420 2564 
 2856      202D 2D2D 
 2857               	.LC16:
 2858 00e6 0A61 636B 		.string	"\nack_frame %hhx"
 2858      5F66 7261 
 2858      6D65 2025 
 2858      6868 7800 
 2859               		.text
 2861               	APP_TaskHandler:
 2862               	.LFB147:
 658:ServerLLDN.c  **** 
 659:ServerLLDN.c  **** static void APP_TaskHandler(void)
 660:ServerLLDN.c  **** {
 2863               		.loc 6 660 0
 2864               		.cfi_startproc
 2865 0fa2 CF92      		push r12
 2866               	.LCFI101:
 2867               		.cfi_def_cfa_offset 3
 2868               		.cfi_offset 12, -2
 2869 0fa4 DF92      		push r13
 2870               	.LCFI102:
 2871               		.cfi_def_cfa_offset 4
 2872               		.cfi_offset 13, -3
 2873 0fa6 EF92      		push r14
 2874               	.LCFI103:
 2875               		.cfi_def_cfa_offset 5
 2876               		.cfi_offset 14, -4
 2877 0fa8 FF92      		push r15
 2878               	.LCFI104:
 2879               		.cfi_def_cfa_offset 6
 2880               		.cfi_offset 15, -5
 2881 0faa CF93      		push r28
 2882               	.LCFI105:
 2883               		.cfi_def_cfa_offset 7
 2884               		.cfi_offset 28, -6
 2885 0fac DF93      		push r29
 2886               	.LCFI106:
 2887               		.cfi_def_cfa_offset 8
 2888               		.cfi_offset 29, -7
 2889 0fae CDB7      		in r28,__SP_L__
 2890 0fb0 DEB7      		in r29,__SP_H__
 2891               	.LCFI107:
 2892               		.cfi_def_cfa_register 28
 2893 0fb2 2897      		sbiw r28,8
 2894               	.LCFI108:
 2895               		.cfi_def_cfa_offset 16
 2896 0fb4 0FB6      		in __tmp_reg__,__SREG__
 2897 0fb6 F894      		cli
 2898 0fb8 DEBF      		out __SP_H__,r29
 2899 0fba 0FBE      		out __SREG__,__tmp_reg__
 2900 0fbc CDBF      		out __SP_L__,r28
 2901               	/* prologue: function */
 2902               	/* frame size = 8 */
 2903               	/* stack size = 14 */
 2904               	.L__stack_usage = 14
 661:ServerLLDN.c  **** 	switch (appState){
 2905               		.loc 6 661 0
 2906 0fbe 8091 0000 		lds r24,appState
 2907 0fc2 882F      		mov r24,r24
 2908 0fc4 90E0      		ldi r25,0
 2909 0fc6 8230      		cpi r24,2
 2910 0fc8 9105      		cpc r25,__zero_reg__
 2911 0fca 01F0      		breq .L76
 2912 0fcc 8330      		cpi r24,3
 2913 0fce 9105      		cpc r25,__zero_reg__
 2914 0fd0 01F0      		breq .L77
 2915 0fd2 892B      		or r24,r25
 2916 0fd4 01F0      		breq .L78
 662:ServerLLDN.c  **** 		case APP_STATE_INITIAL:
 663:ServerLLDN.c  **** 		{
 664:ServerLLDN.c  **** 			appInit();
 665:ServerLLDN.c  **** 			#if APP_COORDINATOR
 666:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 667:ServerLLDN.c  **** 			#else
 668:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 669:ServerLLDN.c  **** 			#endif
 670:ServerLLDN.c  **** 			break;
 671:ServerLLDN.c  **** 		}
 672:ServerLLDN.c  **** 		case APP_STATE_SEND:
 673:ServerLLDN.c  **** 		{
 674:ServerLLDN.c  **** 			appSendData();
 675:ServerLLDN.c  **** 			#if APP_COORDINATOR
 676:ServerLLDN.c  **** 				/* Every time a message is send updates coordinator to prepare next message */
 677:ServerLLDN.c  **** 				appState = APP_STATE_ATT_PAN_STATE;
 678:ServerLLDN.c  **** 			#else
 679:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
 680:ServerLLDN.c  **** 			#endif
 681:ServerLLDN.c  **** 			break;
 682:ServerLLDN.c  **** 		}
 683:ServerLLDN.c  **** 		#if APP_COORDINATOR // COORDINATOR SPECIFIC STATE MACHINE
 684:ServerLLDN.c  **** 		case APP_STATE_ATT_PAN_STATE:
 685:ServerLLDN.c  **** 		{
 686:ServerLLDN.c  **** 			switch(appPanState)
 687:ServerLLDN.c  **** 			{
 688:ServerLLDN.c  **** 				/* Prepare beacon to desassociate all nodes */
 689:ServerLLDN.c  **** 				case APP_PAN_STATE_RESET:
 690:ServerLLDN.c  **** 				{
 691:ServerLLDN.c  **** 					appPanReset();
 692:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 693:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 694:ServerLLDN.c  **** 					cycles_counter = 0;
 695:ServerLLDN.c  **** 					break;
 696:ServerLLDN.c  **** 				}
 697:ServerLLDN.c  **** 				/* Prepare first Beacon of Discovery */
 698:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_INITIAL:
 699:ServerLLDN.c  **** 				{
 700:ServerLLDN.c  **** 					/* if nodes associated is equal to expected number of associated nodes stop association proces
 701:ServerLLDN.c  **** 					 * this implementation was done as is to be used in tests, for real network functionality 
 702:ServerLLDN.c  **** 					 * the number of max association processes must be done through macLLDNdiscoveryModeTimeout
 703:ServerLLDN.c  **** 					 */
 704:ServerLLDN.c  **** 					if(counter_associados == NODOS_ASSOCIADOS_ESPERADOS || cycles_counter >= 2)
 705:ServerLLDN.c  **** 					{	
 706:ServerLLDN.c  **** 						printf("\n%d, %d", cycles_counter, counter_associados);
 707:ServerLLDN.c  **** 						counter_associados = 0;
 708:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 709:ServerLLDN.c  **** 						// macsc_disable_cmp_int(MACSC_CC1);
 710:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC2);
 711:ServerLLDN.c  **** 						msgReq.options = 0;
 712:ServerLLDN.c  **** 						
 713:ServerLLDN.c  **** 						macLLDNnumUplinkTS = (assTimeSlot) * 2 + 1;
 714:ServerLLDN.c  **** 						macLLDNRetransmitTS = assTimeSlot;
 715:ServerLLDN.c  **** 						macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;
 716:ServerLLDN.c  **** 						
 717:ServerLLDN.c  **** 						for(int i = 0; i < 32; i++)
 718:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 719:ServerLLDN.c  **** 						ACKFrame_size = 0;
 720:ServerLLDN.c  **** 						
 721:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 722:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 723:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 724:ServerLLDN.c  **** 					}
 725:ServerLLDN.c  **** 					/* if not all nodes expected where associated run through association process again */
 726:ServerLLDN.c  **** 					else 
 727:ServerLLDN.c  **** 					{
 728:ServerLLDN.c  **** 						/* prepare beacon message and start timers for beacon */
 729:ServerLLDN.c  **** 						appPanDiscInit();
 730:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 731:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 732:ServerLLDN.c  **** 					}
 733:ServerLLDN.c  **** 					break;
 734:ServerLLDN.c  **** 				}
 735:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_SECOND_BE:
 736:ServerLLDN.c  **** 				{
 737:ServerLLDN.c  **** 					/* Prepares message as: Discovery Beacon and Second Beacon */
 738:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_DISCOVERY_STATE | NWK_OPT_SECOND_BEACON ;
 739:ServerLLDN.c  **** 					msgReq.data = NULL;
 740:ServerLLDN.c  **** 					msgReq.size = 0;
 741:ServerLLDN.c  **** 					
 742:ServerLLDN.c  **** 					appState	= APP_PAN_STATE_DISC_PREPARE_ACK;
 743:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 744:ServerLLDN.c  **** 					break;
 745:ServerLLDN.c  **** 				}
 746:ServerLLDN.c  **** 				case APP_PAN_STATE_DISC_PREPARE_ACK:
 747:ServerLLDN.c  **** 				{
 748:ServerLLDN.c  **** 					/* This timer implements a delay between messages, 
 749:ServerLLDN.c  **** 					 * if not used the nodes are not able to receive the message
 750:ServerLLDN.c  **** 					 */
 751:ServerLLDN.c  **** 					appPanPrepareACK();
 752:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 753:ServerLLDN.c  **** 					
 754:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_INITIAL;
 755:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 756:ServerLLDN.c  **** 					break;
 757:ServerLLDN.c  **** 				}
 758:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_INITIAL:
 759:ServerLLDN.c  **** 				{
 760:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and First State Beacon */
 761:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE;
 762:ServerLLDN.c  **** 					msgReq.data = NULL;
 763:ServerLLDN.c  **** 					msgReq.size = 0;
 764:ServerLLDN.c  **** 					
 765:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 766:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 767:ServerLLDN.c  **** 					break;
 768:ServerLLDN.c  **** 
 769:ServerLLDN.c  **** 				}
 770:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_SECOND_BEACON:
 771:ServerLLDN.c  **** 				{
 772:ServerLLDN.c  **** 					/* Prepares the message as: Configuration Beacon and Second State Beacon */
 773:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_SECOND_BEACON;
 774:ServerLLDN.c  **** 					msgReq.data = NULL;
 775:ServerLLDN.c  **** 					msgReq.size = 0;
 776:ServerLLDN.c  **** 					
 777:ServerLLDN.c  **** 					counter_delay_msg = 0;
 778:ServerLLDN.c  **** 					
 779:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 780:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 781:ServerLLDN.c  **** 					
 782:ServerLLDN.c  **** 					break;
 783:ServerLLDN.c  **** 				}
 784:ServerLLDN.c  **** 				case APP_PAN_STATE_SEND_CONF_REQUEST:
 785:ServerLLDN.c  **** 				{
 786:ServerLLDN.c  **** 					if(conf_req_list != NULL)
 787:ServerLLDN.c  **** 					{
 788:ServerLLDN.c  **** 						CopyToConfigRequest();
 789:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 790:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 791:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 792:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 793:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 794:ServerLLDN.c  **** 						
 795:ServerLLDN.c  **** 						// Delay between messages
 796:ServerLLDN.c  **** 						macsc_set_cmp1_int_cb(downlink_delay_handler);
 797:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 798:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 799:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 800:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 801:ServerLLDN.c  **** 						
 802:ServerLLDN.c  **** 						counter_associados++;
 803:ServerLLDN.c  **** 					}
 804:ServerLLDN.c  **** 					else
 805:ServerLLDN.c  **** 					{
 806:ServerLLDN.c  **** 						if(counter_delay_msg > 0)
 807:ServerLLDN.c  **** 						{
 808:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(lldn_server_beacon);
 809:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 810:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 811:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 812:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 813:ServerLLDN.c  **** 						}
 814:ServerLLDN.c  **** 						
 815:ServerLLDN.c  **** 						appState	= APP_STATE_ATT_PAN_STATE;
 816:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 817:ServerLLDN.c  **** 					}
 818:ServerLLDN.c  **** 					break;
 819:ServerLLDN.c  **** 				}
 820:ServerLLDN.c  **** 				case APP_PAN_STATE_CONFIG_THIRD_BEACON:
 821:ServerLLDN.c  **** 				{
 822:ServerLLDN.c  **** 					msgReq.options = NWK_OPT_LLDN_BEACON | NWK_OPT_CONFIG_STATE | NWK_OPT_THIRD_BEACON;
 823:ServerLLDN.c  **** 					msgReq.data = NULL;
 824:ServerLLDN.c  **** 					msgReq.size = 0;
 825:ServerLLDN.c  **** 					
 826:ServerLLDN.c  **** 					appState	= APP_STATE_IDLE;
 827:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 828:ServerLLDN.c  **** 					cycles_counter++;	
 829:ServerLLDN.c  **** 					
 830:ServerLLDN.c  **** 					break;
 831:ServerLLDN.c  **** 				}
 832:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_INITIAL:
 833:ServerLLDN.c  **** 				{
 834:ServerLLDN.c  **** 					if(cycles_counter != 0)
 835:ServerLLDN.c  **** 					{
 836:ServerLLDN.c  **** 					appPanOnlineInit();
 837:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 838:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP;
 839:ServerLLDN.c  **** 	
 840:ServerLLDN.c  **** 					cycles_counter--;
 841:ServerLLDN.c  **** 					}
 842:ServerLLDN.c  **** 					else
 843:ServerLLDN.c  **** 					{
 844:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 845:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 846:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 847:ServerLLDN.c  **** 						
 848:ServerLLDN.c  **** 						printf("\n\n Mtricas:\n");
 849:ServerLLDN.c  **** 						int total_msg = 0;
 850:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 851:ServerLLDN.c  **** 						{
 852:ServerLLDN.c  **** 							printf("\nAddrs %hhx", nodes_info_arr[i].mac_addr);
 853:ServerLLDN.c  **** 							printf("\nMensagens Recebidas  %d", nodes_info_arr[i].msg_rec);
 854:ServerLLDN.c  **** 							printf("\nRssi Mdio %f\n", nodes_info_arr[i].average_rssi);
 855:ServerLLDN.c  **** 							
 856:ServerLLDN.c  **** 							total_msg = total_msg + nodes_info_arr[i].msg_rec;
 857:ServerLLDN.c  **** 						}
 858:ServerLLDN.c  **** 						if(assTimeSlot > 0 && total_msg > 0)
 859:ServerLLDN.c  **** 						{
 860:ServerLLDN.c  **** 							succes_rate = total_msg /(assTimeSlot * (float)NUMERO_CICLOS_ONLINE);
 861:ServerLLDN.c  **** 							printf("Taxa de Sucesso : %.2f", succes_rate);
 862:ServerLLDN.c  **** 						}
 863:ServerLLDN.c  **** 					}
 864:ServerLLDN.c  **** 					break;
 865:ServerLLDN.c  **** 				}
 866:ServerLLDN.c  **** 				case APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP:
 867:ServerLLDN.c  **** 				{
 868:ServerLLDN.c  **** 					for(int i = 0; i < 32; i++)
 869:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 870:ServerLLDN.c  **** 					ACKFrame_size = 0;
 871:ServerLLDN.c  **** 					
 872:ServerLLDN.c  **** 					msgReq.dstAddr		= 0;
 873:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 874:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 875:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 876:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 877:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 878:ServerLLDN.c  **** 					
 879:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 880:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 881:ServerLLDN.c  **** 					break;
 882:ServerLLDN.c  **** 				}				
 883:ServerLLDN.c  **** 				case APP_PAN_STATE_CHECK_TS:
 884:ServerLLDN.c  **** 				{
 885:ServerLLDN.c  **** 					if(timeslot_counter >= (macLLDNnumUplinkTS + 2*MacLLDNMgmtTS))
 886:ServerLLDN.c  **** 					{
 887:ServerLLDN.c  **** 						if(!association_request)
 888:ServerLLDN.c  **** 						{
 889:ServerLLDN.c  **** 							macsc_set_cmp1_int_cb(end_of_association_delay_handler);
 890:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 891:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 892:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 893:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, 5 * beaconInterval_association, MACSC_CC1);
 894:ServerLLDN.c  **** 						}
 895:ServerLLDN.c  **** 						else
 896:ServerLLDN.c  **** 						{
 897:ServerLLDN.c  **** 							printf("\nFim de um Perodo");
 898:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 899:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC2);
 900:ServerLLDN.c  **** 							
 901:ServerLLDN.c  **** 						}
 902:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 903:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 904:ServerLLDN.c  **** 					}
 905:ServerLLDN.c  **** 					else
 906:ServerLLDN.c  **** 					{
 907:ServerLLDN.c  **** 
 908:ServerLLDN.c  **** 						/* check if coordinator received any message in last time slot, used to calculate success rat
 909:ServerLLDN.c  **** 						if(timeslot_counter >= 2*MacLLDNMgmtTS && !data_received)
 910:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 911:ServerLLDN.c  **** 						data_received = false;
 912:ServerLLDN.c  **** 						
 913:ServerLLDN.c  **** 						printf("\n------- slot %d --------", timeslot_counter);
 914:ServerLLDN.c  **** 						
 915:ServerLLDN.c  **** 						if(timeslot_counter == 1)
 916:ServerLLDN.c  **** 						{
 917:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 918:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 919:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 920:ServerLLDN.c  **** 						}
 921:ServerLLDN.c  **** 						
 922:ServerLLDN.c  **** 						if(timeslot_counter == 2*MacLLDNMgmtTS + macLLDNRetransmitTS)
 923:ServerLLDN.c  **** 						{
 924:ServerLLDN.c  **** 							data_received = true;
 925:ServerLLDN.c  **** 							printf("\nack_frame %hhx", ACKFrame.ackFlags[0]);
 926:ServerLLDN.c  **** 							appSendData();
 927:ServerLLDN.c  **** 							appPanState = APP_PAN_STATE_IDLE;
 928:ServerLLDN.c  **** 						}
 929:ServerLLDN.c  **** 						else
 930:ServerLLDN.c  **** 							appState = APP_STATE_IDLE;
 931:ServerLLDN.c  **** 						timeslot_counter++;
 932:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 933:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 934:ServerLLDN.c  **** 						
 935:ServerLLDN.c  **** 						/*
 936:ServerLLDN.c  **** 						if (timeslot_counter == 1)
 937:ServerLLDN.c  **** 						{
 938:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 939:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 940:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 941:ServerLLDN.c  **** 						} 
 942:ServerLLDN.c  **** 						*/
 943:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 944:ServerLLDN.c  **** 						
 945:ServerLLDN.c  **** 					}
 946:ServerLLDN.c  **** 					break;
 947:ServerLLDN.c  **** 				}
 948:ServerLLDN.c  **** 				case APP_PAN_STATE_IDLE:
 949:ServerLLDN.c  **** 				{
 950:ServerLLDN.c  **** 					msgReq.options = 0;
 951:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 952:ServerLLDN.c  **** 					break;
 953:ServerLLDN.c  **** 				}
 954:ServerLLDN.c  **** 			}
 955:ServerLLDN.c  **** 			break;	
 956:ServerLLDN.c  **** 		}
 957:ServerLLDN.c  **** 		#else // NODES SPECIFIC STATE MACHINE
 958:ServerLLDN.c  **** 		case APP_STATE_PREP_DISC_REPONSE:
 959:ServerLLDN.c  **** 		{
 960:ServerLLDN.c  **** 			appPrepareDiscoverResponse();
 961:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;	
 962:ServerLLDN.c  **** 			break;
 963:ServerLLDN.c  **** 		}
 964:ServerLLDN.c  **** 		
 965:ServerLLDN.c  **** 		case APP_STATE_PREP_CONFIG_STATUS:
 966:ServerLLDN.c  **** 		{
 967:ServerLLDN.c  **** 			// se o nodo recebeu ack na fase do discovery prepara a mensagem de configuration status
 968:ServerLLDN.c  **** 			if(ack_received && rec_beacon->confSeqNumber == 0 && associated == 0 && STATE != ONLINE_MODE) {
 969:ServerLLDN.c  **** 				appPrepareConfigurationStatus();
 970:ServerLLDN.c  **** 			}
 971:ServerLLDN.c  **** 			// se o nodo no recebeu desativa o timer e fica em idle
 972:ServerLLDN.c  **** 			else {
 973:ServerLLDN.c  **** 				#if MASTER_MACSC
 974:ServerLLDN.c  **** 				macsc_disable_cmp_int(MACSC_CC1);
 975:ServerLLDN.c  **** 				#else
 976:ServerLLDN.c  **** 				timer_stop();
 977:ServerLLDN.c  **** 				#endif
 978:ServerLLDN.c  **** 			}
 979:ServerLLDN.c  **** 			ack_received = 0;
 980:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 981:ServerLLDN.c  **** 			break;
 982:ServerLLDN.c  **** 		}
 983:ServerLLDN.c  **** 		case APP_STATE_PREP_DATA_FRAME:
 984:ServerLLDN.c  **** 		{
 985:ServerLLDN.c  **** 			appPrepareDataFrame();
 986:ServerLLDN.c  **** 			appState = APP_STATE_IDLE;
 987:ServerLLDN.c  **** 			break;
 988:ServerLLDN.c  **** 		}
 989:ServerLLDN.c  **** 		case APP_STATE_RETRANSMIT_DATA:
 990:ServerLLDN.c  **** 		{
 991:ServerLLDN.c  **** 			if(!ack_received)
 992:ServerLLDN.c  **** 			{
 993:ServerLLDN.c  **** 				appState = APP_STATE_SEND;
 994:ServerLLDN.c  **** 				/*
 995:ServerLLDN.c  **** 				int retransmition_slot = 0;
 996:ServerLLDN.c  **** 				
 997:ServerLLDN.c  **** 				for(int i = 0; i < assTimeSlot && i < (rec_beacon->NumberOfBaseTimeslotsinSuperframe - 3)/2; i+
 998:ServerLLDN.c  **** 					if( !check_ack(i) )
 999:ServerLLDN.c  **** 						retransmition_slot++;
1000:ServerLLDN.c  **** 						
1001:ServerLLDN.c  **** 				printf("\nretransmition_slot %d", retransmition_slot);
1002:ServerLLDN.c  **** 				
1003:ServerLLDN.c  **** 				if(retransmition_slot == 0)
1004:ServerLLDN.c  **** 				{
1005:ServerLLDN.c  **** 					appState = APP_STATE_SEND;			
1006:ServerLLDN.c  **** 				}
1007:ServerLLDN.c  **** 				else
1008:ServerLLDN.c  **** 				{
1009:ServerLLDN.c  **** 					#if MASTER_MACSC
1010:ServerLLDN.c  **** 					macsc_enable_manual_bts();
1011:ServerLLDN.c  **** 					macsc_set_cmp1_int_cb(send_message_timeHandler);
1012:ServerLLDN.c  **** 					macsc_enable_cmp_int(MACSC_CC1);
1013:ServerLLDN.c  **** 					macsc_use_cmp(MACSC_RELATIVE_CMP, ts_time * retransmition_slot, MACSC_CC1);
1014:ServerLLDN.c  **** 					#endif
1015:ServerLLDN.c  **** 				}
1016:ServerLLDN.c  **** 				*/
1017:ServerLLDN.c  **** 			}
1018:ServerLLDN.c  **** 			else
1019:ServerLLDN.c  **** 			{
1020:ServerLLDN.c  **** 				appSendData();
1021:ServerLLDN.c  **** 				appState = APP_STATE_IDLE;
1022:ServerLLDN.c  **** 			}
1023:ServerLLDN.c  **** 			
1024:ServerLLDN.c  **** 			break;
1025:ServerLLDN.c  **** 		}
1026:ServerLLDN.c  **** 		#endif
1027:ServerLLDN.c  **** 		default:
1028:ServerLLDN.c  **** 		{
1029:ServerLLDN.c  **** 			break;
 2917               		.loc 6 1029 0
 2918 0fd6 00C0      		rjmp .L79
 2919               	.L78:
 664:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2920               		.loc 6 664 0
 2921 0fd8 0E94 0000 		call appInit
 666:ServerLLDN.c  **** 			#else
 2922               		.loc 6 666 0
 2923 0fdc 83E0      		ldi r24,lo8(3)
 2924 0fde 8093 0000 		sts appState,r24
 670:ServerLLDN.c  **** 		}
 2925               		.loc 6 670 0
 2926 0fe2 00C0      		rjmp .L79
 2927               	.L76:
 674:ServerLLDN.c  **** 			#if APP_COORDINATOR
 2928               		.loc 6 674 0
 2929 0fe4 0E94 0000 		call appSendData
 677:ServerLLDN.c  **** 			#else
 2930               		.loc 6 677 0
 2931 0fe8 83E0      		ldi r24,lo8(3)
 2932 0fea 8093 0000 		sts appState,r24
 681:ServerLLDN.c  **** 		}
 2933               		.loc 6 681 0
 2934 0fee 00C0      		rjmp .L79
 2935               	.L77:
 686:ServerLLDN.c  **** 			{
 2936               		.loc 6 686 0
 2937 0ff0 8091 0000 		lds r24,appPanState
 2938 0ff4 882F      		mov r24,r24
 2939 0ff6 90E0      		ldi r25,0
 2940 0ff8 092E      		mov __tmp_reg__,r25
 2941 0ffa 000C      		lsl r0
 2942 0ffc AA0B      		sbc r26,r26
 2943 0ffe BB0B      		sbc r27,r27
 2944 1000 40E0      		ldi r20,0
 2945 1002 50E0      		ldi r21,0
 2946 1004 2DE0      		ldi r18,lo8(13)
 2947 1006 30E0      		ldi r19,0
 2948 1008 841B      		sub r24,r20
 2949 100a 950B      		sbc r25,r21
 2950 100c 2817      		cp r18,r24
 2951 100e 3907      		cpc r19,r25
 2952 1010 00F4      		brsh .+2
 2953 1012 00C0      		rjmp .L117
 2954 1014 8050      		subi r24,lo8(-(gs(.L82)))
 2955 1016 9040      		sbci r25,hi8(-(gs(.L82)))
 2956 1018 FC01      		movw r30,r24
 2957 101a 0C94 0000 		jmp __tablejump2__
 2958               		.section	.progmem.gcc_sw_table,"a",@progbits
 2959               		.p2align	1
 2960               	.L82:
 2961 0000 0000      		.word gs(.L81)
 2962 0002 0000      		.word gs(.L83)
 2963 0004 0000      		.word gs(.L84)
 2964 0006 0000      		.word gs(.L85)
 2965 0008 0000      		.word gs(.L86)
 2966 000a 0000      		.word gs(.L87)
 2967 000c 0000      		.word gs(.L88)
 2968 000e 0000      		.word gs(.L89)
 2969 0010 0000      		.word gs(.L90)
 2970 0012 0000      		.word gs(.L91)
 2971 0014 0000      		.word gs(.L117)
 2972 0016 0000      		.word gs(.L117)
 2973 0018 0000      		.word gs(.L92)
 2974 001a 0000      		.word gs(.L93)
 2975               		.text
 2976               	.L83:
 691:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 2977               		.loc 6 691 0
 2978 101e 0E94 0000 		call appPanReset
 692:ServerLLDN.c  **** 					appState	= APP_STATE_SEND;
 2979               		.loc 6 692 0
 2980 1022 82E0      		ldi r24,lo8(2)
 2981 1024 8093 0000 		sts appPanState,r24
 693:ServerLLDN.c  **** 					cycles_counter = 0;
 2982               		.loc 6 693 0
 2983 1028 82E0      		ldi r24,lo8(2)
 2984 102a 8093 0000 		sts appState,r24
 694:ServerLLDN.c  **** 					break;
 2985               		.loc 6 694 0
 2986 102e 1092 0000 		sts cycles_counter,__zero_reg__
 695:ServerLLDN.c  **** 				}
 2987               		.loc 6 695 0
 2988 1032 00C0      		rjmp .L80
 2989               	.L84:
 704:ServerLLDN.c  **** 					{	
 2990               		.loc 6 704 0
 2991 1034 8091 0000 		lds r24,counter_associados
 2992 1038 9091 0000 		lds r25,counter_associados+1
 2993 103c 0C97      		sbiw r24,12
 2994 103e 01F0      		breq .L94
 704:ServerLLDN.c  **** 					{	
 2995               		.loc 6 704 0 is_stmt 0 discriminator 1
 2996 1040 8091 0000 		lds r24,cycles_counter
 2997 1044 8230      		cpi r24,lo8(2)
 2998 1046 00F4      		brsh .+2
 2999 1048 00C0      		rjmp .L95
 3000               	.L94:
 706:ServerLLDN.c  **** 						counter_associados = 0;
 3001               		.loc 6 706 0 is_stmt 1
 3002 104a 2091 0000 		lds r18,counter_associados
 3003 104e 3091 0000 		lds r19,counter_associados+1
 3004 1052 8091 0000 		lds r24,cycles_counter
 3005 1056 882F      		mov r24,r24
 3006 1058 90E0      		ldi r25,0
 3007 105a 432F      		mov r20,r19
 3008 105c 4F93      		push r20
 3009 105e 2F93      		push r18
 3010 1060 292F      		mov r18,r25
 3011 1062 2F93      		push r18
 3012 1064 8F93      		push r24
 3013 1066 80E0      		ldi r24,lo8(.LC8)
 3014 1068 90E0      		ldi r25,hi8(.LC8)
 3015 106a 892F      		mov r24,r25
 3016 106c 8F93      		push r24
 3017 106e 80E0      		ldi r24,lo8(.LC8)
 3018 1070 90E0      		ldi r25,hi8(.LC8)
 3019 1072 8F93      		push r24
 3020 1074 0E94 0000 		call printf
 3021 1078 0F90      		pop __tmp_reg__
 3022 107a 0F90      		pop __tmp_reg__
 3023 107c 0F90      		pop __tmp_reg__
 3024 107e 0F90      		pop __tmp_reg__
 3025 1080 0F90      		pop __tmp_reg__
 3026 1082 0F90      		pop __tmp_reg__
 707:ServerLLDN.c  **** 						/* if all nodes expected where associated stop beacon generation interruptions */
 3027               		.loc 6 707 0
 3028 1084 1092 0000 		sts counter_associados+1,__zero_reg__
 3029 1088 1092 0000 		sts counter_associados,__zero_reg__
 710:ServerLLDN.c  **** 						msgReq.options = 0;
 3030               		.loc 6 710 0
 3031 108c 82E0      		ldi r24,lo8(2)
 3032 108e 0E94 0000 		call macsc_disable_cmp_int
 711:ServerLLDN.c  **** 						
 3033               		.loc 6 711 0
 3034 1092 1092 0000 		sts msgReq+9+1,__zero_reg__
 3035 1096 1092 0000 		sts msgReq+9,__zero_reg__
 713:ServerLLDN.c  **** 						macLLDNRetransmitTS = assTimeSlot;
 3036               		.loc 6 713 0
 3037 109a 8091 0000 		lds r24,assTimeSlot
 3038 109e 9091 0000 		lds r25,assTimeSlot+1
 3039 10a2 880F      		lsl r24
 3040 10a4 991F      		rol r25
 3041 10a6 0196      		adiw r24,1
 3042 10a8 9093 0000 		sts macLLDNnumUplinkTS+1,r25
 3043 10ac 8093 0000 		sts macLLDNnumUplinkTS,r24
 714:ServerLLDN.c  **** 						macLLDNnumTimeSlots = macLLDNnumUplinkTS + 2 *MacLLDNMgmtTS;
 3044               		.loc 6 714 0
 3045 10b0 8091 0000 		lds r24,assTimeSlot
 3046 10b4 9091 0000 		lds r25,assTimeSlot+1
 3047 10b8 9093 0000 		sts macLLDNRetransmitTS+1,r25
 3048 10bc 8093 0000 		sts macLLDNRetransmitTS,r24
 715:ServerLLDN.c  **** 						
 3049               		.loc 6 715 0
 3050 10c0 8091 0000 		lds r24,macLLDNnumUplinkTS
 3051 10c4 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3052 10c8 0296      		adiw r24,2
 3053 10ca 9093 0000 		sts macLLDNnumTimeSlots+1,r25
 3054 10ce 8093 0000 		sts macLLDNnumTimeSlots,r24
 3055               	.LBB12:
 717:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3056               		.loc 6 717 0
 3057 10d2 1A82      		std Y+2,__zero_reg__
 3058 10d4 1982      		std Y+1,__zero_reg__
 3059 10d6 00C0      		rjmp .L96
 3060               	.L97:
 718:ServerLLDN.c  **** 						ACKFrame_size = 0;
 3061               		.loc 6 718 0 discriminator 3
 3062 10d8 8981      		ldd r24,Y+1
 3063 10da 9A81      		ldd r25,Y+2
 3064 10dc 8050      		subi r24,lo8(-(ACKFrame+1))
 3065 10de 9040      		sbci r25,hi8(-(ACKFrame+1))
 3066 10e0 FC01      		movw r30,r24
 3067 10e2 1082      		st Z,__zero_reg__
 717:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3068               		.loc 6 717 0 discriminator 3
 3069 10e4 8981      		ldd r24,Y+1
 3070 10e6 9A81      		ldd r25,Y+2
 3071 10e8 0196      		adiw r24,1
 3072 10ea 9A83      		std Y+2,r25
 3073 10ec 8983      		std Y+1,r24
 3074               	.L96:
 717:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3075               		.loc 6 717 0 is_stmt 0 discriminator 1
 3076 10ee 8981      		ldd r24,Y+1
 3077 10f0 9A81      		ldd r25,Y+2
 3078 10f2 8097      		sbiw r24,32
 3079 10f4 04F0      		brlt .L97
 3080               	.LBE12:
 719:ServerLLDN.c  **** 						
 3081               		.loc 6 719 0 is_stmt 1
 3082 10f6 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3083 10fa 1092 0000 		sts ACKFrame_size,__zero_reg__
 721:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_ONLINE_INITIAL; // APP_PAN_STATE_ONLINE_INIT
 3084               		.loc 6 721 0
 3085 10fe 81E0      		ldi r24,lo8(1)
 3086 1100 8093 0000 		sts appState,r24
 722:ServerLLDN.c  **** 						cycles_counter = NUMERO_CICLOS_ONLINE;
 3087               		.loc 6 722 0
 3088 1104 89E0      		ldi r24,lo8(9)
 3089 1106 8093 0000 		sts appPanState,r24
 723:ServerLLDN.c  **** 					}
 3090               		.loc 6 723 0
 3091 110a 85E0      		ldi r24,lo8(5)
 3092 110c 8093 0000 		sts cycles_counter,r24
 733:ServerLLDN.c  **** 				}
 3093               		.loc 6 733 0
 3094 1110 00C0      		rjmp .L80
 3095               	.L95:
 729:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3096               		.loc 6 729 0
 3097 1112 0E94 0000 		call appPanDiscInit
 730:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_DISC_SECOND_BE;
 3098               		.loc 6 730 0
 3099 1116 81E0      		ldi r24,lo8(1)
 3100 1118 8093 0000 		sts appState,r24
 731:ServerLLDN.c  **** 					}
 3101               		.loc 6 731 0
 3102 111c 83E0      		ldi r24,lo8(3)
 3103 111e 8093 0000 		sts appPanState,r24
 733:ServerLLDN.c  **** 				}
 3104               		.loc 6 733 0
 3105 1122 00C0      		rjmp .L80
 3106               	.L85:
 738:ServerLLDN.c  **** 					msgReq.data = NULL;
 3107               		.loc 6 738 0
 3108 1124 80E4      		ldi r24,lo8(64)
 3109 1126 99E0      		ldi r25,lo8(9)
 3110 1128 9093 0000 		sts msgReq+9+1,r25
 3111 112c 8093 0000 		sts msgReq+9,r24
 739:ServerLLDN.c  **** 					msgReq.size = 0;
 3112               		.loc 6 739 0
 3113 1130 1092 0000 		sts msgReq+13+1,__zero_reg__
 3114 1134 1092 0000 		sts msgReq+13,__zero_reg__
 740:ServerLLDN.c  **** 					
 3115               		.loc 6 740 0
 3116 1138 1092 0000 		sts msgReq+15,__zero_reg__
 742:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_PREPARE_ACK;
 3117               		.loc 6 742 0
 3118 113c 84E0      		ldi r24,lo8(4)
 3119 113e 8093 0000 		sts appState,r24
 743:ServerLLDN.c  **** 					break;
 3120               		.loc 6 743 0
 3121 1142 84E0      		ldi r24,lo8(4)
 3122 1144 8093 0000 		sts appPanState,r24
 744:ServerLLDN.c  **** 				}
 3123               		.loc 6 744 0
 3124 1148 00C0      		rjmp .L80
 3125               	.L86:
 751:ServerLLDN.c  **** 					SYS_TimerStart(&tmrDelay);
 3126               		.loc 6 751 0
 3127 114a 0E94 0000 		call appPanPrepareACK
 752:ServerLLDN.c  **** 					
 3128               		.loc 6 752 0
 3129 114e 80E0      		ldi r24,lo8(tmrDelay)
 3130 1150 90E0      		ldi r25,hi8(tmrDelay)
 3131 1152 0E94 0000 		call SYS_TimerStart
 754:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3132               		.loc 6 754 0
 3133 1156 85E0      		ldi r24,lo8(5)
 3134 1158 8093 0000 		sts appPanState,r24
 755:ServerLLDN.c  **** 					break;
 3135               		.loc 6 755 0
 3136 115c 81E0      		ldi r24,lo8(1)
 3137 115e 8093 0000 		sts appState,r24
 756:ServerLLDN.c  **** 				}
 3138               		.loc 6 756 0
 3139 1162 00C0      		rjmp .L80
 3140               	.L87:
 761:ServerLLDN.c  **** 					msgReq.data = NULL;
 3141               		.loc 6 761 0
 3142 1164 80E4      		ldi r24,lo8(64)
 3143 1166 92E0      		ldi r25,lo8(2)
 3144 1168 9093 0000 		sts msgReq+9+1,r25
 3145 116c 8093 0000 		sts msgReq+9,r24
 762:ServerLLDN.c  **** 					msgReq.size = 0;
 3146               		.loc 6 762 0
 3147 1170 1092 0000 		sts msgReq+13+1,__zero_reg__
 3148 1174 1092 0000 		sts msgReq+13,__zero_reg__
 763:ServerLLDN.c  **** 					
 3149               		.loc 6 763 0
 3150 1178 1092 0000 		sts msgReq+15,__zero_reg__
 765:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CONFIG_SECOND_BEACON;
 3151               		.loc 6 765 0
 3152 117c 81E0      		ldi r24,lo8(1)
 3153 117e 8093 0000 		sts appState,r24
 766:ServerLLDN.c  **** 					break;
 3154               		.loc 6 766 0
 3155 1182 87E0      		ldi r24,lo8(7)
 3156 1184 8093 0000 		sts appPanState,r24
 767:ServerLLDN.c  **** 
 3157               		.loc 6 767 0
 3158 1188 00C0      		rjmp .L80
 3159               	.L89:
 773:ServerLLDN.c  **** 					msgReq.data = NULL;
 3160               		.loc 6 773 0
 3161 118a 80E4      		ldi r24,lo8(64)
 3162 118c 9AE0      		ldi r25,lo8(10)
 3163 118e 9093 0000 		sts msgReq+9+1,r25
 3164 1192 8093 0000 		sts msgReq+9,r24
 774:ServerLLDN.c  **** 					msgReq.size = 0;
 3165               		.loc 6 774 0
 3166 1196 1092 0000 		sts msgReq+13+1,__zero_reg__
 3167 119a 1092 0000 		sts msgReq+13,__zero_reg__
 775:ServerLLDN.c  **** 					
 3168               		.loc 6 775 0
 3169 119e 1092 0000 		sts msgReq+15,__zero_reg__
 777:ServerLLDN.c  **** 					
 3170               		.loc 6 777 0
 3171 11a2 1092 0000 		sts counter_delay_msg+1,__zero_reg__
 3172 11a6 1092 0000 		sts counter_delay_msg,__zero_reg__
 779:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3173               		.loc 6 779 0
 3174 11aa 81E0      		ldi r24,lo8(1)
 3175 11ac 8093 0000 		sts appState,r24
 780:ServerLLDN.c  **** 					
 3176               		.loc 6 780 0
 3177 11b0 86E0      		ldi r24,lo8(6)
 3178 11b2 8093 0000 		sts appPanState,r24
 782:ServerLLDN.c  **** 				}
 3179               		.loc 6 782 0
 3180 11b6 00C0      		rjmp .L80
 3181               	.L88:
 786:ServerLLDN.c  **** 					{
 3182               		.loc 6 786 0
 3183 11b8 8091 0000 		lds r24,conf_req_list
 3184 11bc 9091 0000 		lds r25,conf_req_list+1
 3185 11c0 892B      		or r24,r25
 3186 11c2 01F0      		breq .L99
 788:ServerLLDN.c  **** 						msgReq.options		= NWK_OPT_MAC_COMMAND;
 3187               		.loc 6 788 0
 3188 11c4 0E94 0000 		call CopyToConfigRequest
 789:ServerLLDN.c  **** 						msgReq.data			= (uint8_t*)&config_request_frame;
 3189               		.loc 6 789 0
 3190 11c8 80E0      		ldi r24,0
 3191 11ca 90E8      		ldi r25,lo8(-128)
 3192 11cc 9093 0000 		sts msgReq+9+1,r25
 3193 11d0 8093 0000 		sts msgReq+9,r24
 790:ServerLLDN.c  **** 						msgReq.size			= sizeof(NWK_ConfigRequest_t);
 3194               		.loc 6 790 0
 3195 11d4 80E0      		ldi r24,lo8(config_request_frame)
 3196 11d6 90E0      		ldi r25,hi8(config_request_frame)
 3197 11d8 9093 0000 		sts msgReq+13+1,r25
 3198 11dc 8093 0000 		sts msgReq+13,r24
 791:ServerLLDN.c  **** 						appState	= APP_STATE_IDLE;
 3199               		.loc 6 791 0
 3200 11e0 86E0      		ldi r24,lo8(6)
 3201 11e2 8093 0000 		sts msgReq+15,r24
 792:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_SEND_CONF_REQUEST;
 3202               		.loc 6 792 0
 3203 11e6 81E0      		ldi r24,lo8(1)
 3204 11e8 8093 0000 		sts appState,r24
 793:ServerLLDN.c  **** 						
 3205               		.loc 6 793 0
 3206 11ec 86E0      		ldi r24,lo8(6)
 3207 11ee 8093 0000 		sts appPanState,r24
 796:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3208               		.loc 6 796 0
 3209 11f2 80E0      		ldi r24,lo8(gs(downlink_delay_handler))
 3210 11f4 90E0      		ldi r25,hi8(gs(downlink_delay_handler))
 3211 11f6 0E94 0000 		call macsc_set_cmp1_int_cb
 797:ServerLLDN.c  **** 						macsc_enable_manual_bts();
 3212               		.loc 6 797 0
 3213 11fa 81E0      		ldi r24,lo8(1)
 3214 11fc 0E94 0000 		call macsc_disable_cmp_int
 798:ServerLLDN.c  **** 						macsc_enable_cmp_int(MACSC_CC1);
 3215               		.loc 6 798 0
 3216 1200 0E94 0000 		call macsc_enable_manual_bts
 799:ServerLLDN.c  **** 						macsc_use_cmp(MACSC_RELATIVE_CMP, DELAY, MACSC_CC1);
 3217               		.loc 6 799 0
 3218 1204 81E0      		ldi r24,lo8(1)
 3219 1206 0E94 0000 		call macsc_enable_cmp_int
 800:ServerLLDN.c  **** 						
 3220               		.loc 6 800 0
 3221 120a 21E0      		ldi r18,lo8(1)
 3222 120c 4BE4      		ldi r20,lo8(75)
 3223 120e 50E0      		ldi r21,0
 3224 1210 60E0      		ldi r22,0
 3225 1212 70E0      		ldi r23,0
 3226 1214 81E0      		ldi r24,lo8(1)
 3227 1216 0E94 0000 		call macsc_use_cmp
 802:ServerLLDN.c  **** 					}
 3228               		.loc 6 802 0
 3229 121a 8091 0000 		lds r24,counter_associados
 3230 121e 9091 0000 		lds r25,counter_associados+1
 3231 1222 0196      		adiw r24,1
 3232 1224 9093 0000 		sts counter_associados+1,r25
 3233 1228 8093 0000 		sts counter_associados,r24
 818:ServerLLDN.c  **** 				}
 3234               		.loc 6 818 0
 3235 122c 00C0      		rjmp .L80
 3236               	.L99:
 806:ServerLLDN.c  **** 						{
 3237               		.loc 6 806 0
 3238 122e 8091 0000 		lds r24,counter_delay_msg
 3239 1232 9091 0000 		lds r25,counter_delay_msg+1
 3240 1236 1816      		cp __zero_reg__,r24
 3241 1238 1906      		cpc __zero_reg__,r25
 3242 123a 04F4      		brge .L101
 808:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3243               		.loc 6 808 0
 3244 123c 80E0      		ldi r24,lo8(gs(lldn_server_beacon))
 3245 123e 90E0      		ldi r25,hi8(gs(lldn_server_beacon))
 3246 1240 0E94 0000 		call macsc_set_cmp1_int_cb
 809:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3247               		.loc 6 809 0
 3248 1244 81E0      		ldi r24,lo8(1)
 3249 1246 0E94 0000 		call macsc_disable_cmp_int
 810:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3250               		.loc 6 810 0
 3251 124a 0E94 0000 		call macsc_enable_manual_bts
 811:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP,beaconInterval_association - counter_delay_msg * DELAY, MAC
 3252               		.loc 6 811 0
 3253 124e 81E0      		ldi r24,lo8(1)
 3254 1250 0E94 0000 		call macsc_enable_cmp_int
 812:ServerLLDN.c  **** 						}
 3255               		.loc 6 812 0
 3256 1254 C090 0000 		lds r12,beaconInterval_association
 3257 1258 D090 0000 		lds r13,beaconInterval_association+1
 3258 125c E090 0000 		lds r14,beaconInterval_association+2
 3259 1260 F090 0000 		lds r15,beaconInterval_association+3
 3260 1264 2091 0000 		lds r18,counter_delay_msg
 3261 1268 3091 0000 		lds r19,counter_delay_msg+1
 3262 126c 4BE4      		ldi r20,lo8(75)
 3263 126e 429F      		mul r20,r18
 3264 1270 C001      		movw r24,r0
 3265 1272 439F      		mul r20,r19
 3266 1274 900D      		add r25,r0
 3267 1276 1124      		clr __zero_reg__
 3268 1278 092E      		mov __tmp_reg__,r25
 3269 127a 000C      		lsl r0
 3270 127c AA0B      		sbc r26,r26
 3271 127e BB0B      		sbc r27,r27
 3272 1280 BC01      		movw r22,r24
 3273 1282 CD01      		movw r24,r26
 3274 1284 0E94 0000 		call __floatsisf
 3275 1288 DC01      		movw r26,r24
 3276 128a CB01      		movw r24,r22
 3277 128c 9C01      		movw r18,r24
 3278 128e AD01      		movw r20,r26
 3279 1290 C701      		movw r24,r14
 3280 1292 B601      		movw r22,r12
 3281 1294 0E94 0000 		call __subsf3
 3282 1298 DC01      		movw r26,r24
 3283 129a CB01      		movw r24,r22
 3284 129c BC01      		movw r22,r24
 3285 129e CD01      		movw r24,r26
 3286 12a0 0E94 0000 		call __fixunssfsi
 3287 12a4 DC01      		movw r26,r24
 3288 12a6 CB01      		movw r24,r22
 3289 12a8 21E0      		ldi r18,lo8(1)
 3290 12aa AC01      		movw r20,r24
 3291 12ac BD01      		movw r22,r26
 3292 12ae 81E0      		ldi r24,lo8(1)
 3293 12b0 0E94 0000 		call macsc_use_cmp
 3294               	.L101:
 815:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_CONFIG_THIRD_BEACON;
 3295               		.loc 6 815 0
 3296 12b4 83E0      		ldi r24,lo8(3)
 3297 12b6 8093 0000 		sts appState,r24
 816:ServerLLDN.c  **** 					}
 3298               		.loc 6 816 0
 3299 12ba 88E0      		ldi r24,lo8(8)
 3300 12bc 8093 0000 		sts appPanState,r24
 818:ServerLLDN.c  **** 				}
 3301               		.loc 6 818 0
 3302 12c0 00C0      		rjmp .L80
 3303               	.L90:
 822:ServerLLDN.c  **** 					msgReq.data = NULL;
 3304               		.loc 6 822 0
 3305 12c2 80E4      		ldi r24,lo8(64)
 3306 12c4 92E1      		ldi r25,lo8(18)
 3307 12c6 9093 0000 		sts msgReq+9+1,r25
 3308 12ca 8093 0000 		sts msgReq+9,r24
 823:ServerLLDN.c  **** 					msgReq.size = 0;
 3309               		.loc 6 823 0
 3310 12ce 1092 0000 		sts msgReq+13+1,__zero_reg__
 3311 12d2 1092 0000 		sts msgReq+13,__zero_reg__
 824:ServerLLDN.c  **** 					
 3312               		.loc 6 824 0
 3313 12d6 1092 0000 		sts msgReq+15,__zero_reg__
 826:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_DISC_INITIAL;
 3314               		.loc 6 826 0
 3315 12da 81E0      		ldi r24,lo8(1)
 3316 12dc 8093 0000 		sts appState,r24
 827:ServerLLDN.c  **** 					cycles_counter++;	
 3317               		.loc 6 827 0
 3318 12e0 82E0      		ldi r24,lo8(2)
 3319 12e2 8093 0000 		sts appPanState,r24
 828:ServerLLDN.c  **** 					
 3320               		.loc 6 828 0
 3321 12e6 8091 0000 		lds r24,cycles_counter
 3322 12ea 8F5F      		subi r24,lo8(-(1))
 3323 12ec 8093 0000 		sts cycles_counter,r24
 830:ServerLLDN.c  **** 				}
 3324               		.loc 6 830 0
 3325 12f0 00C0      		rjmp .L80
 3326               	.L91:
 834:ServerLLDN.c  **** 					{
 3327               		.loc 6 834 0
 3328 12f2 8091 0000 		lds r24,cycles_counter
 3329 12f6 8823      		tst r24
 3330 12f8 01F0      		breq .L102
 836:ServerLLDN.c  **** 					appState = APP_STATE_SEND;
 3331               		.loc 6 836 0
 3332 12fa 0E94 0000 		call appPanOnlineInit
 837:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_ONLINE_PREPARE_ACK_GROUP;
 3333               		.loc 6 837 0
 3334 12fe 82E0      		ldi r24,lo8(2)
 3335 1300 8093 0000 		sts appState,r24
 838:ServerLLDN.c  **** 	
 3336               		.loc 6 838 0
 3337 1304 8DE0      		ldi r24,lo8(13)
 3338 1306 8093 0000 		sts appPanState,r24
 840:ServerLLDN.c  **** 					}
 3339               		.loc 6 840 0
 3340 130a 8091 0000 		lds r24,cycles_counter
 3341 130e 8150      		subi r24,lo8(-(-1))
 3342 1310 8093 0000 		sts cycles_counter,r24
 864:ServerLLDN.c  **** 				}
 3343               		.loc 6 864 0
 3344 1314 00C0      		rjmp .L118
 3345               	.L102:
 3346               	.LBB13:
 844:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3347               		.loc 6 844 0
 3348 1316 81E0      		ldi r24,lo8(1)
 3349 1318 8093 0000 		sts appState,r24
 845:ServerLLDN.c  **** 						macsc_disable_cmp_int(MACSC_CC1);
 3350               		.loc 6 845 0
 3351 131c 1092 0000 		sts appPanState,__zero_reg__
 846:ServerLLDN.c  **** 						
 3352               		.loc 6 846 0
 3353 1320 81E0      		ldi r24,lo8(1)
 3354 1322 0E94 0000 		call macsc_disable_cmp_int
 848:ServerLLDN.c  **** 						int total_msg = 0;
 3355               		.loc 6 848 0
 3356 1326 80E0      		ldi r24,lo8(.LC9)
 3357 1328 90E0      		ldi r25,hi8(.LC9)
 3358 132a 0E94 0000 		call puts
 849:ServerLLDN.c  **** 						for(int i = 0; nodes_info_arr[i].mac_addr != 0 && assTimeSlot > i; i++)
 3359               		.loc 6 849 0
 3360 132e 1C82      		std Y+4,__zero_reg__
 3361 1330 1B82      		std Y+3,__zero_reg__
 3362               	.LBB14:
 850:ServerLLDN.c  **** 						{
 3363               		.loc 6 850 0
 3364 1332 1E82      		std Y+6,__zero_reg__
 3365 1334 1D82      		std Y+5,__zero_reg__
 3366 1336 00C0      		rjmp .L104
 3367               	.L106:
 852:ServerLLDN.c  **** 							printf("\nMensagens Recebidas  %d", nodes_info_arr[i].msg_rec);
 3368               		.loc 6 852 0 discriminator 4
 3369 1338 2D81      		ldd r18,Y+5
 3370 133a 3E81      		ldd r19,Y+6
 3371 133c 4AE4      		ldi r20,lo8(74)
 3372 133e 429F      		mul r20,r18
 3373 1340 C001      		movw r24,r0
 3374 1342 439F      		mul r20,r19
 3375 1344 900D      		add r25,r0
 3376 1346 1124      		clr __zero_reg__
 3377 1348 8050      		subi r24,lo8(-(nodes_info_arr+1))
 3378 134a 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 3379 134c FC01      		movw r30,r24
 3380 134e 8081      		ld r24,Z
 3381 1350 9181      		ldd r25,Z+1
 3382 1352 292F      		mov r18,r25
 3383 1354 2F93      		push r18
 3384 1356 8F93      		push r24
 3385 1358 80E0      		ldi r24,lo8(.LC10)
 3386 135a 90E0      		ldi r25,hi8(.LC10)
 3387 135c 892F      		mov r24,r25
 3388 135e 8F93      		push r24
 3389 1360 80E0      		ldi r24,lo8(.LC10)
 3390 1362 90E0      		ldi r25,hi8(.LC10)
 3391 1364 8F93      		push r24
 3392 1366 0E94 0000 		call printf
 3393 136a 0F90      		pop __tmp_reg__
 3394 136c 0F90      		pop __tmp_reg__
 3395 136e 0F90      		pop __tmp_reg__
 3396 1370 0F90      		pop __tmp_reg__
 853:ServerLLDN.c  **** 							printf("\nRssi Mdio %f\n", nodes_info_arr[i].average_rssi);
 3397               		.loc 6 853 0 discriminator 4
 3398 1372 2D81      		ldd r18,Y+5
 3399 1374 3E81      		ldd r19,Y+6
 3400 1376 4AE4      		ldi r20,lo8(74)
 3401 1378 429F      		mul r20,r18
 3402 137a C001      		movw r24,r0
 3403 137c 439F      		mul r20,r19
 3404 137e 900D      		add r25,r0
 3405 1380 1124      		clr __zero_reg__
 3406 1382 8050      		subi r24,lo8(-(nodes_info_arr+69))
 3407 1384 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 3408 1386 FC01      		movw r30,r24
 3409 1388 8081      		ld r24,Z
 3410 138a 9181      		ldd r25,Z+1
 3411 138c 292F      		mov r18,r25
 3412 138e 2F93      		push r18
 3413 1390 8F93      		push r24
 3414 1392 80E0      		ldi r24,lo8(.LC11)
 3415 1394 90E0      		ldi r25,hi8(.LC11)
 3416 1396 892F      		mov r24,r25
 3417 1398 8F93      		push r24
 3418 139a 80E0      		ldi r24,lo8(.LC11)
 3419 139c 90E0      		ldi r25,hi8(.LC11)
 3420 139e 8F93      		push r24
 3421 13a0 0E94 0000 		call printf
 3422 13a4 0F90      		pop __tmp_reg__
 3423 13a6 0F90      		pop __tmp_reg__
 3424 13a8 0F90      		pop __tmp_reg__
 3425 13aa 0F90      		pop __tmp_reg__
 854:ServerLLDN.c  **** 							
 3426               		.loc 6 854 0 discriminator 4
 3427 13ac 2D81      		ldd r18,Y+5
 3428 13ae 3E81      		ldd r19,Y+6
 3429 13b0 4AE4      		ldi r20,lo8(74)
 3430 13b2 429F      		mul r20,r18
 3431 13b4 C001      		movw r24,r0
 3432 13b6 439F      		mul r20,r19
 3433 13b8 900D      		add r25,r0
 3434 13ba 1124      		clr __zero_reg__
 3435 13bc 8050      		subi r24,lo8(-(nodes_info_arr+5))
 3436 13be 9040      		sbci r25,hi8(-(nodes_info_arr+5))
 3437 13c0 FC01      		movw r30,r24
 3438 13c2 8081      		ld r24,Z
 3439 13c4 9181      		ldd r25,Z+1
 3440 13c6 A281      		ldd r26,Z+2
 3441 13c8 B381      		ldd r27,Z+3
 3442 13ca 2B2F      		mov r18,r27
 3443 13cc 2F93      		push r18
 3444 13ce 2A2F      		mov r18,r26
 3445 13d0 2F93      		push r18
 3446 13d2 292F      		mov r18,r25
 3447 13d4 2F93      		push r18
 3448 13d6 8F93      		push r24
 3449 13d8 80E0      		ldi r24,lo8(.LC12)
 3450 13da 90E0      		ldi r25,hi8(.LC12)
 3451 13dc 892F      		mov r24,r25
 3452 13de 8F93      		push r24
 3453 13e0 80E0      		ldi r24,lo8(.LC12)
 3454 13e2 90E0      		ldi r25,hi8(.LC12)
 3455 13e4 8F93      		push r24
 3456 13e6 0E94 0000 		call printf
 3457 13ea 0F90      		pop __tmp_reg__
 3458 13ec 0F90      		pop __tmp_reg__
 3459 13ee 0F90      		pop __tmp_reg__
 3460 13f0 0F90      		pop __tmp_reg__
 3461 13f2 0F90      		pop __tmp_reg__
 3462 13f4 0F90      		pop __tmp_reg__
 856:ServerLLDN.c  **** 						}
 3463               		.loc 6 856 0 discriminator 4
 3464 13f6 2D81      		ldd r18,Y+5
 3465 13f8 3E81      		ldd r19,Y+6
 3466 13fa 4AE4      		ldi r20,lo8(74)
 3467 13fc 429F      		mul r20,r18
 3468 13fe C001      		movw r24,r0
 3469 1400 439F      		mul r20,r19
 3470 1402 900D      		add r25,r0
 3471 1404 1124      		clr __zero_reg__
 3472 1406 8050      		subi r24,lo8(-(nodes_info_arr+69))
 3473 1408 9040      		sbci r25,hi8(-(nodes_info_arr+69))
 3474 140a FC01      		movw r30,r24
 3475 140c 2081      		ld r18,Z
 3476 140e 3181      		ldd r19,Z+1
 3477 1410 8B81      		ldd r24,Y+3
 3478 1412 9C81      		ldd r25,Y+4
 3479 1414 820F      		add r24,r18
 3480 1416 931F      		adc r25,r19
 3481 1418 9C83      		std Y+4,r25
 3482 141a 8B83      		std Y+3,r24
 850:ServerLLDN.c  **** 						{
 3483               		.loc 6 850 0 discriminator 4
 3484 141c 8D81      		ldd r24,Y+5
 3485 141e 9E81      		ldd r25,Y+6
 3486 1420 0196      		adiw r24,1
 3487 1422 9E83      		std Y+6,r25
 3488 1424 8D83      		std Y+5,r24
 3489               	.L104:
 850:ServerLLDN.c  **** 						{
 3490               		.loc 6 850 0 is_stmt 0 discriminator 1
 3491 1426 2D81      		ldd r18,Y+5
 3492 1428 3E81      		ldd r19,Y+6
 3493 142a 4AE4      		ldi r20,lo8(74)
 3494 142c 429F      		mul r20,r18
 3495 142e C001      		movw r24,r0
 3496 1430 439F      		mul r20,r19
 3497 1432 900D      		add r25,r0
 3498 1434 1124      		clr __zero_reg__
 3499 1436 8050      		subi r24,lo8(-(nodes_info_arr+1))
 3500 1438 9040      		sbci r25,hi8(-(nodes_info_arr+1))
 3501 143a FC01      		movw r30,r24
 3502 143c 8081      		ld r24,Z
 3503 143e 9181      		ldd r25,Z+1
 3504 1440 892B      		or r24,r25
 3505 1442 01F0      		breq .L105
 850:ServerLLDN.c  **** 						{
 3506               		.loc 6 850 0 discriminator 3
 3507 1444 2091 0000 		lds r18,assTimeSlot
 3508 1448 3091 0000 		lds r19,assTimeSlot+1
 3509 144c 8D81      		ldd r24,Y+5
 3510 144e 9E81      		ldd r25,Y+6
 3511 1450 8217      		cp r24,r18
 3512 1452 9307      		cpc r25,r19
 3513 1454 04F4      		brge .+2
 3514 1456 00C0      		rjmp .L106
 3515               	.L105:
 3516               	.LBE14:
 858:ServerLLDN.c  **** 						{
 3517               		.loc 6 858 0 is_stmt 1
 3518 1458 8091 0000 		lds r24,assTimeSlot
 3519 145c 9091 0000 		lds r25,assTimeSlot+1
 3520 1460 1816      		cp __zero_reg__,r24
 3521 1462 1906      		cpc __zero_reg__,r25
 3522 1464 04F0      		brlt .+2
 3523 1466 00C0      		rjmp .L118
 858:ServerLLDN.c  **** 						{
 3524               		.loc 6 858 0 is_stmt 0 discriminator 1
 3525 1468 8B81      		ldd r24,Y+3
 3526 146a 9C81      		ldd r25,Y+4
 3527 146c 1816      		cp __zero_reg__,r24
 3528 146e 1906      		cpc __zero_reg__,r25
 3529 1470 04F0      		brlt .+2
 3530 1472 00C0      		rjmp .L118
 860:ServerLLDN.c  **** 							printf("Taxa de Sucesso : %.2f", succes_rate);
 3531               		.loc 6 860 0 is_stmt 1
 3532 1474 8B81      		ldd r24,Y+3
 3533 1476 9C81      		ldd r25,Y+4
 3534 1478 092E      		mov __tmp_reg__,r25
 3535 147a 000C      		lsl r0
 3536 147c AA0B      		sbc r26,r26
 3537 147e BB0B      		sbc r27,r27
 3538 1480 BC01      		movw r22,r24
 3539 1482 CD01      		movw r24,r26
 3540 1484 0E94 0000 		call __floatsisf
 3541 1488 6B01      		movw r12,r22
 3542 148a 7C01      		movw r14,r24
 3543 148c 8091 0000 		lds r24,assTimeSlot
 3544 1490 9091 0000 		lds r25,assTimeSlot+1
 3545 1494 092E      		mov __tmp_reg__,r25
 3546 1496 000C      		lsl r0
 3547 1498 AA0B      		sbc r26,r26
 3548 149a BB0B      		sbc r27,r27
 3549 149c BC01      		movw r22,r24
 3550 149e CD01      		movw r24,r26
 3551 14a0 0E94 0000 		call __floatsisf
 3552 14a4 DC01      		movw r26,r24
 3553 14a6 CB01      		movw r24,r22
 3554 14a8 20E0      		ldi r18,0
 3555 14aa 30E0      		ldi r19,0
 3556 14ac 40EA      		ldi r20,lo8(-96)
 3557 14ae 50E4      		ldi r21,lo8(64)
 3558 14b0 BC01      		movw r22,r24
 3559 14b2 CD01      		movw r24,r26
 3560 14b4 0E94 0000 		call __mulsf3
 3561 14b8 DC01      		movw r26,r24
 3562 14ba CB01      		movw r24,r22
 3563 14bc 9C01      		movw r18,r24
 3564 14be AD01      		movw r20,r26
 3565 14c0 C701      		movw r24,r14
 3566 14c2 B601      		movw r22,r12
 3567 14c4 0E94 0000 		call __divsf3
 3568 14c8 DC01      		movw r26,r24
 3569 14ca CB01      		movw r24,r22
 3570 14cc 8093 0000 		sts succes_rate,r24
 3571 14d0 9093 0000 		sts succes_rate+1,r25
 3572 14d4 A093 0000 		sts succes_rate+2,r26
 3573 14d8 B093 0000 		sts succes_rate+3,r27
 861:ServerLLDN.c  **** 						}
 3574               		.loc 6 861 0
 3575 14dc 8091 0000 		lds r24,succes_rate
 3576 14e0 9091 0000 		lds r25,succes_rate+1
 3577 14e4 A091 0000 		lds r26,succes_rate+2
 3578 14e8 B091 0000 		lds r27,succes_rate+3
 3579 14ec 2B2F      		mov r18,r27
 3580 14ee 2F93      		push r18
 3581 14f0 2A2F      		mov r18,r26
 3582 14f2 2F93      		push r18
 3583 14f4 292F      		mov r18,r25
 3584 14f6 2F93      		push r18
 3585 14f8 8F93      		push r24
 3586 14fa 80E0      		ldi r24,lo8(.LC13)
 3587 14fc 90E0      		ldi r25,hi8(.LC13)
 3588 14fe 892F      		mov r24,r25
 3589 1500 8F93      		push r24
 3590 1502 80E0      		ldi r24,lo8(.LC13)
 3591 1504 90E0      		ldi r25,hi8(.LC13)
 3592 1506 8F93      		push r24
 3593 1508 0E94 0000 		call printf
 3594 150c 0F90      		pop __tmp_reg__
 3595 150e 0F90      		pop __tmp_reg__
 3596 1510 0F90      		pop __tmp_reg__
 3597 1512 0F90      		pop __tmp_reg__
 3598 1514 0F90      		pop __tmp_reg__
 3599 1516 0F90      		pop __tmp_reg__
 3600               	.LBE13:
 864:ServerLLDN.c  **** 				}
 3601               		.loc 6 864 0
 3602 1518 00C0      		rjmp .L118
 3603               	.L93:
 3604               	.LBB15:
 868:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3605               		.loc 6 868 0
 3606 151a 1886      		std Y+8,__zero_reg__
 3607 151c 1F82      		std Y+7,__zero_reg__
 3608 151e 00C0      		rjmp .L107
 3609               	.L108:
 869:ServerLLDN.c  **** 					ACKFrame_size = 0;
 3610               		.loc 6 869 0 discriminator 3
 3611 1520 8F81      		ldd r24,Y+7
 3612 1522 9885      		ldd r25,Y+8
 3613 1524 8050      		subi r24,lo8(-(ACKFrame+1))
 3614 1526 9040      		sbci r25,hi8(-(ACKFrame+1))
 3615 1528 FC01      		movw r30,r24
 3616 152a 1082      		st Z,__zero_reg__
 868:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3617               		.loc 6 868 0 discriminator 3
 3618 152c 8F81      		ldd r24,Y+7
 3619 152e 9885      		ldd r25,Y+8
 3620 1530 0196      		adiw r24,1
 3621 1532 9887      		std Y+8,r25
 3622 1534 8F83      		std Y+7,r24
 3623               	.L107:
 868:ServerLLDN.c  **** 						ACKFrame.ackFlags[i] = 0;
 3624               		.loc 6 868 0 is_stmt 0 discriminator 1
 3625 1536 8F81      		ldd r24,Y+7
 3626 1538 9885      		ldd r25,Y+8
 3627 153a 8097      		sbiw r24,32
 3628 153c 04F0      		brlt .L108
 3629               	.LBE15:
 870:ServerLLDN.c  **** 					
 3630               		.loc 6 870 0 is_stmt 1
 3631 153e 1092 0000 		sts ACKFrame_size+1,__zero_reg__
 3632 1542 1092 0000 		sts ACKFrame_size,__zero_reg__
 872:ServerLLDN.c  **** 					msgReq.dstEndpoint	= APP_BEACON_ENDPOINT;
 3633               		.loc 6 872 0
 3634 1546 1092 0000 		sts msgReq+5+1,__zero_reg__
 3635 154a 1092 0000 		sts msgReq+5,__zero_reg__
 873:ServerLLDN.c  **** 					msgReq.srcEndpoint	= APP_BEACON_ENDPOINT;
 3636               		.loc 6 873 0
 3637 154e 1092 0000 		sts msgReq+7,__zero_reg__
 874:ServerLLDN.c  **** 					msgReq.options		= NWK_OPT_LLDN_ACK;
 3638               		.loc 6 874 0
 3639 1552 1092 0000 		sts msgReq+8,__zero_reg__
 875:ServerLLDN.c  **** 					msgReq.data	= (uint8_t *)&ACKFrame;
 3640               		.loc 6 875 0
 3641 1556 80E0      		ldi r24,0
 3642 1558 90E4      		ldi r25,lo8(64)
 3643 155a 9093 0000 		sts msgReq+9+1,r25
 3644 155e 8093 0000 		sts msgReq+9,r24
 876:ServerLLDN.c  **** 					msgReq.size	= sizeof(uint8_t)*(macLLDNRetransmitTS + 1);
 3645               		.loc 6 876 0
 3646 1562 80E0      		ldi r24,lo8(ACKFrame)
 3647 1564 90E0      		ldi r25,hi8(ACKFrame)
 3648 1566 9093 0000 		sts msgReq+13+1,r25
 3649 156a 8093 0000 		sts msgReq+13,r24
 877:ServerLLDN.c  **** 					
 3650               		.loc 6 877 0
 3651 156e 8091 0000 		lds r24,macLLDNRetransmitTS
 3652 1572 9091 0000 		lds r25,macLLDNRetransmitTS+1
 3653 1576 8F5F      		subi r24,lo8(-(1))
 3654 1578 8093 0000 		sts msgReq+15,r24
 879:ServerLLDN.c  **** 					appPanState = APP_PAN_STATE_CHECK_TS;
 3655               		.loc 6 879 0
 3656 157c 81E0      		ldi r24,lo8(1)
 3657 157e 8093 0000 		sts appState,r24
 880:ServerLLDN.c  **** 					break;
 3658               		.loc 6 880 0
 3659 1582 8CE0      		ldi r24,lo8(12)
 3660 1584 8093 0000 		sts appPanState,r24
 881:ServerLLDN.c  **** 				}				
 3661               		.loc 6 881 0
 3662 1588 00C0      		rjmp .L80
 3663               	.L92:
 885:ServerLLDN.c  **** 					{
 3664               		.loc 6 885 0
 3665 158a 8091 0000 		lds r24,timeslot_counter
 3666 158e 282F      		mov r18,r24
 3667 1590 30E0      		ldi r19,0
 3668 1592 8091 0000 		lds r24,macLLDNnumUplinkTS
 3669 1596 9091 0000 		lds r25,macLLDNnumUplinkTS+1
 3670 159a 0296      		adiw r24,2
 3671 159c 2817      		cp r18,r24
 3672 159e 3907      		cpc r19,r25
 3673 15a0 04F4      		brge .+2
 3674 15a2 00C0      		rjmp .L109
 887:ServerLLDN.c  **** 						{
 3675               		.loc 6 887 0
 3676 15a4 9091 0000 		lds r25,association_request
 3677 15a8 81E0      		ldi r24,lo8(1)
 3678 15aa 8927      		eor r24,r25
 3679 15ac 8823      		tst r24
 3680 15ae 01F0      		breq .L110
 889:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3681               		.loc 6 889 0
 3682 15b0 80E0      		ldi r24,lo8(gs(end_of_association_delay_handler))
 3683 15b2 90E0      		ldi r25,hi8(gs(end_of_association_delay_handler))
 3684 15b4 0E94 0000 		call macsc_set_cmp1_int_cb
 890:ServerLLDN.c  **** 							macsc_enable_manual_bts();
 3685               		.loc 6 890 0
 3686 15b8 81E0      		ldi r24,lo8(1)
 3687 15ba 0E94 0000 		call macsc_disable_cmp_int
 891:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3688               		.loc 6 891 0
 3689 15be 0E94 0000 		call macsc_enable_manual_bts
 892:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, 5 * beaconInterval_association, MACSC_CC1);
 3690               		.loc 6 892 0
 3691 15c2 81E0      		ldi r24,lo8(1)
 3692 15c4 0E94 0000 		call macsc_enable_cmp_int
 893:ServerLLDN.c  **** 						}
 3693               		.loc 6 893 0
 3694 15c8 8091 0000 		lds r24,beaconInterval_association
 3695 15cc 9091 0000 		lds r25,beaconInterval_association+1
 3696 15d0 A091 0000 		lds r26,beaconInterval_association+2
 3697 15d4 B091 0000 		lds r27,beaconInterval_association+3
 3698 15d8 20E0      		ldi r18,0
 3699 15da 30E0      		ldi r19,0
 3700 15dc 40EA      		ldi r20,lo8(-96)
 3701 15de 50E4      		ldi r21,lo8(64)
 3702 15e0 BC01      		movw r22,r24
 3703 15e2 CD01      		movw r24,r26
 3704 15e4 0E94 0000 		call __mulsf3
 3705 15e8 DC01      		movw r26,r24
 3706 15ea CB01      		movw r24,r22
 3707 15ec BC01      		movw r22,r24
 3708 15ee CD01      		movw r24,r26
 3709 15f0 0E94 0000 		call __fixunssfsi
 3710 15f4 DC01      		movw r26,r24
 3711 15f6 CB01      		movw r24,r22
 3712 15f8 21E0      		ldi r18,lo8(1)
 3713 15fa AC01      		movw r20,r24
 3714 15fc BD01      		movw r22,r26
 3715 15fe 81E0      		ldi r24,lo8(1)
 3716 1600 0E94 0000 		call macsc_use_cmp
 3717 1604 00C0      		rjmp .L111
 3718               	.L110:
 897:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC1);
 3719               		.loc 6 897 0
 3720 1606 80E0      		ldi r24,lo8(.LC14)
 3721 1608 90E0      		ldi r25,hi8(.LC14)
 3722 160a 892F      		mov r24,r25
 3723 160c 8F93      		push r24
 3724 160e 80E0      		ldi r24,lo8(.LC14)
 3725 1610 90E0      		ldi r25,hi8(.LC14)
 3726 1612 8F93      		push r24
 3727 1614 0E94 0000 		call printf
 3728 1618 0F90      		pop __tmp_reg__
 3729 161a 0F90      		pop __tmp_reg__
 898:ServerLLDN.c  **** 							macsc_disable_cmp_int(MACSC_CC2);
 3730               		.loc 6 898 0
 3731 161c 81E0      		ldi r24,lo8(1)
 3732 161e 0E94 0000 		call macsc_disable_cmp_int
 899:ServerLLDN.c  **** 							
 3733               		.loc 6 899 0
 3734 1622 82E0      		ldi r24,lo8(2)
 3735 1624 0E94 0000 		call macsc_disable_cmp_int
 3736               	.L111:
 902:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3737               		.loc 6 902 0
 3738 1628 81E0      		ldi r24,lo8(1)
 3739 162a 8093 0000 		sts appState,r24
 903:ServerLLDN.c  **** 					}
 3740               		.loc 6 903 0
 3741 162e 1092 0000 		sts appPanState,__zero_reg__
 946:ServerLLDN.c  **** 				}
 3742               		.loc 6 946 0
 3743 1632 00C0      		rjmp .L80
 3744               	.L109:
 909:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 3745               		.loc 6 909 0
 3746 1634 8091 0000 		lds r24,timeslot_counter
 3747 1638 8230      		cpi r24,lo8(2)
 3748 163a 00F0      		brlo .L113
 909:ServerLLDN.c  **** 							nodes_info_arr[timeslot_counter - 2*MacLLDNMgmtTS].msg_not_rec++;
 3749               		.loc 6 909 0 is_stmt 0 discriminator 1
 3750 163c 9091 0000 		lds r25,data_received
 3751 1640 81E0      		ldi r24,lo8(1)
 3752 1642 8927      		eor r24,r25
 3753 1644 8823      		tst r24
 3754 1646 01F0      		breq .L113
 910:ServerLLDN.c  **** 						data_received = false;
 3755               		.loc 6 910 0 is_stmt 1
 3756 1648 8091 0000 		lds r24,timeslot_counter
 3757 164c 882F      		mov r24,r24
 3758 164e 90E0      		ldi r25,0
 3759 1650 0297      		sbiw r24,2
 3760 1652 4AE4      		ldi r20,lo8(74)
 3761 1654 489F      		mul r20,r24
 3762 1656 9001      		movw r18,r0
 3763 1658 499F      		mul r20,r25
 3764 165a 300D      		add r19,r0
 3765 165c 1124      		clr __zero_reg__
 3766 165e 2050      		subi r18,lo8(-(nodes_info_arr+71))
 3767 1660 3040      		sbci r19,hi8(-(nodes_info_arr+71))
 3768 1662 F901      		movw r30,r18
 3769 1664 2081      		ld r18,Z
 3770 1666 3181      		ldd r19,Z+1
 3771 1668 2F5F      		subi r18,-1
 3772 166a 3F4F      		sbci r19,-1
 3773 166c 6AE4      		ldi r22,lo8(74)
 3774 166e 689F      		mul r22,r24
 3775 1670 A001      		movw r20,r0
 3776 1672 699F      		mul r22,r25
 3777 1674 500D      		add r21,r0
 3778 1676 1124      		clr __zero_reg__
 3779 1678 CA01      		movw r24,r20
 3780 167a 8050      		subi r24,lo8(-(nodes_info_arr+71))
 3781 167c 9040      		sbci r25,hi8(-(nodes_info_arr+71))
 3782 167e FC01      		movw r30,r24
 3783 1680 3183      		std Z+1,r19
 3784 1682 2083      		st Z,r18
 3785               	.L113:
 911:ServerLLDN.c  **** 						
 3786               		.loc 6 911 0
 3787 1684 1092 0000 		sts data_received,__zero_reg__
 913:ServerLLDN.c  **** 						
 3788               		.loc 6 913 0
 3789 1688 8091 0000 		lds r24,timeslot_counter
 3790 168c 882F      		mov r24,r24
 3791 168e 90E0      		ldi r25,0
 3792 1690 292F      		mov r18,r25
 3793 1692 2F93      		push r18
 3794 1694 8F93      		push r24
 3795 1696 80E0      		ldi r24,lo8(.LC15)
 3796 1698 90E0      		ldi r25,hi8(.LC15)
 3797 169a 892F      		mov r24,r25
 3798 169c 8F93      		push r24
 3799 169e 80E0      		ldi r24,lo8(.LC15)
 3800 16a0 90E0      		ldi r25,hi8(.LC15)
 3801 16a2 8F93      		push r24
 3802 16a4 0E94 0000 		call printf
 3803 16a8 0F90      		pop __tmp_reg__
 3804 16aa 0F90      		pop __tmp_reg__
 3805 16ac 0F90      		pop __tmp_reg__
 3806 16ae 0F90      		pop __tmp_reg__
 915:ServerLLDN.c  **** 						{
 3807               		.loc 6 915 0
 3808 16b0 8091 0000 		lds r24,timeslot_counter
 3809 16b4 8130      		cpi r24,lo8(1)
 3810 16b6 01F4      		brne .L114
 917:ServerLLDN.c  **** 							macsc_use_cmp(MACSC_RELATIVE_CMP, tTS / (SYMBOL_TIME), MACSC_CC1);
 3811               		.loc 6 917 0
 3812 16b8 81E0      		ldi r24,lo8(1)
 3813 16ba 0E94 0000 		call macsc_disable_cmp_int
 918:ServerLLDN.c  **** 							macsc_enable_cmp_int(MACSC_CC1);
 3814               		.loc 6 918 0
 3815 16be 8091 0000 		lds r24,tTS
 3816 16c2 9091 0000 		lds r25,tTS+1
 3817 16c6 A091 0000 		lds r26,tTS+2
 3818 16ca B091 0000 		lds r27,tTS+3
 3819 16ce 2DEB      		ldi r18,lo8(-67)
 3820 16d0 37E3      		ldi r19,lo8(55)
 3821 16d2 46E8      		ldi r20,lo8(-122)
 3822 16d4 57E3      		ldi r21,lo8(55)
 3823 16d6 BC01      		movw r22,r24
 3824 16d8 CD01      		movw r24,r26
 3825 16da 0E94 0000 		call __divsf3
 3826 16de DC01      		movw r26,r24
 3827 16e0 CB01      		movw r24,r22
 3828 16e2 BC01      		movw r22,r24
 3829 16e4 CD01      		movw r24,r26
 3830 16e6 0E94 0000 		call __fixunssfsi
 3831 16ea DC01      		movw r26,r24
 3832 16ec CB01      		movw r24,r22
 3833 16ee 21E0      		ldi r18,lo8(1)
 3834 16f0 AC01      		movw r20,r24
 3835 16f2 BD01      		movw r22,r26
 3836 16f4 81E0      		ldi r24,lo8(1)
 3837 16f6 0E94 0000 		call macsc_use_cmp
 919:ServerLLDN.c  **** 						}
 3838               		.loc 6 919 0
 3839 16fa 81E0      		ldi r24,lo8(1)
 3840 16fc 0E94 0000 		call macsc_enable_cmp_int
 3841               	.L114:
 922:ServerLLDN.c  **** 						{
 3842               		.loc 6 922 0
 3843 1700 8091 0000 		lds r24,timeslot_counter
 3844 1704 282F      		mov r18,r24
 3845 1706 30E0      		ldi r19,0
 3846 1708 8091 0000 		lds r24,macLLDNRetransmitTS
 3847 170c 9091 0000 		lds r25,macLLDNRetransmitTS+1
 3848 1710 0296      		adiw r24,2
 3849 1712 2817      		cp r18,r24
 3850 1714 3907      		cpc r19,r25
 3851 1716 01F4      		brne .L115
 924:ServerLLDN.c  **** 							printf("\nack_frame %hhx", ACKFrame.ackFlags[0]);
 3852               		.loc 6 924 0
 3853 1718 81E0      		ldi r24,lo8(1)
 3854 171a 8093 0000 		sts data_received,r24
 925:ServerLLDN.c  **** 							appSendData();
 3855               		.loc 6 925 0
 3856 171e 8091 0000 		lds r24,ACKFrame+1
 3857 1722 882F      		mov r24,r24
 3858 1724 90E0      		ldi r25,0
 3859 1726 292F      		mov r18,r25
 3860 1728 2F93      		push r18
 3861 172a 8F93      		push r24
 3862 172c 80E0      		ldi r24,lo8(.LC16)
 3863 172e 90E0      		ldi r25,hi8(.LC16)
 3864 1730 892F      		mov r24,r25
 3865 1732 8F93      		push r24
 3866 1734 80E0      		ldi r24,lo8(.LC16)
 3867 1736 90E0      		ldi r25,hi8(.LC16)
 3868 1738 8F93      		push r24
 3869 173a 0E94 0000 		call printf
 3870 173e 0F90      		pop __tmp_reg__
 3871 1740 0F90      		pop __tmp_reg__
 3872 1742 0F90      		pop __tmp_reg__
 3873 1744 0F90      		pop __tmp_reg__
 926:ServerLLDN.c  **** 							appPanState = APP_PAN_STATE_IDLE;
 3874               		.loc 6 926 0
 3875 1746 0E94 0000 		call appSendData
 927:ServerLLDN.c  **** 						}
 3876               		.loc 6 927 0
 3877 174a 1092 0000 		sts appPanState,__zero_reg__
 3878 174e 00C0      		rjmp .L116
 3879               	.L115:
 930:ServerLLDN.c  **** 						timeslot_counter++;
 3880               		.loc 6 930 0
 3881 1750 81E0      		ldi r24,lo8(1)
 3882 1752 8093 0000 		sts appState,r24
 3883               	.L116:
 931:ServerLLDN.c  **** 						appPanState = APP_PAN_STATE_IDLE;
 3884               		.loc 6 931 0
 3885 1756 8091 0000 		lds r24,timeslot_counter
 3886 175a 8F5F      		subi r24,lo8(-(1))
 3887 175c 8093 0000 		sts timeslot_counter,r24
 932:ServerLLDN.c  **** 						appState = APP_STATE_IDLE;
 3888               		.loc 6 932 0
 3889 1760 1092 0000 		sts appPanState,__zero_reg__
 933:ServerLLDN.c  **** 						
 3890               		.loc 6 933 0
 3891 1764 81E0      		ldi r24,lo8(1)
 3892 1766 8093 0000 		sts appState,r24
 943:ServerLLDN.c  **** 						
 3893               		.loc 6 943 0
 3894 176a 0E94 0000 		call macsc_enable_manual_bts
 946:ServerLLDN.c  **** 				}
 3895               		.loc 6 946 0
 3896 176e 00C0      		rjmp .L80
 3897               	.L81:
 950:ServerLLDN.c  **** 					appState = APP_STATE_IDLE;
 3898               		.loc 6 950 0
 3899 1770 1092 0000 		sts msgReq+9+1,__zero_reg__
 3900 1774 1092 0000 		sts msgReq+9,__zero_reg__
 951:ServerLLDN.c  **** 					break;
 3901               		.loc 6 951 0
 3902 1778 81E0      		ldi r24,lo8(1)
 3903 177a 8093 0000 		sts appState,r24
 952:ServerLLDN.c  **** 				}
 3904               		.loc 6 952 0
 3905 177e 00C0      		rjmp .L80
 3906               	.L118:
 864:ServerLLDN.c  **** 				}
 3907               		.loc 6 864 0
 3908 1780 0000      		nop
 3909               	.L80:
 3910               	.L117:
 955:ServerLLDN.c  **** 		}
 3911               		.loc 6 955 0
 3912 1782 0000      		nop
 3913               	.L79:
1030:ServerLLDN.c  **** 		}
1031:ServerLLDN.c  **** 	}
1032:ServerLLDN.c  **** }
 3914               		.loc 6 1032 0
 3915 1784 0000      		nop
 3916               	/* epilogue start */
 3917 1786 2896      		adiw r28,8
 3918 1788 0FB6      		in __tmp_reg__,__SREG__
 3919 178a F894      		cli
 3920 178c DEBF      		out __SP_H__,r29
 3921 178e 0FBE      		out __SREG__,__tmp_reg__
 3922 1790 CDBF      		out __SP_L__,r28
 3923 1792 DF91      		pop r29
 3924 1794 CF91      		pop r28
 3925 1796 FF90      		pop r15
 3926 1798 EF90      		pop r14
 3927 179a DF90      		pop r13
 3928 179c CF90      		pop r12
 3929 179e 0895      		ret
 3930               		.cfi_endproc
 3931               	.LFE147:
 3933               		.section	.rodata
 3934               	.LC0:
 3935 00f6 00        		.byte	0
 3936 00f7 C2        		.byte	-62
 3937 00f8 01        		.byte	1
 3938 00f9 00        		.byte	0
 3939 00fa 03        		.byte	3
 3940 00fb 00        		.byte	0
 3941 00fc 00        		.byte	0
 3942               		.text
 3943               	.global	main
 3945               	main:
 3946               	.LFB148:
1033:ServerLLDN.c  **** 
1034:ServerLLDN.c  **** 	/*****************************************************************************
1035:ServerLLDN.c  **** 	*****************************************************************************/
1036:ServerLLDN.c  **** 	int main(void)
1037:ServerLLDN.c  **** 	{
 3947               		.loc 6 1037 0
 3948               		.cfi_startproc
 3949 17a0 0F93      		push r16
 3950               	.LCFI109:
 3951               		.cfi_def_cfa_offset 3
 3952               		.cfi_offset 16, -2
 3953 17a2 1F93      		push r17
 3954               	.LCFI110:
 3955               		.cfi_def_cfa_offset 4
 3956               		.cfi_offset 17, -3
 3957 17a4 CF93      		push r28
 3958               	.LCFI111:
 3959               		.cfi_def_cfa_offset 5
 3960               		.cfi_offset 28, -4
 3961 17a6 DF93      		push r29
 3962               	.LCFI112:
 3963               		.cfi_def_cfa_offset 6
 3964               		.cfi_offset 29, -5
 3965 17a8 CDB7      		in r28,__SP_L__
 3966 17aa DEB7      		in r29,__SP_H__
 3967               	.LCFI113:
 3968               		.cfi_def_cfa_register 28
 3969 17ac 2797      		sbiw r28,7
 3970               	.LCFI114:
 3971               		.cfi_def_cfa_offset 13
 3972 17ae 0FB6      		in __tmp_reg__,__SREG__
 3973 17b0 F894      		cli
 3974 17b2 DEBF      		out __SP_H__,r29
 3975 17b4 0FBE      		out __SREG__,__tmp_reg__
 3976 17b6 CDBF      		out __SP_L__,r28
 3977               	/* prologue: function */
 3978               	/* frame size = 7 */
 3979               	/* stack size = 11 */
 3980               	.L__stack_usage = 11
1038:ServerLLDN.c  **** 		sysclk_init();
 3981               		.loc 6 1038 0
 3982 17b8 0E94 0000 		call sysclk_init
1039:ServerLLDN.c  **** 		board_init();
 3983               		.loc 6 1039 0
 3984 17bc 0E94 0000 		call board_init
1040:ServerLLDN.c  **** 
1041:ServerLLDN.c  **** 		SYS_Init();
 3985               		.loc 6 1041 0
 3986 17c0 0E94 0000 		call SYS_Init
1042:ServerLLDN.c  **** 		/* Disable CSMA/CA
1043:ServerLLDN.c  **** 		 * Disable auto ACK
1044:ServerLLDN.c  **** 		 * Enable Rx of LLDN Frame Type as described in 802.15.4e - 2012 
1045:ServerLLDN.c  **** 		 */
1046:ServerLLDN.c  **** 
1047:ServerLLDN.c  **** 		sm_init();
 3987               		.loc 6 1047 0
 3988 17c4 0E94 0000 		call sm_init
1048:ServerLLDN.c  **** 
1049:ServerLLDN.c  **** 		// Initialize interrupt vector table support.
1050:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1051:ServerLLDN.c  **** 		irq_initialize_vectors();
1052:ServerLLDN.c  **** 	#endif
1053:ServerLLDN.c  **** 		cpu_irq_enable();
 3989               		.loc 6 1053 0
 3990               	/* #APP */
 3991               	 ;  1053 "ServerLLDN.c" 1
 3992 17c8 7894      		sei
 3993               	 ;  0 "" 2
1054:ServerLLDN.c  **** 
1055:ServerLLDN.c  **** 	#if 1
1056:ServerLLDN.c  **** 	#if (SIO2HOST_CHANNEL == SIO_USB)
1057:ServerLLDN.c  **** 		stdio_usb_init();
1058:ServerLLDN.c  **** 	#else
1059:ServerLLDN.c  **** 		const usart_serial_options_t usart_serial_options =
 3994               		.loc 6 1059 0
 3995               	/* #NOAPP */
 3996 17ca 27E0      		ldi r18,lo8(7)
 3997 17cc E0E0      		ldi r30,lo8(.LC0)
 3998 17ce F0E0      		ldi r31,hi8(.LC0)
 3999 17d0 CE01      		movw r24,r28
 4000 17d2 0196      		adiw r24,1
 4001 17d4 DC01      		movw r26,r24
 4002               		0:
 4003 17d6 0190      		ld r0,Z+
 4004 17d8 0D92      		st X+,r0
 4005 17da 2A95      		dec r18
 4006 17dc 01F4      		brne 0b
1060:ServerLLDN.c  **** 		{
1061:ServerLLDN.c  **** 			.baudrate     = USART_HOST_BAUDRATE,
1062:ServerLLDN.c  **** 			.charlength   = USART_HOST_CHAR_LENGTH,
1063:ServerLLDN.c  **** 			.paritytype   = USART_HOST_PARITY,
1064:ServerLLDN.c  **** 			.stopbits     = USART_HOST_STOP_BITS
1065:ServerLLDN.c  **** 		};
1066:ServerLLDN.c  **** 
1067:ServerLLDN.c  **** 		stdio_serial_init(USART_HOST, &usart_serial_options);
 4007               		.loc 6 1067 0
 4008 17de CE01      		movw r24,r28
 4009 17e0 0196      		adiw r24,1
 4010 17e2 BC01      		movw r22,r24
 4011 17e4 80EC      		ldi r24,lo8(-64)
 4012 17e6 90E0      		ldi r25,0
 4013 17e8 0E94 0000 		call stdio_serial_init
1068:ServerLLDN.c  **** 		usart_double_baud_enable(USART_HOST);
 4014               		.loc 6 1068 0
 4015 17ec 80EC      		ldi r24,lo8(-64)
 4016 17ee 90E0      		ldi r25,0
 4017 17f0 0E94 0000 		call usart_double_baud_enable
1069:ServerLLDN.c  **** 		usart_set_baudrate_precalculated(USART_HOST, USART_HOST_BAUDRATE, sysclk_get_source_clock_hz());
 4018               		.loc 6 1069 0
 4019 17f4 0E94 0000 		call sysclk_get_source_clock_hz
 4020 17f8 DC01      		movw r26,r24
 4021 17fa CB01      		movw r24,r22
 4022 17fc 8C01      		movw r16,r24
 4023 17fe 9D01      		movw r18,r26
 4024 1800 40E0      		ldi r20,0
 4025 1802 52EC      		ldi r21,lo8(-62)
 4026 1804 61E0      		ldi r22,lo8(1)
 4027 1806 70E0      		ldi r23,0
 4028 1808 80EC      		ldi r24,lo8(-64)
 4029 180a 90E0      		ldi r25,0
 4030 180c 0E94 0000 		call usart_set_baudrate_precalculated
 4031               	.L120:
1070:ServerLLDN.c  **** 
1071:ServerLLDN.c  **** 	#endif
1072:ServerLLDN.c  **** 	#endif
1073:ServerLLDN.c  **** 		for(;;)
1074:ServerLLDN.c  **** 		{
1075:ServerLLDN.c  **** 			SYS_TaskHandler();
 4032               		.loc 6 1075 0 discriminator 1
 4033 1810 0E94 0000 		call SYS_TaskHandler
1076:ServerLLDN.c  **** 			APP_TaskHandler();
 4034               		.loc 6 1076 0 discriminator 1
 4035 1814 0E94 0000 		call APP_TaskHandler
1077:ServerLLDN.c  **** 		}
 4036               		.loc 6 1077 0 discriminator 1
 4037 1818 00C0      		rjmp .L120
 4038               		.cfi_endproc
 4039               	.LFE148:
 4041               	.Letext0:
 4042               		.file 7 "c:\\program files (x86)\\atmel\\studio\\7.0\\toolchain\\avr8\\avr8-gnu-toolchain\\avr\\in
 4043               		.file 8 "../../../stack/LwMesh/TDMA/nwk/inc/nwkRx.h"
 4044               		.file 9 "../../../stack/LwMesh/TDMA/nwk/inc/nwkDataReq.h"
 4045               		.file 10 "../../../stack/LwMesh/TDMA/sys/inc/sysTimer.h"
 4046               		.file 11 "../../../platform/mega_rf/drivers/sleep/sleep.h"
 4047               		.file 12 "lldn.h"
 4048               		.file 13 "../../../platform/mega_rf/utils/status_codes.h"
 4049               		.file 14 "config/config.h"
 4050               		.file 15 "../../../platform/common/services/sleepmgr/mega_rf/sleepmgr.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ServerLLDN.c
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2      *ABS*:0000003e __SP_H__
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:3      *ABS*:0000003d __SP_L__
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:4      *ABS*:0000003f __SREG__
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:5      *ABS*:0000003b __RAMPZ__
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:7      *ABS*:00000001 __zero_reg__
                            *COM*:00000001 n
                            *COM*:00000004 tTS
                            *COM*:00000002 macLLDNnumTimeSlots
                            *COM*:00000002 macLLDNnumUplinkTS
                            *COM*:00000002 macLLDNRetransmitTS
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:17     .text:00000000 sysclk_get_main_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:54     .text:0000001a sysclk_get_source_clock_hz
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:91     .progmem.data.baudctrl_1mhz:00000000 baudctrl_1mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:103    .progmem.data.baudctrl_8mhz:00000000 baudctrl_8mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:115    .progmem.data.baudctrl_16mhz:00000000 baudctrl_16mhz
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:126    .text:00000034 usart_double_baud_enable
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:175    .text:00000062 usart_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:270    .text:000000de usart_serial_putchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:314    .text:00000106 usart_serial_getchar
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:365    .text:0000013c stdio_serial_init
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:436    .text:0000019e macsc_enable_manual_bts
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:490    .bss.appState:00000000 appState
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:495    .bss.msgReq:00000000 msgReq
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:500    .bss.PanId:00000000 PanId
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:508    .text:000001d2 appSendData
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:570    .data.appPanState:00000000 appPanState
                            *COM*:00000e74 nodes_info_arr
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:577    .data.config_request_frame:00000000 config_request_frame
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:587    .bss.conf_req_list:00000000 conf_req_list
                            *COM*:00000021 ACKFrame
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:594    .bss.ACKFrame_size:00000000 ACKFrame_size
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:600    .bss.beaconInterval:00000000 beaconInterval
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:606    .bss.beaconInterval_association:00000000 beaconInterval_association
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:611    .bss.tmrDelay:00000000 tmrDelay
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:617    .bss.assTimeSlot:00000000 assTimeSlot
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:623    .bss.timeslot_counter:00000000 timeslot_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:629    .bss.counter_associados:00000000 counter_associados
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:635    .data.cycles_counter:00000000 cycles_counter
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:641    .bss.association_request:00000000 association_request
                            *COM*:000019c8 msg_info_array
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:648    .bss.size_msg_info:00000000 size_msg_info
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:654    .bss.data_received:00000000 data_received
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:660    .bss.succes_rate:00000000 succes_rate
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:666    .bss.counter_delay_msg:00000000 counter_delay_msg
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:673    .text:0000021e tmrDelayHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:724    .text:00000254 lldn_server_beacon
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:763    .text:0000026e time_slot_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:810    .text:000002a0 downlink_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:856    .text:000002d6 end_of_association_delay_handler
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:892    .text:000002f2 addToAckArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:1001   .text:00000392 addConfRequestArray
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:1235   .text:0000052e CopyToConfigRequest
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:1324   .text:000005b0 appCommandInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:1472   .text:0000068a check_ack_pan
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:1587   .text:00000714 appDataInd
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2088   .text:00000a70 appPanPrepareACK
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2140   .text:00000ab6 appPanReset
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2348   .text:00000bfa appPanDiscInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2536   .text:00000d64 appPanOnlineInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2763   .text:00000f2c appInit
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:2861   .text:00000fa2 APP_TaskHandler
C:\Users\GUILHE~1\AppData\Local\Temp\ccmPfZ57.s:3945   .text:000017a0 main

UNDEFINED SYMBOLS
usart_init_rs232
usart_putchar
usart_getchar
stdio_base
ptr_put
ptr_get
_read
_write
fdevopen
printf
NWK_DataReq
malloc
free
__floatsisf
__floatunsisf
__mulsf3
__addsf3
__divsf3
__fixunssfsi
macsc_set_cmp1_int_cb
macsc_enable_cmp_int
macsc_use_cmp
NWK_OpenEndpoint
NWK_SetAddr
PHY_SetChannel
PHY_SetRxState
NWK_SetPanId
PHY_SetTdmaMode
PHY_SetPromiscuousMode
__subsf3
__tablejump2__
macsc_disable_cmp_int
SYS_TimerStart
puts
sysclk_init
board_init
SYS_Init
sm_init
usart_set_baudrate_precalculated
SYS_TaskHandler
__do_copy_data
__do_clear_bss
